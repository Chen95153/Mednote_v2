(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function hS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ep={exports:{}},jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function _I(){if(X0)return jl;X0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:l}}return jl.Fragment=e,jl.jsx=t,jl.jsxs=t,jl}var W0;function TI(){return W0||(W0=1,Ep.exports=_I()),Ep.exports}var C=TI(),Sp={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function EI(){if(j0)return Ve;j0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,k={};function K(F,j,ue){this.props=F,this.context=j,this.refs=k,this.updater=ue||O}K.prototype.isReactComponent={},K.prototype.setState=function(F,j){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,j,"setState")},K.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function B(){}B.prototype=K.prototype;function ee(F,j,ue){this.props=F,this.context=j,this.refs=k,this.updater=ue||O}var oe=ee.prototype=new B;oe.constructor=ee,P(oe,K.prototype),oe.isPureReactComponent=!0;var fe=Array.isArray;function de(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(F,j,ue){var pe=ue.ref;return{$$typeof:n,type:F,key:j,ref:pe!==void 0?pe:null,props:ue}}function L(F,j){return R(F.type,j,F.props)}function V(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function q(F){var j={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ue){return j[ue]})}var D=/\/+/g;function Be(F,j){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):j.toString(36)}function at(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(de,de):(F.status="pending",F.then(function(j){F.status==="pending"&&(F.status="fulfilled",F.value=j)},function(j){F.status==="pending"&&(F.status="rejected",F.reason=j)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function X(F,j,ue,pe,we){var xe=typeof F;(xe==="undefined"||xe==="boolean")&&(F=null);var Le=!1;if(F===null)Le=!0;else switch(xe){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(F.$$typeof){case n:case e:Le=!0;break;case _:return Le=F._init,X(Le(F._payload),j,ue,pe,we)}}if(Le)return we=we(F),Le=pe===""?"."+Be(F,0):pe,fe(we)?(ue="",Le!=null&&(ue=Le.replace(D,"$&/")+"/"),X(we,j,ue,"",function(Mn){return Mn})):we!=null&&(V(we)&&(we=L(we,ue+(we.key==null||F&&F.key===we.key?"":(""+we.key).replace(D,"$&/")+"/")+Le)),j.push(we)),1;Le=0;var mt=pe===""?".":pe+":";if(fe(F))for(var lt=0;lt<F.length;lt++)pe=F[lt],xe=mt+Be(pe,lt),Le+=X(pe,j,ue,xe,we);else if(lt=w(F),typeof lt=="function")for(F=lt.call(F),lt=0;!(pe=F.next()).done;)pe=pe.value,xe=mt+Be(pe,lt++),Le+=X(pe,j,ue,xe,we);else if(xe==="object"){if(typeof F.then=="function")return X(at(F),j,ue,pe,we);throw j=String(F),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return Le}function ce(F,j,ue){if(F==null)return F;var pe=[],we=0;return X(F,pe,"","",function(xe){return j.call(ue,xe,we++)}),pe}function Ee(F){if(F._status===-1){var j=F._result;j=j(),j.then(function(ue){(F._status===0||F._status===-1)&&(F._status=1,F._result=ue)},function(ue){(F._status===0||F._status===-1)&&(F._status=2,F._result=ue)}),F._status===-1&&(F._status=0,F._result=j)}if(F._status===1)return F._result.default;throw F._result}var qe=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ze={map:ce,forEach:function(F,j,ue){ce(F,function(){j.apply(this,arguments)},ue)},count:function(F){var j=0;return ce(F,function(){j++}),j},toArray:function(F){return ce(F,function(j){return j})||[]},only:function(F){if(!V(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Ve.Activity=T,Ve.Children=ze,Ve.Component=K,Ve.Fragment=t,Ve.Profiler=r,Ve.PureComponent=ee,Ve.StrictMode=i,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},Ve.cache=function(F){return function(){return F.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(F,j,ue){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var pe=P({},F.props),we=F.key;if(j!=null)for(xe in j.key!==void 0&&(we=""+j.key),j)!N.call(j,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&j.ref===void 0||(pe[xe]=j[xe]);var xe=arguments.length-2;if(xe===1)pe.children=ue;else if(1<xe){for(var Le=Array(xe),mt=0;mt<xe;mt++)Le[mt]=arguments[mt+2];pe.children=Le}return R(F.type,we,pe)},Ve.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},Ve.createElement=function(F,j,ue){var pe,we={},xe=null;if(j!=null)for(pe in j.key!==void 0&&(xe=""+j.key),j)N.call(j,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(we[pe]=j[pe]);var Le=arguments.length-2;if(Le===1)we.children=ue;else if(1<Le){for(var mt=Array(Le),lt=0;lt<Le;lt++)mt[lt]=arguments[lt+2];we.children=mt}if(F&&F.defaultProps)for(pe in Le=F.defaultProps,Le)we[pe]===void 0&&(we[pe]=Le[pe]);return R(F,xe,we)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(F){return{$$typeof:f,render:F}},Ve.isValidElement=V,Ve.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:Ee}},Ve.memo=function(F,j){return{$$typeof:h,type:F,compare:j===void 0?null:j}},Ve.startTransition=function(F){var j=M.T,ue={};M.T=ue;try{var pe=F(),we=M.S;we!==null&&we(ue,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(de,qe)}catch(xe){qe(xe)}finally{j!==null&&ue.types!==null&&(j.types=ue.types),M.T=j}},Ve.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ve.use=function(F){return M.H.use(F)},Ve.useActionState=function(F,j,ue){return M.H.useActionState(F,j,ue)},Ve.useCallback=function(F,j){return M.H.useCallback(F,j)},Ve.useContext=function(F){return M.H.useContext(F)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(F,j){return M.H.useDeferredValue(F,j)},Ve.useEffect=function(F,j){return M.H.useEffect(F,j)},Ve.useEffectEvent=function(F){return M.H.useEffectEvent(F)},Ve.useId=function(){return M.H.useId()},Ve.useImperativeHandle=function(F,j,ue){return M.H.useImperativeHandle(F,j,ue)},Ve.useInsertionEffect=function(F,j){return M.H.useInsertionEffect(F,j)},Ve.useLayoutEffect=function(F,j){return M.H.useLayoutEffect(F,j)},Ve.useMemo=function(F,j){return M.H.useMemo(F,j)},Ve.useOptimistic=function(F,j){return M.H.useOptimistic(F,j)},Ve.useReducer=function(F,j,ue){return M.H.useReducer(F,j,ue)},Ve.useRef=function(F){return M.H.useRef(F)},Ve.useState=function(F){return M.H.useState(F)},Ve.useSyncExternalStore=function(F,j,ue){return M.H.useSyncExternalStore(F,j,ue)},Ve.useTransition=function(){return M.H.useTransition()},Ve.version="19.2.3",Ve}var Z0;function xm(){return Z0||(Z0=1,Sp.exports=EI()),Sp.exports}var ae=xm();const pS=hS(ae);var Ap={exports:{}},Zl={},Cp={exports:{}},bp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function SI(){return e_||(e_=1,(function(n){function e(X,ce){var Ee=X.length;X.push(ce);e:for(;0<Ee;){var qe=Ee-1>>>1,ze=X[qe];if(0<r(ze,ce))X[qe]=ce,X[Ee]=ze,Ee=qe;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var ce=X[0],Ee=X.pop();if(Ee!==ce){X[0]=Ee;e:for(var qe=0,ze=X.length,F=ze>>>1;qe<F;){var j=2*(qe+1)-1,ue=X[j],pe=j+1,we=X[pe];if(0>r(ue,Ee))pe<ze&&0>r(we,ue)?(X[qe]=we,X[pe]=Ee,qe=pe):(X[qe]=ue,X[j]=Ee,qe=j);else if(pe<ze&&0>r(we,Ee))X[qe]=we,X[pe]=Ee,qe=pe;else break e}}return ce}function r(X,ce){var Ee=X.sortIndex-ce.sortIndex;return Ee!==0?Ee:X.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var g=[],h=[],_=1,T=null,S=3,w=!1,O=!1,P=!1,k=!1,K=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function oe(X){for(var ce=t(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=X)i(h),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(h)}}function fe(X){if(P=!1,oe(X),!O)if(t(g)!==null)O=!0,de||(de=!0,q());else{var ce=t(h);ce!==null&&at(fe,ce.startTime-X)}}var de=!1,M=-1,N=5,R=-1;function L(){return k?!0:!(n.unstable_now()-R<N)}function V(){if(k=!1,de){var X=n.unstable_now();R=X;var ce=!0;try{e:{O=!1,P&&(P=!1,B(M),M=-1),w=!0;var Ee=S;try{t:{for(oe(X),T=t(g);T!==null&&!(T.expirationTime>X&&L());){var qe=T.callback;if(typeof qe=="function"){T.callback=null,S=T.priorityLevel;var ze=qe(T.expirationTime<=X);if(X=n.unstable_now(),typeof ze=="function"){T.callback=ze,oe(X),ce=!0;break t}T===t(g)&&i(g),oe(X)}else i(g);T=t(g)}if(T!==null)ce=!0;else{var F=t(h);F!==null&&at(fe,F.startTime-X),ce=!1}}break e}finally{T=null,S=Ee,w=!1}ce=void 0}}finally{ce?q():de=!1}}}var q;if(typeof ee=="function")q=function(){ee(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Be=D.port2;D.port1.onmessage=V,q=function(){Be.postMessage(null)}}else q=function(){K(V,0)};function at(X,ce){M=K(function(){X(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(X){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var Ee=S;S=ce;try{return X()}finally{S=Ee}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Ee=S;S=X;try{return ce()}finally{S=Ee}},n.unstable_scheduleCallback=function(X,ce,Ee){var qe=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?qe+Ee:qe):Ee=qe,X){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=Ee+ze,X={id:_++,callback:ce,priorityLevel:X,startTime:Ee,expirationTime:ze,sortIndex:-1},Ee>qe?(X.sortIndex=Ee,e(h,X),t(g)===null&&X===t(h)&&(P?(B(M),M=-1):P=!0,at(fe,Ee-qe))):(X.sortIndex=ze,e(g,X),O||w||(O=!0,de||(de=!0,q()))),X},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(X){var ce=S;return function(){var Ee=S;S=ce;try{return X.apply(this,arguments)}finally{S=Ee}}}})(bp)),bp}var t_;function AI(){return t_||(t_=1,Cp.exports=SI()),Cp.exports}var wp={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function CI(){if(n_)return Tn;n_=1;var n=xm();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Tn.createPortal=function(g,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(g,h,null,_)},Tn.flushSync=function(g){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=h,i.p=_,i.d.f()}},Tn.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(g,h))},Tn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Tn.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:w}):_==="script"&&i.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Tn.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(g)},Tn.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin);i.d.L(g,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Tn.preloadModule=function(g,h){if(typeof g=="string")if(h){var _=f(h.as,h.crossOrigin);i.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(g)},Tn.requestFormReset=function(g){i.d.r(g)},Tn.unstable_batchedUpdates=function(g,h){return g(h)},Tn.useFormState=function(g,h,_){return u.H.useFormState(g,h,_)},Tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Tn.version="19.2.3",Tn}var i_;function mS(){if(i_)return wp.exports;i_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),wp.exports=CI(),wp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function bI(){if(s_)return Zl;s_=1;var n=AI(),e=xm(),t=mS();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var o=s,a=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(a=o.return),s=o.return;while(s)}return o.tag===3?a:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function g(s){if(l(s)!==s)throw Error(i(188))}function h(s){var o=s.alternate;if(!o){if(o=l(s),o===null)throw Error(i(188));return o!==s?null:s}for(var a=s,c=o;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),s;if(v===c)return g(y),o;v=v.sibling}throw Error(i(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=v;break}if(I===c){A=!0,c=y,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,c=y;break}if(I===c){A=!0,c=v,a=y;break}I=I.sibling}if(!A)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?s:o}function _(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=_(s),o!==null)return o;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Be(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case K:return"Profiler";case k:return"StrictMode";case fe:return"Suspense";case de:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case O:return"Portal";case ee:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case oe:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return o=s.displayName||null,o!==null?o:Be(s.type)||"Memo";case N:o=s._payload,s=s._init;try{return Be(s(o))}catch{}}return null}var at=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},qe=[],ze=-1;function F(s){return{current:s}}function j(s){0>ze||(s.current=qe[ze],qe[ze]=null,ze--)}function ue(s,o){ze++,qe[ze]=s.current,s.current=o}var pe=F(null),we=F(null),xe=F(null),Le=F(null);function mt(s,o){switch(ue(xe,o),ue(we,s),ue(pe,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?_0(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=_0(o),s=T0(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}j(pe),ue(pe,s)}function lt(){j(pe),j(we),j(xe)}function Mn(s){s.memoizedState!==null&&ue(Le,s);var o=pe.current,a=T0(o,s.type);o!==a&&(ue(we,s),ue(pe,a))}function mi(s){we.current===s&&(j(pe),j(we)),Le.current===s&&(j(Le),Jl._currentValue=Ee)}var Fn,gi;function rn(s){if(Fn===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Fn=o&&o[1]||"",gi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fn+s+gi}var ki=!1;function an(s,o){if(!s||ki)return"";ki=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var Q=Z}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(Z){Q=Z}s.call(ie.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var U=A.split(`
`),J=I.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===J.length)for(c=U.length-1,y=J.length-1;1<=c&&0<=y&&U[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==J[y]){var te=`
`+U[c].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=c&&0<=y);break}}}finally{ki=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?rn(a):""}function fs(s,o){switch(s.tag){case 26:case 27:case 5:return rn(s.type);case 16:return rn("Lazy");case 13:return s.child!==o&&o!==null?rn("Suspense Fallback"):rn("Suspense");case 19:return rn("SuspenseList");case 0:case 15:return an(s.type,!1);case 11:return an(s.type.render,!1);case 1:return an(s.type,!0);case 31:return rn("Activity");default:return""}}function zs(s){try{var o="",a=null;do o+=fs(s,a),a=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var bt=Object.prototype.hasOwnProperty,wt=n.unstable_scheduleCallback,yi=n.unstable_cancelCallback,Ks=n.unstable_shouldYield,Qo=n.unstable_requestPaint,Pt=n.unstable_now,Vi=n.unstable_getCurrentPriorityLevel,hs=n.unstable_ImmediatePriority,Ys=n.unstable_UserBlockingPriority,wn=n.unstable_NormalPriority,Ui=n.unstable_LowPriority,jn=n.unstable_IdlePriority,$s=n.log,vi=n.unstable_setDisableYieldValue,Qt=null,kt=null;function vn(s){if(typeof $s=="function"&&vi(s),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(Qt,s)}catch{}}var Et=Math.clz32?Math.clz32:Qs,Js=Math.log,Li=Math.LN2;function Qs(s){return s>>>=0,s===0?32:31-(Js(s)/Li|0)|0}var Dn=256,le=262144,_e=4194304;function be(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Se(s,o,a){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var I=c&134217727;return I!==0?(c=I&~v,c!==0?y=be(c):(A&=I,A!==0?y=be(A):a||(a=I&~s,a!==0&&(y=be(a))))):(I=c&~v,I!==0?y=be(I):A!==0?y=be(A):a||(a=c&~s,a!==0&&(y=be(a)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:y}function nt(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function ln(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _n(){var s=_e;return _e<<=1,(_e&62914560)===0&&(_e=4194304),s}function Xt(s){for(var o=[],a=0;31>a;a++)o.push(s);return o}function un(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Xs(s,o,a,c,y,v){var A=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var I=s.entanglements,U=s.expirationTimes,J=s.hiddenUpdates;for(a=A&~a;0<a;){var te=31-Et(a),ie=1<<te;I[te]=0,U[te]=-1;var Q=J[te];if(Q!==null)for(J[te]=null,te=0;te<Q.length;te++){var Z=Q[te];Z!==null&&(Z.lane&=-536870913)}a&=~ie}c!==0&&Oi(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~o))}function Oi(s,o,a){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-Et(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|a&261930}function Ws(s,o){var a=s.entangledLanes|=o;for(s=s.entanglements;a;){var c=31-Et(a),y=1<<c;y&o|s[c]&o&&(s[c]|=o),a&=~y}}function Vt(s,o){var a=o&-o;return a=(a&42)!==0?1:H(a),(a&(s.suspendedLanes|o))!==0?0:a}function H(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function me(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Re(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:q0(s.type))}function je(s,o){var a=ce.p;try{return ce.p=s,o()}finally{ce.p=a}}var it=Math.random().toString(36).slice(2),et="__reactFiber$"+it,Bt="__reactProps$"+it,Hi="__reactContainer$"+it,Ur="__reactEvents$"+it,If="__reactListeners$"+it,Vu="__reactHandles$"+it,Uu="__reactResources$"+it,Bi="__reactMarker$"+it;function Lr(s){delete s[et],delete s[Bt],delete s[Ur],delete s[If],delete s[Vu]}function Fi(s){var o=s[et];if(o)return o;for(var a=s.parentNode;a;){if(o=a[Hi]||a[et]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(s=I0(s);s!==null;){if(a=s[et])return a;s=I0(s)}return o}s=a,a=s.parentNode}return null}function Zn(s){if(s=s[et]||s[Hi]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function Gn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Gi(s){var o=s[Uu];return o||(o=s[Uu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ft(s){s[Bi]=!0}var tl=new Set,nl={};function qi(s,o){zi(s,o),zi(s+"Capture",o)}function zi(s,o){for(nl[s]=o,s=0;s<o.length;s++)tl.add(o[s])}var il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sl={},ol={};function Lu(s){return bt.call(ol,s)?!0:bt.call(sl,s)?!1:il.test(s)?ol[s]=!0:(sl[s]=!0,!1)}function Or(s,o,a){if(Lu(o))if(a===null)s.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+a)}}function qn(s,o,a){if(a===null)s.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+a)}}function Gt(s,o,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(o,a,""+c)}}function tn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function js(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function rl(s,o,a){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function ft(s){if(!s._valueTracker){var o=js(s)?"checked":"value";s._valueTracker=rl(s,o,""+s[o])}}function Xo(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return s&&(c=js(s)?s.checked?"true":"false":s.value),s=c,s!==a?(o.setValue(s),!0):!1}function Ki(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Wo=/[\n"\\]/g;function Pn(s){return s.replace(Wo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Hr(s,o,a,c,y,v,A,I){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),o!=null?A==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+tn(o)):s.value!==""+tn(o)&&(s.value=""+tn(o)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),o!=null?al(s,A,tn(o)):a!=null?al(s,A,tn(a)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+tn(I):s.removeAttribute("name")}function Ou(s,o,a,c,y,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){ft(s);return}a=a!=null?""+tn(a):"",o=o!=null?""+tn(o):a,I||o===s.value||(s.value=o),s.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=I?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),ft(s)}function al(s,o,a){o==="number"&&Ki(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function Zs(s,o,a,c){if(s=s.options,o){o={};for(var y=0;y<a.length;y++)o["$"+a[y]]=!0;for(a=0;a<s.length;a++)y=o.hasOwnProperty("$"+s[a].value),s[a].selected!==y&&(s[a].selected=y),y&&c&&(s[a].defaultSelected=!0)}else{for(a=""+tn(a),o=null,y=0;y<s.length;y++){if(s[y].value===a){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function Hu(s,o,a){if(o!=null&&(o=""+tn(o),o!==s.value&&(s.value=o),a==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=a!=null?""+tn(a):""}function eo(s,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(i(92));if(at(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=tn(o),s.defaultValue=a,c=s.textContent,c===a&&c!==""&&c!==null&&(s.value=c),ft(s)}function kn(s,o){if(o){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=o;return}}s.textContent=o}var Bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ll(s,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,a):typeof a!="number"||a===0||Bu.has(o)?o==="float"?s.cssFloat=a:s[o]=(""+a).trim():s[o]=a+"px"}function ul(s,o,a){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&a[y]!==c&&ll(s,y,c)}else for(var v in o)o.hasOwnProperty(v)&&ll(s,v,o[v])}function Br(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),to=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fr(s){return to.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function _i(){}var cl=null;function ei(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var no=null,Yi=null;function jo(s){var o=Zn(s);if(o&&(s=o.stateNode)){var a=s[Bt]||null;e:switch(s=o.stateNode,o.type){case"input":if(Hr(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==s&&c.form===s.form){var y=c[Bt]||null;if(!y)throw Error(i(90));Hr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===s.form&&Xo(c)}break e;case"textarea":Hu(s,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&Zs(s,!!a.multiple,o,!1)}}}var Gr=!1;function io(s,o,a){if(Gr)return s(o,a);Gr=!0;try{var c=s(o);return c}finally{if(Gr=!1,(no!==null||Yi!==null)&&(kc(),no&&(o=no,s=Yi,Yi=no=null,jo(o),s)))for(o=0;o<s.length;o++)jo(s[o])}}function Ti(s,o){var a=s.stateNode;if(a===null)return null;var c=a[Bt]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(i(231,o,typeof a));return a}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zo=!1;if(ti)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{Zo=!1}var $i=null,dl=null,er=null;function fl(){if(er)return er;var s,o=dl,a=o.length,c,y="value"in $i?$i.value:$i.textContent,v=y.length;for(s=0;s<a&&o[s]===y[s];s++);var A=a-s;for(c=1;c<=A&&o[a-c]===y[v-c];c++);return er=y.slice(s,1<c?1-c:void 0)}function tr(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function ps(){return!0}function Ei(){return!1}function cn(s){function o(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(a=s[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ps:Ei,this.isPropagationStopped=Ei,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),o}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ji=cn(ms),so=T({},ms,{view:0,detail:0}),hl=cn(so),oo,qr,Qi,zr=T({},so,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Qi&&(Qi&&s.type==="mousemove"?(oo=s.screenX-Qi.screenX,qr=s.screenY-Qi.screenY):qr=oo=0,Qi=s),oo)},movementY:function(s){return"movementY"in s?s.movementY:qr}}),pl=cn(zr),nr=T({},zr,{dataTransfer:0}),Gu=cn(nr),qu=T({},so,{relatedTarget:0}),ir=cn(qu),ml=T({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),zu=cn(ml),Kr=T({},ms,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ku=cn(Kr),Yu=T({},ms,{data:0}),Xi=cn(Yu),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xu(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Qu[s])?!!o[s]:!1}function ro(){return Xu}var In=T({},so,{key:function(s){if(s.key){var o=$u[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=tr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ju[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(s){return s.type==="keypress"?tr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?tr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Wu=cn(In),ju=T({},zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gs=cn(ju),m=T({},so,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),E=cn(m),b=T({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=cn(b),Y=T({},zr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),W=cn(Y),he=T({},ms,{newState:0,oldState:0}),Oe=cn(he),Ut=[9,13,27,32],ut=ti&&"CompositionEvent"in window,It=null;ti&&"documentMode"in document&&(It=document.documentMode);var ni=ti&&"TextEvent"in window&&!It,Wi=ti&&(!ut||It&&8<It&&11>=It),Si=" ",Ai=!1;function sr(s,o){switch(s){case"keyup":return Ut.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yr(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var $r=!1;function qb(s,o){switch(s){case"compositionend":return Yr(o);case"keypress":return o.which!==32?null:(Ai=!0,Si);case"textInput":return s=o.data,s===Si&&Ai?null:s;default:return null}}function zb(s,o){if($r)return s==="compositionend"||!ut&&sr(s,o)?(s=fl(),er=dl=$i=null,$r=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Wi&&o.locale!=="ko"?null:o.data;default:return null}}var Kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ng(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Kb[s.type]:o==="textarea"}function Mg(s,o,a,c){no?Yi?Yi.push(c):Yi=[c]:no=c,o=Fc(o,"onChange"),0<o.length&&(a=new Ji("onChange","change",null,a,c),s.push({event:a,listeners:o}))}var gl=null,yl=null;function Yb(s){h0(s,0)}function Zu(s){var o=Gn(s);if(Xo(o))return s}function Dg(s,o){if(s==="change")return o}var Pg=!1;if(ti){var xf;if(ti){var Rf="oninput"in document;if(!Rf){var kg=document.createElement("div");kg.setAttribute("oninput","return;"),Rf=typeof kg.oninput=="function"}xf=Rf}else xf=!1;Pg=xf&&(!document.documentMode||9<document.documentMode)}function Vg(){gl&&(gl.detachEvent("onpropertychange",Ug),yl=gl=null)}function Ug(s){if(s.propertyName==="value"&&Zu(yl)){var o=[];Mg(o,yl,s,ei(s)),io(Yb,o)}}function $b(s,o,a){s==="focusin"?(Vg(),gl=o,yl=a,gl.attachEvent("onpropertychange",Ug)):s==="focusout"&&Vg()}function Jb(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zu(yl)}function Qb(s,o){if(s==="click")return Zu(o)}function Xb(s,o){if(s==="input"||s==="change")return Zu(o)}function Wb(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var zn=typeof Object.is=="function"?Object.is:Wb;function vl(s,o){if(zn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var a=Object.keys(s),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!bt.call(o,y)||!zn(s[y],o[y]))return!1}return!0}function Lg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Og(s,o){var a=Lg(s);s=0;for(var c;a;){if(a.nodeType===3){if(c=s+a.textContent.length,s<=o&&c>=o)return{node:a,offset:o-s};s=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lg(a)}}function Hg(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Hg(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Bg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Ki(s.document);o instanceof s.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)s=o.contentWindow;else break;o=Ki(s.document)}return o}function Nf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var jb=ti&&"documentMode"in document&&11>=document.documentMode,Jr=null,Mf=null,_l=null,Df=!1;function Fg(s,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Df||Jr==null||Jr!==Ki(c)||(c=Jr,"selectionStart"in c&&Nf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),_l&&vl(_l,c)||(_l=c,c=Fc(Mf,"onSelect"),0<c.length&&(o=new Ji("onSelect","select",null,o,a),s.push({event:o,listeners:c}),o.target=Jr)))}function or(s,o){var a={};return a[s.toLowerCase()]=o.toLowerCase(),a["Webkit"+s]="webkit"+o,a["Moz"+s]="moz"+o,a}var Qr={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},Pf={},Gg={};ti&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function rr(s){if(Pf[s])return Pf[s];if(!Qr[s])return s;var o=Qr[s],a;for(a in o)if(o.hasOwnProperty(a)&&a in Gg)return Pf[s]=o[a];return s}var qg=rr("animationend"),zg=rr("animationiteration"),Kg=rr("animationstart"),Zb=rr("transitionrun"),ew=rr("transitionstart"),tw=rr("transitioncancel"),Yg=rr("transitionend"),$g=new Map,kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kf.push("scrollEnd");function Ci(s,o){$g.set(s,o),qi(o,[s])}var ec=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ii=[],Xr=0,Vf=0;function tc(){for(var s=Xr,o=Vf=Xr=0;o<s;){var a=ii[o];ii[o++]=null;var c=ii[o];ii[o++]=null;var y=ii[o];ii[o++]=null;var v=ii[o];if(ii[o++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Jg(a,y,v)}}function nc(s,o,a,c){ii[Xr++]=s,ii[Xr++]=o,ii[Xr++]=a,ii[Xr++]=c,Vf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Uf(s,o,a,c){return nc(s,o,a,c),ic(s)}function ar(s,o){return nc(s,null,null,o),ic(s)}function Jg(s,o,a){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=s.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&o!==null&&(y=31-Et(a),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[o]:c.push(o),o.lane=a|536870912),v):null}function ic(s){if(50<Fl)throw Fl=0,Kh=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Wr={};function nw(s,o,a,c){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(s,o,a,c){return new nw(s,o,a,c)}function Lf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ys(s,o){var a=s.alternate;return a===null?(a=Kn(s.tag,o,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=o,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,o=s.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function Qg(s,o){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,o=a.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function sc(s,o,a,c,y,v){var A=0;if(c=s,typeof s=="function")Lf(s)&&(A=1);else if(typeof s=="string")A=aI(s,a,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=Kn(31,a,o,y),s.elementType=R,s.lanes=v,s;case P:return lr(a.children,y,v,o);case k:A=8,y|=24;break;case K:return s=Kn(12,a,o,y|2),s.elementType=K,s.lanes=v,s;case fe:return s=Kn(13,a,o,y),s.elementType=fe,s.lanes=v,s;case de:return s=Kn(19,a,o,y),s.elementType=de,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ee:A=10;break e;case B:A=9;break e;case oe:A=11;break e;case M:A=14;break e;case N:A=16,c=null;break e}A=29,a=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=Kn(A,a,o,y),o.elementType=s,o.type=c,o.lanes=v,o}function lr(s,o,a,c){return s=Kn(7,s,c,o),s.lanes=a,s}function Of(s,o,a){return s=Kn(6,s,null,o),s.lanes=a,s}function Xg(s){var o=Kn(18,null,null,0);return o.stateNode=s,o}function Hf(s,o,a){return o=Kn(4,s.children!==null?s.children:[],s.key,o),o.lanes=a,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Wg=new WeakMap;function si(s,o){if(typeof s=="object"&&s!==null){var a=Wg.get(s);return a!==void 0?a:(o={value:s,source:o,stack:zs(o)},Wg.set(s,o),o)}return{value:s,source:o,stack:zs(o)}}var jr=[],Zr=0,oc=null,Tl=0,oi=[],ri=0,ao=null,ji=1,Zi="";function vs(s,o){jr[Zr++]=Tl,jr[Zr++]=oc,oc=s,Tl=o}function jg(s,o,a){oi[ri++]=ji,oi[ri++]=Zi,oi[ri++]=ao,ao=s;var c=ji;s=Zi;var y=32-Et(c)-1;c&=~(1<<y),a+=1;var v=32-Et(o)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,ji=1<<32-Et(o)+y|a<<y|c,Zi=v+s}else ji=1<<v|a<<y|c,Zi=s}function Bf(s){s.return!==null&&(vs(s,1),jg(s,1,0))}function Ff(s){for(;s===oc;)oc=jr[--Zr],jr[Zr]=null,Tl=jr[--Zr],jr[Zr]=null;for(;s===ao;)ao=oi[--ri],oi[ri]=null,Zi=oi[--ri],oi[ri]=null,ji=oi[--ri],oi[ri]=null}function Zg(s,o){oi[ri++]=ji,oi[ri++]=Zi,oi[ri++]=ao,ji=o.id,Zi=o.overflow,ao=s}var dn=null,St=null,Ze=!1,lo=null,ai=!1,Gf=Error(i(519));function uo(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw El(si(o,s)),Gf}function ey(s){var o=s.stateNode,a=s.type,c=s.memoizedProps;switch(o[et]=s,o[Bt]=c,a){case"dialog":Ye("cancel",o),Ye("close",o);break;case"iframe":case"object":case"embed":Ye("load",o);break;case"video":case"audio":for(a=0;a<ql.length;a++)Ye(ql[a],o);break;case"source":Ye("error",o);break;case"img":case"image":case"link":Ye("error",o),Ye("load",o);break;case"details":Ye("toggle",o);break;case"input":Ye("invalid",o),Ou(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",o);break;case"textarea":Ye("invalid",o),eo(o,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||y0(o.textContent,a)?(c.popover!=null&&(Ye("beforetoggle",o),Ye("toggle",o)),c.onScroll!=null&&Ye("scroll",o),c.onScrollEnd!=null&&Ye("scrollend",o),c.onClick!=null&&(o.onclick=_i),o=!0):o=!1,o||uo(s,!0)}function ty(s){for(dn=s.return;dn;)switch(dn.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:dn=dn.return}}function ea(s){if(s!==dn)return!1;if(!Ze)return ty(s),Ze=!0,!1;var o=s.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||rp(s.type,s.memoizedProps)),a=!a),a&&St&&uo(s),ty(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));St=w0(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));St=w0(s)}else o===27?(o=St,Co(s.type)?(s=dp,dp=null,St=s):St=o):St=dn?ui(s.stateNode.nextSibling):null;return!0}function ur(){St=dn=null,Ze=!1}function qf(){var s=lo;return s!==null&&(On===null?On=s:On.push.apply(On,s),lo=null),s}function El(s){lo===null?lo=[s]:lo.push(s)}var zf=F(null),cr=null,_s=null;function co(s,o,a){ue(zf,o._currentValue),o._currentValue=a}function Ts(s){s._currentValue=zf.current,j(zf)}function Kf(s,o,a){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===a)break;s=s.return}}function Yf(s,o,a,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var U=0;U<o.length;U++)if(I.context===o[U]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),Kf(v.return,a,s),c||(A=null);break e}v=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),Kf(A,a,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function ta(s,o,a,c){s=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var I=y.type;zn(y.pendingProps.value,A.value)||(s!==null?s.push(I):s=[I])}}else if(y===Le.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Jl):s=[Jl])}y=y.return}s!==null&&Yf(o,s,a,c),o.flags|=262144}function rc(s){for(s=s.firstContext;s!==null;){if(!zn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function dr(s){cr=s,_s=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function fn(s){return ny(cr,s)}function ac(s,o){return cr===null&&dr(s),ny(s,o)}function ny(s,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},_s===null){if(s===null)throw Error(i(308));_s=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else _s=_s.next=o;return a}var iw=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(a,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(a){return a()})}},sw=n.unstable_scheduleCallback,ow=n.unstable_NormalPriority,qt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $f(){return{controller:new iw,data:new Map,refCount:0}}function Sl(s){s.refCount--,s.refCount===0&&sw(ow,function(){s.controller.abort()})}var Al=null,Jf=0,na=0,ia=null;function rw(s,o){if(Al===null){var a=Al=[];Jf=0,na=Wh(),ia={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Jf++,o.then(iy,iy),o}function iy(){if(--Jf===0&&Al!==null){ia!==null&&(ia.status="fulfilled");var s=Al;Al=null,na=0,ia=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function aw(s,o){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<a.length;y++)(0,a[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var sy=X.S;X.S=function(s,o){Fv=Pt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&rw(s,o),sy!==null&&sy(s,o)};var fr=F(null);function Qf(){var s=fr.current;return s!==null?s:Tt.pooledCache}function lc(s,o){o===null?ue(fr,fr.current):ue(fr,o.pool)}function oy(){var s=Qf();return s===null?null:{parent:qt._currentValue,pool:s}}var sa=Error(i(460)),Xf=Error(i(474)),uc=Error(i(542)),cc={then:function(){}};function ry(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ay(s,o,a){switch(a=s[a],a===void 0?s.push(o):a!==o&&(o.then(_i,_i),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,uy(s),s;default:if(typeof o.status=="string")o.then(_i,_i);else{if(s=Tt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,uy(s),s}throw pr=o,sa}}function hr(s){try{var o=s._init;return o(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(pr=a,sa):a}}var pr=null;function ly(){if(pr===null)throw Error(i(459));var s=pr;return pr=null,s}function uy(s){if(s===sa||s===uc)throw Error(i(483))}var oa=null,Cl=0;function dc(s){var o=Cl;return Cl+=1,oa===null&&(oa=[]),ay(oa,s,o)}function bl(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function fc(s,o){throw o.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function cy(s){function o(z,G){if(s){var $=z.deletions;$===null?(z.deletions=[G],z.flags|=16):$.push(G)}}function a(z,G){if(!s)return null;for(;G!==null;)o(z,G),G=G.sibling;return null}function c(z){for(var G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function y(z,G){return z=ys(z,G),z.index=0,z.sibling=null,z}function v(z,G,$){return z.index=$,s?($=z.alternate,$!==null?($=$.index,$<G?(z.flags|=67108866,G):$):(z.flags|=67108866,G)):(z.flags|=1048576,G)}function A(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function I(z,G,$,ne){return G===null||G.tag!==6?(G=Of($,z.mode,ne),G.return=z,G):(G=y(G,$),G.return=z,G)}function U(z,G,$,ne){var Ce=$.type;return Ce===P?te(z,G,$.props.children,ne,$.key):G!==null&&(G.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&hr(Ce)===G.type)?(G=y(G,$.props),bl(G,$),G.return=z,G):(G=sc($.type,$.key,$.props,null,z.mode,ne),bl(G,$),G.return=z,G)}function J(z,G,$,ne){return G===null||G.tag!==4||G.stateNode.containerInfo!==$.containerInfo||G.stateNode.implementation!==$.implementation?(G=Hf($,z.mode,ne),G.return=z,G):(G=y(G,$.children||[]),G.return=z,G)}function te(z,G,$,ne,Ce){return G===null||G.tag!==7?(G=lr($,z.mode,ne,Ce),G.return=z,G):(G=y(G,$),G.return=z,G)}function ie(z,G,$){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Of(""+G,z.mode,$),G.return=z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return $=sc(G.type,G.key,G.props,null,z.mode,$),bl($,G),$.return=z,$;case O:return G=Hf(G,z.mode,$),G.return=z,G;case N:return G=hr(G),ie(z,G,$)}if(at(G)||q(G))return G=lr(G,z.mode,$,null),G.return=z,G;if(typeof G.then=="function")return ie(z,dc(G),$);if(G.$$typeof===ee)return ie(z,ac(z,G),$);fc(z,G)}return null}function Q(z,G,$,ne){var Ce=G!==null?G.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ce!==null?null:I(z,G,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return $.key===Ce?U(z,G,$,ne):null;case O:return $.key===Ce?J(z,G,$,ne):null;case N:return $=hr($),Q(z,G,$,ne)}if(at($)||q($))return Ce!==null?null:te(z,G,$,ne,null);if(typeof $.then=="function")return Q(z,G,dc($),ne);if($.$$typeof===ee)return Q(z,G,ac(z,$),ne);fc(z,$)}return null}function Z(z,G,$,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get($)||null,I(G,z,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return z=z.get(ne.key===null?$:ne.key)||null,U(G,z,ne,Ce);case O:return z=z.get(ne.key===null?$:ne.key)||null,J(G,z,ne,Ce);case N:return ne=hr(ne),Z(z,G,$,ne,Ce)}if(at(ne)||q(ne))return z=z.get($)||null,te(G,z,ne,Ce,null);if(typeof ne.then=="function")return Z(z,G,$,dc(ne),Ce);if(ne.$$typeof===ee)return Z(z,G,$,ac(G,ne),Ce);fc(G,ne)}return null}function ve(z,G,$,ne){for(var Ce=null,st=null,Te=G,Fe=G=0,Je=null;Te!==null&&Fe<$.length;Fe++){Te.index>Fe?(Je=Te,Te=null):Je=Te.sibling;var ot=Q(z,Te,$[Fe],ne);if(ot===null){Te===null&&(Te=Je);break}s&&Te&&ot.alternate===null&&o(z,Te),G=v(ot,G,Fe),st===null?Ce=ot:st.sibling=ot,st=ot,Te=Je}if(Fe===$.length)return a(z,Te),Ze&&vs(z,Fe),Ce;if(Te===null){for(;Fe<$.length;Fe++)Te=ie(z,$[Fe],ne),Te!==null&&(G=v(Te,G,Fe),st===null?Ce=Te:st.sibling=Te,st=Te);return Ze&&vs(z,Fe),Ce}for(Te=c(Te);Fe<$.length;Fe++)Je=Z(Te,z,Fe,$[Fe],ne),Je!==null&&(s&&Je.alternate!==null&&Te.delete(Je.key===null?Fe:Je.key),G=v(Je,G,Fe),st===null?Ce=Je:st.sibling=Je,st=Je);return s&&Te.forEach(function(Ro){return o(z,Ro)}),Ze&&vs(z,Fe),Ce}function Ne(z,G,$,ne){if($==null)throw Error(i(151));for(var Ce=null,st=null,Te=G,Fe=G=0,Je=null,ot=$.next();Te!==null&&!ot.done;Fe++,ot=$.next()){Te.index>Fe?(Je=Te,Te=null):Je=Te.sibling;var Ro=Q(z,Te,ot.value,ne);if(Ro===null){Te===null&&(Te=Je);break}s&&Te&&Ro.alternate===null&&o(z,Te),G=v(Ro,G,Fe),st===null?Ce=Ro:st.sibling=Ro,st=Ro,Te=Je}if(ot.done)return a(z,Te),Ze&&vs(z,Fe),Ce;if(Te===null){for(;!ot.done;Fe++,ot=$.next())ot=ie(z,ot.value,ne),ot!==null&&(G=v(ot,G,Fe),st===null?Ce=ot:st.sibling=ot,st=ot);return Ze&&vs(z,Fe),Ce}for(Te=c(Te);!ot.done;Fe++,ot=$.next())ot=Z(Te,z,Fe,ot.value,ne),ot!==null&&(s&&ot.alternate!==null&&Te.delete(ot.key===null?Fe:ot.key),G=v(ot,G,Fe),st===null?Ce=ot:st.sibling=ot,st=ot);return s&&Te.forEach(function(vI){return o(z,vI)}),Ze&&vs(z,Fe),Ce}function _t(z,G,$,ne){if(typeof $=="object"&&$!==null&&$.type===P&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case w:e:{for(var Ce=$.key;G!==null;){if(G.key===Ce){if(Ce=$.type,Ce===P){if(G.tag===7){a(z,G.sibling),ne=y(G,$.props.children),ne.return=z,z=ne;break e}}else if(G.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&hr(Ce)===G.type){a(z,G.sibling),ne=y(G,$.props),bl(ne,$),ne.return=z,z=ne;break e}a(z,G);break}else o(z,G);G=G.sibling}$.type===P?(ne=lr($.props.children,z.mode,ne,$.key),ne.return=z,z=ne):(ne=sc($.type,$.key,$.props,null,z.mode,ne),bl(ne,$),ne.return=z,z=ne)}return A(z);case O:e:{for(Ce=$.key;G!==null;){if(G.key===Ce)if(G.tag===4&&G.stateNode.containerInfo===$.containerInfo&&G.stateNode.implementation===$.implementation){a(z,G.sibling),ne=y(G,$.children||[]),ne.return=z,z=ne;break e}else{a(z,G);break}else o(z,G);G=G.sibling}ne=Hf($,z.mode,ne),ne.return=z,z=ne}return A(z);case N:return $=hr($),_t(z,G,$,ne)}if(at($))return ve(z,G,$,ne);if(q($)){if(Ce=q($),typeof Ce!="function")throw Error(i(150));return $=Ce.call($),Ne(z,G,$,ne)}if(typeof $.then=="function")return _t(z,G,dc($),ne);if($.$$typeof===ee)return _t(z,G,ac(z,$),ne);fc(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,G!==null&&G.tag===6?(a(z,G.sibling),ne=y(G,$),ne.return=z,z=ne):(a(z,G),ne=Of($,z.mode,ne),ne.return=z,z=ne),A(z)):a(z,G)}return function(z,G,$,ne){try{Cl=0;var Ce=_t(z,G,$,ne);return oa=null,Ce}catch(Te){if(Te===sa||Te===uc)throw Te;var st=Kn(29,Te,null,z.mode);return st.lanes=ne,st.return=z,st}finally{}}}var mr=cy(!0),dy=cy(!1),fo=!1;function Wf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jf(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ho(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function po(s,o,a){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(ct&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=ic(s),Jg(s,null,a),o}return nc(s,c,o,a),ic(s)}function wl(s,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,a|=c,o.lanes=a,Ws(s,a)}}function Zf(s,o){var a=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=o:v=v.next=o}else y=v=o;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=o:s.next=o,a.lastBaseUpdate=o}var eh=!1;function Il(){if(eh){var s=ia;if(s!==null)throw s}}function xl(s,o,a,c){eh=!1;var y=s.updateQueue;fo=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var U=I,J=U.next;U.next=null,A===null?v=J:A.next=J,A=U;var te=s.alternate;te!==null&&(te=te.updateQueue,I=te.lastBaseUpdate,I!==A&&(I===null?te.firstBaseUpdate=J:I.next=J,te.lastBaseUpdate=U))}if(v!==null){var ie=y.baseState;A=0,te=J=U=null,I=v;do{var Q=I.lane&-536870913,Z=Q!==I.lane;if(Z?($e&Q)===Q:(c&Q)===Q){Q!==0&&Q===na&&(eh=!0),te!==null&&(te=te.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ve=s,Ne=I;Q=o;var _t=a;switch(Ne.tag){case 1:if(ve=Ne.payload,typeof ve=="function"){ie=ve.call(_t,ie,Q);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ne.payload,Q=typeof ve=="function"?ve.call(_t,ie,Q):ve,Q==null)break e;ie=T({},ie,Q);break e;case 2:fo=!0}}Q=I.callback,Q!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},te===null?(J=te=Z,U=ie):te=te.next=Z,A|=Q;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);te===null&&(U=ie),y.baseState=U,y.firstBaseUpdate=J,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),_o|=A,s.lanes=A,s.memoizedState=ie}}function fy(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function hy(s,o){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)fy(a[s],o)}var ra=F(null),hc=F(0);function py(s,o){s=Rs,ue(hc,s),ue(ra,o),Rs=s|o.baseLanes}function th(){ue(hc,Rs),ue(ra,ra.current)}function nh(){Rs=hc.current,j(ra),j(hc)}var Yn=F(null),li=null;function mo(s){var o=s.alternate;ue(Lt,Lt.current&1),ue(Yn,s),li===null&&(o===null||ra.current!==null||o.memoizedState!==null)&&(li=s)}function ih(s){ue(Lt,Lt.current),ue(Yn,s),li===null&&(li=s)}function my(s){s.tag===22?(ue(Lt,Lt.current),ue(Yn,s),li===null&&(li=s)):go()}function go(){ue(Lt,Lt.current),ue(Yn,Yn.current)}function $n(s){j(Yn),li===s&&(li=null),j(Lt)}var Lt=F(0);function pc(s){for(var o=s;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||up(a)||cp(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Es=0,He=null,yt=null,zt=null,mc=!1,aa=!1,gr=!1,gc=0,Rl=0,la=null,lw=0;function Mt(){throw Error(i(321))}function sh(s,o){if(o===null)return!1;for(var a=0;a<o.length&&a<s.length;a++)if(!zn(s[a],o[a]))return!1;return!0}function oh(s,o,a,c,y,v){return Es=v,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,X.H=s===null||s.memoizedState===null?jy:Th,gr=!1,v=a(c,y),gr=!1,aa&&(v=yy(o,a,c,y)),gy(s),v}function gy(s){X.H=Dl;var o=yt!==null&&yt.next!==null;if(Es=0,zt=yt=He=null,mc=!1,Rl=0,la=null,o)throw Error(i(300));s===null||Kt||(s=s.dependencies,s!==null&&rc(s)&&(Kt=!0))}function yy(s,o,a,c){He=s;var y=0;do{if(aa&&(la=null),Rl=0,aa=!1,25<=y)throw Error(i(301));if(y+=1,zt=yt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}X.H=Zy,v=o(a,c)}while(aa);return v}function uw(){var s=X.H,o=s.useState()[0];return o=typeof o.then=="function"?Nl(o):o,s=s.useState()[0],(yt!==null?yt.memoizedState:null)!==s&&(He.flags|=1024),o}function rh(){var s=gc!==0;return gc=0,s}function ah(s,o,a){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~a}function lh(s){if(mc){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}mc=!1}Es=0,zt=yt=He=null,aa=!1,Rl=gc=0,la=null}function xn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?He.memoizedState=zt=s:zt=zt.next=s,zt}function Ot(){if(yt===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=yt.next;var o=zt===null?He.memoizedState:zt.next;if(o!==null)zt=o,yt=s;else{if(s===null)throw He.alternate===null?Error(i(467)):Error(i(310));yt=s,s={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},zt===null?He.memoizedState=zt=s:zt=zt.next=s}return zt}function yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(s){var o=Rl;return Rl+=1,la===null&&(la=[]),s=ay(la,s,o),o=He,(zt===null?o.memoizedState:zt.next)===null&&(o=o.alternate,X.H=o===null||o.memoizedState===null?jy:Th),s}function vc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Nl(s);if(s.$$typeof===ee)return fn(s)}throw Error(i(438,String(s)))}function uh(s){var o=null,a=He.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=He.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=yc(),He.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(s),c=0;c<s;c++)a[c]=L;return o.index++,a}function Ss(s,o){return typeof o=="function"?o(s):o}function _c(s){var o=Ot();return ch(o,yt,s)}function ch(s,o,a){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}o.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{o=y.next;var I=A=null,U=null,J=o,te=!1;do{var ie=J.lane&-536870913;if(ie!==J.lane?($e&ie)===ie:(Es&ie)===ie){var Q=J.revertLane;if(Q===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ie===na&&(te=!0);else if((Es&Q)===Q){J=J.next,Q===na&&(te=!0);continue}else ie={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(I=U=ie,A=v):U=U.next=ie,He.lanes|=Q,_o|=Q;ie=J.action,gr&&a(v,ie),v=J.hasEagerState?J.eagerState:a(v,ie)}else Q={lane:ie,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(I=U=Q,A=v):U=U.next=Q,He.lanes|=ie,_o|=ie;J=J.next}while(J!==null&&J!==o);if(U===null?A=v:U.next=I,!zn(v,s.memoizedState)&&(Kt=!0,te&&(a=ia,a!==null)))throw a;s.memoizedState=v,s.baseState=A,s.baseQueue=U,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function dh(s){var o=Ot(),a=o.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var c=a.dispatch,y=a.pending,v=o.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=s(v,A.action),A=A.next;while(A!==y);zn(v,o.memoizedState)||(Kt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,c]}function vy(s,o,a){var c=He,y=Ot(),v=Ze;if(v){if(a===void 0)throw Error(i(407));a=a()}else a=o();var A=!zn((yt||y).memoizedState,a);if(A&&(y.memoizedState=a,Kt=!0),y=y.queue,ph(Ey.bind(null,c,y,s),[s]),y.getSnapshot!==o||A||zt!==null&&zt.memoizedState.tag&1){if(c.flags|=2048,ua(9,{destroy:void 0},Ty.bind(null,c,y,a,o),null),Tt===null)throw Error(i(349));v||(Es&127)!==0||_y(c,o,a)}return a}function _y(s,o,a){s.flags|=16384,s={getSnapshot:o,value:a},o=He.updateQueue,o===null?(o=yc(),He.updateQueue=o,o.stores=[s]):(a=o.stores,a===null?o.stores=[s]:a.push(s))}function Ty(s,o,a,c){o.value=a,o.getSnapshot=c,Sy(o)&&Ay(s)}function Ey(s,o,a){return a(function(){Sy(o)&&Ay(s)})}function Sy(s){var o=s.getSnapshot;s=s.value;try{var a=o();return!zn(s,a)}catch{return!0}}function Ay(s){var o=ar(s,2);o!==null&&Hn(o,s,2)}function fh(s){var o=xn();if(typeof s=="function"){var a=s;if(s=a(),gr){vn(!0);try{a()}finally{vn(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:s},o}function Cy(s,o,a,c){return s.baseState=a,ch(s,yt,typeof c=="function"?c:Ss)}function cw(s,o,a,c,y){if(Sc(s))throw Error(i(485));if(s=o.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};X.T!==null?a(!0):v.isTransition=!1,c(v),a=o.pending,a===null?(v.next=o.pending=v,by(o,v)):(v.next=a.next,o.pending=a.next=v)}}function by(s,o){var a=o.action,c=o.payload,y=s.state;if(o.isTransition){var v=X.T,A={};X.T=A;try{var I=a(y,c),U=X.S;U!==null&&U(A,I),wy(s,o,I)}catch(J){hh(s,o,J)}finally{v!==null&&A.types!==null&&(v.types=A.types),X.T=v}}else try{v=a(y,c),wy(s,o,v)}catch(J){hh(s,o,J)}}function wy(s,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Iy(s,o,c)},function(c){return hh(s,o,c)}):Iy(s,o,a)}function Iy(s,o,a){o.status="fulfilled",o.value=a,xy(o),s.state=a,o=s.pending,o!==null&&(a=o.next,a===o?s.pending=null:(a=a.next,o.next=a,by(s,a)))}function hh(s,o,a){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,xy(o),o=o.next;while(o!==c)}s.action=null}function xy(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Ry(s,o){return o}function Ny(s,o){if(Ze){var a=Tt.formState;if(a!==null){e:{var c=He;if(Ze){if(St){t:{for(var y=St,v=ai;y.nodeType!==8;){if(!v){y=null;break t}if(y=ui(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){St=ui(y.nextSibling),c=y.data==="F!";break e}}uo(c)}c=!1}c&&(o=a[0])}}return a=xn(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ry,lastRenderedState:o},a.queue=c,a=Qy.bind(null,He,c),c.dispatch=a,c=fh(!1),v=_h.bind(null,He,!1,c.queue),c=xn(),y={state:o,dispatch:null,action:s,pending:null},c.queue=y,a=cw.bind(null,He,y,v,a),y.dispatch=a,c.memoizedState=s,[o,a,!1]}function My(s){var o=Ot();return Dy(o,yt,s)}function Dy(s,o,a){if(o=ch(s,o,Ry)[0],s=_c(Ss)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=Nl(o)}catch(A){throw A===sa?uc:A}else c=o;o=Ot();var y=o.queue,v=y.dispatch;return a!==o.memoizedState&&(He.flags|=2048,ua(9,{destroy:void 0},dw.bind(null,y,a),null)),[c,v,s]}function dw(s,o){s.action=o}function Py(s){var o=Ot(),a=yt;if(a!==null)return Dy(o,a,s);Ot(),o=o.memoizedState,a=Ot();var c=a.queue.dispatch;return a.memoizedState=s,[o,c,!1]}function ua(s,o,a,c){return s={tag:s,create:a,deps:c,inst:o,next:null},o=He.updateQueue,o===null&&(o=yc(),He.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=s.next=s:(c=a.next,a.next=s,s.next=c,o.lastEffect=s),s}function ky(){return Ot().memoizedState}function Tc(s,o,a,c){var y=xn();He.flags|=s,y.memoizedState=ua(1|o,{destroy:void 0},a,c===void 0?null:c)}function Ec(s,o,a,c){var y=Ot();c=c===void 0?null:c;var v=y.memoizedState.inst;yt!==null&&c!==null&&sh(c,yt.memoizedState.deps)?y.memoizedState=ua(o,v,a,c):(He.flags|=s,y.memoizedState=ua(1|o,v,a,c))}function Vy(s,o){Tc(8390656,8,s,o)}function ph(s,o){Ec(2048,8,s,o)}function fw(s){He.flags|=4;var o=He.updateQueue;if(o===null)o=yc(),He.updateQueue=o,o.events=[s];else{var a=o.events;a===null?o.events=[s]:a.push(s)}}function Uy(s){var o=Ot().memoizedState;return fw({ref:o,nextImpl:s}),function(){if((ct&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Ly(s,o){return Ec(4,2,s,o)}function Oy(s,o){return Ec(4,4,s,o)}function Hy(s,o){if(typeof o=="function"){s=s();var a=o(s);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function By(s,o,a){a=a!=null?a.concat([s]):null,Ec(4,4,Hy.bind(null,o,s),a)}function mh(){}function Fy(s,o){var a=Ot();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&sh(o,c[1])?c[0]:(a.memoizedState=[s,o],s)}function Gy(s,o){var a=Ot();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&sh(o,c[1]))return c[0];if(c=s(),gr){vn(!0);try{s()}finally{vn(!1)}}return a.memoizedState=[c,o],c}function gh(s,o,a){return a===void 0||(Es&1073741824)!==0&&($e&261930)===0?s.memoizedState=o:(s.memoizedState=a,s=qv(),He.lanes|=s,_o|=s,a)}function qy(s,o,a,c){return zn(a,o)?a:ra.current!==null?(s=gh(s,a,c),zn(s,o)||(Kt=!0),s):(Es&42)===0||(Es&1073741824)!==0&&($e&261930)===0?(Kt=!0,s.memoizedState=a):(s=qv(),He.lanes|=s,_o|=s,o)}function zy(s,o,a,c,y){var v=ce.p;ce.p=v!==0&&8>v?v:8;var A=X.T,I={};X.T=I,_h(s,!1,o,a);try{var U=y(),J=X.S;if(J!==null&&J(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var te=aw(U,c);Ml(s,o,te,Xn(s))}else Ml(s,o,c,Xn(s))}catch(ie){Ml(s,o,{then:function(){},status:"rejected",reason:ie},Xn())}finally{ce.p=v,A!==null&&I.types!==null&&(A.types=I.types),X.T=A}}function hw(){}function yh(s,o,a,c){if(s.tag!==5)throw Error(i(476));var y=Ky(s).queue;zy(s,y,o,Ee,a===null?hw:function(){return Yy(s),a(c)})}function Ky(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:Ee},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:a},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function Yy(s){var o=Ky(s);o.next===null&&(o=s.alternate.memoizedState),Ml(s,o.next.queue,{},Xn())}function vh(){return fn(Jl)}function $y(){return Ot().memoizedState}function Jy(){return Ot().memoizedState}function pw(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var a=Xn();s=ho(a);var c=po(o,s,a);c!==null&&(Hn(c,o,a),wl(c,o,a)),o={cache:$f()},s.payload=o;return}o=o.return}}function mw(s,o,a){var c=Xn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sc(s)?Xy(o,a):(a=Uf(s,o,a,c),a!==null&&(Hn(a,s,c),Wy(a,o,c)))}function Qy(s,o,a){var c=Xn();Ml(s,o,a,c)}function Ml(s,o,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sc(s))Xy(o,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,I=v(A,a);if(y.hasEagerState=!0,y.eagerState=I,zn(I,A))return nc(s,o,y,0),Tt===null&&tc(),!1}catch{}finally{}if(a=Uf(s,o,y,c),a!==null)return Hn(a,s,c),Wy(a,o,c),!0}return!1}function _h(s,o,a,c){if(c={lane:2,revertLane:Wh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Sc(s)){if(o)throw Error(i(479))}else o=Uf(s,a,c,2),o!==null&&Hn(o,s,2)}function Sc(s){var o=s.alternate;return s===He||o!==null&&o===He}function Xy(s,o){aa=mc=!0;var a=s.pending;a===null?o.next=o:(o.next=a.next,a.next=o),s.pending=o}function Wy(s,o,a){if((a&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,a|=c,o.lanes=a,Ws(s,a)}}var Dl={readContext:fn,use:vc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Dl.useEffectEvent=Mt;var jy={readContext:fn,use:vc,useCallback:function(s,o){return xn().memoizedState=[s,o===void 0?null:o],s},useContext:fn,useEffect:Vy,useImperativeHandle:function(s,o,a){a=a!=null?a.concat([s]):null,Tc(4194308,4,Hy.bind(null,o,s),a)},useLayoutEffect:function(s,o){return Tc(4194308,4,s,o)},useInsertionEffect:function(s,o){Tc(4,2,s,o)},useMemo:function(s,o){var a=xn();o=o===void 0?null:o;var c=s();if(gr){vn(!0);try{s()}finally{vn(!1)}}return a.memoizedState=[c,o],c},useReducer:function(s,o,a){var c=xn();if(a!==void 0){var y=a(o);if(gr){vn(!0);try{a(o)}finally{vn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=mw.bind(null,He,s),[c.memoizedState,s]},useRef:function(s){var o=xn();return s={current:s},o.memoizedState=s},useState:function(s){s=fh(s);var o=s.queue,a=Qy.bind(null,He,o);return o.dispatch=a,[s.memoizedState,a]},useDebugValue:mh,useDeferredValue:function(s,o){var a=xn();return gh(a,s,o)},useTransition:function(){var s=fh(!1);return s=zy.bind(null,He,s.queue,!0,!1),xn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,a){var c=He,y=xn();if(Ze){if(a===void 0)throw Error(i(407));a=a()}else{if(a=o(),Tt===null)throw Error(i(349));($e&127)!==0||_y(c,o,a)}y.memoizedState=a;var v={value:a,getSnapshot:o};return y.queue=v,Vy(Ey.bind(null,c,v,s),[s]),c.flags|=2048,ua(9,{destroy:void 0},Ty.bind(null,c,v,a,o),null),a},useId:function(){var s=xn(),o=Tt.identifierPrefix;if(Ze){var a=Zi,c=ji;a=(c&~(1<<32-Et(c)-1)).toString(32)+a,o="_"+o+"R_"+a,a=gc++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=lw++,o="_"+o+"r_"+a.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:vh,useFormState:Ny,useActionState:Ny,useOptimistic:function(s){var o=xn();o.memoizedState=o.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=_h.bind(null,He,!0,a),a.dispatch=o,[s,o]},useMemoCache:uh,useCacheRefresh:function(){return xn().memoizedState=pw.bind(null,He)},useEffectEvent:function(s){var o=xn(),a={impl:s};return o.memoizedState=a,function(){if((ct&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Th={readContext:fn,use:vc,useCallback:Fy,useContext:fn,useEffect:ph,useImperativeHandle:By,useInsertionEffect:Ly,useLayoutEffect:Oy,useMemo:Gy,useReducer:_c,useRef:ky,useState:function(){return _c(Ss)},useDebugValue:mh,useDeferredValue:function(s,o){var a=Ot();return qy(a,yt.memoizedState,s,o)},useTransition:function(){var s=_c(Ss)[0],o=Ot().memoizedState;return[typeof s=="boolean"?s:Nl(s),o]},useSyncExternalStore:vy,useId:$y,useHostTransitionStatus:vh,useFormState:My,useActionState:My,useOptimistic:function(s,o){var a=Ot();return Cy(a,yt,s,o)},useMemoCache:uh,useCacheRefresh:Jy};Th.useEffectEvent=Uy;var Zy={readContext:fn,use:vc,useCallback:Fy,useContext:fn,useEffect:ph,useImperativeHandle:By,useInsertionEffect:Ly,useLayoutEffect:Oy,useMemo:Gy,useReducer:dh,useRef:ky,useState:function(){return dh(Ss)},useDebugValue:mh,useDeferredValue:function(s,o){var a=Ot();return yt===null?gh(a,s,o):qy(a,yt.memoizedState,s,o)},useTransition:function(){var s=dh(Ss)[0],o=Ot().memoizedState;return[typeof s=="boolean"?s:Nl(s),o]},useSyncExternalStore:vy,useId:$y,useHostTransitionStatus:vh,useFormState:Py,useActionState:Py,useOptimistic:function(s,o){var a=Ot();return yt!==null?Cy(a,yt,s,o):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:uh,useCacheRefresh:Jy};Zy.useEffectEvent=Uy;function Eh(s,o,a,c){o=s.memoizedState,a=a(c,o),a=a==null?o:T({},o,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var Sh={enqueueSetState:function(s,o,a){s=s._reactInternals;var c=Xn(),y=ho(c);y.payload=o,a!=null&&(y.callback=a),o=po(s,y,c),o!==null&&(Hn(o,s,c),wl(o,s,c))},enqueueReplaceState:function(s,o,a){s=s._reactInternals;var c=Xn(),y=ho(c);y.tag=1,y.payload=o,a!=null&&(y.callback=a),o=po(s,y,c),o!==null&&(Hn(o,s,c),wl(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var a=Xn(),c=ho(a);c.tag=2,o!=null&&(c.callback=o),o=po(s,c,a),o!==null&&(Hn(o,s,a),wl(o,s,a))}};function ev(s,o,a,c,y,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,A):o.prototype&&o.prototype.isPureReactComponent?!vl(a,c)||!vl(y,v):!0}function tv(s,o,a,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==s&&Sh.enqueueReplaceState(o,o.state,null)}function yr(s,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(s=s.defaultProps){a===o&&(a=T({},a));for(var y in s)a[y]===void 0&&(a[y]=s[y])}return a}function nv(s){ec(s)}function iv(s){console.error(s)}function sv(s){ec(s)}function Ac(s,o){try{var a=s.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function ov(s,o,a){try{var c=s.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Ah(s,o,a){return a=ho(a),a.tag=3,a.payload={element:null},a.callback=function(){Ac(s,o)},a}function rv(s){return s=ho(s),s.tag=3,s}function av(s,o,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){ov(o,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){ov(o,a,c),typeof y!="function"&&(To===null?To=new Set([this]):To.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function gw(s,o,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&ta(o,a,y,!0),a=Yn.current,a!==null){switch(a.tag){case 31:case 13:return li===null?Vc():a.alternate===null&&Dt===0&&(Dt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===cc?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),Jh(s,c,y)),!1;case 22:return a.flags|=65536,c===cc?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),Jh(s,c,y)),!1}throw Error(i(435,a.tag))}return Jh(s,c,y),Vc(),!1}if(Ze)return o=Yn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==Gf&&(s=Error(i(422),{cause:c}),El(si(s,a)))):(c!==Gf&&(o=Error(i(423),{cause:c}),El(si(o,a))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=si(c,a),y=Ah(s.stateNode,c,y),Zf(s,y),Dt!==4&&(Dt=2)),!1;var v=Error(i(520),{cause:c});if(v=si(v,a),Bl===null?Bl=[v]:Bl.push(v),Dt!==4&&(Dt=2),o===null)return!0;c=si(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,s=y&-y,a.lanes|=s,s=Ah(a.stateNode,c,s),Zf(a,s),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(To===null||!To.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=rv(y),av(y,s,a,c),Zf(a,y),!1}a=a.return}while(a!==null);return!1}var Ch=Error(i(461)),Kt=!1;function hn(s,o,a,c){o.child=s===null?dy(o,null,a,c):mr(o,s.child,a,c)}function lv(s,o,a,c,y){a=a.render;var v=o.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return dr(o),c=oh(s,o,a,A,v,y),I=rh(),s!==null&&!Kt?(ah(s,o,y),As(s,o,y)):(Ze&&I&&Bf(o),o.flags|=1,hn(s,o,c,y),o.child)}function uv(s,o,a,c,y){if(s===null){var v=a.type;return typeof v=="function"&&!Lf(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,cv(s,o,v,c,y)):(s=sc(a.type,null,c,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!Dh(s,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:vl,a(A,c)&&s.ref===o.ref)return As(s,o,y)}return o.flags|=1,s=ys(v,c),s.ref=o.ref,s.return=o,o.child=s}function cv(s,o,a,c,y){if(s!==null){var v=s.memoizedProps;if(vl(v,c)&&s.ref===o.ref)if(Kt=!1,o.pendingProps=c=v,Dh(s,y))(s.flags&131072)!==0&&(Kt=!0);else return o.lanes=s.lanes,As(s,o,y)}return bh(s,o,a,c,y)}function dv(s,o,a,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,s!==null){for(c=o.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return fv(s,o,v,a,c)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&lc(o,v!==null?v.cachePool:null),v!==null?py(o,v):th(),my(o);else return c=o.lanes=536870912,fv(s,o,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(lc(o,v.cachePool),py(o,v),go(),o.memoizedState=null):(s!==null&&lc(o,null),th(),go());return hn(s,o,y,a),o.child}function Pl(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function fv(s,o,a,c,y){var v=Qf();return v=v===null?null:{parent:qt._currentValue,pool:v},o.memoizedState={baseLanes:a,cachePool:v},s!==null&&lc(o,null),th(),my(o),s!==null&&ta(s,o,c,!0),o.childLanes=y,null}function Cc(s,o){return o=wc({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function hv(s,o,a){return mr(o,s.child,null,a),s=Cc(o,o.pendingProps),s.flags|=2,$n(o),o.memoizedState=null,s}function yw(s,o,a){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Ze){if(c.mode==="hidden")return s=Cc(o,c),o.lanes=536870912,Pl(null,s);if(ih(o),(s=St)?(s=b0(s,ai),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ao!==null?{id:ji,overflow:Zi}:null,retryLane:536870912,hydrationErrors:null},a=Xg(s),a.return=o,o.child=a,dn=o,St=null)):s=null,s===null)throw uo(o);return o.lanes=536870912,null}return Cc(o,c)}var v=s.memoizedState;if(v!==null){var A=v.dehydrated;if(ih(o),y)if(o.flags&256)o.flags&=-257,o=hv(s,o,a);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Kt||ta(s,o,a,!1),y=(a&s.childLanes)!==0,Kt||y){if(c=Tt,c!==null&&(A=Vt(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,ar(s,A),Hn(c,s,A),Ch;Vc(),o=hv(s,o,a)}else s=v.treeContext,St=ui(A.nextSibling),dn=o,Ze=!0,lo=null,ai=!1,s!==null&&Zg(o,s),o=Cc(o,c),o.flags|=4096;return o}return s=ys(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function bc(s,o){var a=o.ref;if(a===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(s===null||s.ref!==a)&&(o.flags|=4194816)}}function bh(s,o,a,c,y){return dr(o),a=oh(s,o,a,c,void 0,y),c=rh(),s!==null&&!Kt?(ah(s,o,y),As(s,o,y)):(Ze&&c&&Bf(o),o.flags|=1,hn(s,o,a,y),o.child)}function pv(s,o,a,c,y,v){return dr(o),o.updateQueue=null,a=yy(o,c,a,y),gy(s),c=rh(),s!==null&&!Kt?(ah(s,o,v),As(s,o,v)):(Ze&&c&&Bf(o),o.flags|=1,hn(s,o,a,v),o.child)}function mv(s,o,a,c,y){if(dr(o),o.stateNode===null){var v=Wr,A=a.contextType;typeof A=="object"&&A!==null&&(v=fn(A)),v=new a(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Sh,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},Wf(o),A=a.contextType,v.context=typeof A=="object"&&A!==null?fn(A):Wr,v.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Eh(o,a,A,c),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Sh.enqueueReplaceState(v,v.state,null),xl(o,c,v,y),Il(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){v=o.stateNode;var I=o.memoizedProps,U=yr(a,I);v.props=U;var J=v.context,te=a.contextType;A=Wr,typeof te=="object"&&te!==null&&(A=fn(te));var ie=a.getDerivedStateFromProps;te=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||J!==A)&&tv(o,v,c,A),fo=!1;var Q=o.memoizedState;v.state=Q,xl(o,c,v,y),Il(),J=o.memoizedState,I||Q!==J||fo?(typeof ie=="function"&&(Eh(o,a,ie,c),J=o.memoizedState),(U=fo||ev(o,a,U,c,Q,J,A))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=J),v.props=c,v.state=J,v.context=A,c=U):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,jf(s,o),A=o.memoizedProps,te=yr(a,A),v.props=te,ie=o.pendingProps,Q=v.context,J=a.contextType,U=Wr,typeof J=="object"&&J!==null&&(U=fn(J)),I=a.getDerivedStateFromProps,(J=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ie||Q!==U)&&tv(o,v,c,U),fo=!1,Q=o.memoizedState,v.state=Q,xl(o,c,v,y),Il();var Z=o.memoizedState;A!==ie||Q!==Z||fo||s!==null&&s.dependencies!==null&&rc(s.dependencies)?(typeof I=="function"&&(Eh(o,a,I,c),Z=o.memoizedState),(te=fo||ev(o,a,te,c,Q,Z,U)||s!==null&&s.dependencies!==null&&rc(s.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,U)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=Z),v.props=c,v.state=Z,v.context=U,c=te):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=1024),c=!1)}return v=c,bc(s,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&c?(o.child=mr(o,s.child,null,y),o.child=mr(o,null,a,y)):hn(s,o,a,y),o.memoizedState=v.state,s=o.child):s=As(s,o,y),s}function gv(s,o,a,c){return ur(),o.flags|=256,hn(s,o,a,c),o.child}var wh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ih(s){return{baseLanes:s,cachePool:oy()}}function xh(s,o,a){return s=s!==null?s.childLanes&~a:0,o&&(s|=Qn),s}function yv(s,o,a){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(Lt.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ze){if(y?mo(o):go(),(s=St)?(s=b0(s,ai),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ao!==null?{id:ji,overflow:Zi}:null,retryLane:536870912,hydrationErrors:null},a=Xg(s),a.return=o,o.child=a,dn=o,St=null)):s=null,s===null)throw uo(o);return cp(s)?o.lanes=32:o.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(go(),y=o.mode,I=wc({mode:"hidden",children:I},y),c=lr(c,y,a,null),I.return=o,c.return=o,I.sibling=c,o.child=I,c=o.child,c.memoizedState=Ih(a),c.childLanes=xh(s,A,a),o.memoizedState=wh,Pl(null,c)):(mo(o),Rh(o,I))}var U=s.memoizedState;if(U!==null&&(I=U.dehydrated,I!==null)){if(v)o.flags&256?(mo(o),o.flags&=-257,o=Nh(s,o,a)):o.memoizedState!==null?(go(),o.child=s.child,o.flags|=128,o=null):(go(),I=c.fallback,y=o.mode,c=wc({mode:"visible",children:c.children},y),I=lr(I,y,a,null),I.flags|=2,c.return=o,I.return=o,c.sibling=I,o.child=c,mr(o,s.child,null,a),c=o.child,c.memoizedState=Ih(a),c.childLanes=xh(s,A,a),o.memoizedState=wh,o=Pl(null,c));else if(mo(o),cp(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(i(419)),c.stack="",c.digest=A,El({value:c,source:null,stack:null}),o=Nh(s,o,a)}else if(Kt||ta(s,o,a,!1),A=(a&s.childLanes)!==0,Kt||A){if(A=Tt,A!==null&&(c=Vt(A,a),c!==0&&c!==U.retryLane))throw U.retryLane=c,ar(s,c),Hn(A,s,c),Ch;up(I)||Vc(),o=Nh(s,o,a)}else up(I)?(o.flags|=192,o.child=s.child,o=null):(s=U.treeContext,St=ui(I.nextSibling),dn=o,Ze=!0,lo=null,ai=!1,s!==null&&Zg(o,s),o=Rh(o,c.children),o.flags|=4096);return o}return y?(go(),I=c.fallback,y=o.mode,U=s.child,J=U.sibling,c=ys(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,J!==null?I=ys(J,I):(I=lr(I,y,a,null),I.flags|=2),I.return=o,c.return=o,c.sibling=I,o.child=c,Pl(null,c),c=o.child,I=s.child.memoizedState,I===null?I=Ih(a):(y=I.cachePool,y!==null?(U=qt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=oy(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=xh(s,A,a),o.memoizedState=wh,Pl(s.child,c)):(mo(o),a=s.child,s=a.sibling,a=ys(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,s!==null&&(A=o.deletions,A===null?(o.deletions=[s],o.flags|=16):A.push(s)),o.child=a,o.memoizedState=null,a)}function Rh(s,o){return o=wc({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function wc(s,o){return s=Kn(22,s,null,o),s.lanes=0,s}function Nh(s,o,a){return mr(o,s.child,null,a),s=Rh(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function vv(s,o,a){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),Kf(s.return,o,a)}function Mh(s,o,a,c,y,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function _v(s,o,a){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Lt.current,I=(A&2)!==0;if(I?(A=A&1|2,o.flags|=128):A&=1,ue(Lt,A),hn(s,o,c,a),c=Ze?Tl:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vv(s,a,o);else if(s.tag===19)vv(s,a,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(a=o.child,y=null;a!==null;)s=a.alternate,s!==null&&pc(s)===null&&(y=a),a=a.sibling;a=y,a===null?(y=o.child,o.child=null):(y=a.sibling,a.sibling=null),Mh(o,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&pc(s)===null){o.child=y;break}s=y.sibling,y.sibling=a,a=y,y=s}Mh(o,!0,a,null,v,c);break;case"together":Mh(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function As(s,o,a){if(s!==null&&(o.dependencies=s.dependencies),_o|=o.lanes,(a&o.childLanes)===0)if(s!==null){if(ta(s,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,a=ys(s,s.pendingProps),o.child=a,a.return=o;s.sibling!==null;)s=s.sibling,a=a.sibling=ys(s,s.pendingProps),a.return=o;a.sibling=null}return o.child}function Dh(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&rc(s)))}function vw(s,o,a){switch(o.tag){case 3:mt(o,o.stateNode.containerInfo),co(o,qt,s.memoizedState.cache),ur();break;case 27:case 5:Mn(o);break;case 4:mt(o,o.stateNode.containerInfo);break;case 10:co(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,ih(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(mo(o),o.flags|=128,null):(a&o.child.childLanes)!==0?yv(s,o,a):(mo(o),s=As(s,o,a),s!==null?s.sibling:null);mo(o);break;case 19:var y=(s.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(ta(s,o,a,!1),c=(a&o.childLanes)!==0),y){if(c)return _v(s,o,a);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(Lt,Lt.current),c)break;return null;case 22:return o.lanes=0,dv(s,o,a,o.pendingProps);case 24:co(o,qt,s.memoizedState.cache)}return As(s,o,a)}function Tv(s,o,a){if(s!==null)if(s.memoizedProps!==o.pendingProps)Kt=!0;else{if(!Dh(s,a)&&(o.flags&128)===0)return Kt=!1,vw(s,o,a);Kt=(s.flags&131072)!==0}else Kt=!1,Ze&&(o.flags&1048576)!==0&&jg(o,Tl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=hr(o.elementType),o.type=s,typeof s=="function")Lf(s)?(c=yr(s,c),o.tag=1,o=mv(null,o,s,c,a)):(o.tag=0,o=bh(null,o,s,c,a));else{if(s!=null){var y=s.$$typeof;if(y===oe){o.tag=11,o=lv(null,o,s,c,a);break e}else if(y===M){o.tag=14,o=uv(null,o,s,c,a);break e}}throw o=Be(s)||s,Error(i(306,o,""))}}return o;case 0:return bh(s,o,o.type,o.pendingProps,a);case 1:return c=o.type,y=yr(c,o.pendingProps),mv(s,o,c,y,a);case 3:e:{if(mt(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,jf(s,o),xl(o,c,null,a);var A=o.memoizedState;if(c=A.cache,co(o,qt,c),c!==v.cache&&Yf(o,[qt],a,!0),Il(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=gv(s,o,c,a);break e}else if(c!==y){y=si(Error(i(424)),o),El(y),o=gv(s,o,c,a);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(St=ui(s.firstChild),dn=o,Ze=!0,lo=null,ai=!0,a=dy(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ur(),c===y){o=As(s,o,a);break e}hn(s,o,c,a)}o=o.child}return o;case 26:return bc(s,o),s===null?(a=M0(o.type,null,o.pendingProps,null))?o.memoizedState=a:Ze||(a=o.type,s=o.pendingProps,c=Gc(xe.current).createElement(a),c[et]=o,c[Bt]=s,pn(c,a,s),Ft(c),o.stateNode=c):o.memoizedState=M0(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Mn(o),s===null&&Ze&&(c=o.stateNode=x0(o.type,o.pendingProps,xe.current),dn=o,ai=!0,y=St,Co(o.type)?(dp=y,St=ui(c.firstChild)):St=y),hn(s,o,o.pendingProps.children,a),bc(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ze&&((y=c=St)&&(c=Jw(c,o.type,o.pendingProps,ai),c!==null?(o.stateNode=c,dn=o,St=ui(c.firstChild),ai=!1,y=!0):y=!1),y||uo(o)),Mn(o),y=o.type,v=o.pendingProps,A=s!==null?s.memoizedProps:null,c=v.children,rp(y,v)?c=null:A!==null&&rp(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=oh(s,o,uw,null,null,a),Jl._currentValue=y),bc(s,o),hn(s,o,c,a),o.child;case 6:return s===null&&Ze&&((s=a=St)&&(a=Qw(a,o.pendingProps,ai),a!==null?(o.stateNode=a,dn=o,St=null,s=!0):s=!1),s||uo(o)),null;case 13:return yv(s,o,a);case 4:return mt(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=mr(o,null,c,a):hn(s,o,c,a),o.child;case 11:return lv(s,o,o.type,o.pendingProps,a);case 7:return hn(s,o,o.pendingProps,a),o.child;case 8:return hn(s,o,o.pendingProps.children,a),o.child;case 12:return hn(s,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,co(o,o.type,c.value),hn(s,o,c.children,a),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,dr(o),y=fn(y),c=c(y),o.flags|=1,hn(s,o,c,a),o.child;case 14:return uv(s,o,o.type,o.pendingProps,a);case 15:return cv(s,o,o.type,o.pendingProps,a);case 19:return _v(s,o,a);case 31:return yw(s,o,a);case 22:return dv(s,o,a,o.pendingProps);case 24:return dr(o),c=fn(qt),s===null?(y=Qf(),y===null&&(y=Tt,v=$f(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),o.memoizedState={parent:c,cache:y},Wf(o),co(o,qt,y)):((s.lanes&a)!==0&&(jf(s,o),xl(o,null,null,a),Il()),y=s.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),co(o,qt,c)):(c=v.cache,co(o,qt,c),c!==y.cache&&Yf(o,[qt],a,!0))),hn(s,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Cs(s){s.flags|=4}function Ph(s,o,a,c,y){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if($v())s.flags|=8192;else throw pr=cc,Xf}else s.flags&=-16777217}function Ev(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!U0(o))if($v())s.flags|=8192;else throw pr=cc,Xf}function Ic(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?_n():536870912,s.lanes|=o,ha|=o)}function kl(s,o){if(!Ze)switch(s.tailMode){case"hidden":o=s.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function At(s){var o=s.alternate!==null&&s.alternate.child===s.child,a=0,c=0;if(o)for(var y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=a,o}function _w(s,o,a){var c=o.pendingProps;switch(Ff(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(o),null;case 1:return At(o),null;case 3:return a=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ts(qt),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(ea(o)?Cs(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,qf())),At(o),null;case 26:var y=o.type,v=o.memoizedState;return s===null?(Cs(o),v!==null?(At(o),Ev(o,v)):(At(o),Ph(o,y,null,c,a))):v?v!==s.memoizedState?(Cs(o),At(o),Ev(o,v)):(At(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&Cs(o),At(o),Ph(o,y,s,c,a)),null;case 27:if(mi(o),a=xe.current,y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Cs(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return At(o),null}s=pe.current,ea(o)?ey(o):(s=x0(y,c,a),o.stateNode=s,Cs(o))}return At(o),null;case 5:if(mi(o),y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Cs(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return At(o),null}if(v=pe.current,ea(o))ey(o);else{var A=Gc(xe.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[et]=o,v[Bt]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch(pn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Cs(o)}}return At(o),Ph(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,a),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&Cs(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=xe.current,ea(o)){if(s=o.stateNode,a=o.memoizedProps,c=null,y=dn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[et]=o,s=!!(s.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||y0(s.nodeValue,a)),s||uo(o,!0)}else s=Gc(s).createTextNode(c),s[et]=o,o.stateNode=s}return At(o),null;case 31:if(a=o.memoizedState,s===null||s.memoizedState!==null){if(c=ea(o),a!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[et]=o}else ur(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),s=!1}else a=qf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return o.flags&256?($n(o),o):($n(o),null);if((o.flags&128)!==0)throw Error(i(558))}return At(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ea(o),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[et]=o}else ur(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),y=!1}else y=qf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?($n(o),o):($n(o),null)}return $n(o),(o.flags&128)!==0?(o.lanes=a,o):(a=c!==null,s=s!==null&&s.memoizedState!==null,a&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==s&&a&&(o.child.flags|=8192),Ic(o,o.updateQueue),At(o),null);case 4:return lt(),s===null&&tp(o.stateNode.containerInfo),At(o),null;case 10:return Ts(o.type),At(o),null;case 19:if(j(Lt),c=o.memoizedState,c===null)return At(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)kl(c,!1);else{if(Dt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=pc(s),v!==null){for(o.flags|=128,kl(c,!1),s=v.updateQueue,o.updateQueue=s,Ic(o,s),o.subtreeFlags=0,s=a,a=o.child;a!==null;)Qg(a,s),a=a.sibling;return ue(Lt,Lt.current&1|2),Ze&&vs(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&Pt()>Dc&&(o.flags|=128,y=!0,kl(c,!1),o.lanes=4194304)}else{if(!y)if(s=pc(v),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,Ic(o,s),kl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Ze)return At(o),null}else 2*Pt()-c.renderingStartTime>Dc&&a!==536870912&&(o.flags|=128,y=!0,kl(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(s=c.last,s!==null?s.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Pt(),s.sibling=null,a=Lt.current,ue(Lt,y?a&1|2:a&1),Ze&&vs(o,c.treeForkCount),s):(At(o),null);case 22:case 23:return $n(o),nh(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(At(o),o.subtreeFlags&6&&(o.flags|=8192)):At(o),a=o.updateQueue,a!==null&&Ic(o,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),s!==null&&j(fr),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Ts(qt),At(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Tw(s,o){switch(Ff(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Ts(qt),lt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return mi(o),null;case 31:if(o.memoizedState!==null){if($n(o),o.alternate===null)throw Error(i(340));ur()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if($n(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));ur()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return j(Lt),null;case 4:return lt(),null;case 10:return Ts(o.type),null;case 22:case 23:return $n(o),nh(),s!==null&&j(fr),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Ts(qt),null;case 25:return null;default:return null}}function Sv(s,o){switch(Ff(o),o.tag){case 3:Ts(qt),lt();break;case 26:case 27:case 5:mi(o);break;case 4:lt();break;case 31:o.memoizedState!==null&&$n(o);break;case 13:$n(o);break;case 19:j(Lt);break;case 10:Ts(o.type);break;case 22:case 23:$n(o),nh(),s!==null&&j(fr);break;case 24:Ts(qt)}}function Vl(s,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&s)===s){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){pt(o,o.return,I)}}function yo(s,o,a){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=o;var U=a,J=I;try{J()}catch(te){pt(y,U,te)}}}c=c.next}while(c!==v)}}catch(te){pt(o,o.return,te)}}function Av(s){var o=s.updateQueue;if(o!==null){var a=s.stateNode;try{hy(o,a)}catch(c){pt(s,s.return,c)}}}function Cv(s,o,a){a.props=yr(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(c){pt(s,o,c)}}function Ul(s,o){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof a=="function"?s.refCleanup=a(c):a.current=c}}catch(y){pt(s,o,y)}}function es(s,o){var a=s.ref,c=s.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){pt(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){pt(s,o,y)}else a.current=null}function bv(s){var o=s.type,a=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){pt(s,s.return,y)}}function kh(s,o,a){try{var c=s.stateNode;Gw(c,s.type,a,o),c[Bt]=o}catch(y){pt(s,s.return,y)}}function wv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Co(s.type)||s.tag===4}function Vh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||wv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Co(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Uh(s,o,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(s),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=_i));else if(c!==4&&(c===27&&Co(s.type)&&(a=s.stateNode,o=null),s=s.child,s!==null))for(Uh(s,o,a),s=s.sibling;s!==null;)Uh(s,o,a),s=s.sibling}function xc(s,o,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?a.insertBefore(s,o):a.appendChild(s);else if(c!==4&&(c===27&&Co(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(xc(s,o,a),s=s.sibling;s!==null;)xc(s,o,a),s=s.sibling}function Iv(s){var o=s.stateNode,a=s.memoizedProps;try{for(var c=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);pn(o,c,a),o[et]=s,o[Bt]=a}catch(v){pt(s,s.return,v)}}var bs=!1,Yt=!1,Lh=!1,xv=typeof WeakSet=="function"?WeakSet:Set,nn=null;function Ew(s,o){if(s=s.containerInfo,sp=Qc,s=Bg(s),Nf(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,U=-1,J=0,te=0,ie=s,Q=null;t:for(;;){for(var Z;ie!==a||y!==0&&ie.nodeType!==3||(I=A+y),ie!==v||c!==0&&ie.nodeType!==3||(U=A+c),ie.nodeType===3&&(A+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)Q=ie,ie=Z;for(;;){if(ie===s)break t;if(Q===a&&++J===y&&(I=A),Q===v&&++te===c&&(U=A),(Z=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=Z}a=I===-1||U===-1?null:{start:I,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(op={focusedElem:s,selectionRange:a},Qc=!1,nn=o;nn!==null;)if(o=nn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,nn=s;else for(;nn!==null;){switch(o=nn,v=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)y=s[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,a=o,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var ve=yr(a.type,y);s=c.getSnapshotBeforeUpdate(ve,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ne){pt(a,a.return,Ne)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,a=s.nodeType,a===9)lp(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":lp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,nn=s;break}nn=o.return}}function Rv(s,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Is(s,a),c&4&&Vl(5,a);break;case 1:if(Is(s,a),c&4)if(s=a.stateNode,o===null)try{s.componentDidMount()}catch(A){pt(a,a.return,A)}else{var y=yr(a.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(A){pt(a,a.return,A)}}c&64&&Av(a),c&512&&Ul(a,a.return);break;case 3:if(Is(s,a),c&64&&(s=a.updateQueue,s!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{hy(s,o)}catch(A){pt(a,a.return,A)}}break;case 27:o===null&&c&4&&Iv(a);case 26:case 5:Is(s,a),o===null&&c&4&&bv(a),c&512&&Ul(a,a.return);break;case 12:Is(s,a);break;case 31:Is(s,a),c&4&&Dv(s,a);break;case 13:Is(s,a),c&4&&Pv(s,a),c&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=Nw.bind(null,a),Xw(s,a))));break;case 22:if(c=a.memoizedState!==null||bs,!c){o=o!==null&&o.memoizedState!==null||Yt,y=bs;var v=Yt;bs=c,(Yt=o)&&!v?xs(s,a,(a.subtreeFlags&8772)!==0):Is(s,a),bs=y,Yt=v}break;case 30:break;default:Is(s,a)}}function Nv(s){var o=s.alternate;o!==null&&(s.alternate=null,Nv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Lr(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var xt=null,Vn=!1;function ws(s,o,a){for(a=a.child;a!==null;)Mv(s,o,a),a=a.sibling}function Mv(s,o,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Qt,a)}catch{}switch(a.tag){case 26:Yt||es(a,o),ws(s,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Yt||es(a,o);var c=xt,y=Vn;Co(a.type)&&(xt=a.stateNode,Vn=!1),ws(s,o,a),Kl(a.stateNode),xt=c,Vn=y;break;case 5:Yt||es(a,o);case 6:if(c=xt,y=Vn,xt=null,ws(s,o,a),xt=c,Vn=y,xt!==null)if(Vn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(a.stateNode)}catch(v){pt(a,o,v)}else try{xt.removeChild(a.stateNode)}catch(v){pt(a,o,v)}break;case 18:xt!==null&&(Vn?(s=xt,A0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),Ea(s)):A0(xt,a.stateNode));break;case 4:c=xt,y=Vn,xt=a.stateNode.containerInfo,Vn=!0,ws(s,o,a),xt=c,Vn=y;break;case 0:case 11:case 14:case 15:yo(2,a,o),Yt||yo(4,a,o),ws(s,o,a);break;case 1:Yt||(es(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Cv(a,o,c)),ws(s,o,a);break;case 21:ws(s,o,a);break;case 22:Yt=(c=Yt)||a.memoizedState!==null,ws(s,o,a),Yt=c;break;default:ws(s,o,a)}}function Dv(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ea(s)}catch(a){pt(o,o.return,a)}}}function Pv(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ea(s)}catch(a){pt(o,o.return,a)}}function Sw(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new xv),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new xv),o;default:throw Error(i(435,s.tag))}}function Rc(s,o){var a=Sw(s);o.forEach(function(c){if(!a.has(c)){a.add(c);var y=Mw.bind(null,s,c);c.then(y,y)}})}function Un(s,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=s,A=o,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Co(I.type)){xt=I.stateNode,Vn=!1;break e}break;case 5:xt=I.stateNode,Vn=!1;break e;case 3:case 4:xt=I.stateNode.containerInfo,Vn=!0;break e}I=I.return}if(xt===null)throw Error(i(160));Mv(v,A,y),xt=null,Vn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)kv(o,s),o=o.sibling}var bi=null;function kv(s,o){var a=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Un(o,s),Ln(s),c&4&&(yo(3,s,s.return),Vl(3,s),yo(5,s,s.return));break;case 1:Un(o,s),Ln(s),c&512&&(Yt||a===null||es(a,a.return)),c&64&&bs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=bi;if(Un(o,s),Ln(s),c&512&&(Yt||a===null||es(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=s.memoizedState,a===null)if(c===null)if(s.stateNode===null){e:{c=s.type,a=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Bi]||v[et]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),pn(v,c,a),v[et]=s,Ft(v),c=v;break e;case"link":var A=k0("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=y.createElement(c),pn(v,c,a),y.head.appendChild(v);break;case"meta":if(A=k0("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=y.createElement(c),pn(v,c,a),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[et]=s,Ft(v),c=v}s.stateNode=c}else V0(y,s.type,s.stateNode);else s.stateNode=P0(y,c,s.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?V0(y,s.type,s.stateNode):P0(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&kh(s,s.memoizedProps,a.memoizedProps)}break;case 27:Un(o,s),Ln(s),c&512&&(Yt||a===null||es(a,a.return)),a!==null&&c&4&&kh(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Un(o,s),Ln(s),c&512&&(Yt||a===null||es(a,a.return)),s.flags&32){y=s.stateNode;try{kn(y,"")}catch(ve){pt(s,s.return,ve)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,kh(s,y,a!==null?a.memoizedProps:y)),c&1024&&(Lh=!0);break;case 6:if(Un(o,s),Ln(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,a=s.stateNode;try{a.nodeValue=c}catch(ve){pt(s,s.return,ve)}}break;case 3:if(Kc=null,y=bi,bi=qc(o.containerInfo),Un(o,s),bi=y,Ln(s),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ea(o.containerInfo)}catch(ve){pt(s,s.return,ve)}Lh&&(Lh=!1,Vv(s));break;case 4:c=bi,bi=qc(s.stateNode.containerInfo),Un(o,s),Ln(s),bi=c;break;case 12:Un(o,s),Ln(s);break;case 31:Un(o,s),Ln(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Rc(s,c)));break;case 13:Un(o,s),Ln(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Mc=Pt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Rc(s,c)));break;case 22:y=s.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,J=bs,te=Yt;if(bs=J||y,Yt=te||U,Un(o,s),Yt=te,bs=J,Ln(s),c&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(a===null||U||bs||Yt||vr(s)),a=null,o=s;;){if(o.tag===5||o.tag===26){if(a===null){U=a=o;try{if(v=U.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=U.stateNode;var ie=U.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;I.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ve){pt(U,U.return,ve)}}}else if(o.tag===6){if(a===null){U=o;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(ve){pt(U,U.return,ve)}}}else if(o.tag===18){if(a===null){U=o;try{var Z=U.stateNode;y?C0(Z,!0):C0(U.stateNode,!1)}catch(ve){pt(U,U.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Rc(s,a))));break;case 19:Un(o,s),Ln(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Rc(s,c)));break;case 30:break;case 21:break;default:Un(o,s),Ln(s)}}function Ln(s){var o=s.flags;if(o&2){try{for(var a,c=s.return;c!==null;){if(wv(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var y=a.stateNode,v=Vh(s);xc(s,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(kn(A,""),a.flags&=-33);var I=Vh(s);xc(s,I,A);break;case 3:case 4:var U=a.stateNode.containerInfo,J=Vh(s);Uh(s,J,U);break;default:throw Error(i(161))}}catch(te){pt(s,s.return,te)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Vv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Vv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Is(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Rv(s,o.alternate,o),o=o.sibling}function vr(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:yo(4,o,o.return),vr(o);break;case 1:es(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Cv(o,o.return,a),vr(o);break;case 27:Kl(o.stateNode);case 26:case 5:es(o,o.return),vr(o);break;case 22:o.memoizedState===null&&vr(o);break;case 30:vr(o);break;default:vr(o)}s=s.sibling}}function xs(s,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=s,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:xs(y,v,a),Vl(4,v);break;case 1:if(xs(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){pt(c,c.return,J)}if(c=v,y=c.updateQueue,y!==null){var I=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)fy(U[y],I)}catch(J){pt(c,c.return,J)}}a&&A&64&&Av(v),Ul(v,v.return);break;case 27:Iv(v);case 26:case 5:xs(y,v,a),a&&c===null&&A&4&&bv(v),Ul(v,v.return);break;case 12:xs(y,v,a);break;case 31:xs(y,v,a),a&&A&4&&Dv(y,v);break;case 13:xs(y,v,a),a&&A&4&&Pv(y,v);break;case 22:v.memoizedState===null&&xs(y,v,a),Ul(v,v.return);break;case 30:break;default:xs(y,v,a)}o=o.sibling}}function Oh(s,o){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&Sl(a))}function Hh(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Sl(s))}function wi(s,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Uv(s,o,a,c),o=o.sibling}function Uv(s,o,a,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:wi(s,o,a,c),y&2048&&Vl(9,o);break;case 1:wi(s,o,a,c);break;case 3:wi(s,o,a,c),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Sl(s)));break;case 12:if(y&2048){wi(s,o,a,c),s=o.stateNode;try{var v=o.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){pt(o,o.return,U)}}else wi(s,o,a,c);break;case 31:wi(s,o,a,c);break;case 13:wi(s,o,a,c);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?wi(s,o,a,c):Ll(s,o):v._visibility&2?wi(s,o,a,c):(v._visibility|=2,ca(s,o,a,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Oh(A,o);break;case 24:wi(s,o,a,c),y&2048&&Hh(o.alternate,o);break;default:wi(s,o,a,c)}}function ca(s,o,a,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=s,A=o,I=a,U=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:ca(v,A,I,U,y),Vl(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?ca(v,A,I,U,y):Ll(v,A):(te._visibility|=2,ca(v,A,I,U,y)),y&&J&2048&&Oh(A.alternate,A);break;case 24:ca(v,A,I,U,y),y&&J&2048&&Hh(A.alternate,A);break;default:ca(v,A,I,U,y)}o=o.sibling}}function Ll(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=s,c=o,y=c.flags;switch(c.tag){case 22:Ll(a,c),y&2048&&Oh(c.alternate,c);break;case 24:Ll(a,c),y&2048&&Hh(c.alternate,c);break;default:Ll(a,c)}o=o.sibling}}var Ol=8192;function da(s,o,a){if(s.subtreeFlags&Ol)for(s=s.child;s!==null;)Lv(s,o,a),s=s.sibling}function Lv(s,o,a){switch(s.tag){case 26:da(s,o,a),s.flags&Ol&&s.memoizedState!==null&&lI(a,bi,s.memoizedState,s.memoizedProps);break;case 5:da(s,o,a);break;case 3:case 4:var c=bi;bi=qc(s.stateNode.containerInfo),da(s,o,a),bi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Ol,Ol=16777216,da(s,o,a),Ol=c):da(s,o,a));break;default:da(s,o,a)}}function Ov(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Hl(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];nn=c,Bv(c,s)}Ov(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Hv(s),s=s.sibling}function Hv(s){switch(s.tag){case 0:case 11:case 15:Hl(s),s.flags&2048&&yo(9,s,s.return);break;case 3:Hl(s);break;case 12:Hl(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Nc(s)):Hl(s);break;default:Hl(s)}}function Nc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];nn=c,Bv(c,s)}Ov(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:yo(8,o,o.return),Nc(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Nc(o));break;default:Nc(o)}s=s.sibling}}function Bv(s,o){for(;nn!==null;){var a=nn;switch(a.tag){case 0:case 11:case 15:yo(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Sl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,nn=c;else e:for(a=s;nn!==null;){c=nn;var y=c.sibling,v=c.return;if(Nv(c),c===a){nn=null;break e}if(y!==null){y.return=v,nn=y;break e}nn=v}}}var Aw={getCacheForType:function(s){var o=fn(qt),a=o.data.get(s);return a===void 0&&(a=s(),o.data.set(s,a)),a},cacheSignal:function(){return fn(qt).controller.signal}},Cw=typeof WeakMap=="function"?WeakMap:Map,ct=0,Tt=null,Ke=null,$e=0,ht=0,Jn=null,vo=!1,fa=!1,Bh=!1,Rs=0,Dt=0,_o=0,_r=0,Fh=0,Qn=0,ha=0,Bl=null,On=null,Gh=!1,Mc=0,Fv=0,Dc=1/0,Pc=null,To=null,Wt=0,Eo=null,pa=null,Ns=0,qh=0,zh=null,Gv=null,Fl=0,Kh=null;function Xn(){return(ct&2)!==0&&$e!==0?$e&-$e:X.T!==null?Wh():Re()}function qv(){if(Qn===0)if(($e&536870912)===0||Ze){var s=le;le<<=1,(le&3932160)===0&&(le=262144),Qn=s}else Qn=536870912;return s=Yn.current,s!==null&&(s.flags|=32),Qn}function Hn(s,o,a){(s===Tt&&(ht===2||ht===9)||s.cancelPendingCommit!==null)&&(ma(s,0),So(s,$e,Qn,!1)),un(s,a),((ct&2)===0||s!==Tt)&&(s===Tt&&((ct&2)===0&&(_r|=a),Dt===4&&So(s,$e,Qn,!1)),ts(s))}function zv(s,o,a){if((ct&6)!==0)throw Error(i(327));var c=!a&&(o&127)===0&&(o&s.expiredLanes)===0||nt(s,o),y=c?Iw(s,o):$h(s,o,!0),v=c;do{if(y===0){fa&&!c&&So(s,o,0,!1);break}else{if(a=s.current.alternate,v&&!bw(a)){y=$h(s,o,!1),v=!1;continue}if(y===2){if(v=o,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var I=s;y=Bl;var U=I.current.memoizedState.isDehydrated;if(U&&(ma(I,A).flags|=256),A=$h(I,A,!1),A!==2){if(Bh&&!U){I.errorRecoveryDisabledLanes|=v,_r|=v,y=4;break e}v=On,On=y,v!==null&&(On===null?On=v:On.push.apply(On,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){ma(s,0),So(s,o,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:So(c,o,Qn,!vo);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=Mc+300-Pt(),10<y)){if(So(c,o,Qn,!vo),Se(c,0,!0)!==0)break e;Ns=o,c.timeoutHandle=E0(Kv.bind(null,c,a,On,Pc,Gh,o,Qn,_r,ha,vo,v,"Throttled",-0,0),y);break e}Kv(c,a,On,Pc,Gh,o,Qn,_r,ha,vo,v,null,-0,0)}}break}while(!0);ts(s)}function Kv(s,o,a,c,y,v,A,I,U,J,te,ie,Q,Z){if(s.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},Lv(o,v,ie);var ve=(v&62914560)===v?Mc-Pt():(v&4194048)===v?Fv-Pt():0;if(ve=uI(ie,ve),ve!==null){Ns=v,s.cancelPendingCommit=ve(Zv.bind(null,s,o,v,a,c,y,A,I,U,te,ie,null,Q,Z)),So(s,v,A,!J);return}}Zv(s,o,v,a,c,y,A,I,U)}function bw(s){for(var o=s;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!zn(v(),y))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function So(s,o,a,c){o&=~Fh,o&=~_r,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var y=o;0<y;){var v=31-Et(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&Oi(s,a,o)}function kc(){return(ct&6)===0?(Gl(0),!1):!0}function Yh(){if(Ke!==null){if(ht===0)var s=Ke.return;else s=Ke,_s=cr=null,lh(s),oa=null,Cl=0,s=Ke;for(;s!==null;)Sv(s.alternate,s),s=s.return;Ke=null}}function ma(s,o){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,Kw(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),Ns=0,Yh(),Tt=s,Ke=a=ys(s.current,null),$e=o,ht=0,Jn=null,vo=!1,fa=nt(s,o),Bh=!1,ha=Qn=Fh=_r=_o=Dt=0,On=Bl=null,Gh=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var y=31-Et(c),v=1<<y;o|=s[y],c&=~v}return Rs=o,tc(),a}function Yv(s,o){He=null,X.H=Dl,o===sa||o===uc?(o=ly(),ht=3):o===Xf?(o=ly(),ht=4):ht=o===Ch?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Jn=o,Ke===null&&(Dt=1,Ac(s,si(o,s.current)))}function $v(){var s=Yn.current;return s===null?!0:($e&4194048)===$e?li===null:($e&62914560)===$e||($e&536870912)!==0?s===li:!1}function Jv(){var s=X.H;return X.H=Dl,s===null?Dl:s}function Qv(){var s=X.A;return X.A=Aw,s}function Vc(){Dt=4,vo||($e&4194048)!==$e&&Yn.current!==null||(fa=!0),(_o&134217727)===0&&(_r&134217727)===0||Tt===null||So(Tt,$e,Qn,!1)}function $h(s,o,a){var c=ct;ct|=2;var y=Jv(),v=Qv();(Tt!==s||$e!==o)&&(Pc=null,ma(s,o)),o=!1;var A=Dt;e:do try{if(ht!==0&&Ke!==null){var I=Ke,U=Jn;switch(ht){case 8:Yh(),A=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(o=!0);var J=ht;if(ht=0,Jn=null,ga(s,I,U,J),a&&fa){A=0;break e}break;default:J=ht,ht=0,Jn=null,ga(s,I,U,J)}}ww(),A=Dt;break}catch(te){Yv(s,te)}while(!0);return o&&s.shellSuspendCounter++,_s=cr=null,ct=c,X.H=y,X.A=v,Ke===null&&(Tt=null,$e=0,tc()),A}function ww(){for(;Ke!==null;)Xv(Ke)}function Iw(s,o){var a=ct;ct|=2;var c=Jv(),y=Qv();Tt!==s||$e!==o?(Pc=null,Dc=Pt()+500,ma(s,o)):fa=nt(s,o);e:do try{if(ht!==0&&Ke!==null){o=Ke;var v=Jn;t:switch(ht){case 1:ht=0,Jn=null,ga(s,o,v,1);break;case 2:case 9:if(ry(v)){ht=0,Jn=null,Wv(o);break}o=function(){ht!==2&&ht!==9||Tt!==s||(ht=7),ts(s)},v.then(o,o);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:ry(v)?(ht=0,Jn=null,Wv(o)):(ht=0,Jn=null,ga(s,o,v,7));break;case 5:var A=null;switch(Ke.tag){case 26:A=Ke.memoizedState;case 5:case 27:var I=Ke;if(A?U0(A):I.stateNode.complete){ht=0,Jn=null;var U=I.sibling;if(U!==null)Ke=U;else{var J=I.return;J!==null?(Ke=J,Uc(J)):Ke=null}break t}}ht=0,Jn=null,ga(s,o,v,5);break;case 6:ht=0,Jn=null,ga(s,o,v,6);break;case 8:Yh(),Dt=6;break e;default:throw Error(i(462))}}xw();break}catch(te){Yv(s,te)}while(!0);return _s=cr=null,X.H=c,X.A=y,ct=a,Ke!==null?0:(Tt=null,$e=0,tc(),Dt)}function xw(){for(;Ke!==null&&!Ks();)Xv(Ke)}function Xv(s){var o=Tv(s.alternate,s,Rs);s.memoizedProps=s.pendingProps,o===null?Uc(s):Ke=o}function Wv(s){var o=s,a=o.alternate;switch(o.tag){case 15:case 0:o=pv(a,o,o.pendingProps,o.type,void 0,$e);break;case 11:o=pv(a,o,o.pendingProps,o.type.render,o.ref,$e);break;case 5:lh(o);default:Sv(a,o),o=Ke=Qg(o,Rs),o=Tv(a,o,Rs)}s.memoizedProps=s.pendingProps,o===null?Uc(s):Ke=o}function ga(s,o,a,c){_s=cr=null,lh(o),oa=null,Cl=0;var y=o.return;try{if(gw(s,y,o,a,$e)){Dt=1,Ac(s,si(a,s.current)),Ke=null;return}}catch(v){if(y!==null)throw Ke=y,v;Dt=1,Ac(s,si(a,s.current)),Ke=null;return}o.flags&32768?(Ze||c===1?s=!0:fa||($e&536870912)!==0?s=!1:(vo=s=!0,(c===2||c===9||c===3||c===6)&&(c=Yn.current,c!==null&&c.tag===13&&(c.flags|=16384))),jv(o,s)):Uc(o)}function Uc(s){var o=s;do{if((o.flags&32768)!==0){jv(o,vo);return}s=o.return;var a=_w(o.alternate,o,Rs);if(a!==null){Ke=a;return}if(o=o.sibling,o!==null){Ke=o;return}Ke=o=s}while(o!==null);Dt===0&&(Dt=5)}function jv(s,o){do{var a=Tw(s.alternate,s);if(a!==null){a.flags&=32767,Ke=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(s=s.sibling,s!==null)){Ke=s;return}Ke=s=a}while(s!==null);Dt=6,Ke=null}function Zv(s,o,a,c,y,v,A,I,U){s.cancelPendingCommit=null;do Lc();while(Wt!==0);if((ct&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=Vf,Xs(s,a,v,A,I,U),s===Tt&&(Ke=Tt=null,$e=0),pa=o,Eo=s,Ns=a,qh=v,zh=y,Gv=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Dw(wn,function(){return s0(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,y=ce.p,ce.p=2,A=ct,ct|=4;try{Ew(s,o,a)}finally{ct=A,ce.p=y,X.T=c}}Wt=1,e0(),t0(),n0()}}function e0(){if(Wt===1){Wt=0;var s=Eo,o=pa,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var c=ce.p;ce.p=2;var y=ct;ct|=4;try{kv(o,s);var v=op,A=Bg(s.containerInfo),I=v.focusedElem,U=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&Hg(I.ownerDocument.documentElement,I)){if(U!==null&&Nf(I)){var J=U.start,te=U.end;if(te===void 0&&(te=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(te,I.value.length);else{var ie=I.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),ve=I.textContent.length,Ne=Math.min(U.start,ve),_t=U.end===void 0?Ne:Math.min(U.end,ve);!Z.extend&&Ne>_t&&(A=_t,_t=Ne,Ne=A);var z=Og(I,Ne),G=Og(I,_t);if(z&&G&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==G.node||Z.focusOffset!==G.offset)){var $=ie.createRange();$.setStart(z.node,z.offset),Z.removeAllRanges(),Ne>_t?(Z.addRange($),Z.extend(G.node,G.offset)):($.setEnd(G.node,G.offset),Z.addRange($))}}}}for(ie=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ie.length;I++){var ne=ie[I];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Qc=!!sp,op=sp=null}finally{ct=y,ce.p=c,X.T=a}}s.current=o,Wt=2}}function t0(){if(Wt===2){Wt=0;var s=Eo,o=pa,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var c=ce.p;ce.p=2;var y=ct;ct|=4;try{Rv(s,o.alternate,o)}finally{ct=y,ce.p=c,X.T=a}}Wt=3}}function n0(){if(Wt===4||Wt===3){Wt=0,Qo();var s=Eo,o=pa,a=Ns,c=Gv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Wt=5:(Wt=0,pa=Eo=null,i0(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(To=null),me(a),o=o.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Qt,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=X.T,y=ce.p,ce.p=2,X.T=null;try{for(var v=s.onRecoverableError,A=0;A<c.length;A++){var I=c[A];v(I.value,{componentStack:I.stack})}}finally{X.T=o,ce.p=y}}(Ns&3)!==0&&Lc(),ts(s),y=s.pendingLanes,(a&261930)!==0&&(y&42)!==0?s===Kh?Fl++:(Fl=0,Kh=s):Fl=0,Gl(0)}}function i0(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Sl(o)))}function Lc(){return e0(),t0(),n0(),s0()}function s0(){if(Wt!==5)return!1;var s=Eo,o=qh;qh=0;var a=me(Ns),c=X.T,y=ce.p;try{ce.p=32>a?32:a,X.T=null,a=zh,zh=null;var v=Eo,A=Ns;if(Wt=0,pa=Eo=null,Ns=0,(ct&6)!==0)throw Error(i(331));var I=ct;if(ct|=4,Hv(v.current),Uv(v,v.current,A,a),ct=I,Gl(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Qt,v)}catch{}return!0}finally{ce.p=y,X.T=c,i0(s,o)}}function o0(s,o,a){o=si(a,o),o=Ah(s.stateNode,o,2),s=po(s,o,2),s!==null&&(un(s,2),ts(s))}function pt(s,o,a){if(s.tag===3)o0(s,s,a);else for(;o!==null;){if(o.tag===3){o0(o,s,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(To===null||!To.has(c))){s=si(a,s),a=rv(2),c=po(o,a,2),c!==null&&(av(a,c,o,s),un(c,2),ts(c));break}}o=o.return}}function Jh(s,o,a){var c=s.pingCache;if(c===null){c=s.pingCache=new Cw;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(a)||(Bh=!0,y.add(a),s=Rw.bind(null,s,o,a),o.then(s,s))}function Rw(s,o,a){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,Tt===s&&($e&a)===a&&(Dt===4||Dt===3&&($e&62914560)===$e&&300>Pt()-Mc?(ct&2)===0&&ma(s,0):Fh|=a,ha===$e&&(ha=0)),ts(s)}function r0(s,o){o===0&&(o=_n()),s=ar(s,o),s!==null&&(un(s,o),ts(s))}function Nw(s){var o=s.memoizedState,a=0;o!==null&&(a=o.retryLane),r0(s,a)}function Mw(s,o){var a=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),r0(s,a)}function Dw(s,o){return wt(s,o)}var Oc=null,ya=null,Qh=!1,Hc=!1,Xh=!1,Ao=0;function ts(s){s!==ya&&s.next===null&&(ya===null?Oc=ya=s:ya=ya.next=s),Hc=!0,Qh||(Qh=!0,kw())}function Gl(s,o){if(!Xh&&Hc){Xh=!0;do for(var a=!1,c=Oc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,I=c.pingedLanes;v=(1<<31-Et(42|s)+1)-1,v&=y&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,c0(c,v))}else v=$e,v=Se(c,c===Tt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||nt(c,v)||(a=!0,c0(c,v));c=c.next}while(a);Xh=!1}}function Pw(){a0()}function a0(){Hc=Qh=!1;var s=0;Ao!==0&&zw()&&(s=Ao);for(var o=Pt(),a=null,c=Oc;c!==null;){var y=c.next,v=l0(c,o);v===0?(c.next=null,a===null?Oc=y:a.next=y,y===null&&(ya=a)):(a=c,(s!==0||(v&3)!==0)&&(Hc=!0)),c=y}Wt!==0&&Wt!==5||Gl(s),Ao!==0&&(Ao=0)}function l0(s,o){for(var a=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-Et(v),I=1<<A,U=y[A];U===-1?((I&a)===0||(I&c)!==0)&&(y[A]=ln(I,o)):U<=o&&(s.expiredLanes|=I),v&=~I}if(o=Tt,a=$e,a=Se(s,s===o?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,a===0||s===o&&(ht===2||ht===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&yi(c),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||nt(s,a)){if(o=a&-a,o===s.callbackPriority)return o;switch(c!==null&&yi(c),me(a)){case 2:case 8:a=Ys;break;case 32:a=wn;break;case 268435456:a=jn;break;default:a=wn}return c=u0.bind(null,s),a=wt(a,c),s.callbackPriority=o,s.callbackNode=a,o}return c!==null&&c!==null&&yi(c),s.callbackPriority=2,s.callbackNode=null,2}function u0(s,o){if(Wt!==0&&Wt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(Lc()&&s.callbackNode!==a)return null;var c=$e;return c=Se(s,s===Tt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(zv(s,c,o),l0(s,Pt()),s.callbackNode!=null&&s.callbackNode===a?u0.bind(null,s):null)}function c0(s,o){if(Lc())return null;zv(s,o,!0)}function kw(){Yw(function(){(ct&6)!==0?wt(hs,Pw):a0()})}function Wh(){if(Ao===0){var s=na;s===0&&(s=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Ao=s}return Ao}function d0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Fr(""+s)}function f0(s,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,s.id&&a.setAttribute("form",s.id),o.parentNode.insertBefore(a,o),s=new FormData(s),a.parentNode.removeChild(a),s}function Vw(s,o,a,c,y){if(o==="submit"&&a&&a.stateNode===y){var v=d0((y[Bt]||null).action),A=c.submitter;A&&(o=(o=A[Bt]||null)?d0(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var I=new Ji("action","action",null,c,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ao!==0){var U=A?f0(y,A):new FormData(y);yh(a,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(I.preventDefault(),U=A?f0(y,A):new FormData(y),yh(a,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var jh=0;jh<kf.length;jh++){var Zh=kf[jh],Uw=Zh.toLowerCase(),Lw=Zh[0].toUpperCase()+Zh.slice(1);Ci(Uw,"on"+Lw)}Ci(qg,"onAnimationEnd"),Ci(zg,"onAnimationIteration"),Ci(Kg,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(Zb,"onTransitionRun"),Ci(ew,"onTransitionStart"),Ci(tw,"onTransitionCancel"),Ci(Yg,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ow=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function h0(s,o){o=(o&4)!==0;for(var a=0;a<s.length;a++){var c=s[a],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var A=c.length-1;0<=A;A--){var I=c[A],U=I.instance,J=I.currentTarget;if(I=I.listener,U!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(te){ec(te)}y.currentTarget=null,v=U}else for(A=0;A<c.length;A++){if(I=c[A],U=I.instance,J=I.currentTarget,I=I.listener,U!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(te){ec(te)}y.currentTarget=null,v=U}}}}function Ye(s,o){var a=o[Ur];a===void 0&&(a=o[Ur]=new Set);var c=s+"__bubble";a.has(c)||(p0(o,s,2,!1),a.add(c))}function ep(s,o,a){var c=0;o&&(c|=4),p0(a,s,c,o)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function tp(s){if(!s[Bc]){s[Bc]=!0,tl.forEach(function(a){a!=="selectionchange"&&(Ow.has(a)||ep(a,!1,s),ep(a,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Bc]||(o[Bc]=!0,ep("selectionchange",!1,o))}}function p0(s,o,a,c){switch(q0(o)){case 2:var y=fI;break;case 8:y=hI;break;default:y=gp}a=y.bind(null,o,a,s),y=void 0,!Zo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(o,a,{capture:!0,passive:y}):s.addEventListener(o,a,!0):y!==void 0?s.addEventListener(o,a,{passive:y}):s.addEventListener(o,a,!1)}function np(s,o,a,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=Fi(I),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){c=v=A;continue e}I=I.parentNode}}c=c.return}io(function(){var J=v,te=ei(a),ie=[];e:{var Q=$g.get(s);if(Q!==void 0){var Z=Ji,ve=s;switch(s){case"keypress":if(tr(a)===0)break e;case"keydown":case"keyup":Z=Wu;break;case"focusin":ve="focus",Z=ir;break;case"focusout":ve="blur",Z=ir;break;case"beforeblur":case"afterblur":Z=ir;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=E;break;case qg:case zg:case Kg:Z=zu;break;case Yg:Z=x;break;case"scroll":case"scrollend":Z=hl;break;case"wheel":Z=W;break;case"copy":case"cut":case"paste":Z=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=gs;break;case"toggle":case"beforetoggle":Z=Oe}var Ne=(o&4)!==0,_t=!Ne&&(s==="scroll"||s==="scrollend"),z=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var G=J,$;G!==null;){var ne=G;if($=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||$===null||z===null||(ne=Ti(G,z),ne!=null&&Ne.push(zl(G,ne,$))),_t)break;G=G.return}0<Ne.length&&(Q=new Z(Q,ve,null,a,te),ie.push({event:Q,listeners:Ne}))}}if((o&7)===0){e:{if(Q=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",Q&&a!==cl&&(ve=a.relatedTarget||a.fromElement)&&(Fi(ve)||ve[Hi]))break e;if((Z||Q)&&(Q=te.window===te?te:(Q=te.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(ve=a.relatedTarget||a.toElement,Z=J,ve=ve?Fi(ve):null,ve!==null&&(_t=l(ve),Ne=ve.tag,ve!==_t||Ne!==5&&Ne!==27&&Ne!==6)&&(ve=null)):(Z=null,ve=J),Z!==ve)){if(Ne=pl,ne="onMouseLeave",z="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Ne=gs,ne="onPointerLeave",z="onPointerEnter",G="pointer"),_t=Z==null?Q:Gn(Z),$=ve==null?Q:Gn(ve),Q=new Ne(ne,G+"leave",Z,a,te),Q.target=_t,Q.relatedTarget=$,ne=null,Fi(te)===J&&(Ne=new Ne(z,G+"enter",ve,a,te),Ne.target=$,Ne.relatedTarget=_t,ne=Ne),_t=ne,Z&&ve)t:{for(Ne=Hw,z=Z,G=ve,$=0,ne=z;ne;ne=Ne(ne))$++;ne=0;for(var Ce=G;Ce;Ce=Ne(Ce))ne++;for(;0<$-ne;)z=Ne(z),$--;for(;0<ne-$;)G=Ne(G),ne--;for(;$--;){if(z===G||G!==null&&z===G.alternate){Ne=z;break t}z=Ne(z),G=Ne(G)}Ne=null}else Ne=null;Z!==null&&m0(ie,Q,Z,Ne,!1),ve!==null&&_t!==null&&m0(ie,_t,ve,Ne,!0)}}e:{if(Q=J?Gn(J):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var st=Dg;else if(Ng(Q))if(Pg)st=Xb;else{st=Jb;var Te=$b}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?J&&Br(J.elementType)&&(st=Dg):st=Qb;if(st&&(st=st(s,J))){Mg(ie,st,a,te);break e}Te&&Te(s,Q,J),s==="focusout"&&J&&Q.type==="number"&&J.memoizedProps.value!=null&&al(Q,"number",Q.value)}switch(Te=J?Gn(J):window,s){case"focusin":(Ng(Te)||Te.contentEditable==="true")&&(Jr=Te,Mf=J,_l=null);break;case"focusout":_l=Mf=Jr=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,Fg(ie,a,te);break;case"selectionchange":if(jb)break;case"keydown":case"keyup":Fg(ie,a,te)}var Fe;if(ut)e:{switch(s){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else $r?sr(s,a)&&(Je="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(Wi&&a.locale!=="ko"&&($r||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&$r&&(Fe=fl()):($i=te,dl="value"in $i?$i.value:$i.textContent,$r=!0)),Te=Fc(J,Je),0<Te.length&&(Je=new Xi(Je,s,null,a,te),ie.push({event:Je,listeners:Te}),Fe?Je.data=Fe:(Fe=Yr(a),Fe!==null&&(Je.data=Fe)))),(Fe=ni?qb(s,a):zb(s,a))&&(Je=Fc(J,"onBeforeInput"),0<Je.length&&(Te=new Xi("onBeforeInput","beforeinput",null,a,te),ie.push({event:Te,listeners:Je}),Te.data=Fe)),Vw(ie,s,J,a,te)}h0(ie,o)})}function zl(s,o,a){return{instance:s,listener:o,currentTarget:a}}function Fc(s,o){for(var a=o+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Ti(s,a),y!=null&&c.unshift(zl(s,y,v)),y=Ti(s,o),y!=null&&c.push(zl(s,y,v))),s.tag===3)return c;s=s.return}return[]}function Hw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function m0(s,o,a,c,y){for(var v=o._reactName,A=[];a!==null&&a!==c;){var I=a,U=I.alternate,J=I.stateNode;if(I=I.tag,U!==null&&U===c)break;I!==5&&I!==26&&I!==27||J===null||(U=J,y?(J=Ti(a,v),J!=null&&A.unshift(zl(a,J,U))):y||(J=Ti(a,v),J!=null&&A.push(zl(a,J,U)))),a=a.return}A.length!==0&&s.push({event:o,listeners:A})}var Bw=/\r\n?/g,Fw=/\u0000|\uFFFD/g;function g0(s){return(typeof s=="string"?s:""+s).replace(Bw,`
`).replace(Fw,"")}function y0(s,o){return o=g0(o),g0(s)===o}function vt(s,o,a,c,y,v){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||kn(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&kn(s,""+c);break;case"className":qn(s,"class",c);break;case"tabIndex":qn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":qn(s,a,c);break;case"style":ul(s,c,v);break;case"data":if(o!=="object"){qn(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){s.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=Fr(""+c),s.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&vt(s,o,"name",y.name,y,null),vt(s,o,"formEncType",y.formEncType,y,null),vt(s,o,"formMethod",y.formMethod,y,null),vt(s,o,"formTarget",y.formTarget,y,null)):(vt(s,o,"encType",y.encType,y,null),vt(s,o,"method",y.method,y,null),vt(s,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=Fr(""+c),s.setAttribute(a,c);break;case"onClick":c!=null&&(s.onclick=_i);break;case"onScroll":c!=null&&Ye("scroll",s);break;case"onScrollEnd":c!=null&&Ye("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}a=Fr(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""+c):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":c===!0?s.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,c):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(a,c):s.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(a):s.setAttribute(a,c);break;case"popover":Ye("beforetoggle",s),Ye("toggle",s),Or(s,"popover",c);break;case"xlinkActuate":Gt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Gt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Gt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Gt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Gt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Gt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Or(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fu.get(a)||a,Or(s,a,c))}}function ip(s,o,a,c,y,v){switch(a){case"style":ul(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"children":typeof c=="string"?kn(s,c):(typeof c=="number"||typeof c=="bigint")&&kn(s,""+c);break;case"onScroll":c!=null&&Ye("scroll",s);break;case"onScrollEnd":c!=null&&Ye("scrollend",s);break;case"onClick":c!=null&&(s.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),o=a.slice(2,y?a.length-7:void 0),v=s[Bt]||null,v=v!=null?v[a]:null,typeof v=="function"&&s.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(o,c,y);break e}a in s?s[a]=c:c===!0?s.setAttribute(a,""):Or(s,a,c)}}}function pn(s,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",s),Ye("load",s);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:vt(s,o,v,A,a,null)}}y&&vt(s,o,"srcSet",a.srcSet,a,null),c&&vt(s,o,"src",a.src,a,null);return;case"input":Ye("invalid",s);var I=v=A=y=null,U=null,J=null;for(c in a)if(a.hasOwnProperty(c)){var te=a[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":U=te;break;case"defaultChecked":J=te;break;case"value":v=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:vt(s,o,c,te,a,null)}}Ou(s,v,I,U,J,A,y,!1);return;case"select":Ye("invalid",s),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:vt(s,o,y,I,a,null)}o=v,a=A,s.multiple=!!c,o!=null?Zs(s,!!c,o,!1):a!=null&&Zs(s,!!c,a,!0);return;case"textarea":Ye("invalid",s),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:vt(s,o,A,I,a,null)}eo(s,c,y,v);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:vt(s,o,U,c,a,null)}return;case"dialog":Ye("beforetoggle",s),Ye("toggle",s),Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":Ye("load",s);break;case"video":case"audio":for(c=0;c<ql.length;c++)Ye(ql[c],s);break;case"image":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"embed":case"source":case"link":Ye("error",s),Ye("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(c=a[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:vt(s,o,J,c,a,null)}return;default:if(Br(o)){for(te in a)a.hasOwnProperty(te)&&(c=a[te],c!==void 0&&ip(s,o,te,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&vt(s,o,I,c,a,null))}function Gw(s,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,I=null,U=null,J=null,te=null;for(Z in a){var ie=a[Z];if(a.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":U=ie;default:c.hasOwnProperty(Z)||vt(s,o,Z,null,c,ie)}}for(var Q in c){var Z=c[Q];if(ie=a[Q],c.hasOwnProperty(Q)&&(Z!=null||ie!=null))switch(Q){case"type":v=Z;break;case"name":y=Z;break;case"checked":J=Z;break;case"defaultChecked":te=Z;break;case"value":A=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:Z!==ie&&vt(s,o,Q,Z,c,ie)}}Hr(s,A,I,U,J,te,v,y);return;case"select":Z=A=I=Q=null;for(v in a)if(U=a[v],a.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":Z=U;default:c.hasOwnProperty(v)||vt(s,o,v,null,c,U)}for(y in c)if(v=c[y],U=a[y],c.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":Q=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==U&&vt(s,o,y,v,c,U)}o=I,a=A,c=Z,Q!=null?Zs(s,!!a,Q,!1):!!c!=!!a&&(o!=null?Zs(s,!!a,o,!0):Zs(s,!!a,a?[]:"",!1));return;case"textarea":Z=Q=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:vt(s,o,I,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":Q=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&vt(s,o,A,y,c,v)}Hu(s,Q,Z);return;case"option":for(var ve in a)if(Q=a[ve],a.hasOwnProperty(ve)&&Q!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":s.selected=!1;break;default:vt(s,o,ve,null,c,Q)}for(U in c)if(Q=c[U],Z=a[U],c.hasOwnProperty(U)&&Q!==Z&&(Q!=null||Z!=null))switch(U){case"selected":s.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:vt(s,o,U,Q,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)Q=a[Ne],a.hasOwnProperty(Ne)&&Q!=null&&!c.hasOwnProperty(Ne)&&vt(s,o,Ne,null,c,Q);for(J in c)if(Q=c[J],Z=a[J],c.hasOwnProperty(J)&&Q!==Z&&(Q!=null||Z!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,o));break;default:vt(s,o,J,Q,c,Z)}return;default:if(Br(o)){for(var _t in a)Q=a[_t],a.hasOwnProperty(_t)&&Q!==void 0&&!c.hasOwnProperty(_t)&&ip(s,o,_t,void 0,c,Q);for(te in c)Q=c[te],Z=a[te],!c.hasOwnProperty(te)||Q===Z||Q===void 0&&Z===void 0||ip(s,o,te,Q,c,Z);return}}for(var z in a)Q=a[z],a.hasOwnProperty(z)&&Q!=null&&!c.hasOwnProperty(z)&&vt(s,o,z,null,c,Q);for(ie in c)Q=c[ie],Z=a[ie],!c.hasOwnProperty(ie)||Q===Z||Q==null&&Z==null||vt(s,o,ie,Q,c,Z)}function v0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,I=y.duration;if(v&&I&&v0(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var U=a[c],J=U.startTime;if(J>I)break;var te=U.transferSize,ie=U.initiatorType;te&&v0(ie)&&(U=U.responseEnd,A+=te*(U<I?1:(I-J)/(U-J)))}if(--c,o+=8*(v+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var sp=null,op=null;function Gc(s){return s.nodeType===9?s:s.ownerDocument}function _0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function T0(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function rp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ap=null;function zw(){var s=window.event;return s&&s.type==="popstate"?s===ap?!1:(ap=s,!0):(ap=null,!1)}var E0=typeof setTimeout=="function"?setTimeout:void 0,Kw=typeof clearTimeout=="function"?clearTimeout:void 0,S0=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof S0<"u"?function(s){return S0.resolve(null).then(s).catch($w)}:E0;function $w(s){setTimeout(function(){throw s})}function Co(s){return s==="head"}function A0(s,o){var a=o,c=0;do{var y=a.nextSibling;if(s.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){s.removeChild(y),Ea(o);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Kl(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,Kl(a);for(var v=a.firstChild;v;){var A=v.nextSibling,I=v.nodeName;v[Bi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&Kl(s.ownerDocument.body);a=y}while(a);Ea(o)}function C0(s,o){var a=s;s=0;do{var c=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=c}while(a)}function lp(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":lp(a),Lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function Jw(s,o,a,c){for(;s.nodeType===1;){var y=a;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Bi])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ui(s.nextSibling),s===null)break}return null}function Qw(s,o,a){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ui(s.nextSibling),s===null))return null;return s}function b0(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=ui(s.nextSibling),s===null))return null;return s}function up(s){return s.data==="$?"||s.data==="$~"}function cp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Xw(s,o){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||a.readyState!=="loading")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ui(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var dp=null;function w0(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(o===0)return ui(s.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}s=s.nextSibling}return null}function I0(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return s;o--}else a!=="/$"&&a!=="/&"||o++}s=s.previousSibling}return null}function x0(s,o,a){switch(o=Gc(a),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Kl(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Lr(s)}var ci=new Map,R0=new Set;function qc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ms=ce.d;ce.d={f:Ww,r:jw,D:Zw,C:eI,L:tI,m:nI,X:sI,S:iI,M:oI};function Ww(){var s=Ms.f(),o=kc();return s||o}function jw(s){var o=Zn(s);o!==null&&o.tag===5&&o.type==="form"?Yy(o):Ms.r(s)}var va=typeof document>"u"?null:document;function N0(s,o,a){var c=va;if(c&&typeof o=="string"&&o){var y=Pn(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),R0.has(y)||(R0.add(y),s={rel:s,crossOrigin:a,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),pn(o,"link",s),Ft(o),c.head.appendChild(o)))}}function Zw(s){Ms.D(s),N0("dns-prefetch",s,null)}function eI(s,o){Ms.C(s,o),N0("preconnect",s,o)}function tI(s,o,a){Ms.L(s,o,a);var c=va;if(c&&s&&o){var y='link[rel="preload"][as="'+Pn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+Pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+Pn(a.imageSizes)+'"]')):y+='[href="'+Pn(s)+'"]';var v=y;switch(o){case"style":v=_a(s);break;case"script":v=Ta(s)}ci.has(v)||(s=T({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:s,as:o},a),ci.set(v,s),c.querySelector(y)!==null||o==="style"&&c.querySelector(Yl(v))||o==="script"&&c.querySelector($l(v))||(o=c.createElement("link"),pn(o,"link",s),Ft(o),c.head.appendChild(o)))}}function nI(s,o){Ms.m(s,o);var a=va;if(a&&s){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Pn(c)+'"][href="'+Pn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ta(s)}if(!ci.has(v)&&(s=T({rel:"modulepreload",href:s},o),ci.set(v,s),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($l(v)))return}c=a.createElement("link"),pn(c,"link",s),Ft(c),a.head.appendChild(c)}}}function iI(s,o,a){Ms.S(s,o,a);var c=va;if(c&&s){var y=Gi(c).hoistableStyles,v=_a(s);o=o||"default";var A=y.get(v);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(Yl(v)))I.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":o},a),(a=ci.get(v))&&fp(s,a);var U=A=c.createElement("link");Ft(U),pn(U,"link",s),U._p=new Promise(function(J,te){U.onload=J,U.onerror=te}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,zc(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(v,A)}}}function sI(s,o){Ms.X(s,o);var a=va;if(a&&s){var c=Gi(a).hoistableScripts,y=Ta(s),v=c.get(y);v||(v=a.querySelector($l(y)),v||(s=T({src:s,async:!0},o),(o=ci.get(y))&&hp(s,o),v=a.createElement("script"),Ft(v),pn(v,"link",s),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function oI(s,o){Ms.M(s,o);var a=va;if(a&&s){var c=Gi(a).hoistableScripts,y=Ta(s),v=c.get(y);v||(v=a.querySelector($l(y)),v||(s=T({src:s,async:!0,type:"module"},o),(o=ci.get(y))&&hp(s,o),v=a.createElement("script"),Ft(v),pn(v,"link",s),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function M0(s,o,a,c){var y=(y=xe.current)?qc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=_a(a.href),a=Gi(y).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=_a(a.href);var v=Gi(y).hoistableStyles,A=v.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=y.querySelector(Yl(s)))&&!v._p&&(A.instance=v,A.state.loading=5),ci.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ci.set(s,a),v||rI(y,s,a,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ta(a),a=Gi(y).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function _a(s){return'href="'+Pn(s)+'"'}function Yl(s){return'link[rel="stylesheet"]['+s+"]"}function D0(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function rI(s,o,a,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),pn(o,"link",a),Ft(o),s.head.appendChild(o))}function Ta(s){return'[src="'+Pn(s)+'"]'}function $l(s){return"script[async]"+s}function P0(s,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+Pn(a.href)+'"]');if(c)return o.instance=c,Ft(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Ft(c),pn(c,"style",y),zc(c,a.precedence,s),o.instance=c;case"stylesheet":y=_a(a.href);var v=s.querySelector(Yl(y));if(v)return o.state.loading|=4,o.instance=v,Ft(v),v;c=D0(a),(y=ci.get(y))&&fp(c,y),v=(s.ownerDocument||s).createElement("link"),Ft(v);var A=v;return A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),pn(v,"link",c),o.state.loading|=4,zc(v,a.precedence,s),o.instance=v;case"script":return v=Ta(a.src),(y=s.querySelector($l(v)))?(o.instance=y,Ft(y),y):(c=a,(y=ci.get(v))&&(c=T({},a),hp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ft(y),pn(y,"link",c),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,zc(c,a.precedence,s));return o.instance}function zc(s,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===o)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(s,o.firstChild))}function fp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function hp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Kc=null;function k0(s,o,a){if(Kc===null){var c=new Map,y=Kc=new Map;y.set(a,c)}else y=Kc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(s))return c;for(c.set(s,null),a=a.getElementsByTagName(s),y=0;y<a.length;y++){var v=a[y];if(!(v[Bi]||v[et]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=s+A;var I=c.get(A);I?I.push(v):c.set(A,[v])}}return c}function V0(s,o,a){s=s.ownerDocument||s,s.head.insertBefore(a,o==="title"?s.querySelector("head > title"):null)}function aI(s,o,a){if(a===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function U0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function lI(s,o,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=_a(c.href),v=o.querySelector(Yl(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=Yc.bind(s),o.then(s,s)),a.state.loading|=4,a.instance=v,Ft(v);return}v=o.ownerDocument||o,c=D0(c),(y=ci.get(y))&&fp(c,y),v=v.createElement("link"),Ft(v);var A=v;A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),pn(v,"link",c),a.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=Yc.bind(s),o.addEventListener("load",a),o.addEventListener("error",a))}}var pp=0;function uI(s,o){return s.stylesheets&&s.count===0&&Jc(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var c=setTimeout(function(){if(s.stylesheets&&Jc(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+o);0<s.imgBytes&&pp===0&&(pp=62500*qw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Jc(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>pp?50:800)+o);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Yc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var $c=null;function Jc(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,$c=new Map,o.forEach(cI,s),$c=null,Yc.call(s))}function cI(s,o){if(!(o.state.loading&4)){var a=$c.get(s);if(a)var c=a.get(null);else{a=new Map,$c.set(s,a);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=o.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=Yc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var Jl={$$typeof:ee,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function dI(s,o,a,c,y,v,A,I,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function L0(s,o,a,c,y,v,A,I,U,J,te,ie){return s=new dI(s,o,a,A,U,J,te,ie,I),o=1,v===!0&&(o|=24),v=Kn(3,null,null,o),s.current=v,v.stateNode=s,o=$f(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:o},Wf(v),s}function O0(s){return s?(s=Wr,s):Wr}function H0(s,o,a,c,y,v){y=O0(y),c.context===null?c.context=y:c.pendingContext=y,c=ho(o),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=po(s,c,o),a!==null&&(Hn(a,s,o),wl(a,s,o))}function B0(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<o?a:o}}function mp(s,o){B0(s,o),(s=s.alternate)&&B0(s,o)}function F0(s){if(s.tag===13||s.tag===31){var o=ar(s,67108864);o!==null&&Hn(o,s,67108864),mp(s,67108864)}}function G0(s){if(s.tag===13||s.tag===31){var o=Xn();o=H(o);var a=ar(s,o);a!==null&&Hn(a,s,o),mp(s,o)}}var Qc=!0;function fI(s,o,a,c){var y=X.T;X.T=null;var v=ce.p;try{ce.p=2,gp(s,o,a,c)}finally{ce.p=v,X.T=y}}function hI(s,o,a,c){var y=X.T;X.T=null;var v=ce.p;try{ce.p=8,gp(s,o,a,c)}finally{ce.p=v,X.T=y}}function gp(s,o,a,c){if(Qc){var y=yp(c);if(y===null)np(s,o,c,Xc,a),z0(s,c);else if(mI(y,s,o,a,c))c.stopPropagation();else if(z0(s,c),o&4&&-1<pI.indexOf(s)){for(;y!==null;){var v=Zn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=be(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var U=1<<31-Et(A);I.entanglements[1]|=U,A&=~U}ts(v),(ct&6)===0&&(Dc=Pt()+500,Gl(0))}}break;case 31:case 13:I=ar(v,2),I!==null&&Hn(I,v,2),kc(),mp(v,2)}if(v=yp(c),v===null&&np(s,o,c,Xc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else np(s,o,c,null,a)}}function yp(s){return s=ei(s),vp(s)}var Xc=null;function vp(s){if(Xc=null,s=Fi(s),s!==null){var o=l(s);if(o===null)s=null;else{var a=o.tag;if(a===13){if(s=u(o),s!==null)return s;s=null}else if(a===31){if(s=f(o),s!==null)return s;s=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Xc=s,null}function q0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vi()){case hs:return 2;case Ys:return 8;case wn:case Ui:return 32;case jn:return 268435456;default:return 32}default:return 32}}var _p=!1,bo=null,wo=null,Io=null,Ql=new Map,Xl=new Map,xo=[],pI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function z0(s,o){switch(s){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":Ql.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(o.pointerId)}}function Wl(s,o,a,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=Zn(o),o!==null&&F0(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function mI(s,o,a,c,y){switch(o){case"focusin":return bo=Wl(bo,s,o,a,c,y),!0;case"dragenter":return wo=Wl(wo,s,o,a,c,y),!0;case"mouseover":return Io=Wl(Io,s,o,a,c,y),!0;case"pointerover":var v=y.pointerId;return Ql.set(v,Wl(Ql.get(v)||null,s,o,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,Xl.set(v,Wl(Xl.get(v)||null,s,o,a,c,y)),!0}return!1}function K0(s){var o=Fi(s.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=u(a),o!==null){s.blockedOn=o,je(s.priority,function(){G0(a)});return}}else if(o===31){if(o=f(a),o!==null){s.blockedOn=o,je(s.priority,function(){G0(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wc(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var a=yp(s.nativeEvent);if(a===null){a=s.nativeEvent;var c=new a.constructor(a.type,a);cl=c,a.target.dispatchEvent(c),cl=null}else return o=Zn(a),o!==null&&F0(o),s.blockedOn=a,!1;o.shift()}return!0}function Y0(s,o,a){Wc(s)&&a.delete(o)}function gI(){_p=!1,bo!==null&&Wc(bo)&&(bo=null),wo!==null&&Wc(wo)&&(wo=null),Io!==null&&Wc(Io)&&(Io=null),Ql.forEach(Y0),Xl.forEach(Y0)}function jc(s,o){s.blockedOn===o&&(s.blockedOn=null,_p||(_p=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gI)))}var Zc=null;function $0(s){Zc!==s&&(Zc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zc===s&&(Zc=null);for(var o=0;o<s.length;o+=3){var a=s[o],c=s[o+1],y=s[o+2];if(typeof c!="function"){if(vp(c||a)===null)continue;break}var v=Zn(a);v!==null&&(s.splice(o,3),o-=3,yh(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function Ea(s){function o(U){return jc(U,s)}bo!==null&&jc(bo,s),wo!==null&&jc(wo,s),Io!==null&&jc(Io,s),Ql.forEach(o),Xl.forEach(o);for(var a=0;a<xo.length;a++){var c=xo[a];c.blockedOn===s&&(c.blockedOn=null)}for(;0<xo.length&&(a=xo[0],a.blockedOn===null);)K0(a),a.blockedOn===null&&xo.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[Bt]||null;if(typeof v=="function")A||$0(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Bt]||null)I=A.formAction;else if(vp(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),$0(a)}}}function J0(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Tp(s){this._internalRoot=s}ed.prototype.render=Tp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var a=o.current,c=Xn();H0(a,c,s,o,null,null)},ed.prototype.unmount=Tp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;H0(s.current,2,null,s,null,null),kc(),o[Hi]=null}};function ed(s){this._internalRoot=s}ed.prototype.unstable_scheduleHydration=function(s){if(s){var o=Re();s={blockedOn:null,target:s,priority:o};for(var a=0;a<xo.length&&o!==0&&o<xo[a].priority;a++);xo.splice(a,0,s),a===0&&K0(s)}};var Q0=e.version;if(Q0!=="19.2.3")throw Error(i(527,Q0,"19.2.3"));ce.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(o),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var yI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Qt=td.inject(yI),kt=td}catch{}}return Zl.createRoot=function(s,o){if(!r(s))throw Error(i(299));var a=!1,c="",y=nv,v=iv,A=sv;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=L0(s,1,!1,null,null,a,c,null,y,v,A,J0),s[Hi]=o.current,tp(s),new Tp(o)},Zl.hydrateRoot=function(s,o,a){if(!r(s))throw Error(i(299));var c=!1,y="",v=nv,A=iv,I=sv,U=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),o=L0(s,1,!0,o,a??null,c,y,U,v,A,I,J0),o.context=O0(null),a=o.current,c=Xn(),c=H(c),y=ho(c),y.callback=null,po(a,y,c),a=c,o.current.lanes=a,un(o,a),ts(o),s[Hi]=o.current,tp(s),new ed(o)},Zl.version="19.2.3",Zl}var o_;function wI(){if(o_)return Ap.exports;o_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ap.exports=bI(),Ap.exports}var II=wI();const xI=hS(II);var xd=mS();const Sa=n=>Array.from(new Set(n)).sort((e,t)=>e.localeCompare(t)),gS=[{category:"Vital Sign",items:["Vital sign"]},{category:"Symptom",items:Sa(["Abdominal distention","Abdominal pain","Abnormal menstruation","Abnormal sexual exposure","Alopecia","Anorexia","Anosmia","Anxiety","Arthralgia","Back pain","Belching","Blurred vision","Bone pain","Cataracts","Change of bowel habit","Chest tightness/pain","Chills","Clay-colored stool","Cloudy urine","Color changes","Consciousness disturbance","Constipation","Cough","Cramps","Decreased appetite","Delusion","Dental problems","Depression","Diarrhea","Diplopia","Dizziness","Dry eye","Dry mouth","Dryness","Dysphagia","Dyspnea","Dysuria","Ecchymoses","Epistaxis","Excess tearing","Eye redness","Fatigue","Fever","Flank pain","Flatulence","Fractures","Gait disturbance","General edema","Glaucoma","Gum bleeding","Hair loss","Hallucination","Head trauma","Headache","Hearing impairment","Heartburn/acid regurgitation","Heat/cold intolerance","Hematemesis","Hematuria","Hemoptysis","Hesitancy","Hiccup","Hirsutism","Hoarseness","Impotence","Incontinence","Insomnia","Intermittent claudication","Jaundice","Joint stiffness","Joint swelling","Memory loss","Mental stage change","Moles","Myalgia","Nasal congestion","Nausea","Night sweats","Nocturia","Numbness","Ocular pain","Odynophagia","Oliguria","Oral ulcer","Orthopnea","Otalgia","Otorrhea","Palpitation","Panic","Paraesthesia","Paresis/plegia","Paroxysmal nocturnal dyspnea","Petechiae","Photophobia","Plaque","Polyuria","Pruritus","Purpura","Rash","Resting tremor","Rhinorrhea","Small stream of urine","Somnolence","Sore throat","Speech problem","Sputum","Suicidality","Syncope","Tarry stool","Telangiectasia","Tenesmus","Thirsty","Tinnitus","Ulcers","Urgency","Urinary frequency","Vertigo","Visual field defect","Vomiting","Weight change","Wheezes"])},{category:"Negative Symptom",items:[]},{category:"Medical Facility",items:["Keelung Chang Gung Memorial Hospital ()","Linkou Chang Gung Memorial Hospital ()","Chiayi Chang Gung Memorial Hospital ()","Kaohsiung Chang Gung Memorial Hospital ()","National Taiwan University Hospital ()","National Taiwan University Hospital Yunlin Branch ()","National Taiwan University Hospital Hsinchu Branch ()","National Taiwan University Cancer Center ()","Taipei Veterans General Hospital ()","Taichung Veterans General Hospital ()","Kaohsiung Veterans General Hospital ()","Taipei City Hospital, Renai Branch ()","Taipei City Hospital, Zhongxing Branch ()","Taipei City Hospital, Heping Fuyou Branch ()","Taipei City Hospital, Yangming Branch ()","Taipei City Hospital, Zhongxiao Branch ()","Tri-Service General Hospital ()","Mackay Memorial Hospital ()","Hsinchu Mackay Memorial Hospital ()","Mackay Memorial Hospital Tamsui Branch ()","Cathay General Hospital ()","Sijhih Cathay General Hospital ()","Shin Kong Wu Ho-Su Memorial Hospital ()","Wanfang Hospital","Taipei Medical University Hospital ()","Cheng Hsin General Hospital ()","Far Eastern Memorial Hospital ()","Taipei Tzu Chi Hospital ()","Hualien Tzu Chi Hospital ()","Dalin Tzu Chi Hospital ()","Cardinal Tien Hospital ()","Fu Jen Catholic University Hospital ()","Taoyuan General Hospital, Ministry of Health and Welfare ()","China Medical University Hospital ()","Chung Shan Medical University Hospital ()","Tungs' Taichung MetroHarbor Hospital ()","Kuang Tien General Hospital ()","Cheng Ching Hospital ()","Changhua Christian Hospital ()","Show Chwan Memorial Hospital ()","Chia-Yi Christian Hospital ()","National Cheng Kung University Hospital ()","Chi Mei Medical Center ()","Kaohsiung Medical University Chung-Ho Memorial Hospital ()","E-Da Hospital ()","Taiwan Adventist Hospital ()","Pojen General Hospital ()","West Garden Hospital ()","Taipei Hospital, Ministry of Health and Welfare ()","New Taipei City Hospital ()","Cardinal Tien Hospital Yonghe Branch ()","New Taipei Municipal Tucheng Hospital ()"]},{category:"Disease",items:Sa(["Acute Bronchitis","Acute Gastroenteritis (AGE)","Acute Kidney Injury (AKI)","Acute Myocardial Infarction (AMI)","Acute Pancreatitis","Acute Pyelonephritis (APN)","Adrenal Insufficiency","Anemia","Ankylosing Spondylitis (AS)","Aortic Stenosis / Regurgitation","Appendicitis","Asthma","Atrial Fibrillation (Afib)","Benign Prostatic Hyperplasia (BPH)","Breast Cancer","Cellulitis","Cerebrovascular Accident (CVA) / Stroke","Cholecystitis","Chronic Kidney Disease (CKD)","Chronic Obstructive Pulmonary Disease (COPD)","Colorectal Cancer","Congestive Heart Failure (CHF) / Heart Failure (HF)","Coronary Artery Disease (CAD)","Deep Vein Thrombosis (DVT)","Dehydration","Dementia","Depression / Anxiety Disorder","Diabetes Mellitus (DM)","Diabetic Foot","Diabetic Ketoacidosis (DKA)","Diverticulitis","End-Stage Renal Disease (ESRD)","Esophageal Cancer","Gastroesophageal Reflux Disease (GERD)","Gout","Hepatitis B / C","Hepatocellular Carcinoma (HCC)","Herniated Intervertebral Disc (HIVD)","Herpes Zoster (Shingles)","Hyperlipidemia","Hypertension (HTN)","Hyperthyroidism","Hypothyroidism","Ileus / Bowel Obstruction","Infective Endocarditis","Influenza","Leukemia","Liver Cirrhosis","Lower GI Bleeding","Lung Cancer","Lymphoma","Meningitis / Encephalitis","Myasthenia Gravis (MG)","Necrotizing Fasciitis","Nephrotic Syndrome","Obstructive Sleep Apnea (OSA)","Parkinson's Disease","Peptic Ulcer Disease (PUD)","Peripheral Arterial Occlusive Disease (PAOD)","Pleural Effusion","Pneumonia","Pneumothorax","Prostate Cancer","Pulmonary Embolism (PE)","Pulmonary Tuberculosis (TB)","Rabies","Rheumatoid Arthritis (RA)","Seizure Disorder / Epilepsy","Sepsis / Septic Shock","Sjogren's Syndrome","Systemic Lupus Erythematosus (SLE)","Thrombocytopenia","Tumor Bleeding","Upper GI Bleeding","Urinary Tract Infection (UTI)","Urolithiasis / Renal Stone","Vertigo / Benign Paroxysmal Positional Vertigo (BPPV)"])},{category:"Tentative Diagnosis",items:[]},{category:"Underlying disease",items:[]},{category:"Definitive diagnosis",items:[]},{category:"Physical examination",items:Sa(["Breathing sound","Heart sound","Pitting edema","Abdominal tenderness","Rebound tenderness","Muscle guarding","Knocking pain","Tenderness"])},{category:"Lab data",items:Sa(["Anemia","Leukocytosis","Leukopenia","Neutrophilia","Neutropenia","Lymphocytosis","Lymphocytopenia / Lymphopenia","Monocytosis","Eosinophilia","Basophilia","Thrombocytosis","Thrombocytopenia","Pancytopenia","Polycythemia / Erythrocytosis","Macrocytosis","Microcytosis","Reticulocytosis","Prolonged PT/INR","Prolonged aPTT","Hypofibrinogenemia","Hypernatremia","Hyponatremia","Hyperkalemia","Hypokalemia","Hypercalcemia","Hypocalcemia","Hypermagnesemia","Hypomagnesemia","Hyperphosphatemia","Hypophosphatemia","Hyperchloremia","Hypochloremia","Azotemia","Uremia","Hematuria","Proteinuria","Albuminuria / Microalbuminuria","Pyuria","Glycosuria / Glucosuria","Ketonuria","Bacteriuria","Cylindruria","Crystalluria","Hemoglobinuria","Myoglobinuria","Hyperbilirubinemia","Elevated Transaminases","Cholestasis","Hypoalbuminemia","Hyperglobulinemia","Hyperammonemia","Elevated Alkaline Phosphatase (Alk-P)","Hypoproteinemia","Hyperglycemia","Hypoglycemia","Elevated HbA1c","Hyperlipidemia / Dyslipidemia","Hypercholesterolemia","Hypertriglyceridemia","Hyperuricemia","Thyrotoxicosis","Subclinical Hypothyroidism","Hyperferritinemia","Metabolic Acidosis","Metabolic Alkalosis","Respiratory Acidosis","Respiratory Alkalosis","Hypoxemia","Hypercapnia","Hypocapnia","Hyperlactatemia / Lactic Acidosis","Elevated C-Reactive Protein (CRP)","Elevated ESR","Procalcitonin Elevation","Elevated Troponin (Troponin-I / T)","Elevated BNP / NT-proBNP","Elevated CK-MB","Elevated CPK / Creatine Kinase","elevated lactate","elevated BUN","elevated creatinine","microscopic hematuria","macroscopic hematuria"])},{category:"Culture / Gram stain",items:["wound","pus","blood","sputum","urine","stool","CSF","pleural effusion","ascites","Synovial fluid","CVC Tip","Port-A Tip","Foley Tip","Bronchoalveolar Lavage","Nasopharyngeal Swab","Throat Swab"]},{category:"Image finding",items:Sa(["Chest X-ray (CXR)","Kidney, Ureter, and Bladder (KUB)","Abdominal Plain Film (Abd X-ray)","Spine X-ray (C/T/L-spine)","Bone X-ray","Abdominal Ultrasonography (Abd Echo/TAS)","Echocardiography (Echo)","Thyroid Ultrasonography","Breast Ultrasonography","Carotid Duplex Ultrasound","Kidney/Renal Ultrasonography","Brain CT","Chest CT","Abdominal CT","CT Angiography (CTA)","High-Resolution Computed Tomography (HRCT)","Brain MRI","Spine MRI","Magnetic Resonance Angiography (MRA)","Magnetic Resonance Cholangiopancreatography (MRCP)","Bone Scan","Positron Emission Potentially (PET)","Angiography","Mammography"])},{category:"Treatment",items:Sa(["Antibiotics","Diuretics","Fluid resuscitation","Oxygen therapy","Hemodialysis","Bronchodilator"])}],Rm=`
**Role:**
 JSON   / Admission Note - Present Illness section

**Input Data Structure ():**
 JSON 
1. \`patient_profile\`:  ( \`control_status\`)
2. \`timepoints\`:  ** (Array)** \`date\`, \`symptom\`, \`vital_sign\`, \`treatment\`, \`lab_data\`, \`image_finding\`, \`negative_symptom\`  Key
   - **:**  Key  \`""\`  \`null\` (SKIP) "unknown" 

**Objective:**


**Style Guidelines (STYLE GUIDELINES) - :**

1. ** (Narrative Logic & Chain of Care):**
   - **LMD  ER :**  \`timepoints\`  (LMD)  **"futile"**, **"ineffective"**  **"not effective"** (ER) 
   - **:**  **"This time"**  **"At this time"**  (PMH)  (Present Illness)
   - **:** **"According to [family/wife/husband]..."**  **"[Family member] witnessed that..."**

2. ** (Sentence Structure & Grammar):**
   - **"Denied" () :**  "No fever, no cough"  \`negative_symptom\`  **"denied"**"He denied fever, chills, or chest pain."**"No [symptom] was noted/mentioned."**
   - **"Beside" :**  **"Beside"** "Besides"
   - **/:**  "He had a tremor" **"[Symptom] was noted/observed"**  **"[Symptom] occurred"**
   - **/:** **"Aggravated by [A] but not [B]"**  **"Relieved by [C]"**
   - **:** **"For [Diagnosis], he/she was admitted..."**  **"Under the impression of [Diagnosis], he/she was admitted..."**

3. ** (Data Formatting):**
   - **:** **"[Disease] + [Duration] + [Follow-up Location] + [Control status]"**"Hypertension for 10 years with regular follow-up at our OPD."
   - ** ():** **Temperature -> Blood Pressure -> Pulse -> Respiratory Rate -> SpO2**
   - **:**  (;) "WBC: 10700/ul; CRP: 76.4 mg/L"
   - **:**  ** + /**"Yellowish, tenacious sputum", "Pinkish urine"
   - **:**  **"unremarkable"**
   - **:** **Brand names** ()  (e.g., *Unasyn*); **Generic names** ()  (e.g., *moxifloxacin*)

4. ** (Grammar & Terminology Precision) [NEW]:**
   - **:**  "since 3 days ago" **"for 3 days"**, **"since 3 days prior"**,  **"developed 3 days before admission"**
   - **:** - : **lungs**, **feet**, **breath sounds**, **bowel sounds**
     - : sputum, urine, inflammation
   - **:** - Weakness **in** the leg (NOT over).
     - Tenderness **over** the spine.
     - Mass **in** the lung.
   - **:**  "LMD"  **"local clinic"**  **"private clinic"** "AAD"  **"discharged against medical advice (AMA)"**

** (VOCABULARY BANK) - :**


* ** (Mode of Onset / Appearance):**
  - ** (Verbs):** Appear, Develop, Present (with), Occur (on), Strike, Ensue from, Be restricted to.
  - ** (Adjectives):** Sudden / Abrupt, Gradual / Insidious, Progressive, Episodic / Paroxysmal, Intermittent, Transient, Periodic, Recurrent.
* ** (Causality):**
  - **:** Be provoked by, Be precipitated by, Be triggered by, Be induced by.
  - **:** Be associated with, Be related to, Be accompanied by, Be complicated by.
* ** (Course & Outcome):**
  - **:** Disappear, Vanish, Subside.
  - **:** Improve, Become better, Lessen; (Passive) Be relieved, Be palliated, Be alleviated.
  - **:** Aggravate, Exacerbate, Worsen, Deteriorate.
  - **:** Recur, Relapse, Flare up.
  - **:** Fluctuate, Wax and wane.
* ** (Encounter & Work-up):**
  - **:** Was admitted, Was seen, Was evaluated, Was referred, Was transferred.
  - ** (Procedures):** - Use: **"Insert a Foley"**, **"Perform intubation"**, **"Replace an NG tube"**.
    - **FORBIDDEN:** "On Foley", "Re-on NG", "On endo".
  - ** (Test):** Was performed, Was obtained, Was collected.
* ** (Treatment):**
  - **:** Treat, Administer, Give, Initiate, Start.
  - **:** **Switch to**, **Replace by**, **Substitute for**. (FORBIDDEN: "Shift to").
  - **:** **Discontinue**, **Withhold**, **Stop**. (FORBIDDEN: "Hold").
  - **:** Be ineffective, Not effective, **Futile**; Result in improvement.
* **:**
  - **:** **"Sequently"**, **"Consecutively"**, **"Successively"**, **"Afterwards"**.
  - **:** **"manifested"**, **"depicted"**, **"revealed"**, **"demonstrated"**, **"evinced"**.
  - **:** **"Avowed"**, **"Perceived"**, **"Complained of"**, State, Insist, Claim, Confide.
  - **:** Use **"Was diagnosed with"**, **"A diagnosis of... was made"**. (FORBIDDEN: "Was told to have", "Pneumonia was impressed").
  - **:** Use **"Lost to follow-up"**, **"Defaulted"**. (FORBIDDEN: "Escape").
  - **:** **stationary**, **"stable"**.
  - **:** **"antecedent [Disease]"**.

**Drafting Structure ( - Dynamic Loop):**

1. ** (Background)**
   -  \`patient_profile\` 
   - : "This [Age]-year-old [Gender] has a medical history of [Disease]..." ( \`control_status\`)

2. ** N  (The Narrative Loop)**
   - **:**  (Iterate through) \`timepoints\` 
   - **Loop :**
     - ** (Timepoint):**
       -  \`date\` 
       - ** (Symptom):**  \`symptom\` ()  \`negative_symptom\` ( "denied")
       - ** (Objective):**  \`vital_sign\`, \`lab_data\`, \`image_finding\` "revealed/evinced/manifested" 
       - ** (Treatment):**  \`treatment\` LMD (Local Clinic)  **"futile"**  **"ineffective"**
     - ** (Transition):**  Vocabulary Bank  ( "Sequently", "Consecutively") 

3. ** (Conclusion/Admission)**
   -  ( ER)  \`definitive_diagnosis\` 
   - : "**For [Diagnosis], he/she was admitted for further evaluation and administration.**"

**Anti-Hallucination & Missing Detail Prompts ( - CRITICAL):**

**Rule 1: Strict Anti-Hallucination**
Do **NOT** invent any data not present in the JSON. If the JSON says "fever" but gives no temperature, do NOT make up a number like "38.5C".

**Rule 2: The "Missing Detail" Heuristic ()**
While you must not invent details, you MUST flag clinically important missing information. If the JSON input provides a *generic* term without *specific attributes*, **insert a reminder in parentheses within the sentence**: \`(Note: Please add [Detail Name])\`.

**Apply this rule to the following categories:**

* **Symptoms (LQQOPERA check):**
    * If a symptom is listed without **Duration**, insert \`(Note: duration?)\`.
    * If "Pain" is listed without **Location**, **Quality**, or **Radiation**, insert \`(Note: location/quality/radiation?)\`.
    * If "Fever" is listed without **Temperature (Tmax)**, insert \`(Note: Tmax?)\`.
* **Secretions/Excretions:**
    * If "Sputum", "Diarrhea", "Hematuria" are mentioned without **Color/Amount/Consistency**, insert \`(Note: color/amount/consistency?)\`.
* **Treatment/Medication:**
    * If generic terms (e.g., "Antibiotics") are used without a **Specific Drug Name**, insert \`(Note: drug name?)\`.
* **Labs/Images:**
    * If "Image finding" is present but lacks a **Description**, insert \`(Note: image finding description?)\`.
    * If generic lab abnormalities (e.g., "Leukocytosis") are mentioned without \`Specific Values\`, insert \`(Note: value?)\`.
`;/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),r_=n=>{const e=NI(n);return e.charAt(0).toUpperCase()+e.slice(1)},yS=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),MI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=ae.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:l,iconNode:u,...f},g)=>ae.createElement("svg",{ref:g,...DI,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:yS("lucide",r),...!l&&!MI(f)&&{"aria-hidden":"true"},...f},[...u.map(([h,_])=>ae.createElement(h,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(n,e)=>{const t=ae.forwardRef(({className:i,...r},l)=>ae.createElement(PI,{ref:l,iconNode:e,className:yS(`lucide-${RI(r_(n))}`,`lucide-${n}`,i),...r}));return t.displayName=r_(n),t};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vS=Ge("activity",kI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],UI=Ge("arrow-right",VI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],OI=Ge("brain-circuit",LI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],BI=Ge("building-2",HI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],GI=Ge("calendar-days",FI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_S=Ge("check",qI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],a_=Ge("chevron-down",zI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ns=Ge("chevron-right",KI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$I=Ge("circle-alert",YI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],QI=Ge("circle-check",JI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],TS=Ge("circle-user",XI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jI=Ge("clock",WI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],ex=Ge("cloud-download",ZI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Nm=Ge("copy",tx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ix=Ge("external-link",nx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ES=Ge("file-text",sx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],rx=Ge("grip-vertical",ox);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],lx=Ge("heart-pulse",ax);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],l_=Ge("history",ux);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],SS=Ge("key",cx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],au=Ge("loader-circle",dx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hx=Ge("lock",fx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],mx=Ge("log-out",px);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],yx=Ge("maximize-2",gx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],_x=Ge("message-square-text",vx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Ex=Ge("minimize-2",Tx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],Ax=Ge("octagon-alert",Sx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],AS=Ge("plus",Cx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],wx=Ge("redo-2",bx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xx=Ge("save",Ix);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ip=Ge("search",Rx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Mx=Ge("shield-check",Nx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hd=Ge("sparkles",Dx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CS=Ge("triangle-alert",Px);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Vx=Ge("type",kx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Lx=Ge("undo-2",Ux);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hx=Ge("user",Ox);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Fx=Ge("wand-sparkles",Bx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],qx=Ge("wind",Gx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pu=Ge("x",zx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yx=Ge("zap",Kx),$x=({onItemClick:n,customItems:e={},onAddCustomItem:t})=>{const[i,r]=ae.useState(""),[l,u]=ae.useState(""),[f,g]=ae.useState(""),[h,_]=ae.useState(null),[T,S]=ae.useState(null),[w,O]=ae.useState(null),[P,k]=ae.useState(null),[K,B]=ae.useState(null),[ee,oe]=ae.useState(null),[fe,de]=ae.useState(null),M=ae.useRef(null),N=ae.useRef(null),R=ae.useRef(null),L=ae.useRef(null),V=ae.useRef(null),[q,D]=ae.useState([]),[Be,at]=ae.useState(!1),[X,ce]=ae.useState(""),[Ee,qe]=ae.useState([]),[ze,F]=ae.useState(""),[j,ue]=ae.useState({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),[pe,we]=ae.useState(null),[xe,Le]=ae.useState([]),[mt,lt]=ae.useState(!1),[Mn,mi]=ae.useState(null),[Fn,gi]=ae.useState(""),[rn,ki]=ae.useState(""),[an,fs]=ae.useState(!1),[zs,bt]=ae.useState(null),[wt,yi]=ae.useState(null),[Ks,Qo]=ae.useState(null),[Pt,Vi]=ae.useState(""),[hs,Ys]=ae.useState("Select Category"),[wn,Ui]=ae.useState(""),jn=ae.useRef(null);ae.useRef(null);const $s=["Vital Sign","Symptom","Disease","Medical Facility","Physical examination","Lab data","Culture / Gram stain","Image finding","Treatment"],vi=["Penicillins ()","Cephalosporins ()","Carbapenems ()","Fluoroquinolones ()","Aminoglycosides ()","Tetracyclines ()","Macrolides ()","Glycopeptides & Lipopeptides ()","Other ()"],Qt={"Penicillins ()":["Penicillin G Benzathine","Penicillin G Sodium","Oxacillin (IV)","Dicloxacillin (PO)","Ampicillin","Amoxicillin","Ampicillin + Sulbactam (Unasyn)","Amoxicillin + Clavulanate (Augmentin)","Amoxicillin + Clavulanate (Curam)","Piperacillin + Tazobactam (Tazocin)","Ticarcillin + Clavulanate (Timentin)"],"Cephalosporins ()":[{type:"header",label:"--  --"},"Cefazolin (IV)","Cephalexin (PO)",{type:"header",label:"--  --"},"Cefuroxime (Zinacef - IV)","Cefuroxime (Ceflour - PO)",{type:"header",label:"--  (Cephamycins) --"},"Cefmetazole","Cefoxitin",{type:"header",label:"-- 2.5 --"},"Flomoxef (Flumarin)",{type:"header",label:"--  --"},"Ceftriaxone (Rocephin)","Cefotaxime (Claforan/Loforan)","Cefixime (PO)","Ceftazidime (Fortum)",{type:"header",label:"-- 3.5 --"},"Cefoperazone + Sulbactam (Brosym)",{type:"header",label:"--  --"},"Cefepime (Maxipime)",{type:"header",label:"--  --"},"Ceftobiprole (Zeftera)","Ceftaroline (Zinforo)",{type:"header",label:"--  --"},"Cefiderocol","Ceftazidime + Avibactam (Zavicefta)"],"Carbapenems ()":["Ertapenem (Invanz)","Imipenem (Tienam)","Meropenem (Mepem)","Doripenem (Finibax)"],"Fluoroquinolones ()":["Ciprofloxacin (Ciproxin)","Levofloxacin (Cravit)","Moxifloxacin (Avelox)","Gemifloxacin (Factive)","Nemonoxacin"],"Aminoglycosides ()":["Gentamicin","Amikacin","Streptomycin"],"Tetracyclines ()":["Tetracycline","Doxycycline","Minocycline","Tigecycline (Tygacil)","Eravacycline"],"Macrolides ()":["Erythromycin","Clarithromycin (Klaricid)","Azithromycin (Zithromax)"],"Glycopeptides & Lipopeptides ()":["Vancomycin","Teicoplanin (Targocid)","Daptomycin (Cubicicin)"],"Other ()":["Linezolid (Zyvox)","Metronidazole (Flagyl)","TMP-SMX (Baktar)","TMP-SMX (Sevatrim)","Colistin (Colimycin)","Clindamycin (Clincin)","Rifampin","Fosfomycin","Fusidic acid (Fucidin)","Monobactam (Aztreonam)"]};ae.useMemo(()=>{const H={...Qt};return Object.keys(Qt).forEach(me=>{const Re=e[me]||[];if(Re.length>0){const je=new Set(H[me].map(et=>typeof et=="string"?et:et.label)),it=Re.filter(et=>!je.has(et));H[me]=[...H[me],...it]}}),H},[Qt,e]);const kt=["Acinetobacter baumannii","Acinetobacter spp.","Actinomyces","Aeromonas hydrophila","Aggregatibacter actinomycetemcomitans","Alcaligenes","Aspergillus fumigatus","Bacillus anthracis","Bacillus cereus","Bacillus spp.","Bacteroides fragilis","Bartonella henselae","Bordetella pertussis","Borrelia burgdorferi","Borrelia recurrentis","Brucella melitensis","Burkholderia cepacia complex","Burkholderia pseudomallei","Campylobacter coli","Campylobacter jejuni","Candida albicans","Candida spp.","Capnocytophaga canimorsus","Cardiobacterium hominis","Chlamydia pneumoniae","Chlamydia trachomatis","Chlamydophila psittaci","Citrobacter","Clostridium botulinum","Clostridium difficile (also known as Clostridioides difficile)","Clostridium perfringens","Clostridium septicum","Clostridium sordellii","Clostridium tetani","Corynebacterium diphtheriae","Corynebacterium spp.","Coxiella burnetii","Cryptococcus","Eikenella corrodens","Enterobacter cloacae","Enterobacter spp.","Enterococcus faecalis","Enterococcus faecium","Enterococcus spp.","Erysipelothrix rhusiopathiae","Escherichia coli (E. coli)","Francisella tularensis","Fusobacterium","Gardnerella vaginalis","Haemophilus ducreyi","Haemophilus influenzae","Helicobacter pylori","Kingella kingae","Klebsiella pneumoniae","Klebsiella spp.","Lactobacillus","Legionella pneumophila","Leptospira interrogans","Listeria monocytogenes","Micrococci species","Moraxella catarrhalis","Morganella","Mycobacterium abscessus","Mycobacterium africanum","Mycobacterium avium complex (MAC)","Mycobacterium bovis","Mycobacterium canettii","Mycobacterium caprae","Mycobacterium chelonae","Mycobacterium fortuitum","Mycobacterium gordonae","Mycobacterium haemophilum","Mycobacterium kansasii","Mycobacterium leprae","Mycobacterium lepromatosis","Mycobacterium malmoense","Mycobacterium marinum","Mycobacterium microti","Mycobacterium orygis","Mycobacterium scrofulaceum","Mycobacterium tuberculosis","Mycobacterium ulcerans","Mycobacterium xenopi","Mycoplasma genitalium","Mycoplasma pneumoniae","Neisseria gonorrhoeae","Neisseria meningitidis","Nocardia","Orientia tsutsugamushi","Pasteurella multocida","Peptostreptococcus","Pneumocystis jirovecii","Prevotella","Proteus mirabilis","Proteus spp.","Providencia","Providencia stuartii","Pseudomonas aeruginosa","Rickettsia prowazekii","Rickettsia rickettsii","Rickettsia typhi","Salmonella enteritidis","Salmonella paratyphi","Salmonella typhi","Salmonella typhimurium","Schistosoma spp.","Serratia marcescens","Shigella dysenteriae","Staphylococcus aureus","Staphylococcus epidermidis","Staphylococcus saprophyticus","Stenotrophomonas maltophilia","Streptococcus agalactiae (Group B Streptococcus)","Streptococcus bovis","Streptococcus dysgalactiae","Streptococcus mutans","Streptococcus pneumoniae","Streptococcus pyogenes (Group A Streptococcus)","Streptococcus viridans","Treponema pallidum","Trichomonas vaginalis","Ureaplasma urealyticum","Vibrio cholerae","Vibrio parahaemolyticus","Vibrio vulnificus","Yersinia enterocolitica","Yersinia pestis"],vn=["No organisms seen","GPC: Gram-positive cocci in clusters","GPC: Gram-positive cocci in chains","GPC: Gram-positive cocci in pairs","GNB: Gram-negative bacilli","Yeast-like","GPB (Gram-positive bacilli / rods)","GNC (Gram-negative cocci)","GVC (Gram-variable cocci/bacilli)"],Et=["Crackles (Rales) - Coarse","Crackles (Rales) - Fine","Stridor","Wheezes","Rhonchi","Pleural Friction Rub"],Js=[{id:"RUL",label:"RUL",col:"Right",row:"Upper"},{id:"LUL",label:"LUL",col:"Left",row:"Upper"},{id:"RML",label:"RML",col:"Right",row:"Middle"},{id:"LML",label:"LML",col:"Left",row:"Middle"},{id:"RLL",label:"RLL",col:"Right",row:"Lower"},{id:"LLL",label:"LLL",col:"Left",row:"Lower"}],Li=["LUQ","RUQ","LLQ","RLQ"],Qs=["Right Hypochondriac Region","Epigastric Region","Left Hypochondriac Region","Right Lumbar / Flank Region","Umbilical Region","Left Lumbar / Flank Region","Right Iliac / Inguinal Fossa","Hypogastric / Suprapubic Region","Left Iliac / Inguinal Fossa"],[Dn,le]=ae.useState([]),_e=ae.useCallback(()=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{_(null),B(null),Se()},150)},[]),be=ae.useCallback(()=>{R.current&&(clearTimeout(R.current),R.current=null)},[]);ae.useEffect(()=>{h&&L.current&&L.current.focus()},[h]),ae.useEffect(()=>{(K||pe)&&V.current&&V.current.focus()},[K,pe]),ae.useLayoutEffect(()=>{if(w&&M.current){const H=M.current.getBoundingClientRect(),me=16;let{top:Re,left:je}=w;Re+H.height>window.innerHeight-me&&(Re=Math.max(me,window.innerHeight-H.height-me)),je+H.width>window.innerWidth-me&&(je=Math.max(me,window.innerWidth-H.width-me)),k({top:Re,left:je,width:H.width,maxHeight:window.innerHeight-Re-me})}},[w,h]),ae.useLayoutEffect(()=>{if(ee&&N.current){const H=N.current.getBoundingClientRect(),me=16;let{top:Re,left:je}=ee;Re+H.height>window.innerHeight-me&&(Re=Math.max(me,window.innerHeight-H.height-me)),P&&je+H.width>window.innerWidth-me&&(je=Math.max(me,P.left-H.width-4)),de({top:Re,left:je,width:H.width,maxHeight:window.innerHeight-Re-me})}},[ee,P,K,pe]);const Se=()=>{Le([]),lt(!1),we(null),mi(null),gi(""),ki(""),u(""),g(""),D([]),at(!1),ce(""),qe([]),F("")},nt=(H,me,Re)=>{be();const je=H.currentTarget.getBoundingClientRect();_(me),S(Re),u(""),O({top:je.top,left:je.right+4,right:je.right}),h!==me&&(B(null),Se())},ln=(H,me)=>{be();const Re=H.currentTarget.getBoundingClientRect();B(me),g(""),oe({top:Re.top,left:Re.right+4,right:Re.right})},_n=H=>{at(!1),D(me=>me.includes(H)?me.filter(Re=>Re!==H):[...me,H])},Xt=()=>{const H=Be?"Bilateral":q.join(", ");H?n("Physical examination",`${K} at ${H}`):n("Physical examination",K),_(null),Se()},un=()=>{const H=X?`Grade ${X}/6`:"",me=Ee.length>0?Ee.join(", "):"",Re=ze?`at ${ze}`:"",it=`Murmur: ${[H,me,Re].filter(Boolean).join(" ")}`;n("Physical examination",it),_(null),Se()},Xs=()=>{const H=[];j.T&&H.push(`T: ${j.T} C`),j.P&&H.push(`P: ${j.P} bpm`),j.R&&H.push(`R: ${j.R} /min`),j.BP&&H.push(`BP: ${j.BP} mmHg`),j.SpO2&&H.push(`SpO2: ${j.SpO2} %`),j.GCS&&H.push(`GCS: ${j.GCS}`),H.length>0&&(n("Vital Sign",H.join(", ")),ue({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),_(null),Se())},Oi=(H,me)=>{be();const Re=H.currentTarget.getBoundingClientRect();me==="zones"?(oe({top:Re.top,left:Re.right+4,right:Re.right}),we("zones"),g("")):(oe({top:Re.top,left:Re.right+4,right:Re.right}),mi("details"),g(""))},Ws=H=>{Le(me=>me.includes(H)?me.filter(Re=>Re!==H):[...me,H]),lt(!1)},Vt=(H,me)=>{if(!me)return H;const Re=me.toLowerCase();return H.filter(je=>(typeof je=="string"?je:je.label).toLowerCase().includes(Re))};return C.jsxs("div",{className:"flex flex-col h-full bg-slate-50 border-r border-slate-200 overflow-visible relative",children:[C.jsxs("div",{className:"p-4 bg-white border-b border-slate-200 shadow-sm z-10 flex flex-col gap-3",children:[C.jsxs("div",{children:[C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:"Menu Source"}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Search categories...",className:"w-full pl-9 pr-3 py-2 text-sm border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",value:i,onChange:H=>r(H.target.value)}),C.jsx(Ip,{className:"absolute left-3 top-2.5 text-slate-400 w-4 h-4"})]})]}),C.jsxs("div",{className:"border-t border-slate-100 pt-3",children:[C.jsxs("button",{onClick:()=>fs(!an),className:"flex items-center text-xs font-bold text-blue-600 hover:text-blue-800 transition-colors uppercase tracking-tight",children:[an?C.jsx(a_,{className:"w-3 h-3 mr-1"}):C.jsx(ns,{className:"w-3 h-3 mr-1"}),"Add Custom Item"]}),an&&C.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2 duration-200",children:[C.jsxs("button",{ref:jn,onClick:()=>{if(jn.current){const H=jn.current.getBoundingClientRect();bt(me=>me?null:{top:H.bottom+4,left:H.left})}},className:"w-full px-3 py-2 text-xs text-left font-semibold bg-slate-50 border border-slate-200 rounded-md hover:bg-slate-100 text-slate-700 flex justify-between items-center",children:[C.jsx("span",{className:"truncate",children:hs}),C.jsx(ns,{className:"w-3 h-3 text-slate-400"})]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{type:"text",placeholder:"Item Name",className:"flex-1 px-3 py-2 text-xs border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",value:wn,onChange:H=>Ui(H.target.value)}),C.jsx("button",{disabled:!Pt||!wn.trim(),onClick:()=>{t&&Pt&&wn.trim()&&(t(Pt,wn.trim()),Ui(""))},className:"px-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C.jsx(xx,{className:"w-4 h-4"})})]})]})]})]}),C.jsx("div",{className:"flex-1 overflow-y-auto p-2 scrollbar-thin",children:gS.map(H=>{if(!$s.includes(H.category))return null;const me=H.items.filter(it=>it.toLowerCase().includes(i.toLowerCase()));if(i&&me.length===0)return null;const Re=Dn.includes(H.category),je=H.category==="Vital Sign"?"text-green-600 hover:bg-green-50":H.category==="Medical Facility"?"text-blue-600 hover:bg-blue-50":H.category==="Culture / Gram stain"?"text-cyan-600 hover:bg-cyan-50":H.category==="Lab data"?"text-orange-600 hover:bg-orange-50":"text-slate-600 hover:bg-slate-100";return C.jsxs("div",{className:"mb-2",children:[C.jsxs("button",{onClick:()=>le(it=>it.includes(H.category)?it.filter(et=>et!==H.category):[...it,H.category]),className:`w-full flex items-center px-2 py-2 text-sm font-semibold rounded-md transition-colors ${je}`,children:[Re?C.jsx(a_,{className:"w-4 h-4 mr-1"}):C.jsx(ns,{className:"w-4 h-4 mr-1"}),H.category]}),Re&&C.jsx("div",{className:"pl-4 mt-1 space-y-1",children:me.map(it=>{const et=H.category==="Vital Sign"||H.category==="Symptom"||H.category==="Disease"||H.category==="Medical Facility"||H.category==="Physical examination"||H.category==="Culture / Gram stain"||H.category==="Treatment"&&it==="Antibiotics";return C.jsxs("div",{onMouseEnter:Bt=>et&&nt(Bt,it,H.category),onMouseLeave:_e,onClick:()=>!et&&n(H.category,it),className:`group relative flex items-center justify-between px-3 py-2 text-sm text-slate-700 bg-white border rounded-md transition-all active:scale-95 cursor-pointer ${h===it?"border-blue-400 bg-blue-50/30 shadow-sm":"border-slate-200 hover:border-blue-400 hover:shadow-sm"}`,children:[C.jsx("span",{className:"truncate",children:it}),et?C.jsx(ns,{className:`w-3 h-3 ${h===it?"opacity-100":"text-slate-300 opacity-60 group-hover:opacity-100"}`}):C.jsx(rx,{className:"w-3 h-3 text-slate-300 opacity-0 group-hover:opacity-100"})]},it)})})]},H.category)})}),h&&w&&xd.createPortal(C.jsxs("div",{ref:M,onMouseEnter:be,onMouseLeave:_e,className:"fixed z-[9999] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-1 duration-150 min-w-[220px] max-w-[340px] overflow-hidden flex flex-col",style:{top:(P==null?void 0:P.top)??w.top,left:(P==null?void 0:P.left)??w.left,maxHeight:(P==null?void 0:P.maxHeight)??"80vh"},children:[T!=="Vital Sign"&&T!=="Medical Facility"&&C.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{ref:L,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:l,onChange:H=>u(H.target.value)}),C.jsx(Ip,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),C.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[T==="Medical Facility"&&["Emergency Department","Outpatient Department"].map(H=>C.jsx("button",{onClick:()=>{const me=h.replace(/\s*\(.*?\)/,"");n("Medical Facility",`the ${H} of ${me}`),_(null),Se()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-blue-50 text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:H},H)),T==="Culture / Gram stain"&&Vt(["Culture","Gram stain"],l).map(H=>C.jsxs("div",{onMouseEnter:me=>ln(me,H),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${K===H?"bg-cyan-50 text-cyan-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[H,C.jsx(ns,{className:"w-3 h-3"})]},H)),T==="Vital Sign"&&h==="Vital sign"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(vS,{className:"w-4 h-4"}),C.jsx("span",{children:"Vital Sign Entry"})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"T (C)"}),C.jsx("input",{type:"text",placeholder:"37.0",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.T,onChange:H=>ue({...j,T:H.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"P (bpm)"}),C.jsx("input",{type:"text",placeholder:"80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.P,onChange:H=>ue({...j,P:H.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"R (/min)"}),C.jsx("input",{type:"text",placeholder:"18",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.R,onChange:H=>ue({...j,R:H.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"SpO2 (%)"}),C.jsx("input",{type:"text",placeholder:"98",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.SpO2,onChange:H=>ue({...j,SpO2:H.target.value})})]})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"BP (mmHg)"}),C.jsx("input",{type:"text",placeholder:"120/80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.BP,onChange:H=>ue({...j,BP:H.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"GCS"}),C.jsx("input",{type:"text",placeholder:"E4V5M6",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.GCS,onChange:H=>ue({...j,GCS:H.target.value})})]}),C.jsx("button",{onClick:Xs,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 active:scale-95 transition-all",children:"Insert Vital Signs"})]}),T==="Symptom"&&Vt(["Positive","Negative"],l).map(H=>C.jsx("button",{onClick:()=>{n(H==="Positive"?"Symptom":"Negative Symptom",h),_(null),Se()},className:`w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 ${H==="Positive"?"hover:bg-blue-50 text-blue-700":"hover:bg-red-50 text-red-700"}`,children:H},H)),T==="Disease"&&Vt(["Tentative Diagnosis","Underlying Disease","Definitive Disease"],l).map(H=>C.jsx("button",{onClick:()=>{n(H==="Underlying Disease"?"Underlying disease":H==="Definitive Disease"?"Definitive diagnosis":H,h),_(null),Se()},className:"w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 hover:bg-indigo-50 text-indigo-700",children:H},H)),T==="Physical examination"&&h==="Breathing sound"&&Vt(Et,l).map(H=>C.jsxs("div",{onMouseEnter:me=>ln(me,H),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${K===H?"bg-blue-50 text-blue-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[H,C.jsx(ns,{className:"w-3 h-3"})]},H)),T==="Physical examination"&&h==="Heart sound"&&Vt(["Heart Beats","Murmur"],l).map(H=>C.jsxs("div",{onMouseEnter:me=>ln(me,H),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${K===H?"bg-indigo-50 text-indigo-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[H,C.jsx(ns,{className:"w-3 h-3"})]},H)),T==="Treatment"&&h==="Antibiotics"&&Vt(vi,l).map(H=>C.jsxs("div",{onMouseEnter:me=>ln(me,H),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${K===H?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:[H,C.jsx(ns,{className:"w-3 h-3"})]},H)),T==="Physical examination"&&(h==="Abdominal tenderness"||h==="Rebound tenderness"||h==="Muscle guarding"||h==="Knocking pain")&&Vt(["Yes","No"],l).map(H=>C.jsxs("button",{onMouseEnter:me=>H==="Yes"?Oi(me,"zones"):void 0,onClick:()=>H==="No"&&(n("Physical examination",`No ${h}`),_(null),Se()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${H==="Yes"&&pe?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[H," ",H==="Yes"&&C.jsx(ns,{className:"w-4 h-4"})]},H)),T==="Physical examination"&&h==="Pitting edema"&&Vt(["Yes","No"],l).map(H=>C.jsxs("button",{onMouseEnter:me=>H==="Yes"?Oi(me,"details"):void 0,onClick:()=>H==="No"&&(n("Physical examination","No pitting edema"),_(null),Se()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${H==="Yes"&&Mn?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[H," ",H==="Yes"&&C.jsx(ns,{className:"w-4 h-4"})]},H))]})]}),document.body),(K||pe||Mn)&&ee&&xd.createPortal(C.jsxs("div",{ref:N,onMouseEnter:be,onMouseLeave:_e,className:"fixed z-[10000] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-2 duration-200 min-w-[260px] max-w-[420px] overflow-hidden flex flex-col",style:{top:(fe==null?void 0:fe.top)??ee.top,left:(fe==null?void 0:fe.left)??ee.left,maxHeight:(fe==null?void 0:fe.maxHeight)??"80vh"},children:[C.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{ref:V,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:f,onChange:H=>g(H.target.value)}),C.jsx(Ip,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),C.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[T==="Culture / Gram stain"&&K==="Culture"&&Vt(kt,f).map(H=>C.jsx("button",{onClick:()=>{n("Lab data",`${h} Culture: ${H}`),_(null),Se()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:H},H)),T==="Culture / Gram stain"&&K==="Gram stain"&&Vt(vn,f).map(H=>C.jsx("button",{onClick:()=>{n("Lab data",`${h} Gram stain: ${H}`),_(null),Se()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:H},H)),T==="Physical examination"&&h==="Breathing sound"&&C.jsxs("div",{className:"p-4 w-64 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(qx,{className:"w-4 h-4"}),C.jsx("span",{children:"Zone Selector"})]}),C.jsx("button",{onClick:()=>{at(!Be),D([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${Be?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Bilateral"}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Right"}),C.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Left"}),Js.map(H=>C.jsx("button",{onClick:()=>_n(H.id),className:`py-3 text-xs font-bold border-2 rounded-lg transition-all ${q.includes(H.id)?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white border-slate-100 text-slate-600 hover:border-blue-200"}`,children:H.label},H.id))]}),C.jsx("button",{onClick:Xt,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Findings"})]}),T==="Physical examination"&&K==="Heart Beats"&&Vt(["regular","irregular"],f).map(H=>C.jsx("button",{onClick:()=>{n("Physical examination",`Heart Beats: ${H}`),_(null),Se()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-indigo-50 hover:text-indigo-700 transition-colors border-b border-slate-50 last:border-0",children:H},H)),T==="Physical examination"&&K==="Murmur"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-indigo-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(lx,{className:"w-4 h-4"}),C.jsx("span",{children:"Murmur Detail"})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Intensity (Grade 1-6)"}),C.jsx("div",{className:"grid grid-cols-6 gap-1",children:[1,2,3,4,5,6].map(H=>C.jsx("button",{onClick:()=>ce(H.toString()),className:`py-1.5 text-xs font-bold border-2 rounded-md transition-all ${X===H.toString()?"bg-indigo-600 border-indigo-600 text-white":"bg-white text-slate-600 hover:bg-indigo-50 border-slate-100"}`,children:H},H))})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Timing"}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Early"}),C.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Late"}),["Systolic","Diastolic"].map(H=>C.jsx(pS.Fragment,{children:["Early","Late"].map(me=>{const Re=`${me} ${H}`,je=Ee.includes(Re);return C.jsx("button",{onClick:()=>qe(it=>je?it.filter(et=>et!==Re):[...it,Re]),className:`py-2 text-[10px] font-bold border-2 rounded-lg transition-all ${je?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-slate-100 text-slate-500 hover:border-indigo-100"}`,children:Re},Re)})},H))]})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),C.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-32 overflow-y-auto p-1 border border-slate-100 rounded-lg bg-slate-50/50",children:["Aortic Area","Pulmonic Area","Tricuspid Area","Mitral Area, Apex"].map(H=>C.jsx("button",{onClick:()=>F(H),className:`px-3 py-1.5 text-left text-[11px] font-semibold rounded-md transition-colors ${ze===H?"bg-indigo-100 text-indigo-700":"text-slate-600 hover:bg-white"}`,children:H},H))})]}),C.jsx("button",{onClick:un,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Murmur"})]}),T==="Treatment"&&K&&Qt[K]&&Vt(Qt[K],f).map((H,me)=>{if(typeof H!="string"&&H.type==="header")return C.jsx("div",{className:"px-4 py-1.5 bg-slate-100 text-[11px] font-bold text-slate-400 uppercase tracking-tight",children:H.label},`h-${me}`);const Re=typeof H=="string"?H:H.label;return C.jsx("button",{onClick:()=>{n("Treatment",Re),_(null),Se()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-blue-50 hover:text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:Re},Re)}),pe==="zones"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsx("button",{onClick:()=>{lt(!mt),Le([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${mt?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Diffuse"}),C.jsxs("section",{children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Quadrants"}),C.jsx("div",{className:"grid grid-cols-2 gap-2",children:Vt(Li,f).map(H=>C.jsx("button",{onClick:()=>Ws(H),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${xe.includes(H)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:H},H))})]}),C.jsxs("section",{className:"pt-2 border-t border-slate-100",children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Regions"}),C.jsx("div",{className:"grid grid-cols-3 gap-1",children:Vt(Qs,f).map(H=>C.jsx("button",{onClick:()=>Ws(H),className:`p-1 text-[8px] leading-tight font-bold border-2 rounded-md h-12 flex items-center justify-center text-center ${xe.includes(H)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:H.replace(" Region","").replace(" / ",`
`)},H))})]}),C.jsx("button",{onClick:()=>{const H=mt?`${h}: diffuse`:xe.length>0?`${h} at ${xe.join(", ")}`:"";H&&(n("Physical examination",H),_(null),Se())},disabled:!mt&&xe.length===0,className:`w-full py-3 rounded-xl text-sm font-bold shadow-lg transition-all ${!mt&&xe.length===0?"bg-slate-200 text-slate-400":"bg-green-600 text-white hover:bg-green-700"}`,children:"Insert Findings"})]}),Mn==="details"&&C.jsxs("div",{className:"p-5 w-60 space-y-5",children:[C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3",children:"Grade"}),C.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Vt(["1+","2+","3+","4+"],f).map(H=>C.jsx("button",{onClick:()=>gi(H),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${Fn===H?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white text-slate-600 hover:bg-blue-50"}`,children:H},H))})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),C.jsx("input",{type:"text",placeholder:"e.g. Bilateral lower limbs",className:"w-full p-2.5 text-xs border-2 border-slate-100 rounded-lg outline-none focus:border-blue-400",value:rn,onChange:H=>ki(H.target.value)})]}),C.jsx("button",{onClick:()=>{const H=Fn?`Grade ${Fn}`:"",me=rn?`at ${rn}`:"";n("Physical examination",`Pitting edema: ${[H,me].filter(Boolean).join(" ")}`),_(null),Se()},className:"w-full py-3 bg-green-600 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-green-700 transition-all",children:"Insert"})]})]})]}),document.body)]})},Jx=({events:n,activeEventId:e,onSelectEvent:t,onAddEvent:i,onDeleteEvent:r,onCopyFromEvent:l})=>{const u=ae.useRef(null),[f,g]=ae.useState(null),[h,_]=ae.useState(null),T=(w,O)=>{w.stopPropagation();const P=w.currentTarget.getBoundingClientRect();_({top:P.top,left:P.right+10}),g(O)},S=w=>{f&&(l(f,w),g(null))};return ae.useEffect(()=>{const w=()=>g(null);return f&&window.addEventListener("click",w),()=>window.removeEventListener("click",w)},[f]),C.jsxs("div",{className:"flex flex-col h-full bg-slate-100 border-r border-slate-200 relative",children:[C.jsx("div",{className:"p-4 bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm flex-shrink-0",children:C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Timeline"})}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-6 relative",children:[C.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-slate-300 -translate-x-1/2 min-h-full"}),C.jsxs("div",{className:"space-y-8 pb-10",children:[C.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t("profile"),children:[C.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${e==="profile"?"bg-white border-blue-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-blue-400"}`}),C.jsxs("div",{className:`relative w-40 p-4 rounded-lg border text-center transition-all ${e==="profile"?"bg-blue-50 border-blue-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-blue-300"}`,children:[C.jsx(TS,{className:`w-8 h-8 mx-auto mb-1 ${e==="profile"?"text-blue-600":"text-slate-400"}`}),C.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Patient Profile"})]})]}),n.map((w,O)=>{const P=w.id===e;return C.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t(w.id),children:[C.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${P?"bg-white border-green-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-green-400"}`}),C.jsxs("div",{className:`relative w-40 p-3 rounded-lg border text-center transition-all ${P?"bg-green-50 border-green-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-green-300"}`,children:[C.jsx("button",{className:"absolute -top-3 -right-3 w-8 h-8 bg-red-100 hover:bg-red-600 text-red-600 hover:text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all shadow-lg border border-red-200 hover:border-red-700 z-50 pointer-events-auto",onClick:k=>{k.stopPropagation(),k.preventDefault(),r(w.id)},type:"button",title:"Delete Timepoint",children:C.jsx(pu,{className:"w-5 h-5 pointer-events-none"})}),C.jsxs("div",{className:"text-xs font-bold text-slate-500 mb-1",children:["Timepoint ",O+1]}),C.jsxs("div",{className:"flex items-center justify-center text-sm font-semibold text-slate-800",children:[C.jsx(GI,{className:"w-3 h-3 mr-1 opacity-50"}),w.date||"Set Date"]}),C.jsx("button",{className:`absolute -bottom-3 -right-3 w-8 h-8 rounded-full flex items-center justify-center transition-all shadow-lg border z-50 pointer-events-auto ${f===w.id?"bg-blue-600 text-white border-blue-700":"bg-blue-100 hover:bg-blue-600 text-blue-600 hover:text-white border-blue-200 hover:border-blue-700 opacity-0 group-hover:opacity-100"}`,onClick:k=>T(k,w.id),type:"button",title:"Copy content from another timepoint",children:C.jsx(Nm,{className:"w-4 h-4 pointer-events-none"})})]})]},w.id)}),C.jsx("div",{ref:u})]})]}),C.jsx("div",{className:"p-4 bg-white border-t border-slate-200 flex-shrink-0",children:C.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all active:scale-95 font-medium",children:[C.jsx(AS,{className:"w-5 h-5 mr-2"}),"Add Timepoint"]})}),f&&h&&xd.createPortal(C.jsxs("div",{className:"fixed z-[10001] bg-white border border-slate-200 rounded-lg shadow-2xl overflow-hidden min-w-[180px] animate-in zoom-in-95 duration-150",style:{top:h.top,left:h.left},onClick:w=>w.stopPropagation(),children:[C.jsx("div",{className:"bg-blue-600 text-white px-4 py-2 text-xs font-bold uppercase tracking-wider",children:""}),C.jsxs("div",{className:"max-h-60 overflow-y-auto bg-slate-50",children:[n.map((w,O)=>w.id===f?null:C.jsxs("button",{className:"w-full px-4 py-3 text-left text-sm font-semibold text-slate-700 border-b border-slate-200 hover:bg-blue-50 hover:text-blue-700 transition-colors last:border-0",onClick:()=>S(w.id),children:["Timepoint ",O+1]},w.id)),n.length<=1&&C.jsx("div",{className:"p-4 text-xs text-slate-400 italic text-center",children:"No other timepoints to copy from."})]})]}),document.body)]})},Qx=({event:n,onUpdate:e,profile:t,onUpdateProfile:i,isProfileSelected:r,informant:l,setInformant:u,lastUpdateTrigger:f})=>{const g=ae.useRef(null),h=ae.useRef({}),[_,T]=ae.useState("");ae.useEffect(()=>{if(f&&!r){const B=h.current[f.category];B&&B.scrollIntoView({behavior:"smooth",block:"center"})}},[f,r]);const S=B=>{i({...t,gender:B}),u(B==="male"?"himself":"herself")},w=()=>{const B=_.trim();B&&!t.underlying_diseases.includes(B)&&i({...t,underlying_diseases:[...t.underlying_diseases,B]}),T("")},O=B=>{B.key==="Enter"&&(B.preventDefault(),w())},P=(B,ee)=>{const oe=t[B];if(!oe)i({...t,[B]:ee});else{const fe=oe.trim().endsWith(",")?`${oe.trim()} ${ee}`:`${oe.trim()}, ${ee}`;i({...t,[B]:fe})}};if(r)return C.jsxs("div",{className:"flex flex-col h-full bg-white",children:[C.jsx("div",{className:"p-4 border-b border-slate-200 bg-blue-50 flex items-center justify-between flex-shrink-0",children:C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(Hx,{className:"w-5 h-5 text-blue-600"}),C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Patient Profile"})]})}),C.jsxs("div",{className:"p-6 flex-1 overflow-y-auto space-y-8 custom-scrollbar",children:[C.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Age (Numeric)"}),C.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:t.age,onChange:B=>i({...t,age:B.target.value}),placeholder:"65"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Sex"}),C.jsx("div",{className:"flex space-x-2",children:["male","female"].map(B=>C.jsx("button",{onClick:()=>S(B),className:`flex-1 py-2.5 px-4 rounded-lg font-bold text-sm transition-all border ${t.gender===B?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:B.charAt(0).toUpperCase()+B.slice(1)},B))})]})]}),C.jsx("div",{className:"grid grid-cols-1 gap-6 pt-4 border-t border-slate-100",children:C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Informant"}),C.jsx("input",{type:"text",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:l,onChange:B=>u(B.target.value),placeholder:"e.g. himself, wife, family, relatives..."})]})}),C.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[C.jsx("div",{className:"flex items-center justify-between",children:C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Underlying Diseases"})}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Type a disease and press Enter...",className:"w-full pl-3 pr-10 py-2.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-shadow",value:_,onChange:B=>T(B.target.value),onKeyDown:O}),C.jsx("button",{onClick:w,disabled:!_.trim(),className:"absolute right-1.5 top-1.5 p-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 transition-colors",children:C.jsx(AS,{className:"w-4 h-4"})})]}),C.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 rounded-xl min-h-[60px] border border-dashed border-slate-300",children:[t.underlying_diseases.length===0&&C.jsx("p",{className:"text-slate-400 text-xs italic flex items-center justify-center w-full",children:"No diseases selected"}),t.underlying_diseases.map(B=>C.jsxs("div",{className:"bg-blue-100 text-blue-700 px-3 py-1.5 rounded-full flex items-center text-sm font-semibold shadow-sm border border-blue-200",children:[B,C.jsx("button",{onClick:()=>i({...t,underlying_diseases:t.underlying_diseases.filter(ee=>ee!==B)}),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:C.jsx(pu,{className:"w-3 h-3"})})]},B))]})]}),C.jsxs("div",{className:"space-y-6 pt-6 border-t border-slate-100 pb-10",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-green-700",children:[C.jsx(vS,{className:"w-4 h-4"}),C.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",children:"Underlying Disease Control Status"})]}),C.jsxs("div",{className:"space-y-8",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"CONTROL QUALITY ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.control_quality,onChange:B=>i({...t,control_quality:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"General:"}),["Well controlled","Poorly controlled","Fair","Suboptimal","Stable","Unstable","Refractory"].map(B=>C.jsx("button",{onClick:()=>P("control_quality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Specific:"}),["Acute exacerbation","Stationary","Remission","Progressive","Terminal stage"].map(B=>C.jsx("button",{onClick:()=>P("control_quality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]})]})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"MANAGEMENT MODALITY ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.management_modality,onChange:B=>i({...t,management_modality:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"HTN/Heart:"}),["Oral anti-hypertensive agents","Medical control","Diet control","Lifestyle modification"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"DM:"}),["Oral anti-diabetic agents (OAD)","Insulin injection","Diet control and exercise"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"ESRD:"}),["Regular Hemodialysis (H/D)","H/D on Mon/Wed/Fri","H/D on Tue/Thu/Sat","Peritoneal Dialysis (PD/CAPD)","Conservative treatment"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Cancer:"}),["Chemotherapy","Target therapy","Immunotherapy","Regular surveillance post-operation","Palliative care"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]})]})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"FOLLOW-UP STATUS ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.follow_up_status,onChange:B=>i({...t,follow_up_status:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Frequency:"}),["Regularly","Irregularly","Intermittently","Lost to follow-up"].map(B=>C.jsx("button",{onClick:()=>P("follow_up_status",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsx("p",{className:"text-[9px] text-slate-400 italic mt-1 ml-2",children:"Location: Match the Medical Facility items from the left sidebar."})]})]})]})]})]})]});if(!n)return C.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50 text-slate-400 p-8 text-center h-full",children:C.jsx("p",{children:"Select a profile or timepoint from the timeline to start editing."})});const k=(B,ee)=>{const oe={...n.categorizedContent,[B]:ee};e(n.id,{categorizedContent:oe})},K=gS.filter(B=>B.category!=="Disease");return C.jsxs("div",{className:"flex flex-col h-full bg-white",children:[C.jsxs("div",{className:"p-4 border-b border-slate-200 bg-slate-50 flex items-center justify-between flex-shrink-0",children:[C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Editor"}),C.jsx("div",{className:"text-lg font-mono font-semibold text-slate-800",children:n.date||(n.dateType==="month"?"YYYY-MM":"YYYY-MM-DD")})]}),C.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar",ref:g,children:[C.jsxs("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg border border-blue-100",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"Event Time"}),C.jsxs("div",{className:"flex space-x-2 text-xs",children:[C.jsx("button",{onClick:()=>e(n.id,{dateType:"date",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="date"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Exact Date"}),C.jsx("button",{onClick:()=>e(n.id,{dateType:"month",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="month"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Month Only"})]})]}),C.jsx("input",{type:n.dateType==="date"?"date":"month",className:"w-full p-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:n.date,onChange:B=>e(n.id,{date:B.target.value})})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{ref:B=>{h.current["Medical Facility"]=B},className:"group pb-4 border-b border-slate-100 scroll-mt-10",children:[C.jsxs("label",{className:"block text-xs font-bold text-blue-700 mb-2 uppercase tracking-wide flex items-center",children:[C.jsx(BI,{className:"w-3.5 h-3.5 mr-1.5"}),"Medical Facility ()"]}),C.jsx("textarea",{className:"w-full h-16 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed transition-shadow",placeholder:"e.g. the Emergency Department of Linkou Chang Gung Memorial Hospital",value:n.categorizedContent["Medical Facility"]||"",onChange:B=>k("Medical Facility",B.target.value)})]}),C.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-slate-100",children:[C.jsx("h3",{className:"text-sm font-bold text-slate-800",children:"Clinical Findings"}),C.jsx("span",{className:"text-xs text-slate-500 font-normal hidden sm:inline",children:"(Click menu items to insert)"})]}),K.filter(B=>B.category!=="Medical Facility").map(B=>{const ee=["Tentative Diagnosis","Underlying disease","Definitive diagnosis"].includes(B.category),oe=B.category==="Vital Sign",fe=ee?"text-indigo-800":oe?"text-green-700":B.category==="Negative Symptom"?"text-red-700":"text-orange-700";return C.jsxs("div",{ref:de=>{h.current[B.category]=de},className:"group scroll-mt-10",children:[C.jsx("label",{className:`block text-xs font-bold mb-1 uppercase tracking-wide ${fe}`,children:B.category}),C.jsx("textarea",{className:`w-full h-24 p-3 border border-slate-300 rounded-lg shadow-sm font-sans text-sm leading-relaxed resize-y transition-shadow ${ee?"focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 bg-indigo-50/10":oe?"focus:ring-2 focus:ring-green-200 focus:border-green-400 bg-green-50/10":B.category==="Negative Symptom"?"focus:ring-2 focus:ring-red-200 focus:border-red-400 bg-red-50/20":"focus:ring-2 focus:ring-orange-200 focus:border-orange-400"}`,placeholder:`Describe ${B.category.toLowerCase()}...`,value:n.categorizedContent[B.category]||"",onChange:de=>k(B.category,de.target.value)})]},B.category)}),C.jsxs("div",{className:"group pt-4 border-t border-slate-100",children:[C.jsx("label",{className:"block text-xs font-bold text-blue-700 mb-1 uppercase tracking-wide",children:"Other Information"}),C.jsx("textarea",{className:"w-full h-32 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed resize-y transition-shadow",placeholder:"Enter any additional information...",value:n.otherInformation||"",onChange:B=>e(n.id,{otherInformation:B.target.value})})]})]})]})]})},Xx=({isOpen:n,onClose:e,onConfirm:t,title:i,message:r,confirmText:l="Delete",cancelText:u="Cancel"})=>n?xd.createPortal(C.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:e}),C.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 fade-in duration-200",children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[C.jsx(CS,{className:"w-5 h-5"}),C.jsx("h3",{className:"font-bold text-slate-800",children:i})]}),C.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-slate-200 text-slate-400 transition-colors",children:C.jsx(pu,{className:"w-5 h-5"})})]}),C.jsx("div",{className:"p-6",children:C.jsx("p",{className:"text-slate-600 leading-relaxed",children:r})}),C.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 bg-slate-50 border-t border-slate-100",children:[C.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 hover:bg-slate-200 rounded-lg transition-colors",children:u}),C.jsx("button",{onClick:t,className:"px-6 py-2 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-lg shadow-md hover:shadow-lg active:scale-95 transition-all",children:l})]})]})]}),document.body):null,Wx=({onLogin:n,authError:e})=>{const[t,i]=ae.useState(""),[r,l]=ae.useState(!1),[u,f]=ae.useState(!1);ae.useEffect(()=>{const h=window.location.hostname,_=window.location.href;!h||h===""||_.startsWith("about:")||_.startsWith("file:")||_.startsWith("data:")?(f(!0),i("Sandbox Mode (Auth Disabled)")):(f(!1),i(h))},[]);const g=()=>{u||(navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3))};return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-6 relative",children:[C.jsxs("div",{className:"max-w-4xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row z-10",children:[C.jsxs("div",{className:"md:w-1/2 p-10 bg-blue-50 flex flex-col justify-between relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-purple-500"}),C.jsxs("div",{className:"z-10",children:[C.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[C.jsx("div",{className:"bg-blue-600 p-2.5 rounded-xl shadow-lg",children:C.jsx(ES,{className:"w-8 h-8 text-white"})}),C.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"MediScribe AI"})]}),C.jsx("h2",{className:"text-4xl font-extrabold text-blue-900 mb-4 leading-tight",children:"Transform Medical Records with AI"}),C.jsx("p",{className:"text-slate-600 text-lg mb-8 leading-relaxed",children:"Generate professional, academic-grade admission notes from structured inputs in seconds using Gemini 1.5 Pro."})]}),C.jsxs("div",{className:"space-y-4 z-10",children:[C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(QI,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"Structured Data Entry"})]}),C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(hd,{className:"w-5 h-5 text-purple-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"AI-Powered Generation"})]}),C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(Mx,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"Bring Your Own Key (Secure)"})]})]}),C.jsx("div",{className:"absolute -bottom-10 -right-10 w-64 h-64 bg-blue-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse"}),C.jsx("div",{className:"absolute -bottom-10 -left-10 w-64 h-64 bg-purple-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse delay-1000"})]}),C.jsx("div",{className:"md:w-1/2 p-10 flex flex-col justify-center items-center bg-white relative",children:u?C.jsxs("div",{className:"text-center w-full",children:[C.jsx("div",{className:"w-16 h-16 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-6",children:C.jsx(Ax,{className:"w-8 h-8"})}),C.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Preview Environment Detected"}),C.jsxs("p",{className:"text-slate-500 mb-6 text-sm leading-relaxed px-4",children:["This app is running in a ",C.jsx("strong",{children:"Sandboxed Preview"})," (no domain). Google Login requires a real web server to function securely."]}),C.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 text-left mb-6 mx-2",children:[C.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center",children:[C.jsx(ex,{className:"w-4 h-4 mr-2 text-blue-600"}),"How to fix:"]}),C.jsxs("ol",{className:"list-decimal list-inside text-xs text-slate-600 space-y-2",children:[C.jsxs("li",{children:[C.jsx("strong",{children:"Download"})," or ",C.jsx("strong",{children:"Export"})," this project from the editor."]}),C.jsxs("li",{children:["Run it locally (e.g., ",C.jsx("code",{children:"npm run dev"}),"  ",C.jsx("code",{children:"localhost"}),")."]}),C.jsx("li",{children:"Or deploy it to a hosting service (Vercel, Netlify)."})]})]}),C.jsx("button",{disabled:!0,className:"w-full py-3 bg-slate-200 text-slate-400 font-bold rounded-xl cursor-not-allowed",children:"Login Disabled in Sandbox"})]}):C.jsxs("div",{className:"w-full flex flex-col items-center",children:[C.jsxs("div",{className:"text-center mb-10",children:[C.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Welcome Back"}),C.jsx("p",{className:"text-slate-500",children:"Please sign in to access your workspace"})]}),e&&C.jsxs("div",{className:"mb-6 w-full p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3 animate-in fade-in slide-in-from-top-2",children:[C.jsx(CS,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h4",{className:"text-sm font-bold text-red-800 mb-1",children:"Authentication Error"}),C.jsx("p",{className:"text-xs text-red-700 whitespace-pre-wrap leading-relaxed select-all font-mono bg-red-50/50 p-1 rounded",children:e}),e.includes("Settings > Authorized domains")&&C.jsxs("div",{className:"mt-2 p-2 bg-white border border-red-100 rounded text-xs text-slate-500",children:[C.jsx("strong",{children:"Tip:"})," You must add the ",C.jsx("u",{children:"exact domain"})," shown in the bottom right corner of this screen to Firebase Console."]})]})]}),C.jsxs("button",{onClick:n,className:"w-full max-w-sm flex items-center justify-center space-x-3 px-6 py-4 border border-slate-300 rounded-xl hover:bg-slate-50 hover:border-slate-400 hover:shadow-md transition-all group bg-white",children:[C.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),C.jsx("span",{className:"text-slate-700 font-bold text-lg group-hover:text-slate-900",children:"Sign in with Google"})]}),C.jsx("p",{className:"mt-8 text-xs text-center text-slate-400 max-w-xs leading-relaxed",children:"By signing in, you agree to use your own Gemini API Key. Your key is encrypted and stored securely linked to your account."})]})})]}),C.jsxs("div",{className:"absolute bottom-4 right-4 z-0 flex flex-col items-end opacity-70 hover:opacity-100 transition-opacity",children:[C.jsx("label",{className:"text-[10px] text-blue-200 uppercase font-bold mb-1",children:"Detected Domain (For Firebase Whitelist)"}),C.jsxs("button",{onClick:g,disabled:u,className:`flex items-center space-x-2 px-3 py-1.5 rounded-full border border-white/10 transition-colors ${u?"bg-red-900/40 text-red-200 cursor-not-allowed":"bg-black/20 backdrop-blur-md text-white hover:bg-black/30"}`,children:[C.jsx("span",{className:"text-xs font-mono",children:t}),!u&&(r?C.jsx(_S,{className:"w-3 h-3 text-green-400"}):C.jsx(Nm,{className:"w-3 h-3 text-slate-300"}))]})]})]})},jx=({isOpen:n,onSave:e,isDismissible:t=!1,onDismiss:i})=>{const[r,l]=ae.useState(""),[u,f]=ae.useState(!1),[g,h]=ae.useState("");if(!n)return null;const _=async()=>{if(!r.trim()){h("Please enter a valid API key.");return}h(""),f(!0);try{await e(r.trim())}catch{h("Failed to save API Key. Please try again.")}finally{f(!1)}};return C.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:t?i:void 0}),C.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-300",children:[C.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white text-center",children:[C.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-md",children:C.jsx(SS,{className:"w-8 h-8 text-white"})}),C.jsx("h2",{className:"text-2xl font-bold",children:"Setup Gemini API Key"}),C.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Required to power the AI generation"})]}),C.jsxs("div",{className:"p-8 space-y-6",children:[C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 flex items-start space-x-3",children:[C.jsx($I,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{className:"text-sm text-blue-800",children:[C.jsx("p",{className:"font-bold mb-1",children:"Why do I need this?"}),C.jsx("p",{className:"opacity-90 leading-relaxed",children:"This application runs on your own Google Cloud account. Your API key is stored securely in your database and is never shared with us."})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Enter your Gemini API Key"}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(hx,{className:"h-4 w-4 text-slate-400"})}),C.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all font-mono text-sm",placeholder:"AIzaSy...",value:r,onChange:T=>l(T.target.value)})]}),g&&C.jsx("p",{className:"text-red-500 text-xs mt-2 font-medium",children:g})]}),C.jsx("div",{className:"text-center",children:C.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 font-semibold hover:underline",children:["Get a free API key here ",C.jsx(ix,{className:"w-3.5 h-3.5 ml-1"})]})})]}),C.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[t&&C.jsx("button",{onClick:i,className:"flex-1 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Cancel"}),C.jsx("button",{onClick:_,disabled:u||!r,className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all active:scale-95 disabled:bg-slate-300 disabled:shadow-none flex items-center justify-center",children:u?C.jsx(au,{className:"w-5 h-5 animate-spin"}):"Save & Continue"})]})]})]})]})};var Zx={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eR,tR;function nR(){return{geminiUrl:eR,vertexUrl:tR}}function iR(n,e,t,i){var r,l;if(!(n!=null&&n.baseUrl)){const u=nR();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(l=u.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fs{}function ge(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const g=n[f];if(Array.isArray(t))for(let h=0;h<g.length;h++){const _=g[h];p(_,e.slice(l+1),t[h])}else for(const h of g)p(h,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const g=n[f];p(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function sR(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),l=i.split("."),u=new Set;let f=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){f=g;break}if(f!==-1&&l.length>f)for(let g=f;g<l.length;g++){const h=l[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}qp(n,r,l,0,u)}}function qp(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const g of f[u])qp(g,e,t,i+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),g={};for(const h of f)g[h]=u[h];for(const[h,_]of Object.entries(g)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);p(u,T,_)}for(const h of f)delete u[h]}}else{const u=n;l in u&&qp(u[l],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oR(n){const e={},t=d(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function rR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],lR(u)),e}function aR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],uR(u)),e}function lR(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>cR(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function uR(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>dR(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function cR(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],yR(t)),e}function dR(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],vR(t)),e}function fR(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function hR(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function pR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],mR(u)),e}function mR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function bS(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],gR(u)),e}function gR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function yR(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Mm(i));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function vR(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Mm(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var u_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(u_||(u_={}));var c_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(c_||(c_={}));var d_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(d_||(d_={}));var ko;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ko||(ko={}));var f_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(f_||(f_={}));var h_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(h_||(h_={}));var p_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(p_||(p_={}));var m_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(m_||(m_={}));var g_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(g_||(g_={}));var y_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(y_||(y_={}));var v_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(v_||(v_={}));var __;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(__||(__={}));var T_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(T_||(T_={}));var E_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(E_||(E_={}));var S_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(S_||(S_={}));var A_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(A_||(A_={}));var C_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(C_||(C_={}));var b_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(b_||(b_={}));var w_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(w_||(w_={}));var Rd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Rd||(Rd={}));var I_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(I_||(I_={}));var x_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(x_||(x_={}));var R_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(R_||(R_={}));var zp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zp||(zp={}));var N_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(N_||(N_={}));var M_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(M_||(M_={}));var D_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(D_||(D_={}));var P_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(P_||(P_={}));var k_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(k_||(k_={}));var V_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(V_||(V_={}));var U_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(U_||(U_={}));var L_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(L_||(L_={}));var O_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(O_||(O_={}));var H_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(H_||(H_={}));var B_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(B_||(B_={}));var F_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(F_||(F_={}));var G_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(G_||(G_={}));var q_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(q_||(q_={}));var z_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(z_||(z_={}));var K_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(K_||(K_={}));var Y_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Y_||(Y_={}));var $_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})($_||($_={}));var J_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(J_||(J_={}));var Q_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Q_||(Q_={}));var X_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(X_||(X_={}));var W_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(W_||(W_={}));var j_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(j_||(j_={}));var Z_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Z_||(Z_={}));var eT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(eT||(eT={}));var tT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tT||(tT={}));var nT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nT||(nT={}));var iT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(iT||(iT={}));var sT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sT||(sT={}));var oT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(oT||(oT={}));var rT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(rT||(rT={}));var xa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(xa||(xa={}));class Kp{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class eu{get text(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const S of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[w,O]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(O!==null||O!==void 0)&&T.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[S,w]of Object.entries(T))S!=="inlineData"&&(w!==null||w!==void 0)&&_.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,r,l,u,f,g,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,r,l,u,f,g,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class aT{}class lT{}class _R{}class TR{}class ER{}class SR{}class uT{}class cT{}class dT{}class AR{}class Nd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Nd;let r;const l=e;return t?r=aR(l):r=rR(l),Object.assign(i,r),i}}class fT{}class hT{}class pT{}class mT{}class CR{}class bR{}class wR{}class Dm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Dm,l=pR(e);return Object.assign(i,l),i}}class IR{}class xR{}class RR{}class gT{}class NR{get text(){var e,t,i;let r="",l=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(f))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,i;let r="";const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,g]of Object.entries(u))f!=="inlineData"&&g!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class MR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Pm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Pm,l=bS(e);return Object.assign(i,l),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function wS(n,e){const t=rt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function IS(n){return Array.isArray(n)?n.map(e=>Md(e)):[Md(n)]}function Md(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function xS(n){const e=Md(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function RS(n){const e=Md(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function NS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>yT(e)):[yT(n)]}function Yp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function vT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function _T(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Cn(n){if(n==null)throw new Error("ContentUnion is required");return Yp(n)?n:{role:"user",parts:NS(n)}}function km(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=Cn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=Cn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Cn(t)):[Cn(e)]}function hi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(vT(n)||_T(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Cn(n)]}const e=[],t=[],i=Yp(n[0]);for(const r of n){const l=Yp(r);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(vT(r)||_T(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:NS(t)}),e}function DR(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(ko).includes(t[0].toUpperCase())?t[0].toUpperCase():ko.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(ko).includes(i.toUpperCase())?i.toUpperCase():ko.TYPE_UNSPECIFIED})}}function Na(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&DR(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(ko).includes(f.toUpperCase())?f.toUpperCase():ko.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Na(f);else if(i.includes(u)){const g=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}g.push(Na(h))}e[u]=g}else if(r.includes(u)){const g={};for(const[h,_]of Object.entries(f))g[h]=Na(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Vm(n){return Na(n)}function Um(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Lm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ka(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Na(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Na(e.response));return n}function Ya(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function PR(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Gs(n,e){if(typeof e!="string")throw new Error("name must be a string");return PR(n,e,"cachedContents")}function MS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Jo(n){return Mm(n)}function kR(n){return n!=null&&typeof n=="object"&&"name"in n}function VR(n){return n!=null&&typeof n=="object"&&"video"in n}function UR(n){return n!=null&&typeof n=="object"&&"uri"in n}function DS(n){var e;let t;if(kR(n)&&(t=n.name),!(UR(n)&&(t=n.uri,t===void 0))&&!(VR(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function PS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function kS(n){for(const e of["models","tunedModels","publisherModels"])if(LR(n,e))return n[e];return[]}function LR(n,e){return n!==null&&typeof n=="object"&&e in n}function OR(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function HR(n,e={}){const t=[],i=new Set;for(const r of n){const l=r.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const u=OR(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function VS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function BR(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function US(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function $a(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function LS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FR(n){const e={},t=d(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>E1(u))),p(e,["inlinedResponses"],l)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["inlinedEmbedContentResponses"],l)}return e}function GR(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function qR(n){const e={},t=d(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pd(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["metadata","state"]);r!=null&&p(e,["state"],LS(r));const l=d(n,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const u=d(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&p(e,["updateTime"],f);const g=d(n,["metadata","model"]);g!=null&&p(e,["model"],g);const h=d(n,["metadata","output"]);return h!=null&&p(e,["dest"],FR(US(h))),e}function $p(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["state"]);r!=null&&p(e,["state"],LS(r));const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["createTime"]);u!=null&&p(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(e,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(e,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=d(n,["model"]);_!=null&&p(e,["model"],_);const T=d(n,["inputConfig"]);T!=null&&p(e,["src"],zR(T));const S=d(n,["outputConfig"]);S!=null&&p(e,["dest"],GR(US(S)));const w=d(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function zR(n){const e={},t=d(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function KR(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&p(t,["fileName"],i);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>T1(n,u))),p(t,["requests","requests"],l)}return t}function YR(n){const e={},t=d(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function $R(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function JR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],$a(n,i)),t}function QR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],$a(n,i)),t}function XR(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],WR(i));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function WR(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function OS(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>x1(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function jR(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function ZR(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],qR(BR(r))),t}function TT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],KR(n,VS(n,r)));const l=d(e,["config"]);return l!=null&&jR(l,t),t}function e1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],rt(n,i));const r=d(e,["src"]);r!=null&&p(t,["inputConfig"],YR(VS(n,r)));const l=d(e,["config"]);return l!=null&&ZR(l,t),t}function t1(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function n1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],u1(n,r));const l=d(e,["config"]);return l!=null&&t1(l,t),t}function i1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],$a(n,i)),t}function s1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],$a(n,i)),t}function o1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function r1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function a1(n,e){const t={},i=d(e,["contents"]);if(i!=null){let l=km(n,i);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(p(t,["_self"],l1(r,t)),sR(t,{"requests[].*":"requests[].request.*"})),t}function l1(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function u1(n,e){const t={},i=d(e,["fileName"]);i!=null&&p(t,["file_name"],i);const r=d(e,["inlinedRequests"]);return r!=null&&p(t,["requests"],a1(n,r)),t}function c1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function d1(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function f1(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function h1(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],OS(Cn(r)));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const O=d(e,["frequencyPenalty"]);O!=null&&p(i,["frequencyPenalty"],O);const P=d(e,["seed"]);P!=null&&p(i,["seed"],P);const k=d(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const K=d(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],Vm(K));const B=d(e,["responseJsonSchema"]);if(B!=null&&p(i,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ee=d(e,["safetySettings"]);if(t!==void 0&&ee!=null){let D=ee;Array.isArray(D)&&(D=D.map(Be=>R1(Be))),p(t,["safetySettings"],D)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let D=Ya(oe);Array.isArray(D)&&(D=D.map(Be=>M1(Ka(Be)))),p(t,["tools"],D)}const fe=d(e,["toolConfig"]);if(t!==void 0&&fe!=null&&p(t,["toolConfig"],N1(fe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const de=d(e,["cachedContent"]);t!==void 0&&de!=null&&p(t,["cachedContent"],Gs(n,de));const M=d(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const N=d(e,["mediaResolution"]);N!=null&&p(i,["mediaResolution"],N);const R=d(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],Um(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=d(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const V=d(e,["imageConfig"]);V!=null&&p(i,["imageConfig"],_1(V));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function p1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>XR(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function m1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],$a(n,i)),t}function g1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],$a(n,i)),t}function y1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function v1(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function _1(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function T1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["request","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let f=hi(r);Array.isArray(f)&&(f=f.map(g=>OS(g))),p(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(e,["config"]);return u!=null&&p(t,["request","generationConfig"],h1(n,u,d(t,["request"],{}))),t}function E1(n){const e={},t=d(n,["response"]);t!=null&&p(e,["response"],p1(t));const i=d(n,["error"]);return i!=null&&p(e,["error"],i),e}function S1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function A1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const l=d(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),t}function C1(n){const e={},t=d(n,["config"]);return t!=null&&S1(t,e),e}function b1(n){const e={},t=d(n,["config"]);return t!=null&&A1(t,e),e}function w1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>pd(u))),p(e,["batchJobs"],l)}return e}function I1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>$p(u))),p(e,["batchJobs"],l)}return e}function x1(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],c1(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],d1(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],$R(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function R1(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function N1(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],f1(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function M1(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],y1(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],v1(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Us;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Us||(Us={}));class Mr{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D1 extends Fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mr(Us.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=TT(this.apiClient,e),i=t._url,r=ge("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,g=f.requests,h=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const w=T.request;w.systemInstruction=S,T.request=w}h.push(T)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=e1(this.apiClient,e);return f=ge("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>$p(_))}else{const h=TT(this.apiClient,e);return f=ge("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>pd(_))}}async createEmbeddingsInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=n1(this.apiClient,e);return l=ge("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>pd(g))}}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=g1(this.apiClient,e);return f=ge("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>$p(_))}else{const h=m1(this.apiClient,e);return f=ge("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>pd(_))}}async cancel(e){var t,i,r,l;let u="",f={};if(this.apiClient.isVertexAI()){const g=QR(this.apiClient,e);u=ge("batchPredictionJobs/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=JR(this.apiClient,e);u=ge("batches/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=b1(e);return f=ge("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=I1(_),S=new gT;return Object.assign(S,T),S})}else{const h=C1(e);return f=ge("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=w1(_),S=new gT;return Object.assign(S,T),S})}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=s1(this.apiClient,e);return f=ge("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>r1(_))}else{const h=i1(this.apiClient,e);return f=ge("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>o1(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P1(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function ET(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>nN(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function k1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let _=hi(u);Array.isArray(_)&&(_=_.map(T=>ET(T))),p(e,["contents"],_)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],ET(Cn(f)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>sN(T))),p(e,["tools"],_)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],iN(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function V1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=hi(u);Array.isArray(T)&&(T=T.map(S=>S)),p(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],Cn(f));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>oN(S))),p(e,["tools"],T)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function U1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],wS(n,i));const r=d(e,["config"]);return r!=null&&k1(r,t),t}function L1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],wS(n,i));const r=d(e,["config"]);return r!=null&&V1(r,t),t}function O1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Gs(n,i)),t}function H1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Gs(n,i)),t}function B1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function F1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function G1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function q1(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function z1(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function K1(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function Y1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Gs(n,i)),t}function $1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Gs(n,i)),t}function J1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Q1(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function X1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function W1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function j1(n){const e={},t=d(n,["config"]);return t!=null&&X1(t,e),e}function Z1(n){const e={},t=d(n,["config"]);return t!=null&&W1(t,e),e}function eN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function tN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function nN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],G1(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],q1(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],P1(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function iN(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],z1(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function sN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],J1(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],Q1(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function oN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>K1(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function rN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function aN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function lN(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Gs(n,i));const r=d(e,["config"]);return r!=null&&rN(r,t),t}function uN(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Gs(n,i));const r=d(e,["config"]);return r!=null&&aN(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cN extends Fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mr(Us.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=L1(this.apiClient,e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=U1(this.apiClient,e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=$1(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=Y1(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=H1(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=F1(_),S=new pT;return Object.assign(S,T),S})}else{const h=O1(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=B1(_),S=new pT;return Object.assign(S,T),S})}}async update(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=uN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=lN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=Z1(e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=tN(_),S=new mT;return Object.assign(S,T),S})}else{const h=j1(e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=eN(_),S=new mT;return Object.assign(S,T),S})}}}function Dd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function ST(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(n){return this instanceof Pe?(this.v=n,this):new Pe(n)}function Ni(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(O){return Promise.resolve(O).then(w,T)}}function f(w,O){i[w]&&(r[w]=function(P){return new Promise(function(k,K){l.push([w,P,k,K])>1||g(w,P)})},O&&(r[w]=O(r[w])))}function g(w,O){try{h(i[w](O))}catch(P){S(l[0][3],P)}}function h(w){w.value instanceof Pe?Promise.resolve(w.value.v).then(_,T):S(l[0][2],w)}function _(w){g("next",w)}function T(w){g("throw",w)}function S(w,O){w(O),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Mi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ST=="function"?ST(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(u){return new Promise(function(f,g){u=n[l](u),r(f,g,u.done,u.value)})}}function r(l,u,f,g){Promise.resolve(g).then(function(h){l({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:HS(t)}function HS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function fN(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function AT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let l=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),l&&!HS(n[i])&&(l=!1),i++;l?e.push(...r):e.pop()}return e}class hN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new pN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class pN{constructor(e,t,i,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),fN(l)}async sendMessage(e){var t;await this.sendPromise;const i=Cn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,f;const g=await r,h=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];_!=null&&(S=(f=_.slice(T))!==null&&f!==void 0?f:[]);const w=h?[h]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=Cn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?AT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Ni(this,arguments,function*(){var r,l,u,f,g,h;const _=[];try{for(var T=!0,S=Mi(e),w;w=yield Pe(S.next()),r=w.done,!r;T=!0){f=w.value,T=!1;const O=f;if(dN(O)){const P=(h=(g=O.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;P!==void 0&&_.push(P)}yield yield Pe(O)}}catch(O){l={error:O}}finally{try{!T&&!r&&(u=S.return)&&(yield Pe(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...AT(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,tf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mN(n){const e={},t=d(n,["file"]);return t!=null&&p(e,["file"],t),e}function gN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function yN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],DS(t)),e}function vN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function _N(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],DS(t)),e}function TN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function EN(n){const e={},t=d(n,["config"]);return t!=null&&TN(t,e),e}function SN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AN extends Fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mr(Us.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=EN(e);return l=ge("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=SN(g),_=new IR;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mN(e);return l=ge("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=gN(g),_=new xR;return Object.assign(_,h),_})}}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_N(e);return l=ge("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=yN(e);return l=ge("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=vN(g),_=new RR;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function md(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function CN(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>BN(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function bN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function wN(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function IN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function xN(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const O=d(n,["responseModalities"]);O!=null&&p(e,["responseModalities"],O);const P=d(n,["responseSchema"]);P!=null&&p(e,["responseSchema"],P);const k=d(n,["routingConfig"]);k!=null&&p(e,["routingConfig"],k);const K=d(n,["seed"]);K!=null&&p(e,["seed"],K);const B=d(n,["speechConfig"]);B!=null&&p(e,["speechConfig"],B);const ee=d(n,["stopSequences"]);ee!=null&&p(e,["stopSequences"],ee);const oe=d(n,["temperature"]);oe!=null&&p(e,["temperature"],oe);const fe=d(n,["thinkingConfig"]);fe!=null&&p(e,["thinkingConfig"],fe);const de=d(n,["topK"]);de!=null&&p(e,["topK"],de);const M=d(n,["topP"]);if(M!=null&&p(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function RN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function NN(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function MN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Lm(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=d(n,["systemInstruction"]);e!==void 0&&O!=null&&p(e,["setup","systemInstruction"],CN(Cn(O)));const P=d(n,["tools"]);if(e!==void 0&&P!=null){let de=Ya(P);Array.isArray(de)&&(de=de.map(M=>GN(Ka(M)))),p(e,["setup","tools"],de)}const k=d(n,["sessionResumption"]);e!==void 0&&k!=null&&p(e,["setup","sessionResumption"],FN(k));const K=d(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const ee=d(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&p(e,["setup","realtimeInputConfig"],ee);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const fe=d(n,["proactivity"]);if(e!==void 0&&fe!=null&&p(e,["setup","proactivity"],fe),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function DN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],xN(i));const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Lm(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=d(n,["systemInstruction"]);e!==void 0&&O!=null&&p(e,["setup","systemInstruction"],Cn(O));const P=d(n,["tools"]);if(e!==void 0&&P!=null){let M=Ya(P);Array.isArray(M)&&(M=M.map(N=>qN(Ka(N)))),p(e,["setup","tools"],M)}const k=d(n,["sessionResumption"]);e!==void 0&&k!=null&&p(e,["setup","sessionResumption"],k);const K=d(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const ee=d(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&p(e,["setup","realtimeInputConfig"],ee);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const fe=d(n,["proactivity"]);e!==void 0&&fe!=null&&p(e,["setup","proactivity"],fe);const de=d(n,["explicitVadSignal"]);return e!==void 0&&de!=null&&p(e,["setup","explicitVadSignal"],de),t}function PN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],rt(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],MN(r,t)),t}function kN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],rt(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],DN(r,t)),t}function VN(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function UN(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function LN(n){const e={},t=d(n,["media"]);if(t!=null){let h=IS(t);Array.isArray(h)&&(h=h.map(_=>md(_))),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],md(RS(i)));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],md(xS(l)));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function ON(n){const e={},t=d(n,["media"]);if(t!=null){let h=IS(t);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],RS(i));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],xS(l));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function HN(n){const e={},t=d(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const r=d(n,["toolCall"]);r!=null&&p(e,["toolCall"],r);const l=d(n,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const u=d(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],zN(u));const f=d(n,["goAway"]);f!=null&&p(e,["goAway"],f);const g=d(n,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function BN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],bN(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],wN(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],md(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function FN(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function GN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],RN(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],NN(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function qN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>IN(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function zN(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const r=d(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const u=d(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const g=d(n,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(O=>O)),p(e,["promptTokensDetails"],w)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(O=>O)),p(e,["cacheTokensDetails"],w)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(O=>O)),p(e,["responseTokensDetails"],w)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(O=>O)),p(e,["toolUsePromptTokensDetails"],w)}const S=d(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KN(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function YN(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],$N(i));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function $N(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function JN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let l=hi(r);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["contents"],l)}return t}function QN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["tokensInfo"],r)}return e}function XN(n){const e={},t=d(n,["values"]);t!=null&&p(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&p(e,["statistics"],WN(i)),e}function WN(n){const e={},t=d(n,["truncated"]);t!=null&&p(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function nf(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>rD(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function jN(n){const e={},t=d(n,["controlType"]);t!=null&&p(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function ZN(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function eM(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],Cn(i));const r=d(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>qS(f))),p(e,["tools"],u)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&p(e,["generationConfig"],KM(l)),t}function tM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=hi(r);Array.isArray(u)&&(u=u.map(f=>nf(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&ZN(l),t}function nM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=hi(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&eM(l,t),t}function iM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const r=d(n,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function sM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function oM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],rt(n,i)),t}function rM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],rt(n,i)),t}function aM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function lM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function uM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const O=d(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const k=d(n,["addWatermark"]);e!==void 0&&k!=null&&p(e,["parameters","addWatermark"],k);const K=d(n,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const B=d(n,["editMode"]);e!==void 0&&B!=null&&p(e,["parameters","editMode"],B);const ee=d(n,["baseSteps"]);return e!==void 0&&ee!=null&&p(e,["parameters","editConfig","baseSteps"],ee),t}function cM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>fD(g))),p(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&uM(u,t),t}function dM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>sf(l))),p(e,["generatedImages"],r)}return e}function fM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function hM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&p(e,["parameters","outputDimensionality"],l);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&p(e,["parameters","autoTruncate"],f),t}function pM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let f=km(n,r);Array.isArray(f)&&(f=f.map(g=>g)),p(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&fM(l,t);const u=d(e,["model"]);return u!==void 0&&p(t,["requests[]","model"],rt(n,u)),t}function mM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=km(n,r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["instances[]","content"],u)}const l=d(e,["config"]);return l!=null&&hM(l,t),t}function gM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function yM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>XN(u))),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function vM(n){const e={},t=d(n,["endpoint"]);t!=null&&p(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function _M(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function TM(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function EM(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function AM(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],nf(Cn(r)));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const O=d(e,["frequencyPenalty"]);O!=null&&p(i,["frequencyPenalty"],O);const P=d(e,["seed"]);P!=null&&p(i,["seed"],P);const k=d(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const K=d(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],Vm(K));const B=d(e,["responseJsonSchema"]);if(B!=null&&p(i,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ee=d(e,["safetySettings"]);if(t!==void 0&&ee!=null){let D=ee;Array.isArray(D)&&(D=D.map(Be=>hD(Be))),p(t,["safetySettings"],D)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let D=Ya(oe);Array.isArray(D)&&(D=D.map(Be=>TD(Ka(Be)))),p(t,["tools"],D)}const fe=d(e,["toolConfig"]);if(t!==void 0&&fe!=null&&p(t,["toolConfig"],_D(fe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const de=d(e,["cachedContent"]);t!==void 0&&de!=null&&p(t,["cachedContent"],Gs(n,de));const M=d(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const N=d(e,["mediaResolution"]);N!=null&&p(i,["mediaResolution"],N);const R=d(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],Um(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=d(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const V=d(e,["imageConfig"]);V!=null&&p(i,["imageConfig"],XM(V));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function CM(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],Cn(r));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const O=d(e,["frequencyPenalty"]);O!=null&&p(i,["frequencyPenalty"],O);const P=d(e,["seed"]);P!=null&&p(i,["seed"],P);const k=d(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const K=d(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],Vm(K));const B=d(e,["responseJsonSchema"]);B!=null&&p(i,["responseJsonSchema"],B);const ee=d(e,["routingConfig"]);ee!=null&&p(i,["routingConfig"],ee);const oe=d(e,["modelSelectionConfig"]);oe!=null&&p(i,["modelConfig"],oe);const fe=d(e,["safetySettings"]);if(t!==void 0&&fe!=null){let X=fe;Array.isArray(X)&&(X=X.map(ce=>ce)),p(t,["safetySettings"],X)}const de=d(e,["tools"]);if(t!==void 0&&de!=null){let X=Ya(de);Array.isArray(X)&&(X=X.map(ce=>qS(Ka(ce)))),p(t,["tools"],X)}const M=d(e,["toolConfig"]);t!==void 0&&M!=null&&p(t,["toolConfig"],M);const N=d(e,["labels"]);t!==void 0&&N!=null&&p(t,["labels"],N);const R=d(e,["cachedContent"]);t!==void 0&&R!=null&&p(t,["cachedContent"],Gs(n,R));const L=d(e,["responseModalities"]);L!=null&&p(i,["responseModalities"],L);const V=d(e,["mediaResolution"]);V!=null&&p(i,["mediaResolution"],V);const q=d(e,["speechConfig"]);q!=null&&p(i,["speechConfig"],Um(q));const D=d(e,["audioTimestamp"]);D!=null&&p(i,["audioTimestamp"],D);const Be=d(e,["thinkingConfig"]);Be!=null&&p(i,["thinkingConfig"],Be);const at=d(e,["imageConfig"]);if(at!=null&&p(i,["imageConfig"],WM(at)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function CT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=hi(r);Array.isArray(u)&&(u=u.map(f=>nf(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],AM(n,l,t)),t}function bT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=hi(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],CM(n,l,t)),t}function wT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>YN(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function IT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const r=d(n,["createTime"]);r!=null&&p(e,["createTime"],r);const l=d(n,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const u=d(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(e,["responseId"],f);const g=d(n,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function bM(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=d(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(n,["imageSize"]);if(e!==void 0&&w!=null&&p(e,["parameters","sampleImageSize"],w),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function wM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const O=d(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const k=d(n,["addWatermark"]);e!==void 0&&k!=null&&p(e,["parameters","addWatermark"],k);const K=d(n,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const B=d(n,["imageSize"]);e!==void 0&&B!=null&&p(e,["parameters","sampleImageSize"],B);const ee=d(n,["enhancePrompt"]);return e!==void 0&&ee!=null&&p(e,["parameters","enhancePrompt"],ee),t}function IM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&bM(l,t),t}function xM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&wM(l,t),t}function RM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>FM(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],FS(r)),e}function NM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>sf(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],GS(r)),e}function MM(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(n,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=d(n,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(n,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],of(_));const T=d(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>PD(w))),p(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function DM(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const l=d(n,["fps"]);e!==void 0&&l!=null&&p(e,["parameters","fps"],l);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const h=d(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","negativePrompt"],S);const w=d(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const O=d(n,["generateAudio"]);e!==void 0&&O!=null&&p(e,["parameters","generateAudio"],O);const P=d(n,["lastFrame"]);e!==void 0&&P!=null&&p(e,["instances[0]","lastFrame"],Pi(P));const k=d(n,["referenceImages"]);if(e!==void 0&&k!=null){let ee=k;Array.isArray(ee)&&(ee=ee.map(oe=>kD(oe))),p(e,["instances[0]","referenceImages"],ee)}const K=d(n,["mask"]);e!==void 0&&K!=null&&p(e,["instances[0]","mask"],DD(K));const B=d(n,["compressionQuality"]);return e!==void 0&&B!=null&&p(e,["parameters","compressionQuality"],B),t}function PM(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],LM(u)),e}function kM(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],OM(u)),e}function VM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],of(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],zS(u));const f=d(e,["source"]);f!=null&&HM(f,t);const g=d(e,["config"]);return g!=null&&MM(g,t),t}function UM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],Pi(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],KS(u));const f=d(e,["source"]);f!=null&&BM(f,t);const g=d(e,["config"]);return g!=null&&DM(g,t),t}function LM(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>qM(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function OM(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>zM(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function HM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],of(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],zS(l)),t}function BM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Pi(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],KS(l)),t}function FM(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],jM(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=d(n,["_self"]);return r!=null&&p(e,["safetyAttributes"],FS(r)),e}function sf(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],BS(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=d(n,["_self"]);r!=null&&p(e,["safetyAttributes"],GS(r));const l=d(n,["prompt"]);return l!=null&&p(e,["enhancedPrompt"],l),e}function GM(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["mask"],BS(t));const i=d(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["labels"],r)}return e}function qM(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],ND(t)),e}function zM(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],MD(t)),e}function KM(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const O=d(n,["responseModalities"]);O!=null&&p(e,["responseModalities"],O);const P=d(n,["responseSchema"]);P!=null&&p(e,["responseSchema"],P);const k=d(n,["routingConfig"]);k!=null&&p(e,["routingConfig"],k);const K=d(n,["seed"]);K!=null&&p(e,["seed"],K);const B=d(n,["speechConfig"]);B!=null&&p(e,["speechConfig"],B);const ee=d(n,["stopSequences"]);ee!=null&&p(e,["stopSequences"],ee);const oe=d(n,["temperature"]);oe!=null&&p(e,["temperature"],oe);const fe=d(n,["thinkingConfig"]);fe!=null&&p(e,["thinkingConfig"],fe);const de=d(n,["topK"]);de!=null&&p(e,["topK"],de);const M=d(n,["topP"]);if(M!=null&&p(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],rt(n,i)),t}function $M(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],rt(n,i)),t}function JM(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function QM(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function XM(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WM(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);const r=d(n,["outputMimeType"]);r!=null&&p(e,["imageOutputOptions","mimeType"],r);const l=d(n,["outputCompressionQuality"]);return l!=null&&p(e,["imageOutputOptions","compressionQuality"],l),e}function jM(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],Jo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function BS(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Jo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function of(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],Jo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Pi(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Jo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function ZM(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],PS(n,f)),i}function eD(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],PS(n,f)),i}function tD(n,e){const t={},i=d(e,["config"]);return i!=null&&ZM(n,i,t),t}function nD(n,e){const t={},i=d(e,["config"]);return i!=null&&eD(n,i,t),t}function iD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let l=kS(r);Array.isArray(l)&&(l=l.map(u=>Jp(u))),p(e,["models"],l)}return e}function sD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let l=kS(r);Array.isArray(l)&&(l=l.map(u=>Qp(u))),p(e,["models"],l)}return e}function oD(n){const e={},t=d(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const r=d(n,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function Jp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["version"]);l!=null&&p(e,["version"],l);const u=d(n,["_self"]);u!=null&&p(e,["tunedModelInfo"],ED(u));const f=d(n,["inputTokenLimit"]);f!=null&&p(e,["inputTokenLimit"],f);const g=d(n,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const h=d(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=d(n,["temperature"]);_!=null&&p(e,["temperature"],_);const T=d(n,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const S=d(n,["topP"]);S!=null&&p(e,["topP"],S);const w=d(n,["topK"]);w!=null&&p(e,["topK"],w);const O=d(n,["thinking"]);return O!=null&&p(e,["thinking"],O),e}function Qp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["versionId"]);l!=null&&p(e,["version"],l);const u=d(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>vM(S))),p(e,["endpoints"],T)}const f=d(n,["labels"]);f!=null&&p(e,["labels"],f);const g=d(n,["_self"]);g!=null&&p(e,["tunedModelInfo"],SD(g));const h=d(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=d(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>S)),p(e,["checkpoints"],T)}return e}function rD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],_M(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],TM(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],KN(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function aD(n){const e={},t=d(n,["productImage"]);return t!=null&&p(e,["image"],Pi(t)),e}function lD(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const u=d(n,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const w=d(n,["labels"]);return e!==void 0&&w!=null&&p(e,["labels"],w),t}function uD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["source"]);r!=null&&dD(r,t);const l=d(e,["config"]);return l!=null&&lD(l,t),t}function cD(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>sf(r))),p(e,["generatedImages"],i)}return e}function dD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Pi(r));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>aD(f))),p(e,["instances[0]","productImages"],u)}return t}function fD(n){const e={},t=d(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Pi(t));const i=d(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);const r=d(n,["referenceType"]);r!=null&&p(e,["referenceType"],r);const l=d(n,["maskImageConfig"]);l!=null&&p(e,["maskImageConfig"],oD(l));const u=d(n,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],jN(u));const f=d(n,["styleImageConfig"]);f!=null&&p(e,["styleImageConfig"],f);const g=d(n,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],g),e}function FS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function GS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function hD(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function pD(n){const e={},t=d(n,["image"]);return t!=null&&p(e,["image"],Pi(t)),e}function mD(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const r=d(n,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","confidenceThreshold"],l);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&p(e,["parameters","binaryColorThreshold"],f);const g=d(n,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),t}function gD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["source"]);r!=null&&vD(r,t);const l=d(e,["config"]);return l!=null&&mD(l,t),t}function yD(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>GM(r))),p(e,["generatedMasks"],i)}return e}function vD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Pi(r));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&p(e,["instances[0]","scribble"],pD(l)),t}function _D(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],EM(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function TD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],JM(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],QM(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function qS(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>SM(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function ED(n){const e={},t=d(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function SD(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function AD(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function CD(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function bD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","name"],rt(n,i));const r=d(e,["config"]);return r!=null&&AD(r,t),t}function wD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["config"]);return r!=null&&CD(r,t),t}function ID(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=d(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&p(e,["parameters","sampleCount"],S);const w=d(n,["mode"]);return e!==void 0&&w!=null&&p(e,["parameters","mode"],w),t}function xD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["image"]);r!=null&&p(t,["instances[0]","image"],Pi(r));const l=d(e,["upscaleFactor"]);l!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=d(e,["config"]);return u!=null&&ID(u,t),t}function RD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>sf(l))),p(e,["generatedImages"],r)}return e}function ND(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Jo(i));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function MD(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Jo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function DD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["_self"],Pi(t));const i=d(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function PD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],of(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function kD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],Pi(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function zS(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Jo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function KS(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Jo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VD(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function UD(n){const e={},t=d(n,["config"]);return t!=null&&VD(t,e),e}function LD(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function OD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&LD(i,e),e}function HD(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function BD(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["customMetadata"],l)}const r=d(n,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),t}function FD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],qD(u)),e}function GD(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&p(e,["fileName"],i);const r=d(n,["config"]);return r!=null&&BD(r,e),e}function qD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function zD(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function KD(n){const e={},t=d(n,["config"]);return t!=null&&zD(t,e),e}function YD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["fileSearchStores"],l)}return e}function YS(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>g)),p(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function $D(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&YS(i,e),e}function JD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QD="Content-Type",XD="X-Server-Timeout",WD="User-Agent",Xp="x-goog-api-client",jD="1.34.0",ZD=`google-genai-sdk/${jD}`,e2="v1beta1",t2="v1beta";class n2{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:e2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:t2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?i[r]=Object.assign(Object.assign({},i[r]),l):l!==void 0&&(i[r]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&i2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await xT(r),new Kp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await xT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Ni(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Pe(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(_,{stream:!0});try{const O=JSON.parse(T);if("error"in O){const P=JSON.parse(JSON.stringify(O.error)),k=P.status,K=P.code,B=`got status: ${k}. ${JSON.stringify(O)}`;if(K>=400&&K<600)throw new tf({message:B,status:K})}}catch(O){if(O.name==="ApiError")throw O}u+=T;let S=-1,w=0;for(;;){S=-1,w=0;for(const k of g){const K=u.indexOf(k);K!==-1&&(S===-1||K<S)&&(S=K,w=k.length)}if(S===-1)break;const O=u.substring(0,S);u=u.substring(S+w);const P=O.trim();if(P.startsWith(f)){const k=P.substring(f.length).trim();try{const K=new Response(k,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Pe(new Kp(K))}catch(K){throw new Error(`exception parsing stream chunk ${k}. ${K}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=ZD+" "+this.clientOptions.userAgentExtra;return e[WD]=t,e[Xp]=t,e[QD]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))i.append(r,l);e.timeout&&e.timeout>0&&i.append(XD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const g={file:r},h=this.getFileName(e),_=ge("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const l=this.clientOptions.uploader,u=await l.stat(t),f=String(u.size),g=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&YS(i,T);const S=await this.fetchUploadUrl(h,f,g,_,T,i==null?void 0:i.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,l,u){var f;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function xT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new tf({message:r,status:t}):new Error(r)}}function i2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,u){const f=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],_=f[g];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[g]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[g]=h)}return f}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s2="mcp_used/unknown";let o2=!1;function $S(n){for(const e of n)if(r2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return o2}function JS(n){var e;const t=(e=n[Xp])!==null&&e!==void 0?e:"";n[Xp]=(t+` ${s2}`).trimStart()}function r2(n){return n!==null&&typeof n=="object"&&n instanceof Om}function a2(n){return Ni(this,arguments,function*(t,i=100){let r,l=0;for(;l<i;){const u=yield Pe(t.listTools({cursor:r}));for(const f of u.tools)yield yield Pe(f),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Om{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Om(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,g=(t=void 0,Mi(a2(_))),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const T=r;u.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),HR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function l2(n,e,t){const i=new MR;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class u2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=f2(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(ee=>{h=ee}),T=e.callbacks,S=function(){h({})},w=this.apiClient,O={onopen:S,onmessage:ee=>{l2(w,T.onmessage,ee)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(ee){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(ee){}},P=this.webSocketFactory.create(g,d2(u),O);P.connect(),await _;const B={setup:{model:rt(this.apiClient,e.model)}};return P.send(JSON.stringify(B)),new c2(P,this.apiClient)}}class c2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=UN(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=VN(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(xa.PLAY)}pause(){this.sendPlaybackControl(xa.PAUSE)}stop(){this.sendPlaybackControl(xa.STOP)}resetContext(){this.sendPlaybackControl(xa.RESET_CONTEXT)}close(){this.conn.close()}}function d2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function f2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function p2(n,e,t){const i=new NR;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const u=HN(l);Object.assign(i,u)}else Object.assign(i,l);e(i)}class m2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new u2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&$S(e.config.tools)&&JS(T);const S=_2(T);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const R=this.apiClient.getApiKey();let L="BidiGenerateContent",V="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",V="access_token"),_=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${V}=${R}`}let w=()=>{};const O=new Promise(R=>{w=R}),P=e.callbacks,k=function(){var R;(R=P==null?void 0:P.onopen)===null||R===void 0||R.call(P),w({})},K=this.apiClient,B={onopen:k,onmessage:R=>{p2(K,P.onmessage,R)},onerror:(t=P==null?void 0:P.onerror)!==null&&t!==void 0?t:function(R){},onclose:(i=P==null?void 0:P.onclose)!==null&&i!==void 0?i:function(R){}},ee=this.webSocketFactory.create(_,v2(S),B);ee.connect(),await O;let oe=rt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const R=this.apiClient.getProject(),L=this.apiClient.getLocation();oe=`projects/${R}/locations/${L}/`+oe}let fe={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Rd.AUDIO]}:e.config.responseModalities=[Rd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const de=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],M=[];for(const R of de)if(this.isCallableTool(R)){const L=R;M.push(await L.tool())}else M.push(R);M.length>0&&(e.config.tools=M);const N={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=kN(this.apiClient,N):fe=PN(this.apiClient,N),delete fe.config,ee.send(JSON.stringify(fe)),new y2(ee,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const g2={turnComplete:!0};class y2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=hi(t.turns),e.isVertexAI()||(i=i.map(r=>nf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(h2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},g2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:ON(e)}:t={realtimeInput:LN(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function v2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function _2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RT=10;function NT(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ma(u)){r=!0;break}if(!r)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ma(n){return"callTool"in n&&typeof n.callTool=="function"}function T2(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Ma(r)))!==null&&i!==void 0?i:!1}function MT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(Ma(i))return;const l=i;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function DT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E2 extends Fs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,l,u,f;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!T2(t)||NT(t.config))return await this.generateContentInternal(g);const h=MT(t);if(h.length>0){const P=h.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let _,T;const S=hi(g.contents),w=(l=(r=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:RT;let O=0;for(;O<w&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const P=_.candidates[0].content,k=[];for(const K of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Ma(K)){const ee=await K.callTool(_.functionCalls);k.push(...ee)}O++,T={role:"user",parts:k},g.contents=hi(g.contents),g.contents.push(P),g.contents.push(T),DT(g.config)&&(S.push(P),S.push(T))}return DT(g.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var i,r,l,u,f;if(this.maybeMoveToResponseJsonSchem(t),NT(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=MT(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let l;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Mr(Us.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,l,u,f,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(f=t.source)===null||f===void 0?void 0:f.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>Ma(g)?await g.tool():g)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&$S(e.config.tools)){const g=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),JS(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,r;const l=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ma(u)){const f=u,g=await f.tool();for(const h of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var t,i,r;const l=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:RT;let u=!1,f=0;const g=await this.initAfcToolsMap(e);return(function(h,_,T){return Ni(this,arguments,function*(){for(var S,w,O,P,k,K;f<l;){u&&(f++,u=!1);const fe=yield Pe(h.processParamsMaybeAddMcpUsage(T)),de=yield Pe(h.generateContentStreamInternal(fe)),M=[],N=[];try{for(var B=!0,ee=(w=void 0,Mi(de)),oe;oe=yield Pe(ee.next()),S=oe.done,!S;B=!0){P=oe.value,B=!1;const R=P;if(yield yield Pe(R),R.candidates&&(!((k=R.candidates[0])===null||k===void 0)&&k.content)){N.push(R.candidates[0].content);for(const L of(K=R.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(f<l&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(L.functionCall.name)){const V=yield Pe(_.get(L.functionCall.name).callTool([L.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(R){w={error:R}}finally{try{!B&&!S&&(O=ee.return)&&(yield Pe(O.call(ee)))}finally{if(w)throw w.error}}if(M.length>0){u=!0;const R=new eu;R.candidates=[{content:{role:"user",parts:M}}],yield yield Pe(R);const L=[];L.push(...N),L.push({role:"user",parts:M});const V=hi(T.contents).concat(L);T.contents=V}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=bT(this.apiClient,e);return f=ge("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=IT(_),S=new eu;return Object.assign(S,T),S})}else{const h=CT(this.apiClient,e);return f=ge("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=wT(_),S=new eu;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=bT(this.apiClient,e);return f=ge("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return Ni(this,arguments,function*(){var S,w,O,P;try{for(var k=!0,K=Mi(T),B;B=yield Pe(K.next()),S=B.done,!S;k=!0){P=B.value,k=!1;const ee=P,oe=IT(yield Pe(ee.json()));oe.sdkHttpResponse={headers:ee.headers};const fe=new eu;Object.assign(fe,oe),yield yield Pe(fe)}}catch(ee){w={error:ee}}finally{try{!k&&!S&&(O=K.return)&&(yield Pe(O.call(K)))}finally{if(w)throw w.error}}})})}else{const h=CT(this.apiClient,e);return f=ge("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return Ni(this,arguments,function*(){var S,w,O,P;try{for(var k=!0,K=Mi(T),B;B=yield Pe(K.next()),S=B.done,!S;k=!0){P=B.value,k=!1;const ee=P,oe=wT(yield Pe(ee.json()));oe.sdkHttpResponse={headers:ee.headers};const fe=new eu;Object.assign(fe,oe),yield yield Pe(fe)}}catch(ee){w={error:ee}}finally{try{!k&&!S&&(O=K.return)&&(yield Pe(O.call(K)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=mM(this.apiClient,e);return f=ge("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=yM(_),S=new aT;return Object.assign(S,T),S})}else{const h=pM(this.apiClient,e);return f=ge("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=gM(_),S=new aT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=xM(this.apiClient,e);return f=ge("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=NM(_),S=new lT;return Object.assign(S,T),S})}else{const h=IM(this.apiClient,e);return f=ge("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=RM(_),S=new lT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=cM(this.apiClient,e);return l=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=dM(g),_=new _R;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=xD(this.apiClient,e);return l=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=RD(g),_=new TR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=uD(this.apiClient,e);return l=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=cD(g),_=new ER;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=gD(this.apiClient,e);return l=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=yD(g),_=new SR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=$M(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Qp(_))}else{const h=YM(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Jp(_))}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=nD(this.apiClient,e);return f=ge("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=sD(_),S=new uT;return Object.assign(S,T),S})}else{const h=tD(this.apiClient,e);return f=ge("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=iD(_),S=new uT;return Object.assign(S,T),S})}}async update(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=wD(this.apiClient,e);return f=ge("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Qp(_))}else{const h=bD(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Jp(_))}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=rM(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=lM(_),S=new cT;return Object.assign(S,T),S})}else{const h=oM(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=aM(_),S=new cT;return Object.assign(S,T),S})}}async countTokens(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=nM(this.apiClient,e);return f=ge("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=sM(_),S=new dT;return Object.assign(S,T),S})}else{const h=tM(this.apiClient,e);return f=ge("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=iM(_),S=new dT;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=JN(this.apiClient,e);return l=ge("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=QN(g),_=new AR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=UM(this.apiClient,e);return f=ge("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=kM(_),S=new Nd;return Object.assign(S,T),S})}else{const h=VM(this.apiClient,e);return f=ge("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const T=PM(_),S=new Nd;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S2 extends Fs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=hR(e);return f=ge("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=fR(e);return f=ge("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=oR(e);return l=ge("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A2(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function C2(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>P2(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function b2(n,e,t){const i={},r=d(e,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&p(t,["newSessionExpireTime"],l);const u=d(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&p(t,["bidiGenerateContentSetup"],D2(n,f));const g=d(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&p(t,["fieldMask"],g),i}function w2(n,e){const t={},i=d(e,["config"]);return i!=null&&p(t,["config"],b2(n,i,t)),t}function I2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function x2(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function R2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function N2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function M2(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Lm(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=d(n,["systemInstruction"]);e!==void 0&&O!=null&&p(e,["setup","systemInstruction"],C2(Cn(O)));const P=d(n,["tools"]);if(e!==void 0&&P!=null){let de=Ya(P);Array.isArray(de)&&(de=de.map(M=>V2(Ka(M)))),p(e,["setup","tools"],de)}const k=d(n,["sessionResumption"]);e!==void 0&&k!=null&&p(e,["setup","sessionResumption"],k2(k));const K=d(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const ee=d(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&p(e,["setup","realtimeInputConfig"],ee);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const fe=d(n,["proactivity"]);if(e!==void 0&&fe!=null&&p(e,["setup","proactivity"],fe),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function D2(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],rt(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],M2(r,t)),t}function P2(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],I2(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],x2(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],A2(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function k2(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function V2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],R2(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],N2(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function L2(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=U2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];l&&g.push(l),f.length>0&&g.push(...f),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class O2 extends Fs{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=w2(this.apiClient,e);l=ge("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const g=L2(f,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H2(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function B2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&H2(i,e),e}function F2(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function G2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function q2(n){const e={},t=d(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&G2(i,e),e}function z2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K2 extends Fs{constructor(e){super(),this.apiClient=e,this.list=async t=>new Mr(Us.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=F2(e);return l=ge("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=B2(e);r=ge("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=q2(e);return l=ge("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=z2(g),_=new CR;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y2 extends Fs{constructor(e,t=new K2(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Mr(Us.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=UD(e);return l=ge("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=HD(e);return l=ge("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=OD(e);r=ge("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=KD(e);return l=ge("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=YD(g),_=new bR;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$D(e);return l=ge("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=JD(g),_=new wR;return Object.assign(_,h),_})}}async importFile(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=GD(e);return l=ge("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=FD(g),_=new Dm;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let QS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return QS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const $2=()=>QS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const jp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pi extends Error{}class Nn extends pi{constructor(e,t,i,r){super(`${Nn.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new rf({message:i,cause:jp(t)});const l=t;return e===400?new WS(e,l,i,r):e===401?new jS(e,l,i,r):e===403?new ZS(e,l,i,r):e===404?new eA(e,l,i,r):e===409?new tA(e,l,i,r):e===422?new nA(e,l,i,r):e===429?new iA(e,l,i,r):e>=500?new sA(e,l,i,r):new Nn(e,l,i,r)}}class Zp extends Nn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class rf extends Nn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class XS extends rf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class WS extends Nn{}class jS extends Nn{}class ZS extends Nn{}class eA extends Nn{}class tA extends Nn{}class nA extends Nn{}class iA extends Nn{}class sA extends Nn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J2=/^[a-z][a-z0-9+.-]*:/i,Q2=n=>J2.test(n);let em=n=>(em=Array.isArray,em(n));const X2=em;let W2=X2;const PT=W2;function j2(n){if(!n)return!0;for(const e in n)return!1;return!0}function Z2(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const eP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new pi(`${n} must be an integer`);if(e<0)throw new pi(`${n} must be a positive integer`);return e},tP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Aa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const sP=()=>{var n,e,t,i,r;const l=iP();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":VT(Deno.build.os),"X-Stainless-Arch":kT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":VT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":kT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=oP();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function oP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,l=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const kT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",VT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let nd;const rP=()=>nd??(nd=sP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function oA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function lP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return oA({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function rA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function uP(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function xp(n,e,t){return aA(),new File(n,e??"unknown_file",t)}function dP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const fP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",hP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&lA(n),pP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function mP(n,e,t){if(aA(),n=await n,hP(n))return n instanceof File?n:xp([await n.arrayBuffer()],n.name);if(pP(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),xp(await tm(r),e,t)}const i=await tm(n);if(e||(e=dP(n)),!(t!=null&&t.type)){const r=i.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return xp(i,e,t)}async function tm(n){var e,t,i,r,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(lA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(fP(n))try{for(var f=!0,g=Mi(n),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const _=r;u.push(...await tm(_))}}catch(_){t={error:_}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${gP(n)}`)}return u}function gP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uA{constructor(e){this._client=e}}uA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const UT=Object.freeze(Object.create(null)),yP=(n=cA)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const l=[],u=t.reduce((_,T,S)=>{var w,O,P;/[?#]/.test(T)&&(r=!0);const k=i[S];let K=(r?encodeURIComponent:n)(""+k);return S!==i.length&&(k==null||typeof k=="object"&&k.toString===((P=Object.getPrototypeOf((O=Object.getPrototypeOf((w=k.hasOwnProperty)!==null&&w!==void 0?w:UT))!==null&&O!==void 0?O:UT))===null||P===void 0?void 0:P.toString))&&(K=k+"",l.push({start:_.length+T.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),_+T+(S===i.length?"":K)},""),f=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(f))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((_,T)=>_.start-T.start),l.length>0){let _=0;const T=l.reduce((S,w)=>{const O=" ".repeat(w.start-_),P="^".repeat(w.length);return _=w.start+w.length,S+O+P},"");throw new pi(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),id=yP(cA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dA extends uA{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,l=Dd(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new pi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new pi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(id`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(id`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(id`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const l=t??{},{api_version:u=this._client.apiVersion}=l,f=Dd(l,["api_version"]);return this._client.get(id`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}dA._key=Object.freeze(["interactions"]);class fA extends dA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vP(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let sd;function Hm(n){let e;return(sd??(e=new globalThis.TextEncoder,sd=e.encode.bind(e)))(n)}let od;function LT(n){let e;return(od??(e=new globalThis.TextDecoder,od=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class af{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Hm(e):e;this.buffer=vP([this.buffer,t]);const i=[];let r;for(;(r=_P(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(LT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=LT(this.buffer.subarray(0,l));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}af.NEWLINE_CHARS=new Set([`
`,"\r"]);af.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function _P(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function TP(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pd={off:0,error:200,warn:300,info:400,debug:500},OT=(n,e,t)=>{if(n){if(Z2(Pd,n))return n;Rn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Pd))}`)}};function nu(){}function rd(n,e,t){return!e||Pd[n]>Pd[t]?nu:e[n].bind(e)}const EP={error:nu,warn:nu,info:nu,debug:nu};let HT=new WeakMap;function Rn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return EP;const r=HT.get(t);if(r&&r[0]===i)return r[1];const l={error:rd("error",t,i),warn:rd("warn",t,i),info:rd("info",t,i),debug:rd("debug",t,i)};return HT.set(t,[i,l]),l}const Tr=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ra{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const l=i?Rn(i):console;function u(){return Ni(this,arguments,function*(){var g,h,_,T;if(r)throw new pi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,O=Mi(SP(e,t)),P;P=yield Pe(O.next()),g=P.done,!g;w=!0){T=P.value,w=!1;const k=T;if(!S)if(k.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Pe(JSON.parse(k.data))}catch(K){throw l.error("Could not parse message into JSON:",k.data),l.error("From chunk:",k.raw),K}}}catch(k){h={error:k}}finally{try{!w&&!g&&(_=O.return)&&(yield Pe(_.call(O)))}finally{if(h)throw h.error}}S=!0}catch(k){if(Wp(k))return yield Pe(void 0);throw k}finally{S||t.abort()}})}return new Ra(u,t,i)}static fromReadableStream(e,t,i){let r=!1;function l(){return Ni(this,arguments,function*(){var g,h,_,T;const S=new af,w=rA(e);try{for(var O=!0,P=Mi(w),k;k=yield Pe(P.next()),g=k.done,!g;O=!0){T=k.value,O=!1;const K=T;for(const B of S.decode(K))yield yield Pe(B)}}catch(K){h={error:K}}finally{try{!O&&!g&&(_=P.return)&&(yield Pe(_.call(P)))}finally{if(h)throw h.error}}for(const K of S.flush())yield yield Pe(K)})}function u(){return Ni(this,arguments,function*(){var g,h,_,T;if(r)throw new pi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,O=Mi(l()),P;P=yield Pe(O.next()),g=P.done,!g;w=!0){T=P.value,w=!1;const k=T;S||k&&(yield yield Pe(JSON.parse(k)))}}catch(k){h={error:k}}finally{try{!w&&!g&&(_=O.return)&&(yield Pe(_.call(O)))}finally{if(h)throw h.error}}S=!0}catch(k){if(Wp(k))return yield Pe(void 0);throw k}finally{S||t.abort()}})}return new Ra(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=i.next();e.push(u),t.push(u)}return l.shift()}});return[new Ra(()=>r(e),this.controller,this.client),new Ra(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return oA({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:l}=await t.next();if(l)return i.close();const u=Hm(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function SP(n,e){return Ni(this,arguments,function*(){var i,r,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new pi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new pi("Attempted to iterate over a response with no body");const f=new CP,g=new af,h=rA(n.body);try{for(var _=!0,T=Mi(AP(h)),S;S=yield Pe(T.next()),i=S.done,!i;_=!0){u=S.value,_=!1;const w=u;for(const O of g.decode(w)){const P=f.decode(O);P&&(yield yield Pe(P))}}}catch(w){r={error:w}}finally{try{!_&&!i&&(l=T.return)&&(yield Pe(l.call(T)))}finally{if(r)throw r.error}}for(const w of g.flush()){const O=f.decode(w);O&&(yield yield Pe(O))}})}function AP(n){return Ni(this,arguments,function*(){var t,i,r,l;let u=new Uint8Array;try{for(var f=!0,g=Mi(n),h;h=yield Pe(g.next()),t=h.done,!t;f=!0){l=h.value,f=!1;const _=l;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Hm(_):_;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let w;for(;(w=TP(u))!==-1;)yield yield Pe(u.slice(0,w)),u=u.slice(w)}}catch(_){i={error:_}}finally{try{!f&&!t&&(r=g.return)&&(yield Pe(r.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Pe(u))})}class CP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=bP(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function bP(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function wP(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var f;if(e.options.stream)return Rn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Ra.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),h=(f=g==null?void 0:g.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return Rn(n).debug(`[${i}] response parsed`,Tr({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bm extends Promise{constructor(e,t,i=wP){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Bm(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hA=Symbol("brand.privateNullableHeaders");function*IP(n){if(!n)return;if(hA in n){const{values:i,nulls:r}=n;yield*i.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():PT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=PT(i[1])?i[1]:[i[1]];let u=!1;for(const f of l)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const tu=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[l,u]of IP(i)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),u===null?(e.delete(l),t.add(f)):(e.append(l,u),t.delete(f))}}return{[hA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rp=n=>{var e,t,i,r,l,u;if(typeof globalThis.process<"u")return(i=(t=(e=Zx)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pA;class lf{constructor(e){var t,i,r,l,u,f,g,{baseURL:h=Rp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Rp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Dd(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:lf.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const O="warn";this.logLevel=O,this.logLevel=(u=(l=OT(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:OT(Rp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:O,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:aP(),this.encoder=cP,this._options=w,this.apiKey=_,this.apiVersion=T,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=tu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return tu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return tu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new pi(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Aa}`}defaultIdempotencyKey(){return`stainless-node-retry-${$2()}`}makeStatusError(e,t,i,r){return Nn.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,l=Q2(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return j2(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Bm(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,l,u;const f=await e,g=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(f);const{req:h,url:_,timeout:T}=await this.buildRequest(f,{retryCount:g-t});await this.prepareRequest(h,{url:_,options:f});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,O=Date.now();if(Rn(this).debug(`[${S}] sending request`,Tr({retryOfRequestLogID:i,method:f.method,url:_,options:f,headers:h.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new Zp;const P=new AbortController,k=await this.fetchWithTimeout(_,h,T,P).catch(jp),K=Date.now();if(k instanceof globalThis.Error){const ee=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Zp;const oe=Wp(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(t)return Rn(this).info(`[${S}] connection ${oe?"timed out":"failed"} - ${ee}`),Rn(this).debug(`[${S}] connection ${oe?"timed out":"failed"} (${ee})`,Tr({retryOfRequestLogID:i,url:_,durationMs:K-O,message:k.message})),this.retryRequest(f,t,i??S);throw Rn(this).info(`[${S}] connection ${oe?"timed out":"failed"} - error; no more retries left`),Rn(this).debug(`[${S}] connection ${oe?"timed out":"failed"} (error; no more retries left)`,Tr({retryOfRequestLogID:i,url:_,durationMs:K-O,message:k.message})),oe?new XS:new rf({cause:k})}const B=`[${S}${w}] ${h.method} ${_} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${K-O}ms`;if(!k.ok){const ee=await this.shouldRetry(k);if(t&&ee){const R=`retrying, ${t} attempts remaining`;return await uP(k.body),Rn(this).info(`${B} - ${R}`),Rn(this).debug(`[${S}] response error (${R})`,Tr({retryOfRequestLogID:i,url:k.url,status:k.status,headers:k.headers,durationMs:K-O})),this.retryRequest(f,t,i??S,k.headers)}const oe=ee?"error; no more retries left":"error; not retryable";Rn(this).info(`${B} - ${oe}`);const fe=await k.text().catch(R=>jp(R).message),de=tP(fe),M=de?void 0:fe;throw Rn(this).debug(`[${S}] response error (${oe})`,Tr({retryOfRequestLogID:i,url:k.url,status:k.status,headers:k.headers,message:M,durationMs:Date.now()-O})),this.makeStatusError(k.status,de,M,k.headers)}return Rn(this).info(B),Rn(this).debug(`[${S}] response start`,Tr({retryOfRequestLogID:i,url:k.url,status:k.status,headers:k.headers,durationMs:K-O})),{response:k,options:f,controller:P,requestLogID:S,retryOfRequestLogID:i,startTime:O}}async fetchWithTimeout(e,t,i,r){const l=t||{},{signal:u,method:f}=l,g=Dd(l,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);f&&(T.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var l;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await nP(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,l;const u=Object.assign({},e),{method:f,path:g,query:h,defaultBaseURL:_}=u,T=this.buildURL(g,h,_);"timeout"in u&&eP("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:u}),O=await this.buildHeaders({options:e,method:f,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:O},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=tu([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),rP()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=tu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:lP(e)}:this.encoder({body:e,headers:i})}}lf.DEFAULT_TIMEOUT=6e4;class on extends lf{constructor(){super(...arguments),this.interactions=new fA(this)}}pA=on;on.GeminiNextGenAPIClient=pA;on.GeminiNextGenAPIClientError=pi;on.APIError=Nn;on.APIConnectionError=rf;on.APIConnectionTimeoutError=XS;on.APIUserAbortError=Zp;on.NotFoundError=eA;on.ConflictError=tA;on.RateLimitError=iA;on.BadRequestError=WS;on.AuthenticationError=jS;on.InternalServerError=sA;on.PermissionDeniedError=ZS;on.UnprocessableEntityError=nA;on.toFile=mP;on.Interactions=fA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function RP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function NP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function MP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function DP(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","batchSize"],f);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function PP(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec"],BT(w))}else if(r==="PREFERENCE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec"],BT(w))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const u=d(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=d(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let _=d(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(_==="PREFERENCE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["beta"]);return e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function kP(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&KP(l);const u=d(n,["config"]);return u!=null&&DP(u,t),t}function VP(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&YP(l,t,e);const u=d(n,["config"]);return u!=null&&PP(u,t,e),t}function UP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function LP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function OP(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function HP(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function BP(n,e){const t={},i=d(n,["config"]);return i!=null&&OP(i,t),t}function FP(n,e){const t={},i=d(n,["config"]);return i!=null&&HP(i,t),t}function GP(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>mA(f))),p(t,["tuningJobs"],u)}return t}function qP(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>nm(f))),p(t,["tuningJobs"],u)}return t}function zP(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["model"],i);const r=d(n,["name"]);return r!=null&&p(t,["endpoint"],r),t}function KP(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(t,["examples","examples"],r)}return t}function YP(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function mA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],MS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["tuningTask","completeTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["description"]);_!=null&&p(t,["description"],_);const T=d(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const S=d(n,["_self"]);return S!=null&&p(t,["tunedModel"],zP(S)),t}function nm(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],MS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["error"]);_!=null&&p(t,["error"],_);const T=d(n,["description"]);T!=null&&p(t,["description"],T);const S=d(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const w=d(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const O=d(n,["preTunedModel"]);O!=null&&p(t,["preTunedModel"],O);const P=d(n,["supervisedTuningSpec"]);P!=null&&p(t,["supervisedTuningSpec"],P);const k=d(n,["preferenceOptimizationSpec"]);k!=null&&p(t,["preferenceOptimizationSpec"],k);const K=d(n,["tuningDataStats"]);K!=null&&p(t,["tuningDataStats"],K);const B=d(n,["encryptionSpec"]);B!=null&&p(t,["encryptionSpec"],B);const ee=d(n,["partnerModelTuningSpec"]);ee!=null&&p(t,["partnerModelTuningSpec"],ee);const oe=d(n,["customBaseModel"]);oe!=null&&p(t,["customBaseModel"],oe);const fe=d(n,["experiment"]);fe!=null&&p(t,["experiment"],fe);const de=d(n,["labels"]);de!=null&&p(t,["labels"],de);const M=d(n,["outputUri"]);M!=null&&p(t,["outputUri"],M);const N=d(n,["pipelineJob"]);N!=null&&p(t,["pipelineJob"],N);const R=d(n,["serviceAccount"]);R!=null&&p(t,["serviceAccount"],R);const L=d(n,["tunedModelDisplayName"]);L!=null&&p(t,["tunedModelDisplayName"],L);const V=d(n,["veoTuningSpec"]);return V!=null&&p(t,["veoTuningSpec"],V),t}function $P(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(n,["done"]);u!=null&&p(t,["done"],u);const f=d(n,["error"]);return f!=null&&p(t,["error"],f),t}function BT(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const r=d(n,["vertexDatasetResource"]);return r!=null&&p(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JP extends Fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mr(Us.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:zp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=LP(e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>nm(_))}else{const h=UP(e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>mA(_))}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=FP(e);return f=ge("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=qP(_),S=new fT;return Object.assign(S,T),S})}else{const h=BP(e);return f=ge("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=GP(_),S=new fT;return Object.assign(S,T),S})}}async cancel(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=RP(e);return f=ge("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=MP(_),S=new hT;return Object.assign(S,T),S})}else{const h=xP(e);return f=ge("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=NP(_),S=new hT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=VP(e,e);return l=ge("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>nm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kP(e);return l=ge("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>$P(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QP{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const XP=1024*1024*8,WP=3,jP=1e3,ZP=2,kd="x-goog-upload-status";async function ek(n,e,t){var i;const r=await gA(n,e,t),l=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function tk(n,e,t){var i;const r=await gA(n,e,t),l=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=bS(l),f=new Pm;return Object.assign(f,u),f}async function gA(n,e,t){var i,r;let l=0,u=0,f=new Kp(new Response),g="upload";for(l=n.size;u<l;){const h=Math.min(XP,l-u),_=n.slice(u,u+h);u+h>=l&&(g+=", finalize");let T=0,S=jP;for(;T<WP&&(f=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[kd]));)T++,await ik(S),S=S*ZP;if(u+=h,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[kd])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function nk(n){return{size:n.size,type:n.type}}function ik(n){return new Promise(e=>setTimeout(e,n))}class sk{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ek(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tk(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nk(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ok{create(e,t,i){return new rk(e,t,i)}}class rk{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FT="x-goog-api-key";class ak{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(FT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(FT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lk="gl-node/";class uk{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new on({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=iR(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new ak(this.apiKey);this.apiClient=new n2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:lk+"web",uploader:new sk,downloader:new QP}),this.models=new E2(this.apiClient),this.live=new m2(this.apiClient,r,new ok),this.batches=new D1(this.apiClient),this.chats=new hN(this.models,this.apiClient),this.caches=new cN(this.apiClient),this.files=new AN(this.apiClient),this.operations=new S2(this.apiClient),this.authTokens=new O2(this.apiClient),this.tunings=new JP(this.apiClient),this.fileSearchStores=new Y2(this.apiClient)}}const Fm=n=>new uk({apiKey:n}),ck=async(n,e)=>{if(!e)return"Error: API Key is missing.";const t=Fm(e);try{return(await t.models.generateContent({model:"gemini-3-flash-preview",contents:JSON.stringify(n),config:{systemInstruction:Rm,temperature:.3}})).text||"Error: No response generated."}catch(i){return console.error("Error generating note:",i),"Error generating note. Please check the console for details."}},dk=async(n,e,t,i)=>{if(!i)return e;const r=Fm(i),l=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT MEDICAL NOTE DRAFT:
    """
    ${e}
    """
    
    USER REFINEMENT INSTRUCTION:
    "${t}"
    
    CRITICAL RULES:
    1. PRIORITY: Adhere to user instructions while maintaining the facts in the ORIGINAL DATA SOURCE.
    2. CONSISTENCY: Maintain all formatting rules (Vitals order, "denied" list, etc.) from the system instructions.
    3. OUTPUT: Provide ONLY the full updated medical note. No conversational filler.
  `;try{return(await r.models.generateContent({model:"gemini-3-flash-preview",contents:l,config:{systemInstruction:Rm,temperature:.4}})).text||e}catch(u){return console.error("Error refining full note:",u),e}},fk=async(n,e,t,i,r)=>{var f;if(!r)return t;const l=Fm(r),u=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT FULL NOTE:
    """
    ${e}
    """
    
    The user wants to rewrite the following SPECIFIC SEGMENT:
    "--- ${t} ---"
    
    USER INSTRUCTION FOR THIS SEGMENT:
    "${i}"
    
    CRITICAL RULES:
    1. PRIORITY: User instructions are the highest priority. If the user asks to change the format or tone for this segment, follow it exactly.
    2. MEDICAL STANDARDS: Unless the user explicitly asks to break medical conventions, maintain the standards defined in the original system instructions (e.g., Vitals order, forbidden abbreviations, academic tone).
    3. SCOPE: ONLY rewrite the selected segment. Do not change parts of the note outside of this segment.
    4. OUTPUT: Provide ONLY the new rewritten text for that segment. Do not include any explanations or conversational filler.
  `;try{return((f=(await l.models.generateContent({model:"gemini-3-flash-preview",contents:u,config:{systemInstruction:Rm,temperature:.4}})).text)==null?void 0:f.trim())||t}catch(g){return console.error("Error refining segment:",g),t}},hk=()=>{};var GT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},pk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[i++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],u=n[t++],f=n[t++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},vA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const l=n[r],u=r+1<n.length,f=u?n[r+1]:0,g=r+2<n.length,h=g?n[r+2]:0,_=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|h>>6,w=h&63;g||(w=64,u||(S=64)),i.push(t[_],t[T],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||f==null||h==null||T==null)throw new mk;const S=l<<2|f>>4;if(i.push(S),h!==64){const w=f<<4&240|h>>2;if(i.push(w),T!==64){const O=h<<6&192|T;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class mk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gk=function(n){const e=yA(n);return vA.encodeByteArray(e,!0)},Vd=function(n){return gk(n).replace(/\./g,"")},_A=function(n){try{return vA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=()=>yk().__FIREBASE_DEFAULTS__,_k=()=>{if(typeof process>"u"||typeof GT>"u")return;const n=GT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Tk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&_A(n[1]);return e&&JSON.parse(e)},uf=()=>{try{return hk()||vk()||_k()||Tk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},TA=n=>{var e,t;return(t=(e=uf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Ek=n=>{const e=TA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},EA=()=>{var n;return(n=uf())==null?void 0:n.config},SA=n=>{var e;return(e=uf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function AA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Vd(JSON.stringify(t)),Vd(JSON.stringify(u)),""].join(".")}const lu={};function Ck(){const n={prod:[],emulator:[]};for(const e of Object.keys(lu))lu[e]?n.emulator.push(e):n.prod.push(e);return n}function bk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let qT=!1;function CA(n,e){if(typeof window>"u"||typeof document>"u"||!Ja(window.location.host)||lu[n]===e||lu[n]||qT)return;lu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=Ck().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{qT=!0,u()},S}function _(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=bk(i),w=t("text"),O=document.getElementById(w)||document.createElement("span"),P=t("learnmore"),k=document.getElementById(P)||document.createElement("a"),K=t("preprendIcon"),B=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;f(ee),_(k,P);const oe=h();g(B,K),ee.append(B,O,k,oe),document.body.appendChild(ee)}l?(O.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function Ik(){var e;const n=(e=uf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Nk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mk(){const n=bn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Dk(){return!Ik()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pk(){try{return typeof indexedDB=="object"}catch{return!1}}function kk(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="FirebaseError";class qs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Vk,Object.setPrototypeOf(this,qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?Uk(l,i):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new qs(r,f,i)}}function Uk(n,e){return n.replace(Lk,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Lk=/\{\$([^}]+)}/g;function Ok(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const l=n[r],u=e[r];if(zT(l)&&zT(u)){if(!wr(l,u))return!1}else if(l!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function zT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hk(n,e){const t=new Bk(n,e);return t.subscribe.bind(t)}class Bk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Fk(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Np),r.error===void 0&&(r.error=Np),r.complete===void 0&&(r.complete=Np);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(n){return n&&n._delegate?n._delegate:n}class Ir{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Sk;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zk(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});i.resolve(l)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const l=this.instances.get(i);return l&&e(l,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:qk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qk(n){return n===Er?void 0:n}function zk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Gk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const Yk={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},$k=Qe.INFO,Jk={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},Qk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Jk[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gm{constructor(e){this.name=e,this._logLevel=$k,this._logHandler=Qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const Xk=(n,e)=>e.some(t=>n instanceof t);let KT,YT;function Wk(){return KT||(KT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jk(){return YT||(YT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bA=new WeakMap,im=new WeakMap,wA=new WeakMap,Mp=new WeakMap,qm=new WeakMap;function Zk(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Uo(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&bA.set(t,n)}).catch(()=>{}),qm.set(e,n),e}function eV(n){if(im.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});im.set(n,e)}let sm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return im.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Uo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tV(n){sm=n(sm)}function nV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Dp(this),e,...t);return wA.set(i,e.sort?e.sort():[e]),Uo(i)}:jk().includes(n)?function(...e){return n.apply(Dp(this),e),Uo(bA.get(this))}:function(...e){return Uo(n.apply(Dp(this),e))}}function iV(n){return typeof n=="function"?nV(n):(n instanceof IDBTransaction&&eV(n),Xk(n,Wk())?new Proxy(n,sm):n)}function Uo(n){if(n instanceof IDBRequest)return Zk(n);if(Mp.has(n))return Mp.get(n);const e=iV(n);return e!==n&&(Mp.set(n,e),qm.set(e,n)),e}const Dp=n=>qm.get(n);function sV(n,e,{blocked:t,upgrade:i,blocking:r,terminated:l}={}){const u=indexedDB.open(n,e),f=Uo(u);return i&&u.addEventListener("upgradeneeded",g=>{i(Uo(u.result),g.oldVersion,g.newVersion,Uo(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const oV=["get","getKey","getAll","getAllKeys","count"],rV=["put","add","delete","clear"],Pp=new Map;function $T(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pp.get(e))return Pp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=rV.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||oV.includes(t)))return;const l=async function(u,...f){const g=this.transaction(u,r?"readwrite":"readonly");let h=g.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),r&&g.done]))[0]};return Pp.set(e,l),l}tV(n=>({...n,get:(e,t,i)=>$T(e,t)||n.get(e,t,i),has:(e,t)=>!!$T(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lV(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function lV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const om="@firebase/app",JT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Gm("@firebase/app"),uV="@firebase/app-compat",cV="@firebase/analytics-compat",dV="@firebase/analytics",fV="@firebase/app-check-compat",hV="@firebase/app-check",pV="@firebase/auth",mV="@firebase/auth-compat",gV="@firebase/database",yV="@firebase/data-connect",vV="@firebase/database-compat",_V="@firebase/functions",TV="@firebase/functions-compat",EV="@firebase/installations",SV="@firebase/installations-compat",AV="@firebase/messaging",CV="@firebase/messaging-compat",bV="@firebase/performance",wV="@firebase/performance-compat",IV="@firebase/remote-config",xV="@firebase/remote-config-compat",RV="@firebase/storage",NV="@firebase/storage-compat",MV="@firebase/firestore",DV="@firebase/ai",PV="@firebase/firestore-compat",kV="firebase",VV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="[DEFAULT]",UV={[om]:"fire-core",[uV]:"fire-core-compat",[dV]:"fire-analytics",[cV]:"fire-analytics-compat",[hV]:"fire-app-check",[fV]:"fire-app-check-compat",[pV]:"fire-auth",[mV]:"fire-auth-compat",[gV]:"fire-rtdb",[yV]:"fire-data-connect",[vV]:"fire-rtdb-compat",[_V]:"fire-fn",[TV]:"fire-fn-compat",[EV]:"fire-iid",[SV]:"fire-iid-compat",[AV]:"fire-fcm",[CV]:"fire-fcm-compat",[bV]:"fire-perf",[wV]:"fire-perf-compat",[IV]:"fire-rc",[xV]:"fire-rc-compat",[RV]:"fire-gcs",[NV]:"fire-gcs-compat",[MV]:"fire-fst",[PV]:"fire-fst-compat",[DV]:"fire-vertex","fire-js":"fire-js",[kV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new Map,LV=new Map,am=new Map;function QT(n,e){try{n.container.addComponent(e)}catch(t){Ls.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function La(n){const e=n.name;if(am.has(e))return Ls.debug(`There were multiple attempts to register component ${e}.`),!1;am.set(e,n);for(const t of Ud.values())QT(t,n);for(const t of LV.values())QT(t,n);return!0}function zm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ii(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lo=new bu("app","Firebase",OV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=VV;function IA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:rm,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Lo.create("bad-app-name",{appName:String(r)});if(t||(t=EA()),!t)throw Lo.create("no-options");const l=Ud.get(r);if(l){if(wr(t,l.options)&&wr(i,l.config))return l;throw Lo.create("duplicate-app",{appName:r})}const u=new Kk(r);for(const g of am.values())u.addComponent(g);const f=new HV(t,i,u);return Ud.set(r,f),f}function xA(n=rm){const e=Ud.get(n);if(!e&&n===rm&&EA())return IA();if(!e)throw Lo.create("no-app",{appName:n});return e}function Oo(n,e,t){let i=UV[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ls.warn(u.join(" "));return}La(new Ir(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="firebase-heartbeat-database",FV=1,mu="firebase-heartbeat-store";let kp=null;function RA(){return kp||(kp=sV(BV,FV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Lo.create("idb-open",{originalErrorMessage:n.message})})),kp}async function GV(n){try{const t=(await RA()).transaction(mu),i=await t.objectStore(mu).get(NA(n));return await t.done,i}catch(e){if(e instanceof qs)Ls.warn(e.message);else{const t=Lo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ls.warn(t.message)}}}async function XT(n,e){try{const i=(await RA()).transaction(mu,"readwrite");await i.objectStore(mu).put(e,NA(n)),await i.done}catch(t){if(t instanceof qs)Ls.warn(t.message);else{const i=Lo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ls.warn(i.message)}}}function NA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=1024,zV=30;class KV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $V(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=WT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>zV){const u=JV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ls.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=WT(),{heartbeatsToSend:i,unsentEntries:r}=YV(this._heartbeatsCache.heartbeats),l=Vd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ls.warn(t),""}}}function WT(){return new Date().toISOString().substring(0,10)}function YV(n,e=qV){const t=[];let i=n.slice();for(const r of n){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),jT(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),jT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class $V{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pk()?kk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return XT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return XT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function jT(n){return Vd(JSON.stringify({version:2,heartbeats:n})).length}function JV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(n){La(new Ir("platform-logger",e=>new aV(e),"PRIVATE")),La(new Ir("heartbeat",e=>new KV(e),"PRIVATE")),Oo(om,JT,n),Oo(om,JT,"esm2020"),Oo("fire-js","")}QV("");function MA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XV=MA,DA=new bu("auth","Firebase",MA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new Gm("@firebase/auth");function WV(n,...e){Ld.logLevel<=Qe.WARN&&Ld.warn(`Auth (${Qa}): ${n}`,...e)}function gd(n,...e){Ld.logLevel<=Qe.ERROR&&Ld.error(`Auth (${Qa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n,...e){throw Ym(n,...e)}function Di(n,...e){return Ym(n,...e)}function Km(n,e,t){const i={...XV(),[e]:t};return new bu("auth","Firebase",i).create(e,{appName:n.name})}function Cr(n){return Km(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jV(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&us(n,"argument-error"),Km(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ym(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return DA.create(n,...e)}function De(n,e,...t){if(!n)throw Ym(e,...t)}function Ps(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gd(e),new Error(e)}function Os(n,e){n||Ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function ZV(){return ZT()==="http:"||ZT()==="https:"}function ZT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZV()||Rk()||"connection"in navigator)?navigator.onLine:!0}function tU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Os(t>e,"Short delay should be less than long delay!"),this.isMobile=wk()||Nk()}get(){return eU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n,e){Os(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sU=new Iu(3e4,6e4);function Jm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Xa(n,e,t,i,r={}){return kA(n,r,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=wu({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:g,...l};return xk()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Ja(n.emulatorConfig.host)&&(h.credentials="include"),PA.fetch()(await VA(n,n.config.apiHost,t,f),h)})}async function kA(n,e,t){n._canInitEmulator=!1;const i={...nU,...e};try{const r=new rU(n),l=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw ad(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[g,h]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ad(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw ad(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw ad(n,"user-disabled",u);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Km(n,_,h);us(n,_)}}catch(r){if(r instanceof qs)throw r;us(n,"network-request-failed",{message:String(r)})}}async function oU(n,e,t,i,r={}){const l=await Xa(n,e,t,i,r);return"mfaPendingCredential"in l&&us(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function VA(n,e,t,i){const r=`${e}${t}?${i}`,l=n,u=l.config.emulator?$m(n.config,r):`${n.config.apiScheme}://${r}`;return iU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class rU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Di(this.auth,"network-request-failed")),sU.get())})}}function ad(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Di(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(n,e){return Xa(n,"POST","/v1/accounts:delete",e)}async function Od(n,e){return Xa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lU(n,e=!1){const t=Wn(n),i=await t.getIdToken(e),r=Qm(i);De(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const l=typeof r.firebase=="object"?r.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:r,token:i,authTime:uu(Vp(r.auth_time)),issuedAtTime:uu(Vp(r.iat)),expirationTime:uu(Vp(r.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Vp(n){return Number(n)*1e3}function Qm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const r=_A(t);return r?JSON.parse(r):(gd("Failed to decode base64 JWT payload"),null)}catch(r){return gd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function eE(n){const e=Qm(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof qs&&uU(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function uU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(n){var T;const e=n.auth,t=await n.getIdToken(),i=await gu(n,Od(e,{idToken:t}));De(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const l=(T=r.providerUserInfo)!=null&&T.length?UA(r.providerUserInfo):[],u=fU(n.providerData,l),f=n.isAnonymous,g=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),h=f?g:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new um(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function dU(n){const e=Wn(n);await Hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fU(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function UA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(n,e){const t=await kA(n,{},async()=>{const i=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:l}=n.config,u=await VA(n,r,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return n.emulatorConfig&&Ja(n.emulatorConfig.host)&&(g.credentials="include"),PA.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pU(n,e){return Xa(n,"POST","/v2/accounts:revokeToken",Jm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=eE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:l}=await hU(e,t);this.updateTokensAndExpiration(i,r,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:l}=t,u=new Da;return i&&(De(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(De(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),l&&(De(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return Ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class xi{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new cU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new um(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await gu(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lU(this,e)}reload(){return dU(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Hd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ii(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await gu(this,aU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:w,providerData:O,stsTokenManager:P}=t;De(T&&P,e,"internal-error");const k=Da.fromJSON(this.name,P);De(typeof T=="string",e,"internal-error"),No(i,e.name),No(r,e.name),De(typeof S=="boolean",e,"internal-error"),De(typeof w=="boolean",e,"internal-error"),No(l,e.name),No(u,e.name),No(f,e.name),No(g,e.name),No(h,e.name),No(_,e.name);const K=new xi({uid:T,auth:e,email:r,emailVerified:S,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:k,createdAt:h,lastLoginAt:_});return O&&Array.isArray(O)&&(K.providerData=O.map(B=>({...B}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,i=!1){const r=new Da;r.updateFromServerResponse(t);const l=new xi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Hd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];De(r.localId!==void 0,"internal-error");const l=r.providerUserInfo!==void 0?UA(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(l!=null&&l.length),f=new Da;f.updateFromIdToken(i);const g=new xi({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new um(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,h),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;function ks(n){Os(n instanceof Function,"Expected a class definition");let e=tE.get(n);return e?(Os(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LA.type="NONE";const nE=LA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n,e,t){return`firebase:${n}:${e}:${t}`}class Pa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:l}=this.auth;this.fullUserKey=yd(this.userKey,r.apiKey,l),this.fullPersistenceKey=yd("persistence",r.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Od(this.auth,{idToken:e}).catch(()=>{});return t?xi._fromGetAccountInfoResponse(this.auth,t,e):null}return xi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Pa(ks(nE),e,i);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let l=r[0]||ks(nE);const u=yd(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const _=await h._get(u);if(_){let T;if(typeof _=="string"){const S=await Od(e,{idToken:_}).catch(()=>{});if(!S)break;T=await xi._fromGetAccountInfoResponse(e,S,_)}else T=xi._fromJSON(e,_);h!==l&&(f=T),l=h;break}}catch{}const g=r.filter(h=>h._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Pa(l,e,i):(l=g[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==l)try{await h._remove(u)}catch{}})),new Pa(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qA(e))return"Blackberry";if(zA(e))return"Webos";if(HA(e))return"Safari";if((e.includes("chrome/")||BA(e))&&!e.includes("edge/"))return"Chrome";if(GA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OA(n=bn()){return/firefox\//i.test(n)}function HA(n=bn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BA(n=bn()){return/crios\//i.test(n)}function FA(n=bn()){return/iemobile/i.test(n)}function GA(n=bn()){return/android/i.test(n)}function qA(n=bn()){return/blackberry/i.test(n)}function zA(n=bn()){return/webos/i.test(n)}function Xm(n=bn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mU(n=bn()){var e;return Xm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function gU(){return Mk()&&document.documentMode===10}function KA(n=bn()){return Xm(n)||GA(n)||zA(n)||qA(n)||/windows phone/i.test(n)||FA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n,e=[]){let t;switch(n){case"Browser":t=iE(bn());break;case"Worker":t=`${iE(bn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const g=e(l);u(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(n,e={}){return Xa(n,"GET","/v2/passwordPolicy",Jm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=6;class TU{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_U,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sE(this),this.idTokenSubscription=new sE(this),this.beforeStateQueue=new yU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ks(t)),this._initializationPromise=this.queue(async()=>{var i,r,l;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Od(this,{idToken:e}),i=await xi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ii(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===f)&&(g!=null&&g.user)&&(i=g.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ii(this.app))return Promise.reject(Cr(this));const t=e?Wn(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ii(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ii(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ks(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vU(this),t=new TU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await pU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ks(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[ks(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,r);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&WV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function cf(n){return Wn(n)}class sE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hk(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SU(n){Wm=n}function AU(n){return Wm.loadJS(n)}function CU(){return Wm.gapiScript}function bU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(n,e){const t=zm(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),l=t.getOptions();if(wr(l,e??{}))return r;us(r,"already-initialized")}return t.initialize({options:e})}function IU(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ks);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function xU(n,e,t){const i=cf(n);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,l=$A(e),{host:u,port:f}=RU(e),g=f===null?"":`:${f}`,h={url:`${l}//${u}${g}/`},_=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(wr(h,i.config.emulator)&&wr(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ja(u)?(AA(`${l}//${u}${g}`),CA("Auth",!0)):NU()}function $A(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function RU(n){const e=$A(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const l=r[1];return{host:l,port:oE(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:oE(u)}}}function oE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function NU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ps("not implemented")}_getIdTokenResponse(e){return Ps("not implemented")}_linkToIdToken(e,t){return Ps("not implemented")}_getReauthenticationResolver(e){return Ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n,e){return oU(n,"POST","/v1/accounts:signInWithIdp",Jm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="http://localhost";class xr extends JA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):us("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...l}=t;if(!i||!r)return null;const u=new xr(i,r);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ka(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ka(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ka(e,t)}buildRequest(){const e={requestUri:MU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends jm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends xu{constructor(){super("facebook.com")}static credential(e){return xr._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xr._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ds.credential(t,i)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends xu{constructor(){super("github.com")}static credential(e){return xr._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.GITHUB_SIGN_IN_METHOD="github.com";Do.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends xu{constructor(){super("twitter.com")}static credential(e,t){return xr._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Po.credential(t,i)}catch{return null}}}Po.TWITTER_SIGN_IN_METHOD="twitter.com";Po.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const l=await xi._fromIdTokenResponse(e,i,r),u=rE(i);return new Oa({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=rE(i);return new Oa({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function rE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends qs{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Bd(e,t,i,r)}}function QA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(n,l,e,i):l})}async function DU(n,e,t=!1){const i=await gu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Oa._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e,t=!1){const{auth:i}=n;if(Ii(i.app))return Promise.reject(Cr(i));const r="reauthenticate";try{const l=await gu(n,QA(i,r,e,n),t);De(l.idToken,i,"internal-error");const u=Qm(l.idToken);De(u,i,"internal-error");const{sub:f}=u;return De(n.uid===f,i,"user-mismatch"),Oa._forOperation(n,r,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&us(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(n,e,t=!1){if(Ii(n.app))return Promise.reject(Cr(n));const i="signIn",r=await QA(n,i,e),l=await Oa._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(l.user),l}function VU(n,e,t,i){return Wn(n).onIdTokenChanged(e,t,i)}function UU(n,e,t){return Wn(n).beforeAuthStateChanged(e,t)}function LU(n,e,t,i){return Wn(n).onAuthStateChanged(e,t,i)}function OU(n){return Wn(n).signOut()}const Fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=1e3,BU=10;class WA extends XA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);gU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,BU):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},HU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WA.type="LOCAL";const FU=WA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends XA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jA.type="SESSION";const ZA=jA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new df(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:l}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const f=Array.from(u).map(async h=>h(t.origin,l)),g=await GU(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let l,u;return new Promise((f,g)=>{const h=Zm("",20);r.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(){return window}function zU(n){ss().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(){return typeof ss().WorkerGlobalScope<"u"&&typeof ss().importScripts=="function"}async function KU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function $U(){return eC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebaseLocalStorageDb",JU=1,Gd="firebaseLocalStorage",nC="fbase_key";class Ru{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ff(n,e){return n.transaction([Gd],e?"readwrite":"readonly").objectStore(Gd)}function QU(){const n=indexedDB.deleteDatabase(tC);return new Ru(n).toPromise()}function cm(){const n=indexedDB.open(tC,JU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Gd,{keyPath:nC})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Gd)?e(i):(i.close(),await QU(),e(await cm()))})})}async function aE(n,e,t){const i=ff(n,!0).put({[nC]:e,value:t});return new Ru(i).toPromise()}async function XU(n,e){const t=ff(n,!1).get(e),i=await new Ru(t).toPromise();return i===void 0?null:i.value}function lE(n,e){const t=ff(n,!0).delete(e);return new Ru(t).toPromise()}const WU=800,jU=3;class iC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>jU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=df._getInstance($U()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await KU(),!this.activeServiceWorker)return;this.sender=new qU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cm();return await aE(e,Fd,"1"),await lE(e,Fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>aE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>XU(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const l=ff(r,!1).getAll();return new Ru(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:l}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(l)&&(this.notifyListeners(r,l),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iC.type="LOCAL";const ZU=iC;new Iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(n,e){return e?ks(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends JA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eL(n){return kU(n.auth,new eg(n),n.bypassAuthState)}function tL(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),PU(t,new eg(n),n.bypassAuthState)}async function nL(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),DU(t,new eg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t,i,r,l=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eL;case"linkViaPopup":case"linkViaRedirect":return nL;case"reauthViaPopup":case"reauthViaRedirect":return tL;default:us(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new Iu(2e3,1e4);async function sL(n,e,t){if(Ii(n.app))return Promise.reject(Di(n,"operation-not-supported-in-this-environment"));const i=cf(n);jV(n,e,jm);const r=sC(i,t);return new Sr(i,"signInViaPopup",e,r).executeNotNull()}class Sr extends oC{constructor(e,t,i,r,l){super(e,t,r,l),this.provider=i,this.authWindow=null,this.pollId=null,Sr.currentPopupAction&&Sr.currentPopupAction.cancel(),Sr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=Zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iL.get())};e()}}Sr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="pendingRedirect",vd=new Map;class rL extends oC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=vd.get(this.auth._key());if(!e){try{const i=await aL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}vd.set(this.auth._key(),e)}return this.bypassAuthState||vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aL(n,e){const t=cL(e),i=uL(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function lL(n,e){vd.set(n._key(),e)}function uL(n){return ks(n._redirectPersistence)}function cL(n){return yd(oL,n.config.apiKey,n.name)}async function dL(n,e,t=!1){if(Ii(n.app))return Promise.reject(Cr(n));const i=cf(n),r=sC(i,e),u=await new rL(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=600*1e3;class hL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!rC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fL&&this.cachedEventUids.clear(),this.cachedEventUids.has(uE(e))}saveEventToCache(e){this.cachedEventUids.add(uE(e)),this.lastProcessedEventTime=Date.now()}}function uE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function rC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(n,e={}){return Xa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yL=/^https?/;async function vL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mL(n);for(const t of e)try{if(_L(t))return}catch{}us(n,"unauthorized-domain")}function _L(n){const e=lm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!yL.test(t))return!1;if(gL.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Iu(3e4,6e4);function cE(){const n=ss().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function EL(n){return new Promise((e,t)=>{var r,l,u;function i(){cE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cE(),t(Di(n,"network-request-failed"))},timeout:TL.get()})}if((l=(r=ss().gapi)==null?void 0:r.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=ss().gapi)!=null&&u.load)i();else{const f=bU("iframefcb");return ss()[f]=()=>{gapi.load?i():t(Di(n,"network-request-failed"))},AU(`${CU()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw _d=null,e})}let _d=null;function SL(n){return _d=_d||EL(n),_d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new Iu(5e3,15e3),CL="__/auth/iframe",bL="emulator/auth/iframe",wL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xL(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$m(e,bL):`https://${n.config.authDomain}/${CL}`,i={apiKey:e.apiKey,appName:n.name,v:Qa},r=IL.get(n.config.apiHost);r&&(i.eid=r);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${wu(i).slice(1)}`}async function RL(n){const e=await SL(n),t=ss().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:xL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wL,dontclear:!0},i=>new Promise(async(r,l)=>{await i.restyle({setHideOnLeave:!1});const u=Di(n,"network-request-failed"),f=ss().setTimeout(()=>{l(u)},AL.get());function g(){ss().clearTimeout(f),r(i)}i.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ML=500,DL=600,PL="_blank",kL="http://localhost";class dE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VL(n,e,t,i=ML,r=DL){const l=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...NL,width:i.toString(),height:r.toString(),top:l,left:u},h=bn().toLowerCase();t&&(f=BA(h)?PL:t),OA(h)&&(e=e||kL,g.scrollbars="yes");const _=Object.entries(g).reduce((S,[w,O])=>`${S}${w}=${O},`,"");if(mU(h)&&f!=="_self")return UL(e||"",f),new dE(null);const T=window.open(e||"",f,_);De(T,n,"popup-blocked");try{T.focus()}catch{}return new dE(T)}function UL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="__/auth/handler",OL="emulator/auth/handler",HL=encodeURIComponent("fac");async function fE(n,e,t,i,r,l){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Qa,eventId:r};if(e instanceof jm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Ok(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))u[_]=T}if(e instanceof xu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const g=await n._getAppCheckToken(),h=g?`#${HL}=${encodeURIComponent(g)}`:"";return`${BL(n)}?${wu(f).slice(1)}${h}`}function BL({config:n}){return n.emulator?$m(n,OL):`https://${n.authDomain}/${LL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="webStorageSupport";class FL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZA,this._completeRedirectFn=dL,this._overrideRedirectResult=lL}async _openPopup(e,t,i,r){var u;Os((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await fE(e,t,i,lm(),r);return VL(e,l,Zm())}async _openRedirect(e,t,i,r){await this._originValidation(e);const l=await fE(e,t,i,lm(),r);return zU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:l}=this.eventManagers[t];return r?Promise.resolve(r):(Os(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await RL(e),i=new hL(e);return t.register("authEvent",r=>(De(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Up,{type:Up},r=>{var u;const l=(u=r==null?void 0:r[0])==null?void 0:u[Up];l!==void 0&&t(!!l),us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KA()||HA()||Xm()}}const GL=FL;var hE="@firebase/auth",pE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KL(n){La(new Ir("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YA(n)},h=new EU(i,r,l,g);return IU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),La(new Ir("auth-internal",e=>{const t=cf(e.getProvider("auth").getImmediate());return(i=>new qL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oo(hE,pE,zL(n)),Oo(hE,pE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=300,$L=SA("authIdTokenMaxAge")||YL;let mE=null;const JL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>$L)return;const r=t==null?void 0:t.token;mE!==r&&(mE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function QL(n=xA()){const e=zm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=wU(n,{popupRedirectResolver:GL,persistence:[ZU,FU,ZA]}),i=SA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=JL(l.toString());UU(t,u,()=>u(t.currentUser)),VU(t,f=>u(f))}}const r=TA("auth");return r&&xU(t,`http://${r}`),t}function XL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}SU({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const l=Di("internal-error");l.customData=r,t(l)},i.type="text/javascript",i.charset="UTF-8",XL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KL("Browser");var gE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ho,aC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function R(){}R.prototype=N.prototype,M.F=N.prototype,M.prototype=new R,M.prototype.constructor=M,M.D=function(L,V,q){for(var D=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)D[Be-2]=arguments[Be];return N.prototype[V].apply(L,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,N,R){R||(R=0);const L=Array(16);if(typeof N=="string")for(var V=0;V<16;++V)L[V]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(V=0;V<16;++V)L[V]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=M.g[0],R=M.g[1],V=M.g[2];let q=M.g[3],D;D=N+(q^R&(V^q))+L[0]+3614090360&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(V^N&(R^V))+L[1]+3905402710&4294967295,q=N+(D<<12&4294967295|D>>>20),D=V+(R^q&(N^R))+L[2]+606105819&4294967295,V=q+(D<<17&4294967295|D>>>15),D=R+(N^V&(q^N))+L[3]+3250441966&4294967295,R=V+(D<<22&4294967295|D>>>10),D=N+(q^R&(V^q))+L[4]+4118548399&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(V^N&(R^V))+L[5]+1200080426&4294967295,q=N+(D<<12&4294967295|D>>>20),D=V+(R^q&(N^R))+L[6]+2821735955&4294967295,V=q+(D<<17&4294967295|D>>>15),D=R+(N^V&(q^N))+L[7]+4249261313&4294967295,R=V+(D<<22&4294967295|D>>>10),D=N+(q^R&(V^q))+L[8]+1770035416&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(V^N&(R^V))+L[9]+2336552879&4294967295,q=N+(D<<12&4294967295|D>>>20),D=V+(R^q&(N^R))+L[10]+4294925233&4294967295,V=q+(D<<17&4294967295|D>>>15),D=R+(N^V&(q^N))+L[11]+2304563134&4294967295,R=V+(D<<22&4294967295|D>>>10),D=N+(q^R&(V^q))+L[12]+1804603682&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(V^N&(R^V))+L[13]+4254626195&4294967295,q=N+(D<<12&4294967295|D>>>20),D=V+(R^q&(N^R))+L[14]+2792965006&4294967295,V=q+(D<<17&4294967295|D>>>15),D=R+(N^V&(q^N))+L[15]+1236535329&4294967295,R=V+(D<<22&4294967295|D>>>10),D=N+(V^q&(R^V))+L[1]+4129170786&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^V&(N^R))+L[6]+3225465664&4294967295,q=N+(D<<9&4294967295|D>>>23),D=V+(N^R&(q^N))+L[11]+643717713&4294967295,V=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(V^q))+L[0]+3921069994&4294967295,R=V+(D<<20&4294967295|D>>>12),D=N+(V^q&(R^V))+L[5]+3593408605&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^V&(N^R))+L[10]+38016083&4294967295,q=N+(D<<9&4294967295|D>>>23),D=V+(N^R&(q^N))+L[15]+3634488961&4294967295,V=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(V^q))+L[4]+3889429448&4294967295,R=V+(D<<20&4294967295|D>>>12),D=N+(V^q&(R^V))+L[9]+568446438&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^V&(N^R))+L[14]+3275163606&4294967295,q=N+(D<<9&4294967295|D>>>23),D=V+(N^R&(q^N))+L[3]+4107603335&4294967295,V=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(V^q))+L[8]+1163531501&4294967295,R=V+(D<<20&4294967295|D>>>12),D=N+(V^q&(R^V))+L[13]+2850285829&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^V&(N^R))+L[2]+4243563512&4294967295,q=N+(D<<9&4294967295|D>>>23),D=V+(N^R&(q^N))+L[7]+1735328473&4294967295,V=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(V^q))+L[12]+2368359562&4294967295,R=V+(D<<20&4294967295|D>>>12),D=N+(R^V^q)+L[5]+4294588738&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^V)+L[8]+2272392833&4294967295,q=N+(D<<11&4294967295|D>>>21),D=V+(q^N^R)+L[11]+1839030562&4294967295,V=q+(D<<16&4294967295|D>>>16),D=R+(V^q^N)+L[14]+4259657740&4294967295,R=V+(D<<23&4294967295|D>>>9),D=N+(R^V^q)+L[1]+2763975236&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^V)+L[4]+1272893353&4294967295,q=N+(D<<11&4294967295|D>>>21),D=V+(q^N^R)+L[7]+4139469664&4294967295,V=q+(D<<16&4294967295|D>>>16),D=R+(V^q^N)+L[10]+3200236656&4294967295,R=V+(D<<23&4294967295|D>>>9),D=N+(R^V^q)+L[13]+681279174&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^V)+L[0]+3936430074&4294967295,q=N+(D<<11&4294967295|D>>>21),D=V+(q^N^R)+L[3]+3572445317&4294967295,V=q+(D<<16&4294967295|D>>>16),D=R+(V^q^N)+L[6]+76029189&4294967295,R=V+(D<<23&4294967295|D>>>9),D=N+(R^V^q)+L[9]+3654602809&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^V)+L[12]+3873151461&4294967295,q=N+(D<<11&4294967295|D>>>21),D=V+(q^N^R)+L[15]+530742520&4294967295,V=q+(D<<16&4294967295|D>>>16),D=R+(V^q^N)+L[2]+3299628645&4294967295,R=V+(D<<23&4294967295|D>>>9),D=N+(V^(R|~q))+L[0]+4096336452&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~V))+L[7]+1126891415&4294967295,q=N+(D<<10&4294967295|D>>>22),D=V+(N^(q|~R))+L[14]+2878612391&4294967295,V=q+(D<<15&4294967295|D>>>17),D=R+(q^(V|~N))+L[5]+4237533241&4294967295,R=V+(D<<21&4294967295|D>>>11),D=N+(V^(R|~q))+L[12]+1700485571&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~V))+L[3]+2399980690&4294967295,q=N+(D<<10&4294967295|D>>>22),D=V+(N^(q|~R))+L[10]+4293915773&4294967295,V=q+(D<<15&4294967295|D>>>17),D=R+(q^(V|~N))+L[1]+2240044497&4294967295,R=V+(D<<21&4294967295|D>>>11),D=N+(V^(R|~q))+L[8]+1873313359&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~V))+L[15]+4264355552&4294967295,q=N+(D<<10&4294967295|D>>>22),D=V+(N^(q|~R))+L[6]+2734768916&4294967295,V=q+(D<<15&4294967295|D>>>17),D=R+(q^(V|~N))+L[13]+1309151649&4294967295,R=V+(D<<21&4294967295|D>>>11),D=N+(V^(R|~q))+L[4]+4149444226&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~V))+L[11]+3174756917&4294967295,q=N+(D<<10&4294967295|D>>>22),D=V+(N^(q|~R))+L[2]+718787259&4294967295,V=q+(D<<15&4294967295|D>>>17),D=R+(q^(V|~N))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+q&4294967295}i.prototype.v=function(M,N){N===void 0&&(N=M.length);const R=N-this.blockSize,L=this.C;let V=this.h,q=0;for(;q<N;){if(V==0)for(;q<=R;)r(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<N;)if(L[V++]=M.charCodeAt(q++),V==this.blockSize){r(this,L),V=0;break}}else for(;q<N;)if(L[V++]=M[q++],V==this.blockSize){r(this,L),V=0;break}}this.h=V,this.o+=N},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;N=this.o*8;for(var R=M.length-8;R<M.length;++R)M[R]=N&255,N/=256;for(this.v(M),M=Array(16),N=0,R=0;R<4;++R)for(let L=0;L<32;L+=8)M[N++]=this.g[R]>>>L&255;return M};function l(M,N){var R=f;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=N(M)}function u(M,N){this.h=N;const R=[];let L=!0;for(let V=M.length-1;V>=0;V--){const q=M[V]|0;L&&q==N||(R[V]=q,L=!1)}this.g=R}var f={};function g(M){return-128<=M&&M<128?l(M,function(N){return new u([N|0],N<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return k(h(-M));const N=[];let R=1;for(let L=0;M>=R;L++)N[L]=M/R|0,R*=4294967296;return new u(N,0)}function _(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return k(_(M.substring(1),N));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(N,8));let L=T;for(let q=0;q<M.length;q+=8){var V=Math.min(8,M.length-q);const D=parseInt(M.substring(q,q+V),N);V<8?(V=h(Math.pow(N,V)),L=L.j(V).add(h(D))):(L=L.j(R),L=L.add(h(D)))}return L}var T=g(0),S=g(1),w=g(16777216);n=u.prototype,n.m=function(){if(P(this))return-k(this).m();let M=0,N=1;for(let R=0;R<this.g.length;R++){const L=this.i(R);M+=(L>=0?L:4294967296+L)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(O(this))return"0";if(P(this))return"-"+k(this).toString(M);const N=h(Math.pow(M,6));var R=this;let L="";for(;;){const V=oe(R,N).g;R=K(R,V.j(N));let q=((R.g.length>0?R.g[0]:R.h)>>>0).toString(M);if(R=V,O(R))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function O(M){if(M.h!=0)return!1;for(let N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function P(M){return M.h==-1}n.l=function(M){return M=K(this,M),P(M)?-1:O(M)?0:1};function k(M){const N=M.g.length,R=[];for(let L=0;L<N;L++)R[L]=~M.g[L];return new u(R,~M.h).add(S)}n.abs=function(){return P(this)?k(this):this},n.add=function(M){const N=Math.max(this.g.length,M.g.length),R=[];let L=0;for(let V=0;V<=N;V++){let q=L+(this.i(V)&65535)+(M.i(V)&65535),D=(q>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);L=D>>>16,q&=65535,D&=65535,R[V]=D<<16|q}return new u(R,R[R.length-1]&-2147483648?-1:0)};function K(M,N){return M.add(k(N))}n.j=function(M){if(O(this)||O(M))return T;if(P(this))return P(M)?k(this).j(k(M)):k(k(this).j(M));if(P(M))return k(this.j(k(M)));if(this.l(w)<0&&M.l(w)<0)return h(this.m()*M.m());const N=this.g.length+M.g.length,R=[];for(var L=0;L<2*N;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(let V=0;V<M.g.length;V++){const q=this.i(L)>>>16,D=this.i(L)&65535,Be=M.i(V)>>>16,at=M.i(V)&65535;R[2*L+2*V]+=D*at,B(R,2*L+2*V),R[2*L+2*V+1]+=q*at,B(R,2*L+2*V+1),R[2*L+2*V+1]+=D*Be,B(R,2*L+2*V+1),R[2*L+2*V+2]+=q*Be,B(R,2*L+2*V+2)}for(M=0;M<N;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=N;M<2*N;M++)R[M]=0;return new u(R,0)};function B(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function ee(M,N){this.g=M,this.h=N}function oe(M,N){if(O(N))throw Error("division by zero");if(O(M))return new ee(T,T);if(P(M))return N=oe(k(M),N),new ee(k(N.g),k(N.h));if(P(N))return N=oe(M,k(N)),new ee(k(N.g),N.h);if(M.g.length>30){if(P(M)||P(N))throw Error("slowDivide_ only works with positive integers.");for(var R=S,L=N;L.l(M)<=0;)R=fe(R),L=fe(L);var V=de(R,1),q=de(L,1);for(L=de(L,2),R=de(R,2);!O(L);){var D=q.add(L);D.l(M)<=0&&(V=V.add(R),q=D),L=de(L,1),R=de(R,1)}return N=K(M,V.j(N)),new ee(V,N)}for(V=T;M.l(N)>=0;){for(R=Math.max(1,Math.floor(M.m()/N.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=h(R),D=q.j(N);P(D)||D.l(M)>0;)R-=L,q=h(R),D=q.j(N);O(q)&&(q=S),V=V.add(q),M=K(M,D)}return new ee(V,M)}n.B=function(M){return oe(this,M).h},n.and=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let L=0;L<N;L++)R[L]=this.i(L)&M.i(L);return new u(R,this.h&M.h)},n.or=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let L=0;L<N;L++)R[L]=this.i(L)|M.i(L);return new u(R,this.h|M.h)},n.xor=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let L=0;L<N;L++)R[L]=this.i(L)^M.i(L);return new u(R,this.h^M.h)};function fe(M){const N=M.g.length+1,R=[];for(let L=0;L<N;L++)R[L]=M.i(L)<<1|M.i(L-1)>>>31;return new u(R,M.h)}function de(M,N){const R=N>>5;N%=32;const L=M.g.length-R,V=[];for(let q=0;q<L;q++)V[q]=N>0?M.i(q+R)>>>N|M.i(q+R+1)<<32-N:M.i(q+R);return new u(V,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,aC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,Ho=u}).apply(typeof gE<"u"?gE:typeof self<"u"?self:typeof window<"u"?window:{});var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lC,iu,uC,Td,dm,cC,dC,fC;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof ld=="object"&&ld];for(var E=0;E<m.length;++E){var b=m[E];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function r(m,E){if(E)e:{var b=i;m=m.split(".");for(var x=0;x<m.length-1;x++){var Y=m[x];if(!(Y in b))break e;b=b[Y]}m=m[m.length-1],x=b[m],E=E(x),E!=x&&E!=null&&e(b,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var b=[],x;for(x in E)Object.prototype.hasOwnProperty.call(E,x)&&b.push([x,E[x]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,b){return m.call.apply(m.bind,arguments)}function h(m,E,b){return h=g,h.apply(null,arguments)}function _(m,E){var b=Array.prototype.slice.call(arguments,1);return function(){var x=b.slice();return x.push.apply(x,arguments),m.apply(this,x)}}function T(m,E){function b(){}b.prototype=E.prototype,m.Z=E.prototype,m.prototype=new b,m.prototype.constructor=m,m.Ob=function(x,Y,W){for(var he=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)he[Oe-2]=arguments[Oe];return E.prototype[Y].apply(x,he)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const E=m.length;if(E>0){const b=Array(E);for(let x=0;x<E;x++)b[x]=m[x];return b}return[]}function O(m,E){for(let x=1;x<arguments.length;x++){const Y=arguments[x];var b=typeof Y;if(b=b!="object"?b:Y?Array.isArray(Y)?"array":b:"null",b=="array"||b=="object"&&typeof Y.length=="number"){b=m.length||0;const W=Y.length||0;m.length=b+W;for(let he=0;he<W;he++)m[b+he]=Y[he]}else m.push(Y)}}class P{constructor(E,b){this.i=E,this.j=b,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function k(m){u.setTimeout(()=>{throw m},0)}function K(){var m=M;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class B{constructor(){this.h=this.g=null}add(E,b){const x=ee.get();x.set(E,b),this.h?this.h.next=x:this.g=x,this.h=x}}var ee=new P(()=>new oe,m=>m.reset());class oe{constructor(){this.next=this.g=this.h=null}set(E,b){this.h=E,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,de=!1,M=new B,N=()=>{const m=Promise.resolve(void 0);fe=()=>{m.then(R)}};function R(){for(var m;m=K();){try{m.h.call(m.g)}catch(b){k(b)}var E=ee;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}de=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const b=()=>{};u.addEventListener("test",b,E),u.removeEventListener("test",b,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function Be(m,E){V.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(Be,V),Be.prototype.init=function(m,E){const b=this.type=m.type,x=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(b=="mouseover"?E=m.fromElement:b=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),X=0;function ce(m,E,b,x,Y){this.listener=m,this.proxy=null,this.src=E,this.type=b,this.capture=!!x,this.ha=Y,this.key=++X,this.da=this.fa=!1}function Ee(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function qe(m,E,b){for(const x in m)E.call(b,m[x],x,m)}function ze(m,E){for(const b in m)E.call(void 0,m[b],b,m)}function F(m){const E={};for(const b in m)E[b]=m[b];return E}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(m,E){let b,x;for(let Y=1;Y<arguments.length;Y++){x=arguments[Y];for(b in x)m[b]=x[b];for(let W=0;W<j.length;W++)b=j[W],Object.prototype.hasOwnProperty.call(x,b)&&(m[b]=x[b])}}function pe(m){this.src=m,this.g={},this.h=0}pe.prototype.add=function(m,E,b,x,Y){const W=m.toString();m=this.g[W],m||(m=this.g[W]=[],this.h++);const he=xe(m,E,x,Y);return he>-1?(E=m[he],b||(E.fa=!1)):(E=new ce(E,this.src,W,!!x,Y),E.fa=b,m.push(E)),E};function we(m,E){const b=E.type;if(b in m.g){var x=m.g[b],Y=Array.prototype.indexOf.call(x,E,void 0),W;(W=Y>=0)&&Array.prototype.splice.call(x,Y,1),W&&(Ee(E),m.g[b].length==0&&(delete m.g[b],m.h--))}}function xe(m,E,b,x){for(let Y=0;Y<m.length;++Y){const W=m[Y];if(!W.da&&W.listener==E&&W.capture==!!b&&W.ha==x)return Y}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),mt={};function lt(m,E,b,x,Y){if(Array.isArray(E)){for(let W=0;W<E.length;W++)lt(m,E[W],b,x,Y);return null}return b=zs(b),m&&m[at]?m.J(E,b,f(x)?!!x.capture:!1,Y):Mn(m,E,b,!1,x,Y)}function Mn(m,E,b,x,Y,W){if(!E)throw Error("Invalid event type");const he=f(Y)?!!Y.capture:!!Y;let Oe=an(m);if(Oe||(m[Le]=Oe=new pe(m)),b=Oe.add(E,b,x,he,W),b.proxy)return b;if(x=mi(),b.proxy=x,x.src=m,x.listener=b,m.addEventListener)q||(Y=he),Y===void 0&&(Y=!1),m.addEventListener(E.toString(),x,Y);else if(m.attachEvent)m.attachEvent(rn(E.toString()),x);else if(m.addListener&&m.removeListener)m.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return b}function mi(){function m(b){return E.call(m.src,m.listener,b)}const E=ki;return m}function Fn(m,E,b,x,Y){if(Array.isArray(E))for(var W=0;W<E.length;W++)Fn(m,E[W],b,x,Y);else x=f(x)?!!x.capture:!!x,b=zs(b),m&&m[at]?(m=m.i,W=String(E).toString(),W in m.g&&(E=m.g[W],b=xe(E,b,x,Y),b>-1&&(Ee(E[b]),Array.prototype.splice.call(E,b,1),E.length==0&&(delete m.g[W],m.h--)))):m&&(m=an(m))&&(E=m.g[E.toString()],m=-1,E&&(m=xe(E,b,x,Y)),(b=m>-1?E[m]:null)&&gi(b))}function gi(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[at])we(E.i,m);else{var b=m.type,x=m.proxy;E.removeEventListener?E.removeEventListener(b,x,m.capture):E.detachEvent?E.detachEvent(rn(b),x):E.addListener&&E.removeListener&&E.removeListener(x),(b=an(E))?(we(b,m),b.h==0&&(b.src=null,E[Le]=null)):Ee(m)}}}function rn(m){return m in mt?mt[m]:mt[m]="on"+m}function ki(m,E){if(m.da)m=!0;else{E=new Be(E,this);const b=m.listener,x=m.ha||m.src;m.fa&&gi(m),m=b.call(x,E)}return m}function an(m){return m=m[Le],m instanceof pe?m:null}var fs="__closure_events_fn_"+(Math.random()*1e9>>>0);function zs(m){return typeof m=="function"?m:(m[fs]||(m[fs]=function(E){return m.handleEvent(E)}),m[fs])}function bt(){L.call(this),this.i=new pe(this),this.M=this,this.G=null}T(bt,L),bt.prototype[at]=!0,bt.prototype.removeEventListener=function(m,E,b,x){Fn(this,m,E,b,x)};function wt(m,E){var b,x=m.G;if(x)for(b=[];x;x=x.G)b.push(x);if(m=m.M,x=E.type||E,typeof E=="string")E=new V(E,m);else if(E instanceof V)E.target=E.target||m;else{var Y=E;E=new V(x,m),ue(E,Y)}Y=!0;let W,he;if(b)for(he=b.length-1;he>=0;he--)W=E.g=b[he],Y=yi(W,x,!0,E)&&Y;if(W=E.g=m,Y=yi(W,x,!0,E)&&Y,Y=yi(W,x,!1,E)&&Y,b)for(he=0;he<b.length;he++)W=E.g=b[he],Y=yi(W,x,!1,E)&&Y}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const b=m.g[E];for(let x=0;x<b.length;x++)Ee(b[x]);delete m.g[E],m.h--}}this.G=null},bt.prototype.J=function(m,E,b,x){return this.i.add(String(m),E,!1,b,x)},bt.prototype.K=function(m,E,b,x){return this.i.add(String(m),E,!0,b,x)};function yi(m,E,b,x){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let Y=!0;for(let W=0;W<E.length;++W){const he=E[W];if(he&&!he.da&&he.capture==b){const Oe=he.listener,Ut=he.ha||he.src;he.fa&&we(m.i,he),Y=Oe.call(Ut,x)!==!1&&Y}}return Y&&!x.defaultPrevented}function Ks(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function Qo(m){m.g=Ks(()=>{m.g=null,m.i&&(m.i=!1,Qo(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class Pt extends L{constructor(E,b){super(),this.m=E,this.l=b,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Qo(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vi(m){L.call(this),this.h=m,this.g={}}T(Vi,L);var hs=[];function Ys(m){qe(m.g,function(E,b){this.g.hasOwnProperty(b)&&gi(E)},m),m.g={}}Vi.prototype.N=function(){Vi.Z.N.call(this),Ys(this)},Vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=u.JSON.stringify,Ui=u.JSON.parse,jn=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function $s(){}function vi(){}var Qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){V.call(this,"d")}T(kt,V);function vn(){V.call(this,"c")}T(vn,V);var Et={},Js=null;function Li(){return Js=Js||new bt}Et.Ia="serverreachability";function Qs(m){V.call(this,Et.Ia,m)}T(Qs,V);function Dn(m){const E=Li();wt(E,new Qs(E))}Et.STAT_EVENT="statevent";function le(m,E){V.call(this,Et.STAT_EVENT,m),this.stat=E}T(le,V);function _e(m){const E=Li();wt(E,new le(E,m))}Et.Ja="timingevent";function be(m,E){V.call(this,Et.Ja,m),this.size=E}T(be,V);function Se(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function nt(){this.g=!0}nt.prototype.ua=function(){this.g=!1};function ln(m,E,b,x,Y,W){m.info(function(){if(m.g)if(W){var he="",Oe=W.split("&");for(let ut=0;ut<Oe.length;ut++){var Ut=Oe[ut].split("=");if(Ut.length>1){const It=Ut[0];Ut=Ut[1];const ni=It.split("_");he=ni.length>=2&&ni[1]=="type"?he+(It+"="+Ut+"&"):he+(It+"=redacted&")}}}else he=null;else he=W;return"XMLHTTP REQ ("+x+") [attempt "+Y+"]: "+E+`
`+b+`
`+he})}function _n(m,E,b,x,Y,W,he){m.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+Y+"]: "+E+`
`+b+`
`+W+" "+he})}function Xt(m,E,b,x){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Xs(m,b)+(x?" "+x:"")})}function un(m,E){m.info(function(){return"TIMEOUT: "+E})}nt.prototype.info=function(){};function Xs(m,E){if(!m.g)return E;if(!E)return null;try{const W=JSON.parse(E);if(W){for(m=0;m<W.length;m++)if(Array.isArray(W[m])){var b=W[m];if(!(b.length<2)){var x=b[1];if(Array.isArray(x)&&!(x.length<1)){var Y=x[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let he=1;he<x.length;he++)x[he]=""}}}}return wn(W)}catch{return E}}var Oi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ws={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vt;function H(){}T(H,$s),H.prototype.g=function(){return new XMLHttpRequest},Vt=new H;function me(m){return encodeURIComponent(String(m))}function Re(m){var E=1;m=m.split(":");const b=[];for(;E>0&&m.length;)b.push(m.shift()),E--;return m.length&&b.push(m.join(":")),b}function je(m,E,b,x){this.j=m,this.i=E,this.l=b,this.S=x||1,this.V=new Vi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new it}function it(){this.i=null,this.g="",this.h=!1}var et={},Bt={};function Hi(m,E,b){m.M=1,m.A=Xo(Gt(E)),m.u=b,m.R=!0,Ur(m,null)}function Ur(m,E){m.F=Date.now(),Bi(m),m.B=Gt(m.A);var b=m.B,x=m.S;Array.isArray(x)||(x=[String(x)]),Br(b.i,"t",x),m.C=0,b=m.j.L,m.h=new it,m.g=Qu(m.j,b?E:null,!m.u),m.P>0&&(m.O=new Pt(h(m.Y,m,m.g),m.P)),E=m.V,b=m.g,x=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(hs[0]=Y.toString()),Y=hs);for(let W=0;W<Y.length;W++){const he=lt(b,Y[W],x||E.handleEvent,!1,E.h||E);if(!he)break;E.g[he.key]=he}E=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Dn(),ln(m.i,m.v,m.B,m.l,m.S,m.u)}je.prototype.ba=function(m){m=m.target;const E=this.O;E&&Ei(m)==3?E.j():this.Y(m)},je.prototype.Y=function(m){try{if(m==this.g)e:{const Oe=Ei(this.g),Ut=this.g.ya(),ut=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||Oe!=4||Ut==7||(Ut==8||ut<=0?Dn(3):Dn(2)),Fi(this);var E=this.g.ca();this.X=E;var b=If(this);if(this.o=E==200,_n(this.i,this.v,this.B,this.l,this.S,Oe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var x,Y=this.g;if((x=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(x)){var W=x;break t}}W=null}if(m=W)Xt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gi(this,m);else{this.o=!1,this.m=3,_e(12),Gn(this),Zn(this);break e}}if(this.R){m=!0;let It;for(;!this.K&&this.C<b.length;)if(It=Uu(this,b),It==Bt){Oe==4&&(this.m=4,_e(14),m=!1),Xt(this.i,this.l,null,"[Incomplete Response]");break}else if(It==et){this.m=4,_e(15),Xt(this.i,this.l,b,"[Invalid Chunk]"),m=!1;break}else Xt(this.i,this.l,It,null),Gi(this,It);if(Vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||b.length!=0||this.h.h||(this.m=1,_e(16),m=!1),this.o=this.o&&m,!m)Xt(this.i,this.l,b,"[Invalid Chunked Response]"),Gn(this),Zn(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),ml(he),he.P=!0,_e(11))}}else Xt(this.i,this.l,b,null),Gi(this,b);Oe==4&&Gn(this),this.o&&!this.K&&(Oe==4?Ku(this.j,this):(this.o=!1,Bi(this)))}else ms(this.g),E==400&&b.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),Gn(this),Zn(this)}}}catch{}finally{}};function If(m){if(!Vu(m))return m.g.la();const E=cn(m.g);if(E==="")return"";let b="";const x=E.length,Y=Ei(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Gn(m),Zn(m),"";m.h.i=new u.TextDecoder}for(let W=0;W<x;W++)m.h.h=!0,b+=m.h.i.decode(E[W],{stream:!(Y&&W==x-1)});return E.length=0,m.h.g+=b,m.C=0,m.h.g}function Vu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Uu(m,E){var b=m.C,x=E.indexOf(`
`,b);return x==-1?Bt:(b=Number(E.substring(b,x)),isNaN(b)?et:(x+=1,x+b>E.length?Bt:(E=E.slice(x,x+b),m.C=x+b,E)))}je.prototype.cancel=function(){this.K=!0,Gn(this)};function Bi(m){m.T=Date.now()+m.H,Lr(m,m.H)}function Lr(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Se(h(m.aa,m),E)}function Fi(m){m.D&&(u.clearTimeout(m.D),m.D=null)}je.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(un(this.i,this.B),this.M!=2&&(Dn(),_e(17)),Gn(this),this.m=2,Zn(this)):Lr(this,this.T-m)};function Zn(m){m.j.I==0||m.K||Ku(m.j,m)}function Gn(m){Fi(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Ys(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Gi(m,E){try{var b=m.j;if(b.I!=0&&(b.g==m||zi(b.h,m))){if(!m.L&&zi(b.h,m)&&b.I==3){try{var x=b.Ba.g.parse(E)}catch{x=null}if(Array.isArray(x)&&x.length==3){var Y=x;if(Y[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<m.F)Kr(b),oo(b);else break e;ir(b),_e(18)}}else b.xa=Y[1],0<b.xa-b.K&&Y[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Se(h(b.Va,b),6e3));qi(b.h)<=1&&b.ta&&(b.ta=void 0)}else Xi(b,11)}else if((m.L||b.g==m)&&Kr(b),!D(E))for(Y=b.Ba.g.parse(E),E=0;E<Y.length;E++){let ut=Y[E];const It=ut[0];if(!(It<=b.K))if(b.K=It,ut=ut[1],b.I==2)if(ut[0]=="c"){b.M=ut[1],b.ba=ut[2];const ni=ut[3];ni!=null&&(b.ka=ni,b.j.info("VER="+b.ka));const Wi=ut[4];Wi!=null&&(b.za=Wi,b.j.info("SVER="+b.za));const Si=ut[5];Si!=null&&typeof Si=="number"&&Si>0&&(x=1.5*Si,b.O=x,b.j.info("backChannelRequestTimeoutMs_="+x)),x=b;const Ai=m.g;if(Ai){const sr=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sr){var W=x.h;W.g||sr.indexOf("spdy")==-1&&sr.indexOf("quic")==-1&&sr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(il(W,W.h),W.h=null))}if(x.G){const Yr=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Yr&&(x.wa=Yr,ft(x.J,x.G,Yr))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-m.F,b.j.info("Handshake RTT: "+b.T+"ms")),x=b;var he=m;if(x.na=Ju(x,x.L?x.ba:null,x.W),he.L){sl(x.h,he);var Oe=he,Ut=x.O;Ut&&(Oe.H=Ut),Oe.D&&(Fi(Oe),Bi(Oe)),x.g=he}else qu(x);b.i.length>0&&Qi(b)}else ut[0]!="stop"&&ut[0]!="close"||Xi(b,7);else b.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Xi(b,7):hl(b):ut[0]!="noop"&&b.l&&b.l.qa(ut),b.A=0)}}Dn(4)}catch{}}var Ft=class{constructor(m,E){this.g=m,this.map=E}};function tl(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function qi(m){return m.h?1:m.g?m.g.size:0}function zi(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function il(m,E){m.g?m.g.add(E):m.h=E}function sl(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}tl.prototype.cancel=function(){if(this.i=ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ol(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const b of m.g.values())E=E.concat(b.G);return E}return w(m.i)}var Lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Or(m,E){if(m){m=m.split("&");for(let b=0;b<m.length;b++){const x=m[b].indexOf("=");let Y,W=null;x>=0?(Y=m[b].substring(0,x),W=m[b].substring(x+1)):Y=m[b],E(Y,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function qn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof qn?(this.l=m.l,tn(this,m.j),this.o=m.o,this.g=m.g,js(this,m.u),this.h=m.h,rl(this,Fu(m.i)),this.m=m.m):m&&(E=String(m).match(Lu))?(this.l=!1,tn(this,E[1]||"",!0),this.o=Ki(E[2]||""),this.g=Ki(E[3]||"",!0),js(this,E[4]),this.h=Ki(E[5]||"",!0),rl(this,E[6]||"",!0),this.m=Ki(E[7]||"")):(this.l=!1,this.i=new eo(null,this.l))}qn.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(Wo(E,Hr,!0),":");var b=this.g;return(b||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Wo(E,Hr,!0),"@"),m.push(me(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&m.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&m.push("/"),m.push(Wo(b,b.charAt(0)=="/"?al:Ou,!0))),(b=this.i.toString())&&m.push("?",b),(b=this.m)&&m.push("#",Wo(b,Hu)),m.join("")},qn.prototype.resolve=function(m){const E=Gt(this);let b=!!m.j;b?tn(E,m.j):b=!!m.o,b?E.o=m.o:b=!!m.g,b?E.g=m.g:b=m.u!=null;var x=m.h;if(b)js(E,m.u);else if(b=!!m.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var Y=E.h.lastIndexOf("/");Y!=-1&&(x=E.h.slice(0,Y+1)+x)}if(Y=x,Y==".."||Y==".")x="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){x=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const W=[];for(let he=0;he<Y.length;){const Oe=Y[he++];Oe=="."?x&&he==Y.length&&W.push(""):Oe==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),x&&he==Y.length&&W.push("")):(W.push(Oe),x=!0)}x=W.join("/")}else x=Y}return b?E.h=x:b=m.i.toString()!=="",b?rl(E,Fu(m.i)):b=!!m.m,b&&(E.m=m.m),E};function Gt(m){return new qn(m)}function tn(m,E,b){m.j=b?Ki(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function js(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function rl(m,E,b){E instanceof eo?(m.i=E,Fr(m.i,m.l)):(b||(E=Wo(E,Zs)),m.i=new eo(E,m.l))}function ft(m,E,b){m.i.set(E,b)}function Xo(m){return ft(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ki(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Wo(m,E,b){return typeof m=="string"?(m=encodeURI(m).replace(E,Pn),b&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Pn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Hr=/[#\/\?@]/g,Ou=/[#\?:]/g,al=/[#\?]/g,Zs=/[#\?@]/g,Hu=/#/g;function eo(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function kn(m){m.g||(m.g=new Map,m.h=0,m.i&&Or(m.i,function(E,b){m.add(decodeURIComponent(E.replace(/\+/g," ")),b)}))}n=eo.prototype,n.add=function(m,E){kn(this),this.i=null,m=to(this,m);let b=this.g.get(m);return b||this.g.set(m,b=[]),b.push(E),this.h+=1,this};function Bu(m,E){kn(m),E=to(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function ll(m,E){return kn(m),E=to(m,E),m.g.has(E)}n.forEach=function(m,E){kn(this),this.g.forEach(function(b,x){b.forEach(function(Y){m.call(E,Y,x,this)},this)},this)};function ul(m,E){kn(m);let b=[];if(typeof E=="string")ll(m,E)&&(b=b.concat(m.g.get(to(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)b=b.concat(m[E]);return b}n.set=function(m,E){return kn(this),this.i=null,m=to(this,m),ll(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=ul(this,m),m.length>0?String(m[0]):E):E};function Br(m,E,b){Bu(m,E),b.length>0&&(m.i=null,m.g.set(to(m,E),w(b)),m.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let x=0;x<E.length;x++){var b=E[x];const Y=me(b);b=ul(this,b);for(let W=0;W<b.length;W++){let he=Y;b[W]!==""&&(he+="="+me(b[W])),m.push(he)}}return this.i=m.join("&")};function Fu(m){const E=new eo;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function to(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Fr(m,E){E&&!m.j&&(kn(m),m.i=null,m.g.forEach(function(b,x){const Y=x.toLowerCase();x!=Y&&(Bu(this,x),Br(this,Y,b))},m)),m.j=E}function _i(m,E){const b=new nt;if(u.Image){const x=new Image;x.onload=_(ei,b,"TestLoadImage: loaded",!0,E,x),x.onerror=_(ei,b,"TestLoadImage: error",!1,E,x),x.onabort=_(ei,b,"TestLoadImage: abort",!1,E,x),x.ontimeout=_(ei,b,"TestLoadImage: timeout",!1,E,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=m}else E(!1)}function cl(m,E){const b=new nt,x=new AbortController,Y=setTimeout(()=>{x.abort(),ei(b,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:x.signal}).then(W=>{clearTimeout(Y),W.ok?ei(b,"TestPingServer: ok",!0,E):ei(b,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),ei(b,"TestPingServer: error",!1,E)})}function ei(m,E,b,x,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),x(b)}catch{}}function no(){this.g=new jn}function Yi(m){this.i=m.Sb||null,this.h=m.ab||!1}T(Yi,$s),Yi.prototype.g=function(){return new jo(this.i,this.h)};function jo(m,E){bt.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(jo,bt),n=jo.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Ti(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,io(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Gr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Gr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?io(this):Ti(this),this.readyState==3&&Gr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,io(this))},n.Na=function(m){this.g&&(this.response=m,io(this))},n.ga=function(){this.g&&io(this)};function io(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ti(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var b=E.next();!b.done;)b=b.value,m.push(b[0]+": "+b[1]),b=E.next();return m.join(`\r
`)};function Ti(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ti(m){let E="";return qe(m,function(b,x){E+=x,E+=":",E+=b,E+=`\r
`}),E}function Zo(m,E,b){e:{for(x in b){var x=!1;break e}x=!0}x||(b=ti(b),typeof m=="string"?b!=null&&me(b):ft(m,E,b))}function gt(m){bt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(gt,bt);var $i=/^https?$/i,dl=["POST","PUT"];n=gt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,b,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vt.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(W){er(this,W);return}if(m=b||"",b=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var Y in x)b.set(Y,x[Y]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const W of x.keys())b.set(W,x.get(W));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),Y=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(dl,E,void 0)>=0)||x||Y||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,he]of b)this.g.setRequestHeader(W,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(W){er(this,W)}};function er(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,fl(m),ps(m)}function fl(m){m.A||(m.A=!0,wt(m,"complete"),wt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,wt(this,"complete"),wt(this,"abort"),ps(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ps(this,!0)),gt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?tr(this):this.Xa())},n.Xa=function(){tr(this)};function tr(m){if(m.h&&typeof l<"u"){if(m.v&&Ei(m)==4)setTimeout(m.Ca.bind(m),0);else if(wt(m,"readystatechange"),Ei(m)==4){m.h=!1;try{const W=m.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var b;if(!(b=E)){var x;if(x=W===0){let he=String(m.D).match(Lu)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),x=!$i.test(he?he.toLowerCase():"")}b=x}if(b)wt(m,"complete"),wt(m,"success");else{m.o=6;try{var Y=Ei(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",fl(m)}}finally{ps(m)}}}}function ps(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const b=m.g;m.g=null,E||wt(m,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ei(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Ui(E)}};function cn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ms(m){const E={};m=(m.g&&Ei(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<m.length;x++){if(D(m[x]))continue;var b=Re(m[x]);const Y=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=E[Y]||[];E[Y]=W,W.push(b)}ze(E,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(m,E,b){return b&&b.internalChannelParams&&b.internalChannelParams[m]||E}function so(m){this.za=0,this.i=[],this.j=new nt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ji("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ji("baseRetryDelayMs",5e3,m),this.Za=Ji("retryDelaySeedMs",1e4,m),this.Ta=Ji("forwardChannelMaxRetries",2,m),this.va=Ji("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new tl(m&&m.concurrentRequestLimit),this.Ba=new no,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=so.prototype,n.ka=8,n.I=1,n.connect=function(m,E,b,x){_e(0),this.W=m,this.H=E||{},b&&x!==void 0&&(this.H.OSID=b,this.H.OAID=x),this.F=this.X,this.J=Ju(this,null,this.W),Qi(this)};function hl(m){if(qr(m),m.I==3){var E=m.V++,b=Gt(m.J);if(ft(b,"SID",m.M),ft(b,"RID",E),ft(b,"TYPE","terminate"),nr(m,b),E=new je(m,m.j,E),E.M=2,E.A=Xo(Gt(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=E.A,b=!0),b||(E.g=Qu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Bi(E)}$u(m)}function oo(m){m.g&&(ml(m),m.g.cancel(),m.g=null)}function qr(m){oo(m),m.v&&(u.clearTimeout(m.v),m.v=null),Kr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Qi(m){if(!nl(m.h)&&!m.m){m.m=!0;var E=m.Ea;fe||N(),de||(fe(),de=!0),M.add(E,m),m.D=0}}function zr(m,E){return qi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Se(h(m.Ea,m,E),Yu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new je(this,this.j,m);let W=this.o;if(this.U&&(W?(W=F(W),ue(W,this.U)):W=this.U),this.u!==null||this.R||(Y.J=W,W=null),this.S)e:{for(var E=0,b=0;b<this.i.length;b++){t:{var x=this.i[b];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(E+=x,E>4096){E=b;break e}if(E===4096||b===this.i.length-1){E=b+1;break e}}E=1e3}else E=1e3;E=Gu(this,Y,E),b=Gt(this.J),ft(b,"RID",m),ft(b,"CVER",22),this.G&&ft(b,"X-HTTP-Session-Id",this.G),nr(this,b),W&&(this.R?E="headers="+me(ti(W))+"&"+E:this.u&&Zo(b,this.u,W)),il(this.h,Y),this.Ra&&ft(b,"TYPE","init"),this.S?(ft(b,"$req",E),ft(b,"SID","null"),Y.U=!0,Hi(Y,b,null)):Hi(Y,b,E),this.I=2}}else this.I==3&&(m?pl(this,m):this.i.length==0||nl(this.h)||pl(this))};function pl(m,E){var b;E?b=E.l:b=m.V++;const x=Gt(m.J);ft(x,"SID",m.M),ft(x,"RID",b),ft(x,"AID",m.K),nr(m,x),m.u&&m.o&&Zo(x,m.u,m.o),b=new je(m,m.j,b,m.D+1),m.u===null&&(b.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Gu(m,b,1e3),b.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),il(m.h,b),Hi(b,x,E)}function nr(m,E){m.H&&qe(m.H,function(b,x){ft(E,x,b)}),m.l&&qe({},function(b,x){ft(E,x,b)})}function Gu(m,E,b){b=Math.min(m.i.length,b);const x=m.l?h(m.l.Ka,m.l,m):null;e:{var Y=m.i;let Oe=-1;for(;;){const Ut=["count="+b];Oe==-1?b>0?(Oe=Y[0].g,Ut.push("ofs="+Oe)):Oe=0:Ut.push("ofs="+Oe);let ut=!0;for(let It=0;It<b;It++){var W=Y[It].g;const ni=Y[It].map;if(W-=Oe,W<0)Oe=Math.max(0,Y[It].g-100),ut=!1;else try{W="req"+W+"_"||"";try{var he=ni instanceof Map?ni:Object.entries(ni);for(const[Wi,Si]of he){let Ai=Si;f(Si)&&(Ai=wn(Si)),Ut.push(W+Wi+"="+encodeURIComponent(Ai))}}catch(Wi){throw Ut.push(W+"type="+encodeURIComponent("_badmap")),Wi}}catch{x&&x(ni)}}if(ut){he=Ut.join("&");break e}}he=void 0}return m=m.i.splice(0,b),E.G=m,he}function qu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;fe||N(),de||(fe(),de=!0),M.add(E,m),m.A=0}}function ir(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Se(h(m.Da,m),Yu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,zu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Se(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),oo(this),zu(this))};function ml(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function zu(m){m.g=new je(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=Gt(m.na);ft(E,"RID","rpc"),ft(E,"SID",m.M),ft(E,"AID",m.K),ft(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&ft(E,"TO",m.ia),ft(E,"TYPE","xmlhttp"),nr(m,E),m.u&&m.o&&Zo(E,m.u,m.o),m.O&&(m.g.H=m.O);var b=m.g;m=m.ba,b.M=1,b.A=Xo(Gt(E)),b.u=null,b.R=!0,Ur(b,m)}n.Va=function(){this.C!=null&&(this.C=null,oo(this),ir(this),_e(19))};function Kr(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Ku(m,E){var b=null;if(m.g==E){Kr(m),ml(m),m.g=null;var x=2}else if(zi(m.h,E))b=E.G,sl(m.h,E),x=1;else return;if(m.I!=0){if(E.o)if(x==1){b=E.u?E.u.length:0,E=Date.now()-E.F;var Y=m.D;x=Li(),wt(x,new be(x,b)),Qi(m)}else qu(m);else if(Y=E.m,Y==3||Y==0&&E.X>0||!(x==1&&zr(m,E)||x==2&&ir(m)))switch(b&&b.length>0&&(E=m.h,E.i=E.i.concat(b)),Y){case 1:Xi(m,5);break;case 4:Xi(m,10);break;case 3:Xi(m,6);break;default:Xi(m,2)}}}function Yu(m,E){let b=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(b*=2),b*E}function Xi(m,E){if(m.j.info("Error code "+E),E==2){var b=h(m.bb,m),x=m.Ua;const Y=!x;x=new qn(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||tn(x,"https"),Xo(x),Y?_i(x.toString(),b):cl(x.toString(),b)}else _e(2);m.I=0,m.l&&m.l.pa(E),$u(m),qr(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function $u(m){if(m.I=0,m.ja=[],m.l){const E=ol(m.h);(E.length!=0||m.i.length!=0)&&(O(m.ja,E),O(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Ju(m,E,b){var x=b instanceof qn?Gt(b):new qn(b);if(x.g!="")E&&(x.g=E+"."+x.g),js(x,x.u);else{var Y=u.location;x=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;const W=new qn(null);x&&tn(W,x),E&&(W.g=E),Y&&js(W,Y),b&&(W.h=b),x=W}return b=m.G,E=m.wa,b&&E&&ft(x,b,E),ft(x,"VER",m.ka),nr(m,x),x}function Qu(m,E,b){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new gt(new Yi({ab:b})):new gt(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xu(){}n=Xu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ro(){}ro.prototype.g=function(m,E){return new In(m,E)};function In(m,E){bt.call(this),this.g=new so(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new gs(this)}T(In,bt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){hl(this.g)},In.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var b={};b.__data__=m,m=b}else this.v&&(b={},b.__data__=wn(m),m=b);E.i.push(new Ft(E.Ya++,m)),E.I==3&&Qi(E)},In.prototype.N=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,In.Z.N.call(this)};function Wu(m){kt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const b in E){m=b;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(Wu,kt);function ju(){vn.call(this),this.status=1}T(ju,vn);function gs(m){this.g=m}T(gs,Xu),gs.prototype.ra=function(){wt(this.g,"a")},gs.prototype.qa=function(m){wt(this.g,new Wu(m))},gs.prototype.pa=function(m){wt(this.g,new ju)},gs.prototype.oa=function(){wt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,fC=function(){return new ro},dC=function(){return Li()},cC=Et,dm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,Td=Oi,Ws.COMPLETE="complete",uC=Ws,vi.EventType=Qt,Qt.OPEN="a",Qt.CLOSE="b",Qt.ERROR="c",Qt.MESSAGE="d",bt.prototype.listen=bt.prototype.J,iu=vi,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,lC=gt}).apply(typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{});const yE="@firebase/firestore",vE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Gm("@firebase/firestore");function Ca(){return Rr.logLevel}function ye(n,...e){if(Rr.logLevel<=Qe.DEBUG){const t=e.map(tg);Rr.debug(`Firestore (${Wa}): ${n}`,...t)}}function Hs(n,...e){if(Rr.logLevel<=Qe.ERROR){const t=e.map(tg);Rr.error(`Firestore (${Wa}): ${n}`,...t)}}function Ha(n,...e){if(Rr.logLevel<=Qe.WARN){const t=e.map(tg);Rr.warn(`Firestore (${Wa}): ${n}`,...t)}}function tg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,hC(n,i,t)}function hC(n,e,t){let i=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Hs(i),new Error(i)}function dt(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||hC(e,r,i)}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends qs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Sn.UNAUTHENTICATED)))}shutdown(){}}class jL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ZL{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let i=this.i;const r=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Bo;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Bo,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},f=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Bo)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(dt(typeof i.accessToken=="string",31837,{l:i}),new pC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class e4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class t4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new e4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _E{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const i=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const r=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _E(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _E(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=i4(40);for(let l=0;l<r.length;++l)i.length<20&&r[l]<t&&(i+=e.charAt(r[l]%62))}return i}}function Xe(n,e){return n<e?-1:n>e?1:0}function fm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),l=e.charAt(i);if(r!==l)return Lp(r)===Lp(l)?Xe(r,l):Lp(r)?1:-1}return Xe(n.length,e.length)}const s4=55296,o4=57343;function Lp(n){const e=n.charCodeAt(0);return e>=s4&&e<=o4}function Ba(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="__name__";class is{constructor(e,t,i){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Me(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return is.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof is?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const l=is.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Xe(e.length,t.length)}static compareSegments(e,t){const i=is.isNumericId(e),r=is.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?is.extractNumericId(e).compare(is.extractNumericId(t)):fm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ho.fromString(e.substring(4,e.length-2))}}class Rt extends is{construct(e,t,i){return new Rt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new Rt(t)}static emptyPath(){return new Rt([])}}const r4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends is{construct(e,t,i){return new gn(e,t,i)}static isValidIdentifier(e){return r4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TE}static keyField(){return new gn([TE])}static fromServerFormat(e){const t=[];let i="",r=0;const l=()=>{if(i.length===0)throw new Ae(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new Ae(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ae(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(i+=f,r++):(l(),r++)}if(l(),u)throw new Ae(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(t)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(Rt.fromString(e))}static fromName(e){return new Ie(Rt.fromString(e).popFirst(5))}static empty(){return new Ie(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new Rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n,e,t){if(!t)throw new Ae(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function l4(n,e,t,i){if(e===!0&&i===!0)throw new Ae(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EE(n){if(!Ie.isDocumentKey(n))throw new Ae(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ig(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me(12329,{type:typeof n})}function Fo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ig(n);throw new Ae(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Nu(n,e){if(!mC(n))throw new Ae(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ae(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=-62135596800,AE=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*AE);return new Ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<SE)throw new Ae(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AE}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-SE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Jt("string",Ct._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Ct(0,0))}static max(){return new ke(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=-1;function u4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ke.fromTimestamp(i===1e9?new Ct(t+1,0):new Ct(t,i));return new Go(r,Ie.empty(),e)}function c4(n){return new Go(n.readTime,n.key,yu)}class Go{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Go(ke.min(),Ie.empty(),yu)}static max(){return new Go(ke.max(),Ie.empty(),yu)}}function d4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class h4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==f4)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let r=0,l=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++l,u&&l===r&&t()}),(g=>i(g)))})),u=!0,l===r&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((r=>r?se.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,l)=>{i.push(t.call(this,r,l))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,r)=>{const l=e.length,u=new Array(l);let f=0;for(let g=0;g<l;g++){const h=g;t(e[h]).next((_=>{u[h]=_,++f,f===l&&i(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new se(((i,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):i()};l()}))}}function p4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Za(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=-1;function pf(n){return n==null}function qd(n){return n===0&&1/n==-1/0}function m4(n){return typeof n=="number"&&Number.isInteger(n)&&!qd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="";function g4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CE(e)),e=y4(n.get(t),e);return CE(e)}function y4(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case gC:t+="";break;default:t+=l}}return t}function CE(n){return n+gC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new Nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ud(this.root,e,this.comparator,!0)}}class ud{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,i,r,l){this.key=e,this.value=t,this.color=i??mn.RED,this.left=r??mn.EMPTY,this.right=l??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,l){return new mn(e??this.key,t??this.value,i??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const l=i(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,i),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return mn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,i,r,l){return this}insert(e,t,i){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wE(this.data.getIterator())}getIteratorFrom(e){return new wE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new en(this.comparator);return t.data=e,t}}class wE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new Ri([])}unionWith(e){let t=new en(gn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ri(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new vC("Invalid base64 string: "+l):l}})(e);return new yn(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const v4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(n){if(dt(!!n,39018),typeof n=="string"){let e=0;const t=v4.exec(n);if(dt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ht(n.seconds),nanos:Ht(n.nanos)}}function Ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zo(n){return typeof n=="string"?yn.fromBase64String(n):yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="server_timestamp",TC="__type__",EC="__previous_value__",SC="__local_write_time__";function og(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[TC])==null?void 0:i.stringValue)===_C}function mf(n){const e=n.mapValue.fields[EC];return og(e)?mf(e):e}function vu(n){const e=qo(n.mapValue.fields[SC].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,t,i,r,l,u,f,g,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=h,this.isUsingEmulator=_}}const zd="(default)";class _u{constructor(e,t){this.projectId=e,this.database=t||zd}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database===zd}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="__type__",T4="__max__",cd={mapValue:{}},CC="__vector__",Kd="value";function Ko(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?og(n)?4:S4(n)?9007199254740991:E4(n)?10:11:Me(28295,{value:n})}function cs(n,e){if(n===e)return!0;const t=Ko(n);if(t!==Ko(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vu(n).isEqual(vu(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=qo(r.timestampValue),f=qo(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return zo(r.bytesValue).isEqual(zo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return Ht(r.geoPointValue.latitude)===Ht(l.geoPointValue.latitude)&&Ht(r.geoPointValue.longitude)===Ht(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Ht(r.integerValue)===Ht(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=Ht(r.doubleValue),f=Ht(l.doubleValue);return u===f?qd(u)===qd(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Ba(n.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},f=l.mapValue.fields||{};if(bE(u)!==bE(f))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(f[g]===void 0||!cs(u[g],f[g])))return!1;return!0})(n,e);default:return Me(52216,{left:n})}}function Tu(n,e){return(n.values||[]).find((t=>cs(t,e)))!==void 0}function Fa(n,e){if(n===e)return 0;const t=Ko(n),i=Ko(e);if(t!==i)return Xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Ht(l.integerValue||l.doubleValue),g=Ht(u.integerValue||u.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return IE(n.timestampValue,e.timestampValue);case 4:return IE(vu(n),vu(e));case 5:return fm(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=zo(l),g=zo(u);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),g=u.split("/");for(let h=0;h<f.length&&h<g.length;h++){const _=Xe(f[h],g[h]);if(_!==0)return _}return Xe(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=Xe(Ht(l.latitude),Ht(u.latitude));return f!==0?f:Xe(Ht(l.longitude),Ht(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xE(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,w,O,P;const f=l.fields||{},g=u.fields||{},h=(S=f[Kd])==null?void 0:S.arrayValue,_=(w=g[Kd])==null?void 0:w.arrayValue,T=Xe(((O=h==null?void 0:h.values)==null?void 0:O.length)||0,((P=_==null?void 0:_.values)==null?void 0:P.length)||0);return T!==0?T:xE(h,_)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===cd.mapValue&&u===cd.mapValue)return 0;if(l===cd.mapValue)return 1;if(u===cd.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),h=u.fields||{},_=Object.keys(h);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const S=fm(g[T],_[T]);if(S!==0)return S;const w=Fa(f[g[T]],h[_[T]]);if(w!==0)return w}return Xe(g.length,_.length)})(n.mapValue,e.mapValue);default:throw Me(23264,{he:t})}}function IE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=qo(n),i=qo(e),r=Xe(t.seconds,i.seconds);return r!==0?r:Xe(t.nanos,i.nanos)}function xE(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const l=Fa(t[r],i[r]);if(l)return l}return Xe(t.length,i.length)}function Ga(n){return hm(n)}function hm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=qo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const l of t.values||[])r?r=!1:i+=",",i+=hm(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const u of i)l?l=!1:r+=",",r+=`${u}:${hm(t.fields[u])}`;return r+"}"})(n.mapValue):Me(61005,{value:n})}function Ed(n){switch(Ko(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mf(n);return e?16+Ed(e):16;case 5:return 2*n.stringValue.length;case 6:return zo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,l)=>r+Ed(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Dr(i.fields,((l,u)=>{r+=l.length+Ed(u)})),r})(n.mapValue);default:throw Me(13486,{value:n})}}function pm(n){return!!n&&"integerValue"in n}function rg(n){return!!n&&"arrayValue"in n}function RE(n){return!!n&&"nullValue"in n}function NE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sd(n){return!!n&&"mapValue"in n}function E4(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[AC])==null?void 0:i.stringValue)===CC}function cu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Dr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=cu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cu(n.arrayValue.values[t]);return e}return{...n}}function S4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===T4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=gn.emptyPath(),i={},r=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,r),i={},r=[],t=f.popLast()}u?i[f.lastSegment()]=cu(u):r.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,r)}delete(e){const t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Sd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Dr(t,((r,l)=>e[r]=l));for(const r of i)delete e[r]}clone(){return new di(cu(this.value))}}function bC(n){const e=[];return Dr(n.fields,((t,i)=>{const r=new gn([t]);if(Sd(i)){const l=bC(i.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new Ri(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t,i,r,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new An(e,0,ke.min(),ke.min(),ke.min(),di.empty(),0)}static newFoundDocument(e,t,i,r){return new An(e,1,t,ke.min(),i,r,0)}static newNoDocument(e,t){return new An(e,2,t,ke.min(),ke.min(),di.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,ke.min(),ke.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t){this.position=e,this.inclusive=t}}function ME(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(l.field.isKeyField()?i=Ie.comparator(Ie.fromName(u.referenceValue),t.key):i=Fa(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function DE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t="asc"){this.field=e,this.dir=t}}function A4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{}class jt extends wC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new b4(e,t,i):t==="array-contains"?new x4(e,i):t==="in"?new R4(e,i):t==="not-in"?new N4(e,i):t==="array-contains-any"?new M4(e,i):new jt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new w4(e,i):new I4(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fa(t,this.value)):t!==null&&Ko(this.value)===Ko(t)&&this.matchesComparison(Fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends wC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ds(e,t)}matches(e){return IC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IC(n){return n.op==="and"}function xC(n){return C4(n)&&IC(n)}function C4(n){for(const e of n.filters)if(e instanceof ds)return!1;return!0}function mm(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+Ga(n.value);if(xC(n))return n.filters.map((e=>mm(e))).join(",");{const e=n.filters.map((t=>mm(t))).join(",");return`${n.op}(${e})`}}function RC(n,e){return n instanceof jt?(function(i,r){return r instanceof jt&&i.op===r.op&&i.field.isEqual(r.field)&&cs(i.value,r.value)})(n,e):n instanceof ds?(function(i,r){return r instanceof ds&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((l,u,f)=>l&&RC(u,r.filters[f])),!0):!1})(n,e):void Me(19439)}function NC(n){return n instanceof jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ga(t.value)}`})(n):n instanceof ds?(function(t){return t.op.toString()+" {"+t.getFilters().map(NC).join(" ,")+"}"})(n):"Filter"}class b4 extends jt{constructor(e,t,i){super(e,t,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class w4 extends jt{constructor(e,t){super(e,"in",t),this.keys=MC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class I4 extends jt{constructor(e,t){super(e,"not-in",t),this.keys=MC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function MC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ie.fromName(i.referenceValue)))}class x4 extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rg(t)&&Tu(t.arrayValue,this.value)}}class R4 extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tu(this.value.arrayValue,t)}}class N4 extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tu(this.value.arrayValue,t)}}class M4 extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Tu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,t=null,i=[],r=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function PE(n,e=null,t=[],i=[],r=null,l=null,u=null){return new D4(n,e,t,i,r,l,u)}function ag(n){const e=Ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>mm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),pf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ga(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ga(i))).join(",")),e.Te=t}return e.Te}function lg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!A4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DE(n.startAt,e.startAt)&&DE(n.endAt,e.endAt)}function gm(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t=null,i=[],r=[],l=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function P4(n,e,t,i,r,l,u,f){return new gf(n,e,t,i,r,l,u,f)}function yf(n){return new gf(n)}function kE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function k4(n){return n.collectionGroup!==null}function du(n){const e=Ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new en(gn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new $d(l,i))})),t.has(gn.keyField().canonicalString())||e.Ie.push(new $d(gn.keyField(),i))}return e.Ie}function os(n){const e=Ue(n);return e.Ee||(e.Ee=V4(e,du(n))),e.Ee}function V4(n,e){if(n.limitType==="F")return PE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new $d(r.field,l)}));const t=n.endAt?new Yd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Yd(n.startAt.position,n.startAt.inclusive):null;return PE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ym(n,e,t){return new gf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vf(n,e){return lg(os(n),os(e))&&n.limitType===e.limitType}function DC(n){return`${ag(os(n))}|lt:${n.limitType}`}function ba(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>NC(r))).join(", ")}]`),pf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Ga(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Ga(r))).join(",")),`Target(${i})`})(os(n))}; limitType=${n.limitType})`}function _f(n,e){return e.isFoundDocument()&&(function(i,r){const l=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ie.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,r){for(const l of du(i))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const l of i.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,f,g){const h=ME(u,f,g);return u.inclusive?h<=0:h<0})(i.startAt,du(i),r)||i.endAt&&!(function(u,f,g){const h=ME(u,f,g);return u.inclusive?h>=0:h>0})(i.endAt,du(i),r))})(n,e)}function U4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PC(n){return(e,t)=>{let i=!1;for(const r of du(n)){const l=L4(r,e,t);if(l!==0)return l;i=i||r.field.isKeyField()}return 0}}function L4(n,e,t){const i=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(l,u,f){const g=u.data.field(l),h=f.data.field(l);return g!==null&&h!==null?Fa(g,h):Me(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,l]of i)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Dr(this.inner,((t,i)=>{for(const[r,l]of i)e(r,l)}))}isEmpty(){return yC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new Nt(Ie.comparator);function Bs(){return O4}const kC=new Nt(Ie.comparator);function su(...n){let e=kC;for(const t of n)e=e.insert(t.key,t);return e}function VC(n){let e=kC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ar(){return fu()}function UC(){return fu()}function fu(){return new Pr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const H4=new Nt(Ie.comparator),B4=new en(Ie.comparator);function We(...n){let e=B4;for(const t of n)e=e.add(t);return e}const F4=new en(Xe);function G4(){return F4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qd(e)?"-0":e}}function LC(n){return{integerValue:""+n}}function q4(n,e){return m4(e)?LC(e):ug(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function z4(n,e,t){return n instanceof Jd?(function(r,l){const u={fields:{[TC]:{stringValue:_C},[SC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&og(l)&&(l=mf(l)),l&&(u.fields[EC]=l),{mapValue:u}})(t,e):n instanceof Eu?HC(n,e):n instanceof Su?BC(n,e):(function(r,l){const u=OC(r,l),f=VE(u)+VE(r.Ae);return pm(u)&&pm(r.Ae)?LC(f):ug(r.serializer,f)})(n,e)}function K4(n,e,t){return n instanceof Eu?HC(n,e):n instanceof Su?BC(n,e):t}function OC(n,e){return n instanceof Qd?(function(i){return pm(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Jd extends Tf{}class Eu extends Tf{constructor(e){super(),this.elements=e}}function HC(n,e){const t=FC(e);for(const i of n.elements)t.some((r=>cs(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Su extends Tf{constructor(e){super(),this.elements=e}}function BC(n,e){let t=FC(e);for(const i of n.elements)t=t.filter((r=>!cs(r,i)));return{arrayValue:{values:t}}}class Qd extends Tf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function VE(n){return Ht(n.integerValue||n.doubleValue)}function FC(n){return rg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Y4(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Eu&&r instanceof Eu||i instanceof Su&&r instanceof Su?Ba(i.elements,r.elements,cs):i instanceof Qd&&r instanceof Qd?cs(i.Ae,r.Ae):i instanceof Jd&&r instanceof Jd})(n.transform,e.transform)}class $4{constructor(e,t){this.version=e,this.transformResults=t}}class Vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vs}static exists(e){return new Vs(void 0,e)}static updateTime(e){return new Vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ef{}function GC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zC(n.key,Vs.none()):new Mu(n.key,n.data,Vs.none());{const t=n.data,i=di.empty();let r=new en(gn.comparator);for(let l of e.fields)if(!r.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),r=r.add(l)}return new kr(n.key,i,new Ri(r.toArray()),Vs.none())}}function J4(n,e,t){n instanceof Mu?(function(r,l,u){const f=r.value.clone(),g=LE(r.fieldTransforms,l,u.transformResults);f.setAll(g),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof kr?(function(r,l,u){if(!Ad(r.precondition,l))return void l.convertToUnknownDocument(u.version);const f=LE(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(qC(r)),g.setAll(f),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function hu(n,e,t,i){return n instanceof Mu?(function(l,u,f,g){if(!Ad(l.precondition,u))return f;const h=l.value.clone(),_=OE(l.fieldTransforms,g,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof kr?(function(l,u,f,g){if(!Ad(l.precondition,u))return f;const h=OE(l.fieldTransforms,g,u),_=u.data;return _.setAll(qC(l)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(l,u,f){return Ad(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function Q4(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),l=OC(i.transform,r||null);l!=null&&(t===null&&(t=di.empty()),t.set(i.field,l))}return t||null}function UE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ba(i,r,((l,u)=>Y4(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Mu extends Ef{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kr extends Ef{constructor(e,t,i,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function qC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function LE(n,e,t){const i=new Map;dt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,f=e.data.field(l.field);i.set(l.field,K4(u,f,t[r]))}return i}function OE(n,e,t){const i=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);i.set(r.field,z4(l,u,e))}return i}class zC extends Ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X4 extends Ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&J4(l,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=hu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=hu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=UC();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(r.key)?null:f;const g=GC(u,f);g!==null&&i.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,((t,i)=>UE(t,i)))&&Ba(this.baseMutations,e.baseMutations,((t,i)=>UE(t,i)))}}class cg{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){dt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return H4})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,i[u].version);return new cg(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,tt;function eO(n){switch(n){case re.OK:return Me(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Me(15467,{code:n})}}function KC(n){if(n===void 0)return Hs("GRPC error has no .code"),re.UNKNOWN;switch(n){case $t.OK:return re.OK;case $t.CANCELLED:return re.CANCELLED;case $t.UNKNOWN:return re.UNKNOWN;case $t.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case $t.INTERNAL:return re.INTERNAL;case $t.UNAVAILABLE:return re.UNAVAILABLE;case $t.UNAUTHENTICATED:return re.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case $t.NOT_FOUND:return re.NOT_FOUND;case $t.ALREADY_EXISTS:return re.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return re.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case $t.ABORTED:return re.ABORTED;case $t.OUT_OF_RANGE:return re.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return re.UNIMPLEMENTED;case $t.DATA_LOSS:return re.DATA_LOSS;default:return Me(39323,{code:n})}}(tt=$t||($t={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new Ho([4294967295,4294967295],0);function HE(n){const e=tO().encode(n),t=new aC;return t.update(e),new Uint8Array(t.digest())}function BE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ho([t,i],0),new Ho([r,l],0)]}class dg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ou(`Invalid padding: ${t}`);if(i<0)throw new ou(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ou(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ho.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Ho.fromNumber(i)));return r.compare(nO)===1&&(r=new Ho([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=HE(e),[i,r]=BE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,r,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new dg(l,r,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=HE(e),[i,r]=BE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,r,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,i,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Sf(ke.min(),r,new Nt(Xe),Bs(),We())}}class Du{constructor(e,t,i,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Du(i,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class YC{constructor(e,t){this.targetId=e,this.Ce=t}}class $C{constructor(e,t,i=yn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class FE{constructor(){this.ve=0,this.Fe=GE(),this.Me=yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),i=We();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Me(38017,{changeType:l})}})),new Du(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=GE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bs(),this.Je=dd(),this.He=dd(),this.Ye=new Nt(Xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(gm(l))if(i===0){const u=new Ie(l.path);this.et(t,u,An.newNoDocument(u,ke.min()))}else dt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),g=f?this.ct(f,e,u):1;if(g!==0){this.it(t);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:l=0}=t;let u,f;try{u=zo(i).toUint8Array()}catch(g){if(g instanceof vC)return Ha("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new dg(u,r,l)}catch(g){return Ha(g instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&gm(f.target)){const g=new Ie(f.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,An.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=We();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((g=>{const h=this.ot(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const r=new Sf(e,t,this.Ye,this.je,i);return this.je=Bs(),this.Je=dd(),this.He=dd(),this.Ye=new Nt(Xe),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new FE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new en(Xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new en(Xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new FE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function dd(){return new Nt(Ie.comparator)}function GE(){return new Nt(Ie.comparator)}const sO={asc:"ASCENDING",desc:"DESCENDING"},oO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rO={and:"AND",or:"OR"};class aO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vm(n,e){return n.useProto3Json||pf(e)?e:{value:e}}function Xd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lO(n,e){return Xd(n,e.toTimestamp())}function rs(n){return dt(!!n,49232),ke.fromTimestamp((function(t){const i=qo(t);return new Ct(i.seconds,i.nanos)})(n))}function fg(n,e){return _m(n,e).canonicalString()}function _m(n,e){const t=(function(r){return new Rt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function QC(n){const e=Rt.fromString(n);return dt(eb(e),10190,{key:e.toString()}),e}function Tm(n,e){return fg(n.databaseId,e.path)}function Op(n,e){const t=QC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(WC(t))}function XC(n,e){return fg(n.databaseId,e)}function uO(n){const e=QC(n);return e.length===4?Rt.emptyPath():WC(e)}function Em(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WC(n){return dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qE(n,e,t){return{name:Tm(n,e),fields:t.value.mapValue.fields}}function cO(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Me(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(h,_){return h.useProto3Json?(dt(_===void 0||typeof _=="string",58123),yn.fromBase64String(_||"")):(dt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),yn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const _=h.code===void 0?re.UNKNOWN:KC(h.code);return new Ae(_,h.message||"")})(u);t=new $C(i,r,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Op(n,i.document.name),l=rs(i.document.updateTime),u=i.document.createTime?rs(i.document.createTime):ke.min(),f=new di({mapValue:{fields:i.document.fields}}),g=An.newFoundDocument(r,l,u,f),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Cd(h,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Op(n,i.document),l=i.readTime?rs(i.readTime):ke.min(),u=An.newNoDocument(r,l),f=i.removedTargetIds||[];t=new Cd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Op(n,i.document),l=i.removedTargetIds||[];t=new Cd([],l,r,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:l}=i,u=new Z4(r,l),f=i.targetId;t=new YC(f,u)}}return t}function dO(n,e){let t;if(e instanceof Mu)t={update:qE(n,e.key,e.value)};else if(e instanceof zC)t={delete:Tm(n,e.key)};else if(e instanceof kr)t={update:qE(n,e.key,e.data),updateMask:TO(e.fieldMask)};else{if(!(e instanceof X4))return Me(16599,{Vt:e.type});t={verify:Tm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof Jd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Eu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Su)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Qd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Me(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:lO(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)})(n,e.precondition)),t}function fO(n,e){return n&&n.length>0?(dt(e!==void 0,14353),n.map((t=>(function(r,l){let u=r.updateTime?rs(r.updateTime):rs(l);return u.isEqual(ke.min())&&(u=rs(l)),new $4(u,r.transformResults||[])})(t,e)))):[]}function hO(n,e){return{documents:[XC(n,e.path)]}}function pO(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=XC(n,r);const l=(function(h){if(h.length!==0)return ZC(ds.create(h,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(h){if(h.length!==0)return h.map((_=>(function(S){return{field:wa(S.field),direction:yO(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=vm(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function mO(n){let e=uO(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){dt(i===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const S=jC(T);return S instanceof ds&&xC(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(O){return new $d(Ia(O.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,pf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,w=T.values||[];return new Yd(w,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,w=T.values||[];return new Yd(w,S)})(t.endAt)),P4(e,r,u,l,f,"F",g,h)}function gO(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ia(t.unaryFilter.field);return jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ia(t.unaryFilter.field);return jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ia(t.unaryFilter.field);return jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ia(t.unaryFilter.field);return jt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return jt.create(Ia(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ds.create(t.compositeFilter.filters.map((i=>jC(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(t.compositeFilter.op))})(n):Me(30097,{filter:n})}function yO(n){return sO[n]}function vO(n){return oO[n]}function _O(n){return rO[n]}function wa(n){return{fieldPath:n.canonicalString()}}function Ia(n){return gn.fromServerFormat(n.fieldPath)}function ZC(n){return n instanceof jt?(function(t){if(t.op==="=="){if(NE(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NAN"}};if(RE(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NE(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NOT_NAN"}};if(RE(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wa(t.field),op:vO(t.op),value:t.value}}})(n):n instanceof ds?(function(t){const i=t.getFilters().map((r=>ZC(r)));return i.length===1?i[0]:{compositeFilter:{op:_O(t.op),filters:i}}})(n):Me(54877,{filter:n})}function TO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function eb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t,i,r,l=ke.min(),u=ke.min(),f=yn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.yt=e}}function SO(n){const e=mO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.Cn=new CO}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Go.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Go.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class CO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new en(Rt.comparator),l=!r.has(i);return this.index[t]=r.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new en(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tb=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(tb,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qa(0)}static cr(){return new qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="LruGarbageCollector",bO=1048576;function YE([n,e],[t,i]){const r=Xe(n,t);return r===0?Xe(e,i):r}class wO{constructor(e){this.Ir=e,this.buffer=new en(YE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();YE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(KE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Za(t)?ye(KE,"Ignoring IndexedDB error during garbage collection: ",t):await ja(t)}await this.Vr(3e5)}))}}class xO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(hf.ce);const i=new wO(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(zE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,l,u,f,g,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),Ca()<=Qe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(f-u)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(h-g)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function RO(n,e){return new xO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(){this.changes=new Pr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&hu(i.mutation,r,Ri.empty(),Ct.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,We()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=We()){const r=Ar();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((l=>{let u=su();return l.forEach(((f,g)=>{u=u.insert(f,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Ar();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,We())))}populateOverlays(e,t,i){const r=[];return i.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,r){let l=Bs();const u=fu(),f=(function(){return fu()})();return t.forEach(((g,h)=>{const _=i.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof kr)?l=l.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),hu(_.mutation,h,_.mutation.getFieldMask(),Ct.now())):u.set(h.key,Ri.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>f.set(h,new MO(_,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=fu();let r=new Nt(((u,f)=>u-f)),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((g=>{const h=t.get(g);if(h===null)return;let _=i.get(g)||Ri.empty();_=f.applyToLocalView(h,_),i.set(g,_);const T=(r.get(f.batchId)||We()).add(g);r=r.insert(f.batchId,T)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),h=g.key,_=g.value,T=UC();_.forEach((S=>{if(!l.has(S)){const w=GC(t.get(S),i.get(S));w!==null&&T.set(S,w),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):k4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-l.size):se.resolve(Ar());let f=yu,g=l;return u.next((h=>se.forEach(h,((_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{g=g.insert(_,S)}))))).next((()=>this.populateOverlays(e,h,l))).next((()=>this.computeViews(e,g,h,We()))).next((_=>({batchId:f,changes:VC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((i=>{let r=su();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const l=t.collectionGroup;let u=su();return this.indexManager.getCollectionParents(e,l).next((f=>se.forEach(f,(g=>{const h=(function(T,S){return new gf(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((_=>{_.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,r)))).next((u=>{l.forEach(((g,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,An.newInvalidDocument(_)))}));let f=su();return u.forEach(((g,h)=>{const _=l.get(g);_!==void 0&&hu(_.mutation,h,Ri.empty(),Ct.now()),_f(t,h)&&(f=f.insert(g,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:rs(r.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:SO(r.bundledQuery),readTime:rs(r.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.overlays=new Nt(Ie.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ar();return se.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&i.set(r,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const r=Ar(),l=t.length+1,u=new Ie(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,h=g.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===l&&g.largestBatchId>i&&r.set(g.getKey(),g)}return se.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let l=new Nt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=l.get(h.largestBatchId);_===null&&(_=Ar(),l=l.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const f=Ar(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,_)=>f.set(h,_))),!(f.size()>=r)););return se.resolve(f)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new j4(t,i));let l=this.qr.get(t);l===void 0&&(l=We(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.Qr=new en(sn.$r),this.Ur=new en(sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new sn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new sn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ie(new Rt([])),i=new sn(t,e),r=new sn(t,e+1),l=[];return this.Ur.forEachInRange([i,r],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ie(new Rt([])),i=new sn(t,e),r=new sn(t,e+1);let l=We();return this.Ur.forEachInRange([i,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new sn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class sn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ie.comparator(e.key,t.key)||Xe(e.Yr,t.Yr)}static Kr(e,t){return Xe(e.Yr,t.Yr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new en(sn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new W4(l,t,i,r);this.mutationQueue.push(u);for(const f of r)this.Zr=this.Zr.add(new sn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),l=r<0?0:r;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?sg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new sn(t,0),r=new sn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,r],(u=>{const f=this.Xr(u.Yr);l.push(f)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new en(Xe);return t.forEach((r=>{const l=new sn(r,0),u=new sn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{i=i.add(f.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let l=i;Ie.isDocumentKey(l)||(l=l.child(""));const u=new sn(new Ie(l),0);let f=new en(Xe);return this.Zr.forEachWhile((g=>{const h=g.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(f=f.add(g.Yr)),!0)}),u),se.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){dt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(r=>{const l=new sn(r.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new sn(t,0),r=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.ri=e,this.docs=(function(){return new Nt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),l=r?r.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let i=Bs();return t.forEach((r=>{const l=this.docs.get(r);i=i.insert(r,l?l.document.mutableCopy():An.newInvalidDocument(r))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let l=Bs();const u=t.path,f=new Ie(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:h,value:{document:_}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||d4(c4(_),i)<=0||(r.has(_.key)||_f(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,i,r){Me(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new OO(this)}getSize(e){return se.resolve(this.size)}}class OO extends NO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.persistence=e,this.si=new Pr((t=>ag(t)),lg),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new hg,this.targetCount=0,this.ai=qa.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new qa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let r=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),se.waitFor(l).next((()=>r))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.ui={},this.overlays={},this.ci=new hf(0),this.li=!1,this.li=!0,this.hi=new VO,this.referenceDelegate=e(this),this.Pi=new HO(this),this.indexManager=new AO,this.remoteDocumentCache=(function(r){return new LO(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new EO(t),this.Ii=new PO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new UO(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const r=new BO(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class BO extends h4{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Ri=new hg,this.Vi=null}static mi(e){return new pg(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const r=Ie.fromPath(i);return this.gi(e,r).next((l=>{l||t.removeEntry(r,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Wd{constructor(e,t){this.persistence=e,this.pi=new Pr((i=>g4(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=RO(this,t)}static mi(e,t){return new Wd(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,r)=>this.br(e,i,r).next((l=>l?se.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,l.removeEntry(u,ke.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ed(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=We(),r=We();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new mg(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Dk()?8:p4(bn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,r,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new FO;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(Ca()<=Qe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",ba(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Ca()<=Qe.DEBUG&&ye("QueryEngine","Query:",ba(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Ca()<=Qe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",ba(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,os(t))):se.resolve())}ys(e,t){if(kE(t))return se.resolve(null);let i=os(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=ym(t,null,"F"),i=os(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=We(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const h=this.Ds(t,f);return this.Cs(t,h,u,g.readTime)?this.ys(e,ym(t,null,"F")):this.vs(e,h,t,g)}))))})))))}ws(e,t,i,r){return kE(t)||r.isEqual(ke.min())?se.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,r)?se.resolve(null):(Ca()<=Qe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ba(t)),this.vs(e,u,t,u4(r,yu)).next((f=>f)))}))}Ds(e,t){let i=new en(PC(e));return t.forEach(((r,l)=>{_f(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,i){return Ca()<=Qe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",ba(t)),this.ps.getDocumentsMatchingQuery(e,t,Go.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="LocalStore",qO=3e8;class zO{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Nt(Xe),this.xs=new Pr((l=>ag(l)),lg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function KO(n,e,t,i){return new zO(n,e,t,i)}async function ib(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let g=We();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}for(const h of l){f.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function YO(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,h,_){const T=h.batch,S=T.keys();let w=se.resolve();return S.forEach((O=>{w=w.next((()=>_.getEntry(g,O))).next((P=>{const k=h.docVersions.get(O);dt(k!==null,48541),P.version.compareTo(k)<0&&(T.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),_.addEntry(P)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=We();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(g=g.add(f.batch.mutations[h].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function sb(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function $O(n,e){const t=Ue(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const f=[];e.targetChanges.forEach(((_,T)=>{const S=r.get(T);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(yn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,i)),r=r.insert(T,w),(function(P,k,K){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=qO?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,w,_)&&f.push(t.Pi.updateTargetData(l,w))}));let g=Bs(),h=We();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(JO(l,u,e.documentUpdates).next((_=>{g=_.ks,h=_.qs}))),!i.isEqual(ke.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return se.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,h))).next((()=>g))})).then((l=>(t.Ms=r,l)))}function JO(n,e,t){let i=We(),r=We();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=Bs();return t.forEach(((f,g)=>{const h=l.get(f);g.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(f)),g.isNoDocument()&&g.version.isEqual(ke.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):ye(gg,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",g.version)})),{ks:u,qs:r}}))}function QO(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=sg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function XO(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((l=>l?(r=l,se.resolve(r)):t.Pi.allocateTargetId(i).next((u=>(r=new Vo(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Sm(n,e,t){const i=Ue(n),r=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Za(u))throw u;ye(gg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function $E(n,e,t){const i=Ue(n);let r=ke.min(),l=We();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,_){const T=Ue(g),S=T.xs.get(_);return S!==void 0?se.resolve(T.Ms.get(S)):T.Pi.getTargetData(h,_)})(i,u,os(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?r:ke.min(),t?l:We()))).next((f=>(WO(i,U4(e),f),{documents:f,Qs:l})))))}function WO(n,e,t){let i=n.Os.get(e)||ke.min();t.forEach(((r,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class JE{constructor(){this.activeTargetIds=G4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jO{constructor(){this.Mo=new JE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="ConnectivityMonitor";class XE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(QE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(QE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd=null;function Am(){return fd===null?fd=(function(){return 268435456+Math.round(2147483648*Math.random())})():fd++,"0x"+fd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="RestConnection",e5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===zd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,l){const u=Am(),f=this.zo(e,t.toUriEncodedString());ye(Hp,`Sending RPC '${e}' ${u}:`,f,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,l);const{host:h}=new URL(f),_=Ja(h);return this.Jo(e,f,g,i,_).then((T=>(ye(Hp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Ha(Hp,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,r,l,u){return this.Go(e,t,i,r,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),i&&i.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const i=e5[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class i5 extends t5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,l){const u=Am();return new Promise(((f,g)=>{const h=new lC;h.setWithCredentials(!0),h.listenOnce(uC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Td.NO_ERROR:const T=h.getResponseJson();ye(En,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case Td.TIMEOUT:ye(En,`RPC '${e}' ${u} timed out`),g(new Ae(re.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const S=h.getStatus();if(ye(En,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const O=w==null?void 0:w.error;if(O&&O.status&&O.message){const P=(function(K){const B=K.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(B)>=0?B:re.UNKNOWN})(O.status);g(new Ae(P,O.message))}else g(new Ae(re.UNKNOWN,"Server responded with status "+h.getStatus()))}else g(new Ae(re.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ye(En,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ye(En,`RPC '${e}' ${u} sending request:`,r),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const r=Am(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fC(),f=dC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(g.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const _=l.join("");ye(En,`Creating RPC '${e}' stream ${r}: ${_}`,g);const T=u.createWebChannel(_,g);this.I_(T);let S=!1,w=!1;const O=new n5({Yo:k=>{w?ye(En,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(S||(ye(En,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),ye(En,`RPC '${e}' stream ${r} sending:`,k),T.send(k))},Zo:()=>T.close()}),P=(k,K,B)=>{k.listen(K,(ee=>{try{B(ee)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return P(T,iu.EventType.OPEN,(()=>{w||(ye(En,`RPC '${e}' stream ${r} transport opened.`),O.o_())})),P(T,iu.EventType.CLOSE,(()=>{w||(w=!0,ye(En,`RPC '${e}' stream ${r} transport closed`),O.a_(),this.E_(T))})),P(T,iu.EventType.ERROR,(k=>{w||(w=!0,Ha(En,`RPC '${e}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),O.a_(new Ae(re.UNAVAILABLE,"The operation could not be completed")))})),P(T,iu.EventType.MESSAGE,(k=>{var K;if(!w){const B=k.data[0];dt(!!B,16349);const ee=B,oe=(ee==null?void 0:ee.error)||((K=ee[0])==null?void 0:K.error);if(oe){ye(En,`RPC '${e}' stream ${r} received error:`,oe);const fe=oe.status;let de=(function(R){const L=$t[R];if(L!==void 0)return KC(L)})(fe),M=oe.message;de===void 0&&(de=re.INTERNAL,M="Unknown error status: "+fe+" with message "+oe.message),w=!0,O.a_(new Ae(de,M)),T.close()}else ye(En,`RPC '${e}' stream ${r} received:`,B),O.u_(B)}})),P(f,cC.STAT_EVENT,(k=>{k.stat===dm.PROXY?ye(En,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===dm.NOPROXY&&ye(En,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Bp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n){return new aO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,t,i=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="PersistentStream";class rb{constructor(e,t,i,r,l,u,f,g){this.Mi=e,this.S_=i,this.b_=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ob(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Hs(t.toString()),Hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Ae(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(WE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(WE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class s5 extends rb{constructor(e,t,i,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=cO(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ke.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?rs(u.readTime):ke.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Em(this.serializer),t.addTarget=(function(l,u){let f;const g=u.target;if(f=gm(g)?{documents:hO(l,g)}:{query:pO(l,g).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=JC(l,u.resumeToken);const h=vm(l,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(ke.min())>0){f.readTime=Xd(l,u.snapshotVersion.toTimestamp());const h=vm(l,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=gO(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Em(this.serializer),t.removeTarget=e,this.q_(t)}}class o5 extends rb{constructor(e,t,i,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=fO(e.writeResults,e.commitTime),i=rs(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Em(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>dO(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{}class a5 extends r5{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ae(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,_m(t,i),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(re.UNKNOWN,l.toString())}))}Ho(e,t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,_m(t,i),r,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class l5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hs(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="RemoteStore";class u5{constructor(e,t,i,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Vr(this)&&(ye(Nr,"Restarting streams for network reachability change."),await(async function(g){const h=Ue(g);h.Ea.add(4),await Pu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Cf(h)})(this))}))})),this.Ra=new l5(i,r)}}async function Cf(n){if(Vr(n))for(const e of n.da)await e(!0)}async function Pu(n){for(const e of n.da)await e(!1)}function ab(n,e){const t=Ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Tg(t)?_g(t):el(t).O_()&&vg(t,e))}function yg(n,e){const t=Ue(n),i=el(t);t.Ia.delete(e),i.O_()&&lb(t,e),t.Ia.size===0&&(i.O_()?i.L_():Vr(t)&&t.Ra.set("Unknown"))}function vg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}el(n).Y_(e)}function lb(n,e){n.Va.Ue(e),el(n).Z_(e)}function _g(n){n.Va=new iO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),el(n).start(),n.Ra.ua()}function Tg(n){return Vr(n)&&!el(n).x_()&&n.Ia.size>0}function Vr(n){return Ue(n).Ea.size===0}function ub(n){n.Va=void 0}async function c5(n){n.Ra.set("Online")}async function d5(n){n.Ia.forEach(((e,t)=>{vg(n,e)}))}async function f5(n,e){ub(n),Tg(n)?(n.Ra.ha(e),_g(n)):n.Ra.set("Unknown")}async function h5(n,e,t){if(n.Ra.set("Online"),e instanceof $C&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const f of l.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.Ia.delete(f),r.Va.removeTarget(f))})(n,e)}catch(i){ye(Nr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await jd(n,i)}else if(e instanceof Cd?n.Va.Ze(e):e instanceof YC?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{const i=await sb(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(h);_&&l.Ia.set(h,_.withResumeToken(g.resumeToken,u))}})),f.targetMismatches.forEach(((g,h)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(yn.EMPTY_BYTE_STRING,_.snapshotVersion)),lb(l,g);const T=new Vo(_.target,g,h,_.sequenceNumber);vg(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){ye(Nr,"Failed to raise snapshot:",i),await jd(n,i)}}async function jd(n,e,t){if(!Za(e))throw e;n.Ea.add(1),await Pu(n),n.Ra.set("Offline"),t||(t=()=>sb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(Nr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Cf(n)}))}function cb(n,e){return e().catch((t=>jd(n,t,e)))}async function bf(n){const e=Ue(n),t=Yo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sg;for(;p5(e);)try{const r=await QO(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,m5(e,r)}catch(r){await jd(e,r)}db(e)&&fb(e)}function p5(n){return Vr(n)&&n.Ta.length<10}function m5(n,e){n.Ta.push(e);const t=Yo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function db(n){return Vr(n)&&!Yo(n).x_()&&n.Ta.length>0}function fb(n){Yo(n).start()}async function g5(n){Yo(n).ra()}async function y5(n){const e=Yo(n);for(const t of n.Ta)e.ea(t.mutations)}async function v5(n,e,t){const i=n.Ta.shift(),r=cg.from(i,e,t);await cb(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await bf(n)}async function _5(n,e){e&&Yo(n).X_&&await(async function(i,r){if((function(u){return eO(u)&&u!==re.ABORTED})(r.code)){const l=i.Ta.shift();Yo(i).B_(),await cb(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r))),await bf(i)}})(n,e),db(n)&&fb(n)}async function jE(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),ye(Nr,"RemoteStore received new credentials");const i=Vr(t);t.Ea.add(3),await Pu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cf(t)}async function T5(n,e){const t=Ue(n);e?(t.Ea.delete(2),await Cf(t)):e||(t.Ea.add(2),await Pu(t),t.Ra.set("Unknown"))}function el(n){return n.ma||(n.ma=(function(t,i,r){const l=Ue(t);return l.sa(),new s5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:c5.bind(null,n),t_:d5.bind(null,n),r_:f5.bind(null,n),H_:h5.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Tg(n)?_g(n):n.Ra.set("Unknown")):(await n.ma.stop(),ub(n))}))),n.ma}function Yo(n){return n.fa||(n.fa=(function(t,i,r){const l=Ue(t);return l.sa(),new o5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:g5.bind(null,n),r_:_5.bind(null,n),ta:y5.bind(null,n),na:v5.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await bf(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(Nr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t,i,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=l,this.deferred=new Bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,l){const u=Date.now()+i,f=new Eg(e,t,u,r,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sg(n,e){if(Hs("AsyncQueue",`${e}: ${n}`),Za(n))return new Ae(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{static emptySet(e){return new Va(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ie.comparator(t.key,i.key):(t,i)=>Ie.comparator(t.key,i.key),this.keyedMap=su(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Va)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Va;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.ga=new Nt(Ie.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class za{constructor(e,t,i,r,l,u,f,g,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new za(e,t,Va.emptySet(t),u,i,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class S5{constructor(){this.queries=eS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Ue(t),l=r.queries;r.queries=eS(),l.forEach(((u,f)=>{for(const g of f.Sa)g.onError(i)}))})(this,new Ae(re.ABORTED,"Firestore shutting down"))}}function eS(){return new Pr((n=>DC(n)),vf)}async function hb(n,e){const t=Ue(n);let i=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(i=2):(l=new E5,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const f=Sg(u,`Initialization of query '${ba(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ag(t)}async function pb(n,e){const t=Ue(n),i=e.query;let r=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function A5(n,e){const t=Ue(n);let i=!1;for(const r of e){const l=r.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(r)&&(i=!0);u.wa=r}}i&&Ag(t)}function C5(n,e,t){const i=Ue(n),r=i.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);i.queries.delete(e)}function Ag(n){n.Ca.forEach((e=>{e.next()}))}var Cm,tS;(tS=Cm||(Cm={})).Ma="default",tS.Cache="cache";class mb{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new za(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.key=e}}class yb{constructor(e){this.key=e}}class b5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=PC(e),this.tu=new Va(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new ZE,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const S=r.get(_),w=_f(this.query,T)?T:null,O=!!S&&this.mutatedKeys.has(S.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let k=!1;S&&w?S.data.isEqual(w.data)?O!==P&&(i.track({type:3,doc:w}),k=!0):this.su(S,w)||(i.track({type:2,doc:w}),k=!0,(g&&this.eu(w,g)>0||h&&this.eu(w,h)<0)&&(f=!0)):!S&&w?(i.track({type:0,doc:w}),k=!0):S&&!w&&(i.track({type:1,doc:S}),k=!0,(g||h)&&(f=!0)),k&&(w?(u=u.add(w),l=P?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(w,O){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:k})}};return P(w)-P(O)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const f=t&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,h=g!==this.Za;return this.Za=g,u.length!==0||h?{snapshot:new za(this.query,e.tu,l,u,e.mutatedKeys,g===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ZE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=We(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new yb(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new gb(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=We();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cg="SyncEngine";class w5{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class I5{constructor(e){this.key=e,this.hu=!1}}class x5{constructor(e,t,i,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Pr((f=>DC(f)),vf),this.Iu=new Map,this.Eu=new Set,this.du=new Nt(Ie.comparator),this.Au=new Map,this.Ru=new hg,this.Vu={},this.mu=new Map,this.fu=qa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function R5(n,e,t=!0){const i=Ab(n);let r;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await vb(i,e,t,!0),r}async function N5(n,e){const t=Ab(n);await vb(t,e,!0,!1)}async function vb(n,e,t,i){const r=await XO(n.localStore,os(e)),l=r.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await M5(n,e,l,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&ab(n.remoteStore,r),f}async function M5(n,e,t,i,r){n.pu=(T,S,w)=>(async function(P,k,K,B){let ee=k.view.ru(K);ee.Cs&&(ee=await $E(P.localStore,k.query,!1).then((({documents:M})=>k.view.ru(M,ee))));const oe=B&&B.targetChanges.get(k.targetId),fe=B&&B.targetMismatches.get(k.targetId)!=null,de=k.view.applyChanges(ee,P.isPrimaryClient,oe,fe);return iS(P,k.targetId,de.au),de.snapshot})(n,T,S,w);const l=await $E(n.localStore,e,!0),u=new b5(e,l.Qs),f=u.ru(l.documents),g=Du.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=u.applyChanges(f,n.isPrimaryClient,g);iS(n,t,h.au);const _=new w5(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function D5(n,e,t){const i=Ue(n),r=i.Tu.get(e),l=i.Iu.get(r.targetId);if(l.length>1)return i.Iu.set(r.targetId,l.filter((u=>!vf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Sm(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&yg(i.remoteStore,r.targetId),bm(i,r.targetId)})).catch(ja)):(bm(i,r.targetId),await Sm(i.localStore,r.targetId,!0))}async function P5(n,e){const t=Ue(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),yg(t.remoteStore,i.targetId))}async function k5(n,e,t){const i=F5(n);try{const r=await(function(u,f){const g=Ue(u),h=Ct.now(),_=f.reduce(((w,O)=>w.add(O.key)),We());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let O=Bs(),P=We();return g.Ns.getEntries(w,_).next((k=>{O=k,O.forEach(((K,B)=>{B.isValidDocument()||(P=P.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,O))).next((k=>{T=k;const K=[];for(const B of f){const ee=Q4(B,T.get(B.key).overlayedDocument);ee!=null&&K.push(new kr(B.key,ee,bC(ee.value.mapValue),Vs.exists(!0)))}return g.mutationQueue.addMutationBatch(w,h,K,f)})).next((k=>{S=k;const K=k.applyToLocalDocumentSet(T,P);return g.documentOverlayCache.saveOverlays(w,k.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:VC(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,f,g){let h=u.Vu[u.currentUser.toKey()];h||(h=new Nt(Xe)),h=h.insert(f,g),u.Vu[u.currentUser.toKey()]=h})(i,r.batchId,t),await ku(i,r.changes),await bf(i.remoteStore)}catch(r){const l=Sg(r,"Failed to persist write");t.reject(l)}}async function _b(n,e){const t=Ue(n);try{const i=await $O(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=t.Au.get(l);u&&(dt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?dt(u.hu,14607):r.removedDocuments.size>0&&(dt(u.hu,42227),u.hu=!1))})),await ku(t,i,e)}catch(i){await ja(i)}}function nS(n,e,t){const i=Ue(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const g=Ue(u);g.onlineState=f;let h=!1;g.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(f)&&(h=!0)})),h&&Ag(g)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function V5(n,e,t){const i=Ue(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),l=r&&r.key;if(l){let u=new Nt(Ie.comparator);u=u.insert(l,An.newNoDocument(l,ke.min()));const f=We().add(l),g=new Sf(ke.min(),new Map,new Nt(Xe),u,f);await _b(i,g),i.du=i.du.remove(l),i.Au.delete(e),bg(i)}else await Sm(i.localStore,e,!1).then((()=>bm(i,e,t))).catch(ja)}async function U5(n,e){const t=Ue(n),i=e.batch.batchId;try{const r=await YO(t.localStore,e);Eb(t,i,null),Tb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ku(t,r)}catch(r){await ja(r)}}async function L5(n,e,t){const i=Ue(n);try{const r=await(function(u,f){const g=Ue(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return g.mutationQueue.lookupMutationBatch(h,f).next((T=>(dt(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(h,T)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>g.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);Eb(i,e,t),Tb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ku(i,r)}catch(r){await ja(r)}}function Tb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Eb(n,e,t){const i=Ue(n);let r=i.Vu[i.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function bm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Sb(n,i)}))}function Sb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(yg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),bg(n))}function iS(n,e,t){for(const i of t)i instanceof gb?(n.Ru.addReference(i.key,e),O5(n,i)):i instanceof yb?(ye(Cg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Sb(n,i.key)):Me(19791,{wu:i})}function O5(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ye(Cg,"New document in limbo: "+t),n.Eu.add(i),bg(n))}function bg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ie(Rt.fromString(e)),i=n.fu.next();n.Au.set(i,new I5(t)),n.du=n.du.insert(t,i),ab(n.remoteStore,new Vo(os(yf(t.path)),i,"TargetPurposeLimboResolution",hf.ce))}}async function ku(n,e,t){const i=Ue(n),r=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{u.push(i.pu(g,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(h){r.push(h);const T=mg.As(g.targetId,h);l.push(T)}})))})),await Promise.all(u),i.Pu.H_(r),await(async function(g,h){const _=Ue(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(S=>se.forEach(S.Es,(w=>_.persistence.referenceDelegate.addReference(T,S.targetId,w))).next((()=>se.forEach(S.ds,(w=>_.persistence.referenceDelegate.removeReference(T,S.targetId,w)))))))))}catch(T){if(!Za(T))throw T;ye(gg,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const w=_.Ms.get(S),O=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(O);_.Ms=_.Ms.insert(S,P)}}})(i.localStore,l))}async function H5(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){ye(Cg,"User change. New user:",e.toKey());const i=await ib(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new Ae(re.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ku(t,i.Ls)}}function B5(n,e){const t=Ue(n),i=t.Au.get(e);if(i&&i.hu)return We().add(i.key);{let r=We();const l=t.Iu.get(e);if(!l)return r;for(const u of l){const f=t.Tu.get(u);r=r.unionWith(f.view.nu)}return r}}function Ab(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_b.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V5.bind(null,e),e.Pu.H_=A5.bind(null,e.eventManager),e.Pu.yu=C5.bind(null,e.eventManager),e}function F5(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L5.bind(null,e),e}class Zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KO(this.persistence,new GO,e.initialUser,this.serializer)}Cu(e){return new nb(pg.mi,this.serializer)}Du(e){return new jO}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zd.provider={build:()=>new Zd};class G5 extends Zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dt(this.persistence.referenceDelegate instanceof Wd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new IO(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new nb((i=>Wd.mi(i,t)),this.serializer)}}class wm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=H5.bind(null,this.syncEngine),await T5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new S5})()}createDatastore(e){const t=Af(e.databaseInfo.databaseId),i=(function(l){return new i5(l)})(e.databaseInfo);return(function(l,u,f,g){return new a5(l,u,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,l,u,f){return new u5(i,r,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>nS(this.syncEngine,t,0)),(function(){return XE.v()?new XE:new ZO})())}createSyncEngine(e,t){return(function(r,l,u,f,g,h,_){const T=new x5(r,l,u,f,g,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Ue(r);ye(Nr,"RemoteStore shutting down."),l.Ea.add(5),await Pu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="FirestoreClient";class q5{constructor(e,t,i,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Sn.UNAUTHENTICATED,this.clientId=ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{ye($o,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ye($o,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Sg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Fp(n,e){n.asyncQueue.verifyOperationInProgress(),ye($o,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await ib(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function sS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await z5(n);ye($o,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>jE(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>jE(e.remoteStore,r))),n._onlineComponents=e}async function z5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye($o,"Using user provided OfflineComponentProvider");try{await Fp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===re.FAILED_PRECONDITION||r.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Ha("Error using user provided cache. Falling back to memory cache: "+t),await Fp(n,new Zd)}}else ye($o,"Using default OfflineComponentProvider"),await Fp(n,new G5(void 0));return n._offlineComponents}async function bb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye($o,"Using user provided OnlineComponentProvider"),await sS(n,n._uninitializedComponentsProvider._online)):(ye($o,"Using default OnlineComponentProvider"),await sS(n,new wm))),n._onlineComponents}function K5(n){return bb(n).then((e=>e.syncEngine))}async function Im(n){const e=await bb(n),t=e.eventManager;return t.onListen=R5.bind(null,e.syncEngine),t.onUnlisten=D5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=P5.bind(null,e.syncEngine),t}function Y5(n,e,t={}){const i=new Bo;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,h){const _=new Cb({next:S=>{_.Nu(),u.enqueueAndForget((()=>pb(l,T)));const w=S.docs.has(f);!w&&S.fromCache?h.reject(new Ae(re.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&g&&g.source==="server"?h.reject(new Ae(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new mb(yf(f.path),_,{includeMetadataChanges:!0,qa:!0});return hb(l,T)})(await Im(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firestore.googleapis.com",rS=!0;class aS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ib,this.ssl=rS}else this.host=e.host,this.ssl=e.ssl??rS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bO)throw new Ae(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ae(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wg{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new WL;switch(i.type){case"firstParty":return new t4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=oS.get(t);i&&(ye("ComponentProvider","Removing Datastore"),oS.delete(t),i.terminate())})(this),Promise.resolve()}}function $5(n,e,t,i={}){var h;n=Fo(n,wg);const r=Ja(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(AA(`https://${f}`),CA("Firestore",!0)),l.host!==Ib&&l.host!==f&&Ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:r,emulatorOptions:i};if(!wr(g,u)&&(n._setSettings(g),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=Sn.MOCK_USER;else{_=Ak(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Ae(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Sn(S)}n._authCredentials=new jL(new pC(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wf(this.firestore,e,this._query)}}class Zt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Nu(t,Zt._jsonSchema))return new Zt(e,i||null,new Ie(Rt.fromString(t.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:Jt("string",Zt._jsonSchemaVersion),referencePath:Jt("string")};class Au extends wf{constructor(e,t,i){super(e,t,yf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new Ie(e))}withConverter(e){return new Au(this.firestore,e,this._path)}}function bd(n,e,...t){if(n=Wn(n),arguments.length===1&&(e=ng.newId()),a4("doc","path",e),n instanceof wg){const i=Rt.fromString(e,...t);return EE(i),new Zt(n,null,new Ie(i))}{if(!(n instanceof Zt||n instanceof Au))throw new Ae(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Rt.fromString(e,...t));return EE(i),new Zt(n.firestore,n instanceof Au?n.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="AsyncQueue";class uS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ob(this,"async_queue_retry"),this._c=()=>{const i=Bp();i&&ye(lS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Bp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Bo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Za(e))throw e;ye(lS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Hs("INTERNAL UNHANDLED ERROR: ",cS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Eg.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Me(47125,{Pc:cS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const l of i)if(l in r&&typeof r[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Cu extends wg{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new uS,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uS(e),this._firestoreClient=void 0,await e}}}function J5(n,e){const t=typeof n=="object"?n:xA(),i=typeof n=="string"?n:zd,r=zm(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const l=Ek("firestore");l&&$5(r,...l)}return r}function Ig(n){if(n._terminated)throw new Ae(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Q5(n),n._firestoreClient}function Q5(n){var i,r,l;const e=n._freezeSettings(),t=(function(f,g,h,_){return new _4(f,g,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,wb(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new q5(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fi(yn.fromBase64String(e))}catch(t){throw new Ae(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fi(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,fi._jsonSchema))return fi.fromBase64String(e.bytes)}}fi._jsonSchemaVersion="firestore/bytes/1.0",fi._jsonSchema={type:Jt("string",fi._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:as._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,as._jsonSchema))return new as(e.latitude,e.longitude)}}as._jsonSchemaVersion="firestore/geoPoint/1.0",as._jsonSchema={type:Jt("string",as._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ls(e.vectorValues);throw new Ae(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ls._jsonSchemaVersion="firestore/vectorValue/1.0",ls._jsonSchema={type:Jt("string",ls._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=/^__.*__$/;class W5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mu(e,this.data,t,this.fieldTransforms)}}function Rb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:n})}}class Rg{constructor(e,t,i,r,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ef(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rb(this.Ac)&&X5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j5{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Af(e)}Cc(e,t,i,r=!1){return new Rg({Ac:e,methodName:t,Dc:i,path:gn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z5(n){const e=n._freezeSettings(),t=Af(n._databaseId);return new j5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function e3(n,e,t,i,r,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);Pb("Data must be an object, but it was:",u,i);const f=Mb(i,u);let g,h;if(l.merge)g=new Ri(u.fieldMask),h=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const S=t3(e,T,t);if(!u.contains(S))throw new Ae(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);i3(_,S)||_.push(S)}g=new Ri(_),h=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,h=u.fieldTransforms;return new W5(new di(f),g,h)}function Nb(n,e){if(Db(n=Wn(n)))return Pb("Unsupported field value:",e,n),Mb(n,e);if(n instanceof xb)return(function(i,r){if(!Rb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const l=[];let u=0;for(const f of i){let g=Nb(f,r.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,r){if((i=Wn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return q4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ct.fromDate(i);return{timestampValue:Xd(r.serializer,l)}}if(i instanceof Ct){const l=new Ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xd(r.serializer,l)}}if(i instanceof as)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fi)return{bytesValue:JC(r.serializer,i._byteString)};if(i instanceof Zt){const l=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:fg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ls)return(function(u,f){return{mapValue:{fields:{[AC]:{stringValue:CC},[Kd]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return ug(f.serializer,h)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${ig(i)}`)})(n,e)}function Mb(n,e){const t={};return yC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dr(n,((i,r)=>{const l=Nb(r,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Db(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof as||n instanceof fi||n instanceof Zt||n instanceof xb||n instanceof ls)}function Pb(n,e,t){if(!Db(t)||!mC(t)){const i=ig(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function t3(n,e,t){if((e=Wn(e))instanceof xg)return e._internalPath;if(typeof e=="string")return kb(n,e);throw ef("Field path arguments must be of type string or ",n,!1,void 0,t)}const n3=new RegExp("[~\\*/\\[\\]]");function kb(n,e,t){if(e.search(n3)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xg(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ef(n,e,t,i,r){const l=i&&!i.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${i}`),u&&(g+=` in document ${r}`),g+=")"),new Ae(re.INVALID_ARGUMENT,f+n+g)}function i3(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t,i,r,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new s3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ub("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class s3 extends Vb{data(){return super.data()}}function Ub(n,e){return typeof e=="string"?kb(n,e):e instanceof xg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r3{convertValue(e,t="none"){switch(Ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Dr(e,((r,l)=>{i[r]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,r,l;const t=(l=(r=(i=e.fields)==null?void 0:i[Kd].arrayValue)==null?void 0:r.values)==null?void 0:l.map((u=>Ht(u.doubleValue)));return new ls(t)}convertGeoPoint(e){return new as(Ht(e.latitude),Ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=mf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=qo(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Rt.fromString(e);dt(eb(i),9688,{name:e});const r=new _u(i.get(1),i.get(3)),l=new Ie(i.popFirst(5));return r.isEqual(t)||Hs(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class ru{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class br extends Vb{constructor(e,t,i,r,l,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ub("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=br._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}br._jsonSchemaVersion="firestore/documentSnapshot/1.0",br._jsonSchema={type:Jt("string",br._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class wd extends br{data(e={}){return super.data(e)}}class Ua{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ru(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new wd(this._firestore,this._userDataWriter,i.key,i,new ru(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const g=new wd(r._firestore,r._userDataWriter,f.doc.key,f.doc,new ru(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new wd(r._firestore,r._userDataWriter,f.doc.key,f.doc,new ru(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:l3(f.type),doc:g,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ua._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(n){n=Fo(n,Zt);const e=Fo(n.firestore,Cu);return Y5(Ig(e),n._key).then((t=>Ob(e,n,t)))}Ua._jsonSchemaVersion="firestore/querySnapshot/1.0",Ua._jsonSchema={type:Jt("string",Ua._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class Lb extends r3{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}function fS(n,e,t){n=Fo(n,Zt);const i=Fo(n.firestore,Cu),r=a3(n.converter,e,t);return d3(i,[e3(Z5(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Vs.none())])}function c3(n,...e){var g,h,_;n=Wn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||dS(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(dS(e[i])){const T=e[i];e[i]=(g=T.next)==null?void 0:g.bind(T),e[i+1]=(h=T.error)==null?void 0:h.bind(T),e[i+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,u,f;if(n instanceof Zt)u=Fo(n.firestore,Cu),f=yf(n._key.path),l={next:T=>{e[i]&&e[i](Ob(u,n,T))},error:e[i+1],complete:e[i+2]};else{const T=Fo(n,wf);u=Fo(T.firestore,Cu),f=T._query;const S=new Lb(u);l={next:w=>{e[i]&&e[i](new Ua(u,S,T,w))},error:e[i+1],complete:e[i+2]},o3(n._query)}return(function(S,w,O,P){const k=new Cb(P),K=new mb(w,k,O);return S.asyncQueue.enqueueAndForget((async()=>hb(await Im(S),K))),()=>{k.Nu(),S.asyncQueue.enqueueAndForget((async()=>pb(await Im(S),K)))}})(Ig(u),f,r,l)}function d3(n,e){return(function(i,r){const l=new Bo;return i.asyncQueue.enqueueAndForget((async()=>k5(await K5(i),r,l))),l.promise})(Ig(n),e)}function Ob(n,e,t){const i=t.docs.get(e._key),r=new Lb(n);return new br(n,r,e._key,i,new ru(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Wa=r})(Qa),La(new Ir("firestore",((i,{instanceIdentifier:r,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Cu(new ZL(i.getProvider("auth-internal")),new n4(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ae(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(h.options.projectId,_)})(u,r),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Oo(yE,vE,e),Oo(yE,vE,"esm2020")})();var f3="firebase",h3="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oo(f3,h3,"app");const p3={apiKey:"AIzaSyDj1IdjKsPsC0UKQeUtP8v3sCPo4IRQdt0",authDomain:"web-app-8b273.firebaseapp.com",projectId:"web-app-8b273",storageBucket:"web-app-8b273.firebasestorage.app",messagingSenderId:"512346814244",appId:"1:512346814244:web:a8322ebf02727a508ae5b1",measurementId:"G-B9H3XP1PNB"},Hb=IA(p3),Gp=QL(Hb),m3=new Ds,Id=J5(Hb),Bb=ae.createContext(void 0),g3=({children:n})=>{const[e,t]=ae.useState(null),[i,r]=ae.useState(!0),[l,u]=ae.useState(null),[f,g]=ae.useState(null),h=async P=>{try{const k=bd(Id,"users",P),K=await u3(k);K.exists()?u(K.data().geminiApiKey||null):u(null)}catch(k){console.error("Error fetching API key:",k),u(null)}};ae.useEffect(()=>{const P=LU(Gp,async k=>{t(k),k?await h(k.uid):u(null),r(!1)});return()=>P()},[]);const _=()=>g(null),T=async()=>{g(null);try{await sL(Gp,m3)}catch(P){console.error("Error signing in with Google",P);let k="Login failed. Please try again.";if(P.code==="auth/configuration-not-found")k=` Firebase Console 
 Authentication  'Get Started'`;else if(P.code==="auth/operation-not-allowed")k=` Google 
 Firebase Console > Authentication > Sign-in method  Google`;else if(P.code==="auth/unauthorized-domain")k=` (Unauthorized Domain)

 (${window.location.hostname})  Firebase 
 Firebase Console > Authentication > Settings > Authorized domains `;else{if(P.code==="auth/popup-closed-by-user")return;P.message&&(k=`Login failed: ${P.message}`)}g(k)}},S=async()=>{try{await OU(Gp),u(null),g(null)}catch(P){console.error("Error signing out",P)}},w=async P=>{if(e)try{await fS(bd(Id,"users",e.uid),{geminiApiKey:P,updatedAt:new Date().toISOString(),email:e.email},{merge:!0}),u(P)}catch(k){throw console.error("Error saving API key:",k),k}},O=async()=>{if(e)try{await fS(bd(Id,"users",e.uid),{geminiApiKey:null,updatedAt:new Date().toISOString()},{merge:!0}),u(null)}catch(P){throw console.error("Error removing API key:",P),P}};return C.jsx(Bb.Provider,{value:{user:e,loading:i,apiKey:l,error:f,signInWithGoogle:T,signOut:S,saveApiKey:w,removeApiKey:O,clearError:_},children:n})},Fb=()=>{const n=ae.useContext(Bb);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},y3=()=>{const{user:n,apiKey:e,saveApiKey:t,removeApiKey:i,signOut:r}=Fb(),[l,u]=ae.useState([{id:"1",date:new Date().toISOString().split("T")[0],dateType:"date",categorizedContent:{},otherInformation:""}]),[f,g]=ae.useState("profile"),[h,_]=ae.useState(!1),[T,S]=ae.useState({});ae.useEffect(()=>{if(!n){S({});return}const le=c3(bd(Id,"users",n.uid),_e=>{if(_e.exists()){const be=_e.data();S(be.customItems||{})}});return()=>le()},[n]);const[w,O]=ae.useState(""),[P,k]=ae.useState([]),[K,B]=ae.useState(-1),[ee,oe]=ae.useState(!1),[fe,de]=ae.useState(!1),[M,N]=ae.useState(!1),[R,L]=ae.useState(null),[V,q]=ae.useState({age:"65",gender:"male",underlying_diseases:["Hypertension","Diabetes Mellitus"],control_quality:"",management_modality:"",follow_up_status:""}),[D,Be]=ae.useState("himself"),[at,X]=ae.useState(""),[ce,Ee]=ae.useState(null),[qe,ze]=ae.useState(null),[F,j]=ae.useState(""),[ue,pe]=ae.useState(!1),[we,xe]=ae.useState(""),[Le,mt]=ae.useState(!1),lt=ae.useRef(null),[Mn,mi]=ae.useState(260),[Fn,gi]=ae.useState(300),[rn,ki]=ae.useState(380),[an,fs]=ae.useState(!1),[zs,bt]=ae.useState(null),wt=ae.useRef(!1),yi=ae.useMemo(()=>{for(let le=l.length-1;le>=0;le--){const _e=l[le].categorizedContent["Definitive diagnosis"];if(_e&&_e.trim())return _e}return"Pending"},[l]),Ks=le=>_e=>{wt.current=!0,_e.preventDefault();const be=_e.clientX,Se=_e.clientY,nt=le==="sidebar"?Mn:Fn,ln=rn,_n=un=>{wt.current&&(le==="sidebar"?mi(Math.max(200,Math.min(600,nt+(un.clientX-be)))):le==="timeline"?gi(Math.max(200,Math.min(600,nt+(un.clientX-be)))):le==="genArea"&&ki(Math.max(200,Math.min(window.innerHeight-100,ln-(un.clientY-Se)))))},Xt=()=>{wt.current=!1,document.removeEventListener("mousemove",_n),document.removeEventListener("mouseup",Xt)};document.addEventListener("mousemove",_n),document.addEventListener("mouseup",Xt)},Qo=()=>{const le=Date.now().toString();u([...l,{id:le,date:"",dateType:"date",categorizedContent:{},otherInformation:""}]),g(le)},Pt=le=>{if(l.length<=1)return alert("Must have at least one timepoint.");const _e=l.findIndex(be=>be.id===le);L({id:le,index:_e})},Vi=()=>{if(!R)return;const{id:le,index:_e}=R;u(be=>{var nt,ln;const Se=be.filter(_n=>_n.id!==le);return f===le&&g(((nt=Se[_e])==null?void 0:nt.id)||((ln=Se[_e-1])==null?void 0:ln.id)||"profile"),Se}),L(null)},hs=(le,_e)=>{u(be=>be.map(Se=>Se.id===le?{...Se,..._e}:Se))},Ys=(le,_e)=>{const be=l.find(Se=>Se.id===_e);be&&u(Se=>Se.map(nt=>{if(nt.id===le){const ln={...nt.categorizedContent};Object.keys(be.categorizedContent).forEach(Xt=>{const un=be.categorizedContent[Xt];if(un){const Xs=ln[Xt]||"";ln[Xt]=Xs?`${Xs}, ${un}`:un}});let _n=nt.otherInformation;return be.otherInformation&&(_n=_n?`${_n}
${be.otherInformation}`:be.otherInformation),{...nt,categorizedContent:ln,otherInformation:_n}}return nt}))},wn=(le,_e)=>{if(f){if(f==="profile"){le==="Underlying disease"&&q(be=>({...be,underlying_diseases:Array.from(new Set([...be.underlying_diseases,_e]))}));return}bt({category:le,timestamp:Date.now()}),u(be=>be.map(Se=>{if(Se.id===f){const nt=Se.categorizedContent[le]||"";return{...Se,categorizedContent:{...Se.categorizedContent,[le]:nt?`${nt}, ${_e}`:_e}}}return Se}))}},Ui=()=>({patient_profile:{age:parseInt(V.age)||0,gender:V.gender,informant:D,underlying_disease:V.underlying_diseases,control_status:{quality:V.control_quality,modality:V.management_modality,follow_up:V.follow_up_status}},timepoints:l.map(le=>({date:le.date,vital_sign:le.categorizedContent["Vital Sign"]||"",symptom:le.categorizedContent.Symptom||"",negative_symptom:le.categorizedContent["Negative Symptom"]||"",medical_facility:le.categorizedContent["Medical Facility"]||"",tentative_diagnosis:le.categorizedContent["Tentative Diagnosis"]||"",underlying_disease:le.categorizedContent["Underlying disease"]||"",definitive_diagnosis:le.categorizedContent["Definitive diagnosis"]||"",physical_examination:le.categorizedContent["Physical examination"]||"",lab_data:le.categorizedContent["Lab data"]||"",image_finding:le.categorizedContent["Image finding"]||"",treatment:le.categorizedContent.Treatment||"",other_information:le.otherInformation||""}))}),jn=le=>{const be=[...P.slice(0,K+1),le];k(be),B(be.length-1),O(le)},$s=async()=>{if(!e){de(!0);return}_(!0);const le=Ui(),_e=await ck(le,e);jn(_e),_(!1)},vi=async le=>{if(!e){de(!0);return}const _e=le||we;if(!_e.trim()||!w)return;mt(!0);const be=Ui(),Se=await dk(be,w,_e,e);jn(Se),mt(!1),le||xe("")},Qt=()=>{if(K>0){const le=K-1;B(le),O(P[le])}},kt=()=>{if(K<P.length-1){const le=K+1;B(le),O(P[le])}},vn=le=>{B(le),O(P[le]),oe(!1)},Et=()=>{const le=lt.current;if(!le)return;const _e=le.selectionStart,be=le.selectionEnd,Se=le.value.substring(_e,be).trim();if(Se.length>0){const nt=le.getBoundingClientRect();X(Se),Ee({start:_e,end:be}),ze({x:nt.left+50,y:nt.top+50})}else X(""),Ee(null),ze(null)},Js=async()=>{if(!e){de(!0);return}if(!at||!F||!ce)return;pe(!0);const le=Ui(),_e=await fk(le,w,at,F,e),be=w.substring(0,ce.start),Se=w.substring(ce.end),nt=be+_e+Se;jn(nt),pe(!1),ze(null),X(""),j("")},Li=()=>{w&&(navigator.clipboard.writeText(w),N(!0),setTimeout(()=>N(!1),2e3))},Qs=l.find(le=>le.id===f),Dn=!e&&!fe;return C.jsxs("div",{className:"h-screen w-screen flex flex-col bg-slate-50 text-slate-800 font-sans overflow-hidden",children:[C.jsx(Xx,{isOpen:!!R,onClose:()=>L(null),onConfirm:Vi,title:"Delete Timepoint",message:"Are you sure?"}),C.jsx(jx,{isOpen:Dn||fe,onSave:async le=>{await t(le),de(!1)},isDismissible:!!e,onDismiss:()=>de(!1)}),ee&&C.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>oe(!1)}),C.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[C.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-blue-700",children:[C.jsx(l_,{className:"w-5 h-5"}),C.jsx("h3",{className:"font-bold",children:"Version History"})]}),C.jsx("button",{onClick:()=>oe(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:C.jsx(pu,{className:"w-5 h-5"})})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[P.length===0&&C.jsx("p",{className:"text-center text-slate-400 py-10",children:"No history available yet."}),[...P].reverse().map((le,_e)=>{const be=P.length-1-_e,Se=be===K;return C.jsxs("button",{onClick:()=>vn(be),className:`w-full text-left p-4 rounded-xl border-2 transition-all flex items-start space-x-4 ${Se?"border-blue-500 bg-blue-50":"border-slate-100 hover:border-blue-200 hover:bg-slate-50"}`,children:[C.jsx("div",{className:`mt-1 p-2 rounded-lg ${Se?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:C.jsx(jI,{className:"w-4 h-4"})}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsxs("div",{className:"flex items-center justify-between mb-1",children:[C.jsxs("span",{className:"font-bold text-sm",children:["Version ",be+1]}),Se&&C.jsx("span",{className:"text-[10px] font-black uppercase text-blue-600 bg-blue-100 px-2 py-0.5 rounded",children:"Active"})]}),C.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2 italic",children:[le.substring(0,150),"..."]})]}),C.jsx(UI,{className:"w-4 h-4 self-center text-slate-300"})]},be)})]})]})]}),C.jsxs("header",{className:"h-14 bg-blue-900 text-white flex items-center px-4 justify-between shadow-md z-20 flex-shrink-0",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(ES,{className:"w-5 h-5"}),C.jsx("h1",{className:"font-bold text-lg hidden md:block",children:"Smart Medical Record"})]}),C.jsxs("div",{className:"hidden md:flex text-sm opacity-80 gap-4",children:[C.jsxs("span",{children:["Patient: ",V.age,"y/",V.gender]}),C.jsxs("span",{className:"max-w-[300px] truncate",children:["Dx: ",yi]})]}),C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("button",{onClick:()=>de(!0),className:"p-1.5 rounded-full hover:bg-blue-800 text-blue-200 transition-colors",title:"API Key Settings",children:C.jsx(SS,{className:"w-4 h-4"})}),C.jsxs("div",{className:"flex items-center space-x-2 bg-blue-800 rounded-full pl-1 pr-3 py-1",children:[n!=null&&n.photoURL?C.jsx("img",{src:n.photoURL,alt:"User",className:"w-6 h-6 rounded-full border border-white/20"}):C.jsx(TS,{className:"w-6 h-6 text-blue-200"}),C.jsx("span",{className:"text-xs font-semibold max-w-[100px] truncate",children:(n==null?void 0:n.displayName)||(n==null?void 0:n.email)})]}),C.jsx("button",{onClick:r,className:"p-1.5 hover:bg-red-600 rounded-full transition-colors text-white",title:"Sign Out",children:C.jsx(mx,{className:"w-4 h-4"})})]})]}),C.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[C.jsx("div",{style:{width:Mn},className:"flex-shrink-0 z-10 flex flex-col",children:C.jsx($x,{onItemClick:wn})}),C.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:Ks("sidebar")}),C.jsx("div",{style:{width:Fn},className:"flex-shrink-0 z-0 flex flex-col",children:C.jsx(Jx,{events:l,activeEventId:f,onSelectEvent:g,onAddEvent:Qo,onDeleteEvent:Pt,onCopyFromEvent:Ys})}),C.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:Ks("timeline")}),C.jsx("div",{className:"flex-1 min-w-0",children:C.jsx(Qx,{event:Qs,onUpdate:hs,profile:V,onUpdateProfile:q,isProfileSelected:f==="profile",informant:D,setInformant:Be,lastUpdateTrigger:zs})})]}),!an&&C.jsx("div",{className:"h-1 bg-slate-300 hover:bg-blue-500 cursor-row-resize z-20",onMouseDown:Ks("genArea")}),C.jsxs("div",{style:{height:an?"100vh":rn},className:`flex flex-col border-t-4 border-slate-200 bg-white shadow-2xl transition-all ${an?"fixed inset-0 z-50":"relative"}`,children:[C.jsxs("div",{className:"px-6 py-3 border-b flex items-center justify-between bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(hd,{className:"w-5 h-5 text-purple-600"}),C.jsx("h2",{className:"font-bold text-slate-700",children:"AI Generation Area"}),C.jsxs("div",{className:"flex items-center ml-4 bg-white rounded-lg border border-slate-200 p-0.5 shadow-sm",children:[C.jsx("button",{onClick:Qt,disabled:K<=0,title:"Undo (Ctrl+Z)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 transition-colors",children:C.jsx(Lx,{className:"w-4 h-4"})}),C.jsx("button",{onClick:kt,disabled:K>=P.length-1,title:"Redo (Ctrl+Y)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 border-l border-slate-100 transition-colors",children:C.jsx(wx,{className:"w-4 h-4"})}),C.jsxs("button",{onClick:()=>oe(!0),className:"p-1.5 hover:bg-slate-100 rounded text-blue-600 font-bold text-xs flex items-center border-l border-slate-100 transition-colors",children:[C.jsx(l_,{className:"w-3.5 h-3.5 mr-1"}),"V",K+1]})]})]}),C.jsxs("div",{className:"flex items-center space-x-3",children:[w&&C.jsxs("button",{onClick:Li,className:`flex items-center px-4 py-2 rounded-full font-bold text-sm transition-all shadow-sm ${M?"bg-green-100 text-green-700 border border-green-200":"bg-white border border-slate-300 text-slate-700 hover:bg-slate-100 active:scale-95"}`,children:[M?C.jsx(_S,{className:"w-4 h-4 mr-2"}):C.jsx(Nm,{className:"w-4 h-4 mr-2"}),M?"Copied":"Copy"]}),C.jsx("button",{onClick:()=>fs(!an),className:"p-2 text-slate-500 hover:bg-slate-200 rounded-full transition-colors",children:an?C.jsx(Ex,{className:"w-5 h-5"}):C.jsx(yx,{className:"w-5 h-5"})}),C.jsxs("button",{onClick:$s,disabled:h,className:`flex items-center px-6 py-2 rounded-full font-bold shadow-md transition-all active:scale-95 ${h?"bg-slate-300 cursor-not-allowed opacity-70":"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:brightness-110"}`,children:[h?C.jsx(au,{className:"w-4 h-4 mr-2 animate-spin"}):null,h?"Generating...":"Generate Note"]})]})]}),C.jsxs("div",{className:"flex-1 flex bg-slate-50 overflow-hidden",children:[C.jsx("div",{className:"w-[70%] h-full p-4 relative overflow-hidden flex flex-col",children:C.jsxs("div",{className:"flex-1 relative",children:[C.jsx("textarea",{ref:lt,onMouseUp:Et,onKeyUp:Et,className:"w-full h-full p-8 bg-white border rounded-lg shadow-inner resize-none font-serif text-lg leading-relaxed custom-scrollbar outline-none focus:ring-2 focus:ring-blue-100 transition-shadow",value:w,onChange:le=>{const _e=le.target.value;O(_e)},placeholder:e?"The generated medical admission note will appear here...":"Please set your API Key to start generating notes."}),qe&&at&&C.jsxs("div",{className:"absolute z-[60] bg-white border border-slate-200 rounded-xl shadow-2xl p-4 w-80 animate-in zoom-in-95 duration-200",style:{top:20,right:20},children:[C.jsxs("div",{className:"flex items-center justify-between mb-3",children:[C.jsxs("div",{className:"flex items-center space-x-1.5 text-blue-600",children:[C.jsx(Fx,{className:"w-4 h-4"}),C.jsx("span",{className:"text-xs font-bold uppercase",children:"Refine Selection"})]}),C.jsx("button",{onClick:()=>{ze(null),X("")},className:"text-slate-400 hover:text-slate-600",children:C.jsx(pu,{className:"w-4 h-4"})})]}),C.jsxs("div",{className:"mb-3",children:[C.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Target Text"}),C.jsxs("div",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded border border-slate-100 max-h-20 overflow-y-auto italic",children:['"',at,'"']})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsx("textarea",{autoFocus:!0,placeholder:"e.g. Rewrite this more formally...",className:"w-full p-2.5 text-xs border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none h-20",value:F,onChange:le=>j(le.target.value)}),C.jsxs("button",{disabled:ue||!F.trim(),onClick:Js,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold rounded-lg shadow-md transition-all flex items-center justify-center disabled:bg-slate-300",children:[ue?C.jsx(au,{className:"w-3.5 h-3.5 mr-2 animate-spin"}):C.jsx(hd,{className:"w-3.5 h-3.5 mr-2"}),ue?"Refining...":"Refine Segment"]})]})]})]})}),C.jsxs("div",{className:"w-[30%] h-full border-l border-slate-200 bg-white flex flex-col",children:[C.jsxs("div",{className:"p-3 border-b flex items-center space-x-2 bg-slate-50/50",children:[C.jsx(_x,{className:"w-4 h-4 text-blue-600"}),C.jsx("h3",{className:"text-xs font-bold text-slate-700 uppercase tracking-widest",children:" Assistant"})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Quick Refine"}),C.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[C.jsxs("button",{onClick:()=>vi("Make the note more concise and pithy without losing clinical facts."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(Yx,{className:"w-3.5 h-3.5 mr-2 text-yellow-500"}),C.jsx("span",{children:" (Make it concise)"})]}),C.jsxs("button",{onClick:()=>vi("Analyze the original JSON data and checking if any clinical details are missing in the current draft. Flag them or add them if the data allows."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(OI,{className:"w-3.5 h-3.5 mr-2 text-purple-500"}),C.jsx("span",{children:" (Detail check)"})]}),C.jsxs("button",{onClick:()=>vi("Carefully check for grammar, prepositions, and article usage. Ensure formal academic medical tone."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(Vx,{className:"w-3.5 h-3.5 mr-2 text-blue-500"}),C.jsx("span",{children:" (Grammar check)"})]})]})]}),C.jsx("div",{className:"h-px bg-slate-100 my-2"}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Manual Refinement"}),C.jsx("textarea",{className:"w-full h-32 p-3 text-sm border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-100 outline-none transition-shadow resize-none bg-slate-50/30",placeholder:"e.g. Rewrite the second paragraph to emphasize the fever course...",value:we,onChange:le=>xe(le.target.value)}),C.jsxs("button",{disabled:Le||!we.trim()||!w,onClick:()=>vi(),className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-xl shadow-md transition-all flex items-center justify-center disabled:bg-slate-200 disabled:text-slate-400",children:[Le?C.jsx(au,{className:"w-4 h-4 mr-2 animate-spin"}):C.jsx(hd,{className:"w-4 h-4 mr-2"}),Le?"Refining Note...":"Refine Full Note"]})]}),!w&&C.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-100 text-[11px] text-amber-700 italic",children:"Generate a note first to use the refinement assistant."})]})]})]})]})]})},v3=()=>C.jsx(g3,{children:C.jsx(_3,{})}),_3=()=>{const{user:n,loading:e,signInWithGoogle:t,error:i}=Fb();return e?C.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-blue-50",children:C.jsx(au,{className:"w-10 h-10 text-blue-600 animate-spin"})}):n?C.jsx(y3,{}):C.jsx(Wx,{onLogin:t,authError:i})},Gb=document.getElementById("root");if(!Gb)throw new Error("Could not find root element to mount to");const T3=xI.createRoot(Gb);T3.render(C.jsx(pS.StrictMode,{children:C.jsx(v3,{})}));
