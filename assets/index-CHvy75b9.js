(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function US(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dp={exports:{}},ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function GI(){if(p_)return ou;p_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var f in o)f!=="key"&&(a[f]=o[f])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return ou.Fragment=e,ou.jsx=t,ou.jsxs=t,ou}var m_;function BI(){return m_||(m_=1,Dp.exports=GI()),Dp.exports}var A=BI(),Pp={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function qI(){if(g_)return Le;g_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function w(G){return G===null||typeof G!="object"?null:(G=S&&G[S]||G["@@iterator"],typeof G=="function"?G:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,P={};function $(G,j,ue){this.props=G,this.context=j,this.refs=P,this.updater=ue||V}$.prototype.isReactComponent={},$.prototype.setState=function(G,j){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,j,"setState")},$.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function F(){}F.prototype=$.prototype;function ee(G,j,ue){this.props=G,this.context=j,this.refs=P,this.updater=ue||V}var re=ee.prototype=new F;re.constructor=ee,k(re,$.prototype),re.isPureReactComponent=!0;var ce=Array.isArray;function pe(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(G,j,ue){var me=ue.ref;return{$$typeof:n,type:G,key:j,ref:me!==void 0?me:null,props:ue}}function H(G,j){return R(G.type,j,G.props)}function O(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function q(G){var j={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ue){return j[ue]})}var D=/\/+/g;function Me(G,j){return typeof G=="object"&&G!==null&&G.key!=null?q(""+G.key):j.toString(36)}function ft(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(pe,pe):(G.status="pending",G.then(function(j){G.status==="pending"&&(G.status="fulfilled",G.value=j)},function(j){G.status==="pending"&&(G.status="rejected",G.reason=j)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function W(G,j,ue,me,we){var Ie=typeof G;(Ie==="undefined"||Ie==="boolean")&&(G=null);var Be=!1;if(G===null)Be=!0;else switch(Ie){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(G.$$typeof){case n:case e:Be=!0;break;case v:return Be=G._init,W(Be(G._payload),j,ue,me,we)}}if(Be)return we=we(G),Be=me===""?"."+Me(G,0):me,ce(we)?(ue="",Be!=null&&(ue=Be.replace(D,"$&/")+"/"),W(we,j,ue,"",function(Nn){return Nn})):we!=null&&(O(we)&&(we=H(we,ue+(we.key==null||G&&G.key===we.key?"":(""+we.key).replace(D,"$&/")+"/")+Be)),j.push(we)),1;Be=0;var ht=me===""?".":me+":";if(ce(G))for(var lt=0;lt<G.length;lt++)me=G[lt],Ie=ht+Me(me,lt),Be+=W(me,j,ue,Ie,we);else if(lt=w(G),typeof lt=="function")for(G=lt.call(G),lt=0;!(me=G.next()).done;)me=me.value,Ie=ht+Me(me,lt++),Be+=W(me,j,ue,Ie,we);else if(Ie==="object"){if(typeof G.then=="function")return W(ft(G),j,ue,me,we);throw j=String(G),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return Be}function de(G,j,ue){if(G==null)return G;var me=[],we=0;return W(G,me,"","",function(Ie){return j.call(ue,Ie,we++)}),me}function _e(G){if(G._status===-1){var j=G._result;j=j(),j.then(function(ue){(G._status===0||G._status===-1)&&(G._status=1,G._result=ue)},function(ue){(G._status===0||G._status===-1)&&(G._status=2,G._result=ue)}),G._status===-1&&(G._status=0,G._result=j)}if(G._status===1)return G._result.default;throw G._result}var Ge=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},Ke={map:de,forEach:function(G,j,ue){de(G,function(){j.apply(this,arguments)},ue)},count:function(G){var j=0;return de(G,function(){j++}),j},toArray:function(G){return de(G,function(j){return j})||[]},only:function(G){if(!O(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Le.Activity=T,Le.Children=Ke,Le.Component=$,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=ee,Le.StrictMode=i,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Le.__COMPILER_RUNTIME={__proto__:null,c:function(G){return M.H.useMemoCache(G)}},Le.cache=function(G){return function(){return G.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(G,j,ue){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var me=k({},G.props),we=G.key;if(j!=null)for(Ie in j.key!==void 0&&(we=""+j.key),j)!N.call(j,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&j.ref===void 0||(me[Ie]=j[Ie]);var Ie=arguments.length-2;if(Ie===1)me.children=ue;else if(1<Ie){for(var Be=Array(Ie),ht=0;ht<Ie;ht++)Be[ht]=arguments[ht+2];me.children=Be}return R(G.type,we,me)},Le.createContext=function(G){return G={$$typeof:u,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},Le.createElement=function(G,j,ue){var me,we={},Ie=null;if(j!=null)for(me in j.key!==void 0&&(Ie=""+j.key),j)N.call(j,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(we[me]=j[me]);var Be=arguments.length-2;if(Be===1)we.children=ue;else if(1<Be){for(var ht=Array(Be),lt=0;lt<Be;lt++)ht[lt]=arguments[lt+2];we.children=ht}if(G&&G.defaultProps)for(me in Be=G.defaultProps,Be)we[me]===void 0&&(we[me]=Be[me]);return R(G,Ie,we)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(G){return{$$typeof:f,render:G}},Le.isValidElement=O,Le.lazy=function(G){return{$$typeof:v,_payload:{_status:-1,_result:G},_init:_e}},Le.memo=function(G,j){return{$$typeof:h,type:G,compare:j===void 0?null:j}},Le.startTransition=function(G){var j=M.T,ue={};M.T=ue;try{var me=G(),we=M.S;we!==null&&we(ue,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(pe,Ge)}catch(Ie){Ge(Ie)}finally{j!==null&&ue.types!==null&&(j.types=ue.types),M.T=j}},Le.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Le.use=function(G){return M.H.use(G)},Le.useActionState=function(G,j,ue){return M.H.useActionState(G,j,ue)},Le.useCallback=function(G,j){return M.H.useCallback(G,j)},Le.useContext=function(G){return M.H.useContext(G)},Le.useDebugValue=function(){},Le.useDeferredValue=function(G,j){return M.H.useDeferredValue(G,j)},Le.useEffect=function(G,j){return M.H.useEffect(G,j)},Le.useEffectEvent=function(G){return M.H.useEffectEvent(G)},Le.useId=function(){return M.H.useId()},Le.useImperativeHandle=function(G,j,ue){return M.H.useImperativeHandle(G,j,ue)},Le.useInsertionEffect=function(G,j){return M.H.useInsertionEffect(G,j)},Le.useLayoutEffect=function(G,j){return M.H.useLayoutEffect(G,j)},Le.useMemo=function(G,j){return M.H.useMemo(G,j)},Le.useOptimistic=function(G,j){return M.H.useOptimistic(G,j)},Le.useReducer=function(G,j,ue){return M.H.useReducer(G,j,ue)},Le.useRef=function(G){return M.H.useRef(G)},Le.useState=function(G){return M.H.useState(G)},Le.useSyncExternalStore=function(G,j,ue){return M.H.useSyncExternalStore(G,j,ue)},Le.useTransition=function(){return M.H.useTransition()},Le.version="19.2.3",Le}var y_;function Bm(){return y_||(y_=1,Pp.exports=qI()),Pp.exports}var oe=Bm();const LS=US(oe);var kp={exports:{}},au={},Vp={exports:{}},Up={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function zI(){return v_||(v_=1,(function(n){function e(W,de){var _e=W.length;W.push(de);e:for(;0<_e;){var Ge=_e-1>>>1,Ke=W[Ge];if(0<o(Ke,de))W[Ge]=de,W[_e]=Ke,_e=Ge;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var de=W[0],_e=W.pop();if(_e!==de){W[0]=_e;e:for(var Ge=0,Ke=W.length,G=Ke>>>1;Ge<G;){var j=2*(Ge+1)-1,ue=W[j],me=j+1,we=W[me];if(0>o(ue,_e))me<Ke&&0>o(we,ue)?(W[Ge]=we,W[me]=_e,Ge=me):(W[Ge]=ue,W[j]=_e,Ge=j);else if(me<Ke&&0>o(we,_e))W[Ge]=we,W[me]=_e,Ge=me;else break e}}return de}function o(W,de){var _e=W.sortIndex-de.sortIndex;return _e!==0?_e:W.id-de.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var g=[],h=[],v=1,T=null,S=3,w=!1,V=!1,k=!1,P=!1,$=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function re(W){for(var de=t(h);de!==null;){if(de.callback===null)i(h);else if(de.startTime<=W)i(h),de.sortIndex=de.expirationTime,e(g,de);else break;de=t(h)}}function ce(W){if(k=!1,re(W),!V)if(t(g)!==null)V=!0,pe||(pe=!0,q());else{var de=t(h);de!==null&&ft(ce,de.startTime-W)}}var pe=!1,M=-1,N=5,R=-1;function H(){return P?!0:!(n.unstable_now()-R<N)}function O(){if(P=!1,pe){var W=n.unstable_now();R=W;var de=!0;try{e:{V=!1,k&&(k=!1,F(M),M=-1),w=!0;var _e=S;try{t:{for(re(W),T=t(g);T!==null&&!(T.expirationTime>W&&H());){var Ge=T.callback;if(typeof Ge=="function"){T.callback=null,S=T.priorityLevel;var Ke=Ge(T.expirationTime<=W);if(W=n.unstable_now(),typeof Ke=="function"){T.callback=Ke,re(W),de=!0;break t}T===t(g)&&i(g),re(W)}else i(g);T=t(g)}if(T!==null)de=!0;else{var G=t(h);G!==null&&ft(ce,G.startTime-W),de=!1}}break e}finally{T=null,S=_e,w=!1}de=void 0}}finally{de?q():pe=!1}}}var q;if(typeof ee=="function")q=function(){ee(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Me=D.port2;D.port1.onmessage=O,q=function(){Me.postMessage(null)}}else q=function(){$(O,0)};function ft(W,de){M=$(function(){W(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(W){switch(S){case 1:case 2:case 3:var de=3;break;default:de=S}var _e=S;S=de;try{return W()}finally{S=_e}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(W,de){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var _e=S;S=W;try{return de()}finally{S=_e}},n.unstable_scheduleCallback=function(W,de,_e){var Ge=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ge+_e:Ge):_e=Ge,W){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=_e+Ke,W={id:v++,callback:de,priorityLevel:W,startTime:_e,expirationTime:Ke,sortIndex:-1},_e>Ge?(W.sortIndex=_e,e(h,W),t(g)===null&&W===t(h)&&(k?(F(M),M=-1):k=!0,ft(ce,_e-Ge))):(W.sortIndex=Ke,e(g,W),V||w||(V=!0,pe||(pe=!0,q()))),W},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(W){var de=S;return function(){var _e=S;S=de;try{return W.apply(this,arguments)}finally{S=_e}}}})(Up)),Up}var __;function $I(){return __||(__=1,Vp.exports=zI()),Vp.exports}var Lp={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function KI(){if(T_)return Cn;T_=1;var n=Bm();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(g,h,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:h,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Cn.createPortal=function(g,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(g,h,null,v)},Cn.flushSync=function(g){var h=u.T,v=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=h,i.p=v,i.d.f()}},Cn.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(g,h))},Cn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Cn.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var v=h.as,T=f(v,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:w}):v==="script"&&i.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Cn.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=f(h.as,h.crossOrigin);i.d.M(g,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(g)},Cn.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,T=f(v,h.crossOrigin);i.d.L(g,v,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Cn.preloadModule=function(g,h){if(typeof g=="string")if(h){var v=f(h.as,h.crossOrigin);i.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(g)},Cn.requestFormReset=function(g){i.d.r(g)},Cn.unstable_batchedUpdates=function(g,h){return g(h)},Cn.useFormState=function(g,h,v){return u.H.useFormState(g,h,v)},Cn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Cn.version="19.2.3",Cn}var E_;function OS(){if(E_)return Lp.exports;E_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lp.exports=KI(),Lp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function YI(){if(S_)return au;S_=1;var n=$I(),e=Bm(),t=OS();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function g(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return g(y),s;if(_===c)return g(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var C=!1,I=y.child;I;){if(I===l){C=!0,l=y,c=_;break}if(I===c){C=!0,c=y,l=_;break}I=I.sibling}if(!C){for(I=_.child;I;){if(I===l){C=!0,l=_,c=y;break}if(I===c){C=!0,c=_,l=y;break}I=I.sibling}if(!C)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Me(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case $:return"Profiler";case P:return"StrictMode";case ce:return"Suspense";case pe:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case V:return"Portal";case ee:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case re:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:Me(s.type)||"Memo";case N:r=s._payload,s=s._init;try{return Me(s(r))}catch{}}return null}var ft=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ge=[],Ke=-1;function G(s){return{current:s}}function j(s){0>Ke||(s.current=Ge[Ke],Ge[Ke]=null,Ke--)}function ue(s,r){Ke++,Ge[Ke]=s.current,s.current=r}var me=G(null),we=G(null),Ie=G(null),Be=G(null);function ht(s,r){switch(ue(Ie,r),ue(we,s),ue(me,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?L0(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=L0(r),s=O0(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}j(me),ue(me,s)}function lt(){j(me),j(we),j(Ie)}function Nn(s){s.memoizedState!==null&&ue(Be,s);var r=me.current,l=O0(r,s.type);r!==l&&(ue(we,s),ue(me,l))}function pi(s){we.current===s&&(j(me),j(we)),Be.current===s&&(j(Be),nu._currentValue=_e)}var ti,mi;function Sn(s){if(ti===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);ti=r&&r[1]||"",mi=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ti+s+mi}var Pi=!1;function Mn(s,r){if(!s||Pi)return"";Pi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var Q=Z}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(Z){Q=Z}s.call(ie.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),C=_[0],I=_[1];if(C&&I){var L=C.split(`
`),J=I.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===J.length)for(c=L.length-1,y=J.length-1;1<=c&&0<=y&&L[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==J[y]){var te=`
`+L[c].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=c&&0<=y);break}}}finally{Pi=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Sn(l):""}function Wi(s,r){switch(s.tag){case 26:case 27:case 5:return Sn(s.type);case 16:return Sn("Lazy");case 13:return s.child!==r&&r!==null?Sn("Suspense Fallback"):Sn("Suspense");case 19:return Sn("SuspenseList");case 0:case 15:return Mn(s.type,!1);case 11:return Mn(s.type.render,!1);case 1:return Mn(s.type,!0);case 31:return Sn("Activity");default:return""}}function ki(s){try{var r="",l=null;do r+=Wi(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var nt=Object.prototype.hasOwnProperty,pt=n.unstable_scheduleCallback,Fn=n.unstable_cancelCallback,ji=n.unstable_shouldYield,Gn=n.unstable_requestPaint,Ot=n.unstable_now,Dn=n.unstable_getCurrentPriorityLevel,Zi=n.unstable_ImmediatePriority,Vi=n.unstable_UserBlockingPriority,Pn=n.unstable_NormalPriority,sr=n.unstable_LowPriority,so=n.unstable_IdlePriority,ws=n.log,Is=n.unstable_setDisableYieldValue,hn=null,Mt=null;function Zt(s){if(typeof ws=="function"&&Is(s),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(hn,s)}catch{}}var At=Math.clz32?Math.clz32:Ui,xs=Math.log,Bn=Math.LN2;function Ui(s){return s>>>=0,s===0?32:31-(xs(s)/Bn|0)|0}var kn=256,Li=262144,Ct=4194304;function qn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function le(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=qn(c):(C&=I,C!==0?y=qn(C):l||(l=I&~s,l!==0&&(y=qn(l))))):(I=c&~_,I!==0?y=qn(I):C!==0?y=qn(C):l||(l=c&~s,l!==0&&(y=qn(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function Ae(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Pe(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $e(){var s=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),s}function it(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function on(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Vn(s,r,l,c,y,_){var C=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var I=s.entanglements,L=s.expirationTimes,J=s.hiddenUpdates;for(l=C&~l;0<l;){var te=31-At(l),ie=1<<te;I[te]=0,L[te]=-1;var Q=J[te];if(Q!==null)for(J[te]=null,te=0;te<Q.length;te++){var Z=Q[te];Z!==null&&(Z.lane&=-536870913)}l&=~ie}c!==0&&an(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(C&~r))}function an(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-At(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function en(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-At(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function bt(s,r){var l=r&-r;return l=(l&42)!==0?1:Rs(l),(l&(s.suspendedLanes|r))!==0?0:l}function Rs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function zn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function qo(){var s=de.p;return s!==0?s:(s=window.event,s===void 0?32:a_(s.type))}function ni(s,r){var l=de.p;try{return de.p=s,r()}finally{de.p=l}}var ii=Math.random().toString(36).slice(2),kt="__reactFiber$"+ii,Ht="__reactProps$"+ii,si="__reactContainer$"+ii,Vt="__reactEvents$"+ii,U="__reactListeners$"+ii,fe="__reactHandles$"+ii,Ee="__reactResources$"+ii,Ne="__reactMarker$"+ii;function be(s){delete s[kt],delete s[Ht],delete s[Vt],delete s[U],delete s[fe]}function st(s){var r=s[kt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[si]||l[kt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=$0(s);s!==null;){if(l=s[kt])return l;s=$0(s)}return r}s=l,l=s.parentNode}return null}function An(s){if(s=s[kt]||s[si]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function ln(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function gi(s){var r=s[Ee];return r||(r=s[Ee]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function zt(s){s[Ne]=!0}var ul=new Set,cl={};function es(s,r){ts(s,r),ts(s+"Capture",r)}function ts(s,r){for(cl[s]=r,s=0;s<r.length;s++)ul.add(r[s])}var dl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fl={},hl={};function $u(s){return nt.call(hl,s)?!0:nt.call(fl,s)?!1:dl.test(s)?hl[s]=!0:(fl[s]=!0,!1)}function zo(s,r,l){if($u(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function ri(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function $t(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function rr(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pl(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(C){l=""+C,_.call(this,C)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(C){l=""+C},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function mt(s){if(!s._valueTracker){var r=rr(s)?"checked":"value";s._valueTracker=pl(s,r,""+s[r])}}function ro(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=rr(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function ns(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var oo=/[\n"\\]/g;function $n(s){return s.replace(oo,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function $o(s,r,l,c,y,_,C,I){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),r!=null?C==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+un(r)):s.value!==""+un(r)&&(s.value=""+un(r)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),r!=null?ml(s,C,un(r)):l!=null?ml(s,C,un(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+un(I):s.removeAttribute("name")}function Ku(s,r,l,c,y,_,C,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){mt(s);return}l=l!=null?""+un(l):"",r=r!=null?""+un(r):l,I||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=I?s.checked:!!c,s.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),mt(s)}function ml(s,r,l){r==="number"&&ns(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function or(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+un(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Yu(s,r,l){if(r!=null&&(r=""+un(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+un(l):""}function ar(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(ft(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=un(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),mt(s)}function Kn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Ju=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Ju.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function yl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&gl(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&gl(s,_,r[_])}function Ko(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yo(s){return lr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Oi(){}var vl=null;function yi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ur=null,is=null;function ao(s){var r=An(s);if(r&&(s=r.stateNode)){var l=s[Ht]||null;e:switch(s=r.stateNode,r.type){case"input":if($o(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+$n(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Ht]||null;if(!y)throw Error(i(90));$o(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&ro(c)}break e;case"textarea":Yu(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&or(s,!!l.multiple,r,!1)}}}var Jo=!1;function cr(s,r,l){if(Jo)return s(r,l);Jo=!0;try{var c=s(r);return c}finally{if(Jo=!1,(ur!==null||is!==null)&&(Bc(),ur&&(r=ur,s=is,is=ur=null,ao(r),s)))for(r=0;r<s.length;r++)ao(s[r])}}function Hi(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Ht]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lo=!1;if(vi)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){lo=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{lo=!1}var ss=null,_l=null,uo=null;function Tl(){if(uo)return uo;var s,r=_l,l=r.length,c,y="value"in ss?ss.value:ss.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var C=l-s;for(c=1;c<=C&&r[l-c]===y[_-c];c++);return uo=y.slice(s,1<c?1-c:void 0)}function co(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Ns(){return!0}function Fi(){return!1}function pn(s){function r(l,c,y,_,C){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(l=s[I],this[I]=l?l(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ns:Fi,this.isPropagationStopped=Fi,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),r}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=pn(Ms),dr=T({},Ms,{view:0,detail:0}),El=pn(dr),fr,Qo,os,Xo=T({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==os&&(os&&s.type==="mousemove"?(fr=s.screenX-os.screenX,Qo=s.screenY-os.screenY):Qo=fr=0,os=s),fr)},movementY:function(s){return"movementY"in s?s.movementY:Qo}}),Sl=pn(Xo),fo=T({},Xo,{dataTransfer:0}),Xu=pn(fo),Wu=T({},dr,{relatedTarget:0}),ho=pn(Wu),Al=T({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),ju=pn(Al),Wo=T({},Ms,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Zu=pn(Wo),ec=T({},Ms,{data:0}),as=pn(ec),tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=ic[s])?!!r[s]:!1}function hr(){return sc}var Un=T({},dr,{key:function(s){if(s.key){var r=tc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=co(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?nc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hr,charCode:function(s){return s.type==="keypress"?co(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?co(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),rc=pn(Un),oc=T({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ds=pn(oc),m=T({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hr}),E=pn(m),b=T({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=pn(b),K=T({},Xo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=pn(K),he=T({},Ms,{newState:0,oldState:0}),He=pn(he),Ft=[9,13,27,32],ut=vi&&"CompositionEvent"in window,Rt=null;vi&&"documentMode"in document&&(Rt=document.documentMode);var _i=vi&&"TextEvent"in window&&!Rt,ls=vi&&(!ut||Rt&&8<Rt&&11>=Rt),Gi=" ",Bi=!1;function po(s,r){switch(s){case"keyup":return Ft.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Zo=!1;function dw(s,r){switch(s){case"compositionend":return jo(r);case"keypress":return r.which!==32?null:(Bi=!0,Gi);case"textInput":return s=r.data,s===Gi&&Bi?null:s;default:return null}}function fw(s,r){if(Zo)return s==="compositionend"||!ut&&po(s,r)?(s=Tl(),uo=_l=ss=null,Zo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ls&&r.locale!=="ko"?null:r.data;default:return null}}var hw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!hw[s.type]:r==="textarea"}function Qg(s,r,l,c){ur?is?is.push(c):is=[c]:ur=c,r=Qc(r,"onChange"),0<r.length&&(l=new rs("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Cl=null,bl=null;function pw(s){M0(s,0)}function ac(s){var r=ln(s);if(ro(r))return s}function Xg(s,r){if(s==="change")return r}var Wg=!1;if(vi){var Hf;if(vi){var Ff="oninput"in document;if(!Ff){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),Ff=typeof jg.oninput=="function"}Hf=Ff}else Hf=!1;Wg=Hf&&(!document.documentMode||9<document.documentMode)}function Zg(){Cl&&(Cl.detachEvent("onpropertychange",ey),bl=Cl=null)}function ey(s){if(s.propertyName==="value"&&ac(bl)){var r=[];Qg(r,bl,s,yi(s)),cr(pw,r)}}function mw(s,r,l){s==="focusin"?(Zg(),Cl=r,bl=l,Cl.attachEvent("onpropertychange",ey)):s==="focusout"&&Zg()}function gw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ac(bl)}function yw(s,r){if(s==="click")return ac(r)}function vw(s,r){if(s==="input"||s==="change")return ac(r)}function _w(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var oi=typeof Object.is=="function"?Object.is:_w;function wl(s,r){if(oi(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!nt.call(r,y)||!oi(s[y],r[y]))return!1}return!0}function ty(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ny(s,r){var l=ty(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ty(l)}}function iy(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?iy(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function sy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=ns(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=ns(s.document)}return r}function Gf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var Tw=vi&&"documentMode"in document&&11>=document.documentMode,ea=null,Bf=null,Il=null,qf=!1;function ry(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;qf||ea==null||ea!==ns(c)||(c=ea,"selectionStart"in c&&Gf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Il&&wl(Il,c)||(Il=c,c=Qc(Bf,"onSelect"),0<c.length&&(r=new rs("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=ea)))}function mo(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var ta={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionrun:mo("Transition","TransitionRun"),transitionstart:mo("Transition","TransitionStart"),transitioncancel:mo("Transition","TransitionCancel"),transitionend:mo("Transition","TransitionEnd")},zf={},oy={};vi&&(oy=document.createElement("div").style,"AnimationEvent"in window||(delete ta.animationend.animation,delete ta.animationiteration.animation,delete ta.animationstart.animation),"TransitionEvent"in window||delete ta.transitionend.transition);function go(s){if(zf[s])return zf[s];if(!ta[s])return s;var r=ta[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in oy)return zf[s]=r[l];return s}var ay=go("animationend"),ly=go("animationiteration"),uy=go("animationstart"),Ew=go("transitionrun"),Sw=go("transitionstart"),Aw=go("transitioncancel"),cy=go("transitionend"),dy=new Map,$f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$f.push("scrollEnd");function qi(s,r){dy.set(s,r),es(r,[s])}var lc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ti=[],na=0,Kf=0;function uc(){for(var s=na,r=Kf=na=0;r<s;){var l=Ti[r];Ti[r++]=null;var c=Ti[r];Ti[r++]=null;var y=Ti[r];Ti[r++]=null;var _=Ti[r];if(Ti[r++]=null,c!==null&&y!==null){var C=c.pending;C===null?y.next=y:(y.next=C.next,C.next=y),c.pending=y}_!==0&&fy(l,y,_)}}function cc(s,r,l,c){Ti[na++]=s,Ti[na++]=r,Ti[na++]=l,Ti[na++]=c,Kf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Yf(s,r,l,c){return cc(s,r,l,c),dc(s)}function yo(s,r){return cc(s,null,null,r),dc(s)}function fy(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-At(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function dc(s){if(50<Ql)throw Ql=0,np=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var ia={};function Cw(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(s,r,l,c){return new Cw(s,r,l,c)}function Jf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ps(s,r){var l=s.alternate;return l===null?(l=ai(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function hy(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function fc(s,r,l,c,y,_){var C=0;if(c=s,typeof s=="function")Jf(s)&&(C=1);else if(typeof s=="string")C=RI(s,l,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=ai(31,l,r,y),s.elementType=R,s.lanes=_,s;case k:return vo(l.children,y,_,r);case P:C=8,y|=24;break;case $:return s=ai(12,l,r,y|2),s.elementType=$,s.lanes=_,s;case ce:return s=ai(13,l,r,y),s.elementType=ce,s.lanes=_,s;case pe:return s=ai(19,l,r,y),s.elementType=pe,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ee:C=10;break e;case F:C=9;break e;case re:C=11;break e;case M:C=14;break e;case N:C=16,c=null;break e}C=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=ai(C,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function vo(s,r,l,c){return s=ai(7,s,c,r),s.lanes=l,s}function Qf(s,r,l){return s=ai(6,s,null,r),s.lanes=l,s}function py(s){var r=ai(18,null,null,0);return r.stateNode=s,r}function Xf(s,r,l){return r=ai(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var my=new WeakMap;function Ei(s,r){if(typeof s=="object"&&s!==null){var l=my.get(s);return l!==void 0?l:(r={value:s,source:r,stack:ki(r)},my.set(s,r),r)}return{value:s,source:r,stack:ki(r)}}var sa=[],ra=0,hc=null,xl=0,Si=[],Ai=0,pr=null,us=1,cs="";function ks(s,r){sa[ra++]=xl,sa[ra++]=hc,hc=s,xl=r}function gy(s,r,l){Si[Ai++]=us,Si[Ai++]=cs,Si[Ai++]=pr,pr=s;var c=us;s=cs;var y=32-At(c)-1;c&=~(1<<y),l+=1;var _=32-At(r)+y;if(30<_){var C=y-y%5;_=(c&(1<<C)-1).toString(32),c>>=C,y-=C,us=1<<32-At(r)+y|l<<y|c,cs=_+s}else us=1<<_|l<<y|c,cs=s}function Wf(s){s.return!==null&&(ks(s,1),gy(s,1,0))}function jf(s){for(;s===hc;)hc=sa[--ra],sa[ra]=null,xl=sa[--ra],sa[ra]=null;for(;s===pr;)pr=Si[--Ai],Si[Ai]=null,cs=Si[--Ai],Si[Ai]=null,us=Si[--Ai],Si[Ai]=null}function yy(s,r){Si[Ai++]=us,Si[Ai++]=cs,Si[Ai++]=pr,us=r.id,cs=r.overflow,pr=s}var mn=null,wt=null,et=!1,mr=null,Ci=!1,Zf=Error(i(519));function gr(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rl(Ei(r,s)),Zf}function vy(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[kt]=s,r[Ht]=c,l){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(l=0;l<Wl.length;l++)Je(Wl[l],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":Je("invalid",r),Ku(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Je("invalid",r);break;case"textarea":Je("invalid",r),ar(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||V0(r.textContent,l)?(c.popover!=null&&(Je("beforetoggle",r),Je("toggle",r)),c.onScroll!=null&&Je("scroll",r),c.onScrollEnd!=null&&Je("scrollend",r),c.onClick!=null&&(r.onclick=Oi),r=!0):r=!1,r||gr(s,!0)}function _y(s){for(mn=s.return;mn;)switch(mn.tag){case 5:case 31:case 13:Ci=!1;return;case 27:case 3:Ci=!0;return;default:mn=mn.return}}function oa(s){if(s!==mn)return!1;if(!et)return _y(s),et=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||yp(s.type,s.memoizedProps)),l=!l),l&&wt&&gr(s),_y(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));wt=z0(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));wt=z0(s)}else r===27?(r=wt,Nr(s.type)?(s=Sp,Sp=null,wt=s):wt=r):wt=mn?wi(s.stateNode.nextSibling):null;return!0}function _o(){wt=mn=null,et=!1}function eh(){var s=mr;return s!==null&&(Xn===null?Xn=s:Xn.push.apply(Xn,s),mr=null),s}function Rl(s){mr===null?mr=[s]:mr.push(s)}var th=G(null),To=null,Vs=null;function yr(s,r,l){ue(th,r._currentValue),r._currentValue=l}function Us(s){s._currentValue=th.current,j(th)}function nh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function ih(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var C=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var L=0;L<r.length;L++)if(I.context===r[L]){_.lanes|=l,I=_.alternate,I!==null&&(I.lanes|=l),nh(_.return,l,s),c||(C=null);break e}_=I.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(i(341));C.lanes|=l,_=C.alternate,_!==null&&(_.lanes|=l),nh(C,l,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function aa(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var I=y.type;oi(y.pendingProps.value,C.value)||(s!==null?s.push(I):s=[I])}}else if(y===Be.current){if(C=y.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(nu):s=[nu])}y=y.return}s!==null&&ih(r,s,l,c),r.flags|=262144}function pc(s){for(s=s.firstContext;s!==null;){if(!oi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Eo(s){To=s,Vs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gn(s){return Ty(To,s)}function mc(s,r){return To===null&&Eo(s),Ty(s,r)}function Ty(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Vs===null){if(s===null)throw Error(i(308));Vs=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Vs=Vs.next=r;return l}var bw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},ww=n.unstable_scheduleCallback,Iw=n.unstable_NormalPriority,Kt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sh(){return{controller:new bw,data:new Map,refCount:0}}function Nl(s){s.refCount--,s.refCount===0&&ww(Iw,function(){s.controller.abort()})}var Ml=null,rh=0,la=0,ua=null;function xw(s,r){if(Ml===null){var l=Ml=[];rh=0,la=lp(),ua={status:"pending",value:void 0,then:function(c){l.push(c)}}}return rh++,r.then(Ey,Ey),r}function Ey(){if(--rh===0&&Ml!==null){ua!==null&&(ua.status="fulfilled");var s=Ml;Ml=null,la=0,ua=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Rw(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Sy=W.S;W.S=function(s,r){r0=Ot(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&xw(s,r),Sy!==null&&Sy(s,r)};var So=G(null);function oh(){var s=So.current;return s!==null?s:St.pooledCache}function gc(s,r){r===null?ue(So,So.current):ue(So,r.pool)}function Ay(){var s=oh();return s===null?null:{parent:Kt._currentValue,pool:s}}var ca=Error(i(460)),ah=Error(i(474)),yc=Error(i(542)),vc={then:function(){}};function Cy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function by(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Oi,Oi),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Iy(s),s;default:if(typeof r.status=="string")r.then(Oi,Oi);else{if(s=St,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Iy(s),s}throw Co=r,ca}}function Ao(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Co=l,ca):l}}var Co=null;function wy(){if(Co===null)throw Error(i(459));var s=Co;return Co=null,s}function Iy(s){if(s===ca||s===yc)throw Error(i(483))}var da=null,Dl=0;function _c(s){var r=Dl;return Dl+=1,da===null&&(da=[]),by(da,s,r)}function Pl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Tc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function xy(s){function r(z,B){if(s){var Y=z.deletions;Y===null?(z.deletions=[B],z.flags|=16):Y.push(B)}}function l(z,B){if(!s)return null;for(;B!==null;)r(z,B),B=B.sibling;return null}function c(z){for(var B=new Map;z!==null;)z.key!==null?B.set(z.key,z):B.set(z.index,z),z=z.sibling;return B}function y(z,B){return z=Ps(z,B),z.index=0,z.sibling=null,z}function _(z,B,Y){return z.index=Y,s?(Y=z.alternate,Y!==null?(Y=Y.index,Y<B?(z.flags|=67108866,B):Y):(z.flags|=67108866,B)):(z.flags|=1048576,B)}function C(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function I(z,B,Y,ne){return B===null||B.tag!==6?(B=Qf(Y,z.mode,ne),B.return=z,B):(B=y(B,Y),B.return=z,B)}function L(z,B,Y,ne){var Ce=Y.type;return Ce===k?te(z,B,Y.props.children,ne,Y.key):B!==null&&(B.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&Ao(Ce)===B.type)?(B=y(B,Y.props),Pl(B,Y),B.return=z,B):(B=fc(Y.type,Y.key,Y.props,null,z.mode,ne),Pl(B,Y),B.return=z,B)}function J(z,B,Y,ne){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=Xf(Y,z.mode,ne),B.return=z,B):(B=y(B,Y.children||[]),B.return=z,B)}function te(z,B,Y,ne,Ce){return B===null||B.tag!==7?(B=vo(Y,z.mode,ne,Ce),B.return=z,B):(B=y(B,Y),B.return=z,B)}function ie(z,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Qf(""+B,z.mode,Y),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return Y=fc(B.type,B.key,B.props,null,z.mode,Y),Pl(Y,B),Y.return=z,Y;case V:return B=Xf(B,z.mode,Y),B.return=z,B;case N:return B=Ao(B),ie(z,B,Y)}if(ft(B)||q(B))return B=vo(B,z.mode,Y,null),B.return=z,B;if(typeof B.then=="function")return ie(z,_c(B),Y);if(B.$$typeof===ee)return ie(z,mc(z,B),Y);Tc(z,B)}return null}function Q(z,B,Y,ne){var Ce=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ce!==null?null:I(z,B,""+Y,ne);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===Ce?L(z,B,Y,ne):null;case V:return Y.key===Ce?J(z,B,Y,ne):null;case N:return Y=Ao(Y),Q(z,B,Y,ne)}if(ft(Y)||q(Y))return Ce!==null?null:te(z,B,Y,ne,null);if(typeof Y.then=="function")return Q(z,B,_c(Y),ne);if(Y.$$typeof===ee)return Q(z,B,mc(z,Y),ne);Tc(z,Y)}return null}function Z(z,B,Y,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get(Y)||null,I(B,z,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return z=z.get(ne.key===null?Y:ne.key)||null,L(B,z,ne,Ce);case V:return z=z.get(ne.key===null?Y:ne.key)||null,J(B,z,ne,Ce);case N:return ne=Ao(ne),Z(z,B,Y,ne,Ce)}if(ft(ne)||q(ne))return z=z.get(Y)||null,te(B,z,ne,Ce,null);if(typeof ne.then=="function")return Z(z,B,Y,_c(ne),Ce);if(ne.$$typeof===ee)return Z(z,B,Y,mc(B,ne),Ce);Tc(B,ne)}return null}function ve(z,B,Y,ne){for(var Ce=null,rt=null,Te=B,qe=B=0,Xe=null;Te!==null&&qe<Y.length;qe++){Te.index>qe?(Xe=Te,Te=null):Xe=Te.sibling;var ot=Q(z,Te,Y[qe],ne);if(ot===null){Te===null&&(Te=Xe);break}s&&Te&&ot.alternate===null&&r(z,Te),B=_(ot,B,qe),rt===null?Ce=ot:rt.sibling=ot,rt=ot,Te=Xe}if(qe===Y.length)return l(z,Te),et&&ks(z,qe),Ce;if(Te===null){for(;qe<Y.length;qe++)Te=ie(z,Y[qe],ne),Te!==null&&(B=_(Te,B,qe),rt===null?Ce=Te:rt.sibling=Te,rt=Te);return et&&ks(z,qe),Ce}for(Te=c(Te);qe<Y.length;qe++)Xe=Z(Te,z,qe,Y[qe],ne),Xe!==null&&(s&&Xe.alternate!==null&&Te.delete(Xe.key===null?qe:Xe.key),B=_(Xe,B,qe),rt===null?Ce=Xe:rt.sibling=Xe,rt=Xe);return s&&Te.forEach(function(Vr){return r(z,Vr)}),et&&ks(z,qe),Ce}function Re(z,B,Y,ne){if(Y==null)throw Error(i(151));for(var Ce=null,rt=null,Te=B,qe=B=0,Xe=null,ot=Y.next();Te!==null&&!ot.done;qe++,ot=Y.next()){Te.index>qe?(Xe=Te,Te=null):Xe=Te.sibling;var Vr=Q(z,Te,ot.value,ne);if(Vr===null){Te===null&&(Te=Xe);break}s&&Te&&Vr.alternate===null&&r(z,Te),B=_(Vr,B,qe),rt===null?Ce=Vr:rt.sibling=Vr,rt=Vr,Te=Xe}if(ot.done)return l(z,Te),et&&ks(z,qe),Ce;if(Te===null){for(;!ot.done;qe++,ot=Y.next())ot=ie(z,ot.value,ne),ot!==null&&(B=_(ot,B,qe),rt===null?Ce=ot:rt.sibling=ot,rt=ot);return et&&ks(z,qe),Ce}for(Te=c(Te);!ot.done;qe++,ot=Y.next())ot=Z(Te,z,qe,ot.value,ne),ot!==null&&(s&&ot.alternate!==null&&Te.delete(ot.key===null?qe:ot.key),B=_(ot,B,qe),rt===null?Ce=ot:rt.sibling=ot,rt=ot);return s&&Te.forEach(function(FI){return r(z,FI)}),et&&ks(z,qe),Ce}function Et(z,B,Y,ne){if(typeof Y=="object"&&Y!==null&&Y.type===k&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var Ce=Y.key;B!==null;){if(B.key===Ce){if(Ce=Y.type,Ce===k){if(B.tag===7){l(z,B.sibling),ne=y(B,Y.props.children),ne.return=z,z=ne;break e}}else if(B.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&Ao(Ce)===B.type){l(z,B.sibling),ne=y(B,Y.props),Pl(ne,Y),ne.return=z,z=ne;break e}l(z,B);break}else r(z,B);B=B.sibling}Y.type===k?(ne=vo(Y.props.children,z.mode,ne,Y.key),ne.return=z,z=ne):(ne=fc(Y.type,Y.key,Y.props,null,z.mode,ne),Pl(ne,Y),ne.return=z,z=ne)}return C(z);case V:e:{for(Ce=Y.key;B!==null;){if(B.key===Ce)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){l(z,B.sibling),ne=y(B,Y.children||[]),ne.return=z,z=ne;break e}else{l(z,B);break}else r(z,B);B=B.sibling}ne=Xf(Y,z.mode,ne),ne.return=z,z=ne}return C(z);case N:return Y=Ao(Y),Et(z,B,Y,ne)}if(ft(Y))return ve(z,B,Y,ne);if(q(Y)){if(Ce=q(Y),typeof Ce!="function")throw Error(i(150));return Y=Ce.call(Y),Re(z,B,Y,ne)}if(typeof Y.then=="function")return Et(z,B,_c(Y),ne);if(Y.$$typeof===ee)return Et(z,B,mc(z,Y),ne);Tc(z,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(l(z,B.sibling),ne=y(B,Y),ne.return=z,z=ne):(l(z,B),ne=Qf(Y,z.mode,ne),ne.return=z,z=ne),C(z)):l(z,B)}return function(z,B,Y,ne){try{Dl=0;var Ce=Et(z,B,Y,ne);return da=null,Ce}catch(Te){if(Te===ca||Te===yc)throw Te;var rt=ai(29,Te,null,z.mode);return rt.lanes=ne,rt.return=z,rt}finally{}}}var bo=xy(!0),Ry=xy(!1),vr=!1;function lh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function _r(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Tr(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(ct&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=dc(s),fy(s,null,l),r}return cc(s,c,r,l),dc(s)}function kl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,en(s,l)}}function ch(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=C:_=_.next=C,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var dh=!1;function Vl(){if(dh){var s=ua;if(s!==null)throw s}}function Ul(s,r,l,c){dh=!1;var y=s.updateQueue;vr=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var L=I,J=L.next;L.next=null,C===null?_=J:C.next=J,C=L;var te=s.alternate;te!==null&&(te=te.updateQueue,I=te.lastBaseUpdate,I!==C&&(I===null?te.firstBaseUpdate=J:I.next=J,te.lastBaseUpdate=L))}if(_!==null){var ie=y.baseState;C=0,te=J=L=null,I=_;do{var Q=I.lane&-536870913,Z=Q!==I.lane;if(Z?(Qe&Q)===Q:(c&Q)===Q){Q!==0&&Q===la&&(dh=!0),te!==null&&(te=te.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ve=s,Re=I;Q=r;var Et=l;switch(Re.tag){case 1:if(ve=Re.payload,typeof ve=="function"){ie=ve.call(Et,ie,Q);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Re.payload,Q=typeof ve=="function"?ve.call(Et,ie,Q):ve,Q==null)break e;ie=T({},ie,Q);break e;case 2:vr=!0}}Q=I.callback,Q!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},te===null?(J=te=Z,L=ie):te=te.next=Z,C|=Q;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);te===null&&(L=ie),y.baseState=L,y.firstBaseUpdate=J,y.lastBaseUpdate=te,_===null&&(y.shared.lanes=0),br|=C,s.lanes=C,s.memoizedState=ie}}function Ny(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function My(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Ny(l[s],r)}var fa=G(null),Ec=G(0);function Dy(s,r){s=$s,ue(Ec,s),ue(fa,r),$s=s|r.baseLanes}function fh(){ue(Ec,$s),ue(fa,fa.current)}function hh(){$s=Ec.current,j(fa),j(Ec)}var li=G(null),bi=null;function Er(s){var r=s.alternate;ue(Gt,Gt.current&1),ue(li,s),bi===null&&(r===null||fa.current!==null||r.memoizedState!==null)&&(bi=s)}function ph(s){ue(Gt,Gt.current),ue(li,s),bi===null&&(bi=s)}function Py(s){s.tag===22?(ue(Gt,Gt.current),ue(li,s),bi===null&&(bi=s)):Sr()}function Sr(){ue(Gt,Gt.current),ue(li,li.current)}function ui(s){j(li),bi===s&&(bi=null),j(Gt)}var Gt=G(0);function Sc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Tp(l)||Ep(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ls=0,Fe=null,_t=null,Yt=null,Ac=!1,ha=!1,wo=!1,Cc=0,Ll=0,pa=null,Nw=0;function Ut(){throw Error(i(321))}function mh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!oi(s[l],r[l]))return!1;return!0}function gh(s,r,l,c,y,_){return Ls=_,Fe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=s===null||s.memoizedState===null?gv:Mh,wo=!1,_=l(c,y),wo=!1,ha&&(_=Vy(r,l,c,y)),ky(s),_}function ky(s){W.H=Fl;var r=_t!==null&&_t.next!==null;if(Ls=0,Yt=_t=Fe=null,Ac=!1,Ll=0,pa=null,r)throw Error(i(300));s===null||Jt||(s=s.dependencies,s!==null&&pc(s)&&(Jt=!0))}function Vy(s,r,l,c){Fe=s;var y=0;do{if(ha&&(pa=null),Ll=0,ha=!1,25<=y)throw Error(i(301));if(y+=1,Yt=_t=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=yv,_=r(l,c)}while(ha);return _}function Mw(){var s=W.H,r=s.useState()[0];return r=typeof r.then=="function"?Ol(r):r,s=s.useState()[0],(_t!==null?_t.memoizedState:null)!==s&&(Fe.flags|=1024),r}function yh(){var s=Cc!==0;return Cc=0,s}function vh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function _h(s){if(Ac){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Ac=!1}Ls=0,Yt=_t=Fe=null,ha=!1,Ll=Cc=0,pa=null}function Ln(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Fe.memoizedState=Yt=s:Yt=Yt.next=s,Yt}function Bt(){if(_t===null){var s=Fe.alternate;s=s!==null?s.memoizedState:null}else s=_t.next;var r=Yt===null?Fe.memoizedState:Yt.next;if(r!==null)Yt=r,_t=s;else{if(s===null)throw Fe.alternate===null?Error(i(467)):Error(i(310));_t=s,s={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Yt===null?Fe.memoizedState=Yt=s:Yt=Yt.next=s}return Yt}function bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(s){var r=Ll;return Ll+=1,pa===null&&(pa=[]),s=by(pa,s,r),r=Fe,(Yt===null?r.memoizedState:Yt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?gv:Mh),s}function wc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ol(s);if(s.$$typeof===ee)return gn(s)}throw Error(i(438,String(s)))}function Th(s){var r=null,l=Fe.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=bc(),Fe.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=H;return r.index++,l}function Os(s,r){return typeof r=="function"?r(s):r}function Ic(s){var r=Bt();return Eh(r,_t,s)}function Eh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var I=C=null,L=null,J=r,te=!1;do{var ie=J.lane&-536870913;if(ie!==J.lane?(Qe&ie)===ie:(Ls&ie)===ie){var Q=J.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ie===la&&(te=!0);else if((Ls&Q)===Q){J=J.next,Q===la&&(te=!0);continue}else ie={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(I=L=ie,C=_):L=L.next=ie,Fe.lanes|=Q,br|=Q;ie=J.action,wo&&l(_,ie),_=J.hasEagerState?J.eagerState:l(_,ie)}else Q={lane:ie,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(I=L=Q,C=_):L=L.next=Q,Fe.lanes|=ie,br|=ie;J=J.next}while(J!==null&&J!==r);if(L===null?C=_:L.next=I,!oi(_,s.memoizedState)&&(Jt=!0,te&&(l=ua,l!==null)))throw l;s.memoizedState=_,s.baseState=C,s.baseQueue=L,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Sh(s){var r=Bt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var C=y=y.next;do _=s(_,C.action),C=C.next;while(C!==y);oi(_,r.memoizedState)||(Jt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function Uy(s,r,l){var c=Fe,y=Bt(),_=et;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var C=!oi((_t||y).memoizedState,l);if(C&&(y.memoizedState=l,Jt=!0),y=y.queue,bh(Hy.bind(null,c,y,s),[s]),y.getSnapshot!==r||C||Yt!==null&&Yt.memoizedState.tag&1){if(c.flags|=2048,ma(9,{destroy:void 0},Oy.bind(null,c,y,l,r),null),St===null)throw Error(i(349));_||(Ls&127)!==0||Ly(c,r,l)}return l}function Ly(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Fe.updateQueue,r===null?(r=bc(),Fe.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function Oy(s,r,l,c){r.value=l,r.getSnapshot=c,Fy(r)&&Gy(s)}function Hy(s,r,l){return l(function(){Fy(r)&&Gy(s)})}function Fy(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!oi(s,l)}catch{return!0}}function Gy(s){var r=yo(s,2);r!==null&&Wn(r,s,2)}function Ah(s){var r=Ln();if(typeof s=="function"){var l=s;if(s=l(),wo){Zt(!0);try{l()}finally{Zt(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:s},r}function By(s,r,l,c){return s.baseState=l,Eh(s,_t,typeof c=="function"?c:Os)}function Dw(s,r,l,c,y){if(Nc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};W.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,qy(r,_)):(_.next=l.next,r.pending=l.next=_)}}function qy(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=W.T,C={};W.T=C;try{var I=l(y,c),L=W.S;L!==null&&L(C,I),zy(s,r,I)}catch(J){Ch(s,r,J)}finally{_!==null&&C.types!==null&&(_.types=C.types),W.T=_}}else try{_=l(y,c),zy(s,r,_)}catch(J){Ch(s,r,J)}}function zy(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){$y(s,r,c)},function(c){return Ch(s,r,c)}):$y(s,r,l)}function $y(s,r,l){r.status="fulfilled",r.value=l,Ky(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,qy(s,l)))}function Ch(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Ky(r),r=r.next;while(r!==c)}s.action=null}function Ky(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Yy(s,r){return r}function Jy(s,r){if(et){var l=St.formState;if(l!==null){e:{var c=Fe;if(et){if(wt){t:{for(var y=wt,_=Ci;y.nodeType!==8;){if(!_){y=null;break t}if(y=wi(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){wt=wi(y.nextSibling),c=y.data==="F!";break e}}gr(c)}c=!1}c&&(r=l[0])}}return l=Ln(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yy,lastRenderedState:r},l.queue=c,l=hv.bind(null,Fe,c),c.dispatch=l,c=Ah(!1),_=Nh.bind(null,Fe,!1,c.queue),c=Ln(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=Dw.bind(null,Fe,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function Qy(s){var r=Bt();return Xy(r,_t,s)}function Xy(s,r,l){if(r=Eh(s,r,Yy)[0],s=Ic(Os)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Ol(r)}catch(C){throw C===ca?yc:C}else c=r;r=Bt();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(Fe.flags|=2048,ma(9,{destroy:void 0},Pw.bind(null,y,l),null)),[c,_,s]}function Pw(s,r){s.action=r}function Wy(s){var r=Bt(),l=_t;if(l!==null)return Xy(r,l,s);Bt(),r=r.memoizedState,l=Bt();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function ma(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Fe.updateQueue,r===null&&(r=bc(),Fe.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function jy(){return Bt().memoizedState}function xc(s,r,l,c){var y=Ln();Fe.flags|=s,y.memoizedState=ma(1|r,{destroy:void 0},l,c===void 0?null:c)}function Rc(s,r,l,c){var y=Bt();c=c===void 0?null:c;var _=y.memoizedState.inst;_t!==null&&c!==null&&mh(c,_t.memoizedState.deps)?y.memoizedState=ma(r,_,l,c):(Fe.flags|=s,y.memoizedState=ma(1|r,_,l,c))}function Zy(s,r){xc(8390656,8,s,r)}function bh(s,r){Rc(2048,8,s,r)}function kw(s){Fe.flags|=4;var r=Fe.updateQueue;if(r===null)r=bc(),Fe.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function ev(s){var r=Bt().memoizedState;return kw({ref:r,nextImpl:s}),function(){if((ct&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function tv(s,r){return Rc(4,2,s,r)}function nv(s,r){return Rc(4,4,s,r)}function iv(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function sv(s,r,l){l=l!=null?l.concat([s]):null,Rc(4,4,iv.bind(null,r,s),l)}function wh(){}function rv(s,r){var l=Bt();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&mh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function ov(s,r){var l=Bt();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&mh(r,c[1]))return c[0];if(c=s(),wo){Zt(!0);try{s()}finally{Zt(!1)}}return l.memoizedState=[c,r],c}function Ih(s,r,l){return l===void 0||(Ls&1073741824)!==0&&(Qe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=a0(),Fe.lanes|=s,br|=s,l)}function av(s,r,l,c){return oi(l,r)?l:fa.current!==null?(s=Ih(s,l,c),oi(s,r)||(Jt=!0),s):(Ls&42)===0||(Ls&1073741824)!==0&&(Qe&261930)===0?(Jt=!0,s.memoizedState=l):(s=a0(),Fe.lanes|=s,br|=s,r)}function lv(s,r,l,c,y){var _=de.p;de.p=_!==0&&8>_?_:8;var C=W.T,I={};W.T=I,Nh(s,!1,r,l);try{var L=y(),J=W.S;if(J!==null&&J(I,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=Rw(L,c);Hl(s,r,te,fi(s))}else Hl(s,r,c,fi(s))}catch(ie){Hl(s,r,{then:function(){},status:"rejected",reason:ie},fi())}finally{de.p=_,C!==null&&I.types!==null&&(C.types=I.types),W.T=C}}function Vw(){}function xh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=uv(s).queue;lv(s,y,r,_e,l===null?Vw:function(){return cv(s),l(c)})}function uv(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:_e},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function cv(s){var r=uv(s);r.next===null&&(r=s.alternate.memoizedState),Hl(s,r.next.queue,{},fi())}function Rh(){return gn(nu)}function dv(){return Bt().memoizedState}function fv(){return Bt().memoizedState}function Uw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=fi();s=_r(l);var c=Tr(r,s,l);c!==null&&(Wn(c,r,l),kl(c,r,l)),r={cache:sh()},s.payload=r;return}r=r.return}}function Lw(s,r,l){var c=fi();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Nc(s)?pv(r,l):(l=Yf(s,r,l,c),l!==null&&(Wn(l,s,c),mv(l,r,c)))}function hv(s,r,l){var c=fi();Hl(s,r,l,c)}function Hl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Nc(s))pv(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,I=_(C,l);if(y.hasEagerState=!0,y.eagerState=I,oi(I,C))return cc(s,r,y,0),St===null&&uc(),!1}catch{}finally{}if(l=Yf(s,r,y,c),l!==null)return Wn(l,s,c),mv(l,r,c),!0}return!1}function Nh(s,r,l,c){if(c={lane:2,revertLane:lp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Nc(s)){if(r)throw Error(i(479))}else r=Yf(s,l,c,2),r!==null&&Wn(r,s,2)}function Nc(s){var r=s.alternate;return s===Fe||r!==null&&r===Fe}function pv(s,r){ha=Ac=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function mv(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,en(s,l)}}var Fl={readContext:gn,use:wc,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};Fl.useEffectEvent=Ut;var gv={readContext:gn,use:wc,useCallback:function(s,r){return Ln().memoizedState=[s,r===void 0?null:r],s},useContext:gn,useEffect:Zy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,xc(4194308,4,iv.bind(null,r,s),l)},useLayoutEffect:function(s,r){return xc(4194308,4,s,r)},useInsertionEffect:function(s,r){xc(4,2,s,r)},useMemo:function(s,r){var l=Ln();r=r===void 0?null:r;var c=s();if(wo){Zt(!0);try{s()}finally{Zt(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=Ln();if(l!==void 0){var y=l(r);if(wo){Zt(!0);try{l(r)}finally{Zt(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Lw.bind(null,Fe,s),[c.memoizedState,s]},useRef:function(s){var r=Ln();return s={current:s},r.memoizedState=s},useState:function(s){s=Ah(s);var r=s.queue,l=hv.bind(null,Fe,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:wh,useDeferredValue:function(s,r){var l=Ln();return Ih(l,s,r)},useTransition:function(){var s=Ah(!1);return s=lv.bind(null,Fe,s.queue,!0,!1),Ln().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Fe,y=Ln();if(et){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),St===null)throw Error(i(349));(Qe&127)!==0||Ly(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,Zy(Hy.bind(null,c,_,s),[s]),c.flags|=2048,ma(9,{destroy:void 0},Oy.bind(null,c,_,l,r),null),l},useId:function(){var s=Ln(),r=St.identifierPrefix;if(et){var l=cs,c=us;l=(c&~(1<<32-At(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Cc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=Nw++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Rh,useFormState:Jy,useActionState:Jy,useOptimistic:function(s){var r=Ln();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Nh.bind(null,Fe,!0,l),l.dispatch=r,[s,r]},useMemoCache:Th,useCacheRefresh:function(){return Ln().memoizedState=Uw.bind(null,Fe)},useEffectEvent:function(s){var r=Ln(),l={impl:s};return r.memoizedState=l,function(){if((ct&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Mh={readContext:gn,use:wc,useCallback:rv,useContext:gn,useEffect:bh,useImperativeHandle:sv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:ov,useReducer:Ic,useRef:jy,useState:function(){return Ic(Os)},useDebugValue:wh,useDeferredValue:function(s,r){var l=Bt();return av(l,_t.memoizedState,s,r)},useTransition:function(){var s=Ic(Os)[0],r=Bt().memoizedState;return[typeof s=="boolean"?s:Ol(s),r]},useSyncExternalStore:Uy,useId:dv,useHostTransitionStatus:Rh,useFormState:Qy,useActionState:Qy,useOptimistic:function(s,r){var l=Bt();return By(l,_t,s,r)},useMemoCache:Th,useCacheRefresh:fv};Mh.useEffectEvent=ev;var yv={readContext:gn,use:wc,useCallback:rv,useContext:gn,useEffect:bh,useImperativeHandle:sv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:ov,useReducer:Sh,useRef:jy,useState:function(){return Sh(Os)},useDebugValue:wh,useDeferredValue:function(s,r){var l=Bt();return _t===null?Ih(l,s,r):av(l,_t.memoizedState,s,r)},useTransition:function(){var s=Sh(Os)[0],r=Bt().memoizedState;return[typeof s=="boolean"?s:Ol(s),r]},useSyncExternalStore:Uy,useId:dv,useHostTransitionStatus:Rh,useFormState:Wy,useActionState:Wy,useOptimistic:function(s,r){var l=Bt();return _t!==null?By(l,_t,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Th,useCacheRefresh:fv};yv.useEffectEvent=ev;function Dh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Ph={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=fi(),y=_r(c);y.payload=r,l!=null&&(y.callback=l),r=Tr(s,y,c),r!==null&&(Wn(r,s,c),kl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=fi(),y=_r(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=Tr(s,y,c),r!==null&&(Wn(r,s,c),kl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=fi(),c=_r(l);c.tag=2,r!=null&&(c.callback=r),r=Tr(s,c,l),r!==null&&(Wn(r,s,l),kl(r,s,l))}};function vv(s,r,l,c,y,_,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,C):r.prototype&&r.prototype.isPureReactComponent?!wl(l,c)||!wl(y,_):!0}function _v(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Ph.enqueueReplaceState(r,r.state,null)}function Io(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function Tv(s){lc(s)}function Ev(s){console.error(s)}function Sv(s){lc(s)}function Mc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Av(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function kh(s,r,l){return l=_r(l),l.tag=3,l.payload={element:null},l.callback=function(){Mc(s,r)},l}function Cv(s){return s=_r(s),s.tag=3,s}function bv(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){Av(r,l,c)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){Av(r,l,c),typeof y!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function Ow(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&aa(r,l,y,!0),l=li.current,l!==null){switch(l.tag){case 31:case 13:return bi===null?qc():l.alternate===null&&Lt===0&&(Lt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===vc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),rp(s,c,y)),!1;case 22:return l.flags|=65536,c===vc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),rp(s,c,y)),!1}throw Error(i(435,l.tag))}return rp(s,c,y),qc(),!1}if(et)return r=li.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Zf&&(s=Error(i(422),{cause:c}),Rl(Ei(s,l)))):(c!==Zf&&(r=Error(i(423),{cause:c}),Rl(Ei(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Ei(c,l),y=kh(s.stateNode,c,y),ch(s,y),Lt!==4&&(Lt=2)),!1;var _=Error(i(520),{cause:c});if(_=Ei(_,l),Jl===null?Jl=[_]:Jl.push(_),Lt!==4&&(Lt=2),r===null)return!0;c=Ei(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=kh(l.stateNode,c,s),ch(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(wr===null||!wr.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=Cv(y),bv(y,s,l,c),ch(l,y),!1}l=l.return}while(l!==null);return!1}var Vh=Error(i(461)),Jt=!1;function yn(s,r,l,c){r.child=s===null?Ry(r,null,l,c):bo(r,s.child,l,c)}function wv(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var C={};for(var I in c)I!=="ref"&&(C[I]=c[I])}else C=c;return Eo(r),c=gh(s,r,l,C,_,y),I=yh(),s!==null&&!Jt?(vh(s,r,y),Hs(s,r,y)):(et&&I&&Wf(r),r.flags|=1,yn(s,r,c,y),r.child)}function Iv(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Jf(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,xv(s,r,_,c,y)):(s=fc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!qh(s,y)){var C=_.memoizedProps;if(l=l.compare,l=l!==null?l:wl,l(C,c)&&s.ref===r.ref)return Hs(s,r,y)}return r.flags|=1,s=Ps(_,c),s.ref=r.ref,s.return=r,r.child=s}function xv(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(wl(_,c)&&s.ref===r.ref)if(Jt=!1,r.pendingProps=c=_,qh(s,y))(s.flags&131072)!==0&&(Jt=!0);else return r.lanes=s.lanes,Hs(s,r,y)}return Uh(s,r,l,c,y)}function Rv(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return Nv(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&gc(r,_!==null?_.cachePool:null),_!==null?Dy(r,_):fh(),Py(r);else return c=r.lanes=536870912,Nv(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(gc(r,_.cachePool),Dy(r,_),Sr(),r.memoizedState=null):(s!==null&&gc(r,null),fh(),Sr());return yn(s,r,y,l),r.child}function Gl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Nv(s,r,l,c,y){var _=oh();return _=_===null?null:{parent:Kt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&gc(r,null),fh(),Py(r),s!==null&&aa(s,r,c,!0),r.childLanes=y,null}function Dc(s,r){return r=kc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function Mv(s,r,l){return bo(r,s.child,null,l),s=Dc(r,r.pendingProps),s.flags|=2,ui(r),r.memoizedState=null,s}function Hw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(et){if(c.mode==="hidden")return s=Dc(r,c),r.lanes=536870912,Gl(null,s);if(ph(r),(s=wt)?(s=q0(s,Ci),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:pr!==null?{id:us,overflow:cs}:null,retryLane:536870912,hydrationErrors:null},l=py(s),l.return=r,r.child=l,mn=r,wt=null)):s=null,s===null)throw gr(r);return r.lanes=536870912,null}return Dc(r,c)}var _=s.memoizedState;if(_!==null){var C=_.dehydrated;if(ph(r),y)if(r.flags&256)r.flags&=-257,r=Mv(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Jt||aa(s,r,l,!1),y=(l&s.childLanes)!==0,Jt||y){if(c=St,c!==null&&(C=bt(c,l),C!==0&&C!==_.retryLane))throw _.retryLane=C,yo(s,C),Wn(c,s,C),Vh;qc(),r=Mv(s,r,l)}else s=_.treeContext,wt=wi(C.nextSibling),mn=r,et=!0,mr=null,Ci=!1,s!==null&&yy(r,s),r=Dc(r,c),r.flags|=4096;return r}return s=Ps(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Pc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Uh(s,r,l,c,y){return Eo(r),l=gh(s,r,l,c,void 0,y),c=yh(),s!==null&&!Jt?(vh(s,r,y),Hs(s,r,y)):(et&&c&&Wf(r),r.flags|=1,yn(s,r,l,y),r.child)}function Dv(s,r,l,c,y,_){return Eo(r),r.updateQueue=null,l=Vy(r,c,l,y),ky(s),c=yh(),s!==null&&!Jt?(vh(s,r,_),Hs(s,r,_)):(et&&c&&Wf(r),r.flags|=1,yn(s,r,l,_),r.child)}function Pv(s,r,l,c,y){if(Eo(r),r.stateNode===null){var _=ia,C=l.contextType;typeof C=="object"&&C!==null&&(_=gn(C)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ph,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},lh(r),C=l.contextType,_.context=typeof C=="object"&&C!==null?gn(C):ia,_.state=r.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(Dh(r,l,C,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&Ph.enqueueReplaceState(_,_.state,null),Ul(r,c,_,y),Vl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var I=r.memoizedProps,L=Io(l,I);_.props=L;var J=_.context,te=l.contextType;C=ia,typeof te=="object"&&te!==null&&(C=gn(te));var ie=l.getDerivedStateFromProps;te=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,te||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||J!==C)&&_v(r,_,c,C),vr=!1;var Q=r.memoizedState;_.state=Q,Ul(r,c,_,y),Vl(),J=r.memoizedState,I||Q!==J||vr?(typeof ie=="function"&&(Dh(r,l,ie,c),J=r.memoizedState),(L=vr||vv(r,l,L,c,Q,J,C))?(te||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),_.props=c,_.state=J,_.context=C,c=L):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,uh(s,r),C=r.memoizedProps,te=Io(l,C),_.props=te,ie=r.pendingProps,Q=_.context,J=l.contextType,L=ia,typeof J=="object"&&J!==null&&(L=gn(J)),I=l.getDerivedStateFromProps,(J=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==ie||Q!==L)&&_v(r,_,c,L),vr=!1,Q=r.memoizedState,_.state=Q,Ul(r,c,_,y),Vl();var Z=r.memoizedState;C!==ie||Q!==Z||vr||s!==null&&s.dependencies!==null&&pc(s.dependencies)?(typeof I=="function"&&(Dh(r,l,I,c),Z=r.memoizedState),(te=vr||vv(r,l,te,c,Q,Z,L)||s!==null&&s.dependencies!==null&&pc(s.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Z,L),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Z,L)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===s.memoizedProps&&Q===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&Q===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Z),_.props=c,_.state=Z,_.context=L,c=te):(typeof _.componentDidUpdate!="function"||C===s.memoizedProps&&Q===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&Q===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Pc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=bo(r,s.child,null,y),r.child=bo(r,null,l,y)):yn(s,r,l,y),r.memoizedState=_.state,s=r.child):s=Hs(s,r,y),s}function kv(s,r,l,c){return _o(),r.flags|=256,yn(s,r,l,c),r.child}var Lh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oh(s){return{baseLanes:s,cachePool:Ay()}}function Hh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=di),s}function Vv(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=s!==null&&s.memoizedState===null?!1:(Gt.current&2)!==0),C&&(y=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,s===null){if(et){if(y?Er(r):Sr(),(s=wt)?(s=q0(s,Ci),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:pr!==null?{id:us,overflow:cs}:null,retryLane:536870912,hydrationErrors:null},l=py(s),l.return=r,r.child=l,mn=r,wt=null)):s=null,s===null)throw gr(r);return Ep(s)?r.lanes=32:r.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(Sr(),y=r.mode,I=kc({mode:"hidden",children:I},y),c=vo(c,y,l,null),I.return=r,c.return=r,I.sibling=c,r.child=I,c=r.child,c.memoizedState=Oh(l),c.childLanes=Hh(s,C,l),r.memoizedState=Lh,Gl(null,c)):(Er(r),Fh(r,I))}var L=s.memoizedState;if(L!==null&&(I=L.dehydrated,I!==null)){if(_)r.flags&256?(Er(r),r.flags&=-257,r=Gh(s,r,l)):r.memoizedState!==null?(Sr(),r.child=s.child,r.flags|=128,r=null):(Sr(),I=c.fallback,y=r.mode,c=kc({mode:"visible",children:c.children},y),I=vo(I,y,l,null),I.flags|=2,c.return=r,I.return=r,c.sibling=I,r.child=c,bo(r,s.child,null,l),c=r.child,c.memoizedState=Oh(l),c.childLanes=Hh(s,C,l),r.memoizedState=Lh,r=Gl(null,c));else if(Er(r),Ep(I)){if(C=I.nextSibling&&I.nextSibling.dataset,C)var J=C.dgst;C=J,c=Error(i(419)),c.stack="",c.digest=C,Rl({value:c,source:null,stack:null}),r=Gh(s,r,l)}else if(Jt||aa(s,r,l,!1),C=(l&s.childLanes)!==0,Jt||C){if(C=St,C!==null&&(c=bt(C,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,yo(s,c),Wn(C,s,c),Vh;Tp(I)||qc(),r=Gh(s,r,l)}else Tp(I)?(r.flags|=192,r.child=s.child,r=null):(s=L.treeContext,wt=wi(I.nextSibling),mn=r,et=!0,mr=null,Ci=!1,s!==null&&yy(r,s),r=Fh(r,c.children),r.flags|=4096);return r}return y?(Sr(),I=c.fallback,y=r.mode,L=s.child,J=L.sibling,c=Ps(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,J!==null?I=Ps(J,I):(I=vo(I,y,l,null),I.flags|=2),I.return=r,c.return=r,c.sibling=I,r.child=c,Gl(null,c),c=r.child,I=s.child.memoizedState,I===null?I=Oh(l):(y=I.cachePool,y!==null?(L=Kt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=Ay(),I={baseLanes:I.baseLanes|l,cachePool:y}),c.memoizedState=I,c.childLanes=Hh(s,C,l),r.memoizedState=Lh,Gl(s.child,c)):(Er(r),l=s.child,s=l.sibling,l=Ps(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(C=r.deletions,C===null?(r.deletions=[s],r.flags|=16):C.push(s)),r.child=l,r.memoizedState=null,l)}function Fh(s,r){return r=kc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function kc(s,r){return s=ai(22,s,null,r),s.lanes=0,s}function Gh(s,r,l){return bo(r,s.child,null,l),s=Fh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Uv(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),nh(s.return,r,l)}function Bh(s,r,l,c,y,_){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=c,C.tail=l,C.tailMode=y,C.treeForkCount=_)}function Lv(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var C=Gt.current,I=(C&2)!==0;if(I?(C=C&1|2,r.flags|=128):C&=1,ue(Gt,C),yn(s,r,c,l),c=et?xl:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Uv(s,l,r);else if(s.tag===19)Uv(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&Sc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Bh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Sc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Bh(r,!0,l,null,_,c);break;case"together":Bh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Hs(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),br|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(aa(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Ps(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Ps(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function qh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&pc(s)))}function Fw(s,r,l){switch(r.tag){case 3:ht(r,r.stateNode.containerInfo),yr(r,Kt,s.memoizedState.cache),_o();break;case 27:case 5:Nn(r);break;case 4:ht(r,r.stateNode.containerInfo);break;case 10:yr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ph(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Er(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Vv(s,r,l):(Er(r),s=Hs(s,r,l),s!==null?s.sibling:null);Er(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(aa(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return Lv(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(Gt,Gt.current),c)break;return null;case 22:return r.lanes=0,Rv(s,r,l,r.pendingProps);case 24:yr(r,Kt,s.memoizedState.cache)}return Hs(s,r,l)}function Ov(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Jt=!0;else{if(!qh(s,l)&&(r.flags&128)===0)return Jt=!1,Fw(s,r,l);Jt=(s.flags&131072)!==0}else Jt=!1,et&&(r.flags&1048576)!==0&&gy(r,xl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Ao(r.elementType),r.type=s,typeof s=="function")Jf(s)?(c=Io(s,c),r.tag=1,r=Pv(null,r,s,c,l)):(r.tag=0,r=Uh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===re){r.tag=11,r=wv(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=Iv(null,r,s,c,l);break e}}throw r=Me(s)||s,Error(i(306,r,""))}}return r;case 0:return Uh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=Io(c,r.pendingProps),Pv(s,r,c,y,l);case 3:e:{if(ht(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,uh(s,r),Ul(r,c,null,l);var C=r.memoizedState;if(c=C.cache,yr(r,Kt,c),c!==_.cache&&ih(r,[Kt],l,!0),Vl(),c=C.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=kv(s,r,c,l);break e}else if(c!==y){y=Ei(Error(i(424)),r),Rl(y),r=kv(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(wt=wi(s.firstChild),mn=r,et=!0,mr=null,Ci=!0,l=Ry(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(_o(),c===y){r=Hs(s,r,l);break e}yn(s,r,c,l)}r=r.child}return r;case 26:return Pc(s,r),s===null?(l=Q0(r.type,null,r.pendingProps,null))?r.memoizedState=l:et||(l=r.type,s=r.pendingProps,c=Xc(Ie.current).createElement(l),c[kt]=r,c[Ht]=s,vn(c,l,s),zt(c),r.stateNode=c):r.memoizedState=Q0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Nn(r),s===null&&et&&(c=r.stateNode=K0(r.type,r.pendingProps,Ie.current),mn=r,Ci=!0,y=wt,Nr(r.type)?(Sp=y,wt=wi(c.firstChild)):wt=y),yn(s,r,r.pendingProps.children,l),Pc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&et&&((y=c=wt)&&(c=gI(c,r.type,r.pendingProps,Ci),c!==null?(r.stateNode=c,mn=r,wt=wi(c.firstChild),Ci=!1,y=!0):y=!1),y||gr(r)),Nn(r),y=r.type,_=r.pendingProps,C=s!==null?s.memoizedProps:null,c=_.children,yp(y,_)?c=null:C!==null&&yp(y,C)&&(r.flags|=32),r.memoizedState!==null&&(y=gh(s,r,Mw,null,null,l),nu._currentValue=y),Pc(s,r),yn(s,r,c,l),r.child;case 6:return s===null&&et&&((s=l=wt)&&(l=yI(l,r.pendingProps,Ci),l!==null?(r.stateNode=l,mn=r,wt=null,s=!0):s=!1),s||gr(r)),null;case 13:return Vv(s,r,l);case 4:return ht(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=bo(r,null,c,l):yn(s,r,c,l),r.child;case 11:return wv(s,r,r.type,r.pendingProps,l);case 7:return yn(s,r,r.pendingProps,l),r.child;case 8:return yn(s,r,r.pendingProps.children,l),r.child;case 12:return yn(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,yr(r,r.type,c.value),yn(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Eo(r),y=gn(y),c=c(y),r.flags|=1,yn(s,r,c,l),r.child;case 14:return Iv(s,r,r.type,r.pendingProps,l);case 15:return xv(s,r,r.type,r.pendingProps,l);case 19:return Lv(s,r,l);case 31:return Hw(s,r,l);case 22:return Rv(s,r,l,r.pendingProps);case 24:return Eo(r),c=gn(Kt),s===null?(y=oh(),y===null&&(y=St,_=sh(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},lh(r),yr(r,Kt,y)):((s.lanes&l)!==0&&(uh(s,r),Ul(r,null,null,l),Vl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),yr(r,Kt,c)):(c=_.cache,yr(r,Kt,c),c!==y.cache&&ih(r,[Kt],l,!0))),yn(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Fs(s){s.flags|=4}function zh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(d0())s.flags|=8192;else throw Co=vc,ah}else s.flags&=-16777217}function Hv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!e_(r))if(d0())s.flags|=8192;else throw Co=vc,ah}function Vc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?$e():536870912,s.lanes|=r,_a|=r)}function Bl(s,r){if(!et)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function It(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function Gw(s,r,l){var c=r.pendingProps;switch(jf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(r),null;case 1:return It(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Us(Kt),lt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(oa(r)?Fs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,eh())),It(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(Fs(r),_!==null?(It(r),Hv(r,_)):(It(r),zh(r,y,null,c,l))):_?_!==s.memoizedState?(Fs(r),It(r),Hv(r,_)):(It(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&Fs(r),It(r),zh(r,y,s,c,l)),null;case 27:if(pi(r),l=Ie.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Fs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return It(r),null}s=me.current,oa(r)?vy(r):(s=K0(y,c,l),r.stateNode=s,Fs(r))}return It(r),null;case 5:if(pi(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Fs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return It(r),null}if(_=me.current,oa(r))vy(r);else{var C=Xc(Ie.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?C.createElement("select",{is:c.is}):C.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?C.createElement(y,{is:c.is}):C.createElement(y)}}_[kt]=r,_[Ht]=c;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=_;e:switch(vn(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Fs(r)}}return It(r),zh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&Fs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Ie.current,oa(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=mn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[kt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||V0(s.nodeValue,l)),s||gr(r,!0)}else s=Xc(s).createTextNode(c),s[kt]=r,r.stateNode=s}return It(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=oa(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[kt]=r}else _o(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;It(r),s=!1}else l=eh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(ui(r),r):(ui(r),null);if((r.flags&128)!==0)throw Error(i(558))}return It(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=oa(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[kt]=r}else _o(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;It(r),y=!1}else y=eh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(ui(r),r):(ui(r),null)}return ui(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Vc(r,r.updateQueue),It(r),null);case 4:return lt(),s===null&&fp(r.stateNode.containerInfo),It(r),null;case 10:return Us(r.type),It(r),null;case 19:if(j(Gt),c=r.memoizedState,c===null)return It(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Bl(c,!1);else{if(Lt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=Sc(s),_!==null){for(r.flags|=128,Bl(c,!1),s=_.updateQueue,r.updateQueue=s,Vc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)hy(l,s),l=l.sibling;return ue(Gt,Gt.current&1|2),et&&ks(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&Ot()>Fc&&(r.flags|=128,y=!0,Bl(c,!1),r.lanes=4194304)}else{if(!y)if(s=Sc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Vc(r,s),Bl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!et)return It(r),null}else 2*Ot()-c.renderingStartTime>Fc&&l!==536870912&&(r.flags|=128,y=!0,Bl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Ot(),s.sibling=null,l=Gt.current,ue(Gt,y?l&1|2:l&1),et&&ks(r,c.treeForkCount),s):(It(r),null);case 22:case 23:return ui(r),hh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(It(r),r.subtreeFlags&6&&(r.flags|=8192)):It(r),l=r.updateQueue,l!==null&&Vc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&j(So),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Us(Kt),It(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Bw(s,r){switch(jf(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Us(Kt),lt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return pi(r),null;case 31:if(r.memoizedState!==null){if(ui(r),r.alternate===null)throw Error(i(340));_o()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(ui(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));_o()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return j(Gt),null;case 4:return lt(),null;case 10:return Us(r.type),null;case 22:case 23:return ui(r),hh(),s!==null&&j(So),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Us(Kt),null;case 25:return null;default:return null}}function Fv(s,r){switch(jf(r),r.tag){case 3:Us(Kt),lt();break;case 26:case 27:case 5:pi(r);break;case 4:lt();break;case 31:r.memoizedState!==null&&ui(r);break;case 13:ui(r);break;case 19:j(Gt);break;case 10:Us(r.type);break;case 22:case 23:ui(r),hh(),s!==null&&j(So);break;case 24:Us(Kt)}}function ql(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,C=l.inst;c=_(),C.destroy=c}l=l.next}while(l!==y)}}catch(I){yt(r,r.return,I)}}function Ar(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var C=c.inst,I=C.destroy;if(I!==void 0){C.destroy=void 0,y=r;var L=l,J=I;try{J()}catch(te){yt(y,L,te)}}}c=c.next}while(c!==_)}}catch(te){yt(r,r.return,te)}}function Gv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{My(r,l)}catch(c){yt(s,s.return,c)}}}function Bv(s,r,l){l.props=Io(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){yt(s,r,c)}}function zl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){yt(s,r,y)}}function ds(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){yt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){yt(s,r,y)}else l.current=null}function qv(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){yt(s,s.return,y)}}function $h(s,r,l){try{var c=s.stateNode;cI(c,s.type,l,r),c[Ht]=r}catch(y){yt(s,s.return,y)}}function zv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Nr(s.type)||s.tag===4}function Kh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||zv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Nr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Yh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Oi));else if(c!==4&&(c===27&&Nr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Yh(s,r,l),s=s.sibling;s!==null;)Yh(s,r,l),s=s.sibling}function Uc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&Nr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Uc(s,r,l),s=s.sibling;s!==null;)Uc(s,r,l),s=s.sibling}function $v(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);vn(r,c,l),r[kt]=s,r[Ht]=l}catch(_){yt(s,s.return,_)}}var Gs=!1,Qt=!1,Jh=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,cn=null;function qw(s,r){if(s=s.containerInfo,mp=id,s=sy(s),Gf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var C=0,I=-1,L=-1,J=0,te=0,ie=s,Q=null;t:for(;;){for(var Z;ie!==l||y!==0&&ie.nodeType!==3||(I=C+y),ie!==_||c!==0&&ie.nodeType!==3||(L=C+c),ie.nodeType===3&&(C+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)Q=ie,ie=Z;for(;;){if(ie===s)break t;if(Q===l&&++J===y&&(I=C),Q===_&&++te===c&&(L=C),(Z=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=Z}l=I===-1||L===-1?null:{start:I,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(gp={focusedElem:s,selectionRange:l},id=!1,cn=r;cn!==null;)if(r=cn,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,cn=s;else for(;cn!==null;){switch(r=cn,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var ve=Io(l.type,y);s=c.getSnapshotBeforeUpdate(ve,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Re){yt(l,l.return,Re)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)_p(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":_p(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,cn=s;break}cn=r.return}}function Yv(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:qs(s,l),c&4&&ql(5,l);break;case 1:if(qs(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(C){yt(l,l.return,C)}else{var y=Io(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(C){yt(l,l.return,C)}}c&64&&Gv(l),c&512&&zl(l,l.return);break;case 3:if(qs(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{My(s,r)}catch(C){yt(l,l.return,C)}}break;case 27:r===null&&c&4&&$v(l);case 26:case 5:qs(s,l),r===null&&c&4&&qv(l),c&512&&zl(l,l.return);break;case 12:qs(s,l);break;case 31:qs(s,l),c&4&&Xv(s,l);break;case 13:qs(s,l),c&4&&Wv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=jw.bind(null,l),vI(s,l))));break;case 22:if(c=l.memoizedState!==null||Gs,!c){r=r!==null&&r.memoizedState!==null||Qt,y=Gs;var _=Qt;Gs=c,(Qt=r)&&!_?zs(s,l,(l.subtreeFlags&8772)!==0):qs(s,l),Gs=y,Qt=_}break;case 30:break;default:qs(s,l)}}function Jv(s){var r=s.alternate;r!==null&&(s.alternate=null,Jv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&be(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Nt=null,Yn=!1;function Bs(s,r,l){for(l=l.child;l!==null;)Qv(s,r,l),l=l.sibling}function Qv(s,r,l){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(hn,l)}catch{}switch(l.tag){case 26:Qt||ds(l,r),Bs(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Qt||ds(l,r);var c=Nt,y=Yn;Nr(l.type)&&(Nt=l.stateNode,Yn=!1),Bs(s,r,l),Zl(l.stateNode),Nt=c,Yn=y;break;case 5:Qt||ds(l,r);case 6:if(c=Nt,y=Yn,Nt=null,Bs(s,r,l),Nt=c,Yn=y,Nt!==null)if(Yn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(l.stateNode)}catch(_){yt(l,r,_)}else try{Nt.removeChild(l.stateNode)}catch(_){yt(l,r,_)}break;case 18:Nt!==null&&(Yn?(s=Nt,G0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Ia(s)):G0(Nt,l.stateNode));break;case 4:c=Nt,y=Yn,Nt=l.stateNode.containerInfo,Yn=!0,Bs(s,r,l),Nt=c,Yn=y;break;case 0:case 11:case 14:case 15:Ar(2,l,r),Qt||Ar(4,l,r),Bs(s,r,l);break;case 1:Qt||(ds(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Bv(l,r,c)),Bs(s,r,l);break;case 21:Bs(s,r,l);break;case 22:Qt=(c=Qt)||l.memoizedState!==null,Bs(s,r,l),Qt=c;break;default:Bs(s,r,l)}}function Xv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ia(s)}catch(l){yt(r,r.return,l)}}}function Wv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ia(s)}catch(l){yt(r,r.return,l)}}function zw(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Kv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Kv),r;default:throw Error(i(435,s.tag))}}function Lc(s,r){var l=zw(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=Zw.bind(null,s,c);c.then(y,y)}})}function Jn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,C=r,I=C;e:for(;I!==null;){switch(I.tag){case 27:if(Nr(I.type)){Nt=I.stateNode,Yn=!1;break e}break;case 5:Nt=I.stateNode,Yn=!1;break e;case 3:case 4:Nt=I.stateNode.containerInfo,Yn=!0;break e}I=I.return}if(Nt===null)throw Error(i(160));Qv(_,C,y),Nt=null,Yn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)jv(r,s),r=r.sibling}var zi=null;function jv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Jn(r,s),Qn(s),c&4&&(Ar(3,s,s.return),ql(3,s),Ar(5,s,s.return));break;case 1:Jn(r,s),Qn(s),c&512&&(Qt||l===null||ds(l,l.return)),c&64&&Gs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=zi;if(Jn(r,s),Qn(s),c&512&&(Qt||l===null||ds(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Ne]||_[kt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),vn(_,c,l),_[kt]=s,zt(_),c=_;break e;case"link":var C=j0("link","href",y).get(c+(l.href||""));if(C){for(var I=0;I<C.length;I++)if(_=C[I],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(I,1);break t}}_=y.createElement(c),vn(_,c,l),y.head.appendChild(_);break;case"meta":if(C=j0("meta","content",y).get(c+(l.content||""))){for(I=0;I<C.length;I++)if(_=C[I],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(I,1);break t}}_=y.createElement(c),vn(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[kt]=s,zt(_),c=_}s.stateNode=c}else Z0(y,s.type,s.stateNode);else s.stateNode=W0(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Z0(y,s.type,s.stateNode):W0(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&$h(s,s.memoizedProps,l.memoizedProps)}break;case 27:Jn(r,s),Qn(s),c&512&&(Qt||l===null||ds(l,l.return)),l!==null&&c&4&&$h(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Jn(r,s),Qn(s),c&512&&(Qt||l===null||ds(l,l.return)),s.flags&32){y=s.stateNode;try{Kn(y,"")}catch(ve){yt(s,s.return,ve)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,$h(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Jh=!0);break;case 6:if(Jn(r,s),Qn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ve){yt(s,s.return,ve)}}break;case 3:if(Zc=null,y=zi,zi=Wc(r.containerInfo),Jn(r,s),zi=y,Qn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Ia(r.containerInfo)}catch(ve){yt(s,s.return,ve)}Jh&&(Jh=!1,Zv(s));break;case 4:c=zi,zi=Wc(s.stateNode.containerInfo),Jn(r,s),Qn(s),zi=c;break;case 12:Jn(r,s),Qn(s);break;case 31:Jn(r,s),Qn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Lc(s,c)));break;case 13:Jn(r,s),Qn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Hc=Ot()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Lc(s,c)));break;case 22:y=s.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,J=Gs,te=Qt;if(Gs=J||y,Qt=te||L,Jn(r,s),Qt=te,Gs=J,Qn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||L||Gs||Qt||xo(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){L=l=r;try{if(_=L.stateNode,y)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{I=L.stateNode;var ie=L.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;I.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ve){yt(L,L.return,ve)}}}else if(r.tag===6){if(l===null){L=r;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ve){yt(L,L.return,ve)}}}else if(r.tag===18){if(l===null){L=r;try{var Z=L.stateNode;y?B0(Z,!0):B0(L.stateNode,!1)}catch(ve){yt(L,L.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Lc(s,l))));break;case 19:Jn(r,s),Qn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Lc(s,c)));break;case 30:break;case 21:break;default:Jn(r,s),Qn(s)}}function Qn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(zv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Kh(s);Uc(s,_,y);break;case 5:var C=l.stateNode;l.flags&32&&(Kn(C,""),l.flags&=-33);var I=Kh(s);Uc(s,I,C);break;case 3:case 4:var L=l.stateNode.containerInfo,J=Kh(s);Yh(s,J,L);break;default:throw Error(i(161))}}catch(te){yt(s,s.return,te)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Zv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Zv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function qs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Yv(s,r.alternate,r),r=r.sibling}function xo(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ar(4,r,r.return),xo(r);break;case 1:ds(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Bv(r,r.return,l),xo(r);break;case 27:Zl(r.stateNode);case 26:case 5:ds(r,r.return),xo(r);break;case 22:r.memoizedState===null&&xo(r);break;case 30:xo(r);break;default:xo(r)}s=s.sibling}}function zs(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,C=_.flags;switch(_.tag){case 0:case 11:case 15:zs(y,_,l),ql(4,_);break;case 1:if(zs(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){yt(c,c.return,J)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Ny(L[y],I)}catch(J){yt(c,c.return,J)}}l&&C&64&&Gv(_),zl(_,_.return);break;case 27:$v(_);case 26:case 5:zs(y,_,l),l&&c===null&&C&4&&qv(_),zl(_,_.return);break;case 12:zs(y,_,l);break;case 31:zs(y,_,l),l&&C&4&&Xv(y,_);break;case 13:zs(y,_,l),l&&C&4&&Wv(y,_);break;case 22:_.memoizedState===null&&zs(y,_,l),zl(_,_.return);break;case 30:break;default:zs(y,_,l)}r=r.sibling}}function Qh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Nl(l))}function Xh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Nl(s))}function $i(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)e0(s,r,l,c),r=r.sibling}function e0(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:$i(s,r,l,c),y&2048&&ql(9,r);break;case 1:$i(s,r,l,c);break;case 3:$i(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Nl(s)));break;case 12:if(y&2048){$i(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,C=_.id,I=_.onPostCommit;typeof I=="function"&&I(C,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(L){yt(r,r.return,L)}}else $i(s,r,l,c);break;case 31:$i(s,r,l,c);break;case 13:$i(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,C=r.alternate,r.memoizedState!==null?_._visibility&2?$i(s,r,l,c):$l(s,r):_._visibility&2?$i(s,r,l,c):(_._visibility|=2,ga(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Qh(C,r);break;case 24:$i(s,r,l,c),y&2048&&Xh(r.alternate,r);break;default:$i(s,r,l,c)}}function ga(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,C=r,I=l,L=c,J=C.flags;switch(C.tag){case 0:case 11:case 15:ga(_,C,I,L,y),ql(8,C);break;case 23:break;case 22:var te=C.stateNode;C.memoizedState!==null?te._visibility&2?ga(_,C,I,L,y):$l(_,C):(te._visibility|=2,ga(_,C,I,L,y)),y&&J&2048&&Qh(C.alternate,C);break;case 24:ga(_,C,I,L,y),y&&J&2048&&Xh(C.alternate,C);break;default:ga(_,C,I,L,y)}r=r.sibling}}function $l(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:$l(l,c),y&2048&&Qh(c.alternate,c);break;case 24:$l(l,c),y&2048&&Xh(c.alternate,c);break;default:$l(l,c)}r=r.sibling}}var Kl=8192;function ya(s,r,l){if(s.subtreeFlags&Kl)for(s=s.child;s!==null;)t0(s,r,l),s=s.sibling}function t0(s,r,l){switch(s.tag){case 26:ya(s,r,l),s.flags&Kl&&s.memoizedState!==null&&NI(l,zi,s.memoizedState,s.memoizedProps);break;case 5:ya(s,r,l);break;case 3:case 4:var c=zi;zi=Wc(s.stateNode.containerInfo),ya(s,r,l),zi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Kl,Kl=16777216,ya(s,r,l),Kl=c):ya(s,r,l));break;default:ya(s,r,l)}}function n0(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Yl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];cn=c,s0(c,s)}n0(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)i0(s),s=s.sibling}function i0(s){switch(s.tag){case 0:case 11:case 15:Yl(s),s.flags&2048&&Ar(9,s,s.return);break;case 3:Yl(s);break;case 12:Yl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Oc(s)):Yl(s);break;default:Yl(s)}}function Oc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];cn=c,s0(c,s)}n0(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ar(8,r,r.return),Oc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Oc(r));break;default:Oc(r)}s=s.sibling}}function s0(s,r){for(;cn!==null;){var l=cn;switch(l.tag){case 0:case 11:case 15:Ar(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,cn=c;else e:for(l=s;cn!==null;){c=cn;var y=c.sibling,_=c.return;if(Jv(c),c===l){cn=null;break e}if(y!==null){y.return=_,cn=y;break e}cn=_}}}var $w={getCacheForType:function(s){var r=gn(Kt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return gn(Kt).controller.signal}},Kw=typeof WeakMap=="function"?WeakMap:Map,ct=0,St=null,Ye=null,Qe=0,gt=0,ci=null,Cr=!1,va=!1,Wh=!1,$s=0,Lt=0,br=0,Ro=0,jh=0,di=0,_a=0,Jl=null,Xn=null,Zh=!1,Hc=0,r0=0,Fc=1/0,Gc=null,wr=null,tn=0,Ir=null,Ta=null,Ks=0,ep=0,tp=null,o0=null,Ql=0,np=null;function fi(){return(ct&2)!==0&&Qe!==0?Qe&-Qe:W.T!==null?lp():qo()}function a0(){if(di===0)if((Qe&536870912)===0||et){var s=Li;Li<<=1,(Li&3932160)===0&&(Li=262144),di=s}else di=536870912;return s=li.current,s!==null&&(s.flags|=32),di}function Wn(s,r,l){(s===St&&(gt===2||gt===9)||s.cancelPendingCommit!==null)&&(Ea(s,0),xr(s,Qe,di,!1)),on(s,l),((ct&2)===0||s!==St)&&(s===St&&((ct&2)===0&&(Ro|=l),Lt===4&&xr(s,Qe,di,!1)),fs(s))}function l0(s,r,l){if((ct&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||Ae(s,r),y=c?Qw(s,r):sp(s,r,!0),_=c;do{if(y===0){va&&!c&&xr(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!Yw(l)){y=sp(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var I=s;y=Jl;var L=I.current.memoizedState.isDehydrated;if(L&&(Ea(I,C).flags|=256),C=sp(I,C,!1),C!==2){if(Wh&&!L){I.errorRecoveryDisabledLanes|=_,Ro|=_,y=4;break e}_=Xn,Xn=y,_!==null&&(Xn===null?Xn=_:Xn.push.apply(Xn,_))}y=C}if(_=!1,y!==2)continue}}if(y===1){Ea(s,0),xr(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:xr(c,r,di,!Cr);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Hc+300-Ot(),10<y)){if(xr(c,r,di,!Cr),le(c,0,!0)!==0)break e;Ks=r,c.timeoutHandle=H0(u0.bind(null,c,l,Xn,Gc,Zh,r,di,Ro,_a,Cr,_,"Throttled",-0,0),y);break e}u0(c,l,Xn,Gc,Zh,r,di,Ro,_a,Cr,_,null,-0,0)}}break}while(!0);fs(s)}function u0(s,r,l,c,y,_,C,I,L,J,te,ie,Q,Z){if(s.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Oi},t0(r,_,ie);var ve=(_&62914560)===_?Hc-Ot():(_&4194048)===_?r0-Ot():0;if(ve=MI(ie,ve),ve!==null){Ks=_,s.cancelPendingCommit=ve(y0.bind(null,s,r,_,l,c,y,C,I,L,te,ie,null,Q,Z)),xr(s,_,C,!J);return}}y0(s,r,_,l,c,y,C,I,L)}function Yw(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!oi(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function xr(s,r,l,c){r&=~jh,r&=~Ro,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-At(y),C=1<<_;c[_]=-1,y&=~C}l!==0&&an(s,l,r)}function Bc(){return(ct&6)===0?(Xl(0),!1):!0}function ip(){if(Ye!==null){if(gt===0)var s=Ye.return;else s=Ye,Vs=To=null,_h(s),da=null,Dl=0,s=Ye;for(;s!==null;)Fv(s.alternate,s),s=s.return;Ye=null}}function Ea(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,hI(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Ks=0,ip(),St=s,Ye=l=Ps(s.current,null),Qe=r,gt=0,ci=null,Cr=!1,va=Ae(s,r),Wh=!1,_a=di=jh=Ro=br=Lt=0,Xn=Jl=null,Zh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-At(c),_=1<<y;r|=s[y],c&=~_}return $s=r,uc(),l}function c0(s,r){Fe=null,W.H=Fl,r===ca||r===yc?(r=wy(),gt=3):r===ah?(r=wy(),gt=4):gt=r===Vh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ci=r,Ye===null&&(Lt=1,Mc(s,Ei(r,s.current)))}function d0(){var s=li.current;return s===null?!0:(Qe&4194048)===Qe?bi===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?s===bi:!1}function f0(){var s=W.H;return W.H=Fl,s===null?Fl:s}function h0(){var s=W.A;return W.A=$w,s}function qc(){Lt=4,Cr||(Qe&4194048)!==Qe&&li.current!==null||(va=!0),(br&134217727)===0&&(Ro&134217727)===0||St===null||xr(St,Qe,di,!1)}function sp(s,r,l){var c=ct;ct|=2;var y=f0(),_=h0();(St!==s||Qe!==r)&&(Gc=null,Ea(s,r)),r=!1;var C=Lt;e:do try{if(gt!==0&&Ye!==null){var I=Ye,L=ci;switch(gt){case 8:ip(),C=6;break e;case 3:case 2:case 9:case 6:li.current===null&&(r=!0);var J=gt;if(gt=0,ci=null,Sa(s,I,L,J),l&&va){C=0;break e}break;default:J=gt,gt=0,ci=null,Sa(s,I,L,J)}}Jw(),C=Lt;break}catch(te){c0(s,te)}while(!0);return r&&s.shellSuspendCounter++,Vs=To=null,ct=c,W.H=y,W.A=_,Ye===null&&(St=null,Qe=0,uc()),C}function Jw(){for(;Ye!==null;)p0(Ye)}function Qw(s,r){var l=ct;ct|=2;var c=f0(),y=h0();St!==s||Qe!==r?(Gc=null,Fc=Ot()+500,Ea(s,r)):va=Ae(s,r);e:do try{if(gt!==0&&Ye!==null){r=Ye;var _=ci;t:switch(gt){case 1:gt=0,ci=null,Sa(s,r,_,1);break;case 2:case 9:if(Cy(_)){gt=0,ci=null,m0(r);break}r=function(){gt!==2&&gt!==9||St!==s||(gt=7),fs(s)},_.then(r,r);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:Cy(_)?(gt=0,ci=null,m0(r)):(gt=0,ci=null,Sa(s,r,_,7));break;case 5:var C=null;switch(Ye.tag){case 26:C=Ye.memoizedState;case 5:case 27:var I=Ye;if(C?e_(C):I.stateNode.complete){gt=0,ci=null;var L=I.sibling;if(L!==null)Ye=L;else{var J=I.return;J!==null?(Ye=J,zc(J)):Ye=null}break t}}gt=0,ci=null,Sa(s,r,_,5);break;case 6:gt=0,ci=null,Sa(s,r,_,6);break;case 8:ip(),Lt=6;break e;default:throw Error(i(462))}}Xw();break}catch(te){c0(s,te)}while(!0);return Vs=To=null,W.H=c,W.A=y,ct=l,Ye!==null?0:(St=null,Qe=0,uc(),Lt)}function Xw(){for(;Ye!==null&&!ji();)p0(Ye)}function p0(s){var r=Ov(s.alternate,s,$s);s.memoizedProps=s.pendingProps,r===null?zc(s):Ye=r}function m0(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=Dv(l,r,r.pendingProps,r.type,void 0,Qe);break;case 11:r=Dv(l,r,r.pendingProps,r.type.render,r.ref,Qe);break;case 5:_h(r);default:Fv(l,r),r=Ye=hy(r,$s),r=Ov(l,r,$s)}s.memoizedProps=s.pendingProps,r===null?zc(s):Ye=r}function Sa(s,r,l,c){Vs=To=null,_h(r),da=null,Dl=0;var y=r.return;try{if(Ow(s,y,r,l,Qe)){Lt=1,Mc(s,Ei(l,s.current)),Ye=null;return}}catch(_){if(y!==null)throw Ye=y,_;Lt=1,Mc(s,Ei(l,s.current)),Ye=null;return}r.flags&32768?(et||c===1?s=!0:va||(Qe&536870912)!==0?s=!1:(Cr=s=!0,(c===2||c===9||c===3||c===6)&&(c=li.current,c!==null&&c.tag===13&&(c.flags|=16384))),g0(r,s)):zc(r)}function zc(s){var r=s;do{if((r.flags&32768)!==0){g0(r,Cr);return}s=r.return;var l=Gw(r.alternate,r,$s);if(l!==null){Ye=l;return}if(r=r.sibling,r!==null){Ye=r;return}Ye=r=s}while(r!==null);Lt===0&&(Lt=5)}function g0(s,r){do{var l=Bw(s.alternate,s);if(l!==null){l.flags&=32767,Ye=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ye=s;return}Ye=s=l}while(s!==null);Lt=6,Ye=null}function y0(s,r,l,c,y,_,C,I,L){s.cancelPendingCommit=null;do $c();while(tn!==0);if((ct&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=Kf,Vn(s,l,_,C,I,L),s===St&&(Ye=St=null,Qe=0),Ta=r,Ir=s,Ks=l,ep=_,tp=y,o0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,eI(Pn,function(){return S0(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,y=de.p,de.p=2,C=ct,ct|=4;try{qw(s,r,l)}finally{ct=C,de.p=y,W.T=c}}tn=1,v0(),_0(),T0()}}function v0(){if(tn===1){tn=0;var s=Ir,r=Ta,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=W.T,W.T=null;var c=de.p;de.p=2;var y=ct;ct|=4;try{jv(r,s);var _=gp,C=sy(s.containerInfo),I=_.focusedElem,L=_.selectionRange;if(C!==I&&I&&I.ownerDocument&&iy(I.ownerDocument.documentElement,I)){if(L!==null&&Gf(I)){var J=L.start,te=L.end;if(te===void 0&&(te=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(te,I.value.length);else{var ie=I.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),ve=I.textContent.length,Re=Math.min(L.start,ve),Et=L.end===void 0?Re:Math.min(L.end,ve);!Z.extend&&Re>Et&&(C=Et,Et=Re,Re=C);var z=ny(I,Re),B=ny(I,Et);if(z&&B&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==B.node||Z.focusOffset!==B.offset)){var Y=ie.createRange();Y.setStart(z.node,z.offset),Z.removeAllRanges(),Re>Et?(Z.addRange(Y),Z.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),Z.addRange(Y))}}}}for(ie=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ie.length;I++){var ne=ie[I];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}id=!!mp,gp=mp=null}finally{ct=y,de.p=c,W.T=l}}s.current=r,tn=2}}function _0(){if(tn===2){tn=0;var s=Ir,r=Ta,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=W.T,W.T=null;var c=de.p;de.p=2;var y=ct;ct|=4;try{Yv(s,r.alternate,r)}finally{ct=y,de.p=c,W.T=l}}tn=3}}function T0(){if(tn===4||tn===3){tn=0,Gn();var s=Ir,r=Ta,l=Ks,c=o0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?tn=5:(tn=0,Ta=Ir=null,E0(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(wr=null),zn(l),r=r.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(hn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=W.T,y=de.p,de.p=2,W.T=null;try{for(var _=s.onRecoverableError,C=0;C<c.length;C++){var I=c[C];_(I.value,{componentStack:I.stack})}}finally{W.T=r,de.p=y}}(Ks&3)!==0&&$c(),fs(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===np?Ql++:(Ql=0,np=s):Ql=0,Xl(0)}}function E0(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Nl(r)))}function $c(){return v0(),_0(),T0(),S0()}function S0(){if(tn!==5)return!1;var s=Ir,r=ep;ep=0;var l=zn(Ks),c=W.T,y=de.p;try{de.p=32>l?32:l,W.T=null,l=tp,tp=null;var _=Ir,C=Ks;if(tn=0,Ta=Ir=null,Ks=0,(ct&6)!==0)throw Error(i(331));var I=ct;if(ct|=4,i0(_.current),e0(_,_.current,C,l),ct=I,Xl(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(hn,_)}catch{}return!0}finally{de.p=y,W.T=c,E0(s,r)}}function A0(s,r,l){r=Ei(l,r),r=kh(s.stateNode,r,2),s=Tr(s,r,2),s!==null&&(on(s,2),fs(s))}function yt(s,r,l){if(s.tag===3)A0(s,s,l);else for(;r!==null;){if(r.tag===3){A0(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(wr===null||!wr.has(c))){s=Ei(l,s),l=Cv(2),c=Tr(r,l,2),c!==null&&(bv(l,c,r,s),on(c,2),fs(c));break}}r=r.return}}function rp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new Kw;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Wh=!0,y.add(l),s=Ww.bind(null,s,r,l),r.then(s,s))}function Ww(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,St===s&&(Qe&l)===l&&(Lt===4||Lt===3&&(Qe&62914560)===Qe&&300>Ot()-Hc?(ct&2)===0&&Ea(s,0):jh|=l,_a===Qe&&(_a=0)),fs(s)}function C0(s,r){r===0&&(r=$e()),s=yo(s,r),s!==null&&(on(s,r),fs(s))}function jw(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),C0(s,l)}function Zw(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),C0(s,l)}function eI(s,r){return pt(s,r)}var Kc=null,Aa=null,op=!1,Yc=!1,ap=!1,Rr=0;function fs(s){s!==Aa&&s.next===null&&(Aa===null?Kc=Aa=s:Aa=Aa.next=s),Yc=!0,op||(op=!0,nI())}function Xl(s,r){if(!ap&&Yc){ap=!0;do for(var l=!1,c=Kc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var C=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-At(42|s)+1)-1,_&=y&~(C&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,x0(c,_))}else _=Qe,_=le(c,c===St?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Ae(c,_)||(l=!0,x0(c,_));c=c.next}while(l);ap=!1}}function tI(){b0()}function b0(){Yc=op=!1;var s=0;Rr!==0&&fI()&&(s=Rr);for(var r=Ot(),l=null,c=Kc;c!==null;){var y=c.next,_=w0(c,r);_===0?(c.next=null,l===null?Kc=y:l.next=y,y===null&&(Aa=l)):(l=c,(s!==0||(_&3)!==0)&&(Yc=!0)),c=y}tn!==0&&tn!==5||Xl(s),Rr!==0&&(Rr=0)}function w0(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var C=31-At(_),I=1<<C,L=y[C];L===-1?((I&l)===0||(I&c)!==0)&&(y[C]=Pe(I,r)):L<=r&&(s.expiredLanes|=I),_&=~I}if(r=St,l=Qe,l=le(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(gt===2||gt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Fn(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Ae(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Fn(c),zn(l)){case 2:case 8:l=Vi;break;case 32:l=Pn;break;case 268435456:l=so;break;default:l=Pn}return c=I0.bind(null,s),l=pt(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Fn(c),s.callbackPriority=2,s.callbackNode=null,2}function I0(s,r){if(tn!==0&&tn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if($c()&&s.callbackNode!==l)return null;var c=Qe;return c=le(s,s===St?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(l0(s,c,r),w0(s,Ot()),s.callbackNode!=null&&s.callbackNode===l?I0.bind(null,s):null)}function x0(s,r){if($c())return null;l0(s,r,!0)}function nI(){pI(function(){(ct&6)!==0?pt(Zi,tI):b0()})}function lp(){if(Rr===0){var s=la;s===0&&(s=kn,kn<<=1,(kn&261888)===0&&(kn=256)),Rr=s}return Rr}function R0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Yo(""+s)}function N0(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function iI(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=R0((y[Ht]||null).action),C=c.submitter;C&&(r=(r=C[Ht]||null)?R0(r.formAction):C.getAttribute("formAction"),r!==null&&(_=r,C=null));var I=new rs("action","action",null,c,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Rr!==0){var L=C?N0(y,C):new FormData(y);xh(l,{pending:!0,data:L,method:y.method,action:_},null,L)}}else typeof _=="function"&&(I.preventDefault(),L=C?N0(y,C):new FormData(y),xh(l,{pending:!0,data:L,method:y.method,action:_},_,L))},currentTarget:y}]})}}for(var up=0;up<$f.length;up++){var cp=$f[up],sI=cp.toLowerCase(),rI=cp[0].toUpperCase()+cp.slice(1);qi(sI,"on"+rI)}qi(ay,"onAnimationEnd"),qi(ly,"onAnimationIteration"),qi(uy,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Ew,"onTransitionRun"),qi(Sw,"onTransitionStart"),qi(Aw,"onTransitionCancel"),qi(cy,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),es("onBeforeInput",["compositionend","keypress","textInput","paste"]),es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wl));function M0(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var C=c.length-1;0<=C;C--){var I=c[C],L=I.instance,J=I.currentTarget;if(I=I.listener,L!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=J;try{_(y)}catch(te){lc(te)}y.currentTarget=null,_=L}else for(C=0;C<c.length;C++){if(I=c[C],L=I.instance,J=I.currentTarget,I=I.listener,L!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=J;try{_(y)}catch(te){lc(te)}y.currentTarget=null,_=L}}}}function Je(s,r){var l=r[Vt];l===void 0&&(l=r[Vt]=new Set);var c=s+"__bubble";l.has(c)||(D0(r,s,2,!1),l.add(c))}function dp(s,r,l){var c=0;r&&(c|=4),D0(l,s,c,r)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function fp(s){if(!s[Jc]){s[Jc]=!0,ul.forEach(function(l){l!=="selectionchange"&&(oI.has(l)||dp(l,!1,s),dp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Jc]||(r[Jc]=!0,dp("selectionchange",!1,r))}}function D0(s,r,l,c){switch(a_(r)){case 2:var y=kI;break;case 8:y=VI;break;default:y=Ip}l=y.bind(null,r,l,s),y=void 0,!lo||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function hp(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var I=c.stateNode.containerInfo;if(I===y)break;if(C===4)for(C=c.return;C!==null;){var L=C.tag;if((L===3||L===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;I!==null;){if(C=st(I),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){c=_=C;continue e}I=I.parentNode}}c=c.return}cr(function(){var J=_,te=yi(l),ie=[];e:{var Q=dy.get(s);if(Q!==void 0){var Z=rs,ve=s;switch(s){case"keypress":if(co(l)===0)break e;case"keydown":case"keyup":Z=rc;break;case"focusin":ve="focus",Z=ho;break;case"focusout":ve="blur",Z=ho;break;case"beforeblur":case"afterblur":Z=ho;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=E;break;case ay:case ly:case uy:Z=ju;break;case cy:Z=x;break;case"scroll":case"scrollend":Z=El;break;case"wheel":Z=X;break;case"copy":case"cut":case"paste":Z=Zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Ds;break;case"toggle":case"beforetoggle":Z=He}var Re=(r&4)!==0,Et=!Re&&(s==="scroll"||s==="scrollend"),z=Re?Q!==null?Q+"Capture":null:Q;Re=[];for(var B=J,Y;B!==null;){var ne=B;if(Y=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||Y===null||z===null||(ne=Hi(B,z),ne!=null&&Re.push(jl(B,ne,Y))),Et)break;B=B.return}0<Re.length&&(Q=new Z(Q,ve,null,l,te),ie.push({event:Q,listeners:Re}))}}if((r&7)===0){e:{if(Q=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",Q&&l!==vl&&(ve=l.relatedTarget||l.fromElement)&&(st(ve)||ve[si]))break e;if((Z||Q)&&(Q=te.window===te?te:(Q=te.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(ve=l.relatedTarget||l.toElement,Z=J,ve=ve?st(ve):null,ve!==null&&(Et=a(ve),Re=ve.tag,ve!==Et||Re!==5&&Re!==27&&Re!==6)&&(ve=null)):(Z=null,ve=J),Z!==ve)){if(Re=Sl,ne="onMouseLeave",z="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Re=Ds,ne="onPointerLeave",z="onPointerEnter",B="pointer"),Et=Z==null?Q:ln(Z),Y=ve==null?Q:ln(ve),Q=new Re(ne,B+"leave",Z,l,te),Q.target=Et,Q.relatedTarget=Y,ne=null,st(te)===J&&(Re=new Re(z,B+"enter",ve,l,te),Re.target=Y,Re.relatedTarget=Et,ne=Re),Et=ne,Z&&ve)t:{for(Re=aI,z=Z,B=ve,Y=0,ne=z;ne;ne=Re(ne))Y++;ne=0;for(var Ce=B;Ce;Ce=Re(Ce))ne++;for(;0<Y-ne;)z=Re(z),Y--;for(;0<ne-Y;)B=Re(B),ne--;for(;Y--;){if(z===B||B!==null&&z===B.alternate){Re=z;break t}z=Re(z),B=Re(B)}Re=null}else Re=null;Z!==null&&P0(ie,Q,Z,Re,!1),ve!==null&&Et!==null&&P0(ie,Et,ve,Re,!0)}}e:{if(Q=J?ln(J):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var rt=Xg;else if(Jg(Q))if(Wg)rt=vw;else{rt=gw;var Te=mw}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?J&&Ko(J.elementType)&&(rt=Xg):rt=yw;if(rt&&(rt=rt(s,J))){Qg(ie,rt,l,te);break e}Te&&Te(s,Q,J),s==="focusout"&&J&&Q.type==="number"&&J.memoizedProps.value!=null&&ml(Q,"number",Q.value)}switch(Te=J?ln(J):window,s){case"focusin":(Jg(Te)||Te.contentEditable==="true")&&(ea=Te,Bf=J,Il=null);break;case"focusout":Il=Bf=ea=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,ry(ie,l,te);break;case"selectionchange":if(Tw)break;case"keydown":case"keyup":ry(ie,l,te)}var qe;if(ut)e:{switch(s){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Zo?po(s,l)&&(Xe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Xe="onCompositionStart");Xe&&(ls&&l.locale!=="ko"&&(Zo||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Zo&&(qe=Tl()):(ss=te,_l="value"in ss?ss.value:ss.textContent,Zo=!0)),Te=Qc(J,Xe),0<Te.length&&(Xe=new as(Xe,s,null,l,te),ie.push({event:Xe,listeners:Te}),qe?Xe.data=qe:(qe=jo(l),qe!==null&&(Xe.data=qe)))),(qe=_i?dw(s,l):fw(s,l))&&(Xe=Qc(J,"onBeforeInput"),0<Xe.length&&(Te=new as("onBeforeInput","beforeinput",null,l,te),ie.push({event:Te,listeners:Xe}),Te.data=qe)),iI(ie,s,J,l,te)}M0(ie,r)})}function jl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Qc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Hi(s,l),y!=null&&c.unshift(jl(s,y,_)),y=Hi(s,r),y!=null&&c.push(jl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function aI(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function P0(s,r,l,c,y){for(var _=r._reactName,C=[];l!==null&&l!==c;){var I=l,L=I.alternate,J=I.stateNode;if(I=I.tag,L!==null&&L===c)break;I!==5&&I!==26&&I!==27||J===null||(L=J,y?(J=Hi(l,_),J!=null&&C.unshift(jl(l,J,L))):y||(J=Hi(l,_),J!=null&&C.push(jl(l,J,L)))),l=l.return}C.length!==0&&s.push({event:r,listeners:C})}var lI=/\r\n?/g,uI=/\u0000|\uFFFD/g;function k0(s){return(typeof s=="string"?s:""+s).replace(lI,`
`).replace(uI,"")}function V0(s,r){return r=k0(r),k0(s)===r}function Tt(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Kn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Kn(s,""+c);break;case"className":ri(s,"class",c);break;case"tabIndex":ri(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(s,l,c);break;case"style":yl(s,c,_);break;case"data":if(r!=="object"){ri(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Yo(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&Tt(s,r,"name",y.name,y,null),Tt(s,r,"formEncType",y.formEncType,y,null),Tt(s,r,"formMethod",y.formMethod,y,null),Tt(s,r,"formTarget",y.formTarget,y,null)):(Tt(s,r,"encType",y.encType,y,null),Tt(s,r,"method",y.method,y,null),Tt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Yo(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Oi);break;case"onScroll":c!=null&&Je("scroll",s);break;case"onScrollEnd":c!=null&&Je("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Yo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Je("beforetoggle",s),Je("toggle",s),zo(s,"popover",c);break;case"xlinkActuate":$t(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":$t(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":$t(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":$t(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":$t(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":$t(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":$t(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":$t(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":$t(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":zo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Qu.get(l)||l,zo(s,l,c))}}function pp(s,r,l,c,y,_){switch(l){case"style":yl(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Kn(s,c):(typeof c=="number"||typeof c=="bigint")&&Kn(s,""+c);break;case"onScroll":c!=null&&Je("scroll",s);break;case"onScrollEnd":c!=null&&Je("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[Ht]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):zo(s,l,c)}}}function vn(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",s),Je("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var C=l[_];if(C!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Tt(s,r,_,C,l,null)}}y&&Tt(s,r,"srcSet",l.srcSet,l,null),c&&Tt(s,r,"src",l.src,l,null);return;case"input":Je("invalid",s);var I=_=C=y=null,L=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var te=l[c];if(te!=null)switch(c){case"name":y=te;break;case"type":C=te;break;case"checked":L=te;break;case"defaultChecked":J=te;break;case"value":_=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:Tt(s,r,c,te,l,null)}}Ku(s,_,I,L,J,C,y,!1);return;case"select":Je("invalid",s),c=C=_=null;for(y in l)if(l.hasOwnProperty(y)&&(I=l[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":C=I;break;case"multiple":c=I;default:Tt(s,r,y,I,l,null)}r=_,l=C,s.multiple=!!c,r!=null?or(s,!!c,r,!1):l!=null&&or(s,!!c,l,!0);return;case"textarea":Je("invalid",s),_=y=c=null;for(C in l)if(l.hasOwnProperty(C)&&(I=l[C],I!=null))switch(C){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:Tt(s,r,C,I,l,null)}ar(s,c,y,_);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Tt(s,r,L,c,l,null)}return;case"dialog":Je("beforetoggle",s),Je("toggle",s),Je("cancel",s),Je("close",s);break;case"iframe":case"object":Je("load",s);break;case"video":case"audio":for(c=0;c<Wl.length;c++)Je(Wl[c],s);break;case"image":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"embed":case"source":case"link":Je("error",s),Je("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Tt(s,r,J,c,l,null)}return;default:if(Ko(r)){for(te in l)l.hasOwnProperty(te)&&(c=l[te],c!==void 0&&pp(s,r,te,c,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(c=l[I],c!=null&&Tt(s,r,I,c,l,null))}function cI(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,C=null,I=null,L=null,J=null,te=null;for(Z in l){var ie=l[Z];if(l.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=ie;default:c.hasOwnProperty(Z)||Tt(s,r,Z,null,c,ie)}}for(var Q in c){var Z=c[Q];if(ie=l[Q],c.hasOwnProperty(Q)&&(Z!=null||ie!=null))switch(Q){case"type":_=Z;break;case"name":y=Z;break;case"checked":J=Z;break;case"defaultChecked":te=Z;break;case"value":C=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==ie&&Tt(s,r,Q,Z,c,ie)}}$o(s,C,I,L,J,te,_,y);return;case"select":Z=C=I=Q=null;for(_ in l)if(L=l[_],l.hasOwnProperty(_)&&L!=null)switch(_){case"value":break;case"multiple":Z=L;default:c.hasOwnProperty(_)||Tt(s,r,_,null,c,L)}for(y in c)if(_=c[y],L=l[y],c.hasOwnProperty(y)&&(_!=null||L!=null))switch(y){case"value":Q=_;break;case"defaultValue":I=_;break;case"multiple":C=_;default:_!==L&&Tt(s,r,y,_,c,L)}r=I,l=C,c=Z,Q!=null?or(s,!!l,Q,!1):!!c!=!!l&&(r!=null?or(s,!!l,r,!0):or(s,!!l,l?[]:"",!1));return;case"textarea":Z=Q=null;for(I in l)if(y=l[I],l.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Tt(s,r,I,null,c,y)}for(C in c)if(y=c[C],_=l[C],c.hasOwnProperty(C)&&(y!=null||_!=null))switch(C){case"value":Q=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&Tt(s,r,C,y,c,_)}Yu(s,Q,Z);return;case"option":for(var ve in l)if(Q=l[ve],l.hasOwnProperty(ve)&&Q!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":s.selected=!1;break;default:Tt(s,r,ve,null,c,Q)}for(L in c)if(Q=c[L],Z=l[L],c.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":s.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:Tt(s,r,L,Q,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)Q=l[Re],l.hasOwnProperty(Re)&&Q!=null&&!c.hasOwnProperty(Re)&&Tt(s,r,Re,null,c,Q);for(J in c)if(Q=c[J],Z=l[J],c.hasOwnProperty(J)&&Q!==Z&&(Q!=null||Z!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Tt(s,r,J,Q,c,Z)}return;default:if(Ko(r)){for(var Et in l)Q=l[Et],l.hasOwnProperty(Et)&&Q!==void 0&&!c.hasOwnProperty(Et)&&pp(s,r,Et,void 0,c,Q);for(te in c)Q=c[te],Z=l[te],!c.hasOwnProperty(te)||Q===Z||Q===void 0&&Z===void 0||pp(s,r,te,Q,c,Z);return}}for(var z in l)Q=l[z],l.hasOwnProperty(z)&&Q!=null&&!c.hasOwnProperty(z)&&Tt(s,r,z,null,c,Q);for(ie in c)Q=c[ie],Z=l[ie],!c.hasOwnProperty(ie)||Q===Z||Q==null&&Z==null||Tt(s,r,ie,Q,c,Z)}function U0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dI(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,C=y.initiatorType,I=y.duration;if(_&&I&&U0(C)){for(C=0,I=y.responseEnd,c+=1;c<l.length;c++){var L=l[c],J=L.startTime;if(J>I)break;var te=L.transferSize,ie=L.initiatorType;te&&U0(ie)&&(L=L.responseEnd,C+=te*(L<I?1:(I-J)/(L-J)))}if(--c,r+=8*(_+C)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var mp=null,gp=null;function Xc(s){return s.nodeType===9?s:s.ownerDocument}function L0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O0(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function yp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var vp=null;function fI(){var s=window.event;return s&&s.type==="popstate"?s===vp?!1:(vp=s,!0):(vp=null,!1)}var H0=typeof setTimeout=="function"?setTimeout:void 0,hI=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,pI=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(s){return F0.resolve(null).then(s).catch(mI)}:H0;function mI(s){setTimeout(function(){throw s})}function Nr(s){return s==="head"}function G0(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),Ia(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Zl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Zl(l);for(var _=l.firstChild;_;){var C=_.nextSibling,I=_.nodeName;_[Ne]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=C}}else l==="body"&&Zl(s.ownerDocument.body);l=y}while(l);Ia(r)}function B0(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function _p(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":_p(l),be(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function gI(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Ne])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=wi(s.nextSibling),s===null)break}return null}function yI(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=wi(s.nextSibling),s===null))return null;return s}function q0(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=wi(s.nextSibling),s===null))return null;return s}function Tp(s){return s.data==="$?"||s.data==="$~"}function Ep(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function vI(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function wi(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Sp=null;function z0(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return wi(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function $0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function K0(s,r,l){switch(r=Xc(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Zl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);be(s)}var Ii=new Map,Y0=new Set;function Wc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ys=de.d;de.d={f:_I,r:TI,D:EI,C:SI,L:AI,m:CI,X:wI,S:bI,M:II};function _I(){var s=Ys.f(),r=Bc();return s||r}function TI(s){var r=An(s);r!==null&&r.tag===5&&r.type==="form"?cv(r):Ys.r(s)}var Ca=typeof document>"u"?null:document;function J0(s,r,l){var c=Ca;if(c&&typeof r=="string"&&r){var y=$n(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Y0.has(y)||(Y0.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),vn(r,"link",s),zt(r),c.head.appendChild(r)))}}function EI(s){Ys.D(s),J0("dns-prefetch",s,null)}function SI(s,r){Ys.C(s,r),J0("preconnect",s,r)}function AI(s,r,l){Ys.L(s,r,l);var c=Ca;if(c&&s&&r){var y='link[rel="preload"][as="'+$n(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+$n(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+$n(l.imageSizes)+'"]')):y+='[href="'+$n(s)+'"]';var _=y;switch(r){case"style":_=ba(s);break;case"script":_=wa(s)}Ii.has(_)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Ii.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(eu(_))||r==="script"&&c.querySelector(tu(_))||(r=c.createElement("link"),vn(r,"link",s),zt(r),c.head.appendChild(r)))}}function CI(s,r){Ys.m(s,r);var l=Ca;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+$n(c)+'"][href="'+$n(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=wa(s)}if(!Ii.has(_)&&(s=T({rel:"modulepreload",href:s},r),Ii.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(tu(_)))return}c=l.createElement("link"),vn(c,"link",s),zt(c),l.head.appendChild(c)}}}function bI(s,r,l){Ys.S(s,r,l);var c=Ca;if(c&&s){var y=gi(c).hoistableStyles,_=ba(s);r=r||"default";var C=y.get(_);if(!C){var I={loading:0,preload:null};if(C=c.querySelector(eu(_)))I.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Ii.get(_))&&Ap(s,l);var L=C=c.createElement("link");zt(L),vn(L,"link",s),L._p=new Promise(function(J,te){L.onload=J,L.onerror=te}),L.addEventListener("load",function(){I.loading|=1}),L.addEventListener("error",function(){I.loading|=2}),I.loading|=4,jc(C,r,c)}C={type:"stylesheet",instance:C,count:1,state:I},y.set(_,C)}}}function wI(s,r){Ys.X(s,r);var l=Ca;if(l&&s){var c=gi(l).hoistableScripts,y=wa(s),_=c.get(y);_||(_=l.querySelector(tu(y)),_||(s=T({src:s,async:!0},r),(r=Ii.get(y))&&Cp(s,r),_=l.createElement("script"),zt(_),vn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function II(s,r){Ys.M(s,r);var l=Ca;if(l&&s){var c=gi(l).hoistableScripts,y=wa(s),_=c.get(y);_||(_=l.querySelector(tu(y)),_||(s=T({src:s,async:!0,type:"module"},r),(r=Ii.get(y))&&Cp(s,r),_=l.createElement("script"),zt(_),vn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Q0(s,r,l,c){var y=(y=Ie.current)?Wc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ba(l.href),l=gi(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ba(l.href);var _=gi(y).hoistableStyles,C=_.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,C),(_=y.querySelector(eu(s)))&&!_._p&&(C.instance=_,C.state.loading=5),Ii.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ii.set(s,l),_||xI(y,s,l,C.state))),r&&c===null)throw Error(i(528,""));return C}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=wa(l),l=gi(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ba(s){return'href="'+$n(s)+'"'}function eu(s){return'link[rel="stylesheet"]['+s+"]"}function X0(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function xI(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),vn(r,"link",l),zt(r),s.head.appendChild(r))}function wa(s){return'[src="'+$n(s)+'"]'}function tu(s){return"script[async]"+s}function W0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+$n(l.href)+'"]');if(c)return r.instance=c,zt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),zt(c),vn(c,"style",y),jc(c,l.precedence,s),r.instance=c;case"stylesheet":y=ba(l.href);var _=s.querySelector(eu(y));if(_)return r.state.loading|=4,r.instance=_,zt(_),_;c=X0(l),(y=Ii.get(y))&&Ap(c,y),_=(s.ownerDocument||s).createElement("link"),zt(_);var C=_;return C._p=new Promise(function(I,L){C.onload=I,C.onerror=L}),vn(_,"link",c),r.state.loading|=4,jc(_,l.precedence,s),r.instance=_;case"script":return _=wa(l.src),(y=s.querySelector(tu(_)))?(r.instance=y,zt(y),y):(c=l,(y=Ii.get(_))&&(c=T({},l),Cp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),zt(y),vn(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,jc(c,l.precedence,s));return r.instance}function jc(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,C=0;C<c.length;C++){var I=c[C];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Ap(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Cp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Zc=null;function j0(s,r,l){if(Zc===null){var c=new Map,y=Zc=new Map;y.set(l,c)}else y=Zc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[Ne]||_[kt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(r)||"";C=s+C;var I=c.get(C);I?I.push(_):c.set(C,[_])}}return c}function Z0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function RI(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function e_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function NI(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ba(c.href),_=r.querySelector(eu(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=ed.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,zt(_);return}_=r.ownerDocument||r,c=X0(c),(y=Ii.get(y))&&Ap(c,y),_=_.createElement("link"),zt(_);var C=_;C._p=new Promise(function(I,L){C.onload=I,C.onerror=L}),vn(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=ed.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var bp=0;function MI(s,r){return s.stylesheets&&s.count===0&&nd(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&nd(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&bp===0&&(bp=62500*dI());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&nd(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>bp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function ed(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var td=null;function nd(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,td=new Map,r.forEach(DI,s),td=null,ed.call(s))}function DI(s,r){if(!(r.state.loading&4)){var l=td.get(s);if(l)var c=l.get(null);else{l=new Map,td.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var C=y[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),c=C)}c&&l.set(null,c)}y=r.instance,C=y.getAttribute("data-precedence"),_=l.get(C)||c,_===c&&l.set(null,y),l.set(C,y),this.count++,c=ed.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var nu={$$typeof:ee,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function PI(s,r,l,c,y,_,C,I,L){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=it(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=it(0),this.hiddenUpdates=it(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function t_(s,r,l,c,y,_,C,I,L,J,te,ie){return s=new PI(s,r,l,C,L,J,te,ie,I),r=1,_===!0&&(r|=24),_=ai(3,null,null,r),s.current=_,_.stateNode=s,r=sh(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},lh(_),s}function n_(s){return s?(s=ia,s):ia}function i_(s,r,l,c,y,_){y=n_(y),c.context===null?c.context=y:c.pendingContext=y,c=_r(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=Tr(s,c,r),l!==null&&(Wn(l,s,r),kl(l,s,r))}function s_(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function wp(s,r){s_(s,r),(s=s.alternate)&&s_(s,r)}function r_(s){if(s.tag===13||s.tag===31){var r=yo(s,67108864);r!==null&&Wn(r,s,67108864),wp(s,67108864)}}function o_(s){if(s.tag===13||s.tag===31){var r=fi();r=Rs(r);var l=yo(s,r);l!==null&&Wn(l,s,r),wp(s,r)}}var id=!0;function kI(s,r,l,c){var y=W.T;W.T=null;var _=de.p;try{de.p=2,Ip(s,r,l,c)}finally{de.p=_,W.T=y}}function VI(s,r,l,c){var y=W.T;W.T=null;var _=de.p;try{de.p=8,Ip(s,r,l,c)}finally{de.p=_,W.T=y}}function Ip(s,r,l,c){if(id){var y=xp(c);if(y===null)hp(s,r,c,sd,l),l_(s,c);else if(LI(y,s,r,l,c))c.stopPropagation();else if(l_(s,c),r&4&&-1<UI.indexOf(s)){for(;y!==null;){var _=An(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=qn(_.pendingLanes);if(C!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;C;){var L=1<<31-At(C);I.entanglements[1]|=L,C&=~L}fs(_),(ct&6)===0&&(Fc=Ot()+500,Xl(0))}}break;case 31:case 13:I=yo(_,2),I!==null&&Wn(I,_,2),Bc(),wp(_,2)}if(_=xp(c),_===null&&hp(s,r,c,sd,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else hp(s,r,c,null,l)}}function xp(s){return s=yi(s),Rp(s)}var sd=null;function Rp(s){if(sd=null,s=st(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=f(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return sd=s,null}function a_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case Zi:return 2;case Vi:return 8;case Pn:case sr:return 32;case so:return 268435456;default:return 32}default:return 32}}var Np=!1,Mr=null,Dr=null,Pr=null,iu=new Map,su=new Map,kr=[],UI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l_(s,r){switch(s){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":iu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(r.pointerId)}}function ru(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=An(r),r!==null&&r_(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function LI(s,r,l,c,y){switch(r){case"focusin":return Mr=ru(Mr,s,r,l,c,y),!0;case"dragenter":return Dr=ru(Dr,s,r,l,c,y),!0;case"mouseover":return Pr=ru(Pr,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return iu.set(_,ru(iu.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,su.set(_,ru(su.get(_)||null,s,r,l,c,y)),!0}return!1}function u_(s){var r=st(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,ni(s.priority,function(){o_(l)});return}}else if(r===31){if(r=f(l),r!==null){s.blockedOn=r,ni(s.priority,function(){o_(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rd(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=xp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);vl=c,l.target.dispatchEvent(c),vl=null}else return r=An(l),r!==null&&r_(r),s.blockedOn=l,!1;r.shift()}return!0}function c_(s,r,l){rd(s)&&l.delete(r)}function OI(){Np=!1,Mr!==null&&rd(Mr)&&(Mr=null),Dr!==null&&rd(Dr)&&(Dr=null),Pr!==null&&rd(Pr)&&(Pr=null),iu.forEach(c_),su.forEach(c_)}function od(s,r){s.blockedOn===r&&(s.blockedOn=null,Np||(Np=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,OI)))}var ad=null;function d_(s){ad!==s&&(ad=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ad===s&&(ad=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Rp(c||l)===null)continue;break}var _=An(l);_!==null&&(s.splice(r,3),r-=3,xh(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Ia(s){function r(L){return od(L,s)}Mr!==null&&od(Mr,s),Dr!==null&&od(Dr,s),Pr!==null&&od(Pr,s),iu.forEach(r),su.forEach(r);for(var l=0;l<kr.length;l++){var c=kr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<kr.length&&(l=kr[0],l.blockedOn===null);)u_(l),l.blockedOn===null&&kr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],C=y[Ht]||null;if(typeof _=="function")C||d_(l);else if(C){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,C=_[Ht]||null)I=C.formAction;else if(Rp(y)!==null)continue}else I=C.action;typeof I=="function"?l[c+1]=I:(l.splice(c,3),c-=3),d_(l)}}}function f_(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Mp(s){this._internalRoot=s}ld.prototype.render=Mp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=fi();i_(l,c,s,r,null,null)},ld.prototype.unmount=Mp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;i_(s.current,2,null,s,null,null),Bc(),r[si]=null}};function ld(s){this._internalRoot=s}ld.prototype.unstable_scheduleHydration=function(s){if(s){var r=qo();s={blockedOn:null,target:s,priority:r};for(var l=0;l<kr.length&&r!==0&&r<kr[l].priority;l++);kr.splice(l,0,s),l===0&&u_(s)}};var h_=e.version;if(h_!=="19.2.3")throw Error(i(527,h_,"19.2.3"));de.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var HI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ud.isDisabled&&ud.supportsFiber)try{hn=ud.inject(HI),Mt=ud}catch{}}return au.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=Tv,_=Ev,C=Sv;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=t_(s,1,!1,null,null,l,c,null,y,_,C,f_),s[si]=r.current,fp(s),new Mp(r)},au.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=Tv,C=Ev,I=Sv,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),r=t_(s,1,!0,r,l??null,c,y,L,_,C,I,f_),r.context=n_(null),l=r.current,c=fi(),c=Rs(c),y=_r(c),y.callback=null,Tr(l,y,c),l=c,r.current.lanes=l,on(r,l),fs(r),s[si]=r.current,fp(s),new ld(r)},au.version="19.2.3",au}var A_;function JI(){if(A_)return kp.exports;A_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kp.exports=YI(),kp.exports}var QI=JI();const XI=US(QI);var ka=OS();const xa=n=>Array.from(new Set(n)).sort((e,t)=>e.localeCompare(t)),cu=[{category:"Vital Sign",items:["Vital sign"]},{category:"Symptom",items:xa(["Abdominal distention","Abdominal pain","Abnormal menstruation","Abnormal sexual exposure","Alopecia","Anorexia","Anosmia","Anxiety","Arthralgia","Back pain","Belching","Blurred vision","Bone pain","Cataracts","Change of bowel habit","Chest tightness/pain","Chills","Clay-colored stool","Cloudy urine","Color changes","Consciousness disturbance","Constipation","Cough","Cramps","Decreased appetite","Delusion","Dental problems","Depression","Diarrhea","Diplopia","Dizziness","Dry eye","Dry mouth","Dryness","Dysphagia","Dyspnea","Dysuria","Ecchymoses","Epistaxis","Excess tearing","Eye redness","Fatigue","Fever","Flank pain","Flatulence","Fractures","Gait disturbance","General edema","Glaucoma","Gum bleeding","Hair loss","Hallucination","Head trauma","Headache","Hearing impairment","Heartburn/acid regurgitation","Heat/cold intolerance","Hematemesis","Hematuria","Hemoptysis","Hesitancy","Hiccup","Hirsutism","Hoarseness","Impotence","Incontinence","Insomnia","Intermittent claudication","Jaundice","Joint stiffness","Joint swelling","Memory loss","Mental stage change","Moles","Myalgia","Nasal congestion","Nausea","Night sweats","Nocturia","Numbness","Ocular pain","Odynophagia","Oliguria","Oral ulcer","Orthopnea","Otalgia","Otorrhea","Palpitation","Panic","Paraesthesia","Paresis/plegia","Paroxysmal nocturnal dyspnea","Petechiae","Photophobia","Plaque","Polyuria","Pruritus","Purpura","Rash","Resting tremor","Rhinorrhea","Small stream of urine","Somnolence","Sore throat","Speech problem","Sputum","Suicidality","Syncope","Tarry stool","Telangiectasia","Tenesmus","Thirsty","Tinnitus","Ulcers","Urgency","Urinary frequency","Vertigo","Visual field defect","Vomiting","Weight change","Wheezes"])},{category:"Negative Symptom",items:[]},{category:"Medical Facility",items:["Keelung Chang Gung Memorial Hospital ()","Linkou Chang Gung Memorial Hospital ()","Chiayi Chang Gung Memorial Hospital ()","Kaohsiung Chang Gung Memorial Hospital ()","National Taiwan University Hospital ()","National Taiwan University Hospital Yunlin Branch ()","National Taiwan University Hospital Hsinchu Branch ()","National Taiwan University Cancer Center ()","Taipei Veterans General Hospital ()","Taichung Veterans General Hospital ()","Kaohsiung Veterans General Hospital ()","Taipei City Hospital, Renai Branch ()","Taipei City Hospital, Zhongxing Branch ()","Taipei City Hospital, Heping Fuyou Branch ()","Taipei City Hospital, Yangming Branch ()","Taipei City Hospital, Zhongxiao Branch ()","Tri-Service General Hospital ()","Mackay Memorial Hospital ()","Hsinchu Mackay Memorial Hospital ()","Mackay Memorial Hospital Tamsui Branch ()","Cathay General Hospital ()","Sijhih Cathay General Hospital ()","Shin Kong Wu Ho-Su Memorial Hospital ()","Wanfang Hospital","Taipei Medical University Hospital ()","Cheng Hsin General Hospital ()","Far Eastern Memorial Hospital ()","Taipei Tzu Chi Hospital ()","Hualien Tzu Chi Hospital ()","Dalin Tzu Chi Hospital ()","Cardinal Tien Hospital ()","Fu Jen Catholic University Hospital ()","Taoyuan General Hospital, Ministry of Health and Welfare ()","China Medical University Hospital ()","Chung Shan Medical University Hospital ()","Tungs' Taichung MetroHarbor Hospital ()","Kuang Tien General Hospital ()","Cheng Ching Hospital ()","Changhua Christian Hospital ()","Show Chwan Memorial Hospital ()","Chia-Yi Christian Hospital ()","National Cheng Kung University Hospital ()","Chi Mei Medical Center ()","Kaohsiung Medical University Chung-Ho Memorial Hospital ()","E-Da Hospital ()","Taiwan Adventist Hospital ()","Pojen General Hospital ()","West Garden Hospital ()","Taipei Hospital, Ministry of Health and Welfare ()","New Taipei City Hospital ()","Cardinal Tien Hospital Yonghe Branch ()","New Taipei Municipal Tucheng Hospital ()"]},{category:"Disease",items:xa(["Acute Bronchitis","Acute Gastroenteritis (AGE)","Acute Kidney Injury (AKI)","Acute Myocardial Infarction (AMI)","Acute Pancreatitis","Acute Pyelonephritis (APN)","Adrenal Insufficiency","Anemia","Ankylosing Spondylitis (AS)","Aortic Stenosis / Regurgitation","Appendicitis","Asthma","Atrial Fibrillation (Afib)","Benign Prostatic Hyperplasia (BPH)","Breast Cancer","Cellulitis","Cerebrovascular Accident (CVA) / Stroke","Cholecystitis","Chronic Kidney Disease (CKD)","Chronic Obstructive Pulmonary Disease (COPD)","Colorectal Cancer","Congestive Heart Failure (CHF) / Heart Failure (HF)","Coronary Artery Disease (CAD)","Deep Vein Thrombosis (DVT)","Dehydration","Dementia","Depression / Anxiety Disorder","Diabetes Mellitus (DM)","Diabetic Foot","Diabetic Ketoacidosis (DKA)","Diverticulitis","End-Stage Renal Disease (ESRD)","Esophageal Cancer","Gastroesophageal Reflux Disease (GERD)","Gout","Hepatitis B / C","Hepatocellular Carcinoma (HCC)","Herniated Intervertebral Disc (HIVD)","Herpes Zoster (Shingles)","Hyperlipidemia","Hypertension (HTN)","Hyperthyroidism","Hypothyroidism","Ileus / Bowel Obstruction","Infective Endocarditis","Influenza","Leukemia","Liver Cirrhosis","Lower GI Bleeding","Lung Cancer","Lymphoma","Meningitis / Encephalitis","Myasthenia Gravis (MG)","Necrotizing Fasciitis","Nephrotic Syndrome","Obstructive Sleep Apnea (OSA)","Parkinson's Disease","Peptic Ulcer Disease (PUD)","Peripheral Arterial Occlusive Disease (PAOD)","Pleural Effusion","Pneumonia","Pneumothorax","Prostate Cancer","Pulmonary Embolism (PE)","Pulmonary Tuberculosis (TB)","Rabies","Rheumatoid Arthritis (RA)","Seizure Disorder / Epilepsy","Sepsis / Septic Shock","Sjogren's Syndrome","Systemic Lupus Erythematosus (SLE)","Thrombocytopenia","Tumor Bleeding","Upper GI Bleeding","Urinary Tract Infection (UTI)","Urolithiasis / Renal Stone","Vertigo / Benign Paroxysmal Positional Vertigo (BPPV)"])},{category:"Tentative Diagnosis",items:[]},{category:"Underlying disease",items:[]},{category:"Definitive diagnosis",items:[]},{category:"Physical examination",items:xa(["Breathing sound","Heart sound","Pitting edema","Abdominal tenderness","Rebound tenderness","Muscle guarding","Knocking pain","Tenderness"])},{category:"Lab data",items:xa(["Anemia","Leukocytosis","Leukopenia","Neutrophilia","Neutropenia","Lymphocytosis","Lymphocytopenia / Lymphopenia","Monocytosis","Eosinophilia","Basophilia","Thrombocytosis","Thrombocytopenia","Pancytopenia","Polycythemia / Erythrocytosis","Macrocytosis","Microcytosis","Reticulocytosis","Prolonged PT/INR","Prolonged aPTT","Hypofibrinogenemia","Hypernatremia","Hyponatremia","Hyperkalemia","Hypokalemia","Hypercalcemia","Hypocalcemia","Hypermagnesemia","Hypomagnesemia","Hyperphosphatemia","Hypophosphatemia","Hyperchloremia","Hypochloremia","Azotemia","Uremia","Hematuria","Proteinuria","Albuminuria / Microalbuminuria","Pyuria","Glycosuria / Glucosuria","Ketonuria","Bacteriuria","Cylindruria","Crystalluria","Hemoglobinuria","Myoglobinuria","Hyperbilirubinemia","Elevated Transaminases","Cholestasis","Hypoalbuminemia","Hyperglobulinemia","Hyperammonemia","Elevated Alkaline Phosphatase (Alk-P)","Hypoproteinemia","Hyperglycemia","Hypoglycemia","Elevated HbA1c","Hyperlipidemia / Dyslipidemia","Hypercholesterolemia","Hypertriglyceridemia","Hyperuricemia","Thyrotoxicosis","Subclinical Hypothyroidism","Hyperferritinemia","Metabolic Acidosis","Metabolic Alkalosis","Respiratory Acidosis","Respiratory Alkalosis","Hypoxemia","Hypercapnia","Hypocapnia","Hyperlactatemia / Lactic Acidosis","Elevated C-Reactive Protein (CRP)","Elevated ESR","Procalcitonin Elevation","Elevated Troponin (Troponin-I / T)","Elevated BNP / NT-proBNP","Elevated CK-MB","Elevated CPK / Creatine Kinase","elevated lactate","elevated BUN","elevated creatinine","microscopic hematuria","macroscopic hematuria"])},{category:"Culture / Gram stain",items:["wound","pus","blood","sputum","urine","stool","CSF","pleural effusion","ascites","Synovial fluid","CVC Tip","Port-A Tip","Foley Tip","Bronchoalveolar Lavage","Nasopharyngeal Swab","Throat Swab"]},{category:"Image finding",items:xa(["Chest X-ray (CXR)","Kidney, Ureter, and Bladder (KUB)","Abdominal Plain Film (Abd X-ray)","Spine X-ray (C/T/L-spine)","Bone X-ray","Abdominal Ultrasonography (Abd Echo/TAS)","Echocardiography (Echo)","Thyroid Ultrasonography","Breast Ultrasonography","Carotid Duplex Ultrasound","Kidney/Renal Ultrasonography","Brain CT","Chest CT","Abdominal CT","CT Angiography (CTA)","High-Resolution Computed Tomography (HRCT)","Brain MRI","Spine MRI","Magnetic Resonance Angiography (MRA)","Magnetic Resonance Cholangiopancreatography (MRCP)","Bone Scan","Positron Emission Potentially (PET)","Angiography","Mammography"])},{category:"Treatment",items:xa(["Antibiotics","Diuretics","Fluid resuscitation","Oxygen therapy","Hemodialysis","Bronchodilator"])}],C_=`
**Role:**
 JSON   / Admission Note - Present Illness section

**Input Data Structure ():**
 JSON 
1. \`patient_profile\`:  ( \`control_status\`)
2. \`timepoints\`:  ** (Array)** \`date\`, \`symptom\`, \`vital_sign\`, \`treatment\`, \`lab_data\`, \`image_finding\`, \`negative_symptom\`  Key
   - **:**  Key  \`""\`  \`null\` (SKIP) "unknown" 

**Objective:**


**Style Guidelines (STYLE GUIDELINES) - :**

1. ** (Narrative Logic & Chain of Care):**
   - **LMD  ER :**  \`timepoints\`  (LMD)  **"futile"**, **"ineffective"**  **"not effective"** (ER) 
   - **:**  **"This time"**  **"At this time"**  (PMH)  (Present Illness)
   - **:** **"According to [family/wife/husband]..."**  **"[Family member] witnessed that..."**

2. ** (Sentence Structure & Grammar):**
   - **"Denied" () :**  "No fever, no cough"  \`negative_symptom\`  **"denied"**"He denied fever, chills, or chest pain."**"No [symptom] was noted/mentioned."**
   - **"Beside" :**  **"Beside"** "Besides"
   - **/:**  "He had a tremor" **"[Symptom] was noted/observed"**  **"[Symptom] occurred"**
   - **/:** **"Aggravated by [A] but not [B]"**  **"Relieved by [C]"**
   - **:** **"For [Diagnosis], he/she was admitted..."**  **"Under the impression of [Diagnosis], he/she was admitted..."**

3. ** (Data Formatting):**
   - **:** **"[Disease] + [Duration] + [Follow-up Location] + [Control status]"**"Hypertension for 10 years with regular follow-up at our OPD."
   - ** ():** **Temperature -> Blood Pressure -> Pulse -> Respiratory Rate -> SpO2**
   - **:**  (;) "WBC: 10700/ul; CRP: 76.4 mg/L"
   - **:**  ** + /**"Yellowish, tenacious sputum", "Pinkish urine"
   - **:**  **"unremarkable"**
   - **:** **Brand names** ()  (e.g., *Unasyn*); **Generic names** ()  (e.g., *moxifloxacin*)

4. ** (Grammar & Terminology Precision) [NEW]:**
   - **:**  "since 3 days ago" **"for 3 days"**, **"since 3 days prior"**,  **"developed 3 days before admission"**
   - **:** - : **lungs**, **feet**, **breath sounds**, **bowel sounds**
     - : sputum, urine, inflammation
   - **:** - Weakness **in** the leg (NOT over).
     - Tenderness **over** the spine.
     - Mass **in** the lung.
   - **:**  "LMD"  **"local clinic"**  **"private clinic"** "AAD"  **"discharged against medical advice (AMA)"**

** (VOCABULARY BANK) - :**


* ** (Mode of Onset / Appearance):**
  - ** (Verbs):** Appear, Develop, Present (with), Occur (on), Strike, Ensue from, Be restricted to.
  - ** (Adjectives):** Sudden / Abrupt, Gradual / Insidious, Progressive, Episodic / Paroxysmal, Intermittent, Transient, Periodic, Recurrent.
* ** (Causality):**
  - **:** Be provoked by, Be precipitated by, Be triggered by, Be induced by.
  - **:** Be associated with, Be related to, Be accompanied by, Be complicated by.
* ** (Course & Outcome):**
  - **:** Disappear, Vanish, Subside.
  - **:** Improve, Become better, Lessen; (Passive) Be relieved, Be palliated, Be alleviated.
  - **:** Aggravate, Exacerbate, Worsen, Deteriorate.
  - **:** Recur, Relapse, Flare up.
  - **:** Fluctuate, Wax and wane.
* ** (Encounter & Work-up):**
  - **:** Was admitted, Was seen, Was evaluated, Was referred, Was transferred.
  - ** (Procedures):** - Use: **"Insert a Foley"**, **"Perform intubation"**, **"Replace an NG tube"**.
    - **FORBIDDEN:** "On Foley", "Re-on NG", "On endo".
  - ** (Test):** Was performed, Was obtained, Was collected.
* ** (Treatment):**
  - **:** Treat, Administer, Give, Initiate, Start.
  - **:** **Switch to**, **Replace by**, **Substitute for**. (FORBIDDEN: "Shift to").
  - **:** **Discontinue**, **Withhold**, **Stop**. (FORBIDDEN: "Hold").
  - **:** Be ineffective, Not effective, **Futile**; Result in improvement.
* **:**
  - **:** **"Sequently"**, **"Consecutively"**, **"Successively"**, **"Afterwards"**.
  - **:** **"manifested"**, **"depicted"**, **"revealed"**, **"demonstrated"**, **"evinced"**.
  - **:** **"Avowed"**, **"Perceived"**, **"Complained of"**, State, Insist, Claim, Confide.
  - **:** Use **"Was diagnosed with"**, **"A diagnosis of... was made"**. (FORBIDDEN: "Was told to have", "Pneumonia was impressed").
  - **:** Use **"Lost to follow-up"**, **"Defaulted"**. (FORBIDDEN: "Escape").
  - **:** **stationary**, **"stable"**.
  - **:** **"antecedent [Disease]"**.

**Drafting Structure ( - Dynamic Loop):**

1. ** (Background)**
   -  \`patient_profile\` 
   - : "This [Age]-year-old [Gender] has a medical history of [Disease]..." ( \`control_status\`)

2. ** N  (The Narrative Loop)**
   - **:**  (Iterate through) \`timepoints\` 
   - **Loop :**
     - ** (Timepoint):**
       -  \`date\` 
       - ** (Symptom):**  \`symptom\` ()  \`negative_symptom\` ( "denied")
       - ** (Objective):**  \`vital_sign\`, \`lab_data\`, \`image_finding\` "revealed/evinced/manifested" 
       - ** (Treatment):**  \`treatment\` LMD (Local Clinic)  **"futile"**  **"ineffective"**
     - ** (Transition):**  Vocabulary Bank  ( "Sequently", "Consecutively") 

3. ** (Conclusion/Admission)**
   -  ( ER)  \`definitive_diagnosis\` 
   - : "**For [Diagnosis], he/she was admitted for further evaluation and administration.**"

**Anti-Hallucination & Missing Detail Prompts ( - CRITICAL):**

**Rule 1: Strict Anti-Hallucination**
Do **NOT** invent any data not present in the JSON. If the JSON says "fever" but gives no temperature, do NOT make up a number like "38.5C".

**Rule 2: The "Missing Detail" Heuristic ()**
While you must not invent details, you MUST flag clinically important missing information. If the JSON input provides a *generic* term without *specific attributes*, **insert a reminder in parentheses within the sentence**: \`(Note: Please add [Detail Name])\`.

**Apply this rule to the following categories:**

* **Symptoms (LQQOPERA check):**
    * If a symptom is listed without **Duration**, insert \`(Note: duration?)\`.
    * If "Pain" is listed without **Location**, **Quality**, or **Radiation**, insert \`(Note: location/quality/radiation?)\`.
    * If "Fever" is listed without **Temperature (Tmax)**, insert \`(Note: Tmax?)\`.
* **Secretions/Excretions:**
    * If "Sputum", "Diarrhea", "Hematuria" are mentioned without **Color/Amount/Consistency**, insert \`(Note: color/amount/consistency?)\`.
* **Treatment/Medication:**
    * If generic terms (e.g., "Antibiotics") are used without a **Specific Drug Name**, insert \`(Note: drug name?)\`.
* **Labs/Images:**
    * If "Image finding" is present but lacks a **Description**, insert \`(Note: image finding description?)\`.
    * If generic lab abnormalities (e.g., "Leukocytosis") are mentioned without \`Specific Values\`, insert \`(Note: value?)\`.
`;/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),b_=n=>{const e=jI(n);return e.charAt(0).toUpperCase()+e.slice(1)},HS=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),ZI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ex={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=oe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...f},g)=>oe.createElement("svg",{ref:g,...ex,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:HS("lucide",o),...!a&&!ZI(f)&&{"aria-hidden":"true"},...f},[...u.map(([h,v])=>oe.createElement(h,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(n,e)=>{const t=oe.forwardRef(({className:i,...o},a)=>oe.createElement(tx,{ref:a,iconNode:e,className:HS(`lucide-${WI(b_(n))}`,`lucide-${n}`,i),...o}));return t.displayName=b_(n),t};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],FS=ze("activity",nx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sx=ze("arrow-right",ix);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],ox=ze("brain-circuit",rx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],lx=ze("building-2",ax);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],cx=ze("calendar-days",ux);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],GS=ze("check",dx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],w_=ze("chevron-down",fx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xi=ze("chevron-right",hx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mx=ze("circle-alert",px);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yx=ze("circle-check",gx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],BS=ze("circle-user",vx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Tx=ze("clock",_x);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],Sx=ze("cloud-download",Ex);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qm=ze("copy",Ax);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],bx=ze("external-link",Cx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qS=ze("file-text",wx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],xx=ze("grip-vertical",Ix);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],Nx=ze("heart-pulse",Rx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],I_=ze("history",Mx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],zS=ze("key",Dx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gu=ze("loader-circle",Px);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Vx=ze("lock",kx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Lx=ze("log-out",Ux);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Hx=ze("maximize-2",Ox);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],Gx=ze("message-square-text",Fx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],qx=ze("minimize-2",Bx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],$x=ze("octagon-alert",zx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$S=ze("plus",Kx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Jx=ze("redo-2",Yx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xx=ze("save",Qx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Op=ze("search",Wx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zx=ze("shield-check",jx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ed=ze("sparkles",eR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],KS=ze("triangle-alert",tR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],iR=ze("type",nR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],rR=ze("undo-2",sR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],aR=ze("user",oR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],uR=ze("wand-sparkles",lR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],dR=ze("wind",cR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bu=ze("x",fR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],pR=ze("zap",hR),mR=({onItemClick:n,customItems:e={},onAddCustomItem:t})=>{const[i,o]=oe.useState(""),[a,u]=oe.useState(""),[f,g]=oe.useState(""),[h,v]=oe.useState(null),[T,S]=oe.useState(null),[w,V]=oe.useState(null),[k,P]=oe.useState(null),[$,F]=oe.useState(null),[ee,re]=oe.useState(null),[ce,pe]=oe.useState(null),M=oe.useRef(null),N=oe.useRef(null),R=oe.useRef(null),H=oe.useRef(null),O=oe.useRef(null),[q,D]=oe.useState([]),[Me,ft]=oe.useState(!1),[W,de]=oe.useState(""),[_e,Ge]=oe.useState([]),[Ke,G]=oe.useState(""),[j,ue]=oe.useState({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),[me,we]=oe.useState(null),[Ie,Be]=oe.useState([]),[ht,lt]=oe.useState(!1),[Nn,pi]=oe.useState(null),[ti,mi]=oe.useState(""),[Sn,Pi]=oe.useState(""),[Mn,Wi]=oe.useState(!1),[ki,nt]=oe.useState(null),[pt,Fn]=oe.useState(null),[ji,Gn]=oe.useState(null),[Ot,Dn]=oe.useState(""),[Zi,Vi]=oe.useState("Select Category"),[Pn,sr]=oe.useState(""),[so,ws]=oe.useState(!1),[Is,hn]=oe.useState(""),Mt=oe.useRef(null);oe.useRef(null);const Zt=U=>{hn(U),ws(!0),setTimeout(()=>ws(!1),2e3)},At=["Vital Sign","Symptom","Disease","Medical Facility","Physical examination","Lab data","Culture / Gram stain","Image finding","Treatment"],xs=["Penicillins ()","Cephalosporins ()","Carbapenems ()","Fluoroquinolones ()","Aminoglycosides ()","Tetracyclines ()","Macrolides ()","Glycopeptides & Lipopeptides ()","Other ()"],Bn={"Penicillins ()":["Penicillin G Benzathine","Penicillin G Sodium","Oxacillin (IV)","Dicloxacillin (PO)","Ampicillin","Amoxicillin","Ampicillin + Sulbactam (Unasyn)","Amoxicillin + Clavulanate (Augmentin)","Amoxicillin + Clavulanate (Curam)","Piperacillin + Tazobactam (Tazocin)","Ticarcillin + Clavulanate (Timentin)"],"Cephalosporins ()":[{type:"header",label:"--  --"},"Cefazolin (IV)","Cephalexin (PO)",{type:"header",label:"--  --"},"Cefuroxime (Zinacef - IV)","Cefuroxime (Ceflour - PO)",{type:"header",label:"--  (Cephamycins) --"},"Cefmetazole","Cefoxitin",{type:"header",label:"-- 2.5 --"},"Flomoxef (Flumarin)",{type:"header",label:"--  --"},"Ceftriaxone (Rocephin)","Cefotaxime (Claforan/Loforan)","Cefixime (PO)","Ceftazidime (Fortum)",{type:"header",label:"-- 3.5 --"},"Cefoperazone + Sulbactam (Brosym)",{type:"header",label:"--  --"},"Cefepime (Maxipime)",{type:"header",label:"--  --"},"Ceftobiprole (Zeftera)","Ceftaroline (Zinforo)",{type:"header",label:"--  --"},"Cefiderocol","Ceftazidime + Avibactam (Zavicefta)"],"Carbapenems ()":["Ertapenem (Invanz)","Imipenem (Tienam)","Meropenem (Mepem)","Doripenem (Finibax)"],"Fluoroquinolones ()":["Ciprofloxacin (Ciproxin)","Levofloxacin (Cravit)","Moxifloxacin (Avelox)","Gemifloxacin (Factive)","Nemonoxacin"],"Aminoglycosides ()":["Gentamicin","Amikacin","Streptomycin"],"Tetracyclines ()":["Tetracycline","Doxycycline","Minocycline","Tigecycline (Tygacil)","Eravacycline"],"Macrolides ()":["Erythromycin","Clarithromycin (Klaricid)","Azithromycin (Zithromax)"],"Glycopeptides & Lipopeptides ()":["Vancomycin","Teicoplanin (Targocid)","Daptomycin (Cubicicin)"],"Other ()":["Linezolid (Zyvox)","Metronidazole (Flagyl)","TMP-SMX (Baktar)","TMP-SMX (Sevatrim)","Colistin (Colimycin)","Clindamycin (Clincin)","Rifampin","Fosfomycin","Fusidic acid (Fucidin)","Monobactam (Aztreonam)"]},Ui=(U,fe)=>{const Ee=e[fe]||[];if(Ee.length===0)return U;const Ne=new Set(U);return[...U,...Ee.filter(be=>!Ne.has(be))].sort((be,st)=>be.localeCompare(st))};oe.useMemo(()=>{const U={...Bn};return Object.keys(Bn).forEach(fe=>{const Ee=e[fe]||[];if(Ee.length>0){const Ne=new Set(U[fe].map(st=>typeof st=="string"?st:st.label)),be=Ee.filter(st=>!Ne.has(st));U[fe]=[...U[fe],...be]}}),U},[Bn,e]);const kn=["Acinetobacter baumannii","Acinetobacter spp.","Actinomyces","Aeromonas hydrophila","Aggregatibacter actinomycetemcomitans","Alcaligenes","Aspergillus fumigatus","Bacillus anthracis","Bacillus cereus","Bacillus spp.","Bacteroides fragilis","Bartonella henselae","Bordetella pertussis","Borrelia burgdorferi","Borrelia recurrentis","Brucella melitensis","Burkholderia cepacia complex","Burkholderia pseudomallei","Campylobacter coli","Campylobacter jejuni","Candida albicans","Candida spp.","Capnocytophaga canimorsus","Cardiobacterium hominis","Chlamydia pneumoniae","Chlamydia trachomatis","Chlamydophila psittaci","Citrobacter","Clostridium botulinum","Clostridium difficile (also known as Clostridioides difficile)","Clostridium perfringens","Clostridium septicum","Clostridium sordellii","Clostridium tetani","Corynebacterium diphtheriae","Corynebacterium spp.","Coxiella burnetii","Cryptococcus","Eikenella corrodens","Enterobacter cloacae","Enterobacter spp.","Enterococcus faecalis","Enterococcus faecium","Enterococcus spp.","Erysipelothrix rhusiopathiae","Escherichia coli (E. coli)","Francisella tularensis","Fusobacterium","Gardnerella vaginalis","Haemophilus ducreyi","Haemophilus influenzae","Helicobacter pylori","Kingella kingae","Klebsiella pneumoniae","Klebsiella spp.","Lactobacillus","Legionella pneumophila","Leptospira interrogans","Listeria monocytogenes","Micrococci species","Moraxella catarrhalis","Morganella","Mycobacterium abscessus","Mycobacterium africanum","Mycobacterium avium complex (MAC)","Mycobacterium bovis","Mycobacterium canettii","Mycobacterium caprae","Mycobacterium chelonae","Mycobacterium fortuitum","Mycobacterium gordonae","Mycobacterium haemophilum","Mycobacterium kansasii","Mycobacterium leprae","Mycobacterium lepromatosis","Mycobacterium malmoense","Mycobacterium marinum","Mycobacterium microti","Mycobacterium orygis","Mycobacterium scrofulaceum","Mycobacterium tuberculosis","Mycobacterium ulcerans","Mycobacterium xenopi","Mycoplasma genitalium","Mycoplasma pneumoniae","Neisseria gonorrhoeae","Neisseria meningitidis","Nocardia","Orientia tsutsugamushi","Pasteurella multocida","Peptostreptococcus","Pneumocystis jirovecii","Prevotella","Proteus mirabilis","Proteus spp.","Providencia","Providencia stuartii","Pseudomonas aeruginosa","Rickettsia prowazekii","Rickettsia rickettsii","Rickettsia typhi","Salmonella enteritidis","Salmonella paratyphi","Salmonella typhi","Salmonella typhimurium","Schistosoma spp.","Serratia marcescens","Shigella dysenteriae","Staphylococcus aureus","Staphylococcus epidermidis","Staphylococcus saprophyticus","Stenotrophomonas maltophilia","Streptococcus agalactiae (Group B Streptococcus)","Streptococcus bovis","Streptococcus dysgalactiae","Streptococcus mutans","Streptococcus pneumoniae","Streptococcus pyogenes (Group A Streptococcus)","Streptococcus viridans","Treponema pallidum","Trichomonas vaginalis","Ureaplasma urealyticum","Vibrio cholerae","Vibrio parahaemolyticus","Vibrio vulnificus","Yersinia enterocolitica","Yersinia pestis"],Li=oe.useMemo(()=>Ui(kn,"Culture"),[kn,e]),Ct=["No organisms seen","GPC: Gram-positive cocci in clusters","GPC: Gram-positive cocci in chains","GPC: Gram-positive cocci in pairs","GNB: Gram-negative bacilli","Yeast-like","GPB (Gram-positive bacilli / rods)","GNC (Gram-negative cocci)","GVC (Gram-variable cocci/bacilli)"],qn=oe.useMemo(()=>Ui(Ct,"Gram stain"),[Ct,e]),le=["Crackles (Rales) - Coarse","Crackles (Rales) - Fine","Stridor","Wheezes","Rhonchi","Pleural Friction Rub"],Ae=oe.useMemo(()=>Ui(le,"Breathing sound"),[le,e]),Pe=[{id:"RUL",label:"RUL",col:"Right",row:"Upper"},{id:"LUL",label:"LUL",col:"Left",row:"Upper"},{id:"RML",label:"RML",col:"Right",row:"Middle"},{id:"LML",label:"LML",col:"Left",row:"Middle"},{id:"RLL",label:"RLL",col:"Right",row:"Lower"},{id:"LLL",label:"LLL",col:"Left",row:"Lower"}],$e=["LUQ","RUQ","LLQ","RLQ"],it=["Right Hypochondriac Region","Epigastric Region","Left Hypochondriac Region","Right Lumbar / Flank Region","Umbilical Region","Left Lumbar / Flank Region","Right Iliac / Inguinal Fossa","Hypogastric / Suprapubic Region","Left Iliac / Inguinal Fossa"],[on,Vn]=oe.useState([]),an=oe.useCallback(()=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{v(null),F(null),bt()},150)},[]),en=oe.useCallback(()=>{R.current&&(clearTimeout(R.current),R.current=null)},[]);oe.useEffect(()=>{h&&H.current&&H.current.focus()},[h]),oe.useEffect(()=>{($||me)&&O.current&&O.current.focus()},[$,me]),oe.useLayoutEffect(()=>{if(w&&M.current){const U=M.current.getBoundingClientRect(),fe=16;let{top:Ee,left:Ne}=w;Ee+U.height>window.innerHeight-fe&&(Ee=Math.max(fe,window.innerHeight-U.height-fe)),Ne+U.width>window.innerWidth-fe&&(Ne=Math.max(fe,window.innerWidth-U.width-fe)),P({top:Ee,left:Ne,width:U.width,maxHeight:window.innerHeight-Ee-fe})}},[w,h]),oe.useLayoutEffect(()=>{if(ee&&N.current){const U=N.current.getBoundingClientRect(),fe=16;let{top:Ee,left:Ne}=ee;Ee+U.height>window.innerHeight-fe&&(Ee=Math.max(fe,window.innerHeight-U.height-fe)),k&&Ne+U.width>window.innerWidth-fe&&(Ne=Math.max(fe,k.left-U.width-4)),pe({top:Ee,left:Ne,width:U.width,maxHeight:window.innerHeight-Ee-fe})}},[ee,k,$,me]);const bt=()=>{Be([]),lt(!1),we(null),pi(null),mi(""),Pi(""),u(""),g(""),D([]),ft(!1),de(""),Ge([]),G("")},Rs=(U,fe,Ee)=>{en();const Ne=U.currentTarget.getBoundingClientRect();v(fe),S(Ee),u(""),V({top:Ne.top,left:Ne.right+4,right:Ne.right}),h!==fe&&(F(null),bt())},zn=(U,fe)=>{en();const Ee=U.currentTarget.getBoundingClientRect();F(fe),g(""),re({top:Ee.top,left:Ee.right+4,right:Ee.right})},qo=U=>{ft(!1),D(fe=>fe.includes(U)?fe.filter(Ee=>Ee!==U):[...fe,U])},ni=()=>{const U=Me?"Bilateral":q.join(", ");U?n("Physical examination",`${$} at ${U}`):n("Physical examination",$),v(null),bt()},ii=()=>{const U=W?`Grade ${W}/6`:"",fe=_e.length>0?_e.join(", "):"",Ee=Ke?`at ${Ke}`:"",be=`Murmur: ${[U,fe,Ee].filter(Boolean).join(" ")}`;n("Physical examination",be),v(null),bt()},kt=()=>{const U=[];j.T&&U.push(`T: ${j.T} C`),j.P&&U.push(`P: ${j.P} bpm`),j.R&&U.push(`R: ${j.R} /min`),j.BP&&U.push(`BP: ${j.BP} mmHg`),j.SpO2&&U.push(`SpO2: ${j.SpO2} %`),j.GCS&&U.push(`GCS: ${j.GCS}`),U.length>0&&(n("Vital Sign",U.join(", ")),ue({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),v(null),bt())},Ht=(U,fe)=>{en();const Ee=U.currentTarget.getBoundingClientRect();fe==="zones"?(re({top:Ee.top,left:Ee.right+4,right:Ee.right}),we("zones"),g("")):(re({top:Ee.top,left:Ee.right+4,right:Ee.right}),pi("details"),g(""))},si=U=>{Be(fe=>fe.includes(U)?fe.filter(Ee=>Ee!==U):[...fe,U]),lt(!1)},Vt=(U,fe)=>{if(!fe)return U;const Ee=fe.toLowerCase();return U.filter(Ne=>(typeof Ne=="string"?Ne:Ne.label).toLowerCase().includes(Ee))};return A.jsxs("div",{className:"flex flex-col h-full bg-slate-50 border-r border-slate-200 overflow-visible relative",children:[A.jsxs("div",{className:"p-4 bg-white border-b border-slate-200 shadow-sm z-10 flex flex-col gap-3",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:"Menu Source"}),A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"text",placeholder:"Search categories...",className:"w-full pl-9 pr-3 py-2 text-sm border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",value:i,onChange:U=>o(U.target.value)}),A.jsx(Op,{className:"absolute left-3 top-2.5 text-slate-400 w-4 h-4"})]})]}),A.jsxs("div",{className:"border-t border-slate-100 pt-3",children:[A.jsxs("button",{onClick:()=>Wi(!Mn),className:"flex items-center text-xs font-bold text-blue-600 hover:text-blue-800 transition-colors uppercase tracking-tight",children:[Mn?A.jsx(w_,{className:"w-3 h-3 mr-1"}):A.jsx(xi,{className:"w-3 h-3 mr-1"}),"Add Custom Item"]}),Mn&&A.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2 duration-200",children:[A.jsxs("button",{ref:Mt,onClick:()=>{if(Mt.current){const U=Mt.current.getBoundingClientRect();nt(fe=>fe?null:{top:U.bottom+4,left:U.left})}},className:"w-full px-3 py-2 text-xs text-left font-semibold bg-slate-50 border border-slate-200 rounded-md hover:bg-slate-100 text-slate-700 flex justify-between items-center",children:[A.jsx("span",{className:"truncate",children:Zi}),A.jsx(xi,{className:"w-3 h-3 text-slate-400"})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:"Item Name",className:"flex-1 px-3 py-2 text-xs border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",value:Pn,onChange:U=>sr(U.target.value)}),A.jsx("button",{disabled:!Ot||!Pn.trim(),onClick:()=>{t&&Ot&&Pn.trim()&&(t(Ot,Pn.trim()),sr(""),Zt(`Added to ${Zi}`))},className:"px-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:A.jsx(Xx,{className:"w-4 h-4"})})]})]})]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-2 scrollbar-thin",children:cu.map(U=>{if(!At.includes(U.category))return null;const fe=U.items.filter(be=>be.toLowerCase().includes(i.toLowerCase()));if(i&&fe.length===0)return null;const Ee=on.includes(U.category),Ne=U.category==="Vital Sign"?"text-green-600 hover:bg-green-50":U.category==="Medical Facility"?"text-blue-600 hover:bg-blue-50":U.category==="Culture / Gram stain"?"text-cyan-600 hover:bg-cyan-50":U.category==="Lab data"?"text-orange-600 hover:bg-orange-50":"text-slate-600 hover:bg-slate-100";return A.jsxs("div",{className:"mb-2",children:[A.jsxs("button",{onClick:()=>Vn(be=>be.includes(U.category)?be.filter(st=>st!==U.category):[...be,U.category]),className:`w-full flex items-center px-2 py-2 text-sm font-semibold rounded-md transition-colors ${Ne}`,children:[Ee?A.jsx(w_,{className:"w-4 h-4 mr-1"}):A.jsx(xi,{className:"w-4 h-4 mr-1"}),U.category]}),Ee&&A.jsx("div",{className:"pl-4 mt-1 space-y-1",children:fe.map(be=>{const st=U.category==="Vital Sign"||U.category==="Symptom"||U.category==="Disease"||U.category==="Medical Facility"||U.category==="Physical examination"||U.category==="Culture / Gram stain"||U.category==="Treatment"&&be==="Antibiotics";return A.jsxs("div",{onMouseEnter:An=>st&&Rs(An,be,U.category),onMouseLeave:an,onClick:()=>!st&&n(U.category,be),className:`group relative flex items-center justify-between px-3 py-2 text-sm text-slate-700 bg-white border rounded-md transition-all active:scale-95 cursor-pointer ${h===be?"border-blue-400 bg-blue-50/30 shadow-sm":"border-slate-200 hover:border-blue-400 hover:shadow-sm"}`,children:[A.jsx("span",{className:"truncate",children:be}),st?A.jsx(xi,{className:`w-3 h-3 ${h===be?"opacity-100":"text-slate-300 opacity-60 group-hover:opacity-100"}`}):A.jsx(xx,{className:"w-3 h-3 text-slate-300 opacity-0 group-hover:opacity-100"})]},be)})})]},U.category)})}),h&&w&&ka.createPortal(A.jsxs("div",{ref:M,onMouseEnter:en,onMouseLeave:an,className:"fixed z-[9999] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-1 duration-150 min-w-[220px] max-w-[340px] overflow-hidden flex flex-col",style:{top:(k==null?void 0:k.top)??w.top,left:(k==null?void 0:k.left)??w.left,maxHeight:(k==null?void 0:k.maxHeight)??"80vh"},children:[T!=="Vital Sign"&&T!=="Medical Facility"&&A.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:A.jsxs("div",{className:"relative",children:[A.jsx("input",{ref:H,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:a,onChange:U=>u(U.target.value)}),A.jsx(Op,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),A.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[T==="Medical Facility"&&["Emergency Department","Outpatient Department"].map(U=>A.jsx("button",{onClick:()=>{const fe=h.replace(/\s*\(.*?\)/,"");n("Medical Facility",`the ${U} of ${fe}`),v(null),bt()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-blue-50 text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:U},U)),T==="Culture / Gram stain"&&Vt(["Culture","Gram stain"],a).map(U=>A.jsxs("div",{onMouseEnter:fe=>zn(fe,U),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${$===U?"bg-cyan-50 text-cyan-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[U,A.jsx(xi,{className:"w-3 h-3"})]},U)),T==="Vital Sign"&&h==="Vital sign"&&A.jsxs("div",{className:"p-4 w-72 space-y-4",children:[A.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[A.jsx(FS,{className:"w-4 h-4"}),A.jsx("span",{children:"Vital Sign Entry"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"T (C)"}),A.jsx("input",{type:"text",placeholder:"37.0",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.T,onChange:U=>ue({...j,T:U.target.value})})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"P (bpm)"}),A.jsx("input",{type:"text",placeholder:"80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.P,onChange:U=>ue({...j,P:U.target.value})})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"R (/min)"}),A.jsx("input",{type:"text",placeholder:"18",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.R,onChange:U=>ue({...j,R:U.target.value})})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"SpO2 (%)"}),A.jsx("input",{type:"text",placeholder:"98",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.SpO2,onChange:U=>ue({...j,SpO2:U.target.value})})]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"BP (mmHg)"}),A.jsx("input",{type:"text",placeholder:"120/80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.BP,onChange:U=>ue({...j,BP:U.target.value})})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"GCS"}),A.jsx("input",{type:"text",placeholder:"E4V5M6",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.GCS,onChange:U=>ue({...j,GCS:U.target.value})})]}),A.jsx("button",{onClick:kt,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 active:scale-95 transition-all",children:"Insert Vital Signs"})]}),T==="Symptom"&&Vt(["Positive","Negative"],a).map(U=>A.jsx("button",{onClick:()=>{n(U==="Positive"?"Symptom":"Negative Symptom",h),v(null),bt()},className:`w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 ${U==="Positive"?"hover:bg-blue-50 text-blue-700":"hover:bg-red-50 text-red-700"}`,children:U},U)),T==="Disease"&&Vt(["Tentative Diagnosis","Underlying Disease","Definitive Disease"],a).map(U=>A.jsx("button",{onClick:()=>{n(U==="Underlying Disease"?"Underlying disease":U==="Definitive Disease"?"Definitive diagnosis":U,h),v(null),bt()},className:"w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 hover:bg-indigo-50 text-indigo-700",children:U},U)),T==="Physical examination"&&h==="Breathing sound"&&Vt(Ae,a).map(U=>A.jsxs("div",{onMouseEnter:fe=>zn(fe,U),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${$===U?"bg-blue-50 text-blue-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[U,A.jsx(xi,{className:"w-3 h-3"})]},U)),T==="Physical examination"&&h==="Heart sound"&&Vt(["Heart Beats","Murmur"],a).map(U=>A.jsxs("div",{onMouseEnter:fe=>zn(fe,U),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${$===U?"bg-indigo-50 text-indigo-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[U,A.jsx(xi,{className:"w-3 h-3"})]},U)),T==="Treatment"&&h==="Antibiotics"&&Vt(xs,a).map(U=>A.jsxs("div",{onMouseEnter:fe=>zn(fe,U),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${$===U?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:[U,A.jsx(xi,{className:"w-3 h-3"})]},U)),T==="Physical examination"&&(h==="Abdominal tenderness"||h==="Rebound tenderness"||h==="Muscle guarding"||h==="Knocking pain")&&Vt(["Yes","No"],a).map(U=>A.jsxs("button",{onMouseEnter:fe=>U==="Yes"?Ht(fe,"zones"):void 0,onClick:()=>U==="No"&&(n("Physical examination",`No ${h}`),v(null),bt()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${U==="Yes"&&me?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[U," ",U==="Yes"&&A.jsx(xi,{className:"w-4 h-4"})]},U)),T==="Physical examination"&&h==="Pitting edema"&&Vt(["Yes","No"],a).map(U=>A.jsxs("button",{onMouseEnter:fe=>U==="Yes"?Ht(fe,"details"):void 0,onClick:()=>U==="No"&&(n("Physical examination","No pitting edema"),v(null),bt()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${U==="Yes"&&Nn?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[U," ",U==="Yes"&&A.jsx(xi,{className:"w-4 h-4"})]},U))]})]}),document.body),($||me||Nn)&&ee&&ka.createPortal(A.jsxs("div",{ref:N,onMouseEnter:en,onMouseLeave:an,className:"fixed z-[10000] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-2 duration-200 min-w-[260px] max-w-[420px] overflow-hidden flex flex-col",style:{top:(ce==null?void 0:ce.top)??ee.top,left:(ce==null?void 0:ce.left)??ee.left,maxHeight:(ce==null?void 0:ce.maxHeight)??"80vh"},children:[A.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:A.jsxs("div",{className:"relative",children:[A.jsx("input",{ref:O,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:f,onChange:U=>g(U.target.value)}),A.jsx(Op,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),A.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[T==="Culture / Gram stain"&&$==="Culture"&&Vt(Li,f).map(U=>A.jsx("button",{onClick:()=>{n("Lab data",`${h} Culture: ${U}`),v(null),bt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:U},U)),T==="Culture / Gram stain"&&$==="Gram stain"&&Vt(qn,f).map(U=>A.jsx("button",{onClick:()=>{n("Lab data",`${h} Gram stain: ${U}`),v(null),bt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:U},U)),T==="Physical examination"&&h==="Breathing sound"&&A.jsxs("div",{className:"p-4 w-64 space-y-4",children:[A.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[A.jsx(dR,{className:"w-4 h-4"}),A.jsx("span",{children:"Zone Selector"})]}),A.jsx("button",{onClick:()=>{ft(!Me),D([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${Me?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Bilateral"}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Right"}),A.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Left"}),Pe.map(U=>A.jsx("button",{onClick:()=>qo(U.id),className:`py-3 text-xs font-bold border-2 rounded-lg transition-all ${q.includes(U.id)?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white border-slate-100 text-slate-600 hover:border-blue-200"}`,children:U.label},U.id))]}),A.jsx("button",{onClick:ni,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Findings"})]}),T==="Physical examination"&&$==="Heart Beats"&&Vt(["regular","irregular"],f).map(U=>A.jsx("button",{onClick:()=>{n("Physical examination",`Heart Beats: ${U}`),v(null),bt()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-indigo-50 hover:text-indigo-700 transition-colors border-b border-slate-50 last:border-0",children:U},U)),T==="Physical examination"&&$==="Murmur"&&A.jsxs("div",{className:"p-4 w-72 space-y-4",children:[A.jsxs("div",{className:"flex items-center space-x-2 text-indigo-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[A.jsx(Nx,{className:"w-4 h-4"}),A.jsx("span",{children:"Murmur Detail"})]}),A.jsxs("section",{children:[A.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Intensity (Grade 1-6)"}),A.jsx("div",{className:"grid grid-cols-6 gap-1",children:[1,2,3,4,5,6].map(U=>A.jsx("button",{onClick:()=>de(U.toString()),className:`py-1.5 text-xs font-bold border-2 rounded-md transition-all ${W===U.toString()?"bg-indigo-600 border-indigo-600 text-white":"bg-white text-slate-600 hover:bg-indigo-50 border-slate-100"}`,children:U},U))})]}),A.jsxs("section",{children:[A.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Timing"}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Early"}),A.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Late"}),["Systolic","Diastolic"].map(U=>A.jsx(LS.Fragment,{children:["Early","Late"].map(fe=>{const Ee=`${fe} ${U}`,Ne=_e.includes(Ee);return A.jsx("button",{onClick:()=>Ge(be=>Ne?be.filter(st=>st!==Ee):[...be,Ee]),className:`py-2 text-[10px] font-bold border-2 rounded-lg transition-all ${Ne?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-slate-100 text-slate-500 hover:border-indigo-100"}`,children:Ee},Ee)})},U))]})]}),A.jsxs("section",{children:[A.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),A.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-32 overflow-y-auto p-1 border border-slate-100 rounded-lg bg-slate-50/50",children:["Aortic Area","Pulmonic Area","Tricuspid Area","Mitral Area, Apex"].map(U=>A.jsx("button",{onClick:()=>G(U),className:`px-3 py-1.5 text-left text-[11px] font-semibold rounded-md transition-colors ${Ke===U?"bg-indigo-100 text-indigo-700":"text-slate-600 hover:bg-white"}`,children:U},U))})]}),A.jsx("button",{onClick:ii,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Murmur"})]}),T==="Treatment"&&$&&Bn[$]&&Vt(Bn[$],f).map((U,fe)=>{if(typeof U!="string"&&U.type==="header")return A.jsx("div",{className:"px-4 py-1.5 bg-slate-100 text-[11px] font-bold text-slate-400 uppercase tracking-tight",children:U.label},`h-${fe}`);const Ee=typeof U=="string"?U:U.label;return A.jsx("button",{onClick:()=>{n("Treatment",Ee),v(null),bt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-blue-50 hover:text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:Ee},Ee)}),me==="zones"&&A.jsxs("div",{className:"p-4 w-72 space-y-4",children:[A.jsx("button",{onClick:()=>{lt(!ht),Be([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${ht?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Diffuse"}),A.jsxs("section",{children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Quadrants"}),A.jsx("div",{className:"grid grid-cols-2 gap-2",children:Vt($e,f).map(U=>A.jsx("button",{onClick:()=>si(U),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${Ie.includes(U)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:U},U))})]}),A.jsxs("section",{className:"pt-2 border-t border-slate-100",children:[A.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Regions"}),A.jsx("div",{className:"grid grid-cols-3 gap-1",children:Vt(it,f).map(U=>A.jsx("button",{onClick:()=>si(U),className:`p-1 text-[8px] leading-tight font-bold border-2 rounded-md h-12 flex items-center justify-center text-center ${Ie.includes(U)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:U.replace(" Region","").replace(" / ",`
`)},U))})]}),A.jsx("button",{onClick:()=>{const U=ht?`${h}: diffuse`:Ie.length>0?`${h} at ${Ie.join(", ")}`:"";U&&(n("Physical examination",U),v(null),bt())},disabled:!ht&&Ie.length===0,className:`w-full py-3 rounded-xl text-sm font-bold shadow-lg transition-all ${!ht&&Ie.length===0?"bg-slate-200 text-slate-400":"bg-green-600 text-white hover:bg-green-700"}`,children:"Insert Findings"})]}),Nn==="details"&&A.jsxs("div",{className:"p-5 w-60 space-y-5",children:[A.jsxs("section",{children:[A.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3",children:"Grade"}),A.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Vt(["1+","2+","3+","4+"],f).map(U=>A.jsx("button",{onClick:()=>mi(U),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${ti===U?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white text-slate-600 hover:bg-blue-50"}`,children:U},U))})]}),A.jsxs("section",{children:[A.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),A.jsx("input",{type:"text",placeholder:"e.g. Bilateral lower limbs",className:"w-full p-2.5 text-xs border-2 border-slate-100 rounded-lg outline-none focus:border-blue-400",value:Sn,onChange:U=>Pi(U.target.value)})]}),A.jsx("button",{onClick:()=>{const U=ti?`Grade ${ti}`:"",fe=Sn?`at ${Sn}`:"";n("Physical examination",`Pitting edema: ${[U,fe].filter(Boolean).join(" ")}`),v(null),bt()},className:"w-full py-3 bg-green-600 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-green-700 transition-all",children:"Insert"})]})]})]}),document.body),Mn&&ki&&ka.createPortal(A.jsxs("div",{className:"fixed z-[10000] bg-white border border-slate-200 rounded-lg shadow-xl animate-in fade-in zoom-in-95 duration-100 min-w-[200px] overflow-hidden flex flex-col pointer-events-auto",style:{top:ki.top,left:ki.left,maxHeight:"60vh"},onMouseLeave:()=>{ji||(nt(null),Fn(null))},children:[A.jsx("div",{className:"p-2 bg-slate-50 border-b text-[10px] font-bold text-slate-400 uppercase text-center",children:"Select Category"}),A.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:At.map(U=>{var Ne;let fe=!1;const Ee=((Ne=cu.find(be=>be.category===U))==null?void 0:Ne.items)||[];return U==="Culture / Gram stain"||U==="Treatment"||U==="Physical examination"?fe=!0:Ee.length>0&&U!=="Vital Sign"&&U!=="Symptom"&&U!=="Negative Symptom"&&(fe=!1),A.jsxs("div",{onMouseEnter:be=>{if(Fn(U),fe){const st=be.currentTarget.getBoundingClientRect();Gn({top:st.top,left:st.right+2})}else Gn(null)},onClick:()=>{Dn(U),Vi(U),nt(null)},className:`px-4 py-2 text-xs font-semibold cursor-pointer flex justify-between items-center transition-colors ${pt===U?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:[U,fe&&A.jsx(xi,{className:"w-3 h-3 text-slate-400"})]},U)})})]}),document.body),Mn&&ji&&pt&&ka.createPortal(A.jsxs("div",{className:"fixed z-[10001] bg-white border border-slate-200 rounded-lg shadow-xl animate-in fade-in zoom-in-95 duration-100 min-w-[200px] flex flex-col pointer-events-auto",style:{top:ji.top,left:ji.left,maxHeight:"60vh"},onMouseLeave:()=>{Gn(null),Fn(null),nt(null)},children:[A.jsxs("div",{className:"p-2 bg-slate-50 border-b text-[10px] font-bold text-slate-400 uppercase text-center",children:[pt," Sub-type"]}),A.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:(()=>{var fe,Ee;let U=[];return pt==="Culture / Gram stain"?U=[{label:"Culture",hasSub:!1,targetKey:"Culture"},{label:"Gram stain",hasSub:!1,targetKey:"Gram stain"}]:pt==="Treatment"?U=(((fe=cu.find(be=>be.category==="Treatment"))==null?void 0:fe.items)||[]).map(be=>({label:be,hasSub:be==="Antibiotics",targetKey:be})):pt==="Physical examination"&&(U=(((Ee=cu.find(be=>be.category==="Physical examination"))==null?void 0:Ee.items)||[]).map(be=>({label:be,hasSub:!1,targetKey:be}))),U.map(Ne=>{const be=typeof Ne=="string"?Ne:Ne.label,st=typeof Ne=="string"?!1:Ne.hasSub,An=typeof Ne=="string"?Ne:Ne.targetKey||be;return A.jsxs("div",{className:"px-4 py-2 text-xs font-semibold cursor-pointer flex justify-between items-center transition-colors hover:bg-blue-50 hover:text-blue-700 group",onClick:()=>{Dn(An),Vi(`${pt} > ${be}`),nt(null),Gn(null)},children:[be,st&&A.jsx(xi,{className:"w-3 h-3 text-slate-400 group-hover:text-blue-500"}),st&&be==="Antibiotics"&&A.jsx("div",{className:"hidden group-hover:block absolute left-full top-0 w-64 bg-white border border-slate-200 rounded-lg shadow-xl ml-1 max-h-[60vh] overflow-y-auto",children:xs.map(ln=>A.jsx("button",{onClick:gi=>{gi.stopPropagation(),Dn(ln),Vi(ln),nt(null),Gn(null)},className:"w-full text-left px-4 py-2 text-xs font-semibold text-slate-600 hover:bg-blue-50 hover:text-blue-700 border-b border-slate-50 last:border-0",children:ln},ln))})]},be)})})()})]}),document.body)]})},gR=({events:n,activeEventId:e,onSelectEvent:t,onAddEvent:i,onDeleteEvent:o,onCopyFromEvent:a})=>{const u=oe.useRef(null),[f,g]=oe.useState(null),[h,v]=oe.useState(null),T=(w,V)=>{w.stopPropagation();const k=w.currentTarget.getBoundingClientRect();v({top:k.top,left:k.right+10}),g(V)},S=w=>{f&&(a(f,w),g(null))};return oe.useEffect(()=>{const w=()=>g(null);return f&&window.addEventListener("click",w),()=>window.removeEventListener("click",w)},[f]),A.jsxs("div",{className:"flex flex-col h-full bg-slate-100 border-r border-slate-200 relative",children:[A.jsx("div",{className:"p-4 bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm flex-shrink-0",children:A.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Timeline"})}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-6 relative",children:[A.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-slate-300 -translate-x-1/2 min-h-full"}),A.jsxs("div",{className:"space-y-8 pb-10",children:[A.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t("profile"),children:[A.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${e==="profile"?"bg-white border-blue-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-blue-400"}`}),A.jsxs("div",{className:`relative w-40 p-4 rounded-lg border text-center transition-all ${e==="profile"?"bg-blue-50 border-blue-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-blue-300"}`,children:[A.jsx(BS,{className:`w-8 h-8 mx-auto mb-1 ${e==="profile"?"text-blue-600":"text-slate-400"}`}),A.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Patient Profile"})]})]}),n.map((w,V)=>{const k=w.id===e;return A.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t(w.id),children:[A.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${k?"bg-white border-green-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-green-400"}`}),A.jsxs("div",{className:`relative w-40 p-3 rounded-lg border text-center transition-all ${k?"bg-green-50 border-green-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-green-300"}`,children:[A.jsx("button",{className:"absolute -top-3 -right-3 w-8 h-8 bg-red-100 hover:bg-red-600 text-red-600 hover:text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all shadow-lg border border-red-200 hover:border-red-700 z-50 pointer-events-auto",onClick:P=>{P.stopPropagation(),P.preventDefault(),o(w.id)},type:"button",title:"Delete Timepoint",children:A.jsx(bu,{className:"w-5 h-5 pointer-events-none"})}),A.jsxs("div",{className:"text-xs font-bold text-slate-500 mb-1",children:["Timepoint ",V+1]}),A.jsxs("div",{className:"flex items-center justify-center text-sm font-semibold text-slate-800",children:[A.jsx(cx,{className:"w-3 h-3 mr-1 opacity-50"}),w.date||"Set Date"]}),A.jsx("button",{className:`absolute -bottom-3 -right-3 w-8 h-8 rounded-full flex items-center justify-center transition-all shadow-lg border z-50 pointer-events-auto ${f===w.id?"bg-blue-600 text-white border-blue-700":"bg-blue-100 hover:bg-blue-600 text-blue-600 hover:text-white border-blue-200 hover:border-blue-700 opacity-0 group-hover:opacity-100"}`,onClick:P=>T(P,w.id),type:"button",title:"Copy content from another timepoint",children:A.jsx(qm,{className:"w-4 h-4 pointer-events-none"})})]})]},w.id)}),A.jsx("div",{ref:u})]})]}),A.jsx("div",{className:"p-4 bg-white border-t border-slate-200 flex-shrink-0",children:A.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all active:scale-95 font-medium",children:[A.jsx($S,{className:"w-5 h-5 mr-2"}),"Add Timepoint"]})}),f&&h&&ka.createPortal(A.jsxs("div",{className:"fixed z-[10001] bg-white border border-slate-200 rounded-lg shadow-2xl overflow-hidden min-w-[180px] animate-in zoom-in-95 duration-150",style:{top:h.top,left:h.left},onClick:w=>w.stopPropagation(),children:[A.jsx("div",{className:"bg-blue-600 text-white px-4 py-2 text-xs font-bold uppercase tracking-wider",children:""}),A.jsxs("div",{className:"max-h-60 overflow-y-auto bg-slate-50",children:[n.map((w,V)=>w.id===f?null:A.jsxs("button",{className:"w-full px-4 py-3 text-left text-sm font-semibold text-slate-700 border-b border-slate-200 hover:bg-blue-50 hover:text-blue-700 transition-colors last:border-0",onClick:()=>S(w.id),children:["Timepoint ",V+1]},w.id)),n.length<=1&&A.jsx("div",{className:"p-4 text-xs text-slate-400 italic text-center",children:"No other timepoints to copy from."})]})]}),document.body)]})},yR=({event:n,onUpdate:e,profile:t,onUpdateProfile:i,isProfileSelected:o,informant:a,setInformant:u,lastUpdateTrigger:f})=>{const g=oe.useRef(null),h=oe.useRef({}),[v,T]=oe.useState("");oe.useEffect(()=>{if(f&&!o){const F=h.current[f.category];F&&F.scrollIntoView({behavior:"smooth",block:"center"})}},[f,o]);const S=F=>{i({...t,gender:F}),u(F==="male"?"himself":"herself")},w=()=>{const F=v.trim();F&&!t.underlying_diseases.includes(F)&&i({...t,underlying_diseases:[...t.underlying_diseases,F]}),T("")},V=F=>{F.key==="Enter"&&(F.preventDefault(),w())},k=(F,ee)=>{const re=t[F];if(!re)i({...t,[F]:ee});else{const ce=re.trim().endsWith(",")?`${re.trim()} ${ee}`:`${re.trim()}, ${ee}`;i({...t,[F]:ce})}};if(o)return A.jsxs("div",{className:"flex flex-col h-full bg-white",children:[A.jsx("div",{className:"p-4 border-b border-slate-200 bg-blue-50 flex items-center justify-between flex-shrink-0",children:A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx(aR,{className:"w-5 h-5 text-blue-600"}),A.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Patient Profile"})]})}),A.jsxs("div",{className:"p-6 flex-1 overflow-y-auto space-y-8 custom-scrollbar",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Age (Numeric)"}),A.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:t.age,onChange:F=>i({...t,age:F.target.value}),placeholder:"65"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Sex"}),A.jsx("div",{className:"flex space-x-2",children:["male","female"].map(F=>A.jsx("button",{onClick:()=>S(F),className:`flex-1 py-2.5 px-4 rounded-lg font-bold text-sm transition-all border ${t.gender===F?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:F.charAt(0).toUpperCase()+F.slice(1)},F))})]})]}),A.jsx("div",{className:"grid grid-cols-1 gap-6 pt-4 border-t border-slate-100",children:A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Informant"}),A.jsx("input",{type:"text",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:a,onChange:F=>u(F.target.value),placeholder:"e.g. himself, wife, family, relatives..."})]})}),A.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[A.jsx("div",{className:"flex items-center justify-between",children:A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Underlying Diseases"})}),A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"text",placeholder:"Type a disease and press Enter...",className:"w-full pl-3 pr-10 py-2.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-shadow",value:v,onChange:F=>T(F.target.value),onKeyDown:V}),A.jsx("button",{onClick:w,disabled:!v.trim(),className:"absolute right-1.5 top-1.5 p-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 transition-colors",children:A.jsx($S,{className:"w-4 h-4"})})]}),A.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 rounded-xl min-h-[60px] border border-dashed border-slate-300",children:[t.underlying_diseases.length===0&&A.jsx("p",{className:"text-slate-400 text-xs italic flex items-center justify-center w-full",children:"No diseases selected"}),t.underlying_diseases.map(F=>A.jsxs("div",{className:"bg-blue-100 text-blue-700 px-3 py-1.5 rounded-full flex items-center text-sm font-semibold shadow-sm border border-blue-200",children:[F,A.jsx("button",{onClick:()=>i({...t,underlying_diseases:t.underlying_diseases.filter(ee=>ee!==F)}),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:A.jsx(bu,{className:"w-3 h-3"})})]},F))]})]}),A.jsxs("div",{className:"space-y-6 pt-6 border-t border-slate-100 pb-10",children:[A.jsxs("div",{className:"flex items-center space-x-2 text-green-700",children:[A.jsx(FS,{className:"w-4 h-4"}),A.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",children:"Underlying Disease Control Status"})]}),A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"CONTROL QUALITY ()"}),A.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.control_quality,onChange:F=>i({...t,control_quality:F.target.value})}),A.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[A.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[A.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"General:"}),["Well controlled","Poorly controlled","Fair","Suboptimal","Stable","Unstable","Refractory"].map(F=>A.jsx("button",{onClick:()=>k("control_quality",F),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:F},F))]}),A.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[A.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Specific:"}),["Acute exacerbation","Stationary","Remission","Progressive","Terminal stage"].map(F=>A.jsx("button",{onClick:()=>k("control_quality",F),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:F},F))]})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"MANAGEMENT MODALITY ()"}),A.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.management_modality,onChange:F=>i({...t,management_modality:F.target.value})}),A.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[A.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[A.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"HTN/Heart:"}),["Oral anti-hypertensive agents","Medical control","Diet control","Lifestyle modification"].map(F=>A.jsx("button",{onClick:()=>k("management_modality",F),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:F},F))]}),A.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[A.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"DM:"}),["Oral anti-diabetic agents (OAD)","Insulin injection","Diet control and exercise"].map(F=>A.jsx("button",{onClick:()=>k("management_modality",F),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:F},F))]}),A.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[A.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"ESRD:"}),["Regular Hemodialysis (H/D)","H/D on Mon/Wed/Fri","H/D on Tue/Thu/Sat","Peritoneal Dialysis (PD/CAPD)","Conservative treatment"].map(F=>A.jsx("button",{onClick:()=>k("management_modality",F),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:F},F))]}),A.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[A.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Cancer:"}),["Chemotherapy","Target therapy","Immunotherapy","Regular surveillance post-operation","Palliative care"].map(F=>A.jsx("button",{onClick:()=>k("management_modality",F),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:F},F))]})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"FOLLOW-UP STATUS ()"}),A.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.follow_up_status,onChange:F=>i({...t,follow_up_status:F.target.value})}),A.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[A.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[A.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Frequency:"}),["Regularly","Irregularly","Intermittently","Lost to follow-up"].map(F=>A.jsx("button",{onClick:()=>k("follow_up_status",F),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:F},F))]}),A.jsx("p",{className:"text-[9px] text-slate-400 italic mt-1 ml-2",children:"Location: Match the Medical Facility items from the left sidebar."})]})]})]})]})]})]});if(!n)return A.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50 text-slate-400 p-8 text-center h-full",children:A.jsx("p",{children:"Select a profile or timepoint from the timeline to start editing."})});const P=(F,ee)=>{const re={...n.categorizedContent,[F]:ee};e(n.id,{categorizedContent:re})},$=cu.filter(F=>F.category!=="Disease");return A.jsxs("div",{className:"flex flex-col h-full bg-white",children:[A.jsxs("div",{className:"p-4 border-b border-slate-200 bg-slate-50 flex items-center justify-between flex-shrink-0",children:[A.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Editor"}),A.jsx("div",{className:"text-lg font-mono font-semibold text-slate-800",children:n.date||(n.dateType==="month"?"YYYY-MM":"YYYY-MM-DD")})]}),A.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar",ref:g,children:[A.jsxs("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg border border-blue-100",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"Event Time"}),A.jsxs("div",{className:"flex space-x-2 text-xs",children:[A.jsx("button",{onClick:()=>e(n.id,{dateType:"date",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="date"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Exact Date"}),A.jsx("button",{onClick:()=>e(n.id,{dateType:"month",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="month"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Month Only"})]})]}),A.jsx("input",{type:n.dateType==="date"?"date":"month",className:"w-full p-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:n.date,onChange:F=>e(n.id,{date:F.target.value})})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{ref:F=>{h.current["Medical Facility"]=F},className:"group pb-4 border-b border-slate-100 scroll-mt-10",children:[A.jsxs("label",{className:"block text-xs font-bold text-blue-700 mb-2 uppercase tracking-wide flex items-center",children:[A.jsx(lx,{className:"w-3.5 h-3.5 mr-1.5"}),"Medical Facility ()"]}),A.jsx("textarea",{className:"w-full h-16 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed transition-shadow",placeholder:"e.g. the Emergency Department of Linkou Chang Gung Memorial Hospital",value:n.categorizedContent["Medical Facility"]||"",onChange:F=>P("Medical Facility",F.target.value)})]}),A.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-slate-100",children:[A.jsx("h3",{className:"text-sm font-bold text-slate-800",children:"Clinical Findings"}),A.jsx("span",{className:"text-xs text-slate-500 font-normal hidden sm:inline",children:"(Click menu items to insert)"})]}),$.filter(F=>F.category!=="Medical Facility").map(F=>{const ee=["Tentative Diagnosis","Underlying disease","Definitive diagnosis"].includes(F.category),re=F.category==="Vital Sign",ce=ee?"text-indigo-800":re?"text-green-700":F.category==="Negative Symptom"?"text-red-700":"text-orange-700";return A.jsxs("div",{ref:pe=>{h.current[F.category]=pe},className:"group scroll-mt-10",children:[A.jsx("label",{className:`block text-xs font-bold mb-1 uppercase tracking-wide ${ce}`,children:F.category}),A.jsx("textarea",{className:`w-full h-24 p-3 border border-slate-300 rounded-lg shadow-sm font-sans text-sm leading-relaxed resize-y transition-shadow ${ee?"focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 bg-indigo-50/10":re?"focus:ring-2 focus:ring-green-200 focus:border-green-400 bg-green-50/10":F.category==="Negative Symptom"?"focus:ring-2 focus:ring-red-200 focus:border-red-400 bg-red-50/20":"focus:ring-2 focus:ring-orange-200 focus:border-orange-400"}`,placeholder:`Describe ${F.category.toLowerCase()}...`,value:n.categorizedContent[F.category]||"",onChange:pe=>P(F.category,pe.target.value)})]},F.category)}),A.jsxs("div",{className:"group pt-4 border-t border-slate-100",children:[A.jsx("label",{className:"block text-xs font-bold text-blue-700 mb-1 uppercase tracking-wide",children:"Other Information"}),A.jsx("textarea",{className:"w-full h-32 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed resize-y transition-shadow",placeholder:"Enter any additional information...",value:n.otherInformation||"",onChange:F=>e(n.id,{otherInformation:F.target.value})})]})]})]})]})},vR=({isOpen:n,onClose:e,onConfirm:t,title:i,message:o,confirmText:a="Delete",cancelText:u="Cancel"})=>n?ka.createPortal(A.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[A.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:e}),A.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 fade-in duration-200",children:[A.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 bg-slate-50",children:[A.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[A.jsx(KS,{className:"w-5 h-5"}),A.jsx("h3",{className:"font-bold text-slate-800",children:i})]}),A.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-slate-200 text-slate-400 transition-colors",children:A.jsx(bu,{className:"w-5 h-5"})})]}),A.jsx("div",{className:"p-6",children:A.jsx("p",{className:"text-slate-600 leading-relaxed",children:o})}),A.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 bg-slate-50 border-t border-slate-100",children:[A.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 hover:bg-slate-200 rounded-lg transition-colors",children:u}),A.jsx("button",{onClick:t,className:"px-6 py-2 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-lg shadow-md hover:shadow-lg active:scale-95 transition-all",children:a})]})]})]}),document.body):null,_R=({onLogin:n,authError:e})=>{const[t,i]=oe.useState(""),[o,a]=oe.useState(!1),[u,f]=oe.useState(!1);oe.useEffect(()=>{const h=window.location.hostname,v=window.location.href;!h||h===""||v.startsWith("about:")||v.startsWith("file:")||v.startsWith("data:")?(f(!0),i("Sandbox Mode (Auth Disabled)")):(f(!1),i(h))},[]);const g=()=>{u||(navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3))};return A.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-6 relative",children:[A.jsxs("div",{className:"max-w-4xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row z-10",children:[A.jsxs("div",{className:"md:w-1/2 p-10 bg-blue-50 flex flex-col justify-between relative overflow-hidden",children:[A.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-purple-500"}),A.jsxs("div",{className:"z-10",children:[A.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[A.jsx("div",{className:"bg-blue-600 p-2.5 rounded-xl shadow-lg",children:A.jsx(qS,{className:"w-8 h-8 text-white"})}),A.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"MediScribe AI"})]}),A.jsx("h2",{className:"text-4xl font-extrabold text-blue-900 mb-4 leading-tight",children:"Transform Medical Records with AI"}),A.jsx("p",{className:"text-slate-600 text-lg mb-8 leading-relaxed",children:"Generate professional, academic-grade admission notes from structured inputs in seconds using Gemini 1.5 Pro."})]}),A.jsxs("div",{className:"space-y-4 z-10",children:[A.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[A.jsx(yx,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),A.jsx("span",{className:"font-medium",children:"Structured Data Entry"})]}),A.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[A.jsx(Ed,{className:"w-5 h-5 text-purple-500 flex-shrink-0"}),A.jsx("span",{className:"font-medium",children:"AI-Powered Generation"})]}),A.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[A.jsx(Zx,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),A.jsx("span",{className:"font-medium",children:"Bring Your Own Key (Secure)"})]})]}),A.jsx("div",{className:"absolute -bottom-10 -right-10 w-64 h-64 bg-blue-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse"}),A.jsx("div",{className:"absolute -bottom-10 -left-10 w-64 h-64 bg-purple-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse delay-1000"})]}),A.jsx("div",{className:"md:w-1/2 p-10 flex flex-col justify-center items-center bg-white relative",children:u?A.jsxs("div",{className:"text-center w-full",children:[A.jsx("div",{className:"w-16 h-16 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-6",children:A.jsx($x,{className:"w-8 h-8"})}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Preview Environment Detected"}),A.jsxs("p",{className:"text-slate-500 mb-6 text-sm leading-relaxed px-4",children:["This app is running in a ",A.jsx("strong",{children:"Sandboxed Preview"})," (no domain). Google Login requires a real web server to function securely."]}),A.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 text-left mb-6 mx-2",children:[A.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center",children:[A.jsx(Sx,{className:"w-4 h-4 mr-2 text-blue-600"}),"How to fix:"]}),A.jsxs("ol",{className:"list-decimal list-inside text-xs text-slate-600 space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Download"})," or ",A.jsx("strong",{children:"Export"})," this project from the editor."]}),A.jsxs("li",{children:["Run it locally (e.g., ",A.jsx("code",{children:"npm run dev"}),"  ",A.jsx("code",{children:"localhost"}),")."]}),A.jsx("li",{children:"Or deploy it to a hosting service (Vercel, Netlify)."})]})]}),A.jsx("button",{disabled:!0,className:"w-full py-3 bg-slate-200 text-slate-400 font-bold rounded-xl cursor-not-allowed",children:"Login Disabled in Sandbox"})]}):A.jsxs("div",{className:"w-full flex flex-col items-center",children:[A.jsxs("div",{className:"text-center mb-10",children:[A.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Welcome Back"}),A.jsx("p",{className:"text-slate-500",children:"Please sign in to access your workspace"})]}),e&&A.jsxs("div",{className:"mb-6 w-full p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3 animate-in fade-in slide-in-from-top-2",children:[A.jsx(KS,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h4",{className:"text-sm font-bold text-red-800 mb-1",children:"Authentication Error"}),A.jsx("p",{className:"text-xs text-red-700 whitespace-pre-wrap leading-relaxed select-all font-mono bg-red-50/50 p-1 rounded",children:e}),e.includes("Settings > Authorized domains")&&A.jsxs("div",{className:"mt-2 p-2 bg-white border border-red-100 rounded text-xs text-slate-500",children:[A.jsx("strong",{children:"Tip:"})," You must add the ",A.jsx("u",{children:"exact domain"})," shown in the bottom right corner of this screen to Firebase Console."]})]})]}),A.jsxs("button",{onClick:n,className:"w-full max-w-sm flex items-center justify-center space-x-3 px-6 py-4 border border-slate-300 rounded-xl hover:bg-slate-50 hover:border-slate-400 hover:shadow-md transition-all group bg-white",children:[A.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),A.jsx("span",{className:"text-slate-700 font-bold text-lg group-hover:text-slate-900",children:"Sign in with Google"})]}),A.jsx("p",{className:"mt-8 text-xs text-center text-slate-400 max-w-xs leading-relaxed",children:"By signing in, you agree to use your own Gemini API Key. Your key is encrypted and stored securely linked to your account."})]})})]}),A.jsxs("div",{className:"absolute bottom-4 right-4 z-0 flex flex-col items-end opacity-70 hover:opacity-100 transition-opacity",children:[A.jsx("label",{className:"text-[10px] text-blue-200 uppercase font-bold mb-1",children:"Detected Domain (For Firebase Whitelist)"}),A.jsxs("button",{onClick:g,disabled:u,className:`flex items-center space-x-2 px-3 py-1.5 rounded-full border border-white/10 transition-colors ${u?"bg-red-900/40 text-red-200 cursor-not-allowed":"bg-black/20 backdrop-blur-md text-white hover:bg-black/30"}`,children:[A.jsx("span",{className:"text-xs font-mono",children:t}),!u&&(o?A.jsx(GS,{className:"w-3 h-3 text-green-400"}):A.jsx(qm,{className:"w-3 h-3 text-slate-300"}))]})]})]})},TR=({isOpen:n,onSave:e,isDismissible:t=!1,onDismiss:i,trialUsageCount:o,onStartTrial:a})=>{const[u,f]=oe.useState(""),[g,h]=oe.useState(!1),[v,T]=oe.useState("");if(!n)return null;const S=async()=>{if(!u.trim()){T("Please enter a valid API key.");return}T(""),h(!0);try{await e(u.trim())}catch{T("Failed to save API Key. Please try again.")}finally{h(!1)}};return A.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[A.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:t?i:void 0}),A.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-300",children:[A.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white text-center",children:[A.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-md",children:A.jsx(zS,{className:"w-8 h-8 text-white"})}),A.jsx("h2",{className:"text-2xl font-bold",children:"Setup Gemini API Key"}),A.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Required to power the AI generation"})]}),A.jsxs("div",{className:"p-8 space-y-6",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 flex items-start space-x-3",children:[A.jsx(mx,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{className:"text-sm text-blue-800",children:[A.jsx("p",{className:"font-bold mb-1",children:"Why do I need this?"}),A.jsx("p",{className:"opacity-90 leading-relaxed",children:"This application runs on your own Google Cloud account. Your API key is stored securely in your database and is never shared with us."})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Enter your Gemini API Key"}),A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:A.jsx(Vx,{className:"h-4 w-4 text-slate-400"})}),A.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all font-mono text-sm",placeholder:"AIzaSy...",value:u,onChange:w=>f(w.target.value)})]}),v&&A.jsx("p",{className:"text-red-500 text-xs mt-2 font-medium",children:v})]}),A.jsx("div",{className:"text-center",children:A.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 font-semibold hover:underline",children:["Get a free API key here ",A.jsx(bx,{className:"w-3.5 h-3.5 ml-1"})]})})]}),A.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[t&&A.jsx("button",{onClick:i,className:"flex-1 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Cancel"}),a&&o!==void 0&&o<5&&A.jsx("button",{onClick:a,className:"flex-1 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold rounded-xl hover:brightness-110 shadow-lg shadow-emerald-200 transition-all flex flex-col items-center justify-center leading-tight",children:A.jsxs("span",{children:["Free Trial (",5-o," left)"]})}),A.jsx("button",{onClick:S,disabled:g||!u,className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all active:scale-95 disabled:bg-slate-300 disabled:shadow-none flex items-center justify-center",children:g?A.jsx(gu,{className:"w-5 h-5 animate-spin"}):"Save & Continue"})]})]})]})]})};var ER={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let SR,AR;function CR(){return{geminiUrl:SR,vertexUrl:AR}}function bR(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=CR();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nr{}function ge(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const g=n[f];if(Array.isArray(t))for(let h=0;h<g.length;h++){const v=g[h];p(v,e.slice(a+1),t[h])}else for(const h of g)p(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const g=n[f];p(g[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function wR(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let f=-1;for(let g=0;g<o.length;g++)if(o[g]==="*"){f=g;break}if(f!==-1&&a.length>f)for(let g=f;g<a.length;g++){const h=a[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}em(n,o,a,0,u)}}function em(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const g of f[u])em(g,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),g={};for(const h of f)g[h]=u[h];for(const[h,v]of Object.entries(g)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);p(u,T,v)}for(const h of f)delete u[h]}}else{const u=n;a in u&&em(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IR(n){const e={},t=d(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function xR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],NR(u)),e}function RR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],MR(u)),e}function NR(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>DR(u))),p(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function MR(n){const e={},t=d(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>PR(u))),p(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function DR(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],HR(t)),e}function PR(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],FR(t)),e}function kR(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function VR(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function UR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],LR(u)),e}function LR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function YS(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],OR(u)),e}function OR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function HR(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],zm(i));const o=d(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function FR(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],zm(i));const o=d(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var x_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(x_||(x_={}));var R_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(R_||(R_={}));var N_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(N_||(N_={}));var Fr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Fr||(Fr={}));var M_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(M_||(M_={}));var D_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(D_||(D_={}));var P_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(P_||(P_={}));var k_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(k_||(k_={}));var V_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(V_||(V_={}));var U_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(U_||(U_={}));var L_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(L_||(L_={}));var O_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(O_||(O_={}));var H_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(H_||(H_={}));var F_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(F_||(F_={}));var G_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(G_||(G_={}));var B_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(B_||(B_={}));var q_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(q_||(q_={}));var z_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(z_||(z_={}));var $_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($_||($_={}));var kd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(kd||(kd={}));var K_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(K_||(K_={}));var Y_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Y_||(Y_={}));var J_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(J_||(J_={}));var tm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(tm||(tm={}));var Q_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Q_||(Q_={}));var X_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(X_||(X_={}));var W_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(W_||(W_={}));var j_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(j_||(j_={}));var Z_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Z_||(Z_={}));var eT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(eT||(eT={}));var tT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(tT||(tT={}));var nT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(nT||(nT={}));var iT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(iT||(iT={}));var sT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(sT||(sT={}));var rT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(rT||(rT={}));var oT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(oT||(oT={}));var aT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(aT||(aT={}));var lT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(lT||(lT={}));var uT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(uT||(uT={}));var cT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(cT||(cT={}));var dT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(dT||(dT={}));var fT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(fT||(fT={}));var hT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(hT||(hT={}));var pT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(pT||(pT={}));var mT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(mT||(mT={}));var gT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(gT||(gT={}));var yT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(yT||(yT={}));var vT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(vT||(vT={}));var _T;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(_T||(_T={}));var TT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(TT||(TT={}));var ET;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ET||(ET={}));var ST;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(ST||(ST={}));var AT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(AT||(AT={}));var CT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(CT||(CT={}));var bT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(bT||(bT={}));var Va;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Va||(Va={}));class nm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class lu{get text(){var e,t,i,o,a,u,f,g;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const T=[];for(const S of(g=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[w,V]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(V!==null||V!==void 0)&&T.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,t,i,o,a,u,f,g;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const T of(g=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[S,w]of Object.entries(T))S!=="inlineData"&&(w!==null||w!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,f,g;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,f,g,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,f,g,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class wT{}class IT{}class GR{}class BR{}class qR{}class zR{}class xT{}class RT{}class NT{}class $R{}class Vd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Vd;let o;const a=e;return t?o=RR(a):o=xR(a),Object.assign(i,o),i}}class MT{}class DT{}class PT{}class kT{}class KR{}class YR{}class JR{}class $m{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new $m,a=UR(e);return Object.assign(i,a),i}}class QR{}class XR{}class WR{}class VT{}class jR{get text(){var e,t,i;let o="",a=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(f))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,g]of Object.entries(u))f!=="inlineData"&&g!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class ZR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Km{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Km,a=YS(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function at(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function JS(n,e){const t=at(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function QS(n){return Array.isArray(n)?n.map(e=>Ud(e)):[Ud(n)]}function Ud(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function XS(n){const e=Ud(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function WS(n){const e=Ud(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function UT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function jS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>UT(e)):[UT(n)]}function im(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function LT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function OT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function xn(n){if(n==null)throw new Error("ContentUnion is required");return im(n)?n:{role:"user",parts:jS(n)}}function Ym(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=xn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=xn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>xn(t)):[xn(e)]}function Mi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(LT(n)||OT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[xn(n)]}const e=[],t=[],i=im(n[0]);for(const o of n){const a=im(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(LT(o)||OT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:jS(t)}),e}function e1(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Fr).includes(t[0].toUpperCase())?t[0].toUpperCase():Fr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Fr).includes(i.toUpperCase())?i.toUpperCase():Fr.TYPE_UNSPECIFIED})}}function La(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&e1(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Fr).includes(f.toUpperCase())?f.toUpperCase():Fr.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=La(f);else if(i.includes(u)){const g=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}g.push(La(h))}e[u]=g}else if(o.includes(u)){const g={};for(const[h,v]of Object.entries(f))g[h]=La(v);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Jm(n){return La(n)}function Qm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Xm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function el(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=La(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=La(e.response));return n}function tl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function t1(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function ir(n,e){if(typeof e!="string")throw new Error("name must be a string");return t1(n,e,"cachedContents")}function ZS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function eo(n){return zm(n)}function n1(n){return n!=null&&typeof n=="object"&&"name"in n}function i1(n){return n!=null&&typeof n=="object"&&"video"in n}function s1(n){return n!=null&&typeof n=="object"&&"uri"in n}function eA(n){var e;let t;if(n1(n)&&(t=n.name),!(s1(n)&&(t=n.uri,t===void 0))&&!(i1(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function tA(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function nA(n){for(const e of["models","tunedModels","publisherModels"])if(r1(n,e))return n[e];return[]}function r1(n,e){return n!==null&&typeof n=="object"&&e in n}function o1(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function a1(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=o1(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function iA(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function l1(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function sA(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function nl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function rA(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u1(n){const e={},t=d(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>q1(u))),p(e,["inlinedResponses"],a)}const o=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function c1(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const o=d(n,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function d1(n){const e={},t=d(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Sd(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const o=d(n,["metadata","state"]);o!=null&&p(e,["state"],rA(o));const a=d(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=d(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&p(e,["updateTime"],f);const g=d(n,["metadata","model"]);g!=null&&p(e,["model"],g);const h=d(n,["metadata","output"]);return h!=null&&p(e,["dest"],u1(sA(h))),e}function sm(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=d(n,["state"]);o!=null&&p(e,["state"],rA(o));const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["createTime"]);u!=null&&p(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(e,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(e,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const v=d(n,["model"]);v!=null&&p(e,["model"],v);const T=d(n,["inputConfig"]);T!=null&&p(e,["src"],f1(T));const S=d(n,["outputConfig"]);S!=null&&p(e,["dest"],c1(sA(S)));const w=d(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function f1(n){const e={},t=d(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const o=d(n,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function h1(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&p(t,["fileName"],i);const o=d(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>B1(n,u))),p(t,["requests","requests"],a)}return t}function p1(n){const e={},t=d(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function m1(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function g1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],nl(n,i)),t}function y1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],nl(n,i)),t}function v1(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],_1(i));const o=d(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=d(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=d(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function _1(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function oA(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>X1(a))),p(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function T1(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function E1(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=d(n,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],d1(l1(o))),t}function HT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["src"]);o!=null&&p(t,["batch","inputConfig"],h1(n,iA(n,o)));const a=d(e,["config"]);return a!=null&&T1(a,t),t}function S1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],at(n,i));const o=d(e,["src"]);o!=null&&p(t,["inputConfig"],p1(iA(n,o)));const a=d(e,["config"]);return a!=null&&E1(a,t),t}function A1(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function C1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["src"]);o!=null&&p(t,["batch","inputConfig"],M1(n,o));const a=d(e,["config"]);return a!=null&&A1(a,t),t}function b1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],nl(n,i)),t}function w1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],nl(n,i)),t}function I1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);return a!=null&&p(e,["error"],a),e}function x1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);return a!=null&&p(e,["error"],a),e}function R1(n,e){const t={},i=d(e,["contents"]);if(i!=null){let a=Ym(n,i);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["requests[]","request","content"],a)}const o=d(e,["config"]);return o!=null&&(p(t,["_self"],N1(o,t)),wR(t,{"requests[].*":"requests[].request.*"})),t}function N1(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function M1(n,e){const t={},i=d(e,["fileName"]);i!=null&&p(t,["file_name"],i);const o=d(e,["inlinedRequests"]);return o!=null&&p(t,["requests"],R1(n,o)),t}function D1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function P1(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const o=d(n,["name"]);if(o!=null&&p(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function k1(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function V1(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],oA(xn(o)));const a=d(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const k=d(e,["seed"]);k!=null&&p(i,["seed"],k);const P=d(e,["responseMimeType"]);P!=null&&p(i,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(i,["responseSchema"],Jm($));const F=d(e,["responseJsonSchema"]);if(F!=null&&p(i,["responseJsonSchema"],F),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ee=d(e,["safetySettings"]);if(t!==void 0&&ee!=null){let D=ee;Array.isArray(D)&&(D=D.map(Me=>W1(Me))),p(t,["safetySettings"],D)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let D=tl(re);Array.isArray(D)&&(D=D.map(Me=>Z1(el(Me)))),p(t,["tools"],D)}const ce=d(e,["toolConfig"]);if(t!==void 0&&ce!=null&&p(t,["toolConfig"],j1(ce)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const pe=d(e,["cachedContent"]);t!==void 0&&pe!=null&&p(t,["cachedContent"],ir(n,pe));const M=d(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const N=d(e,["mediaResolution"]);N!=null&&p(i,["mediaResolution"],N);const R=d(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],Qm(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=d(e,["thinkingConfig"]);H!=null&&p(i,["thinkingConfig"],H);const O=d(e,["imageConfig"]);O!=null&&p(i,["imageConfig"],G1(O));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function U1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>v1(h))),p(e,["candidates"],g)}const o=d(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=d(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function L1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],nl(n,i)),t}function O1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],nl(n,i)),t}function H1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function F1(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function G1(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function B1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["request","model"],at(n,i));const o=d(e,["contents"]);if(o!=null){let f=Mi(o);Array.isArray(f)&&(f=f.map(g=>oA(g))),p(t,["request","contents"],f)}const a=d(e,["metadata"]);a!=null&&p(t,["metadata"],a);const u=d(e,["config"]);return u!=null&&p(t,["request","generationConfig"],V1(n,u,d(t,["request"],{}))),t}function q1(n){const e={},t=d(n,["response"]);t!=null&&p(e,["response"],U1(t));const i=d(n,["error"]);return i!=null&&p(e,["error"],i),e}function z1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function $1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=d(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function K1(n){const e={},t=d(n,["config"]);return t!=null&&z1(t,e),e}function Y1(n){const e={},t=d(n,["config"]);return t!=null&&$1(t,e),e}function J1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Sd(u))),p(e,["batchJobs"],a)}return e}function Q1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>sm(u))),p(e,["batchJobs"],a)}return e}function X1(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],D1(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],P1(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],m1(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function W1(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function j1(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],k1(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function Z1(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],H1(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],F1(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ws;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ws||(Ws={}));class Fo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eN extends nr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Fo(Ws.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=HT(this.apiClient,e),i=t._url,o=ge("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,g=f.requests,h=[];for(const v of g){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const w=T.request;w.systemInstruction=S,T.request=w}h.push(T)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=S1(this.apiClient,e);return f=ge("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>sm(v))}else{const h=HT(this.apiClient,e);return f=ge("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Sd(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=C1(this.apiClient,e);return a=ge("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>Sd(g))}}async get(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=O1(this.apiClient,e);return f=ge("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>sm(v))}else{const h=L1(this.apiClient,e);return f=ge("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Sd(v))}}async cancel(e){var t,i,o,a;let u="",f={};if(this.apiClient.isVertexAI()){const g=y1(this.apiClient,e);u=ge("batchPredictionJobs/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=g1(this.apiClient,e);u=ge("batches/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=Y1(e);return f=ge("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Q1(v),S=new VT;return Object.assign(S,T),S})}else{const h=K1(e);return f=ge("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=J1(v),S=new VT;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=w1(this.apiClient,e);return f=ge("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>x1(v))}else{const h=b1(this.apiClient,e);return f=ge("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>I1(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tN(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function FT(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>CN(a))),p(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function nN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=d(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let v=Mi(u);Array.isArray(v)&&(v=v.map(T=>FT(T))),p(e,["contents"],v)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],FT(xn(f)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(T=>wN(T))),p(e,["tools"],v)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],bN(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function iN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=d(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=Mi(u);Array.isArray(T)&&(T=T.map(S=>S)),p(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],xn(f));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>IN(S))),p(e,["tools"],T)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&p(e,["encryption_spec","kmsKeyName"],v),t}function sN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],JS(n,i));const o=d(e,["config"]);return o!=null&&nN(o,t),t}function rN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],JS(n,i));const o=d(e,["config"]);return o!=null&&iN(o,t),t}function oN(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],ir(n,i)),t}function aN(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],ir(n,i)),t}function lN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function uN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function cN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function dN(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const o=d(n,["name"]);if(o!=null&&p(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fN(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const o=d(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function pN(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],ir(n,i)),t}function mN(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],ir(n,i)),t}function gN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function yN(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function vN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function _N(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function TN(n){const e={},t=d(n,["config"]);return t!=null&&vN(t,e),e}function EN(n){const e={},t=d(n,["config"]);return t!=null&&_N(t,e),e}function SN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function AN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function CN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],cN(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],dN(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],tN(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function bN(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],fN(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function wN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],gN(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],yN(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function IN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>hN(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=d(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=d(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function xN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function RN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function NN(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],ir(n,i));const o=d(e,["config"]);return o!=null&&xN(o,t),t}function MN(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],ir(n,i));const o=d(e,["config"]);return o!=null&&RN(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DN extends nr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Fo(Ws.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=rN(this.apiClient,e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=sN(this.apiClient,e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=mN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=pN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=aN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=uN(v),S=new PT;return Object.assign(S,T),S})}else{const h=oN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=lN(v),S=new PT;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=MN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=NN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=EN(e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=AN(v),S=new kT;return Object.assign(S,T),S})}else{const h=TN(e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=SN(v),S=new kT;return Object.assign(S,T),S})}}}function Ld(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function GT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ve(n){return this instanceof Ve?(this.v=n,this):new Ve(n)}function Yi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(V){return Promise.resolve(V).then(w,T)}}function f(w,V){i[w]&&(o[w]=function(k){return new Promise(function(P,$){a.push([w,k,P,$])>1||g(w,k)})},V&&(o[w]=V(o[w])))}function g(w,V){try{h(i[w](V))}catch(k){S(a[0][3],k)}}function h(w){w.value instanceof Ve?Promise.resolve(w.value.v).then(v,T):S(a[0][2],w)}function v(w){g("next",w)}function T(w){g("throw",w)}function S(w,V){w(V),a.shift(),a.length&&g(a[0][0],a[0][1])}}function Ji(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof GT=="function"?GT(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(f,g){u=n[a](u),o(f,g,u.done,u.value)})}}function o(a,u,f,g){Promise.resolve(g).then(function(h){a({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:aA(t)}function aA(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function kN(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function BT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!aA(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class VN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new UN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class UN{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),kN(a)}async sendMessage(e){var t;await this.sendPromise;const i=xn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,f;const g=await o,h=(u=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(f=v.slice(T))!==null&&f!==void 0?f:[]);const w=h?[h]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=xn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?BT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Yi(this,arguments,function*(){var o,a,u,f,g,h;const v=[];try{for(var T=!0,S=Ji(e),w;w=yield Ve(S.next()),o=w.done,!o;T=!0){f=w.value,T=!1;const V=f;if(PN(V)){const k=(h=(g=V.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;k!==void 0&&v.push(k)}yield yield Ve(V)}}catch(V){a={error:V}}finally{try{!T&&!o&&(u=S.return)&&(yield Ve(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...BT(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,uf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LN(n){const e={},t=d(n,["file"]);return t!=null&&p(e,["file"],t),e}function ON(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function HN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],eA(t)),e}function FN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function GN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],eA(t)),e}function BN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function qN(n){const e={},t=d(n,["config"]);return t!=null&&BN(t,e),e}function zN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $N extends nr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Fo(Ws.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qN(e);return a=ge("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=zN(g),v=new QR;return Object.assign(v,h),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=LN(e);return a=ge("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=ON(g),v=new XR;return Object.assign(v,h),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=GN(e);return a=ge("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=HN(e);return a=ge("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=FN(g),v=new WR;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ad(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function KN(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>lM(a))),p(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function YN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function JN(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const o=d(n,["name"]);if(o!=null&&p(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const o=d(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function XN(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=d(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=d(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=d(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const V=d(n,["responseModalities"]);V!=null&&p(e,["responseModalities"],V);const k=d(n,["responseSchema"]);k!=null&&p(e,["responseSchema"],k);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const $=d(n,["seed"]);$!=null&&p(e,["seed"],$);const F=d(n,["speechConfig"]);F!=null&&p(e,["speechConfig"],F);const ee=d(n,["stopSequences"]);ee!=null&&p(e,["stopSequences"],ee);const re=d(n,["temperature"]);re!=null&&p(e,["temperature"],re);const ce=d(n,["thinkingConfig"]);ce!=null&&p(e,["thinkingConfig"],ce);const pe=d(n,["topK"]);pe!=null&&p(e,["topK"],pe);const M=d(n,["topP"]);if(M!=null&&p(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function WN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function jN(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function ZN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Xm(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],KN(xn(V)));const k=d(n,["tools"]);if(e!==void 0&&k!=null){let pe=tl(k);Array.isArray(pe)&&(pe=pe.map(M=>cM(el(M)))),p(e,["setup","tools"],pe)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],uM(P));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const F=d(n,["outputAudioTranscription"]);e!==void 0&&F!=null&&p(e,["setup","outputAudioTranscription"],F);const ee=d(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&p(e,["setup","realtimeInputConfig"],ee);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const ce=d(n,["proactivity"]);if(e!==void 0&&ce!=null&&p(e,["setup","proactivity"],ce),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function eM(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],XN(i));const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Xm(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],xn(V));const k=d(n,["tools"]);if(e!==void 0&&k!=null){let M=tl(k);Array.isArray(M)&&(M=M.map(N=>dM(el(N)))),p(e,["setup","tools"],M)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],P);const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const F=d(n,["outputAudioTranscription"]);e!==void 0&&F!=null&&p(e,["setup","outputAudioTranscription"],F);const ee=d(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&p(e,["setup","realtimeInputConfig"],ee);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const ce=d(n,["proactivity"]);e!==void 0&&ce!=null&&p(e,["setup","proactivity"],ce);const pe=d(n,["explicitVadSignal"]);return e!==void 0&&pe!=null&&p(e,["setup","explicitVadSignal"],pe),t}function tM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],at(n,i));const o=d(e,["config"]);return o!=null&&p(t,["config"],ZN(o,t)),t}function nM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],at(n,i));const o=d(e,["config"]);return o!=null&&p(t,["config"],eM(o,t)),t}function iM(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function sM(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["weightedPrompts"],i)}return e}function rM(n){const e={},t=d(n,["media"]);if(t!=null){let h=QS(t);Array.isArray(h)&&(h=h.map(v=>Ad(v))),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],Ad(WS(i)));const o=d(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=d(n,["video"]);a!=null&&p(e,["video"],Ad(XS(a)));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function oM(n){const e={},t=d(n,["media"]);if(t!=null){let h=QS(t);Array.isArray(h)&&(h=h.map(v=>v)),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],WS(i));const o=d(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=d(n,["video"]);a!=null&&p(e,["video"],XS(a));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function aM(n){const e={},t=d(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const o=d(n,["toolCall"]);o!=null&&p(e,["toolCall"],o);const a=d(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=d(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],fM(u));const f=d(n,["goAway"]);f!=null&&p(e,["goAway"],f);const g=d(n,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function lM(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],YN(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],JN(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],Ad(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function uM(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cM(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],WN(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],jN(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function dM(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>QN(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=d(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=d(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function fM(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const o=d(n,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const a=d(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=d(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const g=d(n,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["promptTokensDetails"],w)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["cacheTokensDetails"],w)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["responseTokensDetails"],w)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["toolUsePromptTokensDetails"],w)}const S=d(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hM(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function pM(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],mM(i));const o=d(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=d(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=d(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function mM(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function gM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["contents"]);if(o!=null){let a=Mi(o);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["contents"],a)}return t}function yM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["tokensInfo"],o)}return e}function vM(n){const e={},t=d(n,["values"]);t!=null&&p(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&p(e,["statistics"],_M(i)),e}function _M(n){const e={},t=d(n,["truncated"]);t!=null&&p(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function cf(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>xD(a))),p(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function TM(n){const e={},t=d(n,["controlType"]);t!=null&&p(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function EM(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function SM(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],xn(i));const o=d(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>dA(f))),p(e,["tools"],u)}const a=d(n,["generationConfig"]);return e!==void 0&&a!=null&&p(e,["generationConfig"],hD(a)),t}function AM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["contents"]);if(o!=null){let u=Mi(o);Array.isArray(u)&&(u=u.map(f=>cf(f))),p(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&EM(a),t}function CM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["contents"]);if(o!=null){let u=Mi(o);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&SM(a,t),t}function bM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const o=d(n,["cachedContentTokenCount"]);return o!=null&&p(e,["cachedContentTokenCount"],o),e}function wM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function IM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],at(n,i)),t}function xM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],at(n,i)),t}function RM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function NM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function MM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const V=d(n,["outputMimeType"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","mimeType"],V);const k=d(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","compressionQuality"],k);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&p(e,["parameters","addWatermark"],P);const $=d(n,["labels"]);e!==void 0&&$!=null&&p(e,["labels"],$);const F=d(n,["editMode"]);e!==void 0&&F!=null&&p(e,["parameters","editMode"],F);const ee=d(n,["baseSteps"]);return e!==void 0&&ee!=null&&p(e,["parameters","editConfig","baseSteps"],ee),t}function DM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=d(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(g=>kD(g))),p(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&MM(u,t),t}function PM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>df(a))),p(e,["generatedImages"],o)}return e}function kM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function VM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&p(e,["instances[]","title"],o);const a=d(n,["outputDimensionality"]);e!==void 0&&a!=null&&p(e,["parameters","outputDimensionality"],a);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&p(e,["parameters","autoTruncate"],f),t}function UM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["contents"]);if(o!=null){let f=Ym(n,o);Array.isArray(f)&&(f=f.map(g=>g)),p(t,["requests[]","content"],f)}const a=d(e,["config"]);a!=null&&kM(a,t);const u=d(e,["model"]);return u!==void 0&&p(t,["requests[]","model"],at(n,u)),t}function LM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["contents"]);if(o!=null){let u=Ym(n,o);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["instances[]","content"],u)}const a=d(e,["config"]);return a!=null&&VM(a,t),t}function OM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["embeddings"],a)}const o=d(n,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function HM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>vM(u))),p(e,["embeddings"],a)}const o=d(n,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function FM(n){const e={},t=d(n,["endpoint"]);t!=null&&p(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function GM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function BM(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const o=d(n,["name"]);if(o!=null&&p(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qM(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const o=d(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function $M(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],cf(xn(o)));const a=d(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const k=d(e,["seed"]);k!=null&&p(i,["seed"],k);const P=d(e,["responseMimeType"]);P!=null&&p(i,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(i,["responseSchema"],Jm($));const F=d(e,["responseJsonSchema"]);if(F!=null&&p(i,["responseJsonSchema"],F),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ee=d(e,["safetySettings"]);if(t!==void 0&&ee!=null){let D=ee;Array.isArray(D)&&(D=D.map(Me=>VD(Me))),p(t,["safetySettings"],D)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let D=tl(re);Array.isArray(D)&&(D=D.map(Me=>BD(el(Me)))),p(t,["tools"],D)}const ce=d(e,["toolConfig"]);if(t!==void 0&&ce!=null&&p(t,["toolConfig"],GD(ce)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const pe=d(e,["cachedContent"]);t!==void 0&&pe!=null&&p(t,["cachedContent"],ir(n,pe));const M=d(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const N=d(e,["mediaResolution"]);N!=null&&p(i,["mediaResolution"],N);const R=d(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],Qm(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=d(e,["thinkingConfig"]);H!=null&&p(i,["thinkingConfig"],H);const O=d(e,["imageConfig"]);O!=null&&p(i,["imageConfig"],vD(O));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function KM(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],xn(o));const a=d(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const k=d(e,["seed"]);k!=null&&p(i,["seed"],k);const P=d(e,["responseMimeType"]);P!=null&&p(i,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(i,["responseSchema"],Jm($));const F=d(e,["responseJsonSchema"]);F!=null&&p(i,["responseJsonSchema"],F);const ee=d(e,["routingConfig"]);ee!=null&&p(i,["routingConfig"],ee);const re=d(e,["modelSelectionConfig"]);re!=null&&p(i,["modelConfig"],re);const ce=d(e,["safetySettings"]);if(t!==void 0&&ce!=null){let W=ce;Array.isArray(W)&&(W=W.map(de=>de)),p(t,["safetySettings"],W)}const pe=d(e,["tools"]);if(t!==void 0&&pe!=null){let W=tl(pe);Array.isArray(W)&&(W=W.map(de=>dA(el(de)))),p(t,["tools"],W)}const M=d(e,["toolConfig"]);t!==void 0&&M!=null&&p(t,["toolConfig"],M);const N=d(e,["labels"]);t!==void 0&&N!=null&&p(t,["labels"],N);const R=d(e,["cachedContent"]);t!==void 0&&R!=null&&p(t,["cachedContent"],ir(n,R));const H=d(e,["responseModalities"]);H!=null&&p(i,["responseModalities"],H);const O=d(e,["mediaResolution"]);O!=null&&p(i,["mediaResolution"],O);const q=d(e,["speechConfig"]);q!=null&&p(i,["speechConfig"],Qm(q));const D=d(e,["audioTimestamp"]);D!=null&&p(i,["audioTimestamp"],D);const Me=d(e,["thinkingConfig"]);Me!=null&&p(i,["thinkingConfig"],Me);const ft=d(e,["imageConfig"]);if(ft!=null&&p(i,["imageConfig"],_D(ft)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function qT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["contents"]);if(o!=null){let u=Mi(o);Array.isArray(u)&&(u=u.map(f=>cf(f))),p(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&p(t,["generationConfig"],$M(n,a,t)),t}function zT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["contents"]);if(o!=null){let u=Mi(o);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&p(t,["generationConfig"],KM(n,a,t)),t}function $T(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>pM(h))),p(e,["candidates"],g)}const o=d(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=d(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function KT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),p(e,["candidates"],h)}const o=d(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=d(n,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const u=d(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(e,["responseId"],f);const g=d(n,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function YM(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=d(n,["guidanceScale"]);if(e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const v=d(n,["language"]);e!==void 0&&v!=null&&p(e,["parameters","language"],v);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(n,["imageSize"]);if(e!==void 0&&w!=null&&p(e,["parameters","sampleImageSize"],w),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function JM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const V=d(n,["outputMimeType"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","mimeType"],V);const k=d(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","compressionQuality"],k);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&p(e,["parameters","addWatermark"],P);const $=d(n,["labels"]);e!==void 0&&$!=null&&p(e,["labels"],$);const F=d(n,["imageSize"]);e!==void 0&&F!=null&&p(e,["parameters","sampleImageSize"],F);const ee=d(n,["enhancePrompt"]);return e!==void 0&&ee!=null&&p(e,["parameters","enhancePrompt"],ee),t}function QM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&YM(a,t),t}function XM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&JM(a,t),t}function WM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>uD(u))),p(e,["generatedImages"],a)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],uA(o)),e}function jM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>df(u))),p(e,["generatedImages"],a)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],cA(o)),e}function ZM(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(n,["durationSeconds"]);if(e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=d(n,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(n,["lastFrame"]);e!==void 0&&v!=null&&p(e,["instances[0]","lastFrame"],ff(v));const T=d(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>t2(w))),p(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function eD(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=d(n,["fps"]);e!==void 0&&a!=null&&p(e,["parameters","fps"],a);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const h=d(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const T=d(n,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","negativePrompt"],S);const w=d(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const V=d(n,["generateAudio"]);e!==void 0&&V!=null&&p(e,["parameters","generateAudio"],V);const k=d(n,["lastFrame"]);e!==void 0&&k!=null&&p(e,["instances[0]","lastFrame"],Xi(k));const P=d(n,["referenceImages"]);if(e!==void 0&&P!=null){let ee=P;Array.isArray(ee)&&(ee=ee.map(re=>n2(re))),p(e,["instances[0]","referenceImages"],ee)}const $=d(n,["mask"]);e!==void 0&&$!=null&&p(e,["instances[0]","mask"],e2($));const F=d(n,["compressionQuality"]);return e!==void 0&&F!=null&&p(e,["parameters","compressionQuality"],F),t}function tD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],rD(u)),e}function nD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],oD(u)),e}function iD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&p(t,["instances[0]","image"],ff(a));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],fA(u));const f=d(e,["source"]);f!=null&&aD(f,t);const g=d(e,["config"]);return g!=null&&ZM(g,t),t}function sD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&p(t,["instances[0]","image"],Xi(a));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],hA(u));const f=d(e,["source"]);f!=null&&lD(f,t);const g=d(e,["config"]);return g!=null&&eD(g,t),t}function rD(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>dD(u))),p(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function oD(n){const e={},t=d(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>fD(u))),p(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function aD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],ff(o));const a=d(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],fA(a)),t}function lD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Xi(o));const a=d(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],hA(a)),t}function uD(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],TD(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=d(n,["_self"]);return o!=null&&p(e,["safetyAttributes"],uA(o)),e}function df(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],lA(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=d(n,["_self"]);o!=null&&p(e,["safetyAttributes"],cA(o));const a=d(n,["prompt"]);return a!=null&&p(e,["enhancedPrompt"],a),e}function cD(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["mask"],lA(t));const i=d(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["labels"],o)}return e}function dD(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],jD(t)),e}function fD(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],ZD(t)),e}function hD(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=d(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=d(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=d(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const V=d(n,["responseModalities"]);V!=null&&p(e,["responseModalities"],V);const k=d(n,["responseSchema"]);k!=null&&p(e,["responseSchema"],k);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const $=d(n,["seed"]);$!=null&&p(e,["seed"],$);const F=d(n,["speechConfig"]);F!=null&&p(e,["speechConfig"],F);const ee=d(n,["stopSequences"]);ee!=null&&p(e,["stopSequences"],ee);const re=d(n,["temperature"]);re!=null&&p(e,["temperature"],re);const ce=d(n,["thinkingConfig"]);ce!=null&&p(e,["thinkingConfig"],ce);const pe=d(n,["topK"]);pe!=null&&p(e,["topK"],pe);const M=d(n,["topP"]);if(M!=null&&p(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function pD(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],at(n,i)),t}function mD(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],at(n,i)),t}function gD(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function yD(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function vD(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _D(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);const o=d(n,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);const a=d(n,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function TD(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],eo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function lA(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],eo(i));const o=d(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function ff(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],eo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Xi(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],eo(i));const o=d(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function ED(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],tA(n,f)),i}function SD(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],tA(n,f)),i}function AD(n,e){const t={},i=d(e,["config"]);return i!=null&&ED(n,i,t),t}function CD(n,e){const t={},i=d(e,["config"]);return i!=null&&SD(n,i,t),t}function bD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let a=nA(o);Array.isArray(a)&&(a=a.map(u=>rm(u))),p(e,["models"],a)}return e}function wD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let a=nA(o);Array.isArray(a)&&(a=a.map(u=>om(u))),p(e,["models"],a)}return e}function ID(n){const e={},t=d(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const o=d(n,["maskDilation"]);return o!=null&&p(e,["dilation"],o),e}function rm(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=d(n,["description"]);o!=null&&p(e,["description"],o);const a=d(n,["version"]);a!=null&&p(e,["version"],a);const u=d(n,["_self"]);u!=null&&p(e,["tunedModelInfo"],qD(u));const f=d(n,["inputTokenLimit"]);f!=null&&p(e,["inputTokenLimit"],f);const g=d(n,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const h=d(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const v=d(n,["temperature"]);v!=null&&p(e,["temperature"],v);const T=d(n,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const S=d(n,["topP"]);S!=null&&p(e,["topP"],S);const w=d(n,["topK"]);w!=null&&p(e,["topK"],w);const V=d(n,["thinking"]);return V!=null&&p(e,["thinking"],V),e}function om(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=d(n,["description"]);o!=null&&p(e,["description"],o);const a=d(n,["versionId"]);a!=null&&p(e,["version"],a);const u=d(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>FM(S))),p(e,["endpoints"],T)}const f=d(n,["labels"]);f!=null&&p(e,["labels"],f);const g=d(n,["_self"]);g!=null&&p(e,["tunedModelInfo"],zD(g));const h=d(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const v=d(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),p(e,["checkpoints"],T)}return e}function xD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],GM(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],BM(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],hM(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function RD(n){const e={},t=d(n,["productImage"]);return t!=null&&p(e,["image"],Xi(t)),e}function ND(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=d(n,["baseSteps"]);e!==void 0&&o!=null&&p(e,["parameters","baseSteps"],o);const a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=d(n,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const w=d(n,["labels"]);return e!==void 0&&w!=null&&p(e,["labels"],w),t}function MD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["source"]);o!=null&&PD(o,t);const a=d(e,["config"]);return a!=null&&ND(a,t),t}function DD(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>df(o))),p(e,["generatedImages"],i)}return e}function PD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=d(n,["personImage"]);e!==void 0&&o!=null&&p(e,["instances[0]","personImage","image"],Xi(o));const a=d(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>RD(f))),p(e,["instances[0]","productImages"],u)}return t}function kD(n){const e={},t=d(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Xi(t));const i=d(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);const o=d(n,["referenceType"]);o!=null&&p(e,["referenceType"],o);const a=d(n,["maskImageConfig"]);a!=null&&p(e,["maskImageConfig"],ID(a));const u=d(n,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],TM(u));const f=d(n,["styleImageConfig"]);f!=null&&p(e,["styleImageConfig"],f);const g=d(n,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],g),e}function uA(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function cA(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function VD(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function UD(n){const e={},t=d(n,["image"]);return t!=null&&p(e,["image"],Xi(t)),e}function LD(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const o=d(n,["maxPredictions"]);e!==void 0&&o!=null&&p(e,["parameters","maxPredictions"],o);const a=d(n,["confidenceThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","confidenceThreshold"],a);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&p(e,["parameters","binaryColorThreshold"],f);const g=d(n,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),t}function OD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["source"]);o!=null&&FD(o,t);const a=d(e,["config"]);return a!=null&&LD(a,t),t}function HD(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>cD(o))),p(e,["generatedMasks"],i)}return e}function FD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Xi(o));const a=d(n,["scribbleImage"]);return e!==void 0&&a!=null&&p(e,["instances[0]","scribble"],UD(a)),t}function GD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],qM(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function BD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],gD(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],yD(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function dA(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>zM(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=d(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=d(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function qD(n){const e={},t=d(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function zD(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function $D(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=d(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function KD(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=d(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function YD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","name"],at(n,i));const o=d(e,["config"]);return o!=null&&$D(o,t),t}function JD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["config"]);return o!=null&&KD(o,t),t}function QD(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=d(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=d(n,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=d(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&p(e,["parameters","sampleCount"],S);const w=d(n,["mode"]);return e!==void 0&&w!=null&&p(e,["parameters","mode"],w),t}function XD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],at(n,i));const o=d(e,["image"]);o!=null&&p(t,["instances[0]","image"],Xi(o));const a=d(e,["upscaleFactor"]);a!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=d(e,["config"]);return u!=null&&QD(u,t),t}function WD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>df(a))),p(e,["generatedImages"],o)}return e}function jD(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],eo(i));const o=d(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function ZD(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],eo(i));const o=d(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function e2(n){const e={},t=d(n,["image"]);t!=null&&p(e,["_self"],Xi(t));const i=d(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function t2(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],ff(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function n2(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],Xi(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function fA(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],eo(i));const o=d(n,["mimeType"]);return o!=null&&p(e,["encoding"],o),e}function hA(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],eo(i));const o=d(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i2(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function s2(n){const e={},t=d(n,["config"]);return t!=null&&i2(t,e),e}function r2(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function o2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&r2(i,e),e}function a2(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function l2(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const o=d(n,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),t}function u2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],d2(u)),e}function c2(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&p(e,["fileName"],i);const o=d(n,["config"]);return o!=null&&l2(o,e),e}function d2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function f2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function h2(n){const e={},t=d(n,["config"]);return t!=null&&f2(t,e),e}function p2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function pA(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const o=d(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=d(n,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(g=>g)),p(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function m2(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&pA(i,e),e}function g2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y2="Content-Type",v2="X-Server-Timeout",_2="User-Agent",am="x-goog-api-client",T2="1.34.0",E2=`google-genai-sdk/${T2}`,S2="v1beta1",A2="v1beta";class C2{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:S2,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:A2,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>a.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&b2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await YT(o),new nm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await YT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Yi(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const f="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield Ve(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(v,{stream:!0});try{const V=JSON.parse(T);if("error"in V){const k=JSON.parse(JSON.stringify(V.error)),P=k.status,$=k.code,F=`got status: ${P}. ${JSON.stringify(V)}`;if($>=400&&$<600)throw new uf({message:F,status:$})}}catch(V){if(V.name==="ApiError")throw V}u+=T;let S=-1,w=0;for(;;){S=-1,w=0;for(const P of g){const $=u.indexOf(P);$!==-1&&(S===-1||$<S)&&(S=$,w=P.length)}if(S===-1)break;const V=u.substring(0,S);u=u.substring(S+w);const k=V.trim();if(k.startsWith(f)){const P=k.substring(f.length).trim();try{const $=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ve(new nm($))}catch($){throw new Error(`exception parsing stream chunk ${P}. ${$}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=E2+" "+this.clientOptions.userAgentExtra;return e[_2]=t,e[am]=t,e[y2]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(v2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const g={file:o},h=this.getFileName(e),v=ge("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,h,g,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),f=String(u.size),g=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};i!=null&&pA(i,T);const S=await this.fetchUploadUrl(h,f,g,v,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var f;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function YT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new uf({message:o,status:t}):new Error(o)}}function b2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const f=Object.assign({},a);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],v=f[g];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?f[g]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),f[g]=h)}return f}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w2="mcp_used/unknown";let I2=!1;function mA(n){for(const e of n)if(x2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return I2}function gA(n){var e;const t=(e=n[am])!==null&&e!==void 0?e:"";n[am]=(t+` ${w2}`).trimStart()}function x2(n){return n!==null&&typeof n=="object"&&n instanceof Wm}function R2(n){return Yi(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield Ve(t.listTools({cursor:o}));for(const f of u.tools)yield yield Ve(f),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class Wm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Wm(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var f=!0,g=(t=void 0,Ji(R2(v))),h;h=await g.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),a1(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function N2(n,e,t){const i=new ZR;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class M2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=k2(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),g=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const v=new Promise(ee=>{h=ee}),T=e.callbacks,S=function(){h({})},w=this.apiClient,V={onopen:S,onmessage:ee=>{N2(w,T.onmessage,ee)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(ee){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(ee){}},k=this.webSocketFactory.create(g,P2(u),V);k.connect(),await v;const F={setup:{model:at(this.apiClient,e.model)}};return k.send(JSON.stringify(F)),new D2(k,this.apiClient)}}class D2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=sM(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=iM(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Va.PLAY)}pause(){this.sendPlaybackControl(Va.PAUSE)}stop(){this.sendPlaybackControl(Va.STOP)}resetContext(){this.sendPlaybackControl(Va.RESET_CONTEXT)}close(){this.conn.close()}}function P2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function k2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function U2(n,e,t){const i=new jR;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=aM(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class L2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new M2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&mA(e.config.tools)&&gA(T);const S=G2(T);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const R=this.apiClient.getApiKey();let H="BidiGenerateContent",O="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),H="BidiGenerateContentConstrained",O="access_token"),v=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${H}?${O}=${R}`}let w=()=>{};const V=new Promise(R=>{w=R}),k=e.callbacks,P=function(){var R;(R=k==null?void 0:k.onopen)===null||R===void 0||R.call(k),w({})},$=this.apiClient,F={onopen:P,onmessage:R=>{U2($,k.onmessage,R)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(R){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(R){}},ee=this.webSocketFactory.create(v,F2(S),F);ee.connect(),await V;let re=at(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const R=this.apiClient.getProject(),H=this.apiClient.getLocation();re=`projects/${R}/locations/${H}/`+re}let ce={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[kd.AUDIO]}:e.config.responseModalities=[kd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const pe=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],M=[];for(const R of pe)if(this.isCallableTool(R)){const H=R;M.push(await H.tool())}else M.push(R);M.length>0&&(e.config.tools=M);const N={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ce=nM(this.apiClient,N):ce=tM(this.apiClient,N),delete ce.config,ee.send(JSON.stringify(ce)),new H2(ee,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const O2={turnComplete:!0};class H2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Mi(t.turns),e.isVertexAI()||(i=i.map(o=>cf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(V2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},O2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:oM(e)}:t={realtimeInput:rM(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function F2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function G2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JT=10;function QT(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Oa(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Oa(n){return"callTool"in n&&typeof n.callTool=="function"}function B2(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Oa(o)))!==null&&i!==void 0?i:!1}function XT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Oa(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function WT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q2 extends nr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,f;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!B2(t)||QT(t.config))return await this.generateContentInternal(g);const h=XT(t);if(h.length>0){const k=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let v,T;const S=Mi(g.contents),w=(a=(o=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:JT;let V=0;for(;V<w&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const k=v.candidates[0].content,P=[];for(const $ of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Oa($)){const ee=await $.callTool(v.functionCalls);P.push(...ee)}V++,T={role:"user",parts:P},g.contents=Mi(g.contents),g.contents.push(k),g.contents.push(T),WT(g.config)&&(S.push(k),S.push(T))}return WT(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var i,o,a,u,f;if(this.maybeMoveToResponseJsonSchem(t),QT(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=XT(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((o=g==null?void 0:g.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:u.push(g);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Fo(Ws.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,f,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((g=(f=t.source)===null||f===void 0?void 0:f.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async g=>Oa(g)?await g.tool():g)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&mA(e.config.tools)){const g=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),gA(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Oa(u)){const f=u,g=await f.tool();for(const h of(o=g.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,f)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:JT;let u=!1,f=0;const g=await this.initAfcToolsMap(e);return(function(h,v,T){return Yi(this,arguments,function*(){for(var S,w,V,k,P,$;f<a;){u&&(f++,u=!1);const ce=yield Ve(h.processParamsMaybeAddMcpUsage(T)),pe=yield Ve(h.generateContentStreamInternal(ce)),M=[],N=[];try{for(var F=!0,ee=(w=void 0,Ji(pe)),re;re=yield Ve(ee.next()),S=re.done,!S;F=!0){k=re.value,F=!1;const R=k;if(yield yield Ve(R),R.candidates&&(!((P=R.candidates[0])===null||P===void 0)&&P.content)){N.push(R.candidates[0].content);for(const H of($=R.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(f<a&&H.functionCall){if(!H.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(H.functionCall.name)){const O=yield Ve(v.get(H.functionCall.name).callTool([H.functionCall]));M.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${H.functionCall.name}`)}}}}catch(R){w={error:R}}finally{try{!F&&!S&&(V=ee.return)&&(yield Ve(V.call(ee)))}finally{if(w)throw w.error}}if(M.length>0){u=!0;const R=new lu;R.candidates=[{content:{role:"user",parts:M}}],yield yield Ve(R);const H=[];H.push(...N),H.push({role:"user",parts:M});const O=Mi(T.contents).concat(H);T.contents=O}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=zT(this.apiClient,e);return f=ge("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=KT(v),S=new lu;return Object.assign(S,T),S})}else{const h=qT(this.apiClient,e);return f=ge("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=$T(v),S=new lu;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=zT(this.apiClient,e);return f=ge("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return Yi(this,arguments,function*(){var S,w,V,k;try{for(var P=!0,$=Ji(T),F;F=yield Ve($.next()),S=F.done,!S;P=!0){k=F.value,P=!1;const ee=k,re=KT(yield Ve(ee.json()));re.sdkHttpResponse={headers:ee.headers};const ce=new lu;Object.assign(ce,re),yield yield Ve(ce)}}catch(ee){w={error:ee}}finally{try{!P&&!S&&(V=$.return)&&(yield Ve(V.call($)))}finally{if(w)throw w.error}}})})}else{const h=qT(this.apiClient,e);return f=ge("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return Yi(this,arguments,function*(){var S,w,V,k;try{for(var P=!0,$=Ji(T),F;F=yield Ve($.next()),S=F.done,!S;P=!0){k=F.value,P=!1;const ee=k,re=$T(yield Ve(ee.json()));re.sdkHttpResponse={headers:ee.headers};const ce=new lu;Object.assign(ce,re),yield yield Ve(ce)}}catch(ee){w={error:ee}}finally{try{!P&&!S&&(V=$.return)&&(yield Ve(V.call($)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=LM(this.apiClient,e);return f=ge("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=HM(v),S=new wT;return Object.assign(S,T),S})}else{const h=UM(this.apiClient,e);return f=ge("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=OM(v),S=new wT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=XM(this.apiClient,e);return f=ge("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=jM(v),S=new IT;return Object.assign(S,T),S})}else{const h=QM(this.apiClient,e);return f=ge("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=WM(v),S=new IT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=DM(this.apiClient,e);return a=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=PM(g),v=new GR;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=XD(this.apiClient,e);return a=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=WD(g),v=new BR;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=MD(this.apiClient,e);return a=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=DD(g),v=new qR;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=OD(this.apiClient,e);return a=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=HD(g),v=new zR;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=mD(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>om(v))}else{const h=pD(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>rm(v))}}async listInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=CD(this.apiClient,e);return f=ge("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=wD(v),S=new xT;return Object.assign(S,T),S})}else{const h=AD(this.apiClient,e);return f=ge("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=bD(v),S=new xT;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=JD(this.apiClient,e);return f=ge("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>om(v))}else{const h=YD(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>rm(v))}}async delete(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=xM(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=NM(v),S=new RT;return Object.assign(S,T),S})}else{const h=IM(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=RM(v),S=new RT;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=CM(this.apiClient,e);return f=ge("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=wM(v),S=new NT;return Object.assign(S,T),S})}else{const h=AM(this.apiClient,e);return f=ge("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=bM(v),S=new NT;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=gM(this.apiClient,e);return a=ge("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const h=yM(g),v=new $R;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=sD(this.apiClient,e);return f=ge("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=nD(v),S=new Vd;return Object.assign(S,T),S})}else{const h=iD(this.apiClient,e);return f=ge("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=tD(v),S=new Vd;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z2 extends nr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=VR(e);return f=ge("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const h=kR(e);return f=ge("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=IR(e);return a=ge("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $2(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function K2(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>tP(a))),p(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function Y2(n,e,t){const i={},o=d(e,["expireTime"]);t!==void 0&&o!=null&&p(t,["expireTime"],o);const a=d(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const u=d(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&p(t,["bidiGenerateContentSetup"],eP(n,f));const g=d(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&p(t,["fieldMask"],g),i}function J2(n,e){const t={},i=d(e,["config"]);return i!=null&&p(t,["config"],Y2(n,i,t)),t}function Q2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function X2(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const o=d(n,["name"]);if(o!=null&&p(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function W2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function j2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Z2(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Xm(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],K2(xn(V)));const k=d(n,["tools"]);if(e!==void 0&&k!=null){let pe=tl(k);Array.isArray(pe)&&(pe=pe.map(M=>iP(el(M)))),p(e,["setup","tools"],pe)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],nP(P));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const F=d(n,["outputAudioTranscription"]);e!==void 0&&F!=null&&p(e,["setup","outputAudioTranscription"],F);const ee=d(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&p(e,["setup","realtimeInputConfig"],ee);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const ce=d(n,["proactivity"]);if(e!==void 0&&ce!=null&&p(e,["setup","proactivity"],ce),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function eP(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],at(n,i));const o=d(e,["config"]);return o!=null&&p(t,["config"],Z2(o,t)),t}function tP(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],Q2(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],X2(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],$2(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function nP(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iP(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],W2(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],j2(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sP(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function rP(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=sP(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];a&&g.push(a),f.length>0&&g.push(...f),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class oP extends nr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=J2(this.apiClient,e);a=ge("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const g=rP(f,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aP(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function lP(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&aP(i,e),e}function uP(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function cP(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function dP(n){const e={},t=d(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&cP(i,e),e}function fP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hP extends nr{constructor(e){super(),this.apiClient=e,this.list=async t=>new Fo(Ws.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uP(e);return a=ge("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lP(e);o=ge("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=dP(e);return a=ge("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=fP(g),v=new KR;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pP extends nr{constructor(e,t=new hP(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Fo(Ws.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=s2(e);return a=ge("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=a2(e);return a=ge("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=o2(e);o=ge("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=h2(e);return a=ge("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=p2(g),v=new YR;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=m2(e);return a=ge("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=g2(g),v=new JR;return Object.assign(v,h),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=c2(e);return a=ge("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),o.then(g=>{const h=u2(g),v=new $m;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return yA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const mP=()=>yA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const um=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Di extends Error{}class Hn extends Di{constructor(e,t,i,o){super(`${Hn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new hf({message:i,cause:um(t)});const a=t;return e===400?new _A(e,a,i,o):e===401?new TA(e,a,i,o):e===403?new EA(e,a,i,o):e===404?new SA(e,a,i,o):e===409?new AA(e,a,i,o):e===422?new CA(e,a,i,o):e===429?new bA(e,a,i,o):e>=500?new wA(e,a,i,o):new Hn(e,a,i,o)}}class cm extends Hn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class hf extends Hn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class vA extends hf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class _A extends Hn{}class TA extends Hn{}class EA extends Hn{}class SA extends Hn{}class AA extends Hn{}class CA extends Hn{}class bA extends Hn{}class wA extends Hn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gP=/^[a-z][a-z0-9+.-]*:/i,yP=n=>gP.test(n);let dm=n=>(dm=Array.isArray,dm(n));const vP=dm;let _P=vP;const jT=_P;function TP(n){if(!n)return!0;for(const e in n)return!1;return!0}function EP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const SP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Di(`${n} must be an integer`);if(e<0)throw new Di(`${n} must be a positive integer`);return e},AP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ra="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const wP=()=>{var n,e,t,i,o;const a=bP();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":eE(Deno.build.os),"X-Stainless-Arch":ZT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":eE((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":ZT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=IP();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function IP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const ZT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",eE=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let cd;const xP=()=>cd??(cd=wP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function IA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function NP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return IA({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function xA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function MP(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Hp(n,e,t){return RA(),new File(n,e??"unknown_file",t)}function PP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const kP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",VP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&NA(n),UP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function LP(n,e,t){if(RA(),n=await n,VP(n))return n instanceof File?n:Hp([await n.arrayBuffer()],n.name);if(UP(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Hp(await fm(o),e,t)}const i=await fm(n);if(e||(e=PP(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return Hp(i,e,t)}async function fm(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(NA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(kP(n))try{for(var f=!0,g=Ji(n),h;h=await g.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const v=o;u.push(...await fm(v))}}catch(v){t={error:v}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}else{const v=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${OP(n)}`)}return u}function OP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MA{constructor(e){this._client=e}}MA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const tE=Object.freeze(Object.create(null)),HP=(n=DA)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((v,T,S)=>{var w,V,k;/[?#]/.test(T)&&(o=!0);const P=i[S];let $=(o?encodeURIComponent:n)(""+P);return S!==i.length&&(P==null||typeof P=="object"&&P.toString===((k=Object.getPrototypeOf((V=Object.getPrototypeOf((w=P.hasOwnProperty)!==null&&w!==void 0?w:tE))!==null&&V!==void 0?V:tE))===null||k===void 0?void 0:k.toString))&&($=P+"",a.push({start:v.length+T.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),v+T+(S===i.length?"":$)},""),f=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(f))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((v,T)=>v.start-T.start),a.length>0){let v=0;const T=a.reduce((S,w)=>{const V=" ".repeat(w.start-v),k="^".repeat(w.length);return v=w.start+w.length,S+V+k},"");throw new Di(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),dd=HP(DA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PA extends MA{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=Ld(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Di("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Di("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(dd`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(dd`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(dd`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,f=Ld(a,["api_version"]);return this._client.get(dd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}PA._key=Object.freeze(["interactions"]);class kA extends PA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FP(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let fd;function jm(n){let e;return(fd??(e=new globalThis.TextEncoder,fd=e.encode.bind(e)))(n)}let hd;function nE(n){let e;return(hd??(e=new globalThis.TextDecoder,hd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?jm(e):e;this.buffer=FP([this.buffer,t]);const i=[];let o;for(;(o=GP(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(nE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=nE(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}pf.NEWLINE_CHARS=new Set([`
`,"\r"]);pf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function GP(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function BP(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Od={off:0,error:200,warn:300,info:400,debug:500},iE=(n,e,t)=>{if(n){if(EP(Od,n))return n;On(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Od))}`)}};function du(){}function pd(n,e,t){return!e||Od[n]>Od[t]?du:e[n].bind(e)}const qP={error:du,warn:du,info:du,debug:du};let sE=new WeakMap;function On(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return qP;const o=sE.get(t);if(o&&o[0]===i)return o[1];const a={error:pd("error",t,i),warn:pd("warn",t,i),info:pd("info",t,i),debug:pd("debug",t,i)};return sE.set(t,[i,a]),a}const No=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ua{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?On(i):console;function u(){return Yi(this,arguments,function*(){var g,h,v,T;if(o)throw new Di("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var w=!0,V=Ji(zP(e,t)),k;k=yield Ve(V.next()),g=k.done,!g;w=!0){T=k.value,w=!1;const P=T;if(!S)if(P.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ve(JSON.parse(P.data))}catch($){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),$}}}catch(P){h={error:P}}finally{try{!w&&!g&&(v=V.return)&&(yield Ve(v.call(V)))}finally{if(h)throw h.error}}S=!0}catch(P){if(lm(P))return yield Ve(void 0);throw P}finally{S||t.abort()}})}return new Ua(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return Yi(this,arguments,function*(){var g,h,v,T;const S=new pf,w=xA(e);try{for(var V=!0,k=Ji(w),P;P=yield Ve(k.next()),g=P.done,!g;V=!0){T=P.value,V=!1;const $=T;for(const F of S.decode($))yield yield Ve(F)}}catch($){h={error:$}}finally{try{!V&&!g&&(v=k.return)&&(yield Ve(v.call(k)))}finally{if(h)throw h.error}}for(const $ of S.flush())yield yield Ve($)})}function u(){return Yi(this,arguments,function*(){var g,h,v,T;if(o)throw new Di("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var w=!0,V=Ji(a()),k;k=yield Ve(V.next()),g=k.done,!g;w=!0){T=k.value,w=!1;const P=T;S||P&&(yield yield Ve(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!w&&!g&&(v=V.return)&&(yield Ve(v.call(V)))}finally{if(h)throw h.error}}S=!0}catch(P){if(lm(P))return yield Ve(void 0);throw P}finally{S||t.abort()}})}return new Ua(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Ua(()=>o(e),this.controller,this.client),new Ua(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return IA({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=jm(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function zP(n,e){return Yi(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Di("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Di("Attempted to iterate over a response with no body");const f=new KP,g=new pf,h=xA(n.body);try{for(var v=!0,T=Ji($P(h)),S;S=yield Ve(T.next()),i=S.done,!i;v=!0){u=S.value,v=!1;const w=u;for(const V of g.decode(w)){const k=f.decode(V);k&&(yield yield Ve(k))}}}catch(w){o={error:w}}finally{try{!v&&!i&&(a=T.return)&&(yield Ve(a.call(T)))}finally{if(o)throw o.error}}for(const w of g.flush()){const V=f.decode(w);V&&(yield yield Ve(V))}})}function $P(n){return Yi(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var f=!0,g=Ji(n),h;h=yield Ve(g.next()),t=h.done,!t;f=!0){a=h.value,f=!1;const v=a;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?jm(v):v;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let w;for(;(w=BP(u))!==-1;)yield yield Ve(u.slice(0,w)),u=u.slice(w)}}catch(v){i={error:v}}finally{try{!f&&!t&&(o=g.return)&&(yield Ve(o.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ve(u))})}class KP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=YP(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function YP(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function JP(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var f;if(e.options.stream)return On(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Ua.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),h=(f=g==null?void 0:g.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return On(n).debug(`[${i}] response parsed`,No({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zm extends Promise{constructor(e,t,i=JP){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Zm(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VA=Symbol("brand.privateNullableHeaders");function*QP(n){if(!n)return;if(VA in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():jT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=jT(i[1])?i[1]:[i[1]];let u=!1;for(const f of a)f!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,f])}}const uu=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of QP(i)){const f=a.toLowerCase();o.has(f)||(e.delete(a),o.add(f)),u===null?(e.delete(a),t.add(f)):(e.append(a,u),t.delete(f))}}return{[VA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fp=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=ER)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var UA;class mf{constructor(e){var t,i,o,a,u,f,g,{baseURL:h=Fp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=Fp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Ld(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:v,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:mf.DEFAULT_TIMEOUT,this.logger=(o=w.logger)!==null&&o!==void 0?o:console;const V="warn";this.logLevel=V,this.logLevel=(u=(a=iE(w.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:iE(Fp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:V,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:RP(),this.encoder=DP,this._options=w,this.apiKey=v,this.apiVersion=T,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=uu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return uu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return uu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Di(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ra}`}defaultIdempotencyKey(){return`stainless-node-retry-${mP()}`}makeStatusError(e,t,i,o){return Hn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=yP(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return TP(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new Zm(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const f=await e,g=(o=f.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=g),await this.prepareOptions(f);const{req:h,url:v,timeout:T}=await this.buildRequest(f,{retryCount:g-t});await this.prepareRequest(h,{url:v,options:f});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,V=Date.now();if(On(this).debug(`[${S}] sending request`,No({retryOfRequestLogID:i,method:f.method,url:v,options:f,headers:h.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new cm;const k=new AbortController,P=await this.fetchWithTimeout(v,h,T,k).catch(um),$=Date.now();if(P instanceof globalThis.Error){const ee=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new cm;const re=lm(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return On(this).info(`[${S}] connection ${re?"timed out":"failed"} - ${ee}`),On(this).debug(`[${S}] connection ${re?"timed out":"failed"} (${ee})`,No({retryOfRequestLogID:i,url:v,durationMs:$-V,message:P.message})),this.retryRequest(f,t,i??S);throw On(this).info(`[${S}] connection ${re?"timed out":"failed"} - error; no more retries left`),On(this).debug(`[${S}] connection ${re?"timed out":"failed"} (error; no more retries left)`,No({retryOfRequestLogID:i,url:v,durationMs:$-V,message:P.message})),re?new vA:new hf({cause:P})}const F=`[${S}${w}] ${h.method} ${v} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${$-V}ms`;if(!P.ok){const ee=await this.shouldRetry(P);if(t&&ee){const R=`retrying, ${t} attempts remaining`;return await MP(P.body),On(this).info(`${F} - ${R}`),On(this).debug(`[${S}] response error (${R})`,No({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-V})),this.retryRequest(f,t,i??S,P.headers)}const re=ee?"error; no more retries left":"error; not retryable";On(this).info(`${F} - ${re}`);const ce=await P.text().catch(R=>um(R).message),pe=AP(ce),M=pe?void 0:ce;throw On(this).debug(`[${S}] response error (${re})`,No({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:M,durationMs:Date.now()-V})),this.makeStatusError(P.status,pe,M,P.headers)}return On(this).info(F),On(this).debug(`[${S}] response start`,No({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-V})),{response:P,options:f,controller:k,requestLogID:S,retryOfRequestLogID:i,startTime:V}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:f}=a,g=Ld(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:o.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);f&&(T.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const f=o==null?void 0:o.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const g=o==null?void 0:o.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await CP(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:f,path:g,query:h,defaultBaseURL:v}=u,T=this.buildURL(g,h,v);"timeout"in u&&SP("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:u}),V=await this.buildHeaders({options:e,method:f,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:V},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=uu([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),xP()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=uu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:NP(e)}:this.encoder({body:e,headers:i})}}mf.DEFAULT_TIMEOUT=6e4;class fn extends mf{constructor(){super(...arguments),this.interactions=new kA(this)}}UA=fn;fn.GeminiNextGenAPIClient=UA;fn.GeminiNextGenAPIClientError=Di;fn.APIError=Hn;fn.APIConnectionError=hf;fn.APIConnectionTimeoutError=vA;fn.APIUserAbortError=cm;fn.NotFoundError=SA;fn.ConflictError=AA;fn.RateLimitError=bA;fn.BadRequestError=_A;fn.AuthenticationError=TA;fn.InternalServerError=wA;fn.PermissionDeniedError=EA;fn.UnprocessableEntityError=CA;fn.toFile=LP;fn.Interactions=kA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function WP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function jP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function ZP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function ek(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=d(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","batchSize"],f);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function tk(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec"],rE(w))}else if(o==="PREFERENCE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec"],rE(w))}const a=d(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=d(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=d(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=d(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["beta"]);return e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function nk(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=d(n,["trainingDataset"]);a!=null&&hk(a);const u=d(n,["config"]);return u!=null&&ek(u,t),t}function ik(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=d(n,["trainingDataset"]);a!=null&&pk(a,t,e);const u=d(n,["config"]);return u!=null&&tk(u,t,e),t}function sk(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function rk(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function ok(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function ak(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function lk(n,e){const t={},i=d(n,["config"]);return i!=null&&ok(i,t),t}function uk(n,e){const t={},i=d(n,["config"]);return i!=null&&ak(i,t),t}function ck(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=d(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>LA(f))),p(t,["tuningJobs"],u)}return t}function dk(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=d(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>hm(f))),p(t,["tuningJobs"],u)}return t}function fk(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["model"],i);const o=d(n,["name"]);return o!=null&&p(t,["endpoint"],o),t}function hk(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["examples","examples"],o)}return t}function pk(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=d(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function LA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&p(t,["name"],o);const a=d(n,["state"]);a!=null&&p(t,["state"],ZS(a));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["tuningTask","completeTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=d(n,["description"]);v!=null&&p(t,["description"],v);const T=d(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const S=d(n,["_self"]);return S!=null&&p(t,["tunedModel"],fk(S)),t}function hm(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&p(t,["name"],o);const a=d(n,["state"]);a!=null&&p(t,["state"],ZS(a));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=d(n,["error"]);v!=null&&p(t,["error"],v);const T=d(n,["description"]);T!=null&&p(t,["description"],T);const S=d(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const w=d(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const V=d(n,["preTunedModel"]);V!=null&&p(t,["preTunedModel"],V);const k=d(n,["supervisedTuningSpec"]);k!=null&&p(t,["supervisedTuningSpec"],k);const P=d(n,["preferenceOptimizationSpec"]);P!=null&&p(t,["preferenceOptimizationSpec"],P);const $=d(n,["tuningDataStats"]);$!=null&&p(t,["tuningDataStats"],$);const F=d(n,["encryptionSpec"]);F!=null&&p(t,["encryptionSpec"],F);const ee=d(n,["partnerModelTuningSpec"]);ee!=null&&p(t,["partnerModelTuningSpec"],ee);const re=d(n,["customBaseModel"]);re!=null&&p(t,["customBaseModel"],re);const ce=d(n,["experiment"]);ce!=null&&p(t,["experiment"],ce);const pe=d(n,["labels"]);pe!=null&&p(t,["labels"],pe);const M=d(n,["outputUri"]);M!=null&&p(t,["outputUri"],M);const N=d(n,["pipelineJob"]);N!=null&&p(t,["pipelineJob"],N);const R=d(n,["serviceAccount"]);R!=null&&p(t,["serviceAccount"],R);const H=d(n,["tunedModelDisplayName"]);H!=null&&p(t,["tunedModelDisplayName"],H);const O=d(n,["veoTuningSpec"]);return O!=null&&p(t,["veoTuningSpec"],O),t}function mk(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&p(t,["name"],o);const a=d(n,["metadata"]);a!=null&&p(t,["metadata"],a);const u=d(n,["done"]);u!=null&&p(t,["done"],u);const f=d(n,["error"]);return f!=null&&p(t,["error"],f),t}function rE(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const o=d(n,["vertexDatasetResource"]);return o!=null&&p(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gk extends nr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Fo(Ws.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:tm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=rk(e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>hm(v))}else{const h=sk(e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>LA(v))}}async listInternal(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=uk(e);return f=ge("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=dk(v),S=new MT;return Object.assign(S,T),S})}else{const h=lk(e);return f=ge("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=ck(v),S=new MT;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=WP(e);return f=ge("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=ZP(v),S=new DT;return Object.assign(S,T),S})}else{const h=XP(e);return f=ge("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=jP(v),S=new DT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=ik(e,e);return a=ge("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>hm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=nk(e);return a=ge("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>mk(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yk{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const vk=1024*1024*8,_k=3,Tk=1e3,Ek=2,Hd="x-goog-upload-status";async function Sk(n,e,t){var i;const o=await OA(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Hd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Ak(n,e,t){var i;const o=await OA(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Hd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=YS(a),f=new Km;return Object.assign(f,u),f}async function OA(n,e,t){var i,o;let a=0,u=0,f=new nm(new Response),g="upload";for(a=n.size;u<a;){const h=Math.min(vk,a-u),v=n.slice(u,u+h);u+h>=a&&(g+=", finalize");let T=0,S=Tk;for(;T<_k&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Hd]));)T++,await bk(S),S=S*Ek;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[Hd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function Ck(n){return{size:n.size,type:n.type}}function bk(n){return new Promise(e=>setTimeout(e,n))}class wk{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Sk(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ak(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ck(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ik{create(e,t,i){return new xk(e,t,i)}}class xk{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oE="x-goog-api-key";class Rk{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(oE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(oE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nk="gl-node/";class Mk{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new fn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=bR(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new Rk(this.apiKey);this.apiClient=new C2({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Nk+"web",uploader:new wk,downloader:new yk}),this.models=new q2(this.apiClient),this.live=new L2(this.apiClient,o,new Ik),this.batches=new eN(this.apiClient),this.chats=new VN(this.models,this.apiClient),this.caches=new DN(this.apiClient),this.files=new $N(this.apiClient),this.operations=new z2(this.apiClient),this.authTokens=new oP(this.apiClient),this.tunings=new gk(this.apiClient),this.fileSearchStores=new pP(this.apiClient)}}const Dk=()=>{};var aE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Pk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],f=n[t++],g=((o&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},FA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,f=u?n[o+1]:0,g=o+2<n.length,h=g?n[o+2]:0,v=a>>2,T=(a&3)<<4|f>>4;let S=(f&15)<<2|h>>6,w=h&63;g||(w=64,u||(S=64)),i.push(t[v],t[T],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(HA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Pk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||f==null||h==null||T==null)throw new kk;const S=a<<2|f>>4;if(i.push(S),h!==64){const w=f<<4&240|h>>2;if(i.push(w),T!==64){const V=h<<6&192|T;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class kk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vk=function(n){const e=HA(n);return FA.encodeByteArray(e,!0)},Fd=function(n){return Vk(n).replace(/\./g,"")},GA=function(n){try{return FA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=()=>Uk().__FIREBASE_DEFAULTS__,Ok=()=>{if(typeof process>"u"||typeof aE>"u")return;const n=aE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Hk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&GA(n[1]);return e&&JSON.parse(e)},gf=()=>{try{return Dk()||Lk()||Ok()||Hk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BA=n=>{var e,t;return(t=(e=gf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},qA=n=>{const e=BA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},zA=()=>{var n;return(n=gf())==null?void 0:n.config},$A=n=>{var e;return(e=gf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Fd(JSON.stringify(t)),Fd(JSON.stringify(u)),""].join(".")}const yu={};function Bk(){const n={prod:[],emulator:[]};for(const e of Object.keys(yu))yu[e]?n.emulator.push(e):n.prod.push(e);return n}function qk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let lE=!1;function tg(n,e){if(typeof window>"u"||typeof document>"u"||!to(window.location.host)||yu[n]===e||yu[n]||lE)return;yu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=Bk().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{lE=!0,u()},S}function v(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=qk(i),w=t("text"),V=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),P=document.getElementById(k)||document.createElement("a"),$=t("preprendIcon"),F=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;f(ee),v(P,k);const re=h();g(F,$),ee.append(F,V,P,re),document.body.appendChild(ee)}a?(V.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function $k(){var e;const n=(e=gf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Jk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qk(){const n=Rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Xk(){return!$k()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wk(){try{return typeof indexedDB=="object"}catch{return!1}}function jk(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="FirebaseError";class bs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Zk,Object.setPrototypeOf(this,bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ku.prototype.create)}}class ku{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?eV(a,i):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new bs(o,f,i)}}function eV(n,e){return n.replace(tV,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const tV=/\{\$([^}]+)}/g;function nV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Kr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(uE(a)&&uE(u)){if(!Kr(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function uE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function iV(n,e){const t=new sV(n,e);return t.subscribe.bind(t)}class sV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");rV(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Gp),o.error===void 0&&(o.error=Gp),o.complete===void 0&&(o.complete=Gp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n){return n&&n._delegate?n._delegate:n}class Yr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Fk;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lV(e))try{this.getOrInitializeService({instanceIdentifier:Mo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mo){return this.instances.has(e)}getOptions(e=Mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:aV(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Mo){return this.component?this.component.multipleInstances?e:Mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aV(n){return n===Mo?void 0:n}function lV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new oV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(We||(We={}));const cV={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},dV=We.INFO,fV={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},hV=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=fV[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ng{constructor(e){this.name=e,this._logLevel=dV,this._logHandler=hV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const pV=(n,e)=>e.some(t=>n instanceof t);let cE,dE;function mV(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gV(){return dE||(dE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KA=new WeakMap,pm=new WeakMap,YA=new WeakMap,Bp=new WeakMap,ig=new WeakMap;function yV(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Br(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&KA.set(t,n)}).catch(()=>{}),ig.set(e,n),e}function vV(n){if(pm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});pm.set(n,e)}let mm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return pm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||YA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Br(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _V(n){mm=n(mm)}function TV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(qp(this),e,...t);return YA.set(i,e.sort?e.sort():[e]),Br(i)}:gV().includes(n)?function(...e){return n.apply(qp(this),e),Br(KA.get(this))}:function(...e){return Br(n.apply(qp(this),e))}}function EV(n){return typeof n=="function"?TV(n):(n instanceof IDBTransaction&&vV(n),pV(n,mV())?new Proxy(n,mm):n)}function Br(n){if(n instanceof IDBRequest)return yV(n);if(Bp.has(n))return Bp.get(n);const e=EV(n);return e!==n&&(Bp.set(n,e),ig.set(e,n)),e}const qp=n=>ig.get(n);function SV(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),f=Br(u);return i&&u.addEventListener("upgradeneeded",g=>{i(Br(u.result),g.oldVersion,g.newVersion,Br(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{a&&g.addEventListener("close",()=>a()),o&&g.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const AV=["get","getKey","getAll","getAllKeys","count"],CV=["put","add","delete","clear"],zp=new Map;function fE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zp.get(e))return zp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=CV.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||AV.includes(t)))return;const a=async function(u,...f){const g=this.transaction(u,o?"readwrite":"readonly");let h=g.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),o&&g.done]))[0]};return zp.set(e,a),a}_V(n=>({...n,get:(e,t,i)=>fE(e,t)||n.get(e,t,i),has:(e,t)=>!!fE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wV(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function wV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gm="@firebase/app",hE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new ng("@firebase/app"),IV="@firebase/app-compat",xV="@firebase/analytics-compat",RV="@firebase/analytics",NV="@firebase/app-check-compat",MV="@firebase/app-check",DV="@firebase/auth",PV="@firebase/auth-compat",kV="@firebase/database",VV="@firebase/data-connect",UV="@firebase/database-compat",LV="@firebase/functions",OV="@firebase/functions-compat",HV="@firebase/installations",FV="@firebase/installations-compat",GV="@firebase/messaging",BV="@firebase/messaging-compat",qV="@firebase/performance",zV="@firebase/performance-compat",$V="@firebase/remote-config",KV="@firebase/remote-config-compat",YV="@firebase/storage",JV="@firebase/storage-compat",QV="@firebase/firestore",XV="@firebase/ai",WV="@firebase/firestore-compat",jV="firebase",ZV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="[DEFAULT]",eU={[gm]:"fire-core",[IV]:"fire-core-compat",[RV]:"fire-analytics",[xV]:"fire-analytics-compat",[MV]:"fire-app-check",[NV]:"fire-app-check-compat",[DV]:"fire-auth",[PV]:"fire-auth-compat",[kV]:"fire-rtdb",[VV]:"fire-data-connect",[UV]:"fire-rtdb-compat",[LV]:"fire-fn",[OV]:"fire-fn-compat",[HV]:"fire-iid",[FV]:"fire-iid-compat",[GV]:"fire-fcm",[BV]:"fire-fcm-compat",[qV]:"fire-perf",[zV]:"fire-perf-compat",[$V]:"fire-rc",[KV]:"fire-rc-compat",[YV]:"fire-gcs",[JV]:"fire-gcs-compat",[QV]:"fire-fst",[WV]:"fire-fst-compat",[XV]:"fire-vertex","fire-js":"fire-js",[jV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new Map,tU=new Map,vm=new Map;function pE(n,e){try{n.container.addComponent(e)}catch(t){js.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Uo(n){const e=n.name;if(vm.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;vm.set(e,n);for(const t of Gd.values())pE(t,n);for(const t of tU.values())pE(t,n);return!0}function yf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ri(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new ku("app","Firebase",nU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=ZV;function JA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:ym,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw qr.create("bad-app-name",{appName:String(o)});if(t||(t=zA()),!t)throw qr.create("no-options");const a=Gd.get(o);if(a){if(Kr(t,a.options)&&Kr(i,a.config))return a;throw qr.create("duplicate-app",{appName:o})}const u=new uV(o);for(const g of vm.values())u.addComponent(g);const f=new iU(t,i,u);return Gd.set(o,f),f}function sg(n=ym){const e=Gd.get(n);if(!e&&n===ym&&zA())return JA();if(!e)throw qr.create("no-app",{appName:n});return e}function ps(n,e,t){let i=eU[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(u.join(" "));return}Uo(new Yr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="firebase-heartbeat-database",rU=1,wu="firebase-heartbeat-store";let $p=null;function QA(){return $p||($p=SV(sU,rU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wu)}catch(t){console.warn(t)}}}}).catch(n=>{throw qr.create("idb-open",{originalErrorMessage:n.message})})),$p}async function oU(n){try{const t=(await QA()).transaction(wu),i=await t.objectStore(wu).get(XA(n));return await t.done,i}catch(e){if(e instanceof bs)js.warn(e.message);else{const t=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(t.message)}}}async function mE(n,e){try{const i=(await QA()).transaction(wu,"readwrite");await i.objectStore(wu).put(e,XA(n)),await i.done}catch(t){if(t instanceof bs)js.warn(t.message);else{const i=qr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});js.warn(i.message)}}}function XA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=1024,lU=30;class uU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dU(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=gE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>lU){const u=fU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){js.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gE(),{heartbeatsToSend:i,unsentEntries:o}=cU(this._heartbeatsCache.heartbeats),a=Fd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return js.warn(t),""}}}function gE(){return new Date().toISOString().substring(0,10)}function cU(n,e=aU){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),yE(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),yE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class dU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wk()?jk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oU(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return mE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return mE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function yE(n){return Fd(JSON.stringify({version:2,heartbeats:n})).length}function fU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hU(n){Uo(new Yr("platform-logger",e=>new bV(e),"PRIVATE")),Uo(new Yr("heartbeat",e=>new uU(e),"PRIVATE")),ps(gm,hE,n),ps(gm,hE,"esm2020"),ps("fire-js","")}hU("");var pU="firebase",mU="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps(pU,mU,"app");function WA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gU=WA,jA=new ku("auth","Firebase",WA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new ng("@firebase/auth");function yU(n,...e){Bd.logLevel<=We.WARN&&Bd.warn(`Auth (${il}): ${n}`,...e)}function Cd(n,...e){Bd.logLevel<=We.ERROR&&Bd.error(`Auth (${il}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(n,...e){throw og(n,...e)}function Qi(n,...e){return og(n,...e)}function rg(n,e,t){const i={...gU(),[e]:t};return new ku("auth","Firebase",i).create(e,{appName:n.name})}function ko(n){return rg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vU(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ss(n,"argument-error"),rg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function og(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return jA.create(n,...e)}function ke(n,e,...t){if(!n)throw og(e,...t)}function Qs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Cd(e),new Error(e)}function Zs(n,e){n||Qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function _U(){return vE()==="http:"||vE()==="https:"}function vE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_U()||Yk()||"connection"in navigator)?navigator.onLine:!0}function EU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zs(t>e,"Short delay should be less than long delay!"),this.isMobile=zk()||Jk()}get(){return TU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(n,e){Zs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CU=new Uu(3e4,6e4);function lg(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function sl(n,e,t,i,o={}){return eC(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const f=Vu({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:g,...a};return Kk()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&to(n.emulatorConfig.host)&&(h.credentials="include"),ZA.fetch()(await tC(n,n.config.apiHost,t,f),h)})}async function eC(n,e,t){n._canInitEmulator=!1;const i={...SU,...e};try{const o=new wU(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw md(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const f=a.ok?u.errorMessage:u.error.message,[g,h]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw md(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw md(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw md(n,"user-disabled",u);const v=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw rg(n,v,h);Ss(n,v)}}catch(o){if(o instanceof bs)throw o;Ss(n,"network-request-failed",{message:String(o)})}}async function bU(n,e,t,i,o={}){const a=await sl(n,e,t,i,o);return"mfaPendingCredential"in a&&Ss(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function tC(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?ag(n.config,o):`${n.config.apiScheme}://${o}`;return AU.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class wU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Qi(this.auth,"network-request-failed")),CU.get())})}}function md(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Qi(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(n,e){return sl(n,"POST","/v1/accounts:delete",e)}async function qd(n,e){return sl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xU(n,e=!1){const t=rn(n),i=await t.getIdToken(e),o=ug(i);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:vu(Kp(o.auth_time)),issuedAtTime:vu(Kp(o.iat)),expirationTime:vu(Kp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Kp(n){return Number(n)*1e3}function ug(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Cd("JWT malformed, contained fewer than 3 sections"),null;try{const o=GA(t);return o?JSON.parse(o):(Cd("Failed to decode base64 JWT payload"),null)}catch(o){return Cd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function _E(n){const e=ug(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof bs&&RU(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function RU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zd(n){var T;const e=n.auth,t=await n.getIdToken(),i=await Iu(n,qd(e,{idToken:t}));ke(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(T=o.providerUserInfo)!=null&&T.length?nC(o.providerUserInfo):[],u=DU(n.providerData,a),f=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=f?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Tm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,v)}async function MU(n){const e=rn(n);await zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DU(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function nC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e){const t=await eC(n,{},async()=>{const i=Vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await tC(n,o,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return n.emulatorConfig&&to(n.emulatorConfig.host)&&(g.credentials="include"),ZA.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kU(n,e){return sl(n,"POST","/v2/accounts:revokeToken",lg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=_E(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await PU(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Ha;return i&&(ke(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(ke(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(ke(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ha,this.toJSON())}_performRefresh(){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ki{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new NU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Iu(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xU(this,e)}reload(){return MU(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ki({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await zd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ri(this.auth.app))return Promise.reject(ko(this.auth));const e=await this.getIdToken();return await Iu(this,IU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,h=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:w,providerData:V,stsTokenManager:k}=t;ke(T&&k,e,"internal-error");const P=Ha.fromJSON(this.name,k);ke(typeof T=="string",e,"internal-error"),Ur(i,e.name),Ur(o,e.name),ke(typeof S=="boolean",e,"internal-error"),ke(typeof w=="boolean",e,"internal-error"),Ur(a,e.name),Ur(u,e.name),Ur(f,e.name),Ur(g,e.name),Ur(h,e.name),Ur(v,e.name);const $=new Ki({uid:T,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:a,tenantId:f,stsTokenManager:P,createdAt:h,lastLoginAt:v});return V&&Array.isArray(V)&&($.providerData=V.map(F=>({...F}))),g&&($._redirectEventId=g),$}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ha;o.updateFromServerResponse(t);const a=new Ki({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await zd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?nC(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),f=new Ha;f.updateFromIdToken(i);const g=new Ki({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Tm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(g,h),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new Map;function Xs(n){Zs(n instanceof Function,"Expected a class definition");let e=TE.get(n);return e?(Zs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,TE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iC.type="NONE";const EE=iC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(n,e,t){return`firebase:${n}:${e}:${t}`}class Fa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=bd(this.userKey,o.apiKey,a),this.fullPersistenceKey=bd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await qd(this.auth,{idToken:e}).catch(()=>{});return t?Ki._fromGetAccountInfoResponse(this.auth,t,e):null}return Ki._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Fa(Xs(EE),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||Xs(EE);const u=bd(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const v=await h._get(u);if(v){let T;if(typeof v=="string"){const S=await qd(e,{idToken:v}).catch(()=>{});if(!S)break;T=await Ki._fromGetAccountInfoResponse(e,S,v)}else T=Ki._fromJSON(e,v);h!==a&&(f=T),a=h;break}}catch{}const g=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!g.length?new Fa(a,e,i):(a=g[0],f&&await a._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new Fa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uC(e))return"Blackberry";if(cC(e))return"Webos";if(rC(e))return"Safari";if((e.includes("chrome/")||oC(e))&&!e.includes("edge/"))return"Chrome";if(lC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function sC(n=Rn()){return/firefox\//i.test(n)}function rC(n=Rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oC(n=Rn()){return/crios\//i.test(n)}function aC(n=Rn()){return/iemobile/i.test(n)}function lC(n=Rn()){return/android/i.test(n)}function uC(n=Rn()){return/blackberry/i.test(n)}function cC(n=Rn()){return/webos/i.test(n)}function cg(n=Rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VU(n=Rn()){var e;return cg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function UU(){return Qk()&&document.documentMode===10}function dC(n=Rn()){return cg(n)||lC(n)||cC(n)||uC(n)||/windows phone/i.test(n)||aC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(n,e=[]){let t;switch(n){case"Browser":t=SE(Rn());break;case"Worker":t=`${SE(Rn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${il}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,f)=>{try{const g=e(a);u(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(n,e={}){return sl(n,"GET","/v2/passwordPolicy",lg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=6;class FU{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??HU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AE(this),this.idTokenSubscription=new AE(this),this.beforeStateQueue=new LU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Fa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qd(this,{idToken:e}),i=await Ki._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Ri(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===f)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ri(this.app))return Promise.reject(ko(this));const t=e?rn(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ri(this.app)?Promise.reject(ko(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ri(this.app)?Promise.reject(ko(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OU(this),t=new FU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ku("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await kU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xs(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Fa.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&yU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vf(n){return rn(n)}class AE{constructor(e){this.auth=e,this.observer=null,this.addObserver=iV(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BU(n){dg=n}function qU(n){return dg.loadJS(n)}function zU(){return dg.gapiScript}function $U(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(n,e){const t=yf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Kr(a,e??{}))return o;Ss(o,"already-initialized")}return t.initialize({options:e})}function YU(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Xs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function JU(n,e,t){const i=vf(n);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=hC(e),{host:u,port:f}=QU(e),g=f===null?"":`:${f}`,h={url:`${a}//${u}${g}/`},v=Object.freeze({host:u,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(Kr(h,i.config.emulator)&&Kr(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,to(u)?(eg(`${a}//${u}${g}`),tg("Auth",!0)):XU()}function hC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QU(n){const e=hC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:CE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:CE(u)}}}function CE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function XU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qs("not implemented")}_getIdTokenResponse(e){return Qs("not implemented")}_linkToIdToken(e,t){return Qs("not implemented")}_getReauthenticationResolver(e){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(n,e){return bU(n,"POST","/v1/accounts:signInWithIdp",lg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU="http://localhost";class Lo extends pC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ss("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new Lo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ga(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ga(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ga(e,t)}buildRequest(){const e={requestUri:WU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends fg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Lu{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Lo._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Js.credential(t,i)}catch{return null}}}Js.GOOGLE_SIGN_IN_METHOD="google.com";Js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Lu{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Lu{constructor(){super("twitter.com")}static credential(e,t){return Lo._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Hr.credential(t,i)}catch{return null}}}Hr.TWITTER_SIGN_IN_METHOD="twitter.com";Hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Ki._fromIdTokenResponse(e,i,o),u=bE(i);return new za({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=bE(i);return new za({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function bE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends bs{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,$d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new $d(e,t,i,o)}}function mC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?$d._fromErrorAndOperation(n,a,e,i):a})}async function jU(n,e,t=!1){const i=await Iu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return za._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZU(n,e,t=!1){const{auth:i}=n;if(Ri(i.app))return Promise.reject(ko(i));const o="reauthenticate";try{const a=await Iu(n,mC(i,o,e,n),t);ke(a.idToken,i,"internal-error");const u=ug(a.idToken);ke(u,i,"internal-error");const{sub:f}=u;return ke(n.uid===f,i,"user-mismatch"),za._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ss(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(n,e,t=!1){if(Ri(n.app))return Promise.reject(ko(n));const i="signIn",o=await mC(n,i,e),a=await za._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}function tL(n,e,t,i){return rn(n).onIdTokenChanged(e,t,i)}function nL(n,e,t){return rn(n).beforeAuthStateChanged(e,t)}function iL(n,e,t,i){return rn(n).onAuthStateChanged(e,t,i)}function sL(n){return rn(n).signOut()}const Kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kd,"1"),this.storage.removeItem(Kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=1e3,oL=10;class yC extends gC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);UU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oL):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},rL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yC.type="LOCAL";const aL=yC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC extends gC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vC.type="SESSION";const _C=vC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new _f(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(u).map(async h=>h(t.origin,a)),g=await lL(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((f,g)=>{const h=hg("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(S.data.response);break;default:clearTimeout(v),clearTimeout(a),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return window}function cL(n){ms().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(){return typeof ms().WorkerGlobalScope<"u"&&typeof ms().importScripts=="function"}async function dL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function hL(){return TC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="firebaseLocalStorageDb",pL=1,Yd="firebaseLocalStorage",SC="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tf(n,e){return n.transaction([Yd],e?"readwrite":"readonly").objectStore(Yd)}function mL(){const n=indexedDB.deleteDatabase(EC);return new Ou(n).toPromise()}function Em(){const n=indexedDB.open(EC,pL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Yd,{keyPath:SC})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Yd)?e(i):(i.close(),await mL(),e(await Em()))})})}async function wE(n,e,t){const i=Tf(n,!0).put({[SC]:e,value:t});return new Ou(i).toPromise()}async function gL(n,e){const t=Tf(n,!1).get(e),i=await new Ou(t).toPromise();return i===void 0?null:i.value}function IE(n,e){const t=Tf(n,!0).delete(e);return new Ou(t).toPromise()}const yL=800,vL=3;class AC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>vL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_f._getInstance(hL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await dL(),!this.activeServiceWorker)return;this.sender=new uL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await wE(e,Kd,"1"),await IE(e,Kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>wE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>gL(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>IE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Tf(o,!1).getAll();return new Ou(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AC.type="LOCAL";const _L=AC;new Uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n,e){return e?Xs(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends pC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ga(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function TL(n){return eL(n.auth,new pg(n),n.bypassAuthState)}function EL(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),ZU(t,new pg(n),n.bypassAuthState)}async function SL(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),jU(t,new pg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:f}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TL;case"linkViaPopup":case"linkViaRedirect":return SL;case"reauthViaPopup":case"reauthViaRedirect":return EL;default:Ss(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new Uu(2e3,1e4);async function CL(n,e,t){if(Ri(n.app))return Promise.reject(Qi(n,"operation-not-supported-in-this-environment"));const i=vf(n);vU(n,e,fg);const o=CC(i,t);return new Do(i,"signInViaPopup",e,o).executeNotNull()}class Do extends bC{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AL.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="pendingRedirect",wd=new Map;class wL extends bC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=wd.get(this.auth._key());if(!e){try{const i=await IL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}wd.set(this.auth._key(),e)}return this.bypassAuthState||wd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IL(n,e){const t=NL(e),i=RL(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function xL(n,e){wd.set(n._key(),e)}function RL(n){return Xs(n._redirectPersistence)}function NL(n){return bd(bL,n.config.apiKey,n.name)}async function ML(n,e,t=!1){if(Ri(n.app))return Promise.reject(ko(n));const i=vf(n),o=CC(i,e),u=await new wL(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=600*1e3;class PL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!wC(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DL&&this.cachedEventUids.clear(),this.cachedEventUids.has(xE(e))}saveEventToCache(e){this.cachedEventUids.add(xE(e)),this.lastProcessedEventTime=Date.now()}}function xE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(n,e={}){return sl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LL=/^https?/;async function OL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await VL(n);for(const t of e)try{if(HL(t))return}catch{}Ss(n,"unauthorized-domain")}function HL(n){const e=_m(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!LL.test(t))return!1;if(UL.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=new Uu(3e4,6e4);function RE(){const n=ms().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function GL(n){return new Promise((e,t)=>{var o,a,u;function i(){RE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RE(),t(Qi(n,"network-request-failed"))},timeout:FL.get()})}if((a=(o=ms().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=ms().gapi)!=null&&u.load)i();else{const f=$U("iframefcb");return ms()[f]=()=>{gapi.load?i():t(Qi(n,"network-request-failed"))},qU(`${zU()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Id=null,e})}let Id=null;function BL(n){return Id=Id||GL(n),Id}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new Uu(5e3,15e3),zL="__/auth/iframe",$L="emulator/auth/iframe",KL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JL(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ag(e,$L):`https://${n.config.authDomain}/${zL}`,i={apiKey:e.apiKey,appName:n.name,v:il},o=YL.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Vu(i).slice(1)}`}async function QL(n){const e=await BL(n),t=ms().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:JL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KL,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Qi(n,"network-request-failed"),f=ms().setTimeout(()=>{a(u)},qL.get());function g(){ms().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WL=500,jL=600,ZL="_blank",e4="http://localhost";class NE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t4(n,e,t,i=WL,o=jL){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...XL,width:i.toString(),height:o.toString(),top:a,left:u},h=Rn().toLowerCase();t&&(f=oC(h)?ZL:t),sC(h)&&(e=e||e4,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[w,V])=>`${S}${w}=${V},`,"");if(VU(h)&&f!=="_self")return n4(e||"",f),new NE(null);const T=window.open(e||"",f,v);ke(T,n,"popup-blocked");try{T.focus()}catch{}return new NE(T)}function n4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4="__/auth/handler",s4="emulator/auth/handler",r4=encodeURIComponent("fac");async function ME(n,e,t,i,o,a){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:il,eventId:o};if(e instanceof fg){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",nV(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof Lu){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await n._getAppCheckToken(),h=g?`#${r4}=${encodeURIComponent(g)}`:"";return`${o4(n)}?${Vu(f).slice(1)}${h}`}function o4({config:n}){return n.emulator?ag(n,s4):`https://${n.authDomain}/${i4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="webStorageSupport";class a4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_C,this._completeRedirectFn=ML,this._overrideRedirectResult=xL}async _openPopup(e,t,i,o){var u;Zs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await ME(e,t,i,_m(),o);return t4(e,a,hg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await ME(e,t,i,_m(),o);return cL(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Zs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await QL(e),i=new PL(e);return t.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yp,{type:Yp},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[Yp];a!==void 0&&t(!!a),Ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=OL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dC()||rC()||cg()}}const l4=a4;var DE="@firebase/auth",PE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d4(n){Uo(new Yr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;ke(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fC(n)},h=new GU(i,o,a,g);return YU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Uo(new Yr("auth-internal",e=>{const t=vf(e.getProvider("auth").getImmediate());return(i=>new u4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ps(DE,PE,c4(n)),ps(DE,PE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=300,h4=$A("authIdTokenMaxAge")||f4;let kE=null;const p4=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>h4)return;const o=t==null?void 0:t.token;kE!==o&&(kE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function m4(n=sg()){const e=yf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=KU(n,{popupRedirectResolver:l4,persistence:[_L,aL,_C]}),i=$A("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=p4(a.toString());nL(t,u,()=>u(t.currentUser)),tL(t,f=>u(f))}}const o=BA("auth");return o&&JU(t,`http://${o}`),t}function g4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}BU({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Qi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",g4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d4("Browser");var VE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zr,IC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function R(){}R.prototype=N.prototype,M.F=N.prototype,M.prototype=new R,M.prototype.constructor=M,M.D=function(H,O,q){for(var D=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)D[Me-2]=arguments[Me];return N.prototype[O].apply(H,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,N,R){R||(R=0);const H=Array(16);if(typeof N=="string")for(var O=0;O<16;++O)H[O]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(O=0;O<16;++O)H[O]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=M.g[0],R=M.g[1],O=M.g[2];let q=M.g[3],D;D=N+(q^R&(O^q))+H[0]+3614090360&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(O^N&(R^O))+H[1]+3905402710&4294967295,q=N+(D<<12&4294967295|D>>>20),D=O+(R^q&(N^R))+H[2]+606105819&4294967295,O=q+(D<<17&4294967295|D>>>15),D=R+(N^O&(q^N))+H[3]+3250441966&4294967295,R=O+(D<<22&4294967295|D>>>10),D=N+(q^R&(O^q))+H[4]+4118548399&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(O^N&(R^O))+H[5]+1200080426&4294967295,q=N+(D<<12&4294967295|D>>>20),D=O+(R^q&(N^R))+H[6]+2821735955&4294967295,O=q+(D<<17&4294967295|D>>>15),D=R+(N^O&(q^N))+H[7]+4249261313&4294967295,R=O+(D<<22&4294967295|D>>>10),D=N+(q^R&(O^q))+H[8]+1770035416&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(O^N&(R^O))+H[9]+2336552879&4294967295,q=N+(D<<12&4294967295|D>>>20),D=O+(R^q&(N^R))+H[10]+4294925233&4294967295,O=q+(D<<17&4294967295|D>>>15),D=R+(N^O&(q^N))+H[11]+2304563134&4294967295,R=O+(D<<22&4294967295|D>>>10),D=N+(q^R&(O^q))+H[12]+1804603682&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(O^N&(R^O))+H[13]+4254626195&4294967295,q=N+(D<<12&4294967295|D>>>20),D=O+(R^q&(N^R))+H[14]+2792965006&4294967295,O=q+(D<<17&4294967295|D>>>15),D=R+(N^O&(q^N))+H[15]+1236535329&4294967295,R=O+(D<<22&4294967295|D>>>10),D=N+(O^q&(R^O))+H[1]+4129170786&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^O&(N^R))+H[6]+3225465664&4294967295,q=N+(D<<9&4294967295|D>>>23),D=O+(N^R&(q^N))+H[11]+643717713&4294967295,O=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(O^q))+H[0]+3921069994&4294967295,R=O+(D<<20&4294967295|D>>>12),D=N+(O^q&(R^O))+H[5]+3593408605&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^O&(N^R))+H[10]+38016083&4294967295,q=N+(D<<9&4294967295|D>>>23),D=O+(N^R&(q^N))+H[15]+3634488961&4294967295,O=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(O^q))+H[4]+3889429448&4294967295,R=O+(D<<20&4294967295|D>>>12),D=N+(O^q&(R^O))+H[9]+568446438&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^O&(N^R))+H[14]+3275163606&4294967295,q=N+(D<<9&4294967295|D>>>23),D=O+(N^R&(q^N))+H[3]+4107603335&4294967295,O=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(O^q))+H[8]+1163531501&4294967295,R=O+(D<<20&4294967295|D>>>12),D=N+(O^q&(R^O))+H[13]+2850285829&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^O&(N^R))+H[2]+4243563512&4294967295,q=N+(D<<9&4294967295|D>>>23),D=O+(N^R&(q^N))+H[7]+1735328473&4294967295,O=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(O^q))+H[12]+2368359562&4294967295,R=O+(D<<20&4294967295|D>>>12),D=N+(R^O^q)+H[5]+4294588738&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^O)+H[8]+2272392833&4294967295,q=N+(D<<11&4294967295|D>>>21),D=O+(q^N^R)+H[11]+1839030562&4294967295,O=q+(D<<16&4294967295|D>>>16),D=R+(O^q^N)+H[14]+4259657740&4294967295,R=O+(D<<23&4294967295|D>>>9),D=N+(R^O^q)+H[1]+2763975236&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^O)+H[4]+1272893353&4294967295,q=N+(D<<11&4294967295|D>>>21),D=O+(q^N^R)+H[7]+4139469664&4294967295,O=q+(D<<16&4294967295|D>>>16),D=R+(O^q^N)+H[10]+3200236656&4294967295,R=O+(D<<23&4294967295|D>>>9),D=N+(R^O^q)+H[13]+681279174&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^O)+H[0]+3936430074&4294967295,q=N+(D<<11&4294967295|D>>>21),D=O+(q^N^R)+H[3]+3572445317&4294967295,O=q+(D<<16&4294967295|D>>>16),D=R+(O^q^N)+H[6]+76029189&4294967295,R=O+(D<<23&4294967295|D>>>9),D=N+(R^O^q)+H[9]+3654602809&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^O)+H[12]+3873151461&4294967295,q=N+(D<<11&4294967295|D>>>21),D=O+(q^N^R)+H[15]+530742520&4294967295,O=q+(D<<16&4294967295|D>>>16),D=R+(O^q^N)+H[2]+3299628645&4294967295,R=O+(D<<23&4294967295|D>>>9),D=N+(O^(R|~q))+H[0]+4096336452&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~O))+H[7]+1126891415&4294967295,q=N+(D<<10&4294967295|D>>>22),D=O+(N^(q|~R))+H[14]+2878612391&4294967295,O=q+(D<<15&4294967295|D>>>17),D=R+(q^(O|~N))+H[5]+4237533241&4294967295,R=O+(D<<21&4294967295|D>>>11),D=N+(O^(R|~q))+H[12]+1700485571&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~O))+H[3]+2399980690&4294967295,q=N+(D<<10&4294967295|D>>>22),D=O+(N^(q|~R))+H[10]+4293915773&4294967295,O=q+(D<<15&4294967295|D>>>17),D=R+(q^(O|~N))+H[1]+2240044497&4294967295,R=O+(D<<21&4294967295|D>>>11),D=N+(O^(R|~q))+H[8]+1873313359&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~O))+H[15]+4264355552&4294967295,q=N+(D<<10&4294967295|D>>>22),D=O+(N^(q|~R))+H[6]+2734768916&4294967295,O=q+(D<<15&4294967295|D>>>17),D=R+(q^(O|~N))+H[13]+1309151649&4294967295,R=O+(D<<21&4294967295|D>>>11),D=N+(O^(R|~q))+H[4]+4149444226&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~O))+H[11]+3174756917&4294967295,q=N+(D<<10&4294967295|D>>>22),D=O+(N^(q|~R))+H[2]+718787259&4294967295,O=q+(D<<15&4294967295|D>>>17),D=R+(q^(O|~N))+H[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+q&4294967295}i.prototype.v=function(M,N){N===void 0&&(N=M.length);const R=N-this.blockSize,H=this.C;let O=this.h,q=0;for(;q<N;){if(O==0)for(;q<=R;)o(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<N;)if(H[O++]=M.charCodeAt(q++),O==this.blockSize){o(this,H),O=0;break}}else for(;q<N;)if(H[O++]=M[q++],O==this.blockSize){o(this,H),O=0;break}}this.h=O,this.o+=N},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;N=this.o*8;for(var R=M.length-8;R<M.length;++R)M[R]=N&255,N/=256;for(this.v(M),M=Array(16),N=0,R=0;R<4;++R)for(let H=0;H<32;H+=8)M[N++]=this.g[R]>>>H&255;return M};function a(M,N){var R=f;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=N(M)}function u(M,N){this.h=N;const R=[];let H=!0;for(let O=M.length-1;O>=0;O--){const q=M[O]|0;H&&q==N||(R[O]=q,H=!1)}this.g=R}var f={};function g(M){return-128<=M&&M<128?a(M,function(N){return new u([N|0],N<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return P(h(-M));const N=[];let R=1;for(let H=0;M>=R;H++)N[H]=M/R|0,R*=4294967296;return new u(N,0)}function v(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return P(v(M.substring(1),N));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(N,8));let H=T;for(let q=0;q<M.length;q+=8){var O=Math.min(8,M.length-q);const D=parseInt(M.substring(q,q+O),N);O<8?(O=h(Math.pow(N,O)),H=H.j(O).add(h(D))):(H=H.j(R),H=H.add(h(D)))}return H}var T=g(0),S=g(1),w=g(16777216);n=u.prototype,n.m=function(){if(k(this))return-P(this).m();let M=0,N=1;for(let R=0;R<this.g.length;R++){const H=this.i(R);M+=(H>=0?H:4294967296+H)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(V(this))return"0";if(k(this))return"-"+P(this).toString(M);const N=h(Math.pow(M,6));var R=this;let H="";for(;;){const O=re(R,N).g;R=$(R,O.j(N));let q=((R.g.length>0?R.g[0]:R.h)>>>0).toString(M);if(R=O,V(R))return q+H;for(;q.length<6;)q="0"+q;H=q+H}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function V(M){if(M.h!=0)return!1;for(let N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function k(M){return M.h==-1}n.l=function(M){return M=$(this,M),k(M)?-1:V(M)?0:1};function P(M){const N=M.g.length,R=[];for(let H=0;H<N;H++)R[H]=~M.g[H];return new u(R,~M.h).add(S)}n.abs=function(){return k(this)?P(this):this},n.add=function(M){const N=Math.max(this.g.length,M.g.length),R=[];let H=0;for(let O=0;O<=N;O++){let q=H+(this.i(O)&65535)+(M.i(O)&65535),D=(q>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);H=D>>>16,q&=65535,D&=65535,R[O]=D<<16|q}return new u(R,R[R.length-1]&-2147483648?-1:0)};function $(M,N){return M.add(P(N))}n.j=function(M){if(V(this)||V(M))return T;if(k(this))return k(M)?P(this).j(P(M)):P(P(this).j(M));if(k(M))return P(this.j(P(M)));if(this.l(w)<0&&M.l(w)<0)return h(this.m()*M.m());const N=this.g.length+M.g.length,R=[];for(var H=0;H<2*N;H++)R[H]=0;for(H=0;H<this.g.length;H++)for(let O=0;O<M.g.length;O++){const q=this.i(H)>>>16,D=this.i(H)&65535,Me=M.i(O)>>>16,ft=M.i(O)&65535;R[2*H+2*O]+=D*ft,F(R,2*H+2*O),R[2*H+2*O+1]+=q*ft,F(R,2*H+2*O+1),R[2*H+2*O+1]+=D*Me,F(R,2*H+2*O+1),R[2*H+2*O+2]+=q*Me,F(R,2*H+2*O+2)}for(M=0;M<N;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=N;M<2*N;M++)R[M]=0;return new u(R,0)};function F(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function ee(M,N){this.g=M,this.h=N}function re(M,N){if(V(N))throw Error("division by zero");if(V(M))return new ee(T,T);if(k(M))return N=re(P(M),N),new ee(P(N.g),P(N.h));if(k(N))return N=re(M,P(N)),new ee(P(N.g),N.h);if(M.g.length>30){if(k(M)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var R=S,H=N;H.l(M)<=0;)R=ce(R),H=ce(H);var O=pe(R,1),q=pe(H,1);for(H=pe(H,2),R=pe(R,2);!V(H);){var D=q.add(H);D.l(M)<=0&&(O=O.add(R),q=D),H=pe(H,1),R=pe(R,1)}return N=$(M,O.j(N)),new ee(O,N)}for(O=T;M.l(N)>=0;){for(R=Math.max(1,Math.floor(M.m()/N.m())),H=Math.ceil(Math.log(R)/Math.LN2),H=H<=48?1:Math.pow(2,H-48),q=h(R),D=q.j(N);k(D)||D.l(M)>0;)R-=H,q=h(R),D=q.j(N);V(q)&&(q=S),O=O.add(q),M=$(M,D)}return new ee(O,M)}n.B=function(M){return re(this,M).h},n.and=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let H=0;H<N;H++)R[H]=this.i(H)&M.i(H);return new u(R,this.h&M.h)},n.or=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let H=0;H<N;H++)R[H]=this.i(H)|M.i(H);return new u(R,this.h|M.h)},n.xor=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let H=0;H<N;H++)R[H]=this.i(H)^M.i(H);return new u(R,this.h^M.h)};function ce(M){const N=M.g.length+1,R=[];for(let H=0;H<N;H++)R[H]=M.i(H)<<1|M.i(H-1)>>>31;return new u(R,M.h)}function pe(M,N){const R=N>>5;N%=32;const H=M.g.length-R,O=[];for(let q=0;q<H;q++)O[q]=N>0?M.i(q+R)>>>N|M.i(q+R+1)<<32-N:M.i(q+R);return new u(O,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,IC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,zr=u}).apply(typeof VE<"u"?VE:typeof self<"u"?self:typeof window<"u"?window:{});var gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xC,fu,RC,xd,Sm,NC,MC,DC;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof gd=="object"&&gd];for(var E=0;E<m.length;++E){var b=m[E];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function o(m,E){if(E)e:{var b=i;m=m.split(".");for(var x=0;x<m.length-1;x++){var K=m[x];if(!(K in b))break e;b=b[K]}m=m[m.length-1],x=b[m],E=E(x),E!=x&&E!=null&&e(b,m,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(E){var b=[],x;for(x in E)Object.prototype.hasOwnProperty.call(E,x)&&b.push([x,E[x]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,b){return m.call.apply(m.bind,arguments)}function h(m,E,b){return h=g,h.apply(null,arguments)}function v(m,E){var b=Array.prototype.slice.call(arguments,1);return function(){var x=b.slice();return x.push.apply(x,arguments),m.apply(this,x)}}function T(m,E){function b(){}b.prototype=E.prototype,m.Z=E.prototype,m.prototype=new b,m.prototype.constructor=m,m.Ob=function(x,K,X){for(var he=Array(arguments.length-2),He=2;He<arguments.length;He++)he[He-2]=arguments[He];return E.prototype[K].apply(x,he)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const E=m.length;if(E>0){const b=Array(E);for(let x=0;x<E;x++)b[x]=m[x];return b}return[]}function V(m,E){for(let x=1;x<arguments.length;x++){const K=arguments[x];var b=typeof K;if(b=b!="object"?b:K?Array.isArray(K)?"array":b:"null",b=="array"||b=="object"&&typeof K.length=="number"){b=m.length||0;const X=K.length||0;m.length=b+X;for(let he=0;he<X;he++)m[b+he]=K[he]}else m.push(K)}}class k{constructor(E,b){this.i=E,this.j=b,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function P(m){u.setTimeout(()=>{throw m},0)}function $(){var m=M;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class F{constructor(){this.h=this.g=null}add(E,b){const x=ee.get();x.set(E,b),this.h?this.h.next=x:this.g=x,this.h=x}}var ee=new k(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,b){this.h=E,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,pe=!1,M=new F,N=()=>{const m=Promise.resolve(void 0);ce=()=>{m.then(R)}};function R(){for(var m;m=$();){try{m.h.call(m.g)}catch(b){P(b)}var E=ee;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}pe=!1}function H(){this.u=this.u,this.C=this.C}H.prototype.u=!1,H.prototype.dispose=function(){this.u||(this.u=!0,this.N())},H.prototype[Symbol.dispose]=function(){this.dispose()},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const b=()=>{};u.addEventListener("test",b,E),u.removeEventListener("test",b,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function Me(m,E){O.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(Me,O),Me.prototype.init=function(m,E){const b=this.type=m.type,x=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(b=="mouseover"?E=m.fromElement:b=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),W=0;function de(m,E,b,x,K){this.listener=m,this.proxy=null,this.src=E,this.type=b,this.capture=!!x,this.ha=K,this.key=++W,this.da=this.fa=!1}function _e(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ge(m,E,b){for(const x in m)E.call(b,m[x],x,m)}function Ke(m,E){for(const b in m)E.call(void 0,m[b],b,m)}function G(m){const E={};for(const b in m)E[b]=m[b];return E}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(m,E){let b,x;for(let K=1;K<arguments.length;K++){x=arguments[K];for(b in x)m[b]=x[b];for(let X=0;X<j.length;X++)b=j[X],Object.prototype.hasOwnProperty.call(x,b)&&(m[b]=x[b])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,E,b,x,K){const X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);const he=Ie(m,E,x,K);return he>-1?(E=m[he],b||(E.fa=!1)):(E=new de(E,this.src,X,!!x,K),E.fa=b,m.push(E)),E};function we(m,E){const b=E.type;if(b in m.g){var x=m.g[b],K=Array.prototype.indexOf.call(x,E,void 0),X;(X=K>=0)&&Array.prototype.splice.call(x,K,1),X&&(_e(E),m.g[b].length==0&&(delete m.g[b],m.h--))}}function Ie(m,E,b,x){for(let K=0;K<m.length;++K){const X=m[K];if(!X.da&&X.listener==E&&X.capture==!!b&&X.ha==x)return K}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),ht={};function lt(m,E,b,x,K){if(Array.isArray(E)){for(let X=0;X<E.length;X++)lt(m,E[X],b,x,K);return null}return b=ki(b),m&&m[ft]?m.J(E,b,f(x)?!!x.capture:!1,K):Nn(m,E,b,!1,x,K)}function Nn(m,E,b,x,K,X){if(!E)throw Error("Invalid event type");const he=f(K)?!!K.capture:!!K;let He=Mn(m);if(He||(m[Be]=He=new me(m)),b=He.add(E,b,x,he,X),b.proxy)return b;if(x=pi(),b.proxy=x,x.src=m,x.listener=b,m.addEventListener)q||(K=he),K===void 0&&(K=!1),m.addEventListener(E.toString(),x,K);else if(m.attachEvent)m.attachEvent(Sn(E.toString()),x);else if(m.addListener&&m.removeListener)m.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return b}function pi(){function m(b){return E.call(m.src,m.listener,b)}const E=Pi;return m}function ti(m,E,b,x,K){if(Array.isArray(E))for(var X=0;X<E.length;X++)ti(m,E[X],b,x,K);else x=f(x)?!!x.capture:!!x,b=ki(b),m&&m[ft]?(m=m.i,X=String(E).toString(),X in m.g&&(E=m.g[X],b=Ie(E,b,x,K),b>-1&&(_e(E[b]),Array.prototype.splice.call(E,b,1),E.length==0&&(delete m.g[X],m.h--)))):m&&(m=Mn(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Ie(E,b,x,K)),(b=m>-1?E[m]:null)&&mi(b))}function mi(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[ft])we(E.i,m);else{var b=m.type,x=m.proxy;E.removeEventListener?E.removeEventListener(b,x,m.capture):E.detachEvent?E.detachEvent(Sn(b),x):E.addListener&&E.removeListener&&E.removeListener(x),(b=Mn(E))?(we(b,m),b.h==0&&(b.src=null,E[Be]=null)):_e(m)}}}function Sn(m){return m in ht?ht[m]:ht[m]="on"+m}function Pi(m,E){if(m.da)m=!0;else{E=new Me(E,this);const b=m.listener,x=m.ha||m.src;m.fa&&mi(m),m=b.call(x,E)}return m}function Mn(m){return m=m[Be],m instanceof me?m:null}var Wi="__closure_events_fn_"+(Math.random()*1e9>>>0);function ki(m){return typeof m=="function"?m:(m[Wi]||(m[Wi]=function(E){return m.handleEvent(E)}),m[Wi])}function nt(){H.call(this),this.i=new me(this),this.M=this,this.G=null}T(nt,H),nt.prototype[ft]=!0,nt.prototype.removeEventListener=function(m,E,b,x){ti(this,m,E,b,x)};function pt(m,E){var b,x=m.G;if(x)for(b=[];x;x=x.G)b.push(x);if(m=m.M,x=E.type||E,typeof E=="string")E=new O(E,m);else if(E instanceof O)E.target=E.target||m;else{var K=E;E=new O(x,m),ue(E,K)}K=!0;let X,he;if(b)for(he=b.length-1;he>=0;he--)X=E.g=b[he],K=Fn(X,x,!0,E)&&K;if(X=E.g=m,K=Fn(X,x,!0,E)&&K,K=Fn(X,x,!1,E)&&K,b)for(he=0;he<b.length;he++)X=E.g=b[he],K=Fn(X,x,!1,E)&&K}nt.prototype.N=function(){if(nt.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const b=m.g[E];for(let x=0;x<b.length;x++)_e(b[x]);delete m.g[E],m.h--}}this.G=null},nt.prototype.J=function(m,E,b,x){return this.i.add(String(m),E,!1,b,x)},nt.prototype.K=function(m,E,b,x){return this.i.add(String(m),E,!0,b,x)};function Fn(m,E,b,x){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let K=!0;for(let X=0;X<E.length;++X){const he=E[X];if(he&&!he.da&&he.capture==b){const He=he.listener,Ft=he.ha||he.src;he.fa&&we(m.i,he),K=He.call(Ft,x)!==!1&&K}}return K&&!x.defaultPrevented}function ji(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function Gn(m){m.g=ji(()=>{m.g=null,m.i&&(m.i=!1,Gn(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class Ot extends H{constructor(E,b){super(),this.m=E,this.l=b,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Gn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(m){H.call(this),this.h=m,this.g={}}T(Dn,H);var Zi=[];function Vi(m){Ge(m.g,function(E,b){this.g.hasOwnProperty(b)&&mi(E)},m),m.g={}}Dn.prototype.N=function(){Dn.Z.N.call(this),Vi(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pn=u.JSON.stringify,sr=u.JSON.parse,so=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ws(){}function Is(){}var hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mt(){O.call(this,"d")}T(Mt,O);function Zt(){O.call(this,"c")}T(Zt,O);var At={},xs=null;function Bn(){return xs=xs||new nt}At.Ia="serverreachability";function Ui(m){O.call(this,At.Ia,m)}T(Ui,O);function kn(m){const E=Bn();pt(E,new Ui(E))}At.STAT_EVENT="statevent";function Li(m,E){O.call(this,At.STAT_EVENT,m),this.stat=E}T(Li,O);function Ct(m){const E=Bn();pt(E,new Li(E,m))}At.Ja="timingevent";function qn(m,E){O.call(this,At.Ja,m),this.size=E}T(qn,O);function le(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function Ae(){this.g=!0}Ae.prototype.ua=function(){this.g=!1};function Pe(m,E,b,x,K,X){m.info(function(){if(m.g)if(X){var he="",He=X.split("&");for(let ut=0;ut<He.length;ut++){var Ft=He[ut].split("=");if(Ft.length>1){const Rt=Ft[0];Ft=Ft[1];const _i=Rt.split("_");he=_i.length>=2&&_i[1]=="type"?he+(Rt+"="+Ft+"&"):he+(Rt+"=redacted&")}}}else he=null;else he=X;return"XMLHTTP REQ ("+x+") [attempt "+K+"]: "+E+`
`+b+`
`+he})}function $e(m,E,b,x,K,X,he){m.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+K+"]: "+E+`
`+b+`
`+X+" "+he})}function it(m,E,b,x){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Vn(m,b)+(x?" "+x:"")})}function on(m,E){m.info(function(){return"TIMEOUT: "+E})}Ae.prototype.info=function(){};function Vn(m,E){if(!m.g)return E;if(!E)return null;try{const X=JSON.parse(E);if(X){for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var b=X[m];if(!(b.length<2)){var x=b[1];if(Array.isArray(x)&&!(x.length<1)){var K=x[0];if(K!="noop"&&K!="stop"&&K!="close")for(let he=1;he<x.length;he++)x[he]=""}}}}return Pn(X)}catch{return E}}var an={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},en={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bt;function Rs(){}T(Rs,ws),Rs.prototype.g=function(){return new XMLHttpRequest},bt=new Rs;function zn(m){return encodeURIComponent(String(m))}function qo(m){var E=1;m=m.split(":");const b=[];for(;E>0&&m.length;)b.push(m.shift()),E--;return m.length&&b.push(m.join(":")),b}function ni(m,E,b,x){this.j=m,this.i=E,this.l=b,this.S=x||1,this.V=new Dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ii}function ii(){this.i=null,this.g="",this.h=!1}var kt={},Ht={};function si(m,E,b){m.M=1,m.A=ro($t(E)),m.u=b,m.R=!0,Vt(m,null)}function Vt(m,E){m.F=Date.now(),Ne(m),m.B=$t(m.A);var b=m.B,x=m.S;Array.isArray(x)||(x=[String(x)]),Ko(b.i,"t",x),m.C=0,b=m.j.L,m.h=new ii,m.g=ic(m.j,b?E:null,!m.u),m.P>0&&(m.O=new Ot(h(m.Y,m,m.g),m.P)),E=m.V,b=m.g,x=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(Zi[0]=K.toString()),K=Zi);for(let X=0;X<K.length;X++){const he=lt(b,K[X],x||E.handleEvent,!1,E.h||E);if(!he)break;E.g[he.key]=he}E=m.J?G(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),kn(),Pe(m.i,m.v,m.B,m.l,m.S,m.u)}ni.prototype.ba=function(m){m=m.target;const E=this.O;E&&Fi(m)==3?E.j():this.Y(m)},ni.prototype.Y=function(m){try{if(m==this.g)e:{const He=Fi(this.g),Ft=this.g.ya(),ut=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||pn(this.g)))){this.K||He!=4||Ft==7||(Ft==8||ut<=0?kn(3):kn(2)),st(this);var E=this.g.ca();this.X=E;var b=U(this);if(this.o=E==200,$e(this.i,this.v,this.B,this.l,this.S,He,E),this.o){if(this.U&&!this.L){t:{if(this.g){var x,K=this.g;if((x=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(x)){var X=x;break t}}X=null}if(m=X)it(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,m);else{this.o=!1,this.m=3,Ct(12),ln(this),An(this);break e}}if(this.R){m=!0;let Rt;for(;!this.K&&this.C<b.length;)if(Rt=Ee(this,b),Rt==Ht){He==4&&(this.m=4,Ct(14),m=!1),it(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==kt){this.m=4,Ct(15),it(this.i,this.l,b,"[Invalid Chunk]"),m=!1;break}else it(this.i,this.l,Rt,null),gi(this,Rt);if(fe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||b.length!=0||this.h.h||(this.m=1,Ct(16),m=!1),this.o=this.o&&m,!m)it(this.i,this.l,b,"[Invalid Chunked Response]"),ln(this),An(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Al(he),he.P=!0,Ct(11))}}else it(this.i,this.l,b,null),gi(this,b);He==4&&ln(this),this.o&&!this.K&&(He==4?Zu(this.j,this):(this.o=!1,Ne(this)))}else Ms(this.g),E==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),ln(this),An(this)}}}catch{}finally{}};function U(m){if(!fe(m))return m.g.la();const E=pn(m.g);if(E==="")return"";let b="";const x=E.length,K=Fi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return ln(m),An(m),"";m.h.i=new u.TextDecoder}for(let X=0;X<x;X++)m.h.h=!0,b+=m.h.i.decode(E[X],{stream:!(K&&X==x-1)});return E.length=0,m.h.g+=b,m.C=0,m.h.g}function fe(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Ee(m,E){var b=m.C,x=E.indexOf(`
`,b);return x==-1?Ht:(b=Number(E.substring(b,x)),isNaN(b)?kt:(x+=1,x+b>E.length?Ht:(E=E.slice(x,x+b),m.C=x+b,E)))}ni.prototype.cancel=function(){this.K=!0,ln(this)};function Ne(m){m.T=Date.now()+m.H,be(m,m.H)}function be(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=le(h(m.aa,m),E)}function st(m){m.D&&(u.clearTimeout(m.D),m.D=null)}ni.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(on(this.i,this.B),this.M!=2&&(kn(),Ct(17)),ln(this),this.m=2,An(this)):be(this,this.T-m)};function An(m){m.j.I==0||m.K||Zu(m.j,m)}function ln(m){st(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Vi(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function gi(m,E){try{var b=m.j;if(b.I!=0&&(b.g==m||ts(b.h,m))){if(!m.L&&ts(b.h,m)&&b.I==3){try{var x=b.Ba.g.parse(E)}catch{x=null}if(Array.isArray(x)&&x.length==3){var K=x;if(K[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<m.F)Wo(b),fr(b);else break e;ho(b),Ct(18)}}else b.xa=K[1],0<b.xa-b.K&&K[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=le(h(b.Va,b),6e3));es(b.h)<=1&&b.ta&&(b.ta=void 0)}else as(b,11)}else if((m.L||b.g==m)&&Wo(b),!D(E))for(K=b.Ba.g.parse(E),E=0;E<K.length;E++){let ut=K[E];const Rt=ut[0];if(!(Rt<=b.K))if(b.K=Rt,ut=ut[1],b.I==2)if(ut[0]=="c"){b.M=ut[1],b.ba=ut[2];const _i=ut[3];_i!=null&&(b.ka=_i,b.j.info("VER="+b.ka));const ls=ut[4];ls!=null&&(b.za=ls,b.j.info("SVER="+b.za));const Gi=ut[5];Gi!=null&&typeof Gi=="number"&&Gi>0&&(x=1.5*Gi,b.O=x,b.j.info("backChannelRequestTimeoutMs_="+x)),x=b;const Bi=m.g;if(Bi){const po=Bi.g?Bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(po){var X=x.h;X.g||po.indexOf("spdy")==-1&&po.indexOf("quic")==-1&&po.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(dl(X,X.h),X.h=null))}if(x.G){const jo=Bi.g?Bi.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(x.wa=jo,mt(x.J,x.G,jo))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-m.F,b.j.info("Handshake RTT: "+b.T+"ms")),x=b;var he=m;if(x.na=nc(x,x.L?x.ba:null,x.W),he.L){fl(x.h,he);var He=he,Ft=x.O;Ft&&(He.H=Ft),He.D&&(st(He),Ne(He)),x.g=he}else Wu(x);b.i.length>0&&os(b)}else ut[0]!="stop"&&ut[0]!="close"||as(b,7);else b.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?as(b,7):El(b):ut[0]!="noop"&&b.l&&b.l.qa(ut),b.A=0)}}kn(4)}catch{}}var zt=class{constructor(m,E){this.g=m,this.map=E}};function ul(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function es(m){return m.h?1:m.g?m.g.size:0}function ts(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function dl(m,E){m.g?m.g.add(E):m.h=E}function fl(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}ul.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function hl(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const b of m.g.values())E=E.concat(b.G);return E}return w(m.i)}var $u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zo(m,E){if(m){m=m.split("&");for(let b=0;b<m.length;b++){const x=m[b].indexOf("=");let K,X=null;x>=0?(K=m[b].substring(0,x),X=m[b].substring(x+1)):K=m[b],E(K,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function ri(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof ri?(this.l=m.l,un(this,m.j),this.o=m.o,this.g=m.g,rr(this,m.u),this.h=m.h,pl(this,Qu(m.i)),this.m=m.m):m&&(E=String(m).match($u))?(this.l=!1,un(this,E[1]||"",!0),this.o=ns(E[2]||""),this.g=ns(E[3]||"",!0),rr(this,E[4]),this.h=ns(E[5]||"",!0),pl(this,E[6]||"",!0),this.m=ns(E[7]||"")):(this.l=!1,this.i=new ar(null,this.l))}ri.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(oo(E,$o,!0),":");var b=this.g;return(b||E=="file")&&(m.push("//"),(E=this.o)&&m.push(oo(E,$o,!0),"@"),m.push(zn(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&m.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&m.push("/"),m.push(oo(b,b.charAt(0)=="/"?ml:Ku,!0))),(b=this.i.toString())&&m.push("?",b),(b=this.m)&&m.push("#",oo(b,Yu)),m.join("")},ri.prototype.resolve=function(m){const E=$t(this);let b=!!m.j;b?un(E,m.j):b=!!m.o,b?E.o=m.o:b=!!m.g,b?E.g=m.g:b=m.u!=null;var x=m.h;if(b)rr(E,m.u);else if(b=!!m.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var K=E.h.lastIndexOf("/");K!=-1&&(x=E.h.slice(0,K+1)+x)}if(K=x,K==".."||K==".")x="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){x=K.lastIndexOf("/",0)==0,K=K.split("/");const X=[];for(let he=0;he<K.length;){const He=K[he++];He=="."?x&&he==K.length&&X.push(""):He==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),x&&he==K.length&&X.push("")):(X.push(He),x=!0)}x=X.join("/")}else x=K}return b?E.h=x:b=m.i.toString()!=="",b?pl(E,Qu(m.i)):b=!!m.m,b&&(E.m=m.m),E};function $t(m){return new ri(m)}function un(m,E,b){m.j=b?ns(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function rr(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function pl(m,E,b){E instanceof ar?(m.i=E,Yo(m.i,m.l)):(b||(E=oo(E,or)),m.i=new ar(E,m.l))}function mt(m,E,b){m.i.set(E,b)}function ro(m){return mt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function ns(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function oo(m,E,b){return typeof m=="string"?(m=encodeURI(m).replace(E,$n),b&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function $n(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var $o=/[#\/\?@]/g,Ku=/[#\?:]/g,ml=/[#\?]/g,or=/[#\?@]/g,Yu=/#/g;function ar(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function Kn(m){m.g||(m.g=new Map,m.h=0,m.i&&zo(m.i,function(E,b){m.add(decodeURIComponent(E.replace(/\+/g," ")),b)}))}n=ar.prototype,n.add=function(m,E){Kn(this),this.i=null,m=lr(this,m);let b=this.g.get(m);return b||this.g.set(m,b=[]),b.push(E),this.h+=1,this};function Ju(m,E){Kn(m),E=lr(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function gl(m,E){return Kn(m),E=lr(m,E),m.g.has(E)}n.forEach=function(m,E){Kn(this),this.g.forEach(function(b,x){b.forEach(function(K){m.call(E,K,x,this)},this)},this)};function yl(m,E){Kn(m);let b=[];if(typeof E=="string")gl(m,E)&&(b=b.concat(m.g.get(lr(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)b=b.concat(m[E]);return b}n.set=function(m,E){return Kn(this),this.i=null,m=lr(this,m),gl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=yl(this,m),m.length>0?String(m[0]):E):E};function Ko(m,E,b){Ju(m,E),b.length>0&&(m.i=null,m.g.set(lr(m,E),w(b)),m.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let x=0;x<E.length;x++){var b=E[x];const K=zn(b);b=yl(this,b);for(let X=0;X<b.length;X++){let he=K;b[X]!==""&&(he+="="+zn(b[X])),m.push(he)}}return this.i=m.join("&")};function Qu(m){const E=new ar;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function lr(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Yo(m,E){E&&!m.j&&(Kn(m),m.i=null,m.g.forEach(function(b,x){const K=x.toLowerCase();x!=K&&(Ju(this,x),Ko(this,K,b))},m)),m.j=E}function Oi(m,E){const b=new Ae;if(u.Image){const x=new Image;x.onload=v(yi,b,"TestLoadImage: loaded",!0,E,x),x.onerror=v(yi,b,"TestLoadImage: error",!1,E,x),x.onabort=v(yi,b,"TestLoadImage: abort",!1,E,x),x.ontimeout=v(yi,b,"TestLoadImage: timeout",!1,E,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=m}else E(!1)}function vl(m,E){const b=new Ae,x=new AbortController,K=setTimeout(()=>{x.abort(),yi(b,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:x.signal}).then(X=>{clearTimeout(K),X.ok?yi(b,"TestPingServer: ok",!0,E):yi(b,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(K),yi(b,"TestPingServer: error",!1,E)})}function yi(m,E,b,x,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),x(b)}catch{}}function ur(){this.g=new so}function is(m){this.i=m.Sb||null,this.h=m.ab||!1}T(is,ws),is.prototype.g=function(){return new ao(this.i,this.h)};function ao(m,E){nt.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ao,nt),n=ao.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Hi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cr(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jo(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jo(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?cr(this):Hi(this),this.readyState==3&&Jo(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,cr(this))},n.Na=function(m){this.g&&(this.response=m,cr(this))},n.ga=function(){this.g&&cr(this)};function cr(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Hi(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var b=E.next();!b.done;)b=b.value,m.push(b[0]+": "+b[1]),b=E.next();return m.join(`\r
`)};function Hi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ao.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function vi(m){let E="";return Ge(m,function(b,x){E+=x,E+=":",E+=b,E+=`\r
`}),E}function lo(m,E,b){e:{for(x in b){var x=!1;break e}x=!0}x||(b=vi(b),typeof m=="string"?b!=null&&zn(b):mt(m,E,b))}function vt(m){nt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(vt,nt);var ss=/^https?$/i,_l=["POST","PUT"];n=vt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,b,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bt.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(X){uo(this,X);return}if(m=b||"",b=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var K in x)b.set(K,x[K]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const X of x.keys())b.set(X,x.get(X));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),K=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(_l,E,void 0)>=0)||x||K||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,he]of b)this.g.setRequestHeader(X,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(X){uo(this,X)}};function uo(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,Tl(m),Ns(m)}function Tl(m){m.A||(m.A=!0,pt(m,"complete"),pt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pt(this,"complete"),pt(this,"abort"),Ns(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ns(this,!0)),vt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?co(this):this.Xa())},n.Xa=function(){co(this)};function co(m){if(m.h&&typeof a<"u"){if(m.v&&Fi(m)==4)setTimeout(m.Ca.bind(m),0);else if(pt(m,"readystatechange"),Fi(m)==4){m.h=!1;try{const X=m.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var b;if(!(b=E)){var x;if(x=X===0){let he=String(m.D).match($u)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),x=!ss.test(he?he.toLowerCase():"")}b=x}if(b)pt(m,"complete"),pt(m,"success");else{m.o=6;try{var K=Fi(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",Tl(m)}}finally{Ns(m)}}}}function Ns(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const b=m.g;m.g=null,E||pt(m,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Fi(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Fi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),sr(E)}};function pn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ms(m){const E={};m=(m.g&&Fi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<m.length;x++){if(D(m[x]))continue;var b=qo(m[x]);const K=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=E[K]||[];E[K]=X,X.push(b)}Ke(E,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(m,E,b){return b&&b.internalChannelParams&&b.internalChannelParams[m]||E}function dr(m){this.za=0,this.i=[],this.j=new Ae,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rs("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rs("baseRetryDelayMs",5e3,m),this.Za=rs("retryDelaySeedMs",1e4,m),this.Ta=rs("forwardChannelMaxRetries",2,m),this.va=rs("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new ul(m&&m.concurrentRequestLimit),this.Ba=new ur,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=dr.prototype,n.ka=8,n.I=1,n.connect=function(m,E,b,x){Ct(0),this.W=m,this.H=E||{},b&&x!==void 0&&(this.H.OSID=b,this.H.OAID=x),this.F=this.X,this.J=nc(this,null,this.W),os(this)};function El(m){if(Qo(m),m.I==3){var E=m.V++,b=$t(m.J);if(mt(b,"SID",m.M),mt(b,"RID",E),mt(b,"TYPE","terminate"),fo(m,b),E=new ni(m,m.j,E),E.M=2,E.A=ro($t(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=E.A,b=!0),b||(E.g=ic(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ne(E)}tc(m)}function fr(m){m.g&&(Al(m),m.g.cancel(),m.g=null)}function Qo(m){fr(m),m.v&&(u.clearTimeout(m.v),m.v=null),Wo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function os(m){if(!cl(m.h)&&!m.m){m.m=!0;var E=m.Ea;ce||N(),pe||(ce(),pe=!0),M.add(E,m),m.D=0}}function Xo(m,E){return es(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=le(h(m.Ea,m,E),ec(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new ni(this,this.j,m);let X=this.o;if(this.U&&(X?(X=G(X),ue(X,this.U)):X=this.U),this.u!==null||this.R||(K.J=X,X=null),this.S)e:{for(var E=0,b=0;b<this.i.length;b++){t:{var x=this.i[b];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(E+=x,E>4096){E=b;break e}if(E===4096||b===this.i.length-1){E=b+1;break e}}E=1e3}else E=1e3;E=Xu(this,K,E),b=$t(this.J),mt(b,"RID",m),mt(b,"CVER",22),this.G&&mt(b,"X-HTTP-Session-Id",this.G),fo(this,b),X&&(this.R?E="headers="+zn(vi(X))+"&"+E:this.u&&lo(b,this.u,X)),dl(this.h,K),this.Ra&&mt(b,"TYPE","init"),this.S?(mt(b,"$req",E),mt(b,"SID","null"),K.U=!0,si(K,b,null)):si(K,b,E),this.I=2}}else this.I==3&&(m?Sl(this,m):this.i.length==0||cl(this.h)||Sl(this))};function Sl(m,E){var b;E?b=E.l:b=m.V++;const x=$t(m.J);mt(x,"SID",m.M),mt(x,"RID",b),mt(x,"AID",m.K),fo(m,x),m.u&&m.o&&lo(x,m.u,m.o),b=new ni(m,m.j,b,m.D+1),m.u===null&&(b.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Xu(m,b,1e3),b.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),dl(m.h,b),si(b,x,E)}function fo(m,E){m.H&&Ge(m.H,function(b,x){mt(E,x,b)}),m.l&&Ge({},function(b,x){mt(E,x,b)})}function Xu(m,E,b){b=Math.min(m.i.length,b);const x=m.l?h(m.l.Ka,m.l,m):null;e:{var K=m.i;let He=-1;for(;;){const Ft=["count="+b];He==-1?b>0?(He=K[0].g,Ft.push("ofs="+He)):He=0:Ft.push("ofs="+He);let ut=!0;for(let Rt=0;Rt<b;Rt++){var X=K[Rt].g;const _i=K[Rt].map;if(X-=He,X<0)He=Math.max(0,K[Rt].g-100),ut=!1;else try{X="req"+X+"_"||"";try{var he=_i instanceof Map?_i:Object.entries(_i);for(const[ls,Gi]of he){let Bi=Gi;f(Gi)&&(Bi=Pn(Gi)),Ft.push(X+ls+"="+encodeURIComponent(Bi))}}catch(ls){throw Ft.push(X+"type="+encodeURIComponent("_badmap")),ls}}catch{x&&x(_i)}}if(ut){he=Ft.join("&");break e}}he=void 0}return m=m.i.splice(0,b),E.G=m,he}function Wu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;ce||N(),pe||(ce(),pe=!0),M.add(E,m),m.A=0}}function ho(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=le(h(m.Da,m),ec(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=le(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),fr(this),ju(this))};function Al(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function ju(m){m.g=new ni(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=$t(m.na);mt(E,"RID","rpc"),mt(E,"SID",m.M),mt(E,"AID",m.K),mt(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&mt(E,"TO",m.ia),mt(E,"TYPE","xmlhttp"),fo(m,E),m.u&&m.o&&lo(E,m.u,m.o),m.O&&(m.g.H=m.O);var b=m.g;m=m.ba,b.M=1,b.A=ro($t(E)),b.u=null,b.R=!0,Vt(b,m)}n.Va=function(){this.C!=null&&(this.C=null,fr(this),ho(this),Ct(19))};function Wo(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Zu(m,E){var b=null;if(m.g==E){Wo(m),Al(m),m.g=null;var x=2}else if(ts(m.h,E))b=E.G,fl(m.h,E),x=1;else return;if(m.I!=0){if(E.o)if(x==1){b=E.u?E.u.length:0,E=Date.now()-E.F;var K=m.D;x=Bn(),pt(x,new qn(x,b)),os(m)}else Wu(m);else if(K=E.m,K==3||K==0&&E.X>0||!(x==1&&Xo(m,E)||x==2&&ho(m)))switch(b&&b.length>0&&(E=m.h,E.i=E.i.concat(b)),K){case 1:as(m,5);break;case 4:as(m,10);break;case 3:as(m,6);break;default:as(m,2)}}}function ec(m,E){let b=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(b*=2),b*E}function as(m,E){if(m.j.info("Error code "+E),E==2){var b=h(m.bb,m),x=m.Ua;const K=!x;x=new ri(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||un(x,"https"),ro(x),K?Oi(x.toString(),b):vl(x.toString(),b)}else Ct(2);m.I=0,m.l&&m.l.pa(E),tc(m),Qo(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function tc(m){if(m.I=0,m.ja=[],m.l){const E=hl(m.h);(E.length!=0||m.i.length!=0)&&(V(m.ja,E),V(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function nc(m,E,b){var x=b instanceof ri?$t(b):new ri(b);if(x.g!="")E&&(x.g=E+"."+x.g),rr(x,x.u);else{var K=u.location;x=K.protocol,E=E?E+"."+K.hostname:K.hostname,K=+K.port;const X=new ri(null);x&&un(X,x),E&&(X.g=E),K&&rr(X,K),b&&(X.h=b),x=X}return b=m.G,E=m.wa,b&&E&&mt(x,b,E),mt(x,"VER",m.ka),fo(m,x),x}function ic(m,E,b){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new vt(new is({ab:b})):new vt(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function sc(){}n=sc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function hr(){}hr.prototype.g=function(m,E){return new Un(m,E)};function Un(m,E){nt.call(this),this.g=new dr(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Ds(this)}T(Un,nt),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){El(this.g)},Un.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var b={};b.__data__=m,m=b}else this.v&&(b={},b.__data__=Pn(m),m=b);E.i.push(new zt(E.Ya++,m)),E.I==3&&os(E)},Un.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,Un.Z.N.call(this)};function rc(m){Mt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const b in E){m=b;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(rc,Mt);function oc(){Zt.call(this),this.status=1}T(oc,Zt);function Ds(m){this.g=m}T(Ds,sc),Ds.prototype.ra=function(){pt(this.g,"a")},Ds.prototype.qa=function(m){pt(this.g,new rc(m))},Ds.prototype.pa=function(m){pt(this.g,new oc)},Ds.prototype.oa=function(){pt(this.g,"b")},hr.prototype.createWebChannel=hr.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,DC=function(){return new hr},MC=function(){return Bn()},NC=At,Sm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},an.NO_ERROR=0,an.TIMEOUT=8,an.HTTP_ERROR=6,xd=an,en.COMPLETE="complete",RC=en,Is.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",nt.prototype.listen=nt.prototype.J,fu=Is,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,xC=vt}).apply(typeof gd<"u"?gd:typeof self<"u"?self:typeof window<"u"?window:{});const UE="@firebase/firestore",LE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new ng("@firebase/firestore");function Na(){return Oo.logLevel}function ye(n,...e){if(Oo.logLevel<=We.DEBUG){const t=e.map(mg);Oo.debug(`Firestore (${rl}): ${n}`,...t)}}function er(n,...e){if(Oo.logLevel<=We.ERROR){const t=e.map(mg);Oo.error(`Firestore (${rl}): ${n}`,...t)}}function $a(n,...e){if(Oo.logLevel<=We.WARN){const t=e.map(mg);Oo.warn(`Firestore (${rl}): ${n}`,...t)}}function mg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,PC(n,i,t)}function PC(n,e,t){let i=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw er(i),new Error(i)}function dt(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||PC(e,o,i)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends bs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(wn.UNAUTHENTICATED)))}shutdown(){}}class v4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _4{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let a=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new $r,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=a;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $r)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(dt(typeof i.accessToken=="string",31837,{l:i}),new kC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class T4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new T4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class OE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const i=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new OE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new OE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=A4(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function je(n,e){return n<e?-1:n>e?1:0}function Am(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return Jp(o)===Jp(a)?je(o,a):Jp(o)?1:-1}return je(n.length,e.length)}const C4=55296,b4=57343;function Jp(n){const e=n.charCodeAt(0);return e>=C4&&e<=b4}function Ka(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="__name__";class hs{constructor(e,t,i){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&De(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return hs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hs?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=hs.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return je(e.length,t.length)}static compareSegments(e,t){const i=hs.isNumericId(e),o=hs.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?hs.extractNumericId(e).compare(hs.extractNumericId(t)):Am(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zr.fromString(e.substring(4,e.length-2))}}class Dt extends hs{construct(e,t,i){return new Dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Dt(t)}static emptyPath(){return new Dt([])}}const w4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends hs{construct(e,t,i){return new Tn(e,t,i)}static isValidIdentifier(e){return w4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HE}static keyField(){return new Tn([HE])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new Se(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new Se(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Se(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(i+=f,o++):(a(),o++)}if(a(),u)throw new Se(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(t)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Dt.fromString(e))}static fromName(e){return new xe(Dt.fromString(e).popFirst(5))}static empty(){return new xe(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(n,e,t){if(!t)throw new Se(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function x4(n,e,t,i){if(e===!0&&i===!0)throw new Se(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FE(n){if(!xe.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function yg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function gs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yg(n);throw new Se(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Hu(n,e){if(!VC(n))throw new Se(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Se(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=-62135596800,BE=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*BE);return new xt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<GE)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BE}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hu(e,xt._jsonSchema))return new xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-GE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:Wt("string",xt._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new xt(0,0))}static max(){return new Ue(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=-1;function R4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ue.fromTimestamp(i===1e9?new xt(t+1,0):new xt(t,i));return new Jr(o,xe.empty(),e)}function N4(n){return new Jr(n.readTime,n.key,xu)}class Jr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Jr(Ue.min(),xe.empty(),xu)}static max(){return new Jr(Ue.max(),xe.empty(),xu)}}function M4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class P4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==D4)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((f=>{++o,f.next((()=>{++a,u&&a===o&&t()}),(g=>i(g)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let f=0;for(let g=0;g<a;g++){const h=g;t(e[h]).next((v=>{u[h]=v,++f,f===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function k4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function al(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ef.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=-1;function Sf(n){return n==null}function Jd(n){return n===0&&1/n==-1/0}function V4(n){return typeof n=="number"&&Number.isInteger(n)&&!Jd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="";function U4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qE(e)),e=L4(n.get(t),e);return qE(e)}function L4(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case UC:t+="";break;default:t+=a}}return t}function qE(n){return n+UC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function no(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new Pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yd(this.root,e,this.comparator,!1)}getReverseIterator(){return new yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yd(this.root,e,this.comparator,!0)}}class yd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??_n.RED,this.left=o??_n.EMPTY,this.right=a??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new _n(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return _n.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new _n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $E(this.data.getIterator())}getIteratorFrom(e){return new $E(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class $E{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new hi([])}unionWith(e){let t=new sn(Tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ka(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new OC("Invalid base64 string: "+a):a}})(e);return new En(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new En(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}En.EMPTY_BYTE_STRING=new En("");const O4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(n){if(dt(!!n,39018),typeof n=="string"){let e=0;const t=O4.exec(n);if(dt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qt(n.seconds),nanos:qt(n.nanos)}}function qt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xr(n){return typeof n=="string"?En.fromBase64String(n):En.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="server_timestamp",FC="__type__",GC="__previous_value__",BC="__local_write_time__";function _g(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[FC])==null?void 0:i.stringValue)===HC}function Af(n){const e=n.mapValue.fields[GC];return _g(e)?Af(e):e}function Ru(n){const e=Qr(n.mapValue.fields[BC].timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,t,i,o,a,u,f,g,h,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=h,this.isUsingEmulator=v}}const Qd="(default)";class Nu{constructor(e,t){this.projectId=e,this.database=t||Qd}static empty(){return new Nu("","")}get isDefaultDatabase(){return this.database===Qd}isEqual(e){return e instanceof Nu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="__type__",F4="__max__",vd={mapValue:{}},zC="__vector__",Xd="value";function Wr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_g(n)?4:B4(n)?9007199254740991:G4(n)?10:11:De(28295,{value:n})}function As(n,e){if(n===e)return!0;const t=Wr(n);if(t!==Wr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ru(n).isEqual(Ru(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Qr(o.timestampValue),f=Qr(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Xr(o.bytesValue).isEqual(Xr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return qt(o.geoPointValue.latitude)===qt(a.geoPointValue.latitude)&&qt(o.geoPointValue.longitude)===qt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return qt(o.integerValue)===qt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=qt(o.doubleValue),f=qt(a.doubleValue);return u===f?Jd(u)===Jd(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Ka(n.arrayValue.values||[],e.arrayValue.values||[],As);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},f=a.mapValue.fields||{};if(zE(u)!==zE(f))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(f[g]===void 0||!As(u[g],f[g])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function Mu(n,e){return(n.values||[]).find((t=>As(t,e)))!==void 0}function Ya(n,e){if(n===e)return 0;const t=Wr(n),i=Wr(e);if(t!==i)return je(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const f=qt(a.integerValue||a.doubleValue),g=qt(u.integerValue||u.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return KE(n.timestampValue,e.timestampValue);case 4:return KE(Ru(n),Ru(e));case 5:return Am(n.stringValue,e.stringValue);case 6:return(function(a,u){const f=Xr(a),g=Xr(u);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const f=a.split("/"),g=u.split("/");for(let h=0;h<f.length&&h<g.length;h++){const v=je(f[h],g[h]);if(v!==0)return v}return je(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const f=je(qt(a.latitude),qt(u.latitude));return f!==0?f:je(qt(a.longitude),qt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return YE(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,w,V,k;const f=a.fields||{},g=u.fields||{},h=(S=f[Xd])==null?void 0:S.arrayValue,v=(w=g[Xd])==null?void 0:w.arrayValue,T=je(((V=h==null?void 0:h.values)==null?void 0:V.length)||0,((k=v==null?void 0:v.values)==null?void 0:k.length)||0);return T!==0?T:YE(h,v)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===vd.mapValue&&u===vd.mapValue)return 0;if(a===vd.mapValue)return 1;if(u===vd.mapValue)return-1;const f=a.fields||{},g=Object.keys(f),h=u.fields||{},v=Object.keys(h);g.sort(),v.sort();for(let T=0;T<g.length&&T<v.length;++T){const S=Am(g[T],v[T]);if(S!==0)return S;const w=Ya(f[g[T]],h[v[T]]);if(w!==0)return w}return je(g.length,v.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function KE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);const t=Qr(n),i=Qr(e),o=je(t.seconds,i.seconds);return o!==0?o:je(t.nanos,i.nanos)}function YE(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Ya(t[o],i[o]);if(a)return a}return je(t.length,i.length)}function Ja(n){return Cm(n)}function Cm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Qr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Cm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Cm(t.fields[u])}`;return o+"}"})(n.mapValue):De(61005,{value:n})}function Rd(n){switch(Wr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Af(n);return e?16+Rd(e):16;case 5:return 2*n.stringValue.length;case 6:return Xr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Rd(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return no(i.fields,((a,u)=>{o+=a.length+Rd(u)})),o})(n.mapValue);default:throw De(13486,{value:n})}}function bm(n){return!!n&&"integerValue"in n}function Tg(n){return!!n&&"arrayValue"in n}function JE(n){return!!n&&"nullValue"in n}function QE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nd(n){return!!n&&"mapValue"in n}function G4(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[qC])==null?void 0:i.stringValue)===zC}function _u(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return no(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=_u(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_u(n.arrayValue.values[t]);return e}return{...n}}function B4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===F4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Nd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(t)}setAll(e){let t=Tn.emptyPath(),i={},o=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}u?i[f.lastSegment()]=_u(u):o.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Nd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Nd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){no(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Zn(_u(this.value))}}function $C(n){const e=[];return no(n.fields,((t,i)=>{const o=new Tn([t]);if(Nd(i)){const a=$C(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,t,i,o,a,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new In(e,0,Ue.min(),Ue.min(),Ue.min(),Zn.empty(),0)}static newFoundDocument(e,t,i,o){return new In(e,1,t,Ue.min(),i,o,0)}static newNoDocument(e,t){return new In(e,2,t,Ue.min(),Ue.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,Ue.min(),Ue.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.position=e,this.inclusive=t}}function XE(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=xe.comparator(xe.fromName(u.referenceValue),t.key):i=Ya(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function WE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!As(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t="asc"){this.field=e,this.dir=t}}function q4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{}class nn extends KC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new $4(e,t,i):t==="array-contains"?new J4(e,i):t==="in"?new Q4(e,i):t==="not-in"?new X4(e,i):t==="array-contains-any"?new W4(e,i):new nn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new K4(e,i):new Y4(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ya(t,this.value)):t!==null&&Wr(this.value)===Wr(t)&&this.matchesComparison(Ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cs extends KC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Cs(e,t)}matches(e){return YC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YC(n){return n.op==="and"}function JC(n){return z4(n)&&YC(n)}function z4(n){for(const e of n.filters)if(e instanceof Cs)return!1;return!0}function wm(n){if(n instanceof nn)return n.field.canonicalString()+n.op.toString()+Ja(n.value);if(JC(n))return n.filters.map((e=>wm(e))).join(",");{const e=n.filters.map((t=>wm(t))).join(",");return`${n.op}(${e})`}}function QC(n,e){return n instanceof nn?(function(i,o){return o instanceof nn&&i.op===o.op&&i.field.isEqual(o.field)&&As(i.value,o.value)})(n,e):n instanceof Cs?(function(i,o){return o instanceof Cs&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,f)=>a&&QC(u,o.filters[f])),!0):!1})(n,e):void De(19439)}function XC(n){return n instanceof nn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ja(t.value)}`})(n):n instanceof Cs?(function(t){return t.op.toString()+" {"+t.getFilters().map(XC).join(" ,")+"}"})(n):"Filter"}class $4 extends nn{constructor(e,t,i){super(e,t,i),this.key=xe.fromName(i.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class K4 extends nn{constructor(e,t){super(e,"in",t),this.keys=WC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Y4 extends nn{constructor(e,t){super(e,"not-in",t),this.keys=WC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function WC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>xe.fromName(i.referenceValue)))}class J4 extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tg(t)&&Mu(t.arrayValue,this.value)}}class Q4 extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Mu(this.value.arrayValue,t)}}class X4 extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Mu(this.value.arrayValue,t)}}class W4 extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Mu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,t=null,i=[],o=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=f,this.Te=null}}function jE(n,e=null,t=[],i=[],o=null,a=null,u=null){return new j4(n,e,t,i,o,a,u)}function Eg(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>wm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ja(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ja(i))).join(",")),e.Te=t}return e.Te}function Sg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!q4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!QC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!WE(n.startAt,e.startAt)&&WE(n.endAt,e.endAt)}function Im(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t=null,i=[],o=[],a=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Z4(n,e,t,i,o,a,u,f){return new Cf(n,e,t,i,o,a,u,f)}function bf(n){return new Cf(n)}function ZE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eO(n){return n.collectionGroup!==null}function Tu(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new sn(Tn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new jd(a,i))})),t.has(Tn.keyField().canonicalString())||e.Ie.push(new jd(Tn.keyField(),i))}return e.Ie}function ys(n){const e=Oe(n);return e.Ee||(e.Ee=tO(e,Tu(n))),e.Ee}function tO(n,e){if(n.limitType==="F")return jE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new jd(o.field,a)}));const t=n.endAt?new Wd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Wd(n.startAt.position,n.startAt.inclusive):null;return jE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function xm(n,e,t){return new Cf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wf(n,e){return Sg(ys(n),ys(e))&&n.limitType===e.limitType}function jC(n){return`${Eg(ys(n))}|lt:${n.limitType}`}function Ma(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>XC(o))).join(", ")}]`),Sf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ja(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ja(o))).join(",")),`Target(${i})`})(ys(n))}; limitType=${n.limitType})`}function If(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):xe.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of Tu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,f,g){const h=XE(u,f,g);return u.inclusive?h<=0:h<0})(i.startAt,Tu(i),o)||i.endAt&&!(function(u,f,g){const h=XE(u,f,g);return u.inclusive?h>=0:h>0})(i.endAt,Tu(i),o))})(n,e)}function nO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZC(n){return(e,t)=>{let i=!1;for(const o of Tu(n)){const a=iO(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function iO(n,e,t){const i=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(a,u,f){const g=u.data.field(a),h=f.data.field(a);return g!==null&&h!==null?Ya(g,h):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return LC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new Pt(xe.comparator);function tr(){return sO}const eb=new Pt(xe.comparator);function hu(...n){let e=eb;for(const t of n)e=e.insert(t.key,t);return e}function tb(n){let e=eb;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Po(){return Eu()}function nb(){return Eu()}function Eu(){return new Go((n=>n.toString()),((n,e)=>n.isEqual(e)))}const rO=new Pt(xe.comparator),oO=new sn(xe.comparator);function Ze(...n){let e=oO;for(const t of n)e=e.add(t);return e}const aO=new sn(je);function lO(){return aO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jd(e)?"-0":e}}function ib(n){return{integerValue:""+n}}function uO(n,e){return V4(e)?ib(e):Ag(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this._=void 0}}function cO(n,e,t){return n instanceof Zd?(function(o,a){const u={fields:{[FC]:{stringValue:HC},[BC]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&_g(a)&&(a=Af(a)),a&&(u.fields[GC]=a),{mapValue:u}})(t,e):n instanceof Qa?rb(n,e):n instanceof Du?ob(n,e):(function(o,a){const u=sb(o,a),f=eS(u)+eS(o.Ae);return bm(u)&&bm(o.Ae)?ib(f):Ag(o.serializer,f)})(n,e)}function dO(n,e,t){return n instanceof Qa?rb(n,e):n instanceof Du?ob(n,e):t}function sb(n,e){return n instanceof ef?(function(i){return bm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Zd extends xf{}class Qa extends xf{constructor(e){super(),this.elements=e}}function rb(n,e){const t=ab(e);for(const i of n.elements)t.some((o=>As(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Du extends xf{constructor(e){super(),this.elements=e}}function ob(n,e){let t=ab(e);for(const i of n.elements)t=t.filter((o=>!As(o,i)));return{arrayValue:{values:t}}}class ef extends xf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function eS(n){return qt(n.integerValue||n.doubleValue)}function ab(n){return Tg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t){this.field=e,this.transform=t}}function hO(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Qa&&o instanceof Qa||i instanceof Du&&o instanceof Du?Ka(i.elements,o.elements,As):i instanceof ef&&o instanceof ef?As(i.Ae,o.Ae):i instanceof Zd&&o instanceof Zd})(n.transform,e.transform)}class pO{constructor(e,t){this.version=e,this.transformResults=t}}class vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Md(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rf{}function lb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cb(n.key,vs.none()):new Fu(n.key,n.data,vs.none());{const t=n.data,i=Zn.empty();let o=new sn(Tn.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new io(n.key,i,new hi(o.toArray()),vs.none())}}function mO(n,e,t){n instanceof Fu?(function(o,a,u){const f=o.value.clone(),g=nS(o.fieldTransforms,a,u.transformResults);f.setAll(g),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof io?(function(o,a,u){if(!Md(o.precondition,a))return void a.convertToUnknownDocument(u.version);const f=nS(o.fieldTransforms,a,u.transformResults),g=a.data;g.setAll(ub(o)),g.setAll(f),a.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Su(n,e,t,i){return n instanceof Fu?(function(a,u,f,g){if(!Md(a.precondition,u))return f;const h=a.value.clone(),v=iS(a.fieldTransforms,g,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof io?(function(a,u,f,g){if(!Md(a.precondition,u))return f;const h=iS(a.fieldTransforms,g,u),v=u.data;return v.setAll(ub(a)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,f){return Md(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function gO(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=sb(i.transform,o||null);a!=null&&(t===null&&(t=Zn.empty()),t.set(i.field,a))}return t||null}function tS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ka(i,o,((a,u)=>hO(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fu extends Rf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class io extends Rf{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ub(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function nS(n,e,t){const i=new Map;dt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,f=e.data.field(a.field);i.set(a.field,dO(u,f,t[o]))}return i}function iS(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,cO(a,u,e))}return i}class cb extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yO extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&mO(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Su(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Su(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=nb();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(o.key)?null:f;const g=lb(u,f);g!==null&&i.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Ka(this.mutations,e.mutations,((t,i)=>tS(t,i)))&&Ka(this.baseMutations,e.baseMutations,((t,i)=>tS(t,i)))}}class Cg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){dt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return rO})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Cg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,tt;function EO(n){switch(n){case ae.OK:return De(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function db(n){if(n===void 0)return er("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Xt.OK:return ae.OK;case Xt.CANCELLED:return ae.CANCELLED;case Xt.UNKNOWN:return ae.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return ae.INTERNAL;case Xt.UNAVAILABLE:return ae.UNAVAILABLE;case Xt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Xt.NOT_FOUND:return ae.NOT_FOUND;case Xt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Xt.ABORTED:return ae.ABORTED;case Xt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Xt.DATA_LOSS:return ae.DATA_LOSS;default:return De(39323,{code:n})}}(tt=Xt||(Xt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new zr([4294967295,4294967295],0);function sS(n){const e=SO().encode(n),t=new IC;return t.update(e),new Uint8Array(t.digest())}function rS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new zr([t,i],0),new zr([o,a],0)]}class bg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new pu(`Invalid padding: ${t}`);if(i<0)throw new pu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new pu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=zr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(zr.fromNumber(i)));return o.compare(AO)===1&&(o=new zr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=sS(e),[i,o]=rS(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new bg(a,o,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=sS(e),[i,o]=rS(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Gu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Nf(Ue.min(),o,new Pt(je),tr(),Ze())}}class Gu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Gu(i,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class fb{constructor(e,t){this.targetId=e,this.Ce=t}}class hb{constructor(e,t,i=En.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class oS{constructor(){this.ve=0,this.Fe=aS(),this.Me=En.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),i=Ze();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:De(38017,{changeType:a})}})),new Gu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=aS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CO{constructor(e){this.Ge=e,this.ze=new Map,this.je=tr(),this.Je=_d(),this.He=_d(),this.Ye=new Pt(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Im(a))if(i===0){const u=new xe(a.path);this.et(t,u,In.newNoDocument(u,Ue.min()))}else dt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),g=f?this.ct(f,e,u):1;if(g!==0){this.it(t);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,f;try{u=Xr(i).toUint8Array()}catch(g){if(g instanceof OC)return $a("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new bg(u,o,a)}catch(g){return $a(g instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const f=this.ot(u);if(f){if(a.current&&Im(f.target)){const g=new xe(f.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,In.newNoDocument(g,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=Ze();this.He.forEach(((a,u)=>{let f=!0;u.forEachWhile((g=>{const h=this.ot(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Nf(e,t,this.Ye,this.je,i);return this.je=tr(),this.Je=_d(),this.He=_d(),this.Ye=new Pt(je),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new oS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new sn(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new sn(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function _d(){return new Pt(xe.comparator)}function aS(){return new Pt(xe.comparator)}const bO={asc:"ASCENDING",desc:"DESCENDING"},wO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IO={and:"AND",or:"OR"};class xO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rm(n,e){return n.useProto3Json||Sf(e)?e:{value:e}}function tf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function RO(n,e){return tf(n,e.toTimestamp())}function _s(n){return dt(!!n,49232),Ue.fromTimestamp((function(t){const i=Qr(t);return new xt(i.seconds,i.nanos)})(n))}function wg(n,e){return Nm(n,e).canonicalString()}function Nm(n,e){const t=(function(o){return new Dt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mb(n){const e=Dt.fromString(n);return dt(Tb(e),10190,{key:e.toString()}),e}function Mm(n,e){return wg(n.databaseId,e.path)}function Qp(n,e){const t=mb(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(yb(t))}function gb(n,e){return wg(n.databaseId,e)}function NO(n){const e=mb(n);return e.length===4?Dt.emptyPath():yb(e)}function Dm(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yb(n){return dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lS(n,e,t){return{name:Mm(n,e),fields:t.value.mapValue.fields}}function MO(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:De(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,v){return h.useProto3Json?(dt(v===void 0||typeof v=="string",58123),En.fromBase64String(v||"")):(dt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),En.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const v=h.code===void 0?ae.UNKNOWN:db(h.code);return new Se(v,h.message||"")})(u);t=new hb(i,o,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Qp(n,i.document.name),a=_s(i.document.updateTime),u=i.document.createTime?_s(i.document.createTime):Ue.min(),f=new Zn({mapValue:{fields:i.document.fields}}),g=In.newFoundDocument(o,a,u,f),h=i.targetIds||[],v=i.removedTargetIds||[];t=new Dd(h,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Qp(n,i.document),a=i.readTime?_s(i.readTime):Ue.min(),u=In.newNoDocument(o,a),f=i.removedTargetIds||[];t=new Dd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Qp(n,i.document),a=i.removedTargetIds||[];t=new Dd([],a,o,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new TO(o,a),f=i.targetId;t=new fb(f,u)}}return t}function DO(n,e){let t;if(e instanceof Fu)t={update:lS(n,e.key,e.value)};else if(e instanceof cb)t={delete:Mm(n,e.key)};else if(e instanceof io)t={update:lS(n,e.key,e.data),updateMask:GO(e.fieldMask)};else{if(!(e instanceof yO))return De(16599,{Vt:e.type});t={verify:Mm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const f=u.transform;if(f instanceof Zd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Qa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Du)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ef)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw De(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:RO(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:De(27497)})(n,e.precondition)),t}function PO(n,e){return n&&n.length>0?(dt(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?_s(o.updateTime):_s(a);return u.isEqual(Ue.min())&&(u=_s(a)),new pO(u,o.transformResults||[])})(t,e)))):[]}function kO(n,e){return{documents:[gb(n,e.path)]}}function VO(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=gb(n,o);const a=(function(h){if(h.length!==0)return _b(Cs.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((v=>(function(S){return{field:Da(S.field),direction:OO(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Rm(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function UO(n){let e=NO(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){dt(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(T){const S=vb(T);return S instanceof Cs&&JC(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(V){return new jd(Pa(V.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,Sf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,w=T.values||[];return new Wd(w,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,w=T.values||[];return new Wd(w,S)})(t.endAt)),Z4(e,o,u,a,f,"F",g,h)}function LO(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Pa(t.unaryFilter.field);return nn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Pa(t.unaryFilter.field);return nn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Pa(t.unaryFilter.field);return nn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Pa(t.unaryFilter.field);return nn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return nn.create(Pa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Cs.create(t.compositeFilter.filters.map((i=>vb(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function OO(n){return bO[n]}function HO(n){return wO[n]}function FO(n){return IO[n]}function Da(n){return{fieldPath:n.canonicalString()}}function Pa(n){return Tn.fromServerFormat(n.fieldPath)}function _b(n){return n instanceof nn?(function(t){if(t.op==="=="){if(QE(t.value))return{unaryFilter:{field:Da(t.field),op:"IS_NAN"}};if(JE(t.value))return{unaryFilter:{field:Da(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(QE(t.value))return{unaryFilter:{field:Da(t.field),op:"IS_NOT_NAN"}};if(JE(t.value))return{unaryFilter:{field:Da(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Da(t.field),op:HO(t.op),value:t.value}}})(n):n instanceof Cs?(function(t){const i=t.getFilters().map((o=>_b(o)));return i.length===1?i[0]:{compositeFilter:{op:FO(t.op),filters:i}}})(n):De(54877,{filter:n})}function GO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Tb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t,i,o,a=Ue.min(),u=Ue.min(),f=En.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.yt=e}}function qO(n){const e=UO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.Cn=new $O}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Jr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class $O{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new sn(Dt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new sn(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Eb=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(Eb,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xa(0)}static cr(){return new Xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="LruGarbageCollector",KO=1048576;function dS([n,e],[t,i]){const o=je(n,t);return o===0?je(e,i):o}class YO{constructor(e){this.Ir=e,this.buffer=new sn(dS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();dS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(cS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){al(t)?ye(cS,"Ignoring IndexedDB error during garbage collection: ",t):await ol(t)}await this.Vr(3e5)}))}}class QO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Ef.ce);const i=new YO(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(uS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,f,g,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),Na()<=We.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(f-u)+`ms
	Removed ${a} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(h-g)+`ms
Total Duration: ${h-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function XO(n,e){return new QO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this.changes=new Go((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Su(i.mutation,o,hi.empty(),xt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ze()){const o=Po();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=hu();return a.forEach(((f,g)=>{u=u.insert(f,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Po();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ze())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,o){let a=tr();const u=Eu(),f=(function(){return Eu()})();return t.forEach(((g,h)=>{const v=i.get(h.key);o.has(h.key)&&(v===void 0||v.mutation instanceof io)?a=a.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),Su(v.mutation,h,v.mutation.getFieldMask(),xt.now())):u.set(h.key,hi.empty())})),this.recalculateAndSaveOverlays(e,a).next((g=>(g.forEach(((h,v)=>u.set(h,v))),t.forEach(((h,v)=>f.set(h,new jO(v,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Eu();let o=new Pt(((u,f)=>u-f)),a=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((g=>{const h=t.get(g);if(h===null)return;let v=i.get(g)||hi.empty();v=f.applyToLocalView(h,v),i.set(g,v);const T=(o.get(f.batchId)||Ze()).add(g);o=o.insert(f.batchId,T)}))})).next((()=>{const u=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),h=g.key,v=g.value,T=nb();v.forEach((S=>{if(!a.has(S)){const w=lb(t.get(S),i.get(S));w!==null&&T.set(S,w),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(Po());let f=xu,g=a;return u.next((h=>se.forEach(h,((v,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,g,h,Ze()))).next((v=>({batchId:f,changes:tb(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((i=>{let o=hu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=hu();return this.indexManager.getCollectionParents(e,a).next((f=>se.forEach(f,(g=>{const h=(function(T,S){return new Cf(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((g,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,In.newInvalidDocument(v)))}));let f=hu();return u.forEach(((g,h)=>{const v=a.get(g);v!==void 0&&Su(v.mutation,h,hi.empty(),xt.now()),If(t,h)&&(f=f.insert(g,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:_s(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:qO(o.bundledQuery),readTime:_s(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.overlays=new Pt(xe.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Po();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=Po(),a=t.length+1,u=new xe(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,h=g.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&g.largestBatchId>i&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new Pt(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let v=a.get(h.largestBatchId);v===null&&(v=Po(),a=a.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const f=Po(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,v)=>f.set(h,v))),!(f.size()>=o)););return se.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new _O(t,i));let a=this.qr.get(t);a===void 0&&(a=Ze(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this.Qr=new sn(dn.$r),this.Ur=new sn(dn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new dn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new dn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new xe(new Dt([])),i=new dn(t,e),o=new dn(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new Dt([])),i=new dn(t,e),o=new dn(t,e+1);let a=Ze();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new dn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class dn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new sn(dn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new vO(a,t,i,o);this.mutationQueue.push(u);for(const f of o)this.Zr=this.Zr.add(new dn(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?vg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new dn(t,0),o=new dn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const f=this.Xr(u.Yr);a.push(f)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sn(je);return t.forEach((o=>{const a=new dn(o,0),u=new dn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(f=>{i=i.add(f.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;xe.isDocumentKey(a)||(a=a.child(""));const u=new dn(new xe(a),0);let f=new sn(je);return this.Zr.forEachWhile((g=>{const h=g.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(f=f.add(g.Yr)),!0)}),u),se.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){dt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const a=new dn(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new dn(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e){this.ri=e,this.docs=(function(){return new Pt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let i=tr();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():In.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=tr();const u=t.path,f=new xe(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:h,value:{document:v}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||M4(N4(v),i)<=0||(o.has(v.key)||If(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){De(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new r5(this)}getSize(e){return se.resolve(this.size)}}class r5 extends WO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e){this.persistence=e,this.si=new Go((t=>Eg(t)),Sg),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Ig,this.targetCount=0,this.ai=Xa.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ef(0),this.li=!1,this.li=!0,this.hi=new n5,this.referenceDelegate=e(this),this.Pi=new o5(this),this.indexManager=new zO,this.remoteDocumentCache=(function(o){return new s5(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new BO(t),this.Ii=new e5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new t5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new i5(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const o=new a5(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class a5 extends P4{constructor(e){super(),this.currentSequenceNumber=e}}class xg{constructor(e){this.persistence=e,this.Ri=new Ig,this.Vi=null}static mi(e){return new xg(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=xe.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Ue.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class nf{constructor(e,t){this.persistence=e,this.pi=new Go((i=>U4(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=XO(this,t)}static mi(e,t){return new nf(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,a.removeEntry(u,Ue.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rd(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ze(),o=Ze();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Rg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Xk()?8:k4(Rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new l5;return this.Ss(e,t,u).next((f=>{if(a.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Na()<=We.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Na()<=We.DEBUG&&ye("QueryEngine","Query:",Ma(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Na()<=We.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(t))):se.resolve())}ys(e,t){if(ZE(t))return se.resolve(null);let i=ys(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=xm(t,null,"F"),i=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ze(...a);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const h=this.Ds(t,f);return this.Cs(t,h,u,g.readTime)?this.ys(e,xm(t,null,"F")):this.vs(e,h,t,g)}))))})))))}ws(e,t,i,o){return ZE(t)||o.isEqual(Ue.min())?se.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?se.resolve(null):(Na()<=We.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ma(t)),this.vs(e,u,t,R4(o,xu)).next((f=>f)))}))}Ds(e,t){let i=new sn(ZC(e));return t.forEach(((o,a)=>{If(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return Na()<=We.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ma(t)),this.ps.getDocumentsMatchingQuery(e,t,Jr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="LocalStore",c5=3e8;class d5{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Pt(je),this.xs=new Go((a=>Eg(a)),Sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function f5(n,e,t,i){return new d5(n,e,t,i)}async function Ab(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],f=[];let g=Ze();for(const h of o){u.push(h.batchId);for(const v of h.mutations)g=g.add(v.key)}for(const h of a){f.push(h.batchId);for(const v of h.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(i,g).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function h5(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,h,v){const T=h.batch,S=T.keys();let w=se.resolve();return S.forEach((V=>{w=w.next((()=>v.getEntry(g,V))).next((k=>{const P=h.docVersions.get(V);dt(P!==null,48541),k.version.compareTo(P)<0&&(T.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),v.addEntry(k)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=Ze();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(g=g.add(f.batch.mutations[h].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Cb(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function p5(n,e){const t=Oe(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;f.push(t.Pi.removeMatchingKeys(a,v.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(a,v.addedDocuments,T))));let w=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(En.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,i)),o=o.insert(T,w),(function(k,P,$){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=c5?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,w,v)&&f.push(t.Pi.updateTargetData(a,w))}));let g=tr(),h=Ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),f.push(m5(a,u,e.documentUpdates).next((v=>{g=v.ks,h=v.qs}))),!i.isEqual(Ue.min())){const v=t.Pi.getLastRemoteSnapshotVersion(a).next((T=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(v)}return se.waitFor(f).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,g,h))).next((()=>g))})).then((a=>(t.Ms=o,a)))}function m5(n,e,t){let i=Ze(),o=Ze();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=tr();return t.forEach(((f,g)=>{const h=a.get(f);g.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Ue.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):ye(Ng,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function g5(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=vg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function y5(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new Gr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Pm(n,e,t){const i=Oe(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!al(u))throw u;ye(Ng,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function fS(n,e,t){const i=Oe(n);let o=Ue.min(),a=Ze();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,v){const T=Oe(g),S=T.xs.get(v);return S!==void 0?se.resolve(T.Ms.get(S)):T.Pi.getTargetData(h,v)})(i,u,ys(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((g=>{a=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:Ue.min(),t?a:Ze()))).next((f=>(v5(i,nO(e),f),{documents:f,Qs:a})))))}function v5(n,e,t){let i=n.Os.get(e)||Ue.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class hS{constructor(){this.activeTargetIds=lO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _5{constructor(){this.Mo=new hS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="ConnectivityMonitor";class mS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(pS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(pS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function km(){return Td===null?Td=(function(){return 268435456+Math.round(2147483648*Math.random())})():Td++,"0x"+Td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="RestConnection",E5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Qd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=km(),f=this.zo(e,t.toUriEncodedString());ye(Xp,`Sending RPC '${e}' ${u}:`,f,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,a);const{host:h}=new URL(f),v=to(h);return this.Jo(e,f,g,i,v).then((T=>(ye(Xp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw $a(Xp,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=E5[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class C5 extends S5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=km();return new Promise(((f,g)=>{const h=new xC;h.setWithCredentials(!0),h.listenOnce(RC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case xd.NO_ERROR:const T=h.getResponseJson();ye(bn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case xd.TIMEOUT:ye(bn,`RPC '${e}' ${u} timed out`),g(new Se(ae.DEADLINE_EXCEEDED,"Request time out"));break;case xd.HTTP_ERROR:const S=h.getStatus();if(ye(bn,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const V=w==null?void 0:w.error;if(V&&V.status&&V.message){const k=(function($){const F=$.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(F)>=0?F:ae.UNKNOWN})(V.status);g(new Se(k,V.message))}else g(new Se(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else g(new Se(ae.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ye(bn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);ye(bn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=km(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=DC(),f=MC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(g.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const v=a.join("");ye(bn,`Creating RPC '${e}' stream ${o}: ${v}`,g);const T=u.createWebChannel(v,g);this.I_(T);let S=!1,w=!1;const V=new A5({Yo:P=>{w?ye(bn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(S||(ye(bn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),ye(bn,`RPC '${e}' stream ${o} sending:`,P),T.send(P))},Zo:()=>T.close()}),k=(P,$,F)=>{P.listen($,(ee=>{try{F(ee)}catch(re){setTimeout((()=>{throw re}),0)}}))};return k(T,fu.EventType.OPEN,(()=>{w||(ye(bn,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),k(T,fu.EventType.CLOSE,(()=>{w||(w=!0,ye(bn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(T))})),k(T,fu.EventType.ERROR,(P=>{w||(w=!0,$a(bn,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),V.a_(new Se(ae.UNAVAILABLE,"The operation could not be completed")))})),k(T,fu.EventType.MESSAGE,(P=>{var $;if(!w){const F=P.data[0];dt(!!F,16349);const ee=F,re=(ee==null?void 0:ee.error)||(($=ee[0])==null?void 0:$.error);if(re){ye(bn,`RPC '${e}' stream ${o} received error:`,re);const ce=re.status;let pe=(function(R){const H=Xt[R];if(H!==void 0)return db(H)})(ce),M=re.message;pe===void 0&&(pe=ae.INTERNAL,M="Unknown error status: "+ce+" with message "+re.message),w=!0,V.a_(new Se(pe,M)),T.close()}else ye(bn,`RPC '${e}' stream ${o} received:`,F),V.u_(F)}})),k(f,NC.STAT_EVENT,(P=>{P.stat===Sm.PROXY?ye(bn,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===Sm.NOPROXY&&ye(bn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Wp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n){return new xO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="PersistentStream";class wb{constructor(e,t,i,o,a,u,f,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new Se(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(gS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(gS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class b5 extends wb{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=MO(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ue.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?_s(u.readTime):Ue.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Dm(this.serializer),t.addTarget=(function(a,u){let f;const g=u.target;if(f=Im(g)?{documents:kO(a,g)}:{query:VO(a,g).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=pb(a,u.resumeToken);const h=Rm(a,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ue.min())>0){f.readTime=tf(a,u.snapshotVersion.toTimestamp());const h=Rm(a,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=LO(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Dm(this.serializer),t.removeTarget=e,this.q_(t)}}class w5 extends wb{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=PO(e.writeResults,e.commitTime),i=_s(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Dm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>DO(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{}class x5 extends I5{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Nm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(ae.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,Nm(t,i),o,u,f,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(ae.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class R5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(er(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="RemoteStore";class N5{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Bo(this)&&(ye(Ho,"Restarting streams for network reachability change."),await(async function(g){const h=Oe(g);h.Ea.add(4),await Bu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Df(h)})(this))}))})),this.Ra=new R5(i,o)}}async function Df(n){if(Bo(n))for(const e of n.da)await e(!0)}async function Bu(n){for(const e of n.da)await e(!1)}function Ib(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),kg(t)?Pg(t):ll(t).O_()&&Dg(t,e))}function Mg(n,e){const t=Oe(n),i=ll(t);t.Ia.delete(e),i.O_()&&xb(t,e),t.Ia.size===0&&(i.O_()?i.L_():Bo(t)&&t.Ra.set("Unknown"))}function Dg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ll(n).Y_(e)}function xb(n,e){n.Va.Ue(e),ll(n).Z_(e)}function Pg(n){n.Va=new CO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ll(n).start(),n.Ra.ua()}function kg(n){return Bo(n)&&!ll(n).x_()&&n.Ia.size>0}function Bo(n){return Oe(n).Ea.size===0}function Rb(n){n.Va=void 0}async function M5(n){n.Ra.set("Online")}async function D5(n){n.Ia.forEach(((e,t)=>{Dg(n,e)}))}async function P5(n,e){Rb(n),kg(n)?(n.Ra.ha(e),Pg(n)):n.Ra.set("Unknown")}async function k5(n,e,t){if(n.Ra.set("Online"),e instanceof hb&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const f of a.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,u),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){ye(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await sf(n,i)}else if(e instanceof Dd?n.Va.Ze(e):e instanceof fb?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ue.min()))try{const i=await Cb(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const f=a.Va.Tt(u);return f.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const v=a.Ia.get(h);v&&a.Ia.set(h,v.withResumeToken(g.resumeToken,u))}})),f.targetMismatches.forEach(((g,h)=>{const v=a.Ia.get(g);if(!v)return;a.Ia.set(g,v.withResumeToken(En.EMPTY_BYTE_STRING,v.snapshotVersion)),xb(a,g);const T=new Gr(v.target,g,h,v.sequenceNumber);Dg(a,T)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){ye(Ho,"Failed to raise snapshot:",i),await sf(n,i)}}async function sf(n,e,t){if(!al(e))throw e;n.Ea.add(1),await Bu(n),n.Ra.set("Offline"),t||(t=()=>Cb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(Ho,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Df(n)}))}function Nb(n,e){return e().catch((t=>sf(n,t,e)))}async function Pf(n){const e=Oe(n),t=jr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vg;for(;V5(e);)try{const o=await g5(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,U5(e,o)}catch(o){await sf(e,o)}Mb(e)&&Db(e)}function V5(n){return Bo(n)&&n.Ta.length<10}function U5(n,e){n.Ta.push(e);const t=jr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Mb(n){return Bo(n)&&!jr(n).x_()&&n.Ta.length>0}function Db(n){jr(n).start()}async function L5(n){jr(n).ra()}async function O5(n){const e=jr(n);for(const t of n.Ta)e.ea(t.mutations)}async function H5(n,e,t){const i=n.Ta.shift(),o=Cg.from(i,e,t);await Nb(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Pf(n)}async function F5(n,e){e&&jr(n).X_&&await(async function(i,o){if((function(u){return EO(u)&&u!==ae.ABORTED})(o.code)){const a=i.Ta.shift();jr(i).B_(),await Nb(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Pf(i)}})(n,e),Mb(n)&&Db(n)}async function yS(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ye(Ho,"RemoteStore received new credentials");const i=Bo(t);t.Ea.add(3),await Bu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Df(t)}async function G5(n,e){const t=Oe(n);e?(t.Ea.delete(2),await Df(t)):e||(t.Ea.add(2),await Bu(t),t.Ra.set("Unknown"))}function ll(n){return n.ma||(n.ma=(function(t,i,o){const a=Oe(t);return a.sa(),new b5(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:M5.bind(null,n),t_:D5.bind(null,n),r_:P5.bind(null,n),H_:k5.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),kg(n)?Pg(n):n.Ra.set("Unknown")):(await n.ma.stop(),Rb(n))}))),n.ma}function jr(n){return n.fa||(n.fa=(function(t,i,o){const a=Oe(t);return a.sa(),new w5(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:L5.bind(null,n),r_:F5.bind(null,n),ta:O5.bind(null,n),na:H5.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Pf(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(Ho,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,f=new Vg(e,t,u,o,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(n,e){if(er("AsyncQueue",`${e}: ${n}`),al(n))return new Se(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{static emptySet(e){return new Ba(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||xe.comparator(t.key,i.key):(t,i)=>xe.comparator(t.key,i.key),this.keyedMap=hu(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ba)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ba;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.ga=new Pt(xe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wa{constructor(e,t,i,o,a,u,f,g,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Wa(e,t,Ba.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class q5{constructor(){this.queries=_S(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Oe(t),a=o.queries;o.queries=_S(),a.forEach(((u,f)=>{for(const g of f.Sa)g.onError(i)}))})(this,new Se(ae.ABORTED,"Firestore shutting down"))}}function _S(){return new Go((n=>jC(n)),wf)}async function Pb(n,e){const t=Oe(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new B5,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const f=Ug(u,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Lg(t)}async function kb(n,e){const t=Oe(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function z5(n,e){const t=Oe(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const f of u.Sa)f.Fa(o)&&(i=!0);u.wa=o}}i&&Lg(t)}function $5(n,e,t){const i=Oe(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function Lg(n){n.Ca.forEach((e=>{e.next()}))}var Vm,TS;(TS=Vm||(Vm={})).Ma="default",TS.Cache="cache";class Vb{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Wa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.key=e}}class Lb{constructor(e){this.key=e}}class K5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=ZC(e),this.tu=new Ba(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new vS,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),w=If(this.query,T)?T:null,V=!!S&&this.mutatedKeys.has(S.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;S&&w?S.data.isEqual(w.data)?V!==k&&(i.track({type:3,doc:w}),P=!0):this.su(S,w)||(i.track({type:2,doc:w}),P=!0,(g&&this.eu(w,g)>0||h&&this.eu(w,h)<0)&&(f=!0)):!S&&w?(i.track({type:0,doc:w}),P=!0):S&&!w&&(i.track({type:1,doc:S}),P=!0,(g||h)&&(f=!0)),P&&(w?(u=u.add(w),a=k?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,T)=>(function(w,V){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:P})}};return k(w)-k(V)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,h=g!==this.Za;return this.Za=g,u.length!==0||h?{snapshot:new Wa(this.query,e.tu,a,u,e.mutatedKeys,g===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Lb(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Ub(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Og="SyncEngine";class Y5{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class J5{constructor(e){this.key=e,this.hu=!1}}class Q5{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Go((f=>jC(f)),wf),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(xe.comparator),this.Au=new Map,this.Ru=new Ig,this.Vu={},this.mu=new Map,this.fu=Xa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function X5(n,e,t=!0){const i=qb(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await Ob(i,e,t,!0),o}async function W5(n,e){const t=qb(n);await Ob(t,e,!0,!1)}async function Ob(n,e,t,i){const o=await y5(n.localStore,ys(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let f;return i&&(f=await j5(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&Ib(n.remoteStore,o),f}async function j5(n,e,t,i,o){n.pu=(T,S,w)=>(async function(k,P,$,F){let ee=P.view.ru($);ee.Cs&&(ee=await fS(k.localStore,P.query,!1).then((({documents:M})=>P.view.ru(M,ee))));const re=F&&F.targetChanges.get(P.targetId),ce=F&&F.targetMismatches.get(P.targetId)!=null,pe=P.view.applyChanges(ee,k.isPrimaryClient,re,ce);return SS(k,P.targetId,pe.au),pe.snapshot})(n,T,S,w);const a=await fS(n.localStore,e,!0),u=new K5(e,a.Qs),f=u.ru(a.documents),g=Gu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(f,n.isPrimaryClient,g);SS(n,t,h.au);const v=new Y5(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function Z5(n,e,t){const i=Oe(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!wf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Pm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Mg(i.remoteStore,o.targetId),Um(i,o.targetId)})).catch(ol)):(Um(i,o.targetId),await Pm(i.localStore,o.targetId,!0))}async function e3(n,e){const t=Oe(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Mg(t.remoteStore,i.targetId))}async function t3(n,e,t){const i=l3(n);try{const o=await(function(u,f){const g=Oe(u),h=xt.now(),v=f.reduce(((w,V)=>w.add(V.key)),Ze());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let V=tr(),k=Ze();return g.Ns.getEntries(w,v).next((P=>{V=P,V.forEach((($,F)=>{F.isValidDocument()||(k=k.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,V))).next((P=>{T=P;const $=[];for(const F of f){const ee=gO(F,T.get(F.key).overlayedDocument);ee!=null&&$.push(new io(F.key,ee,$C(ee.value.mapValue),vs.exists(!0)))}return g.mutationQueue.addMutationBatch(w,h,$,f)})).next((P=>{S=P;const $=P.applyToLocalDocumentSet(T,k);return g.documentOverlayCache.saveOverlays(w,P.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:tb(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,f,g){let h=u.Vu[u.currentUser.toKey()];h||(h=new Pt(je)),h=h.insert(f,g),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await qu(i,o.changes),await Pf(i.remoteStore)}catch(o){const a=Ug(o,"Failed to persist write");t.reject(a)}}async function Hb(n,e){const t=Oe(n);try{const i=await p5(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?dt(u.hu,14607):o.removedDocuments.size>0&&(dt(u.hu,42227),u.hu=!1))})),await qu(t,i,e)}catch(i){await ol(i)}}function ES(n,e,t){const i=Oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const f=u.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(u,f){const g=Oe(u);g.onlineState=f;let h=!1;g.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(f)&&(h=!0)})),h&&Lg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function n3(n,e,t){const i=Oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new Pt(xe.comparator);u=u.insert(a,In.newNoDocument(a,Ue.min()));const f=Ze().add(a),g=new Nf(Ue.min(),new Map,new Pt(je),u,f);await Hb(i,g),i.du=i.du.remove(a),i.Au.delete(e),Hg(i)}else await Pm(i.localStore,e,!1).then((()=>Um(i,e,t))).catch(ol)}async function i3(n,e){const t=Oe(n),i=e.batch.batchId;try{const o=await h5(t.localStore,e);Gb(t,i,null),Fb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await qu(t,o)}catch(o){await ol(o)}}async function s3(n,e,t){const i=Oe(n);try{const o=await(function(u,f){const g=Oe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return g.mutationQueue.lookupMutationBatch(h,f).next((T=>(dt(T!==null,37113),v=T.keys(),g.mutationQueue.removeMutationBatch(h,T)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>g.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);Gb(i,e,t),Fb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await qu(i,o)}catch(o){await ol(o)}}function Fb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Gb(n,e,t){const i=Oe(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Um(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Bb(n,i)}))}function Bb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Mg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Hg(n))}function SS(n,e,t){for(const i of t)i instanceof Ub?(n.Ru.addReference(i.key,e),r3(n,i)):i instanceof Lb?(ye(Og,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Bb(n,i.key)):De(19791,{wu:i})}function r3(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ye(Og,"New document in limbo: "+t),n.Eu.add(i),Hg(n))}function Hg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(Dt.fromString(e)),i=n.fu.next();n.Au.set(i,new J5(t)),n.du=n.du.insert(t,i),Ib(n.remoteStore,new Gr(ys(bf(t.path)),i,"TargetPurposeLimboResolution",Ef.ce))}}async function qu(n,e,t){const i=Oe(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{u.push(i.pu(g,e,t).then((h=>{var v;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(h){o.push(h);const T=Rg.As(g.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(g,h){const v=Oe(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(S=>se.forEach(S.Es,(w=>v.persistence.referenceDelegate.addReference(T,S.targetId,w))).next((()=>se.forEach(S.ds,(w=>v.persistence.referenceDelegate.removeReference(T,S.targetId,w)))))))))}catch(T){if(!al(T))throw T;ye(Ng,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const w=v.Ms.get(S),V=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(V);v.Ms=v.Ms.insert(S,k)}}})(i.localStore,a))}async function o3(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ye(Og,"User change. New user:",e.toKey());const i=await Ab(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((f=>{f.forEach((g=>{g.reject(new Se(ae.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await qu(t,i.Ls)}}function a3(n,e){const t=Oe(n),i=t.Au.get(e);if(i&&i.hu)return Ze().add(i.key);{let o=Ze();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const f=t.Tu.get(u);o=o.unionWith(f.view.nu)}return o}}function qb(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n3.bind(null,e),e.Pu.H_=z5.bind(null,e.eventManager),e.Pu.yu=$5.bind(null,e.eventManager),e}function l3(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=i3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s3.bind(null,e),e}class rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return f5(this.persistence,new u5,e.initialUser,this.serializer)}Cu(e){return new Sb(xg.mi,this.serializer)}Du(e){return new _5}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rf.provider={build:()=>new rf};class u3 extends rf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dt(this.persistence.referenceDelegate instanceof nf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new JO(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new Sb((i=>nf.mi(i,t)),this.serializer)}}class Lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ES(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=o3.bind(null,this.syncEngine),await G5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new q5})()}createDatastore(e){const t=Mf(e.databaseInfo.databaseId),i=(function(a){return new C5(a)})(e.databaseInfo);return(function(a,u,f,g){return new x5(a,u,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,f){return new N5(i,o,a,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>ES(this.syncEngine,t,0)),(function(){return mS.v()?new mS:new T5})())}createSyncEngine(e,t){return(function(o,a,u,f,g,h,v){const T=new Q5(o,a,u,f,g,h);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Oe(o);ye(Ho,"RemoteStore shutting down."),a.Ea.add(5),await Bu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Lm.provider={build:()=>new Lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="FirestoreClient";class c3{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=wn.UNAUTHENTICATED,this.clientId=gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ye(Zr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ye(Zr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ug(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jp(n,e){n.asyncQueue.verifyOperationInProgress(),ye(Zr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Ab(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function AS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await d3(n);ye(Zr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>yS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>yS(e.remoteStore,o))),n._onlineComponents=e}async function d3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(Zr,"Using user provided OfflineComponentProvider");try{await jp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;$a("Error using user provided cache. Falling back to memory cache: "+t),await jp(n,new rf)}}else ye(Zr,"Using default OfflineComponentProvider"),await jp(n,new u3(void 0));return n._offlineComponents}async function $b(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(Zr,"Using user provided OnlineComponentProvider"),await AS(n,n._uninitializedComponentsProvider._online)):(ye(Zr,"Using default OnlineComponentProvider"),await AS(n,new Lm))),n._onlineComponents}function f3(n){return $b(n).then((e=>e.syncEngine))}async function Om(n){const e=await $b(n),t=e.eventManager;return t.onListen=X5.bind(null,e.syncEngine),t.onUnlisten=Z5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=W5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=e3.bind(null,e.syncEngine),t}function h3(n,e,t={}){const i=new $r;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,g,h){const v=new zb({next:S=>{v.Nu(),u.enqueueAndForget((()=>kb(a,T)));const w=S.docs.has(f);!w&&S.fromCache?h.reject(new Se(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&g&&g.source==="server"?h.reject(new Se(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new Vb(bf(f.path),v,{includeMetadataChanges:!0,qa:!0});return Pb(a,T)})(await Om(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firestore.googleapis.com",bS=!0;class wS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yb,this.ssl=bS}else this.host=e.host,this.ssl=e.ssl??bS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Eb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KO)throw new Se(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fg{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new y4;switch(i.type){case"firstParty":return new E4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=CS.get(t);i&&(ye("ComponentProvider","Removing Datastore"),CS.delete(t),i.terminate())})(this),Promise.resolve()}}function p3(n,e,t,i={}){var h;n=gs(n,Fg);const o=to(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(eg(`https://${f}`),tg("Firestore",!0)),a.host!==Yb&&a.host!==f&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...a,host:f,ssl:o,emulatorOptions:i};if(!Kr(g,u)&&(n._setSettings(g),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=wn.MOCK_USER;else{v=Gk(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Se(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new wn(S)}n._authCredentials=new v4(new kC(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new kf(this.firestore,e,this._query)}}class jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Hu(t,jt._jsonSchema))return new jt(e,i||null,new xe(Dt.fromString(t.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Wt("string",jt._jsonSchemaVersion),referencePath:Wt("string")};class Pu extends kf{constructor(e,t,i){super(e,t,bf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new xe(e))}withConverter(e){return new Pu(this.firestore,e,this._path)}}function Au(n,e,...t){if(n=rn(n),arguments.length===1&&(e=gg.newId()),I4("doc","path",e),n instanceof Fg){const i=Dt.fromString(e,...t);return FE(i),new jt(n,null,new xe(i))}{if(!(n instanceof jt||n instanceof Pu))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Dt.fromString(e,...t));return FE(i),new jt(n.firestore,n instanceof Pu?n.converter:null,new xe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="AsyncQueue";class xS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bb(this,"async_queue_retry"),this._c=()=>{const i=Wp();i&&ye(IS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Wp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Wp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!al(e))throw e;ye(IS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,er("INTERNAL UNHANDLED ERROR: ",RS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Vg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&De(47125,{Pc:RS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function RS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class ja extends Fg{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new xS,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xS(e),this._firestoreClient=void 0,await e}}}function m3(n,e){const t=typeof n=="object"?n:sg(),i=typeof n=="string"?n:Qd,o=yf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=qA("firestore");a&&p3(o,...a)}return o}function Gg(n){if(n._terminated)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||g3(n),n._firestoreClient}function g3(n){var i,o,a;const e=n._freezeSettings(),t=(function(f,g,h,v){return new H4(f,g,h,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Kb(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new c3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ni(En.fromBase64String(e))}catch(t){throw new Se(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ni(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hu(e,Ni._jsonSchema))return Ni.fromBase64String(e.bytes)}}Ni._jsonSchemaVersion="firestore/bytes/1.0",Ni._jsonSchema={type:Wt("string",Ni._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(e){if(Hu(e,Ts._jsonSchema))return new Ts(e.latitude,e.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:Wt("string",Ts._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hu(e,Es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Es(e.vectorValues);throw new Se(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Es._jsonSchemaVersion="firestore/vectorValue/1.0",Es._jsonSchema={type:Wt("string",Es._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=/^__.*__$/;class v3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new io(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fu(e,this.data,t,this.fieldTransforms)}}class Jb{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new io(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class Lf{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return of(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Qb(this.Ac)&&y3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _3{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Mf(e)}Cc(e,t,i,o=!1){return new Lf({Ac:e,methodName:t,Dc:i,path:Tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xb(n){const e=n._freezeSettings(),t=Mf(n._databaseId);return new _3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function T3(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);qg("Data must be an object, but it was:",u,i);const f=Wb(i,u);let g,h;if(a.merge)g=new hi(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=Hm(e,T,t);if(!u.contains(S))throw new Se(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Zb(v,S)||v.push(S)}g=new hi(v),h=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,h=u.fieldTransforms;return new v3(new Zn(f),g,h)}class Of extends Uf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Of}}function E3(n,e,t){return new Lf({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bg extends Uf{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=E3(this,e,!0),i=this.vc.map((a=>zu(a,t))),o=new Qa(i);return new fO(e.path,o)}isEqual(e){return e instanceof Bg&&Kr(this.vc,e.vc)}}function S3(n,e,t,i){const o=n.Cc(1,e,t);qg("Data must be an object, but it was:",o,i);const a=[],u=Zn.empty();no(i,((g,h)=>{const v=zg(e,g,t);h=rn(h);const T=o.yc(v);if(h instanceof Of)a.push(v);else{const S=zu(h,T);S!=null&&(a.push(v),u.set(v,S))}}));const f=new hi(a);return new Jb(u,f,o.fieldTransforms)}function A3(n,e,t,i,o,a){const u=n.Cc(1,e,t),f=[Hm(e,i,t)],g=[o];if(a.length%2!=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)f.push(Hm(e,a[S])),g.push(a[S+1]);const h=[],v=Zn.empty();for(let S=f.length-1;S>=0;--S)if(!Zb(h,f[S])){const w=f[S];let V=g[S];V=rn(V);const k=u.yc(w);if(V instanceof Of)h.push(w);else{const P=zu(V,k);P!=null&&(h.push(w),v.set(w,P))}}const T=new hi(h);return new Jb(v,T,u.fieldTransforms)}function zu(n,e){if(jb(n=rn(n)))return qg("Unsupported field value:",e,n),Wb(n,e);if(n instanceof Uf)return(function(i,o){if(!Qb(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const f of i){let g=zu(f,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),a.push(g),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return uO(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=xt.fromDate(i);return{timestampValue:tf(o.serializer,a)}}if(i instanceof xt){const a=new xt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:tf(o.serializer,a)}}if(i instanceof Ts)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ni)return{bytesValue:pb(o.serializer,i._byteString)};if(i instanceof jt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:wg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Es)return(function(u,f){return{mapValue:{fields:{[qC]:{stringValue:zC},[Xd]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return Ag(f.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${yg(i)}`)})(n,e)}function Wb(n,e){const t={};return LC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(n,((i,o)=>{const a=zu(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function jb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xt||n instanceof Ts||n instanceof Ni||n instanceof jt||n instanceof Uf||n instanceof Es)}function qg(n,e,t){if(!jb(t)||!VC(t)){const i=yg(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Hm(n,e,t){if((e=rn(e))instanceof Vf)return e._internalPath;if(typeof e=="string")return zg(n,e);throw of("Field path arguments must be of type string or ",n,!1,void 0,t)}const C3=new RegExp("[~\\*/\\[\\]]");function zg(n,e,t){if(e.search(C3)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vf(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function of(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(a||u)&&(g+=" (found",a&&(g+=` in field ${i}`),u&&(g+=` in document ${o}`),g+=")"),new Se(ae.INVALID_ARGUMENT,f+n+g)}function Zb(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class b3 extends ew{data(){return super.data()}}function tw(n,e){return typeof e=="string"?zg(n,e):e instanceof Vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Se(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class I3{convertValue(e,t="none"){switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return no(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[Xd].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>qt(u.doubleValue)));return new Es(t)}convertGeoPoint(e){return new Ts(qt(e.latitude),qt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Af(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=Qr(e);return new xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Dt.fromString(e);dt(Tb(i),9688,{name:e});const o=new Nu(i.get(1),i.get(3)),a=new xe(i.popFirst(5));return o.isEqual(t)||er(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vo extends ew{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(tw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vo._jsonSchema={type:Wt("string",Vo._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Pd extends Vo{data(e={}){return super.data(e)}}class qa{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new mu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Pd(this._firestore,this._userDataWriter,i.key,i,new mu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((f=>{const g=new Pd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new mu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const g=new Pd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new mu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,v=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:R3(f.type),doc:g,oldIndex:h,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(n){n=gs(n,jt);const e=gs(n.firestore,ja);return h3(Gg(e),n._key).then((t=>sw(e,n,t)))}qa._jsonSchemaVersion="firestore/querySnapshot/1.0",qa._jsonSchema={type:Wt("string",qa._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class nw extends I3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ni(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function Fm(n,e,t){n=gs(n,jt);const i=gs(n.firestore,ja),o=x3(n.converter,e,t);return iw(i,[T3(Xb(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,vs.none())])}function MS(n,e,t,...i){n=gs(n,jt);const o=gs(n.firestore,ja),a=Xb(o);let u;return u=typeof(e=rn(e))=="string"||e instanceof Vf?A3(a,"updateDoc",n._key,e,t,i):S3(a,"updateDoc",n._key,e),iw(o,[u.toMutation(n._key,vs.exists(!0))])}function M3(n,...e){var g,h,v;n=rn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||NS(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(NS(e[i])){const T=e[i];e[i]=(g=T.next)==null?void 0:g.bind(T),e[i+1]=(h=T.error)==null?void 0:h.bind(T),e[i+2]=(v=T.complete)==null?void 0:v.bind(T)}let a,u,f;if(n instanceof jt)u=gs(n.firestore,ja),f=bf(n._key.path),a={next:T=>{e[i]&&e[i](sw(u,n,T))},error:e[i+1],complete:e[i+2]};else{const T=gs(n,kf);u=gs(T.firestore,ja),f=T._query;const S=new nw(u);a={next:w=>{e[i]&&e[i](new qa(u,S,T,w))},error:e[i+1],complete:e[i+2]},w3(n._query)}return(function(S,w,V,k){const P=new zb(k),$=new Vb(w,P,V);return S.asyncQueue.enqueueAndForget((async()=>Pb(await Om(S),$))),()=>{P.Nu(),S.asyncQueue.enqueueAndForget((async()=>kb(await Om(S),$)))}})(Gg(u),f,o,a)}function iw(n,e){return(function(i,o){const a=new $r;return i.asyncQueue.enqueueAndForget((async()=>t3(await f3(i),o,a))),a.promise})(Gg(n),e)}function sw(n,e,t){const i=t.docs.get(e._key),o=new nw(n);return new Vo(n,o,e._key,i,new mu(t.hasPendingWrites,t.fromCache),e.converter)}function DS(...n){return new Bg("arrayUnion",n)}(function(e,t=!0){(function(o){rl=o})(il),Uo(new Yr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),f=new ja(new _4(i.getProvider("auth-internal")),new S4(u,i.getProvider("app-check-internal")),(function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Se(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nu(h.options.projectId,v)})(u,o),u);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),ps(UE,LE,e),ps(UE,LE,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="type.googleapis.com/google.protobuf.Int64Value",P3="type.googleapis.com/google.protobuf.UInt64Value";function rw(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function af(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>af(e));if(typeof n=="function"||typeof n=="object")return rw(n,e=>af(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Za(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case D3:case P3:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Za(e)):typeof n=="function"||typeof n=="object"?rw(n,e=>Za(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ei extends bs{constructor(e,t,i){super(`${$g}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,ei.prototype)}}function k3(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function lf(n,e){let t=k3(n),i=t,o;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!PS[u])return new ei("internal","internal");t=PS[u],i=u}const f=a.message;typeof f=="string"&&(i=f),o=a.details,o!==void 0&&(o=Za(o))}}catch{}return t==="ok"?null:new ei(t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t,i,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ri(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||i.get().then(a=>this.messaging=a,()=>{}),this.appCheck||o==null||o.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="us-central1",U3=/^data: (.*?)(?:\n|$)/;function L3(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new ei("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class O3{constructor(e,t,i,o,a=Gm,u=(...f)=>fetch(...f)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new V3(e,t,i,o),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(a);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=Gm}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function H3(n,e,t){const i=to(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(eg(n.emulatorOrigin+"/backends"),tg("Functions",!0))}function F3(n,e,t){const i=o=>B3(n,e,o,{});return i.stream=(o,a)=>z3(n,e,o,a),i}function ow(n){return n.emulatorOrigin&&to(n.emulatorOrigin)?"include":void 0}async function G3(n,e,t,i,o){t["Content-Type"]="application/json";let a;try{a=await i(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:ow(o)})}catch{return{status:0,json:null}}let u=null;try{u=await a.json()}catch{}return{status:a.status,json:u}}async function aw(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function B3(n,e,t,i){const o=n._url(e);return q3(n,o,t,i)}async function q3(n,e,t,i){t=af(t);const o={data:t},a=await aw(n,i),u=i.timeout||7e4,f=L3(u),g=await Promise.race([G3(e,o,a,n.fetchImpl,n),f.promise,n.cancelAllRequests]);if(f.cancel(),!g)throw new ei("cancelled","Firebase Functions instance was deleted.");const h=lf(g.status,g.json);if(h)throw h;if(!g.json)throw new ei("internal","Response is not valid JSON object.");let v=g.json.data;if(typeof v>"u"&&(v=g.json.result),typeof v>"u")throw new ei("internal","Response is missing data field.");return{data:Za(v)}}function z3(n,e,t,i){const o=n._url(e);return $3(n,o,t,i||{})}async function $3(n,e,t,i){var S;t=af(t);const o={data:t},a=await aw(n,i);a["Content-Type"]="application/json",a.Accept="text/event-stream";let u;try{u=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:a,signal:i==null?void 0:i.signal,credentials:ow(n)})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const k=new ei("cancelled","Request was cancelled.");return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}const V=lf(0,null);return{data:Promise.reject(V),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(V)}}}}}}let f,g;const h=new Promise((w,V)=>{f=w,g=V});(S=i==null?void 0:i.signal)==null||S.addEventListener("abort",()=>{const w=new ei("cancelled","Request was cancelled.");g(w)});const v=u.body.getReader(),T=K3(v,f,g,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const w=T.getReader();return{async next(){const{value:V,done:k}=await w.read();return{value:V,done:k}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:h}}function K3(n,e,t,i){const o=(u,f)=>{const g=u.match(U3);if(!g)return;const h=g[1];try{const v=JSON.parse(h);if("result"in v){e(Za(v.result));return}if("message"in v){f.enqueue(Za(v.message));return}if("error"in v){const T=lf(0,v);f.error(T),t(T);return}}catch(v){if(v instanceof ei){f.error(v),t(v);return}}},a=new TextDecoder;return new ReadableStream({start(u){let f="";return g();async function g(){if(i!=null&&i.aborted){const h=new ei("cancelled","Request was cancelled");return u.error(h),t(h),Promise.resolve()}try{const{value:h,done:v}=await n.read();if(v){f.trim()&&o(f.trim(),u),u.close();return}if(i!=null&&i.aborted){const S=new ei("cancelled","Request was cancelled");u.error(S),t(S),await n.cancel();return}f+=a.decode(h,{stream:!0});const T=f.split(`
`);f=T.pop()||"";for(const S of T)S.trim()&&o(S.trim(),u);return g()}catch(h){const v=h instanceof ei?h:lf(0,null);u.error(v),t(v)}}},cancel(){return n.cancel()}})}const kS="@firebase/functions",VS="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="auth-internal",J3="app-check-internal",Q3="messaging-internal";function X3(n){const e=(t,{instanceIdentifier:i})=>{const o=t.getProvider("app").getImmediate(),a=t.getProvider(Y3),u=t.getProvider(Q3),f=t.getProvider(J3);return new O3(o,a,u,f,i)};Uo(new Yr($g,e,"PUBLIC").setMultipleInstances(!0)),ps(kS,VS,n),ps(kS,VS,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(n=sg(),e=Gm){const i=yf(rn(n),$g).getImmediate({identifier:e}),o=qA("functions");return o&&j3(i,...o),i}function j3(n,e,t){H3(rn(n),e,t)}function Z3(n,e,t){return F3(rn(n),e)}X3();const e6={apiKey:"AIzaSyDj1IdjKsPsC0UKQeUtP8v3sCPo4IRQdt0",authDomain:"web-app-8b273.firebaseapp.com",projectId:"web-app-8b273",storageBucket:"web-app-8b273.firebasestorage.app",messagingSenderId:"512346814244",appId:"1:512346814244:web:a8322ebf02727a508ae5b1",measurementId:"G-B9H3XP1PNB"},Kg=JA(e6),Zp=m4(Kg),t6=new Js,Cu=m3(Kg),n6=W3(Kg),Yg=async(n,e,t,i="gemini-3-flash-preview")=>{if(console.log(`[getGeminiResponse] apiKey='${e}' length=${e==null?void 0:e.length}`),e&&e.trim().length>=30){const o=new Mk({apiKey:e});try{return(await o.models.generateContent({model:i,contents:n,config:{systemInstruction:C_,temperature:t}})).text||""}catch(a){throw console.error("Direct Gemini Error:",a),a}}else{const o=Z3(n6,"callGeminiProxy");try{return(await o({contents:n,systemInstruction:C_,model:i,temperature:t})).data.text||""}catch(a){throw console.error("Proxy Gemini Error:",a),new Error(a.message||"Error connecting to AI service.")}}},i6=async(n,e)=>{try{return await Yg(JSON.stringify(n),e,.3)||"Error: No response generated."}catch(t){return t.message.includes("Trial limit reached")?"TRIAL_LIMIT_REACHED":"Error generating note. Please check console."}},s6=async(n,e,t,i)=>{const o=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT MEDICAL NOTE DRAFT:
    """
    ${e}
    """
    
    USER REFINEMENT INSTRUCTION:
    "${t}"
    
    CRITICAL RULES:
    1. PRIORITY: Adhere to user instructions while maintaining the facts in the ORIGINAL DATA SOURCE.
    2. CONSISTENCY: Maintain all formatting rules (Vitals order, "denied" list, etc.) from the system instructions.
    3. OUTPUT: Provide ONLY the full updated medical note. No conversational filler.
  `;try{return await Yg(o,i,.4)}catch(a){return a.message&&a.message.includes("Trial limit reached")?"TRIAL_LIMIT_REACHED":e}},r6=async(n,e,t,i,o)=>{const a=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT FULL NOTE:
    """
    ${e}
    """
    
    The user wants to rewrite the following SPECIFIC SEGMENT:
    "--- ${t} ---"
    
    USER INSTRUCTION FOR THIS SEGMENT:
    "${i}"
    
    CRITICAL RULES:
    1. PRIORITY: User instructions are the highest priority. If the user asks to change the format or tone for this segment, follow it exactly.
    2. MEDICAL STANDARDS: Unless the user explicitly asks to break medical conventions, maintain the standards defined in the original system instructions (e.g., Vitals order, forbidden abbreviations, academic tone).
    3. SCOPE: ONLY rewrite the selected segment. Do not change parts of the note outside of this segment.
    4. OUTPUT: Provide ONLY the new rewritten text for that segment. Do not include any explanations or conversational filler.
  `;try{return await Yg(a,o,.4)}catch(u){return u.message&&u.message.includes("Trial limit reached")?"TRIAL_LIMIT_REACHED":t}},lw=oe.createContext(void 0),o6=({children:n})=>{const[e,t]=oe.useState(null),[i,o]=oe.useState(!0),[a,u]=oe.useState(null),[f,g]=oe.useState(null),h=async k=>{try{const P=Au(Cu,"users",k),$=await N3(P);$.exists()?u($.data().geminiApiKey||null):u(null)}catch(P){console.error("Error fetching API key:",P),u(null)}};oe.useEffect(()=>{const k=iL(Zp,async P=>{t(P),P?await h(P.uid):u(null),o(!1)});return()=>k()},[]);const v=()=>g(null),T=async()=>{g(null);try{await CL(Zp,t6)}catch(k){console.error("Error signing in with Google",k);let P="Login failed. Please try again.";if(k.code==="auth/configuration-not-found")P=` Firebase Console 
 Authentication  'Get Started'`;else if(k.code==="auth/operation-not-allowed")P=` Google 
 Firebase Console > Authentication > Sign-in method  Google`;else if(k.code==="auth/unauthorized-domain")P=` (Unauthorized Domain)

 (${window.location.hostname})  Firebase 
 Firebase Console > Authentication > Settings > Authorized domains `;else{if(k.code==="auth/popup-closed-by-user")return;k.message&&(P=`Login failed: ${k.message}`)}g(P)}},S=async()=>{try{await sL(Zp),u(null),g(null)}catch(k){console.error("Error signing out",k)}},w=async k=>{if(e)try{await Fm(Au(Cu,"users",e.uid),{geminiApiKey:k,updatedAt:new Date().toISOString(),email:e.email},{merge:!0}),u(k)}catch(P){throw console.error("Error saving API key:",P),P}},V=async()=>{if(e)try{await Fm(Au(Cu,"users",e.uid),{geminiApiKey:null,updatedAt:new Date().toISOString()},{merge:!0}),u(null)}catch(k){throw console.error("Error removing API key:",k),k}};return A.jsx(lw.Provider,{value:{user:e,loading:i,apiKey:a,error:f,signInWithGoogle:T,signOut:S,saveApiKey:w,removeApiKey:V,clearError:v},children:n})},uw=()=>{const n=oe.useContext(lw);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n};class a6 extends oe.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){var e;return this.state.hasError?A.jsxs("div",{className:"p-8 bg-red-50 text-red-700 h-screen w-screen flex flex-col items-center justify-center",children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),A.jsx("pre",{className:"bg-red-100 p-4 rounded overflow-auto max-w-2xl text-sm",children:(e=this.state.error)==null?void 0:e.toString()})]}):this.props.children}}const l6=()=>{const{user:n,apiKey:e,saveApiKey:t,removeApiKey:i,signOut:o}=uw(),[a,u]=oe.useState([{id:"1",date:new Date().toISOString().split("T")[0],dateType:"date",categorizedContent:{},otherInformation:""}]),[f,g]=oe.useState("profile"),[h,v]=oe.useState(!1),[T,S]=oe.useState({}),[w,V]=oe.useState(0);oe.useEffect(()=>{if(!n){S({}),V(0);return}const le=M3(Au(Cu,"users",n.uid),Ae=>{if(Ae.exists()){const Pe=Ae.data();S(Pe.customItems||{}),V(Pe.trial_usage_count||0)}});return()=>le()},[n]);const k=async(le,Ae)=>{if(!n)return;const Pe=Au(Cu,"users",n.uid);try{await MS(Pe,{[`customItems.${le}`]:DS(Ae)})}catch($e){console.error("Error adding custom item:",$e),await Fm(Pe,{customItems:{[le]:[Ae]}},{merge:!0}),await MS(Pe,{[`customItems.${le}`]:DS(Ae)})}},[P,$]=oe.useState(""),[F,ee]=oe.useState([]),[re,ce]=oe.useState(-1),[pe,M]=oe.useState(!1),[N,R]=oe.useState(!1),[H,O]=oe.useState(!1),[q,D]=oe.useState(null),[Me,ft]=oe.useState({age:"65",gender:"male",underlying_diseases:["Hypertension","Diabetes Mellitus"],control_quality:"",management_modality:"",follow_up_status:""}),[W,de]=oe.useState("himself"),[_e,Ge]=oe.useState(""),[Ke,G]=oe.useState(null),[j,ue]=oe.useState(null),[me,we]=oe.useState(""),[Ie,Be]=oe.useState(!1),[ht,lt]=oe.useState(""),[Nn,pi]=oe.useState(!1),ti=oe.useRef(null),[mi,Sn]=oe.useState(260),[Pi,Mn]=oe.useState(300),[Wi,ki]=oe.useState(380),[nt,pt]=oe.useState(!1),[Fn,ji]=oe.useState(null),Gn=oe.useRef(!1),Ot=oe.useMemo(()=>{for(let le=a.length-1;le>=0;le--){const Ae=a[le].categorizedContent["Definitive diagnosis"];if(Ae&&Ae.trim())return Ae}return"Pending"},[a]),Dn=le=>Ae=>{Gn.current=!0,Ae.preventDefault();const Pe=Ae.clientX,$e=Ae.clientY,it=le==="sidebar"?mi:Pi,on=Wi,Vn=en=>{Gn.current&&(le==="sidebar"?Sn(Math.max(200,Math.min(600,it+(en.clientX-Pe)))):le==="timeline"?Mn(Math.max(200,Math.min(600,it+(en.clientX-Pe)))):le==="genArea"&&ki(Math.max(200,Math.min(window.innerHeight-100,on-(en.clientY-$e)))))},an=()=>{Gn.current=!1,document.removeEventListener("mousemove",Vn),document.removeEventListener("mouseup",an)};document.addEventListener("mousemove",Vn),document.addEventListener("mouseup",an)},Zi=()=>{const le=Date.now().toString();u([...a,{id:le,date:"",dateType:"date",categorizedContent:{},otherInformation:""}]),g(le)},Vi=le=>{if(a.length<=1)return alert("Must have at least one timepoint.");const Ae=a.findIndex(Pe=>Pe.id===le);D({id:le,index:Ae})},Pn=()=>{if(!q)return;const{id:le,index:Ae}=q;u(Pe=>{var it,on;const $e=Pe.filter(Vn=>Vn.id!==le);return f===le&&g(((it=$e[Ae])==null?void 0:it.id)||((on=$e[Ae-1])==null?void 0:on.id)||"profile"),$e}),D(null)},sr=(le,Ae)=>{u(Pe=>Pe.map($e=>$e.id===le?{...$e,...Ae}:$e))},so=(le,Ae)=>{const Pe=a.find($e=>$e.id===Ae);Pe&&u($e=>$e.map(it=>{if(it.id===le){const on={...it.categorizedContent};Object.keys(Pe.categorizedContent).forEach(an=>{const en=Pe.categorizedContent[an];if(en){const bt=on[an]||"";on[an]=bt?`${bt}, ${en}`:en}});let Vn=it.otherInformation;return Pe.otherInformation&&(Vn=Vn?`${Vn}
${Pe.otherInformation}`:Pe.otherInformation),{...it,categorizedContent:on,otherInformation:Vn}}return it}))},ws=(le,Ae)=>{if(f){if(f==="profile"){le==="Underlying disease"&&ft(Pe=>({...Pe,underlying_diseases:Array.from(new Set([...Pe.underlying_diseases,Ae]))}));return}ji({category:le,timestamp:Date.now()}),u(Pe=>Pe.map($e=>{if($e.id===f){const it=$e.categorizedContent[le]||"";return{...$e,categorizedContent:{...$e.categorizedContent,[le]:it?`${it}, ${Ae}`:Ae}}}return $e}))}},Is=()=>({patient_profile:{age:parseInt(Me.age)||0,gender:Me.gender,informant:W,underlying_disease:Me.underlying_diseases,control_status:{quality:Me.control_quality,modality:Me.management_modality,follow_up:Me.follow_up_status}},timepoints:a.map(le=>({date:le.date,vital_sign:le.categorizedContent["Vital Sign"]||"",symptom:le.categorizedContent.Symptom||"",negative_symptom:le.categorizedContent["Negative Symptom"]||"",medical_facility:le.categorizedContent["Medical Facility"]||"",tentative_diagnosis:le.categorizedContent["Tentative Diagnosis"]||"",underlying_disease:le.categorizedContent["Underlying disease"]||"",definitive_diagnosis:le.categorizedContent["Definitive diagnosis"]||"",physical_examination:le.categorizedContent["Physical examination"]||"",lab_data:le.categorizedContent["Lab data"]||"",image_finding:le.categorizedContent["Image finding"]||"",treatment:le.categorizedContent.Treatment||"",other_information:le.otherInformation||""}))}),hn=le=>{const Pe=[...F.slice(0,re+1),le];ee(Pe),ce(Pe.length-1),$(le)},Mt=async()=>{v(!0);try{const le=Is(),Ae=await i6(le,e||"");if(Ae==="TRIAL_LIMIT_REACHED"){alert("Free trial limit reached! Please set your own API Key."),R(!0);return}hn(Ae)}catch(le){console.error("Generation error",le)}finally{v(!1)}},Zt=async le=>{const Ae=le||ht;if(!(!Ae.trim()||!P)){pi(!0);try{const Pe=Is(),$e=await s6(Pe,P,Ae,e||"");hn($e),le||lt("")}finally{pi(!1)}}},At=()=>{if(re>0){const le=re-1;ce(le),$(F[le])}},xs=()=>{if(re<F.length-1){const le=re+1;ce(le),$(F[le])}},Bn=le=>{ce(le),$(F[le]),M(!1)},Ui=()=>{const le=ti.current;if(!le)return;const Ae=le.selectionStart,Pe=le.selectionEnd,$e=le.value.substring(Ae,Pe).trim();if($e.length>0){const it=le.getBoundingClientRect();Ge($e),G({start:Ae,end:Pe}),ue({x:it.left+50,y:it.top+50})}else Ge(""),G(null),ue(null)},kn=async()=>{if(!(!_e||!me||!Ke)){Be(!0);try{const le=Is(),Ae=await r6(le,P,_e,me,e||"");if(Ae==="TRIAL_LIMIT_REACHED"){alert("Trial limit reached! Please set your own API Key."),R(!0);return}const Pe=P.substring(0,Ke.start),$e=P.substring(Ke.end),it=Pe+Ae+$e;hn(it),ue(null),Ge(""),we("")}finally{Be(!1)}}},Li=()=>{P&&(navigator.clipboard.writeText(P),O(!0),setTimeout(()=>O(!1),2e3))},Ct=a.find(le=>le.id===f),qn=!e&&!N;return A.jsxs("div",{className:"h-screen w-screen flex flex-col bg-slate-50 text-slate-800 font-sans overflow-hidden",children:[A.jsx(vR,{isOpen:!!q,onClose:()=>D(null),onConfirm:Pn,title:"Delete Timepoint",message:"Are you sure?"}),A.jsx(TR,{isOpen:qn||N,onSave:async le=>{await t(le),R(!1)},isDismissible:!!e,onDismiss:()=>R(!1),trialUsageCount:w,onStartTrial:()=>R(!1)}),pe&&A.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[A.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>M(!1)}),A.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[A.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-slate-50",children:[A.jsxs("div",{className:"flex items-center space-x-2 text-blue-700",children:[A.jsx(I_,{className:"w-5 h-5"}),A.jsx("h3",{className:"font-bold",children:"Version History"})]}),A.jsx("button",{onClick:()=>M(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:A.jsx(bu,{className:"w-5 h-5"})})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[F.length===0&&A.jsx("p",{className:"text-center text-slate-400 py-10",children:"No history available yet."}),[...F].reverse().map((le,Ae)=>{const Pe=F.length-1-Ae,$e=Pe===re;return A.jsxs("button",{onClick:()=>Bn(Pe),className:`w-full text-left p-4 rounded-xl border-2 transition-all flex items-start space-x-4 ${$e?"border-blue-500 bg-blue-50":"border-slate-100 hover:border-blue-200 hover:bg-slate-50"}`,children:[A.jsx("div",{className:`mt-1 p-2 rounded-lg ${$e?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:A.jsx(Tx,{className:"w-4 h-4"})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex items-center justify-between mb-1",children:[A.jsxs("span",{className:"font-bold text-sm",children:["Version ",Pe+1]}),$e&&A.jsx("span",{className:"text-[10px] font-black uppercase text-blue-600 bg-blue-100 px-2 py-0.5 rounded",children:"Active"})]}),A.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2 italic",children:[le.substring(0,150),"..."]})]}),A.jsx(sx,{className:"w-4 h-4 self-center text-slate-300"})]},Pe)})]})]})]}),A.jsxs("header",{className:"h-14 bg-blue-900 text-white flex items-center px-4 justify-between shadow-md z-20 flex-shrink-0",children:[A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx(qS,{className:"w-5 h-5"}),A.jsx("h1",{className:"font-bold text-lg hidden md:block",children:"Smart Medical Record"})]}),A.jsxs("div",{className:"hidden md:flex text-sm opacity-80 gap-4",children:[A.jsxs("span",{children:["Patient: ",Me.age,"y/",Me.gender]}),A.jsxs("span",{className:"max-w-[300px] truncate",children:["Dx: ",Ot]})]}),A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("button",{onClick:()=>R(!0),className:"p-1.5 rounded-full hover:bg-blue-800 text-blue-200 transition-colors",title:"API Key Settings",children:A.jsx(zS,{className:"w-4 h-4"})}),A.jsxs("div",{className:"flex items-center space-x-2 bg-blue-800 rounded-full pl-1 pr-3 py-1",children:[n!=null&&n.photoURL?A.jsx("img",{src:n.photoURL,alt:"User",className:"w-6 h-6 rounded-full border border-white/20"}):A.jsx(BS,{className:"w-6 h-6 text-blue-200"}),A.jsx("span",{className:"text-xs font-semibold max-w-[100px] truncate",children:(n==null?void 0:n.displayName)||(n==null?void 0:n.email)})]}),A.jsx("button",{onClick:o,className:"p-1.5 hover:bg-red-600 rounded-full transition-colors text-white",title:"Sign Out",children:A.jsx(Lx,{className:"w-4 h-4"})})]})]}),A.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[A.jsx("div",{style:{width:mi},className:"flex-shrink-0 z-10 flex flex-col",children:A.jsx(mR,{onItemClick:ws,customItems:T,onAddCustomItem:k})}),A.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:Dn("sidebar")}),A.jsx("div",{style:{width:Pi},className:"flex-shrink-0 z-0 flex flex-col",children:A.jsx(gR,{events:a,activeEventId:f,onSelectEvent:g,onAddEvent:Zi,onDeleteEvent:Vi,onCopyFromEvent:so})}),A.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:Dn("timeline")}),A.jsx("div",{className:"flex-1 min-w-0",children:A.jsx(yR,{event:Ct,onUpdate:sr,profile:Me,onUpdateProfile:ft,isProfileSelected:f==="profile",informant:W,setInformant:de,lastUpdateTrigger:Fn})})]}),!nt&&A.jsx("div",{className:"h-1 bg-slate-300 hover:bg-blue-500 cursor-row-resize z-20",onMouseDown:Dn("genArea")}),A.jsxs("div",{style:{height:nt?"100vh":Wi},className:`flex flex-col border-t-4 border-slate-200 bg-white shadow-2xl transition-all ${nt?"fixed inset-0 z-50":"relative"}`,children:[A.jsxs("div",{className:"px-6 py-3 border-b flex items-center justify-between bg-slate-50",children:[A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx(Ed,{className:"w-5 h-5 text-purple-600"}),A.jsx("h2",{className:"font-bold text-slate-700",children:"AI Generation Area"}),A.jsxs("div",{className:"flex items-center ml-4 bg-white rounded-lg border border-slate-200 p-0.5 shadow-sm",children:[A.jsx("button",{onClick:At,disabled:re<=0,title:"Undo (Ctrl+Z)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 transition-colors",children:A.jsx(rR,{className:"w-4 h-4"})}),A.jsx("button",{onClick:xs,disabled:re>=F.length-1,title:"Redo (Ctrl+Y)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 border-l border-slate-100 transition-colors",children:A.jsx(Jx,{className:"w-4 h-4"})}),A.jsxs("button",{onClick:()=>M(!0),className:"p-1.5 hover:bg-slate-100 rounded text-blue-600 font-bold text-xs flex items-center border-l border-slate-100 transition-colors",children:[A.jsx(I_,{className:"w-3.5 h-3.5 mr-1"}),"V",re+1]})]})]}),A.jsxs("div",{className:"flex items-center space-x-3",children:[P&&A.jsxs("button",{onClick:Li,className:`flex items-center px-4 py-2 rounded-full font-bold text-sm transition-all shadow-sm ${H?"bg-green-100 text-green-700 border border-green-200":"bg-white border border-slate-300 text-slate-700 hover:bg-slate-100 active:scale-95"}`,children:[H?A.jsx(GS,{className:"w-4 h-4 mr-2"}):A.jsx(qm,{className:"w-4 h-4 mr-2"}),H?"Copied":"Copy"]}),A.jsx("button",{onClick:()=>pt(!nt),className:"p-2 text-slate-500 hover:bg-slate-200 rounded-full transition-colors",children:nt?A.jsx(qx,{className:"w-5 h-5"}):A.jsx(Hx,{className:"w-5 h-5"})}),A.jsxs("button",{onClick:Mt,disabled:h,className:`flex items-center px-6 py-2 rounded-full font-bold shadow-md transition-all active:scale-95 ${h?"bg-slate-300 cursor-not-allowed opacity-70":"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:brightness-110"}`,children:[h?A.jsx(gu,{className:"w-4 h-4 mr-2 animate-spin"}):null,h?"Generating...":"Generate Note"]})]})]}),A.jsxs("div",{className:"flex-1 flex bg-slate-50 overflow-hidden",children:[A.jsx("div",{className:"w-[70%] h-full p-4 relative overflow-hidden flex flex-col",children:A.jsxs("div",{className:"flex-1 relative",children:[A.jsx("textarea",{ref:ti,onMouseUp:Ui,onKeyUp:Ui,className:"w-full h-full p-8 bg-white border rounded-lg shadow-inner resize-none font-serif text-lg leading-relaxed custom-scrollbar outline-none focus:ring-2 focus:ring-blue-100 transition-shadow",value:P,onChange:le=>{const Ae=le.target.value;$(Ae)},placeholder:e?"The generated medical admission note will appear here...":"Please set your API Key to start generating notes."}),j&&_e&&A.jsxs("div",{className:"absolute z-[60] bg-white border border-slate-200 rounded-xl shadow-2xl p-4 w-80 animate-in zoom-in-95 duration-200",style:{top:20,right:20},children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsxs("div",{className:"flex items-center space-x-1.5 text-blue-600",children:[A.jsx(uR,{className:"w-4 h-4"}),A.jsx("span",{className:"text-xs font-bold uppercase",children:"Refine Selection"})]}),A.jsx("button",{onClick:()=>{ue(null),Ge("")},className:"text-slate-400 hover:text-slate-600",children:A.jsx(bu,{className:"w-4 h-4"})})]}),A.jsxs("div",{className:"mb-3",children:[A.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Target Text"}),A.jsxs("div",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded border border-slate-100 max-h-20 overflow-y-auto italic",children:['"',_e,'"']})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("textarea",{autoFocus:!0,placeholder:"e.g. Rewrite this more formally...",className:"w-full p-2.5 text-xs border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none h-20",value:me,onChange:le=>we(le.target.value)}),A.jsxs("button",{disabled:Ie||!me.trim(),onClick:kn,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold rounded-lg shadow-md transition-all flex items-center justify-center disabled:bg-slate-300",children:[Ie?A.jsx(gu,{className:"w-3.5 h-3.5 mr-2 animate-spin"}):A.jsx(Ed,{className:"w-3.5 h-3.5 mr-2"}),Ie?"Refining...":"Refine Segment"]})]})]})]})}),A.jsxs("div",{className:"w-[30%] h-full border-l border-slate-200 bg-white flex flex-col",children:[A.jsxs("div",{className:"p-3 border-b flex items-center space-x-2 bg-slate-50/50",children:[A.jsx(Gx,{className:"w-4 h-4 text-blue-600"}),A.jsx("h3",{className:"text-xs font-bold text-slate-700 uppercase tracking-widest",children:" Assistant"})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Quick Refine"}),A.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[A.jsxs("button",{onClick:()=>Zt("Make the note more concise and pithy without losing clinical facts."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[A.jsx(pR,{className:"w-3.5 h-3.5 mr-2 text-yellow-500"}),A.jsx("span",{children:" (Make it concise)"})]}),A.jsxs("button",{onClick:()=>Zt("Analyze the original JSON data and checking if any clinical details are missing in the current draft. Flag them or add them if the data allows."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[A.jsx(ox,{className:"w-3.5 h-3.5 mr-2 text-purple-500"}),A.jsx("span",{children:" (Detail check)"})]}),A.jsxs("button",{onClick:()=>Zt("Carefully check for grammar, prepositions, and article usage. Ensure formal academic medical tone."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[A.jsx(iR,{className:"w-3.5 h-3.5 mr-2 text-blue-500"}),A.jsx("span",{children:" (Grammar check)"})]})]})]}),A.jsx("div",{className:"h-px bg-slate-100 my-2"}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Manual Refinement"}),A.jsx("textarea",{className:"w-full h-32 p-3 text-sm border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-100 outline-none transition-shadow resize-none bg-slate-50/30",placeholder:"e.g. Rewrite the second paragraph to emphasize the fever course...",value:ht,onChange:le=>lt(le.target.value)}),A.jsxs("button",{disabled:Nn||!ht.trim()||!P,onClick:()=>Zt(),className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-xl shadow-md transition-all flex items-center justify-center disabled:bg-slate-200 disabled:text-slate-400",children:[Nn?A.jsx(gu,{className:"w-4 h-4 mr-2 animate-spin"}):A.jsx(Ed,{className:"w-4 h-4 mr-2"}),Nn?"Refining Note...":"Refine Full Note"]})]}),!P&&A.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-100 text-[11px] text-amber-700 italic",children:"Generate a note first to use the refinement assistant."})]})]})]})]})]})},u6=()=>A.jsx(a6,{children:A.jsx(o6,{children:A.jsx(c6,{})})}),c6=()=>{const{user:n,loading:e,signInWithGoogle:t,error:i}=uw();return e?A.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-blue-50",children:A.jsx(gu,{className:"w-10 h-10 text-blue-600 animate-spin"})}):n?A.jsx(l6,{}):A.jsx(_R,{onLogin:t,authError:i})},cw=document.getElementById("root");if(!cw)throw new Error("Could not find root element to mount to");const d6=XI.createRoot(cw);d6.render(A.jsx(LS.StrictMode,{children:A.jsx(u6,{})}));
