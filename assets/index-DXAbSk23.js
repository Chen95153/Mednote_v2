(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function AS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ip={exports:{}},su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function xI(){if(o_)return su;o_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:l}}return su.Fragment=e,su.jsx=t,su.jsxs=t,su}var r_;function RI(){return r_||(r_=1,Ip.exports=xI()),Ip.exports}var C=RI(),xp={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function NI(){if(a_)return Le;a_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,P={};function $(F,X,ce){this.props=F,this.context=X,this.refs=P,this.updater=ce||V}$.prototype.isReactComponent={},$.prototype.setState=function(F,X){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,X,"setState")},$.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function B(){}B.prototype=$.prototype;function Z(F,X,ce){this.props=F,this.context=X,this.refs=P,this.updater=ce||V}var le=Z.prototype=new B;le.constructor=Z,k(le,$.prototype),le.isPureReactComponent=!0;var de=Array.isArray;function pe(){}var N={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function R(F,X,ce){var me=ce.ref;return{$$typeof:n,type:F,key:X,ref:me!==void 0?me:null,props:ce}}function H(F,X){return R(F.type,X,F.props)}function O(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function q(F){var X={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ce){return X[ce]})}var D=/\/+/g;function He(F,X){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):X.toString(36)}function gt(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(pe,pe):(F.status="pending",F.then(function(X){F.status==="pending"&&(F.status="fulfilled",F.value=X)},function(X){F.status==="pending"&&(F.status="rejected",F.reason=X)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function W(F,X,ce,me,Ie){var xe=typeof F;(xe==="undefined"||xe==="boolean")&&(F=null);var Ge=!1;if(F===null)Ge=!0;else switch(xe){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(F.$$typeof){case n:case e:Ge=!0;break;case _:return Ge=F._init,W(Ge(F._payload),X,ce,me,Ie)}}if(Ge)return Ie=Ie(F),Ge=me===""?"."+He(F,0):me,de(Ie)?(ce="",Ge!=null&&(ce=Ge.replace(D,"$&/")+"/"),W(Ie,X,ce,"",function(Ln){return Ln})):Ie!=null&&(O(Ie)&&(Ie=H(Ie,ce+(Ie.key==null||F&&F.key===Ie.key?"":(""+Ie.key).replace(D,"$&/")+"/")+Ge)),X.push(Ie)),1;Ge=0;var ct=me===""?".":me+":";if(de(F))for(var rt=0;rt<F.length;rt++)me=F[rt],xe=ct+He(me,rt),Ge+=W(me,X,ce,xe,Ie);else if(rt=w(F),typeof rt=="function")for(F=rt.call(F),rt=0;!(me=F.next()).done;)me=me.value,xe=ct+He(me,rt++),Ge+=W(me,X,ce,xe,Ie);else if(xe==="object"){if(typeof F.then=="function")return W(gt(F),X,ce,me,Ie);throw X=String(F),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function ue(F,X,ce){if(F==null)return F;var me=[],Ie=0;return W(F,me,"","",function(xe){return X.call(ce,xe,Ie++)}),me}function _e(F){if(F._status===-1){var X=F._result;X=X(),X.then(function(ce){(F._status===0||F._status===-1)&&(F._status=1,F._result=ce)},function(ce){(F._status===0||F._status===-1)&&(F._status=2,F._result=ce)}),F._status===-1&&(F._status=0,F._result=X)}if(F._status===1)return F._result.default;throw F._result}var Ke=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Ze={map:ue,forEach:function(F,X,ce){ue(F,function(){X.apply(this,arguments)},ce)},count:function(F){var X=0;return ue(F,function(){X++}),X},toArray:function(F){return ue(F,function(X){return X})||[]},only:function(F){if(!O(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Le.Activity=T,Le.Children=Ze,Le.Component=$,Le.Fragment=t,Le.Profiler=r,Le.PureComponent=Z,Le.StrictMode=i,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Le.__COMPILER_RUNTIME={__proto__:null,c:function(F){return N.H.useMemoCache(F)}},Le.cache=function(F){return function(){return F.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(F,X,ce){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var me=k({},F.props),Ie=F.key;if(X!=null)for(xe in X.key!==void 0&&(Ie=""+X.key),X)!M.call(X,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&X.ref===void 0||(me[xe]=X[xe]);var xe=arguments.length-2;if(xe===1)me.children=ce;else if(1<xe){for(var Ge=Array(xe),ct=0;ct<xe;ct++)Ge[ct]=arguments[ct+2];me.children=Ge}return R(F.type,Ie,me)},Le.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},Le.createElement=function(F,X,ce){var me,Ie={},xe=null;if(X!=null)for(me in X.key!==void 0&&(xe=""+X.key),X)M.call(X,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ie[me]=X[me]);var Ge=arguments.length-2;if(Ge===1)Ie.children=ce;else if(1<Ge){for(var ct=Array(Ge),rt=0;rt<Ge;rt++)ct[rt]=arguments[rt+2];Ie.children=ct}if(F&&F.defaultProps)for(me in Ge=F.defaultProps,Ge)Ie[me]===void 0&&(Ie[me]=Ge[me]);return R(F,xe,Ie)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(F){return{$$typeof:f,render:F}},Le.isValidElement=O,Le.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:_e}},Le.memo=function(F,X){return{$$typeof:h,type:F,compare:X===void 0?null:X}},Le.startTransition=function(F){var X=N.T,ce={};N.T=ce;try{var me=F(),Ie=N.S;Ie!==null&&Ie(ce,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(pe,Ke)}catch(xe){Ke(xe)}finally{X!==null&&ce.types!==null&&(X.types=ce.types),N.T=X}},Le.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Le.use=function(F){return N.H.use(F)},Le.useActionState=function(F,X,ce){return N.H.useActionState(F,X,ce)},Le.useCallback=function(F,X){return N.H.useCallback(F,X)},Le.useContext=function(F){return N.H.useContext(F)},Le.useDebugValue=function(){},Le.useDeferredValue=function(F,X){return N.H.useDeferredValue(F,X)},Le.useEffect=function(F,X){return N.H.useEffect(F,X)},Le.useEffectEvent=function(F){return N.H.useEffectEvent(F)},Le.useId=function(){return N.H.useId()},Le.useImperativeHandle=function(F,X,ce){return N.H.useImperativeHandle(F,X,ce)},Le.useInsertionEffect=function(F,X){return N.H.useInsertionEffect(F,X)},Le.useLayoutEffect=function(F,X){return N.H.useLayoutEffect(F,X)},Le.useMemo=function(F,X){return N.H.useMemo(F,X)},Le.useOptimistic=function(F,X){return N.H.useOptimistic(F,X)},Le.useReducer=function(F,X,ce){return N.H.useReducer(F,X,ce)},Le.useRef=function(F){return N.H.useRef(F)},Le.useState=function(F){return N.H.useState(F)},Le.useSyncExternalStore=function(F,X,ce){return N.H.useSyncExternalStore(F,X,ce)},Le.useTransition=function(){return N.H.useTransition()},Le.version="19.2.3",Le}var l_;function Um(){return l_||(l_=1,xp.exports=NI()),xp.exports}var re=Um();const CS=AS(re);var Rp={exports:{}},ou={},Np={exports:{}},Mp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function MI(){return u_||(u_=1,(function(n){function e(W,ue){var _e=W.length;W.push(ue);e:for(;0<_e;){var Ke=_e-1>>>1,Ze=W[Ke];if(0<r(Ze,ue))W[Ke]=ue,W[_e]=Ze,_e=Ke;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ue=W[0],_e=W.pop();if(_e!==ue){W[0]=_e;e:for(var Ke=0,Ze=W.length,F=Ze>>>1;Ke<F;){var X=2*(Ke+1)-1,ce=W[X],me=X+1,Ie=W[me];if(0>r(ce,_e))me<Ze&&0>r(Ie,ce)?(W[Ke]=Ie,W[me]=_e,Ke=me):(W[Ke]=ce,W[X]=_e,Ke=X);else if(me<Ze&&0>r(Ie,_e))W[Ke]=Ie,W[me]=_e,Ke=me;else break e}}return ue}function r(W,ue){var _e=W.sortIndex-ue.sortIndex;return _e!==0?_e:W.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var g=[],h=[],_=1,T=null,S=3,w=!1,V=!1,k=!1,P=!1,$=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function le(W){for(var ue=t(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=W)i(h),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(h)}}function de(W){if(k=!1,le(W),!V)if(t(g)!==null)V=!0,pe||(pe=!0,q());else{var ue=t(h);ue!==null&&gt(de,ue.startTime-W)}}var pe=!1,N=-1,M=5,R=-1;function H(){return P?!0:!(n.unstable_now()-R<M)}function O(){if(P=!1,pe){var W=n.unstable_now();R=W;var ue=!0;try{e:{V=!1,k&&(k=!1,B(N),N=-1),w=!0;var _e=S;try{t:{for(le(W),T=t(g);T!==null&&!(T.expirationTime>W&&H());){var Ke=T.callback;if(typeof Ke=="function"){T.callback=null,S=T.priorityLevel;var Ze=Ke(T.expirationTime<=W);if(W=n.unstable_now(),typeof Ze=="function"){T.callback=Ze,le(W),ue=!0;break t}T===t(g)&&i(g),le(W)}else i(g);T=t(g)}if(T!==null)ue=!0;else{var F=t(h);F!==null&&gt(de,F.startTime-W),ue=!1}}break e}finally{T=null,S=_e,w=!1}ue=void 0}}finally{ue?q():pe=!1}}}var q;if(typeof Z=="function")q=function(){Z(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,He=D.port2;D.port1.onmessage=O,q=function(){He.postMessage(null)}}else q=function(){$(O,0)};function gt(W,ue){N=$(function(){W(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(W){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var _e=S;S=ue;try{return W()}finally{S=_e}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(W,ue){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var _e=S;S=W;try{return ue()}finally{S=_e}},n.unstable_scheduleCallback=function(W,ue,_e){var Ke=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ke+_e:Ke):_e=Ke,W){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=_e+Ze,W={id:_++,callback:ue,priorityLevel:W,startTime:_e,expirationTime:Ze,sortIndex:-1},_e>Ke?(W.sortIndex=_e,e(h,W),t(g)===null&&W===t(h)&&(k?(B(N),N=-1):k=!0,gt(de,_e-Ke))):(W.sortIndex=Ze,e(g,W),V||w||(V=!0,pe||(pe=!0,q()))),W},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(W){var ue=S;return function(){var _e=S;S=ue;try{return W.apply(this,arguments)}finally{S=_e}}}})(Mp)),Mp}var c_;function DI(){return c_||(c_=1,Np.exports=MI()),Np.exports}var Dp={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function PI(){if(d_)return Sn;d_=1;var n=Um();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Sn.createPortal=function(g,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(g,h,null,_)},Sn.flushSync=function(g){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=h,i.p=_,i.d.f()}},Sn.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(g,h))},Sn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Sn.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:w}):_==="script"&&i.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Sn.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(g)},Sn.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin);i.d.L(g,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Sn.preloadModule=function(g,h){if(typeof g=="string")if(h){var _=f(h.as,h.crossOrigin);i.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(g)},Sn.requestFormReset=function(g){i.d.r(g)},Sn.unstable_batchedUpdates=function(g,h){return g(h)},Sn.useFormState=function(g,h,_){return u.H.useFormState(g,h,_)},Sn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Sn.version="19.2.3",Sn}var f_;function bS(){if(f_)return Dp.exports;f_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dp.exports=PI(),Dp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function kI(){if(h_)return ou;h_=1;var n=DI(),e=Um(),t=bS();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var o=s,a=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(a=o.return),s=o.return;while(s)}return o.tag===3?a:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function g(s){if(l(s)!==s)throw Error(i(188))}function h(s){var o=s.alternate;if(!o){if(o=l(s),o===null)throw Error(i(188));return o!==s?null:s}for(var a=s,c=o;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),s;if(v===c)return g(y),o;v=v.sibling}throw Error(i(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=v;break}if(I===c){A=!0,c=y,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,c=y;break}if(I===c){A=!0,c=v,a=y;break}I=I.sibling}if(!A)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?s:o}function _(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=_(s),o!==null)return o;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function He(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case $:return"Profiler";case P:return"StrictMode";case de:return"Suspense";case pe:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case V:return"Portal";case Z:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case le:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return o=s.displayName||null,o!==null?o:He(s.type)||"Memo";case M:o=s._payload,s=s._init;try{return He(s(o))}catch{}}return null}var gt=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ke=[],Ze=-1;function F(s){return{current:s}}function X(s){0>Ze||(s.current=Ke[Ze],Ke[Ze]=null,Ze--)}function ce(s,o){Ze++,Ke[Ze]=s.current,s.current=o}var me=F(null),Ie=F(null),xe=F(null),Ge=F(null);function ct(s,o){switch(ce(xe,o),ce(Ie,s),ce(me,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?x0(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=x0(o),s=R0(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(me),ce(me,s)}function rt(){X(me),X(Ie),X(xe)}function Ln(s){s.memoizedState!==null&&ce(Ge,s);var o=me.current,a=R0(o,s.type);o!==a&&(ce(Ie,s),ce(me,a))}function fi(s){Ie.current===s&&(X(me),X(Ie)),Ge.current===s&&(X(Ge),eu._currentValue=_e)}var hi,pi;function yn(s){if(hi===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);hi=o&&o[1]||"",pi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hi+s+pi}var Mi=!1;function Rn(s,o){if(!s||Mi)return"";Mi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(ee){var Q=ee}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(ee){Q=ee}s.call(ie.prototype)}}else{try{throw Error()}catch(ee){Q=ee}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(ee){if(ee&&Q&&typeof ee.stack=="string")return[ee.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var L=A.split(`
`),J=I.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===J.length)for(c=L.length-1,y=J.length-1;1<=c&&0<=y&&L[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==J[y]){var te=`
`+L[c].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=c&&0<=y);break}}}finally{Mi=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?yn(a):""}function Wn(s,o){switch(s.tag){case 26:case 27:case 5:return yn(s.type);case 16:return yn("Lazy");case 13:return s.child!==o&&o!==null?yn("Suspense Fallback"):yn("Suspense");case 19:return yn("SuspenseList");case 0:case 15:return Rn(s.type,!1);case 11:return Rn(s.type.render,!1);case 1:return Rn(s.type,!0);case 31:return yn("Activity");default:return""}}function Di(s){try{var o="",a=null;do o+=Wn(s,a),a=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var dt=Object.prototype.hasOwnProperty,ft=n.unstable_scheduleCallback,vn=n.unstable_cancelCallback,Wi=n.unstable_shouldYield,On=n.unstable_requestPaint,Ot=n.unstable_now,jn=n.unstable_getCurrentPriorityLevel,ji=n.unstable_ImmediatePriority,Pi=n.unstable_UserBlockingPriority,Nn=n.unstable_NormalPriority,no=n.unstable_LowPriority,bs=n.unstable_IdlePriority,ki=n.log,nr=n.unstable_setDisableYieldValue,nn=null,Rt=null;function _n(s){if(typeof ki=="function"&&nr(s),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(nn,s)}catch{}}var St=Math.clz32?Math.clz32:es,Zi=Math.log,Hn=Math.LN2;function es(s){return s>>>=0,s===0?32:31-(Zi(s)/Hn|0)|0}var Mn=256,Vi=262144,oe=4194304;function Ae(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ce(s,o,a){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var I=c&134217727;return I!==0?(c=I&~v,c!==0?y=Ae(c):(A&=I,A!==0?y=Ae(A):a||(a=I&~s,a!==0&&(y=Ae(a))))):(I=c&~v,I!==0?y=Ae(I):A!==0?y=Ae(A):a||(a=c&~s,a!==0&&(y=Ae(a)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:y}function ke(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function At(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(){var s=oe;return oe<<=1,(oe&62914560)===0&&(oe=4194304),s}function Dt(s){for(var o=[],a=0;31>a;a++)o.push(s);return o}function Tn(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Zn(s,o,a,c,y,v){var A=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var I=s.entanglements,L=s.expirationTimes,J=s.hiddenUpdates;for(a=A&~a;0<a;){var te=31-St(a),ie=1<<te;I[te]=0,L[te]=-1;var Q=J[te];if(Q!==null)for(J[te]=null,te=0;te<Q.length;te++){var ee=Q[te];ee!==null&&(ee.lane&=-536870913)}a&=~ie}c!==0&&Bn(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~o))}function Bn(s,o,a){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-St(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|a&261930}function Ui(s,o){var a=s.entangledLanes|=o;for(s=s.entanglements;a;){var c=31-St(a),y=1<<c;y&o|s[c]&o&&(s[c]|=o),a&=~y}}function Pt(s,o){var a=o&-o;return a=(a&42)!==0?1:ws(a),(a&(s.suspendedLanes|o))!==0?0:a}function ws(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Fn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Br(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:j0(s.type))}function ei(s,o){var a=ue.p;try{return ue.p=s,o()}finally{ue.p=a}}var ti=Math.random().toString(36).slice(2),kt="__reactFiber$"+ti,Ht="__reactProps$"+ti,ni="__reactContainer$"+ti,Vt="__reactEvents$"+ti,U="__reactListeners$"+ti,fe="__reactHandles$"+ti,Ee="__reactResources$"+ti,Me="__reactMarker$"+ti;function we(s){delete s[kt],delete s[Ht],delete s[Vt],delete s[U],delete s[fe]}function nt(s){var o=s[kt];if(o)return o;for(var a=s.parentNode;a;){if(o=a[ni]||a[kt]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(s=U0(s);s!==null;){if(a=s[kt])return a;s=U0(s)}return o}s=a,a=s.parentNode}return null}function En(s){if(s=s[kt]||s[ni]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function sn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function mi(s){var o=s[Ee];return o||(o=s[Ee]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function zt(s){s[Me]=!0}var al=new Set,ll={};function ts(s,o){ns(s,o),ns(s+"Capture",o)}function ns(s,o){for(ll[s]=o,s=0;s<o.length;s++)al.add(o[s])}var ul=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},dl={};function qu(s){return dt.call(dl,s)?!0:dt.call(cl,s)?!1:ul.test(s)?dl[s]=!0:(cl[s]=!0,!1)}function Fr(s,o,a){if(qu(o))if(a===null)s.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+a)}}function ii(s,o,a){if(a===null)s.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+a)}}function Kt(s,o,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(o,a,""+c)}}function on(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function io(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function fl(s,o,a){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function ht(s){if(!s._valueTracker){var o=io(s)?"checked":"value";s._valueTracker=fl(s,o,""+s[o])}}function ir(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return s&&(c=io(s)?s.checked?"true":"false":s.value),s=c,s!==a?(o.setValue(s),!0):!1}function is(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var sr=/[\n"\\]/g;function Gn(s){return s.replace(sr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Gr(s,o,a,c,y,v,A,I){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),o!=null?A==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+on(o)):s.value!==""+on(o)&&(s.value=""+on(o)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),o!=null?hl(s,A,on(o)):a!=null?hl(s,A,on(a)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+on(I):s.removeAttribute("name")}function zu(s,o,a,c,y,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){ht(s);return}a=a!=null?""+on(a):"",o=o!=null?""+on(o):a,I||o===s.value||(s.value=o),s.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=I?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),ht(s)}function hl(s,o,a){o==="number"&&is(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function so(s,o,a,c){if(s=s.options,o){o={};for(var y=0;y<a.length;y++)o["$"+a[y]]=!0;for(a=0;a<s.length;a++)y=o.hasOwnProperty("$"+s[a].value),s[a].selected!==y&&(s[a].selected=y),y&&c&&(s[a].defaultSelected=!0)}else{for(a=""+on(a),o=null,y=0;y<s.length;y++){if(s[y].value===a){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function Ku(s,o,a){if(o!=null&&(o=""+on(o),o!==s.value&&(s.value=o),a==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=a!=null?""+on(a):""}function oo(s,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(i(92));if(gt(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=on(o),s.defaultValue=a,c=s.textContent,c===a&&c!==""&&c!==null&&(s.value=c),ht(s)}function qn(s,o){if(o){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=o;return}}s.textContent=o}var $u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pl(s,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,a):typeof a!="number"||a===0||$u.has(o)?o==="float"?s.cssFloat=a:s[o]=(""+a).trim():s[o]=a+"px"}function ml(s,o,a){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&a[y]!==c&&pl(s,y,c)}else for(var v in o)o.hasOwnProperty(v)&&pl(s,v,o[v])}function qr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ro=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zr(s){return ro.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Li(){}var gl=null;function gi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ao=null,ss=null;function or(s){var o=En(s);if(o&&(s=o.stateNode)){var a=s[Ht]||null;e:switch(s=o.stateNode,o.type){case"input":if(Gr(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==s&&c.form===s.form){var y=c[Ht]||null;if(!y)throw Error(i(90));Gr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===s.form&&ir(c)}break e;case"textarea":Ku(s,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&so(s,!!a.multiple,o,!1)}}}var Kr=!1;function lo(s,o,a){if(Kr)return s(o,a);Kr=!0;try{var c=s(o);return c}finally{if(Kr=!1,(ao!==null||ss!==null)&&(Bc(),ao&&(o=ao,s=ss,ss=ao=null,or(o),s)))for(o=0;o<s.length;o++)or(s[o])}}function Oi(s,o){var a=s.stateNode;if(a===null)return null;var c=a[Ht]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(i(231,o,typeof a));return a}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rr=!1;if(yi)try{var yt={};Object.defineProperty(yt,"passive",{get:function(){rr=!0}}),window.addEventListener("test",yt,yt),window.removeEventListener("test",yt,yt)}catch{rr=!1}var os=null,yl=null,ar=null;function vl(){if(ar)return ar;var s,o=yl,a=o.length,c,y="value"in os?os.value:os.textContent,v=y.length;for(s=0;s<a&&o[s]===y[s];s++);var A=a-s;for(c=1;c<=A&&o[a-c]===y[v-c];c++);return ar=y.slice(s,1<c?1-c:void 0)}function lr(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Is(){return!0}function Hi(){return!1}function un(s){function o(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(a=s[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Is:Hi,this.isPropagationStopped=Hi,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),o}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=un(xs),uo=T({},xs,{view:0,detail:0}),_l=un(uo),co,$r,as,Yr=T({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==as&&(as&&s.type==="mousemove"?(co=s.screenX-as.screenX,$r=s.screenY-as.screenY):$r=co=0,as=s),co)},movementY:function(s){return"movementY"in s?s.movementY:$r}}),Tl=un(Yr),ur=T({},Yr,{dataTransfer:0}),Ju=un(ur),Qu=T({},uo,{relatedTarget:0}),cr=un(Qu),El=T({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=un(El),Jr=T({},xs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Wu=un(Jr),ju=T({},xs,{data:0}),ls=un(ju),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=tc[s])?!!o[s]:!1}function fo(){return nc}var Pn=T({},uo,{key:function(s){if(s.key){var o=Zu[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=lr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ec[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fo,charCode:function(s){return s.type==="keypress"?lr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?lr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ic=un(Pn),sc=T({},Yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rs=un(sc),m=T({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fo}),E=un(m),b=T({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=un(b),K=T({},Yr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),j=un(K),he=T({},xs,{newState:0,oldState:0}),Be=un(he),Bt=[9,13,27,32],at=yi&&"CompositionEvent"in window,It=null;yi&&"documentMode"in document&&(It=document.documentMode);var vi=yi&&"TextEvent"in window&&!It,us=yi&&(!at||It&&8<It&&11>=It),Bi=" ",Fi=!1;function dr(s,o){switch(s){case"keyup":return Bt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qr(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xr=!1;function jb(s,o){switch(s){case"compositionend":return Qr(o);case"keypress":return o.which!==32?null:(Fi=!0,Bi);case"textInput":return s=o.data,s===Bi&&Fi?null:s;default:return null}}function Zb(s,o){if(Xr)return s==="compositionend"||!at&&dr(s,o)?(s=vl(),ar=yl=os=null,Xr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return us&&o.locale!=="ko"?null:o.data;default:return null}}var ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hg(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!ew[s.type]:o==="textarea"}function Bg(s,o,a,c){ao?ss?ss.push(c):ss=[c]:ao=c,o=Yc(o,"onChange"),0<o.length&&(a=new rs("onChange","change",null,a,c),s.push({event:a,listeners:o}))}var Sl=null,Al=null;function tw(s){S0(s,0)}function oc(s){var o=sn(s);if(ir(o))return s}function Fg(s,o){if(s==="change")return o}var Gg=!1;if(yi){var kf;if(yi){var Vf="oninput"in document;if(!Vf){var qg=document.createElement("div");qg.setAttribute("oninput","return;"),Vf=typeof qg.oninput=="function"}kf=Vf}else kf=!1;Gg=kf&&(!document.documentMode||9<document.documentMode)}function zg(){Sl&&(Sl.detachEvent("onpropertychange",Kg),Al=Sl=null)}function Kg(s){if(s.propertyName==="value"&&oc(Al)){var o=[];Bg(o,Al,s,gi(s)),lo(tw,o)}}function nw(s,o,a){s==="focusin"?(zg(),Sl=o,Al=a,Sl.attachEvent("onpropertychange",Kg)):s==="focusout"&&zg()}function iw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return oc(Al)}function sw(s,o){if(s==="click")return oc(o)}function ow(s,o){if(s==="input"||s==="change")return oc(o)}function rw(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var si=typeof Object.is=="function"?Object.is:rw;function Cl(s,o){if(si(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var a=Object.keys(s),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!dt.call(o,y)||!si(s[y],o[y]))return!1}return!0}function $g(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Yg(s,o){var a=$g(s);s=0;for(var c;a;){if(a.nodeType===3){if(c=s+a.textContent.length,s<=o&&c>=o)return{node:a,offset:o-s};s=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=$g(a)}}function Jg(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Jg(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Qg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=is(s.document);o instanceof s.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)s=o.contentWindow;else break;o=is(s.document)}return o}function Uf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var aw=yi&&"documentMode"in document&&11>=document.documentMode,Wr=null,Lf=null,bl=null,Of=!1;function Xg(s,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Of||Wr==null||Wr!==is(c)||(c=Wr,"selectionStart"in c&&Uf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),bl&&Cl(bl,c)||(bl=c,c=Yc(Lf,"onSelect"),0<c.length&&(o=new rs("onSelect","select",null,o,a),s.push({event:o,listeners:c}),o.target=Wr)))}function fr(s,o){var a={};return a[s.toLowerCase()]=o.toLowerCase(),a["Webkit"+s]="webkit"+o,a["Moz"+s]="moz"+o,a}var jr={animationend:fr("Animation","AnimationEnd"),animationiteration:fr("Animation","AnimationIteration"),animationstart:fr("Animation","AnimationStart"),transitionrun:fr("Transition","TransitionRun"),transitionstart:fr("Transition","TransitionStart"),transitioncancel:fr("Transition","TransitionCancel"),transitionend:fr("Transition","TransitionEnd")},Hf={},Wg={};yi&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);function hr(s){if(Hf[s])return Hf[s];if(!jr[s])return s;var o=jr[s],a;for(a in o)if(o.hasOwnProperty(a)&&a in Wg)return Hf[s]=o[a];return s}var jg=hr("animationend"),Zg=hr("animationiteration"),ey=hr("animationstart"),lw=hr("transitionrun"),uw=hr("transitionstart"),cw=hr("transitioncancel"),ty=hr("transitionend"),ny=new Map,Bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bf.push("scrollEnd");function Gi(s,o){ny.set(s,o),ts(o,[s])}var rc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},_i=[],Zr=0,Ff=0;function ac(){for(var s=Zr,o=Ff=Zr=0;o<s;){var a=_i[o];_i[o++]=null;var c=_i[o];_i[o++]=null;var y=_i[o];_i[o++]=null;var v=_i[o];if(_i[o++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&iy(a,y,v)}}function lc(s,o,a,c){_i[Zr++]=s,_i[Zr++]=o,_i[Zr++]=a,_i[Zr++]=c,Ff|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Gf(s,o,a,c){return lc(s,o,a,c),uc(s)}function pr(s,o){return lc(s,null,null,o),uc(s)}function iy(s,o,a){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=s.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&o!==null&&(y=31-St(a),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[o]:c.push(o),o.lane=a|536870912),v):null}function uc(s){if(50<Yl)throw Yl=0,Wh=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var ea={};function dw(s,o,a,c){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(s,o,a,c){return new dw(s,o,a,c)}function qf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ns(s,o){var a=s.alternate;return a===null?(a=oi(s.tag,o,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=o,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,o=s.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function sy(s,o){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,o=a.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function cc(s,o,a,c,y,v){var A=0;if(c=s,typeof s=="function")qf(s)&&(A=1);else if(typeof s=="string")A=gI(s,a,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=oi(31,a,o,y),s.elementType=R,s.lanes=v,s;case k:return mr(a.children,y,v,o);case P:A=8,y|=24;break;case $:return s=oi(12,a,o,y|2),s.elementType=$,s.lanes=v,s;case de:return s=oi(13,a,o,y),s.elementType=de,s.lanes=v,s;case pe:return s=oi(19,a,o,y),s.elementType=pe,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Z:A=10;break e;case B:A=9;break e;case le:A=11;break e;case N:A=14;break e;case M:A=16,c=null;break e}A=29,a=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=oi(A,a,o,y),o.elementType=s,o.type=c,o.lanes=v,o}function mr(s,o,a,c){return s=oi(7,s,c,o),s.lanes=a,s}function zf(s,o,a){return s=oi(6,s,null,o),s.lanes=a,s}function oy(s){var o=oi(18,null,null,0);return o.stateNode=s,o}function Kf(s,o,a){return o=oi(4,s.children!==null?s.children:[],s.key,o),o.lanes=a,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var ry=new WeakMap;function Ti(s,o){if(typeof s=="object"&&s!==null){var a=ry.get(s);return a!==void 0?a:(o={value:s,source:o,stack:Di(o)},ry.set(s,o),o)}return{value:s,source:o,stack:Di(o)}}var ta=[],na=0,dc=null,wl=0,Ei=[],Si=0,ho=null,cs=1,ds="";function Ms(s,o){ta[na++]=wl,ta[na++]=dc,dc=s,wl=o}function ay(s,o,a){Ei[Si++]=cs,Ei[Si++]=ds,Ei[Si++]=ho,ho=s;var c=cs;s=ds;var y=32-St(c)-1;c&=~(1<<y),a+=1;var v=32-St(o)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,cs=1<<32-St(o)+y|a<<y|c,ds=v+s}else cs=1<<v|a<<y|c,ds=s}function $f(s){s.return!==null&&(Ms(s,1),ay(s,1,0))}function Yf(s){for(;s===dc;)dc=ta[--na],ta[na]=null,wl=ta[--na],ta[na]=null;for(;s===ho;)ho=Ei[--Si],Ei[Si]=null,ds=Ei[--Si],Ei[Si]=null,cs=Ei[--Si],Ei[Si]=null}function ly(s,o){Ei[Si++]=cs,Ei[Si++]=ds,Ei[Si++]=ho,cs=o.id,ds=o.overflow,ho=s}var cn=null,Ct=null,et=!1,po=null,Ai=!1,Jf=Error(i(519));function mo(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(Ti(o,s)),Jf}function uy(s){var o=s.stateNode,a=s.type,c=s.memoizedProps;switch(o[kt]=s,o[Ht]=c,a){case"dialog":Ye("cancel",o),Ye("close",o);break;case"iframe":case"object":case"embed":Ye("load",o);break;case"video":case"audio":for(a=0;a<Ql.length;a++)Ye(Ql[a],o);break;case"source":Ye("error",o);break;case"img":case"image":case"link":Ye("error",o),Ye("load",o);break;case"details":Ye("toggle",o);break;case"input":Ye("invalid",o),zu(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",o);break;case"textarea":Ye("invalid",o),oo(o,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||w0(o.textContent,a)?(c.popover!=null&&(Ye("beforetoggle",o),Ye("toggle",o)),c.onScroll!=null&&Ye("scroll",o),c.onScrollEnd!=null&&Ye("scrollend",o),c.onClick!=null&&(o.onclick=Li),o=!0):o=!1,o||mo(s,!0)}function cy(s){for(cn=s.return;cn;)switch(cn.tag){case 5:case 31:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:cn=cn.return}}function ia(s){if(s!==cn)return!1;if(!et)return cy(s),et=!0,!1;var o=s.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||fp(s.type,s.memoizedProps)),a=!a),a&&Ct&&mo(s),cy(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ct=V0(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ct=V0(s)}else o===27?(o=Ct,Ro(s.type)?(s=yp,yp=null,Ct=s):Ct=o):Ct=cn?bi(s.stateNode.nextSibling):null;return!0}function gr(){Ct=cn=null,et=!1}function Qf(){var s=po;return s!==null&&(Yn===null?Yn=s:Yn.push.apply(Yn,s),po=null),s}function Il(s){po===null?po=[s]:po.push(s)}var Xf=F(null),yr=null,Ds=null;function go(s,o,a){ce(Xf,o._currentValue),o._currentValue=a}function Ps(s){s._currentValue=Xf.current,X(Xf)}function Wf(s,o,a){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===a)break;s=s.return}}function jf(s,o,a,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var L=0;L<o.length;L++)if(I.context===o[L]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),Wf(v.return,a,s),c||(A=null);break e}v=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),Wf(A,a,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function sa(s,o,a,c){s=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var I=y.type;si(y.pendingProps.value,A.value)||(s!==null?s.push(I):s=[I])}}else if(y===Ge.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(eu):s=[eu])}y=y.return}s!==null&&jf(o,s,a,c),o.flags|=262144}function fc(s){for(s=s.firstContext;s!==null;){if(!si(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function vr(s){yr=s,Ds=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function dn(s){return dy(yr,s)}function hc(s,o){return yr===null&&vr(s),dy(s,o)}function dy(s,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Ds===null){if(s===null)throw Error(i(308));Ds=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Ds=Ds.next=o;return a}var fw=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(a,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(a){return a()})}},hw=n.unstable_scheduleCallback,pw=n.unstable_NormalPriority,$t={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zf(){return{controller:new fw,data:new Map,refCount:0}}function xl(s){s.refCount--,s.refCount===0&&hw(pw,function(){s.controller.abort()})}var Rl=null,eh=0,oa=0,ra=null;function mw(s,o){if(Rl===null){var a=Rl=[];eh=0,oa=ip(),ra={status:"pending",value:void 0,then:function(c){a.push(c)}}}return eh++,o.then(fy,fy),o}function fy(){if(--eh===0&&Rl!==null){ra!==null&&(ra.status="fulfilled");var s=Rl;Rl=null,oa=0,ra=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function gw(s,o){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<a.length;y++)(0,a[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var hy=W.S;W.S=function(s,o){Xv=Ot(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&mw(s,o),hy!==null&&hy(s,o)};var _r=F(null);function th(){var s=_r.current;return s!==null?s:Et.pooledCache}function pc(s,o){o===null?ce(_r,_r.current):ce(_r,o.pool)}function py(){var s=th();return s===null?null:{parent:$t._currentValue,pool:s}}var aa=Error(i(460)),nh=Error(i(474)),mc=Error(i(542)),gc={then:function(){}};function my(s){return s=s.status,s==="fulfilled"||s==="rejected"}function gy(s,o,a){switch(a=s[a],a===void 0?s.push(o):a!==o&&(o.then(Li,Li),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,vy(s),s;default:if(typeof o.status=="string")o.then(Li,Li);else{if(s=Et,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,vy(s),s}throw Er=o,aa}}function Tr(s){try{var o=s._init;return o(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Er=a,aa):a}}var Er=null;function yy(){if(Er===null)throw Error(i(459));var s=Er;return Er=null,s}function vy(s){if(s===aa||s===mc)throw Error(i(483))}var la=null,Nl=0;function yc(s){var o=Nl;return Nl+=1,la===null&&(la=[]),gy(la,s,o)}function Ml(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function vc(s,o){throw o.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function _y(s){function o(z,G){if(s){var Y=z.deletions;Y===null?(z.deletions=[G],z.flags|=16):Y.push(G)}}function a(z,G){if(!s)return null;for(;G!==null;)o(z,G),G=G.sibling;return null}function c(z){for(var G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function y(z,G){return z=Ns(z,G),z.index=0,z.sibling=null,z}function v(z,G,Y){return z.index=Y,s?(Y=z.alternate,Y!==null?(Y=Y.index,Y<G?(z.flags|=67108866,G):Y):(z.flags|=67108866,G)):(z.flags|=1048576,G)}function A(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function I(z,G,Y,ne){return G===null||G.tag!==6?(G=zf(Y,z.mode,ne),G.return=z,G):(G=y(G,Y),G.return=z,G)}function L(z,G,Y,ne){var be=Y.type;return be===k?te(z,G,Y.props.children,ne,Y.key):G!==null&&(G.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===M&&Tr(be)===G.type)?(G=y(G,Y.props),Ml(G,Y),G.return=z,G):(G=cc(Y.type,Y.key,Y.props,null,z.mode,ne),Ml(G,Y),G.return=z,G)}function J(z,G,Y,ne){return G===null||G.tag!==4||G.stateNode.containerInfo!==Y.containerInfo||G.stateNode.implementation!==Y.implementation?(G=Kf(Y,z.mode,ne),G.return=z,G):(G=y(G,Y.children||[]),G.return=z,G)}function te(z,G,Y,ne,be){return G===null||G.tag!==7?(G=mr(Y,z.mode,ne,be),G.return=z,G):(G=y(G,Y),G.return=z,G)}function ie(z,G,Y){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=zf(""+G,z.mode,Y),G.return=z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return Y=cc(G.type,G.key,G.props,null,z.mode,Y),Ml(Y,G),Y.return=z,Y;case V:return G=Kf(G,z.mode,Y),G.return=z,G;case M:return G=Tr(G),ie(z,G,Y)}if(gt(G)||q(G))return G=mr(G,z.mode,Y,null),G.return=z,G;if(typeof G.then=="function")return ie(z,yc(G),Y);if(G.$$typeof===Z)return ie(z,hc(z,G),Y);vc(z,G)}return null}function Q(z,G,Y,ne){var be=G!==null?G.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return be!==null?null:I(z,G,""+Y,ne);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===be?L(z,G,Y,ne):null;case V:return Y.key===be?J(z,G,Y,ne):null;case M:return Y=Tr(Y),Q(z,G,Y,ne)}if(gt(Y)||q(Y))return be!==null?null:te(z,G,Y,ne,null);if(typeof Y.then=="function")return Q(z,G,yc(Y),ne);if(Y.$$typeof===Z)return Q(z,G,hc(z,Y),ne);vc(z,Y)}return null}function ee(z,G,Y,ne,be){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get(Y)||null,I(G,z,""+ne,be);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return z=z.get(ne.key===null?Y:ne.key)||null,L(G,z,ne,be);case V:return z=z.get(ne.key===null?Y:ne.key)||null,J(G,z,ne,be);case M:return ne=Tr(ne),ee(z,G,Y,ne,be)}if(gt(ne)||q(ne))return z=z.get(Y)||null,te(G,z,ne,be,null);if(typeof ne.then=="function")return ee(z,G,Y,yc(ne),be);if(ne.$$typeof===Z)return ee(z,G,Y,hc(G,ne),be);vc(G,ne)}return null}function ve(z,G,Y,ne){for(var be=null,it=null,Te=G,qe=G=0,Qe=null;Te!==null&&qe<Y.length;qe++){Te.index>qe?(Qe=Te,Te=null):Qe=Te.sibling;var st=Q(z,Te,Y[qe],ne);if(st===null){Te===null&&(Te=Qe);break}s&&Te&&st.alternate===null&&o(z,Te),G=v(st,G,qe),it===null?be=st:it.sibling=st,it=st,Te=Qe}if(qe===Y.length)return a(z,Te),et&&Ms(z,qe),be;if(Te===null){for(;qe<Y.length;qe++)Te=ie(z,Y[qe],ne),Te!==null&&(G=v(Te,G,qe),it===null?be=Te:it.sibling=Te,it=Te);return et&&Ms(z,qe),be}for(Te=c(Te);qe<Y.length;qe++)Qe=ee(Te,z,qe,Y[qe],ne),Qe!==null&&(s&&Qe.alternate!==null&&Te.delete(Qe.key===null?qe:Qe.key),G=v(Qe,G,qe),it===null?be=Qe:it.sibling=Qe,it=Qe);return s&&Te.forEach(function(ko){return o(z,ko)}),et&&Ms(z,qe),be}function Ne(z,G,Y,ne){if(Y==null)throw Error(i(151));for(var be=null,it=null,Te=G,qe=G=0,Qe=null,st=Y.next();Te!==null&&!st.done;qe++,st=Y.next()){Te.index>qe?(Qe=Te,Te=null):Qe=Te.sibling;var ko=Q(z,Te,st.value,ne);if(ko===null){Te===null&&(Te=Qe);break}s&&Te&&ko.alternate===null&&o(z,Te),G=v(ko,G,qe),it===null?be=ko:it.sibling=ko,it=ko,Te=Qe}if(st.done)return a(z,Te),et&&Ms(z,qe),be;if(Te===null){for(;!st.done;qe++,st=Y.next())st=ie(z,st.value,ne),st!==null&&(G=v(st,G,qe),it===null?be=st:it.sibling=st,it=st);return et&&Ms(z,qe),be}for(Te=c(Te);!st.done;qe++,st=Y.next())st=ee(Te,z,qe,st.value,ne),st!==null&&(s&&st.alternate!==null&&Te.delete(st.key===null?qe:st.key),G=v(st,G,qe),it===null?be=st:it.sibling=st,it=st);return s&&Te.forEach(function(II){return o(z,II)}),et&&Ms(z,qe),be}function Tt(z,G,Y,ne){if(typeof Y=="object"&&Y!==null&&Y.type===k&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var be=Y.key;G!==null;){if(G.key===be){if(be=Y.type,be===k){if(G.tag===7){a(z,G.sibling),ne=y(G,Y.props.children),ne.return=z,z=ne;break e}}else if(G.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===M&&Tr(be)===G.type){a(z,G.sibling),ne=y(G,Y.props),Ml(ne,Y),ne.return=z,z=ne;break e}a(z,G);break}else o(z,G);G=G.sibling}Y.type===k?(ne=mr(Y.props.children,z.mode,ne,Y.key),ne.return=z,z=ne):(ne=cc(Y.type,Y.key,Y.props,null,z.mode,ne),Ml(ne,Y),ne.return=z,z=ne)}return A(z);case V:e:{for(be=Y.key;G!==null;){if(G.key===be)if(G.tag===4&&G.stateNode.containerInfo===Y.containerInfo&&G.stateNode.implementation===Y.implementation){a(z,G.sibling),ne=y(G,Y.children||[]),ne.return=z,z=ne;break e}else{a(z,G);break}else o(z,G);G=G.sibling}ne=Kf(Y,z.mode,ne),ne.return=z,z=ne}return A(z);case M:return Y=Tr(Y),Tt(z,G,Y,ne)}if(gt(Y))return ve(z,G,Y,ne);if(q(Y)){if(be=q(Y),typeof be!="function")throw Error(i(150));return Y=be.call(Y),Ne(z,G,Y,ne)}if(typeof Y.then=="function")return Tt(z,G,yc(Y),ne);if(Y.$$typeof===Z)return Tt(z,G,hc(z,Y),ne);vc(z,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,G!==null&&G.tag===6?(a(z,G.sibling),ne=y(G,Y),ne.return=z,z=ne):(a(z,G),ne=zf(Y,z.mode,ne),ne.return=z,z=ne),A(z)):a(z,G)}return function(z,G,Y,ne){try{Nl=0;var be=Tt(z,G,Y,ne);return la=null,be}catch(Te){if(Te===aa||Te===mc)throw Te;var it=oi(29,Te,null,z.mode);return it.lanes=ne,it.return=z,it}finally{}}}var Sr=_y(!0),Ty=_y(!1),yo=!1;function ih(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sh(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function vo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function _o(s,o,a){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(lt&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=uc(s),iy(s,null,a),o}return lc(s,c,o,a),uc(s)}function Dl(s,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,a|=c,o.lanes=a,Ui(s,a)}}function oh(s,o){var a=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=o:v=v.next=o}else y=v=o;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=o:s.next=o,a.lastBaseUpdate=o}var rh=!1;function Pl(){if(rh){var s=ra;if(s!==null)throw s}}function kl(s,o,a,c){rh=!1;var y=s.updateQueue;yo=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var L=I,J=L.next;L.next=null,A===null?v=J:A.next=J,A=L;var te=s.alternate;te!==null&&(te=te.updateQueue,I=te.lastBaseUpdate,I!==A&&(I===null?te.firstBaseUpdate=J:I.next=J,te.lastBaseUpdate=L))}if(v!==null){var ie=y.baseState;A=0,te=J=L=null,I=v;do{var Q=I.lane&-536870913,ee=Q!==I.lane;if(ee?(Je&Q)===Q:(c&Q)===Q){Q!==0&&Q===oa&&(rh=!0),te!==null&&(te=te.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ve=s,Ne=I;Q=o;var Tt=a;switch(Ne.tag){case 1:if(ve=Ne.payload,typeof ve=="function"){ie=ve.call(Tt,ie,Q);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ne.payload,Q=typeof ve=="function"?ve.call(Tt,ie,Q):ve,Q==null)break e;ie=T({},ie,Q);break e;case 2:yo=!0}}Q=I.callback,Q!==null&&(s.flags|=64,ee&&(s.flags|=8192),ee=y.callbacks,ee===null?y.callbacks=[Q]:ee.push(Q))}else ee={lane:Q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},te===null?(J=te=ee,L=ie):te=te.next=ee,A|=Q;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;ee=I,I=ee.next,ee.next=null,y.lastBaseUpdate=ee,y.shared.pending=null}}while(!0);te===null&&(L=ie),y.baseState=L,y.firstBaseUpdate=J,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),Co|=A,s.lanes=A,s.memoizedState=ie}}function Ey(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function Sy(s,o){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)Ey(a[s],o)}var ua=F(null),_c=F(0);function Ay(s,o){s=Gs,ce(_c,s),ce(ua,o),Gs=s|o.baseLanes}function ah(){ce(_c,Gs),ce(ua,ua.current)}function lh(){Gs=_c.current,X(ua),X(_c)}var ri=F(null),Ci=null;function To(s){var o=s.alternate;ce(Ft,Ft.current&1),ce(ri,s),Ci===null&&(o===null||ua.current!==null||o.memoizedState!==null)&&(Ci=s)}function uh(s){ce(Ft,Ft.current),ce(ri,s),Ci===null&&(Ci=s)}function Cy(s){s.tag===22?(ce(Ft,Ft.current),ce(ri,s),Ci===null&&(Ci=s)):Eo()}function Eo(){ce(Ft,Ft.current),ce(ri,ri.current)}function ai(s){X(ri),Ci===s&&(Ci=null),X(Ft)}var Ft=F(0);function Tc(s){for(var o=s;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||mp(a)||gp(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ks=0,Fe=null,vt=null,Yt=null,Ec=!1,ca=!1,Ar=!1,Sc=0,Vl=0,da=null,yw=0;function Ut(){throw Error(i(321))}function ch(s,o){if(o===null)return!1;for(var a=0;a<o.length&&a<s.length;a++)if(!si(s[a],o[a]))return!1;return!0}function dh(s,o,a,c,y,v){return ks=v,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,W.H=s===null||s.memoizedState===null?av:wh,Ar=!1,v=a(c,y),Ar=!1,ca&&(v=wy(o,a,c,y)),by(s),v}function by(s){W.H=Ol;var o=vt!==null&&vt.next!==null;if(ks=0,Yt=vt=Fe=null,Ec=!1,Vl=0,da=null,o)throw Error(i(300));s===null||Jt||(s=s.dependencies,s!==null&&fc(s)&&(Jt=!0))}function wy(s,o,a,c){Fe=s;var y=0;do{if(ca&&(da=null),Vl=0,ca=!1,25<=y)throw Error(i(301));if(y+=1,Yt=vt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}W.H=lv,v=o(a,c)}while(ca);return v}function vw(){var s=W.H,o=s.useState()[0];return o=typeof o.then=="function"?Ul(o):o,s=s.useState()[0],(vt!==null?vt.memoizedState:null)!==s&&(Fe.flags|=1024),o}function fh(){var s=Sc!==0;return Sc=0,s}function hh(s,o,a){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~a}function ph(s){if(Ec){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Ec=!1}ks=0,Yt=vt=Fe=null,ca=!1,Vl=Sc=0,da=null}function kn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Fe.memoizedState=Yt=s:Yt=Yt.next=s,Yt}function Gt(){if(vt===null){var s=Fe.alternate;s=s!==null?s.memoizedState:null}else s=vt.next;var o=Yt===null?Fe.memoizedState:Yt.next;if(o!==null)Yt=o,vt=s;else{if(s===null)throw Fe.alternate===null?Error(i(467)):Error(i(310));vt=s,s={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Yt===null?Fe.memoizedState=Yt=s:Yt=Yt.next=s}return Yt}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(s){var o=Vl;return Vl+=1,da===null&&(da=[]),s=gy(da,s,o),o=Fe,(Yt===null?o.memoizedState:Yt.next)===null&&(o=o.alternate,W.H=o===null||o.memoizedState===null?av:wh),s}function Cc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ul(s);if(s.$$typeof===Z)return dn(s)}throw Error(i(438,String(s)))}function mh(s){var o=null,a=Fe.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=Fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Ac(),Fe.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(s),c=0;c<s;c++)a[c]=H;return o.index++,a}function Vs(s,o){return typeof o=="function"?o(s):o}function bc(s){var o=Gt();return gh(o,vt,s)}function gh(s,o,a){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}o.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{o=y.next;var I=A=null,L=null,J=o,te=!1;do{var ie=J.lane&-536870913;if(ie!==J.lane?(Je&ie)===ie:(ks&ie)===ie){var Q=J.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ie===oa&&(te=!0);else if((ks&Q)===Q){J=J.next,Q===oa&&(te=!0);continue}else ie={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(I=L=ie,A=v):L=L.next=ie,Fe.lanes|=Q,Co|=Q;ie=J.action,Ar&&a(v,ie),v=J.hasEagerState?J.eagerState:a(v,ie)}else Q={lane:ie,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(I=L=Q,A=v):L=L.next=Q,Fe.lanes|=ie,Co|=ie;J=J.next}while(J!==null&&J!==o);if(L===null?A=v:L.next=I,!si(v,s.memoizedState)&&(Jt=!0,te&&(a=ra,a!==null)))throw a;s.memoizedState=v,s.baseState=A,s.baseQueue=L,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function yh(s){var o=Gt(),a=o.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var c=a.dispatch,y=a.pending,v=o.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=s(v,A.action),A=A.next;while(A!==y);si(v,o.memoizedState)||(Jt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,c]}function Iy(s,o,a){var c=Fe,y=Gt(),v=et;if(v){if(a===void 0)throw Error(i(407));a=a()}else a=o();var A=!si((vt||y).memoizedState,a);if(A&&(y.memoizedState=a,Jt=!0),y=y.queue,Th(Ny.bind(null,c,y,s),[s]),y.getSnapshot!==o||A||Yt!==null&&Yt.memoizedState.tag&1){if(c.flags|=2048,fa(9,{destroy:void 0},Ry.bind(null,c,y,a,o),null),Et===null)throw Error(i(349));v||(ks&127)!==0||xy(c,o,a)}return a}function xy(s,o,a){s.flags|=16384,s={getSnapshot:o,value:a},o=Fe.updateQueue,o===null?(o=Ac(),Fe.updateQueue=o,o.stores=[s]):(a=o.stores,a===null?o.stores=[s]:a.push(s))}function Ry(s,o,a,c){o.value=a,o.getSnapshot=c,My(o)&&Dy(s)}function Ny(s,o,a){return a(function(){My(o)&&Dy(s)})}function My(s){var o=s.getSnapshot;s=s.value;try{var a=o();return!si(s,a)}catch{return!0}}function Dy(s){var o=pr(s,2);o!==null&&Jn(o,s,2)}function vh(s){var o=kn();if(typeof s=="function"){var a=s;if(s=a(),Ar){_n(!0);try{a()}finally{_n(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:s},o}function Py(s,o,a,c){return s.baseState=a,gh(s,vt,typeof c=="function"?c:Vs)}function _w(s,o,a,c,y){if(xc(s))throw Error(i(485));if(s=o.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};W.T!==null?a(!0):v.isTransition=!1,c(v),a=o.pending,a===null?(v.next=o.pending=v,ky(o,v)):(v.next=a.next,o.pending=a.next=v)}}function ky(s,o){var a=o.action,c=o.payload,y=s.state;if(o.isTransition){var v=W.T,A={};W.T=A;try{var I=a(y,c),L=W.S;L!==null&&L(A,I),Vy(s,o,I)}catch(J){_h(s,o,J)}finally{v!==null&&A.types!==null&&(v.types=A.types),W.T=v}}else try{v=a(y,c),Vy(s,o,v)}catch(J){_h(s,o,J)}}function Vy(s,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Uy(s,o,c)},function(c){return _h(s,o,c)}):Uy(s,o,a)}function Uy(s,o,a){o.status="fulfilled",o.value=a,Ly(o),s.state=a,o=s.pending,o!==null&&(a=o.next,a===o?s.pending=null:(a=a.next,o.next=a,ky(s,a)))}function _h(s,o,a){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,Ly(o),o=o.next;while(o!==c)}s.action=null}function Ly(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Oy(s,o){return o}function Hy(s,o){if(et){var a=Et.formState;if(a!==null){e:{var c=Fe;if(et){if(Ct){t:{for(var y=Ct,v=Ai;y.nodeType!==8;){if(!v){y=null;break t}if(y=bi(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){Ct=bi(y.nextSibling),c=y.data==="F!";break e}}mo(c)}c=!1}c&&(o=a[0])}}return a=kn(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oy,lastRenderedState:o},a.queue=c,a=sv.bind(null,Fe,c),c.dispatch=a,c=vh(!1),v=bh.bind(null,Fe,!1,c.queue),c=kn(),y={state:o,dispatch:null,action:s,pending:null},c.queue=y,a=_w.bind(null,Fe,y,v,a),y.dispatch=a,c.memoizedState=s,[o,a,!1]}function By(s){var o=Gt();return Fy(o,vt,s)}function Fy(s,o,a){if(o=gh(s,o,Oy)[0],s=bc(Vs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=Ul(o)}catch(A){throw A===aa?mc:A}else c=o;o=Gt();var y=o.queue,v=y.dispatch;return a!==o.memoizedState&&(Fe.flags|=2048,fa(9,{destroy:void 0},Tw.bind(null,y,a),null)),[c,v,s]}function Tw(s,o){s.action=o}function Gy(s){var o=Gt(),a=vt;if(a!==null)return Fy(o,a,s);Gt(),o=o.memoizedState,a=Gt();var c=a.queue.dispatch;return a.memoizedState=s,[o,c,!1]}function fa(s,o,a,c){return s={tag:s,create:a,deps:c,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=Ac(),Fe.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=s.next=s:(c=a.next,a.next=s,s.next=c,o.lastEffect=s),s}function qy(){return Gt().memoizedState}function wc(s,o,a,c){var y=kn();Fe.flags|=s,y.memoizedState=fa(1|o,{destroy:void 0},a,c===void 0?null:c)}function Ic(s,o,a,c){var y=Gt();c=c===void 0?null:c;var v=y.memoizedState.inst;vt!==null&&c!==null&&ch(c,vt.memoizedState.deps)?y.memoizedState=fa(o,v,a,c):(Fe.flags|=s,y.memoizedState=fa(1|o,v,a,c))}function zy(s,o){wc(8390656,8,s,o)}function Th(s,o){Ic(2048,8,s,o)}function Ew(s){Fe.flags|=4;var o=Fe.updateQueue;if(o===null)o=Ac(),Fe.updateQueue=o,o.events=[s];else{var a=o.events;a===null?o.events=[s]:a.push(s)}}function Ky(s){var o=Gt().memoizedState;return Ew({ref:o,nextImpl:s}),function(){if((lt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function $y(s,o){return Ic(4,2,s,o)}function Yy(s,o){return Ic(4,4,s,o)}function Jy(s,o){if(typeof o=="function"){s=s();var a=o(s);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Qy(s,o,a){a=a!=null?a.concat([s]):null,Ic(4,4,Jy.bind(null,o,s),a)}function Eh(){}function Xy(s,o){var a=Gt();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&ch(o,c[1])?c[0]:(a.memoizedState=[s,o],s)}function Wy(s,o){var a=Gt();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&ch(o,c[1]))return c[0];if(c=s(),Ar){_n(!0);try{s()}finally{_n(!1)}}return a.memoizedState=[c,o],c}function Sh(s,o,a){return a===void 0||(ks&1073741824)!==0&&(Je&261930)===0?s.memoizedState=o:(s.memoizedState=a,s=jv(),Fe.lanes|=s,Co|=s,a)}function jy(s,o,a,c){return si(a,o)?a:ua.current!==null?(s=Sh(s,a,c),si(s,o)||(Jt=!0),s):(ks&42)===0||(ks&1073741824)!==0&&(Je&261930)===0?(Jt=!0,s.memoizedState=a):(s=jv(),Fe.lanes|=s,Co|=s,o)}function Zy(s,o,a,c,y){var v=ue.p;ue.p=v!==0&&8>v?v:8;var A=W.T,I={};W.T=I,bh(s,!1,o,a);try{var L=y(),J=W.S;if(J!==null&&J(I,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=gw(L,c);Ll(s,o,te,ci(s))}else Ll(s,o,c,ci(s))}catch(ie){Ll(s,o,{then:function(){},status:"rejected",reason:ie},ci())}finally{ue.p=v,A!==null&&I.types!==null&&(A.types=I.types),W.T=A}}function Sw(){}function Ah(s,o,a,c){if(s.tag!==5)throw Error(i(476));var y=ev(s).queue;Zy(s,y,o,_e,a===null?Sw:function(){return tv(s),a(c)})}function ev(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:_e},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:a},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function tv(s){var o=ev(s);o.next===null&&(o=s.alternate.memoizedState),Ll(s,o.next.queue,{},ci())}function Ch(){return dn(eu)}function nv(){return Gt().memoizedState}function iv(){return Gt().memoizedState}function Aw(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var a=ci();s=vo(a);var c=_o(o,s,a);c!==null&&(Jn(c,o,a),Dl(c,o,a)),o={cache:Zf()},s.payload=o;return}o=o.return}}function Cw(s,o,a){var c=ci();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xc(s)?ov(o,a):(a=Gf(s,o,a,c),a!==null&&(Jn(a,s,c),rv(a,o,c)))}function sv(s,o,a){var c=ci();Ll(s,o,a,c)}function Ll(s,o,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xc(s))ov(o,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,I=v(A,a);if(y.hasEagerState=!0,y.eagerState=I,si(I,A))return lc(s,o,y,0),Et===null&&ac(),!1}catch{}finally{}if(a=Gf(s,o,y,c),a!==null)return Jn(a,s,c),rv(a,o,c),!0}return!1}function bh(s,o,a,c){if(c={lane:2,revertLane:ip(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},xc(s)){if(o)throw Error(i(479))}else o=Gf(s,a,c,2),o!==null&&Jn(o,s,2)}function xc(s){var o=s.alternate;return s===Fe||o!==null&&o===Fe}function ov(s,o){ca=Ec=!0;var a=s.pending;a===null?o.next=o:(o.next=a.next,a.next=o),s.pending=o}function rv(s,o,a){if((a&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,a|=c,o.lanes=a,Ui(s,a)}}var Ol={readContext:dn,use:Cc,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};Ol.useEffectEvent=Ut;var av={readContext:dn,use:Cc,useCallback:function(s,o){return kn().memoizedState=[s,o===void 0?null:o],s},useContext:dn,useEffect:zy,useImperativeHandle:function(s,o,a){a=a!=null?a.concat([s]):null,wc(4194308,4,Jy.bind(null,o,s),a)},useLayoutEffect:function(s,o){return wc(4194308,4,s,o)},useInsertionEffect:function(s,o){wc(4,2,s,o)},useMemo:function(s,o){var a=kn();o=o===void 0?null:o;var c=s();if(Ar){_n(!0);try{s()}finally{_n(!1)}}return a.memoizedState=[c,o],c},useReducer:function(s,o,a){var c=kn();if(a!==void 0){var y=a(o);if(Ar){_n(!0);try{a(o)}finally{_n(!1)}}}else y=o;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Cw.bind(null,Fe,s),[c.memoizedState,s]},useRef:function(s){var o=kn();return s={current:s},o.memoizedState=s},useState:function(s){s=vh(s);var o=s.queue,a=sv.bind(null,Fe,o);return o.dispatch=a,[s.memoizedState,a]},useDebugValue:Eh,useDeferredValue:function(s,o){var a=kn();return Sh(a,s,o)},useTransition:function(){var s=vh(!1);return s=Zy.bind(null,Fe,s.queue,!0,!1),kn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,a){var c=Fe,y=kn();if(et){if(a===void 0)throw Error(i(407));a=a()}else{if(a=o(),Et===null)throw Error(i(349));(Je&127)!==0||xy(c,o,a)}y.memoizedState=a;var v={value:a,getSnapshot:o};return y.queue=v,zy(Ny.bind(null,c,v,s),[s]),c.flags|=2048,fa(9,{destroy:void 0},Ry.bind(null,c,v,a,o),null),a},useId:function(){var s=kn(),o=Et.identifierPrefix;if(et){var a=ds,c=cs;a=(c&~(1<<32-St(c)-1)).toString(32)+a,o="_"+o+"R_"+a,a=Sc++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=yw++,o="_"+o+"r_"+a.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:Ch,useFormState:Hy,useActionState:Hy,useOptimistic:function(s){var o=kn();o.memoizedState=o.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=bh.bind(null,Fe,!0,a),a.dispatch=o,[s,o]},useMemoCache:mh,useCacheRefresh:function(){return kn().memoizedState=Aw.bind(null,Fe)},useEffectEvent:function(s){var o=kn(),a={impl:s};return o.memoizedState=a,function(){if((lt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},wh={readContext:dn,use:Cc,useCallback:Xy,useContext:dn,useEffect:Th,useImperativeHandle:Qy,useInsertionEffect:$y,useLayoutEffect:Yy,useMemo:Wy,useReducer:bc,useRef:qy,useState:function(){return bc(Vs)},useDebugValue:Eh,useDeferredValue:function(s,o){var a=Gt();return jy(a,vt.memoizedState,s,o)},useTransition:function(){var s=bc(Vs)[0],o=Gt().memoizedState;return[typeof s=="boolean"?s:Ul(s),o]},useSyncExternalStore:Iy,useId:nv,useHostTransitionStatus:Ch,useFormState:By,useActionState:By,useOptimistic:function(s,o){var a=Gt();return Py(a,vt,s,o)},useMemoCache:mh,useCacheRefresh:iv};wh.useEffectEvent=Ky;var lv={readContext:dn,use:Cc,useCallback:Xy,useContext:dn,useEffect:Th,useImperativeHandle:Qy,useInsertionEffect:$y,useLayoutEffect:Yy,useMemo:Wy,useReducer:yh,useRef:qy,useState:function(){return yh(Vs)},useDebugValue:Eh,useDeferredValue:function(s,o){var a=Gt();return vt===null?Sh(a,s,o):jy(a,vt.memoizedState,s,o)},useTransition:function(){var s=yh(Vs)[0],o=Gt().memoizedState;return[typeof s=="boolean"?s:Ul(s),o]},useSyncExternalStore:Iy,useId:nv,useHostTransitionStatus:Ch,useFormState:Gy,useActionState:Gy,useOptimistic:function(s,o){var a=Gt();return vt!==null?Py(a,vt,s,o):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:mh,useCacheRefresh:iv};lv.useEffectEvent=Ky;function Ih(s,o,a,c){o=s.memoizedState,a=a(c,o),a=a==null?o:T({},o,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var xh={enqueueSetState:function(s,o,a){s=s._reactInternals;var c=ci(),y=vo(c);y.payload=o,a!=null&&(y.callback=a),o=_o(s,y,c),o!==null&&(Jn(o,s,c),Dl(o,s,c))},enqueueReplaceState:function(s,o,a){s=s._reactInternals;var c=ci(),y=vo(c);y.tag=1,y.payload=o,a!=null&&(y.callback=a),o=_o(s,y,c),o!==null&&(Jn(o,s,c),Dl(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var a=ci(),c=vo(a);c.tag=2,o!=null&&(c.callback=o),o=_o(s,c,a),o!==null&&(Jn(o,s,a),Dl(o,s,a))}};function uv(s,o,a,c,y,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,A):o.prototype&&o.prototype.isPureReactComponent?!Cl(a,c)||!Cl(y,v):!0}function cv(s,o,a,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==s&&xh.enqueueReplaceState(o,o.state,null)}function Cr(s,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(s=s.defaultProps){a===o&&(a=T({},a));for(var y in s)a[y]===void 0&&(a[y]=s[y])}return a}function dv(s){rc(s)}function fv(s){console.error(s)}function hv(s){rc(s)}function Rc(s,o){try{var a=s.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function pv(s,o,a){try{var c=s.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Rh(s,o,a){return a=vo(a),a.tag=3,a.payload={element:null},a.callback=function(){Rc(s,o)},a}function mv(s){return s=vo(s),s.tag=3,s}function gv(s,o,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){pv(o,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){pv(o,a,c),typeof y!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function bw(s,o,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&sa(o,a,y,!0),a=ri.current,a!==null){switch(a.tag){case 31:case 13:return Ci===null?Fc():a.alternate===null&&Lt===0&&(Lt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===gc?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),ep(s,c,y)),!1;case 22:return a.flags|=65536,c===gc?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),ep(s,c,y)),!1}throw Error(i(435,a.tag))}return ep(s,c,y),Fc(),!1}if(et)return o=ri.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==Jf&&(s=Error(i(422),{cause:c}),Il(Ti(s,a)))):(c!==Jf&&(o=Error(i(423),{cause:c}),Il(Ti(o,a))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Ti(c,a),y=Rh(s.stateNode,c,y),oh(s,y),Lt!==4&&(Lt=2)),!1;var v=Error(i(520),{cause:c});if(v=Ti(v,a),$l===null?$l=[v]:$l.push(v),Lt!==4&&(Lt=2),o===null)return!0;c=Ti(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,s=y&-y,a.lanes|=s,s=Rh(a.stateNode,c,s),oh(a,s),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(bo===null||!bo.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=mv(y),gv(y,s,a,c),oh(a,y),!1}a=a.return}while(a!==null);return!1}var Nh=Error(i(461)),Jt=!1;function fn(s,o,a,c){o.child=s===null?Ty(o,null,a,c):Sr(o,s.child,a,c)}function yv(s,o,a,c,y){a=a.render;var v=o.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return vr(o),c=dh(s,o,a,A,v,y),I=fh(),s!==null&&!Jt?(hh(s,o,y),Us(s,o,y)):(et&&I&&$f(o),o.flags|=1,fn(s,o,c,y),o.child)}function vv(s,o,a,c,y){if(s===null){var v=a.type;return typeof v=="function"&&!qf(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,_v(s,o,v,c,y)):(s=cc(a.type,null,c,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!Oh(s,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Cl,a(A,c)&&s.ref===o.ref)return Us(s,o,y)}return o.flags|=1,s=Ns(v,c),s.ref=o.ref,s.return=o,o.child=s}function _v(s,o,a,c,y){if(s!==null){var v=s.memoizedProps;if(Cl(v,c)&&s.ref===o.ref)if(Jt=!1,o.pendingProps=c=v,Oh(s,y))(s.flags&131072)!==0&&(Jt=!0);else return o.lanes=s.lanes,Us(s,o,y)}return Mh(s,o,a,c,y)}function Tv(s,o,a,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,s!==null){for(c=o.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return Ev(s,o,v,a,c)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&pc(o,v!==null?v.cachePool:null),v!==null?Ay(o,v):ah(),Cy(o);else return c=o.lanes=536870912,Ev(s,o,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(pc(o,v.cachePool),Ay(o,v),Eo(),o.memoizedState=null):(s!==null&&pc(o,null),ah(),Eo());return fn(s,o,y,a),o.child}function Hl(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ev(s,o,a,c,y){var v=th();return v=v===null?null:{parent:$t._currentValue,pool:v},o.memoizedState={baseLanes:a,cachePool:v},s!==null&&pc(o,null),ah(),Cy(o),s!==null&&sa(s,o,c,!0),o.childLanes=y,null}function Nc(s,o){return o=Dc({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function Sv(s,o,a){return Sr(o,s.child,null,a),s=Nc(o,o.pendingProps),s.flags|=2,ai(o),o.memoizedState=null,s}function ww(s,o,a){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(et){if(c.mode==="hidden")return s=Nc(o,c),o.lanes=536870912,Hl(null,s);if(uh(o),(s=Ct)?(s=k0(s,Ai),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ho!==null?{id:cs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},a=oy(s),a.return=o,o.child=a,cn=o,Ct=null)):s=null,s===null)throw mo(o);return o.lanes=536870912,null}return Nc(o,c)}var v=s.memoizedState;if(v!==null){var A=v.dehydrated;if(uh(o),y)if(o.flags&256)o.flags&=-257,o=Sv(s,o,a);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Jt||sa(s,o,a,!1),y=(a&s.childLanes)!==0,Jt||y){if(c=Et,c!==null&&(A=Pt(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,pr(s,A),Jn(c,s,A),Nh;Fc(),o=Sv(s,o,a)}else s=v.treeContext,Ct=bi(A.nextSibling),cn=o,et=!0,po=null,Ai=!1,s!==null&&ly(o,s),o=Nc(o,c),o.flags|=4096;return o}return s=Ns(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function Mc(s,o){var a=o.ref;if(a===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(s===null||s.ref!==a)&&(o.flags|=4194816)}}function Mh(s,o,a,c,y){return vr(o),a=dh(s,o,a,c,void 0,y),c=fh(),s!==null&&!Jt?(hh(s,o,y),Us(s,o,y)):(et&&c&&$f(o),o.flags|=1,fn(s,o,a,y),o.child)}function Av(s,o,a,c,y,v){return vr(o),o.updateQueue=null,a=wy(o,c,a,y),by(s),c=fh(),s!==null&&!Jt?(hh(s,o,v),Us(s,o,v)):(et&&c&&$f(o),o.flags|=1,fn(s,o,a,v),o.child)}function Cv(s,o,a,c,y){if(vr(o),o.stateNode===null){var v=ea,A=a.contextType;typeof A=="object"&&A!==null&&(v=dn(A)),v=new a(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=xh,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},ih(o),A=a.contextType,v.context=typeof A=="object"&&A!==null?dn(A):ea,v.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Ih(o,a,A,c),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&xh.enqueueReplaceState(v,v.state,null),kl(o,c,v,y),Pl(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){v=o.stateNode;var I=o.memoizedProps,L=Cr(a,I);v.props=L;var J=v.context,te=a.contextType;A=ea,typeof te=="object"&&te!==null&&(A=dn(te));var ie=a.getDerivedStateFromProps;te=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||J!==A)&&cv(o,v,c,A),yo=!1;var Q=o.memoizedState;v.state=Q,kl(o,c,v,y),Pl(),J=o.memoizedState,I||Q!==J||yo?(typeof ie=="function"&&(Ih(o,a,ie,c),J=o.memoizedState),(L=yo||uv(o,a,L,c,Q,J,A))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=J),v.props=c,v.state=J,v.context=A,c=L):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,sh(s,o),A=o.memoizedProps,te=Cr(a,A),v.props=te,ie=o.pendingProps,Q=v.context,J=a.contextType,L=ea,typeof J=="object"&&J!==null&&(L=dn(J)),I=a.getDerivedStateFromProps,(J=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ie||Q!==L)&&cv(o,v,c,L),yo=!1,Q=o.memoizedState,v.state=Q,kl(o,c,v,y),Pl();var ee=o.memoizedState;A!==ie||Q!==ee||yo||s!==null&&s.dependencies!==null&&fc(s.dependencies)?(typeof I=="function"&&(Ih(o,a,I,c),ee=o.memoizedState),(te=yo||uv(o,a,te,c,Q,ee,L)||s!==null&&s.dependencies!==null&&fc(s.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ee,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ee,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=ee),v.props=c,v.state=ee,v.context=L,c=te):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=1024),c=!1)}return v=c,Mc(s,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&c?(o.child=Sr(o,s.child,null,y),o.child=Sr(o,null,a,y)):fn(s,o,a,y),o.memoizedState=v.state,s=o.child):s=Us(s,o,y),s}function bv(s,o,a,c){return gr(),o.flags|=256,fn(s,o,a,c),o.child}var Dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ph(s){return{baseLanes:s,cachePool:py()}}function kh(s,o,a){return s=s!==null?s.childLanes&~a:0,o&&(s|=ui),s}function wv(s,o,a){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(Ft.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,s===null){if(et){if(y?To(o):Eo(),(s=Ct)?(s=k0(s,Ai),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ho!==null?{id:cs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},a=oy(s),a.return=o,o.child=a,cn=o,Ct=null)):s=null,s===null)throw mo(o);return gp(s)?o.lanes=32:o.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(Eo(),y=o.mode,I=Dc({mode:"hidden",children:I},y),c=mr(c,y,a,null),I.return=o,c.return=o,I.sibling=c,o.child=I,c=o.child,c.memoizedState=Ph(a),c.childLanes=kh(s,A,a),o.memoizedState=Dh,Hl(null,c)):(To(o),Vh(o,I))}var L=s.memoizedState;if(L!==null&&(I=L.dehydrated,I!==null)){if(v)o.flags&256?(To(o),o.flags&=-257,o=Uh(s,o,a)):o.memoizedState!==null?(Eo(),o.child=s.child,o.flags|=128,o=null):(Eo(),I=c.fallback,y=o.mode,c=Dc({mode:"visible",children:c.children},y),I=mr(I,y,a,null),I.flags|=2,c.return=o,I.return=o,c.sibling=I,o.child=c,Sr(o,s.child,null,a),c=o.child,c.memoizedState=Ph(a),c.childLanes=kh(s,A,a),o.memoizedState=Dh,o=Hl(null,c));else if(To(o),gp(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(i(419)),c.stack="",c.digest=A,Il({value:c,source:null,stack:null}),o=Uh(s,o,a)}else if(Jt||sa(s,o,a,!1),A=(a&s.childLanes)!==0,Jt||A){if(A=Et,A!==null&&(c=Pt(A,a),c!==0&&c!==L.retryLane))throw L.retryLane=c,pr(s,c),Jn(A,s,c),Nh;mp(I)||Fc(),o=Uh(s,o,a)}else mp(I)?(o.flags|=192,o.child=s.child,o=null):(s=L.treeContext,Ct=bi(I.nextSibling),cn=o,et=!0,po=null,Ai=!1,s!==null&&ly(o,s),o=Vh(o,c.children),o.flags|=4096);return o}return y?(Eo(),I=c.fallback,y=o.mode,L=s.child,J=L.sibling,c=Ns(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,J!==null?I=Ns(J,I):(I=mr(I,y,a,null),I.flags|=2),I.return=o,c.return=o,c.sibling=I,o.child=c,Hl(null,c),c=o.child,I=s.child.memoizedState,I===null?I=Ph(a):(y=I.cachePool,y!==null?(L=$t._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=py(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=kh(s,A,a),o.memoizedState=Dh,Hl(s.child,c)):(To(o),a=s.child,s=a.sibling,a=Ns(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,s!==null&&(A=o.deletions,A===null?(o.deletions=[s],o.flags|=16):A.push(s)),o.child=a,o.memoizedState=null,a)}function Vh(s,o){return o=Dc({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Dc(s,o){return s=oi(22,s,null,o),s.lanes=0,s}function Uh(s,o,a){return Sr(o,s.child,null,a),s=Vh(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Iv(s,o,a){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),Wf(s.return,o,a)}function Lh(s,o,a,c,y,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function xv(s,o,a){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Ft.current,I=(A&2)!==0;if(I?(A=A&1|2,o.flags|=128):A&=1,ce(Ft,A),fn(s,o,c,a),c=et?wl:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Iv(s,a,o);else if(s.tag===19)Iv(s,a,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(a=o.child,y=null;a!==null;)s=a.alternate,s!==null&&Tc(s)===null&&(y=a),a=a.sibling;a=y,a===null?(y=o.child,o.child=null):(y=a.sibling,a.sibling=null),Lh(o,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&Tc(s)===null){o.child=y;break}s=y.sibling,y.sibling=a,a=y,y=s}Lh(o,!0,a,null,v,c);break;case"together":Lh(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function Us(s,o,a){if(s!==null&&(o.dependencies=s.dependencies),Co|=o.lanes,(a&o.childLanes)===0)if(s!==null){if(sa(s,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,a=Ns(s,s.pendingProps),o.child=a,a.return=o;s.sibling!==null;)s=s.sibling,a=a.sibling=Ns(s,s.pendingProps),a.return=o;a.sibling=null}return o.child}function Oh(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&fc(s)))}function Iw(s,o,a){switch(o.tag){case 3:ct(o,o.stateNode.containerInfo),go(o,$t,s.memoizedState.cache),gr();break;case 27:case 5:Ln(o);break;case 4:ct(o,o.stateNode.containerInfo);break;case 10:go(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,uh(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(To(o),o.flags|=128,null):(a&o.child.childLanes)!==0?wv(s,o,a):(To(o),s=Us(s,o,a),s!==null?s.sibling:null);To(o);break;case 19:var y=(s.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(sa(s,o,a,!1),c=(a&o.childLanes)!==0),y){if(c)return xv(s,o,a);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(Ft,Ft.current),c)break;return null;case 22:return o.lanes=0,Tv(s,o,a,o.pendingProps);case 24:go(o,$t,s.memoizedState.cache)}return Us(s,o,a)}function Rv(s,o,a){if(s!==null)if(s.memoizedProps!==o.pendingProps)Jt=!0;else{if(!Oh(s,a)&&(o.flags&128)===0)return Jt=!1,Iw(s,o,a);Jt=(s.flags&131072)!==0}else Jt=!1,et&&(o.flags&1048576)!==0&&ay(o,wl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=Tr(o.elementType),o.type=s,typeof s=="function")qf(s)?(c=Cr(s,c),o.tag=1,o=Cv(null,o,s,c,a)):(o.tag=0,o=Mh(null,o,s,c,a));else{if(s!=null){var y=s.$$typeof;if(y===le){o.tag=11,o=yv(null,o,s,c,a);break e}else if(y===N){o.tag=14,o=vv(null,o,s,c,a);break e}}throw o=He(s)||s,Error(i(306,o,""))}}return o;case 0:return Mh(s,o,o.type,o.pendingProps,a);case 1:return c=o.type,y=Cr(c,o.pendingProps),Cv(s,o,c,y,a);case 3:e:{if(ct(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,sh(s,o),kl(o,c,null,a);var A=o.memoizedState;if(c=A.cache,go(o,$t,c),c!==v.cache&&jf(o,[$t],a,!0),Pl(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=bv(s,o,c,a);break e}else if(c!==y){y=Ti(Error(i(424)),o),Il(y),o=bv(s,o,c,a);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ct=bi(s.firstChild),cn=o,et=!0,po=null,Ai=!0,a=Ty(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(gr(),c===y){o=Us(s,o,a);break e}fn(s,o,c,a)}o=o.child}return o;case 26:return Mc(s,o),s===null?(a=B0(o.type,null,o.pendingProps,null))?o.memoizedState=a:et||(a=o.type,s=o.pendingProps,c=Jc(xe.current).createElement(a),c[kt]=o,c[Ht]=s,hn(c,a,s),zt(c),o.stateNode=c):o.memoizedState=B0(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Ln(o),s===null&&et&&(c=o.stateNode=L0(o.type,o.pendingProps,xe.current),cn=o,Ai=!0,y=Ct,Ro(o.type)?(yp=y,Ct=bi(c.firstChild)):Ct=y),fn(s,o,o.pendingProps.children,a),Mc(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&et&&((y=c=Ct)&&(c=iI(c,o.type,o.pendingProps,Ai),c!==null?(o.stateNode=c,cn=o,Ct=bi(c.firstChild),Ai=!1,y=!0):y=!1),y||mo(o)),Ln(o),y=o.type,v=o.pendingProps,A=s!==null?s.memoizedProps:null,c=v.children,fp(y,v)?c=null:A!==null&&fp(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=dh(s,o,vw,null,null,a),eu._currentValue=y),Mc(s,o),fn(s,o,c,a),o.child;case 6:return s===null&&et&&((s=a=Ct)&&(a=sI(a,o.pendingProps,Ai),a!==null?(o.stateNode=a,cn=o,Ct=null,s=!0):s=!1),s||mo(o)),null;case 13:return wv(s,o,a);case 4:return ct(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=Sr(o,null,c,a):fn(s,o,c,a),o.child;case 11:return yv(s,o,o.type,o.pendingProps,a);case 7:return fn(s,o,o.pendingProps,a),o.child;case 8:return fn(s,o,o.pendingProps.children,a),o.child;case 12:return fn(s,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,go(o,o.type,c.value),fn(s,o,c.children,a),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,vr(o),y=dn(y),c=c(y),o.flags|=1,fn(s,o,c,a),o.child;case 14:return vv(s,o,o.type,o.pendingProps,a);case 15:return _v(s,o,o.type,o.pendingProps,a);case 19:return xv(s,o,a);case 31:return ww(s,o,a);case 22:return Tv(s,o,a,o.pendingProps);case 24:return vr(o),c=dn($t),s===null?(y=th(),y===null&&(y=Et,v=Zf(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),o.memoizedState={parent:c,cache:y},ih(o),go(o,$t,y)):((s.lanes&a)!==0&&(sh(s,o),kl(o,null,null,a),Pl()),y=s.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),go(o,$t,c)):(c=v.cache,go(o,$t,c),c!==y.cache&&jf(o,[$t],a,!0))),fn(s,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Ls(s){s.flags|=4}function Hh(s,o,a,c,y){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(n0())s.flags|=8192;else throw Er=gc,nh}else s.flags&=-16777217}function Nv(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!K0(o))if(n0())s.flags|=8192;else throw Er=gc,nh}function Pc(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Dn():536870912,s.lanes|=o,ga|=o)}function Bl(s,o){if(!et)switch(s.tailMode){case"hidden":o=s.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function bt(s){var o=s.alternate!==null&&s.alternate.child===s.child,a=0,c=0;if(o)for(var y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=a,o}function xw(s,o,a){var c=o.pendingProps;switch(Yf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(o),null;case 1:return bt(o),null;case 3:return a=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ps($t),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(ia(o)?Ls(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Qf())),bt(o),null;case 26:var y=o.type,v=o.memoizedState;return s===null?(Ls(o),v!==null?(bt(o),Nv(o,v)):(bt(o),Hh(o,y,null,c,a))):v?v!==s.memoizedState?(Ls(o),bt(o),Nv(o,v)):(bt(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ls(o),bt(o),Hh(o,y,s,c,a)),null;case 27:if(fi(o),a=xe.current,y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ls(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return bt(o),null}s=me.current,ia(o)?uy(o):(s=L0(y,c,a),o.stateNode=s,Ls(o))}return bt(o),null;case 5:if(fi(o),y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ls(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return bt(o),null}if(v=me.current,ia(o))uy(o);else{var A=Jc(xe.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[kt]=o,v[Ht]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch(hn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ls(o)}}return bt(o),Hh(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,a),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&Ls(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=xe.current,ia(o)){if(s=o.stateNode,a=o.memoizedProps,c=null,y=cn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[kt]=o,s=!!(s.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||w0(s.nodeValue,a)),s||mo(o,!0)}else s=Jc(s).createTextNode(c),s[kt]=o,o.stateNode=s}return bt(o),null;case 31:if(a=o.memoizedState,s===null||s.memoizedState!==null){if(c=ia(o),a!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[kt]=o}else gr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;bt(o),s=!1}else a=Qf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return o.flags&256?(ai(o),o):(ai(o),null);if((o.flags&128)!==0)throw Error(i(558))}return bt(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ia(o),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[kt]=o}else gr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;bt(o),y=!1}else y=Qf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(ai(o),o):(ai(o),null)}return ai(o),(o.flags&128)!==0?(o.lanes=a,o):(a=c!==null,s=s!==null&&s.memoizedState!==null,a&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==s&&a&&(o.child.flags|=8192),Pc(o,o.updateQueue),bt(o),null);case 4:return rt(),s===null&&ap(o.stateNode.containerInfo),bt(o),null;case 10:return Ps(o.type),bt(o),null;case 19:if(X(Ft),c=o.memoizedState,c===null)return bt(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)Bl(c,!1);else{if(Lt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=Tc(s),v!==null){for(o.flags|=128,Bl(c,!1),s=v.updateQueue,o.updateQueue=s,Pc(o,s),o.subtreeFlags=0,s=a,a=o.child;a!==null;)sy(a,s),a=a.sibling;return ce(Ft,Ft.current&1|2),et&&Ms(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&Ot()>Oc&&(o.flags|=128,y=!0,Bl(c,!1),o.lanes=4194304)}else{if(!y)if(s=Tc(v),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,Pc(o,s),Bl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!et)return bt(o),null}else 2*Ot()-c.renderingStartTime>Oc&&a!==536870912&&(o.flags|=128,y=!0,Bl(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(s=c.last,s!==null?s.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Ot(),s.sibling=null,a=Ft.current,ce(Ft,y?a&1|2:a&1),et&&Ms(o,c.treeForkCount),s):(bt(o),null);case 22:case 23:return ai(o),lh(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(bt(o),o.subtreeFlags&6&&(o.flags|=8192)):bt(o),a=o.updateQueue,a!==null&&Pc(o,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),s!==null&&X(_r),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Ps($t),bt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Rw(s,o){switch(Yf(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Ps($t),rt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return fi(o),null;case 31:if(o.memoizedState!==null){if(ai(o),o.alternate===null)throw Error(i(340));gr()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(ai(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));gr()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return X(Ft),null;case 4:return rt(),null;case 10:return Ps(o.type),null;case 22:case 23:return ai(o),lh(),s!==null&&X(_r),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Ps($t),null;case 25:return null;default:return null}}function Mv(s,o){switch(Yf(o),o.tag){case 3:Ps($t),rt();break;case 26:case 27:case 5:fi(o);break;case 4:rt();break;case 31:o.memoizedState!==null&&ai(o);break;case 13:ai(o);break;case 19:X(Ft);break;case 10:Ps(o.type);break;case 22:case 23:ai(o),lh(),s!==null&&X(_r);break;case 24:Ps($t)}}function Fl(s,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&s)===s){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){mt(o,o.return,I)}}function So(s,o,a){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=o;var L=a,J=I;try{J()}catch(te){mt(y,L,te)}}}c=c.next}while(c!==v)}}catch(te){mt(o,o.return,te)}}function Dv(s){var o=s.updateQueue;if(o!==null){var a=s.stateNode;try{Sy(o,a)}catch(c){mt(s,s.return,c)}}}function Pv(s,o,a){a.props=Cr(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(c){mt(s,o,c)}}function Gl(s,o){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof a=="function"?s.refCleanup=a(c):a.current=c}}catch(y){mt(s,o,y)}}function fs(s,o){var a=s.ref,c=s.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){mt(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){mt(s,o,y)}else a.current=null}function kv(s){var o=s.type,a=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){mt(s,s.return,y)}}function Bh(s,o,a){try{var c=s.stateNode;Ww(c,s.type,a,o),c[Ht]=o}catch(y){mt(s,s.return,y)}}function Vv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ro(s.type)||s.tag===4}function Fh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Vv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ro(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Gh(s,o,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(s),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Li));else if(c!==4&&(c===27&&Ro(s.type)&&(a=s.stateNode,o=null),s=s.child,s!==null))for(Gh(s,o,a),s=s.sibling;s!==null;)Gh(s,o,a),s=s.sibling}function kc(s,o,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?a.insertBefore(s,o):a.appendChild(s);else if(c!==4&&(c===27&&Ro(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(kc(s,o,a),s=s.sibling;s!==null;)kc(s,o,a),s=s.sibling}function Uv(s){var o=s.stateNode,a=s.memoizedProps;try{for(var c=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);hn(o,c,a),o[kt]=s,o[Ht]=a}catch(v){mt(s,s.return,v)}}var Os=!1,Qt=!1,qh=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,rn=null;function Nw(s,o){if(s=s.containerInfo,cp=td,s=Qg(s),Uf(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,L=-1,J=0,te=0,ie=s,Q=null;t:for(;;){for(var ee;ie!==a||y!==0&&ie.nodeType!==3||(I=A+y),ie!==v||c!==0&&ie.nodeType!==3||(L=A+c),ie.nodeType===3&&(A+=ie.nodeValue.length),(ee=ie.firstChild)!==null;)Q=ie,ie=ee;for(;;){if(ie===s)break t;if(Q===a&&++J===y&&(I=A),Q===v&&++te===c&&(L=A),(ee=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=ee}a=I===-1||L===-1?null:{start:I,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(dp={focusedElem:s,selectionRange:a},td=!1,rn=o;rn!==null;)if(o=rn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,rn=s;else for(;rn!==null;){switch(o=rn,v=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)y=s[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,a=o,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var ve=Cr(a.type,y);s=c.getSnapshotBeforeUpdate(ve,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ne){mt(a,a.return,Ne)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,a=s.nodeType,a===9)pp(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":pp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,rn=s;break}rn=o.return}}function Ov(s,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Bs(s,a),c&4&&Fl(5,a);break;case 1:if(Bs(s,a),c&4)if(s=a.stateNode,o===null)try{s.componentDidMount()}catch(A){mt(a,a.return,A)}else{var y=Cr(a.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(A){mt(a,a.return,A)}}c&64&&Dv(a),c&512&&Gl(a,a.return);break;case 3:if(Bs(s,a),c&64&&(s=a.updateQueue,s!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Sy(s,o)}catch(A){mt(a,a.return,A)}}break;case 27:o===null&&c&4&&Uv(a);case 26:case 5:Bs(s,a),o===null&&c&4&&kv(a),c&512&&Gl(a,a.return);break;case 12:Bs(s,a);break;case 31:Bs(s,a),c&4&&Fv(s,a);break;case 13:Bs(s,a),c&4&&Gv(s,a),c&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=Hw.bind(null,a),oI(s,a))));break;case 22:if(c=a.memoizedState!==null||Os,!c){o=o!==null&&o.memoizedState!==null||Qt,y=Os;var v=Qt;Os=c,(Qt=o)&&!v?Fs(s,a,(a.subtreeFlags&8772)!==0):Bs(s,a),Os=y,Qt=v}break;case 30:break;default:Bs(s,a)}}function Hv(s){var o=s.alternate;o!==null&&(s.alternate=null,Hv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&we(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var xt=null,zn=!1;function Hs(s,o,a){for(a=a.child;a!==null;)Bv(s,o,a),a=a.sibling}function Bv(s,o,a){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(nn,a)}catch{}switch(a.tag){case 26:Qt||fs(a,o),Hs(s,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qt||fs(a,o);var c=xt,y=zn;Ro(a.type)&&(xt=a.stateNode,zn=!1),Hs(s,o,a),Wl(a.stateNode),xt=c,zn=y;break;case 5:Qt||fs(a,o);case 6:if(c=xt,y=zn,xt=null,Hs(s,o,a),xt=c,zn=y,xt!==null)if(zn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(a.stateNode)}catch(v){mt(a,o,v)}else try{xt.removeChild(a.stateNode)}catch(v){mt(a,o,v)}break;case 18:xt!==null&&(zn?(s=xt,D0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),Ca(s)):D0(xt,a.stateNode));break;case 4:c=xt,y=zn,xt=a.stateNode.containerInfo,zn=!0,Hs(s,o,a),xt=c,zn=y;break;case 0:case 11:case 14:case 15:So(2,a,o),Qt||So(4,a,o),Hs(s,o,a);break;case 1:Qt||(fs(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Pv(a,o,c)),Hs(s,o,a);break;case 21:Hs(s,o,a);break;case 22:Qt=(c=Qt)||a.memoizedState!==null,Hs(s,o,a),Qt=c;break;default:Hs(s,o,a)}}function Fv(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ca(s)}catch(a){mt(o,o.return,a)}}}function Gv(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ca(s)}catch(a){mt(o,o.return,a)}}function Mw(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new Lv),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new Lv),o;default:throw Error(i(435,s.tag))}}function Vc(s,o){var a=Mw(s);o.forEach(function(c){if(!a.has(c)){a.add(c);var y=Bw.bind(null,s,c);c.then(y,y)}})}function Kn(s,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=s,A=o,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Ro(I.type)){xt=I.stateNode,zn=!1;break e}break;case 5:xt=I.stateNode,zn=!1;break e;case 3:case 4:xt=I.stateNode.containerInfo,zn=!0;break e}I=I.return}if(xt===null)throw Error(i(160));Bv(v,A,y),xt=null,zn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)qv(o,s),o=o.sibling}var qi=null;function qv(s,o){var a=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Kn(o,s),$n(s),c&4&&(So(3,s,s.return),Fl(3,s),So(5,s,s.return));break;case 1:Kn(o,s),$n(s),c&512&&(Qt||a===null||fs(a,a.return)),c&64&&Os&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=qi;if(Kn(o,s),$n(s),c&512&&(Qt||a===null||fs(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=s.memoizedState,a===null)if(c===null)if(s.stateNode===null){e:{c=s.type,a=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Me]||v[kt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),hn(v,c,a),v[kt]=s,zt(v),c=v;break e;case"link":var A=q0("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=y.createElement(c),hn(v,c,a),y.head.appendChild(v);break;case"meta":if(A=q0("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=y.createElement(c),hn(v,c,a),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[kt]=s,zt(v),c=v}s.stateNode=c}else z0(y,s.type,s.stateNode);else s.stateNode=G0(y,c,s.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?z0(y,s.type,s.stateNode):G0(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Bh(s,s.memoizedProps,a.memoizedProps)}break;case 27:Kn(o,s),$n(s),c&512&&(Qt||a===null||fs(a,a.return)),a!==null&&c&4&&Bh(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Kn(o,s),$n(s),c&512&&(Qt||a===null||fs(a,a.return)),s.flags&32){y=s.stateNode;try{qn(y,"")}catch(ve){mt(s,s.return,ve)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Bh(s,y,a!==null?a.memoizedProps:y)),c&1024&&(qh=!0);break;case 6:if(Kn(o,s),$n(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,a=s.stateNode;try{a.nodeValue=c}catch(ve){mt(s,s.return,ve)}}break;case 3:if(Wc=null,y=qi,qi=Qc(o.containerInfo),Kn(o,s),qi=y,$n(s),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ca(o.containerInfo)}catch(ve){mt(s,s.return,ve)}qh&&(qh=!1,zv(s));break;case 4:c=qi,qi=Qc(s.stateNode.containerInfo),Kn(o,s),$n(s),qi=c;break;case 12:Kn(o,s),$n(s);break;case 31:Kn(o,s),$n(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Vc(s,c)));break;case 13:Kn(o,s),$n(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lc=Ot()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Vc(s,c)));break;case 22:y=s.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,J=Os,te=Qt;if(Os=J||y,Qt=te||L,Kn(o,s),Qt=te,Os=J,$n(s),c&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(a===null||L||Os||Qt||br(s)),a=null,o=s;;){if(o.tag===5||o.tag===26){if(a===null){L=a=o;try{if(v=L.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=L.stateNode;var ie=L.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;I.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ve){mt(L,L.return,ve)}}}else if(o.tag===6){if(a===null){L=o;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ve){mt(L,L.return,ve)}}}else if(o.tag===18){if(a===null){L=o;try{var ee=L.stateNode;y?P0(ee,!0):P0(L.stateNode,!1)}catch(ve){mt(L,L.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Vc(s,a))));break;case 19:Kn(o,s),$n(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Vc(s,c)));break;case 30:break;case 21:break;default:Kn(o,s),$n(s)}}function $n(s){var o=s.flags;if(o&2){try{for(var a,c=s.return;c!==null;){if(Vv(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var y=a.stateNode,v=Fh(s);kc(s,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(qn(A,""),a.flags&=-33);var I=Fh(s);kc(s,I,A);break;case 3:case 4:var L=a.stateNode.containerInfo,J=Fh(s);Gh(s,J,L);break;default:throw Error(i(161))}}catch(te){mt(s,s.return,te)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function zv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;zv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Bs(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Ov(s,o.alternate,o),o=o.sibling}function br(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:So(4,o,o.return),br(o);break;case 1:fs(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Pv(o,o.return,a),br(o);break;case 27:Wl(o.stateNode);case 26:case 5:fs(o,o.return),br(o);break;case 22:o.memoizedState===null&&br(o);break;case 30:br(o);break;default:br(o)}s=s.sibling}}function Fs(s,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=s,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:Fs(y,v,a),Fl(4,v);break;case 1:if(Fs(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){mt(c,c.return,J)}if(c=v,y=c.updateQueue,y!==null){var I=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Ey(L[y],I)}catch(J){mt(c,c.return,J)}}a&&A&64&&Dv(v),Gl(v,v.return);break;case 27:Uv(v);case 26:case 5:Fs(y,v,a),a&&c===null&&A&4&&kv(v),Gl(v,v.return);break;case 12:Fs(y,v,a);break;case 31:Fs(y,v,a),a&&A&4&&Fv(y,v);break;case 13:Fs(y,v,a),a&&A&4&&Gv(y,v);break;case 22:v.memoizedState===null&&Fs(y,v,a),Gl(v,v.return);break;case 30:break;default:Fs(y,v,a)}o=o.sibling}}function zh(s,o){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&xl(a))}function Kh(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&xl(s))}function zi(s,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Kv(s,o,a,c),o=o.sibling}function Kv(s,o,a,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:zi(s,o,a,c),y&2048&&Fl(9,o);break;case 1:zi(s,o,a,c);break;case 3:zi(s,o,a,c),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&xl(s)));break;case 12:if(y&2048){zi(s,o,a,c),s=o.stateNode;try{var v=o.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(L){mt(o,o.return,L)}}else zi(s,o,a,c);break;case 31:zi(s,o,a,c);break;case 13:zi(s,o,a,c);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?zi(s,o,a,c):ql(s,o):v._visibility&2?zi(s,o,a,c):(v._visibility|=2,ha(s,o,a,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&zh(A,o);break;case 24:zi(s,o,a,c),y&2048&&Kh(o.alternate,o);break;default:zi(s,o,a,c)}}function ha(s,o,a,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=s,A=o,I=a,L=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:ha(v,A,I,L,y),Fl(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?ha(v,A,I,L,y):ql(v,A):(te._visibility|=2,ha(v,A,I,L,y)),y&&J&2048&&zh(A.alternate,A);break;case 24:ha(v,A,I,L,y),y&&J&2048&&Kh(A.alternate,A);break;default:ha(v,A,I,L,y)}o=o.sibling}}function ql(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=s,c=o,y=c.flags;switch(c.tag){case 22:ql(a,c),y&2048&&zh(c.alternate,c);break;case 24:ql(a,c),y&2048&&Kh(c.alternate,c);break;default:ql(a,c)}o=o.sibling}}var zl=8192;function pa(s,o,a){if(s.subtreeFlags&zl)for(s=s.child;s!==null;)$v(s,o,a),s=s.sibling}function $v(s,o,a){switch(s.tag){case 26:pa(s,o,a),s.flags&zl&&s.memoizedState!==null&&yI(a,qi,s.memoizedState,s.memoizedProps);break;case 5:pa(s,o,a);break;case 3:case 4:var c=qi;qi=Qc(s.stateNode.containerInfo),pa(s,o,a),qi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=zl,zl=16777216,pa(s,o,a),zl=c):pa(s,o,a));break;default:pa(s,o,a)}}function Yv(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Kl(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];rn=c,Qv(c,s)}Yv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Jv(s),s=s.sibling}function Jv(s){switch(s.tag){case 0:case 11:case 15:Kl(s),s.flags&2048&&So(9,s,s.return);break;case 3:Kl(s);break;case 12:Kl(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Uc(s)):Kl(s);break;default:Kl(s)}}function Uc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];rn=c,Qv(c,s)}Yv(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:So(8,o,o.return),Uc(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Uc(o));break;default:Uc(o)}s=s.sibling}}function Qv(s,o){for(;rn!==null;){var a=rn;switch(a.tag){case 0:case 11:case 15:So(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:xl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,rn=c;else e:for(a=s;rn!==null;){c=rn;var y=c.sibling,v=c.return;if(Hv(c),c===a){rn=null;break e}if(y!==null){y.return=v,rn=y;break e}rn=v}}}var Dw={getCacheForType:function(s){var o=dn($t),a=o.data.get(s);return a===void 0&&(a=s(),o.data.set(s,a)),a},cacheSignal:function(){return dn($t).controller.signal}},Pw=typeof WeakMap=="function"?WeakMap:Map,lt=0,Et=null,$e=null,Je=0,pt=0,li=null,Ao=!1,ma=!1,$h=!1,Gs=0,Lt=0,Co=0,wr=0,Yh=0,ui=0,ga=0,$l=null,Yn=null,Jh=!1,Lc=0,Xv=0,Oc=1/0,Hc=null,bo=null,Zt=0,wo=null,ya=null,qs=0,Qh=0,Xh=null,Wv=null,Yl=0,Wh=null;function ci(){return(lt&2)!==0&&Je!==0?Je&-Je:W.T!==null?ip():Br()}function jv(){if(ui===0)if((Je&536870912)===0||et){var s=Vi;Vi<<=1,(Vi&3932160)===0&&(Vi=262144),ui=s}else ui=536870912;return s=ri.current,s!==null&&(s.flags|=32),ui}function Jn(s,o,a){(s===Et&&(pt===2||pt===9)||s.cancelPendingCommit!==null)&&(va(s,0),Io(s,Je,ui,!1)),Tn(s,a),((lt&2)===0||s!==Et)&&(s===Et&&((lt&2)===0&&(wr|=a),Lt===4&&Io(s,Je,ui,!1)),hs(s))}function Zv(s,o,a){if((lt&6)!==0)throw Error(i(327));var c=!a&&(o&127)===0&&(o&s.expiredLanes)===0||ke(s,o),y=c?Uw(s,o):Zh(s,o,!0),v=c;do{if(y===0){ma&&!c&&Io(s,o,0,!1);break}else{if(a=s.current.alternate,v&&!kw(a)){y=Zh(s,o,!1),v=!1;continue}if(y===2){if(v=o,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var I=s;y=$l;var L=I.current.memoizedState.isDehydrated;if(L&&(va(I,A).flags|=256),A=Zh(I,A,!1),A!==2){if($h&&!L){I.errorRecoveryDisabledLanes|=v,wr|=v,y=4;break e}v=Yn,Yn=y,v!==null&&(Yn===null?Yn=v:Yn.push.apply(Yn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){va(s,0),Io(s,o,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Io(c,o,ui,!Ao);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=Lc+300-Ot(),10<y)){if(Io(c,o,ui,!Ao),Ce(c,0,!0)!==0)break e;qs=o,c.timeoutHandle=N0(e0.bind(null,c,a,Yn,Hc,Jh,o,ui,wr,ga,Ao,v,"Throttled",-0,0),y);break e}e0(c,a,Yn,Hc,Jh,o,ui,wr,ga,Ao,v,null,-0,0)}}break}while(!0);hs(s)}function e0(s,o,a,c,y,v,A,I,L,J,te,ie,Q,ee){if(s.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Li},$v(o,v,ie);var ve=(v&62914560)===v?Lc-Ot():(v&4194048)===v?Xv-Ot():0;if(ve=vI(ie,ve),ve!==null){qs=v,s.cancelPendingCommit=ve(l0.bind(null,s,o,v,a,c,y,A,I,L,te,ie,null,Q,ee)),Io(s,v,A,!J);return}}l0(s,o,v,a,c,y,A,I,L)}function kw(s){for(var o=s;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!si(v(),y))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Io(s,o,a,c){o&=~Yh,o&=~wr,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var y=o;0<y;){var v=31-St(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&Bn(s,a,o)}function Bc(){return(lt&6)===0?(Jl(0),!1):!0}function jh(){if($e!==null){if(pt===0)var s=$e.return;else s=$e,Ds=yr=null,ph(s),la=null,Nl=0,s=$e;for(;s!==null;)Mv(s.alternate,s),s=s.return;$e=null}}function va(s,o){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,eI(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),qs=0,jh(),Et=s,$e=a=Ns(s.current,null),Je=o,pt=0,li=null,Ao=!1,ma=ke(s,o),$h=!1,ga=ui=Yh=wr=Co=Lt=0,Yn=$l=null,Jh=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var y=31-St(c),v=1<<y;o|=s[y],c&=~v}return Gs=o,ac(),a}function t0(s,o){Fe=null,W.H=Ol,o===aa||o===mc?(o=yy(),pt=3):o===nh?(o=yy(),pt=4):pt=o===Nh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,li=o,$e===null&&(Lt=1,Rc(s,Ti(o,s.current)))}function n0(){var s=ri.current;return s===null?!0:(Je&4194048)===Je?Ci===null:(Je&62914560)===Je||(Je&536870912)!==0?s===Ci:!1}function i0(){var s=W.H;return W.H=Ol,s===null?Ol:s}function s0(){var s=W.A;return W.A=Dw,s}function Fc(){Lt=4,Ao||(Je&4194048)!==Je&&ri.current!==null||(ma=!0),(Co&134217727)===0&&(wr&134217727)===0||Et===null||Io(Et,Je,ui,!1)}function Zh(s,o,a){var c=lt;lt|=2;var y=i0(),v=s0();(Et!==s||Je!==o)&&(Hc=null,va(s,o)),o=!1;var A=Lt;e:do try{if(pt!==0&&$e!==null){var I=$e,L=li;switch(pt){case 8:jh(),A=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(o=!0);var J=pt;if(pt=0,li=null,_a(s,I,L,J),a&&ma){A=0;break e}break;default:J=pt,pt=0,li=null,_a(s,I,L,J)}}Vw(),A=Lt;break}catch(te){t0(s,te)}while(!0);return o&&s.shellSuspendCounter++,Ds=yr=null,lt=c,W.H=y,W.A=v,$e===null&&(Et=null,Je=0,ac()),A}function Vw(){for(;$e!==null;)o0($e)}function Uw(s,o){var a=lt;lt|=2;var c=i0(),y=s0();Et!==s||Je!==o?(Hc=null,Oc=Ot()+500,va(s,o)):ma=ke(s,o);e:do try{if(pt!==0&&$e!==null){o=$e;var v=li;t:switch(pt){case 1:pt=0,li=null,_a(s,o,v,1);break;case 2:case 9:if(my(v)){pt=0,li=null,r0(o);break}o=function(){pt!==2&&pt!==9||Et!==s||(pt=7),hs(s)},v.then(o,o);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:my(v)?(pt=0,li=null,r0(o)):(pt=0,li=null,_a(s,o,v,7));break;case 5:var A=null;switch($e.tag){case 26:A=$e.memoizedState;case 5:case 27:var I=$e;if(A?K0(A):I.stateNode.complete){pt=0,li=null;var L=I.sibling;if(L!==null)$e=L;else{var J=I.return;J!==null?($e=J,Gc(J)):$e=null}break t}}pt=0,li=null,_a(s,o,v,5);break;case 6:pt=0,li=null,_a(s,o,v,6);break;case 8:jh(),Lt=6;break e;default:throw Error(i(462))}}Lw();break}catch(te){t0(s,te)}while(!0);return Ds=yr=null,W.H=c,W.A=y,lt=a,$e!==null?0:(Et=null,Je=0,ac(),Lt)}function Lw(){for(;$e!==null&&!Wi();)o0($e)}function o0(s){var o=Rv(s.alternate,s,Gs);s.memoizedProps=s.pendingProps,o===null?Gc(s):$e=o}function r0(s){var o=s,a=o.alternate;switch(o.tag){case 15:case 0:o=Av(a,o,o.pendingProps,o.type,void 0,Je);break;case 11:o=Av(a,o,o.pendingProps,o.type.render,o.ref,Je);break;case 5:ph(o);default:Mv(a,o),o=$e=sy(o,Gs),o=Rv(a,o,Gs)}s.memoizedProps=s.pendingProps,o===null?Gc(s):$e=o}function _a(s,o,a,c){Ds=yr=null,ph(o),la=null,Nl=0;var y=o.return;try{if(bw(s,y,o,a,Je)){Lt=1,Rc(s,Ti(a,s.current)),$e=null;return}}catch(v){if(y!==null)throw $e=y,v;Lt=1,Rc(s,Ti(a,s.current)),$e=null;return}o.flags&32768?(et||c===1?s=!0:ma||(Je&536870912)!==0?s=!1:(Ao=s=!0,(c===2||c===9||c===3||c===6)&&(c=ri.current,c!==null&&c.tag===13&&(c.flags|=16384))),a0(o,s)):Gc(o)}function Gc(s){var o=s;do{if((o.flags&32768)!==0){a0(o,Ao);return}s=o.return;var a=xw(o.alternate,o,Gs);if(a!==null){$e=a;return}if(o=o.sibling,o!==null){$e=o;return}$e=o=s}while(o!==null);Lt===0&&(Lt=5)}function a0(s,o){do{var a=Rw(s.alternate,s);if(a!==null){a.flags&=32767,$e=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(s=s.sibling,s!==null)){$e=s;return}$e=s=a}while(s!==null);Lt=6,$e=null}function l0(s,o,a,c,y,v,A,I,L){s.cancelPendingCommit=null;do qc();while(Zt!==0);if((lt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=Ff,Zn(s,a,v,A,I,L),s===Et&&($e=Et=null,Je=0),ya=o,wo=s,qs=a,Qh=v,Xh=y,Wv=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Fw(Nn,function(){return h0(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,y=ue.p,ue.p=2,A=lt,lt|=4;try{Nw(s,o,a)}finally{lt=A,ue.p=y,W.T=c}}Zt=1,u0(),c0(),d0()}}function u0(){if(Zt===1){Zt=0;var s=wo,o=ya,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var c=ue.p;ue.p=2;var y=lt;lt|=4;try{qv(o,s);var v=dp,A=Qg(s.containerInfo),I=v.focusedElem,L=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&Jg(I.ownerDocument.documentElement,I)){if(L!==null&&Uf(I)){var J=L.start,te=L.end;if(te===void 0&&(te=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(te,I.value.length);else{var ie=I.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var ee=Q.getSelection(),ve=I.textContent.length,Ne=Math.min(L.start,ve),Tt=L.end===void 0?Ne:Math.min(L.end,ve);!ee.extend&&Ne>Tt&&(A=Tt,Tt=Ne,Ne=A);var z=Yg(I,Ne),G=Yg(I,Tt);if(z&&G&&(ee.rangeCount!==1||ee.anchorNode!==z.node||ee.anchorOffset!==z.offset||ee.focusNode!==G.node||ee.focusOffset!==G.offset)){var Y=ie.createRange();Y.setStart(z.node,z.offset),ee.removeAllRanges(),Ne>Tt?(ee.addRange(Y),ee.extend(G.node,G.offset)):(Y.setEnd(G.node,G.offset),ee.addRange(Y))}}}}for(ie=[],ee=I;ee=ee.parentNode;)ee.nodeType===1&&ie.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ie.length;I++){var ne=ie[I];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}td=!!cp,dp=cp=null}finally{lt=y,ue.p=c,W.T=a}}s.current=o,Zt=2}}function c0(){if(Zt===2){Zt=0;var s=wo,o=ya,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var c=ue.p;ue.p=2;var y=lt;lt|=4;try{Ov(s,o.alternate,o)}finally{lt=y,ue.p=c,W.T=a}}Zt=3}}function d0(){if(Zt===4||Zt===3){Zt=0,On();var s=wo,o=ya,a=qs,c=Wv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Zt=5:(Zt=0,ya=wo=null,f0(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(bo=null),Fn(a),o=o.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(nn,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=W.T,y=ue.p,ue.p=2,W.T=null;try{for(var v=s.onRecoverableError,A=0;A<c.length;A++){var I=c[A];v(I.value,{componentStack:I.stack})}}finally{W.T=o,ue.p=y}}(qs&3)!==0&&qc(),hs(s),y=s.pendingLanes,(a&261930)!==0&&(y&42)!==0?s===Wh?Yl++:(Yl=0,Wh=s):Yl=0,Jl(0)}}function f0(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,xl(o)))}function qc(){return u0(),c0(),d0(),h0()}function h0(){if(Zt!==5)return!1;var s=wo,o=Qh;Qh=0;var a=Fn(qs),c=W.T,y=ue.p;try{ue.p=32>a?32:a,W.T=null,a=Xh,Xh=null;var v=wo,A=qs;if(Zt=0,ya=wo=null,qs=0,(lt&6)!==0)throw Error(i(331));var I=lt;if(lt|=4,Jv(v.current),Kv(v,v.current,A,a),lt=I,Jl(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(nn,v)}catch{}return!0}finally{ue.p=y,W.T=c,f0(s,o)}}function p0(s,o,a){o=Ti(a,o),o=Rh(s.stateNode,o,2),s=_o(s,o,2),s!==null&&(Tn(s,2),hs(s))}function mt(s,o,a){if(s.tag===3)p0(s,s,a);else for(;o!==null;){if(o.tag===3){p0(o,s,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(bo===null||!bo.has(c))){s=Ti(a,s),a=mv(2),c=_o(o,a,2),c!==null&&(gv(a,c,o,s),Tn(c,2),hs(c));break}}o=o.return}}function ep(s,o,a){var c=s.pingCache;if(c===null){c=s.pingCache=new Pw;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(a)||($h=!0,y.add(a),s=Ow.bind(null,s,o,a),o.then(s,s))}function Ow(s,o,a){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,Et===s&&(Je&a)===a&&(Lt===4||Lt===3&&(Je&62914560)===Je&&300>Ot()-Lc?(lt&2)===0&&va(s,0):Yh|=a,ga===Je&&(ga=0)),hs(s)}function m0(s,o){o===0&&(o=Dn()),s=pr(s,o),s!==null&&(Tn(s,o),hs(s))}function Hw(s){var o=s.memoizedState,a=0;o!==null&&(a=o.retryLane),m0(s,a)}function Bw(s,o){var a=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),m0(s,a)}function Fw(s,o){return ft(s,o)}var zc=null,Ta=null,tp=!1,Kc=!1,np=!1,xo=0;function hs(s){s!==Ta&&s.next===null&&(Ta===null?zc=Ta=s:Ta=Ta.next=s),Kc=!0,tp||(tp=!0,qw())}function Jl(s,o){if(!np&&Kc){np=!0;do for(var a=!1,c=zc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,I=c.pingedLanes;v=(1<<31-St(42|s)+1)-1,v&=y&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,_0(c,v))}else v=Je,v=Ce(c,c===Et?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ke(c,v)||(a=!0,_0(c,v));c=c.next}while(a);np=!1}}function Gw(){g0()}function g0(){Kc=tp=!1;var s=0;xo!==0&&Zw()&&(s=xo);for(var o=Ot(),a=null,c=zc;c!==null;){var y=c.next,v=y0(c,o);v===0?(c.next=null,a===null?zc=y:a.next=y,y===null&&(Ta=a)):(a=c,(s!==0||(v&3)!==0)&&(Kc=!0)),c=y}Zt!==0&&Zt!==5||Jl(s),xo!==0&&(xo=0)}function y0(s,o){for(var a=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-St(v),I=1<<A,L=y[A];L===-1?((I&a)===0||(I&c)!==0)&&(y[A]=At(I,o)):L<=o&&(s.expiredLanes|=I),v&=~I}if(o=Et,a=Je,a=Ce(s,s===o?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,a===0||s===o&&(pt===2||pt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&vn(c),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||ke(s,a)){if(o=a&-a,o===s.callbackPriority)return o;switch(c!==null&&vn(c),Fn(a)){case 2:case 8:a=Pi;break;case 32:a=Nn;break;case 268435456:a=bs;break;default:a=Nn}return c=v0.bind(null,s),a=ft(a,c),s.callbackPriority=o,s.callbackNode=a,o}return c!==null&&c!==null&&vn(c),s.callbackPriority=2,s.callbackNode=null,2}function v0(s,o){if(Zt!==0&&Zt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(qc()&&s.callbackNode!==a)return null;var c=Je;return c=Ce(s,s===Et?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Zv(s,c,o),y0(s,Ot()),s.callbackNode!=null&&s.callbackNode===a?v0.bind(null,s):null)}function _0(s,o){if(qc())return null;Zv(s,o,!0)}function qw(){tI(function(){(lt&6)!==0?ft(ji,Gw):g0()})}function ip(){if(xo===0){var s=oa;s===0&&(s=Mn,Mn<<=1,(Mn&261888)===0&&(Mn=256)),xo=s}return xo}function T0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:zr(""+s)}function E0(s,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,s.id&&a.setAttribute("form",s.id),o.parentNode.insertBefore(a,o),s=new FormData(s),a.parentNode.removeChild(a),s}function zw(s,o,a,c,y){if(o==="submit"&&a&&a.stateNode===y){var v=T0((y[Ht]||null).action),A=c.submitter;A&&(o=(o=A[Ht]||null)?T0(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var I=new rs("action","action",null,c,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(xo!==0){var L=A?E0(y,A):new FormData(y);Ah(a,{pending:!0,data:L,method:y.method,action:v},null,L)}}else typeof v=="function"&&(I.preventDefault(),L=A?E0(y,A):new FormData(y),Ah(a,{pending:!0,data:L,method:y.method,action:v},v,L))},currentTarget:y}]})}}for(var sp=0;sp<Bf.length;sp++){var op=Bf[sp],Kw=op.toLowerCase(),$w=op[0].toUpperCase()+op.slice(1);Gi(Kw,"on"+$w)}Gi(jg,"onAnimationEnd"),Gi(Zg,"onAnimationIteration"),Gi(ey,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(lw,"onTransitionRun"),Gi(uw,"onTransitionStart"),Gi(cw,"onTransitionCancel"),Gi(ty,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function S0(s,o){o=(o&4)!==0;for(var a=0;a<s.length;a++){var c=s[a],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var A=c.length-1;0<=A;A--){var I=c[A],L=I.instance,J=I.currentTarget;if(I=I.listener,L!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(te){rc(te)}y.currentTarget=null,v=L}else for(A=0;A<c.length;A++){if(I=c[A],L=I.instance,J=I.currentTarget,I=I.listener,L!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(te){rc(te)}y.currentTarget=null,v=L}}}}function Ye(s,o){var a=o[Vt];a===void 0&&(a=o[Vt]=new Set);var c=s+"__bubble";a.has(c)||(A0(o,s,2,!1),a.add(c))}function rp(s,o,a){var c=0;o&&(c|=4),A0(a,s,c,o)}var $c="_reactListening"+Math.random().toString(36).slice(2);function ap(s){if(!s[$c]){s[$c]=!0,al.forEach(function(a){a!=="selectionchange"&&(Yw.has(a)||rp(a,!1,s),rp(a,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[$c]||(o[$c]=!0,rp("selectionchange",!1,o))}}function A0(s,o,a,c){switch(j0(o)){case 2:var y=EI;break;case 8:y=SI;break;default:y=Sp}a=y.bind(null,o,a,s),y=void 0,!rr||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(o,a,{capture:!0,passive:y}):s.addEventListener(o,a,!0):y!==void 0?s.addEventListener(o,a,{passive:y}):s.addEventListener(o,a,!1)}function lp(s,o,a,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=nt(I),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){c=v=A;continue e}I=I.parentNode}}c=c.return}lo(function(){var J=v,te=gi(a),ie=[];e:{var Q=ny.get(s);if(Q!==void 0){var ee=rs,ve=s;switch(s){case"keypress":if(lr(a)===0)break e;case"keydown":case"keyup":ee=ic;break;case"focusin":ve="focus",ee=cr;break;case"focusout":ve="blur",ee=cr;break;case"beforeblur":case"afterblur":ee=cr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=E;break;case jg:case Zg:case ey:ee=Xu;break;case ty:ee=x;break;case"scroll":case"scrollend":ee=_l;break;case"wheel":ee=j;break;case"copy":case"cut":case"paste":ee=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Rs;break;case"toggle":case"beforetoggle":ee=Be}var Ne=(o&4)!==0,Tt=!Ne&&(s==="scroll"||s==="scrollend"),z=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var G=J,Y;G!==null;){var ne=G;if(Y=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||Y===null||z===null||(ne=Oi(G,z),ne!=null&&Ne.push(Xl(G,ne,Y))),Tt)break;G=G.return}0<Ne.length&&(Q=new ee(Q,ve,null,a,te),ie.push({event:Q,listeners:Ne}))}}if((o&7)===0){e:{if(Q=s==="mouseover"||s==="pointerover",ee=s==="mouseout"||s==="pointerout",Q&&a!==gl&&(ve=a.relatedTarget||a.fromElement)&&(nt(ve)||ve[ni]))break e;if((ee||Q)&&(Q=te.window===te?te:(Q=te.ownerDocument)?Q.defaultView||Q.parentWindow:window,ee?(ve=a.relatedTarget||a.toElement,ee=J,ve=ve?nt(ve):null,ve!==null&&(Tt=l(ve),Ne=ve.tag,ve!==Tt||Ne!==5&&Ne!==27&&Ne!==6)&&(ve=null)):(ee=null,ve=J),ee!==ve)){if(Ne=Tl,ne="onMouseLeave",z="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Ne=Rs,ne="onPointerLeave",z="onPointerEnter",G="pointer"),Tt=ee==null?Q:sn(ee),Y=ve==null?Q:sn(ve),Q=new Ne(ne,G+"leave",ee,a,te),Q.target=Tt,Q.relatedTarget=Y,ne=null,nt(te)===J&&(Ne=new Ne(z,G+"enter",ve,a,te),Ne.target=Y,Ne.relatedTarget=Tt,ne=Ne),Tt=ne,ee&&ve)t:{for(Ne=Jw,z=ee,G=ve,Y=0,ne=z;ne;ne=Ne(ne))Y++;ne=0;for(var be=G;be;be=Ne(be))ne++;for(;0<Y-ne;)z=Ne(z),Y--;for(;0<ne-Y;)G=Ne(G),ne--;for(;Y--;){if(z===G||G!==null&&z===G.alternate){Ne=z;break t}z=Ne(z),G=Ne(G)}Ne=null}else Ne=null;ee!==null&&C0(ie,Q,ee,Ne,!1),ve!==null&&Tt!==null&&C0(ie,Tt,ve,Ne,!0)}}e:{if(Q=J?sn(J):window,ee=Q.nodeName&&Q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Q.type==="file")var it=Fg;else if(Hg(Q))if(Gg)it=ow;else{it=iw;var Te=nw}else ee=Q.nodeName,!ee||ee.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?J&&qr(J.elementType)&&(it=Fg):it=sw;if(it&&(it=it(s,J))){Bg(ie,it,a,te);break e}Te&&Te(s,Q,J),s==="focusout"&&J&&Q.type==="number"&&J.memoizedProps.value!=null&&hl(Q,"number",Q.value)}switch(Te=J?sn(J):window,s){case"focusin":(Hg(Te)||Te.contentEditable==="true")&&(Wr=Te,Lf=J,bl=null);break;case"focusout":bl=Lf=Wr=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,Xg(ie,a,te);break;case"selectionchange":if(aw)break;case"keydown":case"keyup":Xg(ie,a,te)}var qe;if(at)e:{switch(s){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else Xr?dr(s,a)&&(Qe="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(Qe="onCompositionStart");Qe&&(us&&a.locale!=="ko"&&(Xr||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Xr&&(qe=vl()):(os=te,yl="value"in os?os.value:os.textContent,Xr=!0)),Te=Yc(J,Qe),0<Te.length&&(Qe=new ls(Qe,s,null,a,te),ie.push({event:Qe,listeners:Te}),qe?Qe.data=qe:(qe=Qr(a),qe!==null&&(Qe.data=qe)))),(qe=vi?jb(s,a):Zb(s,a))&&(Qe=Yc(J,"onBeforeInput"),0<Qe.length&&(Te=new ls("onBeforeInput","beforeinput",null,a,te),ie.push({event:Te,listeners:Qe}),Te.data=qe)),zw(ie,s,J,a,te)}S0(ie,o)})}function Xl(s,o,a){return{instance:s,listener:o,currentTarget:a}}function Yc(s,o){for(var a=o+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Oi(s,a),y!=null&&c.unshift(Xl(s,y,v)),y=Oi(s,o),y!=null&&c.push(Xl(s,y,v))),s.tag===3)return c;s=s.return}return[]}function Jw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function C0(s,o,a,c,y){for(var v=o._reactName,A=[];a!==null&&a!==c;){var I=a,L=I.alternate,J=I.stateNode;if(I=I.tag,L!==null&&L===c)break;I!==5&&I!==26&&I!==27||J===null||(L=J,y?(J=Oi(a,v),J!=null&&A.unshift(Xl(a,J,L))):y||(J=Oi(a,v),J!=null&&A.push(Xl(a,J,L)))),a=a.return}A.length!==0&&s.push({event:o,listeners:A})}var Qw=/\r\n?/g,Xw=/\u0000|\uFFFD/g;function b0(s){return(typeof s=="string"?s:""+s).replace(Qw,`
`).replace(Xw,"")}function w0(s,o){return o=b0(o),b0(s)===o}function _t(s,o,a,c,y,v){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||qn(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&qn(s,""+c);break;case"className":ii(s,"class",c);break;case"tabIndex":ii(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ii(s,a,c);break;case"style":ml(s,c,v);break;case"data":if(o!=="object"){ii(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){s.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=zr(""+c),s.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&_t(s,o,"name",y.name,y,null),_t(s,o,"formEncType",y.formEncType,y,null),_t(s,o,"formMethod",y.formMethod,y,null),_t(s,o,"formTarget",y.formTarget,y,null)):(_t(s,o,"encType",y.encType,y,null),_t(s,o,"method",y.method,y,null),_t(s,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=zr(""+c),s.setAttribute(a,c);break;case"onClick":c!=null&&(s.onclick=Li);break;case"onScroll":c!=null&&Ye("scroll",s);break;case"onScrollEnd":c!=null&&Ye("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}a=zr(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""+c):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":c===!0?s.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,c):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(a,c):s.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(a):s.setAttribute(a,c);break;case"popover":Ye("beforetoggle",s),Ye("toggle",s),Fr(s,"popover",c);break;case"xlinkActuate":Kt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Kt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Kt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Kt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Kt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Kt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Kt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Kt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Kt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Fr(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Yu.get(a)||a,Fr(s,a,c))}}function up(s,o,a,c,y,v){switch(a){case"style":ml(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"children":typeof c=="string"?qn(s,c):(typeof c=="number"||typeof c=="bigint")&&qn(s,""+c);break;case"onScroll":c!=null&&Ye("scroll",s);break;case"onScrollEnd":c!=null&&Ye("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ll.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),o=a.slice(2,y?a.length-7:void 0),v=s[Ht]||null,v=v!=null?v[a]:null,typeof v=="function"&&s.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(o,c,y);break e}a in s?s[a]=c:c===!0?s.setAttribute(a,""):Fr(s,a,c)}}}function hn(s,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",s),Ye("load",s);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:_t(s,o,v,A,a,null)}}y&&_t(s,o,"srcSet",a.srcSet,a,null),c&&_t(s,o,"src",a.src,a,null);return;case"input":Ye("invalid",s);var I=v=A=y=null,L=null,J=null;for(c in a)if(a.hasOwnProperty(c)){var te=a[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":L=te;break;case"defaultChecked":J=te;break;case"value":v=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:_t(s,o,c,te,a,null)}}zu(s,v,I,L,J,A,y,!1);return;case"select":Ye("invalid",s),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:_t(s,o,y,I,a,null)}o=v,a=A,s.multiple=!!c,o!=null?so(s,!!c,o,!1):a!=null&&so(s,!!c,a,!0);return;case"textarea":Ye("invalid",s),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:_t(s,o,A,I,a,null)}oo(s,c,y,v);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(c=a[L],c!=null))switch(L){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:_t(s,o,L,c,a,null)}return;case"dialog":Ye("beforetoggle",s),Ye("toggle",s),Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":Ye("load",s);break;case"video":case"audio":for(c=0;c<Ql.length;c++)Ye(Ql[c],s);break;case"image":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"embed":case"source":case"link":Ye("error",s),Ye("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(c=a[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:_t(s,o,J,c,a,null)}return;default:if(qr(o)){for(te in a)a.hasOwnProperty(te)&&(c=a[te],c!==void 0&&up(s,o,te,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&_t(s,o,I,c,a,null))}function Ww(s,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,I=null,L=null,J=null,te=null;for(ee in a){var ie=a[ee];if(a.hasOwnProperty(ee)&&ie!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":L=ie;default:c.hasOwnProperty(ee)||_t(s,o,ee,null,c,ie)}}for(var Q in c){var ee=c[Q];if(ie=a[Q],c.hasOwnProperty(Q)&&(ee!=null||ie!=null))switch(Q){case"type":v=ee;break;case"name":y=ee;break;case"checked":J=ee;break;case"defaultChecked":te=ee;break;case"value":A=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:ee!==ie&&_t(s,o,Q,ee,c,ie)}}Gr(s,A,I,L,J,te,v,y);return;case"select":ee=A=I=Q=null;for(v in a)if(L=a[v],a.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":ee=L;default:c.hasOwnProperty(v)||_t(s,o,v,null,c,L)}for(y in c)if(v=c[y],L=a[y],c.hasOwnProperty(y)&&(v!=null||L!=null))switch(y){case"value":Q=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==L&&_t(s,o,y,v,c,L)}o=I,a=A,c=ee,Q!=null?so(s,!!a,Q,!1):!!c!=!!a&&(o!=null?so(s,!!a,o,!0):so(s,!!a,a?[]:"",!1));return;case"textarea":ee=Q=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:_t(s,o,I,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":Q=y;break;case"defaultValue":ee=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&_t(s,o,A,y,c,v)}Ku(s,Q,ee);return;case"option":for(var ve in a)if(Q=a[ve],a.hasOwnProperty(ve)&&Q!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":s.selected=!1;break;default:_t(s,o,ve,null,c,Q)}for(L in c)if(Q=c[L],ee=a[L],c.hasOwnProperty(L)&&Q!==ee&&(Q!=null||ee!=null))switch(L){case"selected":s.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:_t(s,o,L,Q,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)Q=a[Ne],a.hasOwnProperty(Ne)&&Q!=null&&!c.hasOwnProperty(Ne)&&_t(s,o,Ne,null,c,Q);for(J in c)if(Q=c[J],ee=a[J],c.hasOwnProperty(J)&&Q!==ee&&(Q!=null||ee!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,o));break;default:_t(s,o,J,Q,c,ee)}return;default:if(qr(o)){for(var Tt in a)Q=a[Tt],a.hasOwnProperty(Tt)&&Q!==void 0&&!c.hasOwnProperty(Tt)&&up(s,o,Tt,void 0,c,Q);for(te in c)Q=c[te],ee=a[te],!c.hasOwnProperty(te)||Q===ee||Q===void 0&&ee===void 0||up(s,o,te,Q,c,ee);return}}for(var z in a)Q=a[z],a.hasOwnProperty(z)&&Q!=null&&!c.hasOwnProperty(z)&&_t(s,o,z,null,c,Q);for(ie in c)Q=c[ie],ee=a[ie],!c.hasOwnProperty(ie)||Q===ee||Q==null&&ee==null||_t(s,o,ie,Q,c,ee)}function I0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,I=y.duration;if(v&&I&&I0(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var L=a[c],J=L.startTime;if(J>I)break;var te=L.transferSize,ie=L.initiatorType;te&&I0(ie)&&(L=L.responseEnd,A+=te*(L<I?1:(I-J)/(L-J)))}if(--c,o+=8*(v+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var cp=null,dp=null;function Jc(s){return s.nodeType===9?s:s.ownerDocument}function x0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function R0(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function fp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hp=null;function Zw(){var s=window.event;return s&&s.type==="popstate"?s===hp?!1:(hp=s,!0):(hp=null,!1)}var N0=typeof setTimeout=="function"?setTimeout:void 0,eI=typeof clearTimeout=="function"?clearTimeout:void 0,M0=typeof Promise=="function"?Promise:void 0,tI=typeof queueMicrotask=="function"?queueMicrotask:typeof M0<"u"?function(s){return M0.resolve(null).then(s).catch(nI)}:N0;function nI(s){setTimeout(function(){throw s})}function Ro(s){return s==="head"}function D0(s,o){var a=o,c=0;do{var y=a.nextSibling;if(s.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){s.removeChild(y),Ca(o);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Wl(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,Wl(a);for(var v=a.firstChild;v;){var A=v.nextSibling,I=v.nodeName;v[Me]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&Wl(s.ownerDocument.body);a=y}while(a);Ca(o)}function P0(s,o){var a=s;s=0;do{var c=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=c}while(a)}function pp(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":pp(a),we(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function iI(s,o,a,c){for(;s.nodeType===1;){var y=a;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Me])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=bi(s.nextSibling),s===null)break}return null}function sI(s,o,a){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=bi(s.nextSibling),s===null))return null;return s}function k0(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=bi(s.nextSibling),s===null))return null;return s}function mp(s){return s.data==="$?"||s.data==="$~"}function gp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function oI(s,o){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||a.readyState!=="loading")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function bi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var yp=null;function V0(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(o===0)return bi(s.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}s=s.nextSibling}return null}function U0(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return s;o--}else a!=="/$"&&a!=="/&"||o++}s=s.previousSibling}return null}function L0(s,o,a){switch(o=Jc(a),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Wl(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);we(s)}var wi=new Map,O0=new Set;function Qc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var zs=ue.d;ue.d={f:rI,r:aI,D:lI,C:uI,L:cI,m:dI,X:hI,S:fI,M:pI};function rI(){var s=zs.f(),o=Bc();return s||o}function aI(s){var o=En(s);o!==null&&o.tag===5&&o.type==="form"?tv(o):zs.r(s)}var Ea=typeof document>"u"?null:document;function H0(s,o,a){var c=Ea;if(c&&typeof o=="string"&&o){var y=Gn(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),O0.has(y)||(O0.add(y),s={rel:s,crossOrigin:a,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),hn(o,"link",s),zt(o),c.head.appendChild(o)))}}function lI(s){zs.D(s),H0("dns-prefetch",s,null)}function uI(s,o){zs.C(s,o),H0("preconnect",s,o)}function cI(s,o,a){zs.L(s,o,a);var c=Ea;if(c&&s&&o){var y='link[rel="preload"][as="'+Gn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+Gn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+Gn(a.imageSizes)+'"]')):y+='[href="'+Gn(s)+'"]';var v=y;switch(o){case"style":v=Sa(s);break;case"script":v=Aa(s)}wi.has(v)||(s=T({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:s,as:o},a),wi.set(v,s),c.querySelector(y)!==null||o==="style"&&c.querySelector(jl(v))||o==="script"&&c.querySelector(Zl(v))||(o=c.createElement("link"),hn(o,"link",s),zt(o),c.head.appendChild(o)))}}function dI(s,o){zs.m(s,o);var a=Ea;if(a&&s){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Gn(c)+'"][href="'+Gn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Aa(s)}if(!wi.has(v)&&(s=T({rel:"modulepreload",href:s},o),wi.set(v,s),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Zl(v)))return}c=a.createElement("link"),hn(c,"link",s),zt(c),a.head.appendChild(c)}}}function fI(s,o,a){zs.S(s,o,a);var c=Ea;if(c&&s){var y=mi(c).hoistableStyles,v=Sa(s);o=o||"default";var A=y.get(v);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(jl(v)))I.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":o},a),(a=wi.get(v))&&vp(s,a);var L=A=c.createElement("link");zt(L),hn(L,"link",s),L._p=new Promise(function(J,te){L.onload=J,L.onerror=te}),L.addEventListener("load",function(){I.loading|=1}),L.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Xc(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(v,A)}}}function hI(s,o){zs.X(s,o);var a=Ea;if(a&&s){var c=mi(a).hoistableScripts,y=Aa(s),v=c.get(y);v||(v=a.querySelector(Zl(y)),v||(s=T({src:s,async:!0},o),(o=wi.get(y))&&_p(s,o),v=a.createElement("script"),zt(v),hn(v,"link",s),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function pI(s,o){zs.M(s,o);var a=Ea;if(a&&s){var c=mi(a).hoistableScripts,y=Aa(s),v=c.get(y);v||(v=a.querySelector(Zl(y)),v||(s=T({src:s,async:!0,type:"module"},o),(o=wi.get(y))&&_p(s,o),v=a.createElement("script"),zt(v),hn(v,"link",s),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function B0(s,o,a,c){var y=(y=xe.current)?Qc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Sa(a.href),a=mi(y).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=Sa(a.href);var v=mi(y).hoistableStyles,A=v.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=y.querySelector(jl(s)))&&!v._p&&(A.instance=v,A.state.loading=5),wi.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},wi.set(s,a),v||mI(y,s,a,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Aa(a),a=mi(y).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Sa(s){return'href="'+Gn(s)+'"'}function jl(s){return'link[rel="stylesheet"]['+s+"]"}function F0(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function mI(s,o,a,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),hn(o,"link",a),zt(o),s.head.appendChild(o))}function Aa(s){return'[src="'+Gn(s)+'"]'}function Zl(s){return"script[async]"+s}function G0(s,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+Gn(a.href)+'"]');if(c)return o.instance=c,zt(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),zt(c),hn(c,"style",y),Xc(c,a.precedence,s),o.instance=c;case"stylesheet":y=Sa(a.href);var v=s.querySelector(jl(y));if(v)return o.state.loading|=4,o.instance=v,zt(v),v;c=F0(a),(y=wi.get(y))&&vp(c,y),v=(s.ownerDocument||s).createElement("link"),zt(v);var A=v;return A._p=new Promise(function(I,L){A.onload=I,A.onerror=L}),hn(v,"link",c),o.state.loading|=4,Xc(v,a.precedence,s),o.instance=v;case"script":return v=Aa(a.src),(y=s.querySelector(Zl(v)))?(o.instance=y,zt(y),y):(c=a,(y=wi.get(v))&&(c=T({},a),_p(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),zt(y),hn(y,"link",c),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Xc(c,a.precedence,s));return o.instance}function Xc(s,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===o)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(s,o.firstChild))}function vp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function _p(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Wc=null;function q0(s,o,a){if(Wc===null){var c=new Map,y=Wc=new Map;y.set(a,c)}else y=Wc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(s))return c;for(c.set(s,null),a=a.getElementsByTagName(s),y=0;y<a.length;y++){var v=a[y];if(!(v[Me]||v[kt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=s+A;var I=c.get(A);I?I.push(v):c.set(A,[v])}}return c}function z0(s,o,a){s=s.ownerDocument||s,s.head.insertBefore(a,o==="title"?s.querySelector("head > title"):null)}function gI(s,o,a){if(a===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function K0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function yI(s,o,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Sa(c.href),v=o.querySelector(jl(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=jc.bind(s),o.then(s,s)),a.state.loading|=4,a.instance=v,zt(v);return}v=o.ownerDocument||o,c=F0(c),(y=wi.get(y))&&vp(c,y),v=v.createElement("link"),zt(v);var A=v;A._p=new Promise(function(I,L){A.onload=I,A.onerror=L}),hn(v,"link",c),a.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=jc.bind(s),o.addEventListener("load",a),o.addEventListener("error",a))}}var Tp=0;function vI(s,o){return s.stylesheets&&s.count===0&&ed(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var c=setTimeout(function(){if(s.stylesheets&&ed(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+o);0<s.imgBytes&&Tp===0&&(Tp=62500*jw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ed(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>Tp?50:800)+o);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ed(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zc=null;function ed(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zc=new Map,o.forEach(_I,s),Zc=null,jc.call(s))}function _I(s,o){if(!(o.state.loading&4)){var a=Zc.get(s);if(a)var c=a.get(null);else{a=new Map,Zc.set(s,a);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=o.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=jc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var eu={$$typeof:Z,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function TI(s,o,a,c,y,v,A,I,L){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function $0(s,o,a,c,y,v,A,I,L,J,te,ie){return s=new TI(s,o,a,A,L,J,te,ie,I),o=1,v===!0&&(o|=24),v=oi(3,null,null,o),s.current=v,v.stateNode=s,o=Zf(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:o},ih(v),s}function Y0(s){return s?(s=ea,s):ea}function J0(s,o,a,c,y,v){y=Y0(y),c.context===null?c.context=y:c.pendingContext=y,c=vo(o),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=_o(s,c,o),a!==null&&(Jn(a,s,o),Dl(a,s,o))}function Q0(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<o?a:o}}function Ep(s,o){Q0(s,o),(s=s.alternate)&&Q0(s,o)}function X0(s){if(s.tag===13||s.tag===31){var o=pr(s,67108864);o!==null&&Jn(o,s,67108864),Ep(s,67108864)}}function W0(s){if(s.tag===13||s.tag===31){var o=ci();o=ws(o);var a=pr(s,o);a!==null&&Jn(a,s,o),Ep(s,o)}}var td=!0;function EI(s,o,a,c){var y=W.T;W.T=null;var v=ue.p;try{ue.p=2,Sp(s,o,a,c)}finally{ue.p=v,W.T=y}}function SI(s,o,a,c){var y=W.T;W.T=null;var v=ue.p;try{ue.p=8,Sp(s,o,a,c)}finally{ue.p=v,W.T=y}}function Sp(s,o,a,c){if(td){var y=Ap(c);if(y===null)lp(s,o,c,nd,a),Z0(s,c);else if(CI(y,s,o,a,c))c.stopPropagation();else if(Z0(s,c),o&4&&-1<AI.indexOf(s)){for(;y!==null;){var v=En(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Ae(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var L=1<<31-St(A);I.entanglements[1]|=L,A&=~L}hs(v),(lt&6)===0&&(Oc=Ot()+500,Jl(0))}}break;case 31:case 13:I=pr(v,2),I!==null&&Jn(I,v,2),Bc(),Ep(v,2)}if(v=Ap(c),v===null&&lp(s,o,c,nd,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else lp(s,o,c,null,a)}}function Ap(s){return s=gi(s),Cp(s)}var nd=null;function Cp(s){if(nd=null,s=nt(s),s!==null){var o=l(s);if(o===null)s=null;else{var a=o.tag;if(a===13){if(s=u(o),s!==null)return s;s=null}else if(a===31){if(s=f(o),s!==null)return s;s=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return nd=s,null}function j0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jn()){case ji:return 2;case Pi:return 8;case Nn:case no:return 32;case bs:return 268435456;default:return 32}default:return 32}}var bp=!1,No=null,Mo=null,Do=null,tu=new Map,nu=new Map,Po=[],AI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z0(s,o){switch(s){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":Mo=null;break;case"mouseover":case"mouseout":Do=null;break;case"pointerover":case"pointerout":tu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(o.pointerId)}}function iu(s,o,a,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=En(o),o!==null&&X0(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function CI(s,o,a,c,y){switch(o){case"focusin":return No=iu(No,s,o,a,c,y),!0;case"dragenter":return Mo=iu(Mo,s,o,a,c,y),!0;case"mouseover":return Do=iu(Do,s,o,a,c,y),!0;case"pointerover":var v=y.pointerId;return tu.set(v,iu(tu.get(v)||null,s,o,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,nu.set(v,iu(nu.get(v)||null,s,o,a,c,y)),!0}return!1}function e_(s){var o=nt(s.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=u(a),o!==null){s.blockedOn=o,ei(s.priority,function(){W0(a)});return}}else if(o===31){if(o=f(a),o!==null){s.blockedOn=o,ei(s.priority,function(){W0(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function id(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var a=Ap(s.nativeEvent);if(a===null){a=s.nativeEvent;var c=new a.constructor(a.type,a);gl=c,a.target.dispatchEvent(c),gl=null}else return o=En(a),o!==null&&X0(o),s.blockedOn=a,!1;o.shift()}return!0}function t_(s,o,a){id(s)&&a.delete(o)}function bI(){bp=!1,No!==null&&id(No)&&(No=null),Mo!==null&&id(Mo)&&(Mo=null),Do!==null&&id(Do)&&(Do=null),tu.forEach(t_),nu.forEach(t_)}function sd(s,o){s.blockedOn===o&&(s.blockedOn=null,bp||(bp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bI)))}var od=null;function n_(s){od!==s&&(od=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){od===s&&(od=null);for(var o=0;o<s.length;o+=3){var a=s[o],c=s[o+1],y=s[o+2];if(typeof c!="function"){if(Cp(c||a)===null)continue;break}var v=En(a);v!==null&&(s.splice(o,3),o-=3,Ah(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function Ca(s){function o(L){return sd(L,s)}No!==null&&sd(No,s),Mo!==null&&sd(Mo,s),Do!==null&&sd(Do,s),tu.forEach(o),nu.forEach(o);for(var a=0;a<Po.length;a++){var c=Po[a];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Po.length&&(a=Po[0],a.blockedOn===null);)e_(a),a.blockedOn===null&&Po.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[Ht]||null;if(typeof v=="function")A||n_(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Ht]||null)I=A.formAction;else if(Cp(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),n_(a)}}}function i_(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function wp(s){this._internalRoot=s}rd.prototype.render=wp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var a=o.current,c=ci();J0(a,c,s,o,null,null)},rd.prototype.unmount=wp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;J0(s.current,2,null,s,null,null),Bc(),o[ni]=null}};function rd(s){this._internalRoot=s}rd.prototype.unstable_scheduleHydration=function(s){if(s){var o=Br();s={blockedOn:null,target:s,priority:o};for(var a=0;a<Po.length&&o!==0&&o<Po[a].priority;a++);Po.splice(a,0,s),a===0&&e_(s)}};var s_=e.version;if(s_!=="19.2.3")throw Error(i(527,s_,"19.2.3"));ue.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(o),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var wI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{nn=ad.inject(wI),Rt=ad}catch{}}return ou.createRoot=function(s,o){if(!r(s))throw Error(i(299));var a=!1,c="",y=dv,v=fv,A=hv;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=$0(s,1,!1,null,null,a,c,null,y,v,A,i_),s[ni]=o.current,ap(s),new wp(o)},ou.hydrateRoot=function(s,o,a){if(!r(s))throw Error(i(299));var c=!1,y="",v=dv,A=fv,I=hv,L=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),o=$0(s,1,!0,o,a??null,c,y,L,v,A,I,i_),o.context=Y0(null),a=o.current,c=ci(),c=ws(c),y=vo(c),y.callback=null,_o(a,y,c),a=c,o.current.lanes=a,Tn(o,a),hs(o),s[ni]=o.current,ap(s),new rd(o)},ou.version="19.2.3",ou}var p_;function VI(){if(p_)return Rp.exports;p_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rp.exports=kI(),Rp.exports}var UI=VI();const LI=AS(UI);var Ma=bS();const ba=n=>Array.from(new Set(n)).sort((e,t)=>e.localeCompare(t)),lu=[{category:"Vital Sign",items:["Vital sign"]},{category:"Symptom",items:ba(["Abdominal distention","Abdominal pain","Abnormal menstruation","Abnormal sexual exposure","Alopecia","Anorexia","Anosmia","Anxiety","Arthralgia","Back pain","Belching","Blurred vision","Bone pain","Cataracts","Change of bowel habit","Chest tightness/pain","Chills","Clay-colored stool","Cloudy urine","Color changes","Consciousness disturbance","Constipation","Cough","Cramps","Decreased appetite","Delusion","Dental problems","Depression","Diarrhea","Diplopia","Dizziness","Dry eye","Dry mouth","Dryness","Dysphagia","Dyspnea","Dysuria","Ecchymoses","Epistaxis","Excess tearing","Eye redness","Fatigue","Fever","Flank pain","Flatulence","Fractures","Gait disturbance","General edema","Glaucoma","Gum bleeding","Hair loss","Hallucination","Head trauma","Headache","Hearing impairment","Heartburn/acid regurgitation","Heat/cold intolerance","Hematemesis","Hematuria","Hemoptysis","Hesitancy","Hiccup","Hirsutism","Hoarseness","Impotence","Incontinence","Insomnia","Intermittent claudication","Jaundice","Joint stiffness","Joint swelling","Memory loss","Mental stage change","Moles","Myalgia","Nasal congestion","Nausea","Night sweats","Nocturia","Numbness","Ocular pain","Odynophagia","Oliguria","Oral ulcer","Orthopnea","Otalgia","Otorrhea","Palpitation","Panic","Paraesthesia","Paresis/plegia","Paroxysmal nocturnal dyspnea","Petechiae","Photophobia","Plaque","Polyuria","Pruritus","Purpura","Rash","Resting tremor","Rhinorrhea","Small stream of urine","Somnolence","Sore throat","Speech problem","Sputum","Suicidality","Syncope","Tarry stool","Telangiectasia","Tenesmus","Thirsty","Tinnitus","Ulcers","Urgency","Urinary frequency","Vertigo","Visual field defect","Vomiting","Weight change","Wheezes"])},{category:"Negative Symptom",items:[]},{category:"Medical Facility",items:["Keelung Chang Gung Memorial Hospital ()","Linkou Chang Gung Memorial Hospital ()","Chiayi Chang Gung Memorial Hospital ()","Kaohsiung Chang Gung Memorial Hospital ()","National Taiwan University Hospital ()","National Taiwan University Hospital Yunlin Branch ()","National Taiwan University Hospital Hsinchu Branch ()","National Taiwan University Cancer Center ()","Taipei Veterans General Hospital ()","Taichung Veterans General Hospital ()","Kaohsiung Veterans General Hospital ()","Taipei City Hospital, Renai Branch ()","Taipei City Hospital, Zhongxing Branch ()","Taipei City Hospital, Heping Fuyou Branch ()","Taipei City Hospital, Yangming Branch ()","Taipei City Hospital, Zhongxiao Branch ()","Tri-Service General Hospital ()","Mackay Memorial Hospital ()","Hsinchu Mackay Memorial Hospital ()","Mackay Memorial Hospital Tamsui Branch ()","Cathay General Hospital ()","Sijhih Cathay General Hospital ()","Shin Kong Wu Ho-Su Memorial Hospital ()","Wanfang Hospital","Taipei Medical University Hospital ()","Cheng Hsin General Hospital ()","Far Eastern Memorial Hospital ()","Taipei Tzu Chi Hospital ()","Hualien Tzu Chi Hospital ()","Dalin Tzu Chi Hospital ()","Cardinal Tien Hospital ()","Fu Jen Catholic University Hospital ()","Taoyuan General Hospital, Ministry of Health and Welfare ()","China Medical University Hospital ()","Chung Shan Medical University Hospital ()","Tungs' Taichung MetroHarbor Hospital ()","Kuang Tien General Hospital ()","Cheng Ching Hospital ()","Changhua Christian Hospital ()","Show Chwan Memorial Hospital ()","Chia-Yi Christian Hospital ()","National Cheng Kung University Hospital ()","Chi Mei Medical Center ()","Kaohsiung Medical University Chung-Ho Memorial Hospital ()","E-Da Hospital ()","Taiwan Adventist Hospital ()","Pojen General Hospital ()","West Garden Hospital ()","Taipei Hospital, Ministry of Health and Welfare ()","New Taipei City Hospital ()","Cardinal Tien Hospital Yonghe Branch ()","New Taipei Municipal Tucheng Hospital ()"]},{category:"Disease",items:ba(["Acute Bronchitis","Acute Gastroenteritis (AGE)","Acute Kidney Injury (AKI)","Acute Myocardial Infarction (AMI)","Acute Pancreatitis","Acute Pyelonephritis (APN)","Adrenal Insufficiency","Anemia","Ankylosing Spondylitis (AS)","Aortic Stenosis / Regurgitation","Appendicitis","Asthma","Atrial Fibrillation (Afib)","Benign Prostatic Hyperplasia (BPH)","Breast Cancer","Cellulitis","Cerebrovascular Accident (CVA) / Stroke","Cholecystitis","Chronic Kidney Disease (CKD)","Chronic Obstructive Pulmonary Disease (COPD)","Colorectal Cancer","Congestive Heart Failure (CHF) / Heart Failure (HF)","Coronary Artery Disease (CAD)","Deep Vein Thrombosis (DVT)","Dehydration","Dementia","Depression / Anxiety Disorder","Diabetes Mellitus (DM)","Diabetic Foot","Diabetic Ketoacidosis (DKA)","Diverticulitis","End-Stage Renal Disease (ESRD)","Esophageal Cancer","Gastroesophageal Reflux Disease (GERD)","Gout","Hepatitis B / C","Hepatocellular Carcinoma (HCC)","Herniated Intervertebral Disc (HIVD)","Herpes Zoster (Shingles)","Hyperlipidemia","Hypertension (HTN)","Hyperthyroidism","Hypothyroidism","Ileus / Bowel Obstruction","Infective Endocarditis","Influenza","Leukemia","Liver Cirrhosis","Lower GI Bleeding","Lung Cancer","Lymphoma","Meningitis / Encephalitis","Myasthenia Gravis (MG)","Necrotizing Fasciitis","Nephrotic Syndrome","Obstructive Sleep Apnea (OSA)","Parkinson's Disease","Peptic Ulcer Disease (PUD)","Peripheral Arterial Occlusive Disease (PAOD)","Pleural Effusion","Pneumonia","Pneumothorax","Prostate Cancer","Pulmonary Embolism (PE)","Pulmonary Tuberculosis (TB)","Rabies","Rheumatoid Arthritis (RA)","Seizure Disorder / Epilepsy","Sepsis / Septic Shock","Sjogren's Syndrome","Systemic Lupus Erythematosus (SLE)","Thrombocytopenia","Tumor Bleeding","Upper GI Bleeding","Urinary Tract Infection (UTI)","Urolithiasis / Renal Stone","Vertigo / Benign Paroxysmal Positional Vertigo (BPPV)"])},{category:"Tentative Diagnosis",items:[]},{category:"Underlying disease",items:[]},{category:"Definitive diagnosis",items:[]},{category:"Physical examination",items:ba(["Breathing sound","Heart sound","Pitting edema","Abdominal tenderness","Rebound tenderness","Muscle guarding","Knocking pain","Tenderness"])},{category:"Lab data",items:ba(["Anemia","Leukocytosis","Leukopenia","Neutrophilia","Neutropenia","Lymphocytosis","Lymphocytopenia / Lymphopenia","Monocytosis","Eosinophilia","Basophilia","Thrombocytosis","Thrombocytopenia","Pancytopenia","Polycythemia / Erythrocytosis","Macrocytosis","Microcytosis","Reticulocytosis","Prolonged PT/INR","Prolonged aPTT","Hypofibrinogenemia","Hypernatremia","Hyponatremia","Hyperkalemia","Hypokalemia","Hypercalcemia","Hypocalcemia","Hypermagnesemia","Hypomagnesemia","Hyperphosphatemia","Hypophosphatemia","Hyperchloremia","Hypochloremia","Azotemia","Uremia","Hematuria","Proteinuria","Albuminuria / Microalbuminuria","Pyuria","Glycosuria / Glucosuria","Ketonuria","Bacteriuria","Cylindruria","Crystalluria","Hemoglobinuria","Myoglobinuria","Hyperbilirubinemia","Elevated Transaminases","Cholestasis","Hypoalbuminemia","Hyperglobulinemia","Hyperammonemia","Elevated Alkaline Phosphatase (Alk-P)","Hypoproteinemia","Hyperglycemia","Hypoglycemia","Elevated HbA1c","Hyperlipidemia / Dyslipidemia","Hypercholesterolemia","Hypertriglyceridemia","Hyperuricemia","Thyrotoxicosis","Subclinical Hypothyroidism","Hyperferritinemia","Metabolic Acidosis","Metabolic Alkalosis","Respiratory Acidosis","Respiratory Alkalosis","Hypoxemia","Hypercapnia","Hypocapnia","Hyperlactatemia / Lactic Acidosis","Elevated C-Reactive Protein (CRP)","Elevated ESR","Procalcitonin Elevation","Elevated Troponin (Troponin-I / T)","Elevated BNP / NT-proBNP","Elevated CK-MB","Elevated CPK / Creatine Kinase","elevated lactate","elevated BUN","elevated creatinine","microscopic hematuria","macroscopic hematuria"])},{category:"Culture / Gram stain",items:["wound","pus","blood","sputum","urine","stool","CSF","pleural effusion","ascites","Synovial fluid","CVC Tip","Port-A Tip","Foley Tip","Bronchoalveolar Lavage","Nasopharyngeal Swab","Throat Swab"]},{category:"Image finding",items:ba(["Chest X-ray (CXR)","Kidney, Ureter, and Bladder (KUB)","Abdominal Plain Film (Abd X-ray)","Spine X-ray (C/T/L-spine)","Bone X-ray","Abdominal Ultrasonography (Abd Echo/TAS)","Echocardiography (Echo)","Thyroid Ultrasonography","Breast Ultrasonography","Carotid Duplex Ultrasound","Kidney/Renal Ultrasonography","Brain CT","Chest CT","Abdominal CT","CT Angiography (CTA)","High-Resolution Computed Tomography (HRCT)","Brain MRI","Spine MRI","Magnetic Resonance Angiography (MRA)","Magnetic Resonance Cholangiopancreatography (MRCP)","Bone Scan","Positron Emission Potentially (PET)","Angiography","Mammography"])},{category:"Treatment",items:ba(["Antibiotics","Diuretics","Fluid resuscitation","Oxygen therapy","Hemodialysis","Bronchodilator"])}],Lm=`
**Role:**
 JSON   / Admission Note - Present Illness section

**Input Data Structure ():**
 JSON 
1. \`patient_profile\`:  ( \`control_status\`)
2. \`timepoints\`:  ** (Array)** \`date\`, \`symptom\`, \`vital_sign\`, \`treatment\`, \`lab_data\`, \`image_finding\`, \`negative_symptom\`  Key
   - **:**  Key  \`""\`  \`null\` (SKIP) "unknown" 

**Objective:**


**Style Guidelines (STYLE GUIDELINES) - :**

1. ** (Narrative Logic & Chain of Care):**
   - **LMD  ER :**  \`timepoints\`  (LMD)  **"futile"**, **"ineffective"**  **"not effective"** (ER) 
   - **:**  **"This time"**  **"At this time"**  (PMH)  (Present Illness)
   - **:** **"According to [family/wife/husband]..."**  **"[Family member] witnessed that..."**

2. ** (Sentence Structure & Grammar):**
   - **"Denied" () :**  "No fever, no cough"  \`negative_symptom\`  **"denied"**"He denied fever, chills, or chest pain."**"No [symptom] was noted/mentioned."**
   - **"Beside" :**  **"Beside"** "Besides"
   - **/:**  "He had a tremor" **"[Symptom] was noted/observed"**  **"[Symptom] occurred"**
   - **/:** **"Aggravated by [A] but not [B]"**  **"Relieved by [C]"**
   - **:** **"For [Diagnosis], he/she was admitted..."**  **"Under the impression of [Diagnosis], he/she was admitted..."**

3. ** (Data Formatting):**
   - **:** **"[Disease] + [Duration] + [Follow-up Location] + [Control status]"**"Hypertension for 10 years with regular follow-up at our OPD."
   - ** ():** **Temperature -> Blood Pressure -> Pulse -> Respiratory Rate -> SpO2**
   - **:**  (;) "WBC: 10700/ul; CRP: 76.4 mg/L"
   - **:**  ** + /**"Yellowish, tenacious sputum", "Pinkish urine"
   - **:**  **"unremarkable"**
   - **:** **Brand names** ()  (e.g., *Unasyn*); **Generic names** ()  (e.g., *moxifloxacin*)

4. ** (Grammar & Terminology Precision) [NEW]:**
   - **:**  "since 3 days ago" **"for 3 days"**, **"since 3 days prior"**,  **"developed 3 days before admission"**
   - **:** - : **lungs**, **feet**, **breath sounds**, **bowel sounds**
     - : sputum, urine, inflammation
   - **:** - Weakness **in** the leg (NOT over).
     - Tenderness **over** the spine.
     - Mass **in** the lung.
   - **:**  "LMD"  **"local clinic"**  **"private clinic"** "AAD"  **"discharged against medical advice (AMA)"**

** (VOCABULARY BANK) - :**


* ** (Mode of Onset / Appearance):**
  - ** (Verbs):** Appear, Develop, Present (with), Occur (on), Strike, Ensue from, Be restricted to.
  - ** (Adjectives):** Sudden / Abrupt, Gradual / Insidious, Progressive, Episodic / Paroxysmal, Intermittent, Transient, Periodic, Recurrent.
* ** (Causality):**
  - **:** Be provoked by, Be precipitated by, Be triggered by, Be induced by.
  - **:** Be associated with, Be related to, Be accompanied by, Be complicated by.
* ** (Course & Outcome):**
  - **:** Disappear, Vanish, Subside.
  - **:** Improve, Become better, Lessen; (Passive) Be relieved, Be palliated, Be alleviated.
  - **:** Aggravate, Exacerbate, Worsen, Deteriorate.
  - **:** Recur, Relapse, Flare up.
  - **:** Fluctuate, Wax and wane.
* ** (Encounter & Work-up):**
  - **:** Was admitted, Was seen, Was evaluated, Was referred, Was transferred.
  - ** (Procedures):** - Use: **"Insert a Foley"**, **"Perform intubation"**, **"Replace an NG tube"**.
    - **FORBIDDEN:** "On Foley", "Re-on NG", "On endo".
  - ** (Test):** Was performed, Was obtained, Was collected.
* ** (Treatment):**
  - **:** Treat, Administer, Give, Initiate, Start.
  - **:** **Switch to**, **Replace by**, **Substitute for**. (FORBIDDEN: "Shift to").
  - **:** **Discontinue**, **Withhold**, **Stop**. (FORBIDDEN: "Hold").
  - **:** Be ineffective, Not effective, **Futile**; Result in improvement.
* **:**
  - **:** **"Sequently"**, **"Consecutively"**, **"Successively"**, **"Afterwards"**.
  - **:** **"manifested"**, **"depicted"**, **"revealed"**, **"demonstrated"**, **"evinced"**.
  - **:** **"Avowed"**, **"Perceived"**, **"Complained of"**, State, Insist, Claim, Confide.
  - **:** Use **"Was diagnosed with"**, **"A diagnosis of... was made"**. (FORBIDDEN: "Was told to have", "Pneumonia was impressed").
  - **:** Use **"Lost to follow-up"**, **"Defaulted"**. (FORBIDDEN: "Escape").
  - **:** **stationary**, **"stable"**.
  - **:** **"antecedent [Disease]"**.

**Drafting Structure ( - Dynamic Loop):**

1. ** (Background)**
   -  \`patient_profile\` 
   - : "This [Age]-year-old [Gender] has a medical history of [Disease]..." ( \`control_status\`)

2. ** N  (The Narrative Loop)**
   - **:**  (Iterate through) \`timepoints\` 
   - **Loop :**
     - ** (Timepoint):**
       -  \`date\` 
       - ** (Symptom):**  \`symptom\` ()  \`negative_symptom\` ( "denied")
       - ** (Objective):**  \`vital_sign\`, \`lab_data\`, \`image_finding\` "revealed/evinced/manifested" 
       - ** (Treatment):**  \`treatment\` LMD (Local Clinic)  **"futile"**  **"ineffective"**
     - ** (Transition):**  Vocabulary Bank  ( "Sequently", "Consecutively") 

3. ** (Conclusion/Admission)**
   -  ( ER)  \`definitive_diagnosis\` 
   - : "**For [Diagnosis], he/she was admitted for further evaluation and administration.**"

**Anti-Hallucination & Missing Detail Prompts ( - CRITICAL):**

**Rule 1: Strict Anti-Hallucination**
Do **NOT** invent any data not present in the JSON. If the JSON says "fever" but gives no temperature, do NOT make up a number like "38.5C".

**Rule 2: The "Missing Detail" Heuristic ()**
While you must not invent details, you MUST flag clinically important missing information. If the JSON input provides a *generic* term without *specific attributes*, **insert a reminder in parentheses within the sentence**: \`(Note: Please add [Detail Name])\`.

**Apply this rule to the following categories:**

* **Symptoms (LQQOPERA check):**
    * If a symptom is listed without **Duration**, insert \`(Note: duration?)\`.
    * If "Pain" is listed without **Location**, **Quality**, or **Radiation**, insert \`(Note: location/quality/radiation?)\`.
    * If "Fever" is listed without **Temperature (Tmax)**, insert \`(Note: Tmax?)\`.
* **Secretions/Excretions:**
    * If "Sputum", "Diarrhea", "Hematuria" are mentioned without **Color/Amount/Consistency**, insert \`(Note: color/amount/consistency?)\`.
* **Treatment/Medication:**
    * If generic terms (e.g., "Antibiotics") are used without a **Specific Drug Name**, insert \`(Note: drug name?)\`.
* **Labs/Images:**
    * If "Image finding" is present but lacks a **Description**, insert \`(Note: image finding description?)\`.
    * If generic lab abnormalities (e.g., "Leukocytosis") are mentioned without \`Specific Values\`, insert \`(Note: value?)\`.
`;/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),m_=n=>{const e=HI(n);return e.charAt(0).toUpperCase()+e.slice(1)},wS=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),BI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=re.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:l,iconNode:u,...f},g)=>re.createElement("svg",{ref:g,...FI,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:wS("lucide",r),...!l&&!BI(f)&&{"aria-hidden":"true"},...f},[...u.map(([h,_])=>re.createElement(h,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(n,e)=>{const t=re.forwardRef(({className:i,...r},l)=>re.createElement(GI,{ref:l,iconNode:e,className:wS(`lucide-${OI(m_(n))}`,`lucide-${n}`,i),...r}));return t.displayName=m_(n),t};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],IS=ze("activity",qI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],KI=ze("arrow-right",zI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],YI=ze("brain-circuit",$I);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],QI=ze("building-2",JI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],WI=ze("calendar-days",XI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],xS=ze("check",jI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],g_=ze("chevron-down",ZI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ii=ze("chevron-right",ex);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],nx=ze("circle-alert",tx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sx=ze("circle-check",ix);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],RS=ze("circle-user",ox);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ax=ze("clock",rx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],ux=ze("cloud-download",lx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Om=ze("copy",cx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],fx=ze("external-link",dx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],NS=ze("file-text",hx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],mx=ze("grip-vertical",px);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],yx=ze("heart-pulse",gx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],y_=ze("history",vx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],MS=ze("key",_x);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],pu=ze("loader-circle",Tx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Sx=ze("lock",Ex);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Cx=ze("log-out",Ax);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],wx=ze("maximize-2",bx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],xx=ze("message-square-text",Ix);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Nx=ze("minimize-2",Rx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],Dx=ze("octagon-alert",Mx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],DS=ze("plus",Px);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Vx=ze("redo-2",kx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Lx=ze("save",Ux);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Pp=ze("search",Ox);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Bx=ze("shield-check",Hx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],_d=ze("sparkles",Fx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],PS=ze("triangle-alert",Gx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],zx=ze("type",qx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],$x=ze("undo-2",Kx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jx=ze("user",Yx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Xx=ze("wand-sparkles",Qx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],jx=ze("wind",Wx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Au=ze("x",Zx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],tR=ze("zap",eR),nR=({onItemClick:n,customItems:e={},onAddCustomItem:t})=>{const[i,r]=re.useState(""),[l,u]=re.useState(""),[f,g]=re.useState(""),[h,_]=re.useState(null),[T,S]=re.useState(null),[w,V]=re.useState(null),[k,P]=re.useState(null),[$,B]=re.useState(null),[Z,le]=re.useState(null),[de,pe]=re.useState(null),N=re.useRef(null),M=re.useRef(null),R=re.useRef(null),H=re.useRef(null),O=re.useRef(null),[q,D]=re.useState([]),[He,gt]=re.useState(!1),[W,ue]=re.useState(""),[_e,Ke]=re.useState([]),[Ze,F]=re.useState(""),[X,ce]=re.useState({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),[me,Ie]=re.useState(null),[xe,Ge]=re.useState([]),[ct,rt]=re.useState(!1),[Ln,fi]=re.useState(null),[hi,pi]=re.useState(""),[yn,Mi]=re.useState(""),[Rn,Wn]=re.useState(!1),[Di,dt]=re.useState(null),[ft,vn]=re.useState(null),[Wi,On]=re.useState(null),[Ot,jn]=re.useState(""),[ji,Pi]=re.useState("Select Category"),[Nn,no]=re.useState(""),[bs,ki]=re.useState(!1),[nr,nn]=re.useState(""),Rt=re.useRef(null);re.useRef(null);const _n=U=>{nn(U),ki(!0),setTimeout(()=>ki(!1),2e3)},St=["Vital Sign","Symptom","Disease","Medical Facility","Physical examination","Lab data","Culture / Gram stain","Image finding","Treatment"],Zi=["Penicillins ()","Cephalosporins ()","Carbapenems ()","Fluoroquinolones ()","Aminoglycosides ()","Tetracyclines ()","Macrolides ()","Glycopeptides & Lipopeptides ()","Other ()"],Hn={"Penicillins ()":["Penicillin G Benzathine","Penicillin G Sodium","Oxacillin (IV)","Dicloxacillin (PO)","Ampicillin","Amoxicillin","Ampicillin + Sulbactam (Unasyn)","Amoxicillin + Clavulanate (Augmentin)","Amoxicillin + Clavulanate (Curam)","Piperacillin + Tazobactam (Tazocin)","Ticarcillin + Clavulanate (Timentin)"],"Cephalosporins ()":[{type:"header",label:"--  --"},"Cefazolin (IV)","Cephalexin (PO)",{type:"header",label:"--  --"},"Cefuroxime (Zinacef - IV)","Cefuroxime (Ceflour - PO)",{type:"header",label:"--  (Cephamycins) --"},"Cefmetazole","Cefoxitin",{type:"header",label:"-- 2.5 --"},"Flomoxef (Flumarin)",{type:"header",label:"--  --"},"Ceftriaxone (Rocephin)","Cefotaxime (Claforan/Loforan)","Cefixime (PO)","Ceftazidime (Fortum)",{type:"header",label:"-- 3.5 --"},"Cefoperazone + Sulbactam (Brosym)",{type:"header",label:"--  --"},"Cefepime (Maxipime)",{type:"header",label:"--  --"},"Ceftobiprole (Zeftera)","Ceftaroline (Zinforo)",{type:"header",label:"--  --"},"Cefiderocol","Ceftazidime + Avibactam (Zavicefta)"],"Carbapenems ()":["Ertapenem (Invanz)","Imipenem (Tienam)","Meropenem (Mepem)","Doripenem (Finibax)"],"Fluoroquinolones ()":["Ciprofloxacin (Ciproxin)","Levofloxacin (Cravit)","Moxifloxacin (Avelox)","Gemifloxacin (Factive)","Nemonoxacin"],"Aminoglycosides ()":["Gentamicin","Amikacin","Streptomycin"],"Tetracyclines ()":["Tetracycline","Doxycycline","Minocycline","Tigecycline (Tygacil)","Eravacycline"],"Macrolides ()":["Erythromycin","Clarithromycin (Klaricid)","Azithromycin (Zithromax)"],"Glycopeptides & Lipopeptides ()":["Vancomycin","Teicoplanin (Targocid)","Daptomycin (Cubicicin)"],"Other ()":["Linezolid (Zyvox)","Metronidazole (Flagyl)","TMP-SMX (Baktar)","TMP-SMX (Sevatrim)","Colistin (Colimycin)","Clindamycin (Clincin)","Rifampin","Fosfomycin","Fusidic acid (Fucidin)","Monobactam (Aztreonam)"]},es=(U,fe)=>{const Ee=e[fe]||[];if(Ee.length===0)return U;const Me=new Set(U);return[...U,...Ee.filter(we=>!Me.has(we))].sort((we,nt)=>we.localeCompare(nt))};re.useMemo(()=>{const U={...Hn};return Object.keys(Hn).forEach(fe=>{const Ee=e[fe]||[];if(Ee.length>0){const Me=new Set(U[fe].map(nt=>typeof nt=="string"?nt:nt.label)),we=Ee.filter(nt=>!Me.has(nt));U[fe]=[...U[fe],...we]}}),U},[Hn,e]);const Mn=["Acinetobacter baumannii","Acinetobacter spp.","Actinomyces","Aeromonas hydrophila","Aggregatibacter actinomycetemcomitans","Alcaligenes","Aspergillus fumigatus","Bacillus anthracis","Bacillus cereus","Bacillus spp.","Bacteroides fragilis","Bartonella henselae","Bordetella pertussis","Borrelia burgdorferi","Borrelia recurrentis","Brucella melitensis","Burkholderia cepacia complex","Burkholderia pseudomallei","Campylobacter coli","Campylobacter jejuni","Candida albicans","Candida spp.","Capnocytophaga canimorsus","Cardiobacterium hominis","Chlamydia pneumoniae","Chlamydia trachomatis","Chlamydophila psittaci","Citrobacter","Clostridium botulinum","Clostridium difficile (also known as Clostridioides difficile)","Clostridium perfringens","Clostridium septicum","Clostridium sordellii","Clostridium tetani","Corynebacterium diphtheriae","Corynebacterium spp.","Coxiella burnetii","Cryptococcus","Eikenella corrodens","Enterobacter cloacae","Enterobacter spp.","Enterococcus faecalis","Enterococcus faecium","Enterococcus spp.","Erysipelothrix rhusiopathiae","Escherichia coli (E. coli)","Francisella tularensis","Fusobacterium","Gardnerella vaginalis","Haemophilus ducreyi","Haemophilus influenzae","Helicobacter pylori","Kingella kingae","Klebsiella pneumoniae","Klebsiella spp.","Lactobacillus","Legionella pneumophila","Leptospira interrogans","Listeria monocytogenes","Micrococci species","Moraxella catarrhalis","Morganella","Mycobacterium abscessus","Mycobacterium africanum","Mycobacterium avium complex (MAC)","Mycobacterium bovis","Mycobacterium canettii","Mycobacterium caprae","Mycobacterium chelonae","Mycobacterium fortuitum","Mycobacterium gordonae","Mycobacterium haemophilum","Mycobacterium kansasii","Mycobacterium leprae","Mycobacterium lepromatosis","Mycobacterium malmoense","Mycobacterium marinum","Mycobacterium microti","Mycobacterium orygis","Mycobacterium scrofulaceum","Mycobacterium tuberculosis","Mycobacterium ulcerans","Mycobacterium xenopi","Mycoplasma genitalium","Mycoplasma pneumoniae","Neisseria gonorrhoeae","Neisseria meningitidis","Nocardia","Orientia tsutsugamushi","Pasteurella multocida","Peptostreptococcus","Pneumocystis jirovecii","Prevotella","Proteus mirabilis","Proteus spp.","Providencia","Providencia stuartii","Pseudomonas aeruginosa","Rickettsia prowazekii","Rickettsia rickettsii","Rickettsia typhi","Salmonella enteritidis","Salmonella paratyphi","Salmonella typhi","Salmonella typhimurium","Schistosoma spp.","Serratia marcescens","Shigella dysenteriae","Staphylococcus aureus","Staphylococcus epidermidis","Staphylococcus saprophyticus","Stenotrophomonas maltophilia","Streptococcus agalactiae (Group B Streptococcus)","Streptococcus bovis","Streptococcus dysgalactiae","Streptococcus mutans","Streptococcus pneumoniae","Streptococcus pyogenes (Group A Streptococcus)","Streptococcus viridans","Treponema pallidum","Trichomonas vaginalis","Ureaplasma urealyticum","Vibrio cholerae","Vibrio parahaemolyticus","Vibrio vulnificus","Yersinia enterocolitica","Yersinia pestis"],Vi=re.useMemo(()=>es(Mn,"Culture"),[Mn,e]),oe=["No organisms seen","GPC: Gram-positive cocci in clusters","GPC: Gram-positive cocci in chains","GPC: Gram-positive cocci in pairs","GNB: Gram-negative bacilli","Yeast-like","GPB (Gram-positive bacilli / rods)","GNC (Gram-negative cocci)","GVC (Gram-variable cocci/bacilli)"],Ae=re.useMemo(()=>es(oe,"Gram stain"),[oe,e]),Ce=["Crackles (Rales) - Coarse","Crackles (Rales) - Fine","Stridor","Wheezes","Rhonchi","Pleural Friction Rub"],ke=re.useMemo(()=>es(Ce,"Breathing sound"),[Ce,e]),At=[{id:"RUL",label:"RUL",col:"Right",row:"Upper"},{id:"LUL",label:"LUL",col:"Left",row:"Upper"},{id:"RML",label:"RML",col:"Right",row:"Middle"},{id:"LML",label:"LML",col:"Left",row:"Middle"},{id:"RLL",label:"RLL",col:"Right",row:"Lower"},{id:"LLL",label:"LLL",col:"Left",row:"Lower"}],Dn=["LUQ","RUQ","LLQ","RLQ"],Dt=["Right Hypochondriac Region","Epigastric Region","Left Hypochondriac Region","Right Lumbar / Flank Region","Umbilical Region","Left Lumbar / Flank Region","Right Iliac / Inguinal Fossa","Hypogastric / Suprapubic Region","Left Iliac / Inguinal Fossa"],[Tn,Zn]=re.useState([]),Bn=re.useCallback(()=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{_(null),B(null),Pt()},150)},[]),Ui=re.useCallback(()=>{R.current&&(clearTimeout(R.current),R.current=null)},[]);re.useEffect(()=>{h&&H.current&&H.current.focus()},[h]),re.useEffect(()=>{($||me)&&O.current&&O.current.focus()},[$,me]),re.useLayoutEffect(()=>{if(w&&N.current){const U=N.current.getBoundingClientRect(),fe=16;let{top:Ee,left:Me}=w;Ee+U.height>window.innerHeight-fe&&(Ee=Math.max(fe,window.innerHeight-U.height-fe)),Me+U.width>window.innerWidth-fe&&(Me=Math.max(fe,window.innerWidth-U.width-fe)),P({top:Ee,left:Me,width:U.width,maxHeight:window.innerHeight-Ee-fe})}},[w,h]),re.useLayoutEffect(()=>{if(Z&&M.current){const U=M.current.getBoundingClientRect(),fe=16;let{top:Ee,left:Me}=Z;Ee+U.height>window.innerHeight-fe&&(Ee=Math.max(fe,window.innerHeight-U.height-fe)),k&&Me+U.width>window.innerWidth-fe&&(Me=Math.max(fe,k.left-U.width-4)),pe({top:Ee,left:Me,width:U.width,maxHeight:window.innerHeight-Ee-fe})}},[Z,k,$,me]);const Pt=()=>{Ge([]),rt(!1),Ie(null),fi(null),pi(""),Mi(""),u(""),g(""),D([]),gt(!1),ue(""),Ke([]),F("")},ws=(U,fe,Ee)=>{Ui();const Me=U.currentTarget.getBoundingClientRect();_(fe),S(Ee),u(""),V({top:Me.top,left:Me.right+4,right:Me.right}),h!==fe&&(B(null),Pt())},Fn=(U,fe)=>{Ui();const Ee=U.currentTarget.getBoundingClientRect();B(fe),g(""),le({top:Ee.top,left:Ee.right+4,right:Ee.right})},Br=U=>{gt(!1),D(fe=>fe.includes(U)?fe.filter(Ee=>Ee!==U):[...fe,U])},ei=()=>{const U=He?"Bilateral":q.join(", ");U?n("Physical examination",`${$} at ${U}`):n("Physical examination",$),_(null),Pt()},ti=()=>{const U=W?`Grade ${W}/6`:"",fe=_e.length>0?_e.join(", "):"",Ee=Ze?`at ${Ze}`:"",we=`Murmur: ${[U,fe,Ee].filter(Boolean).join(" ")}`;n("Physical examination",we),_(null),Pt()},kt=()=>{const U=[];X.T&&U.push(`T: ${X.T} C`),X.P&&U.push(`P: ${X.P} bpm`),X.R&&U.push(`R: ${X.R} /min`),X.BP&&U.push(`BP: ${X.BP} mmHg`),X.SpO2&&U.push(`SpO2: ${X.SpO2} %`),X.GCS&&U.push(`GCS: ${X.GCS}`),U.length>0&&(n("Vital Sign",U.join(", ")),ce({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),_(null),Pt())},Ht=(U,fe)=>{Ui();const Ee=U.currentTarget.getBoundingClientRect();fe==="zones"?(le({top:Ee.top,left:Ee.right+4,right:Ee.right}),Ie("zones"),g("")):(le({top:Ee.top,left:Ee.right+4,right:Ee.right}),fi("details"),g(""))},ni=U=>{Ge(fe=>fe.includes(U)?fe.filter(Ee=>Ee!==U):[...fe,U]),rt(!1)},Vt=(U,fe)=>{if(!fe)return U;const Ee=fe.toLowerCase();return U.filter(Me=>(typeof Me=="string"?Me:Me.label).toLowerCase().includes(Ee))};return C.jsxs("div",{className:"flex flex-col h-full bg-slate-50 border-r border-slate-200 overflow-visible relative",children:[C.jsxs("div",{className:"p-4 bg-white border-b border-slate-200 shadow-sm z-10 flex flex-col gap-3",children:[C.jsxs("div",{children:[C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:"Menu Source"}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Search categories...",className:"w-full pl-9 pr-3 py-2 text-sm border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",value:i,onChange:U=>r(U.target.value)}),C.jsx(Pp,{className:"absolute left-3 top-2.5 text-slate-400 w-4 h-4"})]})]}),C.jsxs("div",{className:"border-t border-slate-100 pt-3",children:[C.jsxs("button",{onClick:()=>Wn(!Rn),className:"flex items-center text-xs font-bold text-blue-600 hover:text-blue-800 transition-colors uppercase tracking-tight",children:[Rn?C.jsx(g_,{className:"w-3 h-3 mr-1"}):C.jsx(Ii,{className:"w-3 h-3 mr-1"}),"Add Custom Item"]}),Rn&&C.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2 duration-200",children:[C.jsxs("button",{ref:Rt,onClick:()=>{if(Rt.current){const U=Rt.current.getBoundingClientRect();dt(fe=>fe?null:{top:U.bottom+4,left:U.left})}},className:"w-full px-3 py-2 text-xs text-left font-semibold bg-slate-50 border border-slate-200 rounded-md hover:bg-slate-100 text-slate-700 flex justify-between items-center",children:[C.jsx("span",{className:"truncate",children:ji}),C.jsx(Ii,{className:"w-3 h-3 text-slate-400"})]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{type:"text",placeholder:"Item Name",className:"flex-1 px-3 py-2 text-xs border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",value:Nn,onChange:U=>no(U.target.value)}),C.jsx("button",{disabled:!Ot||!Nn.trim(),onClick:()=>{t&&Ot&&Nn.trim()&&(t(Ot,Nn.trim()),no(""),_n(`Added to ${ji}`))},className:"px-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C.jsx(Lx,{className:"w-4 h-4"})})]})]})]})]}),C.jsx("div",{className:"flex-1 overflow-y-auto p-2 scrollbar-thin",children:lu.map(U=>{if(!St.includes(U.category))return null;const fe=U.items.filter(we=>we.toLowerCase().includes(i.toLowerCase()));if(i&&fe.length===0)return null;const Ee=Tn.includes(U.category),Me=U.category==="Vital Sign"?"text-green-600 hover:bg-green-50":U.category==="Medical Facility"?"text-blue-600 hover:bg-blue-50":U.category==="Culture / Gram stain"?"text-cyan-600 hover:bg-cyan-50":U.category==="Lab data"?"text-orange-600 hover:bg-orange-50":"text-slate-600 hover:bg-slate-100";return C.jsxs("div",{className:"mb-2",children:[C.jsxs("button",{onClick:()=>Zn(we=>we.includes(U.category)?we.filter(nt=>nt!==U.category):[...we,U.category]),className:`w-full flex items-center px-2 py-2 text-sm font-semibold rounded-md transition-colors ${Me}`,children:[Ee?C.jsx(g_,{className:"w-4 h-4 mr-1"}):C.jsx(Ii,{className:"w-4 h-4 mr-1"}),U.category]}),Ee&&C.jsx("div",{className:"pl-4 mt-1 space-y-1",children:fe.map(we=>{const nt=U.category==="Vital Sign"||U.category==="Symptom"||U.category==="Disease"||U.category==="Medical Facility"||U.category==="Physical examination"||U.category==="Culture / Gram stain"||U.category==="Treatment"&&we==="Antibiotics";return C.jsxs("div",{onMouseEnter:En=>nt&&ws(En,we,U.category),onMouseLeave:Bn,onClick:()=>!nt&&n(U.category,we),className:`group relative flex items-center justify-between px-3 py-2 text-sm text-slate-700 bg-white border rounded-md transition-all active:scale-95 cursor-pointer ${h===we?"border-blue-400 bg-blue-50/30 shadow-sm":"border-slate-200 hover:border-blue-400 hover:shadow-sm"}`,children:[C.jsx("span",{className:"truncate",children:we}),nt?C.jsx(Ii,{className:`w-3 h-3 ${h===we?"opacity-100":"text-slate-300 opacity-60 group-hover:opacity-100"}`}):C.jsx(mx,{className:"w-3 h-3 text-slate-300 opacity-0 group-hover:opacity-100"})]},we)})})]},U.category)})}),h&&w&&Ma.createPortal(C.jsxs("div",{ref:N,onMouseEnter:Ui,onMouseLeave:Bn,className:"fixed z-[9999] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-1 duration-150 min-w-[220px] max-w-[340px] overflow-hidden flex flex-col",style:{top:(k==null?void 0:k.top)??w.top,left:(k==null?void 0:k.left)??w.left,maxHeight:(k==null?void 0:k.maxHeight)??"80vh"},children:[T!=="Vital Sign"&&T!=="Medical Facility"&&C.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{ref:H,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:l,onChange:U=>u(U.target.value)}),C.jsx(Pp,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),C.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[T==="Medical Facility"&&["Emergency Department","Outpatient Department"].map(U=>C.jsx("button",{onClick:()=>{const fe=h.replace(/\s*\(.*?\)/,"");n("Medical Facility",`the ${U} of ${fe}`),_(null),Pt()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-blue-50 text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:U},U)),T==="Culture / Gram stain"&&Vt(["Culture","Gram stain"],l).map(U=>C.jsxs("div",{onMouseEnter:fe=>Fn(fe,U),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${$===U?"bg-cyan-50 text-cyan-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[U,C.jsx(Ii,{className:"w-3 h-3"})]},U)),T==="Vital Sign"&&h==="Vital sign"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(IS,{className:"w-4 h-4"}),C.jsx("span",{children:"Vital Sign Entry"})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"T (C)"}),C.jsx("input",{type:"text",placeholder:"37.0",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:X.T,onChange:U=>ce({...X,T:U.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"P (bpm)"}),C.jsx("input",{type:"text",placeholder:"80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:X.P,onChange:U=>ce({...X,P:U.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"R (/min)"}),C.jsx("input",{type:"text",placeholder:"18",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:X.R,onChange:U=>ce({...X,R:U.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"SpO2 (%)"}),C.jsx("input",{type:"text",placeholder:"98",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:X.SpO2,onChange:U=>ce({...X,SpO2:U.target.value})})]})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"BP (mmHg)"}),C.jsx("input",{type:"text",placeholder:"120/80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:X.BP,onChange:U=>ce({...X,BP:U.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"GCS"}),C.jsx("input",{type:"text",placeholder:"E4V5M6",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:X.GCS,onChange:U=>ce({...X,GCS:U.target.value})})]}),C.jsx("button",{onClick:kt,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 active:scale-95 transition-all",children:"Insert Vital Signs"})]}),T==="Symptom"&&Vt(["Positive","Negative"],l).map(U=>C.jsx("button",{onClick:()=>{n(U==="Positive"?"Symptom":"Negative Symptom",h),_(null),Pt()},className:`w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 ${U==="Positive"?"hover:bg-blue-50 text-blue-700":"hover:bg-red-50 text-red-700"}`,children:U},U)),T==="Disease"&&Vt(["Tentative Diagnosis","Underlying Disease","Definitive Disease"],l).map(U=>C.jsx("button",{onClick:()=>{n(U==="Underlying Disease"?"Underlying disease":U==="Definitive Disease"?"Definitive diagnosis":U,h),_(null),Pt()},className:"w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 hover:bg-indigo-50 text-indigo-700",children:U},U)),T==="Physical examination"&&h==="Breathing sound"&&Vt(ke,l).map(U=>C.jsxs("div",{onMouseEnter:fe=>Fn(fe,U),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${$===U?"bg-blue-50 text-blue-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[U,C.jsx(Ii,{className:"w-3 h-3"})]},U)),T==="Physical examination"&&h==="Heart sound"&&Vt(["Heart Beats","Murmur"],l).map(U=>C.jsxs("div",{onMouseEnter:fe=>Fn(fe,U),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${$===U?"bg-indigo-50 text-indigo-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[U,C.jsx(Ii,{className:"w-3 h-3"})]},U)),T==="Treatment"&&h==="Antibiotics"&&Vt(Zi,l).map(U=>C.jsxs("div",{onMouseEnter:fe=>Fn(fe,U),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${$===U?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:[U,C.jsx(Ii,{className:"w-3 h-3"})]},U)),T==="Physical examination"&&(h==="Abdominal tenderness"||h==="Rebound tenderness"||h==="Muscle guarding"||h==="Knocking pain")&&Vt(["Yes","No"],l).map(U=>C.jsxs("button",{onMouseEnter:fe=>U==="Yes"?Ht(fe,"zones"):void 0,onClick:()=>U==="No"&&(n("Physical examination",`No ${h}`),_(null),Pt()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${U==="Yes"&&me?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[U," ",U==="Yes"&&C.jsx(Ii,{className:"w-4 h-4"})]},U)),T==="Physical examination"&&h==="Pitting edema"&&Vt(["Yes","No"],l).map(U=>C.jsxs("button",{onMouseEnter:fe=>U==="Yes"?Ht(fe,"details"):void 0,onClick:()=>U==="No"&&(n("Physical examination","No pitting edema"),_(null),Pt()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${U==="Yes"&&Ln?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[U," ",U==="Yes"&&C.jsx(Ii,{className:"w-4 h-4"})]},U))]})]}),document.body),($||me||Ln)&&Z&&Ma.createPortal(C.jsxs("div",{ref:M,onMouseEnter:Ui,onMouseLeave:Bn,className:"fixed z-[10000] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-2 duration-200 min-w-[260px] max-w-[420px] overflow-hidden flex flex-col",style:{top:(de==null?void 0:de.top)??Z.top,left:(de==null?void 0:de.left)??Z.left,maxHeight:(de==null?void 0:de.maxHeight)??"80vh"},children:[C.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{ref:O,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:f,onChange:U=>g(U.target.value)}),C.jsx(Pp,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),C.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[T==="Culture / Gram stain"&&$==="Culture"&&Vt(Vi,f).map(U=>C.jsx("button",{onClick:()=>{n("Lab data",`${h} Culture: ${U}`),_(null),Pt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:U},U)),T==="Culture / Gram stain"&&$==="Gram stain"&&Vt(Ae,f).map(U=>C.jsx("button",{onClick:()=>{n("Lab data",`${h} Gram stain: ${U}`),_(null),Pt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:U},U)),T==="Physical examination"&&h==="Breathing sound"&&C.jsxs("div",{className:"p-4 w-64 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(jx,{className:"w-4 h-4"}),C.jsx("span",{children:"Zone Selector"})]}),C.jsx("button",{onClick:()=>{gt(!He),D([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${He?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Bilateral"}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Right"}),C.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Left"}),At.map(U=>C.jsx("button",{onClick:()=>Br(U.id),className:`py-3 text-xs font-bold border-2 rounded-lg transition-all ${q.includes(U.id)?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white border-slate-100 text-slate-600 hover:border-blue-200"}`,children:U.label},U.id))]}),C.jsx("button",{onClick:ei,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Findings"})]}),T==="Physical examination"&&$==="Heart Beats"&&Vt(["regular","irregular"],f).map(U=>C.jsx("button",{onClick:()=>{n("Physical examination",`Heart Beats: ${U}`),_(null),Pt()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-indigo-50 hover:text-indigo-700 transition-colors border-b border-slate-50 last:border-0",children:U},U)),T==="Physical examination"&&$==="Murmur"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-indigo-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(yx,{className:"w-4 h-4"}),C.jsx("span",{children:"Murmur Detail"})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Intensity (Grade 1-6)"}),C.jsx("div",{className:"grid grid-cols-6 gap-1",children:[1,2,3,4,5,6].map(U=>C.jsx("button",{onClick:()=>ue(U.toString()),className:`py-1.5 text-xs font-bold border-2 rounded-md transition-all ${W===U.toString()?"bg-indigo-600 border-indigo-600 text-white":"bg-white text-slate-600 hover:bg-indigo-50 border-slate-100"}`,children:U},U))})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Timing"}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Early"}),C.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Late"}),["Systolic","Diastolic"].map(U=>C.jsx(CS.Fragment,{children:["Early","Late"].map(fe=>{const Ee=`${fe} ${U}`,Me=_e.includes(Ee);return C.jsx("button",{onClick:()=>Ke(we=>Me?we.filter(nt=>nt!==Ee):[...we,Ee]),className:`py-2 text-[10px] font-bold border-2 rounded-lg transition-all ${Me?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-slate-100 text-slate-500 hover:border-indigo-100"}`,children:Ee},Ee)})},U))]})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),C.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-32 overflow-y-auto p-1 border border-slate-100 rounded-lg bg-slate-50/50",children:["Aortic Area","Pulmonic Area","Tricuspid Area","Mitral Area, Apex"].map(U=>C.jsx("button",{onClick:()=>F(U),className:`px-3 py-1.5 text-left text-[11px] font-semibold rounded-md transition-colors ${Ze===U?"bg-indigo-100 text-indigo-700":"text-slate-600 hover:bg-white"}`,children:U},U))})]}),C.jsx("button",{onClick:ti,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Murmur"})]}),T==="Treatment"&&$&&Hn[$]&&Vt(Hn[$],f).map((U,fe)=>{if(typeof U!="string"&&U.type==="header")return C.jsx("div",{className:"px-4 py-1.5 bg-slate-100 text-[11px] font-bold text-slate-400 uppercase tracking-tight",children:U.label},`h-${fe}`);const Ee=typeof U=="string"?U:U.label;return C.jsx("button",{onClick:()=>{n("Treatment",Ee),_(null),Pt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-blue-50 hover:text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:Ee},Ee)}),me==="zones"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsx("button",{onClick:()=>{rt(!ct),Ge([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${ct?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Diffuse"}),C.jsxs("section",{children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Quadrants"}),C.jsx("div",{className:"grid grid-cols-2 gap-2",children:Vt(Dn,f).map(U=>C.jsx("button",{onClick:()=>ni(U),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${xe.includes(U)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:U},U))})]}),C.jsxs("section",{className:"pt-2 border-t border-slate-100",children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Regions"}),C.jsx("div",{className:"grid grid-cols-3 gap-1",children:Vt(Dt,f).map(U=>C.jsx("button",{onClick:()=>ni(U),className:`p-1 text-[8px] leading-tight font-bold border-2 rounded-md h-12 flex items-center justify-center text-center ${xe.includes(U)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:U.replace(" Region","").replace(" / ",`
`)},U))})]}),C.jsx("button",{onClick:()=>{const U=ct?`${h}: diffuse`:xe.length>0?`${h} at ${xe.join(", ")}`:"";U&&(n("Physical examination",U),_(null),Pt())},disabled:!ct&&xe.length===0,className:`w-full py-3 rounded-xl text-sm font-bold shadow-lg transition-all ${!ct&&xe.length===0?"bg-slate-200 text-slate-400":"bg-green-600 text-white hover:bg-green-700"}`,children:"Insert Findings"})]}),Ln==="details"&&C.jsxs("div",{className:"p-5 w-60 space-y-5",children:[C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3",children:"Grade"}),C.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Vt(["1+","2+","3+","4+"],f).map(U=>C.jsx("button",{onClick:()=>pi(U),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${hi===U?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white text-slate-600 hover:bg-blue-50"}`,children:U},U))})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),C.jsx("input",{type:"text",placeholder:"e.g. Bilateral lower limbs",className:"w-full p-2.5 text-xs border-2 border-slate-100 rounded-lg outline-none focus:border-blue-400",value:yn,onChange:U=>Mi(U.target.value)})]}),C.jsx("button",{onClick:()=>{const U=hi?`Grade ${hi}`:"",fe=yn?`at ${yn}`:"";n("Physical examination",`Pitting edema: ${[U,fe].filter(Boolean).join(" ")}`),_(null),Pt()},className:"w-full py-3 bg-green-600 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-green-700 transition-all",children:"Insert"})]})]})]}),document.body),Rn&&Di&&Ma.createPortal(C.jsxs("div",{className:"fixed z-[10000] bg-white border border-slate-200 rounded-lg shadow-xl animate-in fade-in zoom-in-95 duration-100 min-w-[200px] overflow-hidden flex flex-col pointer-events-auto",style:{top:Di.top,left:Di.left,maxHeight:"60vh"},onMouseLeave:()=>{Wi||(dt(null),vn(null))},children:[C.jsx("div",{className:"p-2 bg-slate-50 border-b text-[10px] font-bold text-slate-400 uppercase text-center",children:"Select Category"}),C.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:St.map(U=>{var Me;let fe=!1;const Ee=((Me=lu.find(we=>we.category===U))==null?void 0:Me.items)||[];return U==="Culture / Gram stain"||U==="Treatment"||U==="Physical examination"?fe=!0:Ee.length>0&&U!=="Vital Sign"&&U!=="Symptom"&&U!=="Negative Symptom"&&(fe=!1),C.jsxs("div",{onMouseEnter:we=>{if(vn(U),fe){const nt=we.currentTarget.getBoundingClientRect();On({top:nt.top,left:nt.right+2})}else On(null)},onClick:()=>{jn(U),Pi(U),dt(null)},className:`px-4 py-2 text-xs font-semibold cursor-pointer flex justify-between items-center transition-colors ${ft===U?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:[U,fe&&C.jsx(Ii,{className:"w-3 h-3 text-slate-400"})]},U)})})]}),document.body),Rn&&Wi&&ft&&Ma.createPortal(C.jsxs("div",{className:"fixed z-[10001] bg-white border border-slate-200 rounded-lg shadow-xl animate-in fade-in zoom-in-95 duration-100 min-w-[200px] flex flex-col pointer-events-auto",style:{top:Wi.top,left:Wi.left,maxHeight:"60vh"},onMouseLeave:()=>{On(null),vn(null),dt(null)},children:[C.jsxs("div",{className:"p-2 bg-slate-50 border-b text-[10px] font-bold text-slate-400 uppercase text-center",children:[ft," Sub-type"]}),C.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:(()=>{var fe,Ee;let U=[];return ft==="Culture / Gram stain"?U=[{label:"Culture",hasSub:!1,targetKey:"Culture"},{label:"Gram stain",hasSub:!1,targetKey:"Gram stain"}]:ft==="Treatment"?U=(((fe=lu.find(we=>we.category==="Treatment"))==null?void 0:fe.items)||[]).map(we=>({label:we,hasSub:we==="Antibiotics",targetKey:we})):ft==="Physical examination"&&(U=(((Ee=lu.find(we=>we.category==="Physical examination"))==null?void 0:Ee.items)||[]).map(we=>({label:we,hasSub:!1,targetKey:we}))),U.map(Me=>{const we=typeof Me=="string"?Me:Me.label,nt=typeof Me=="string"?!1:Me.hasSub,En=typeof Me=="string"?Me:Me.targetKey||we;return C.jsxs("div",{className:"px-4 py-2 text-xs font-semibold cursor-pointer flex justify-between items-center transition-colors hover:bg-blue-50 hover:text-blue-700 group",onClick:()=>{jn(En),Pi(`${ft} > ${we}`),dt(null),On(null)},children:[we,nt&&C.jsx(Ii,{className:"w-3 h-3 text-slate-400 group-hover:text-blue-500"}),nt&&we==="Antibiotics"&&C.jsx("div",{className:"hidden group-hover:block absolute left-full top-0 w-64 bg-white border border-slate-200 rounded-lg shadow-xl ml-1 max-h-[60vh] overflow-y-auto",children:Zi.map(sn=>C.jsx("button",{onClick:mi=>{mi.stopPropagation(),jn(sn),Pi(sn),dt(null),On(null)},className:"w-full text-left px-4 py-2 text-xs font-semibold text-slate-600 hover:bg-blue-50 hover:text-blue-700 border-b border-slate-50 last:border-0",children:sn},sn))})]},we)})})()})]}),document.body)]})},iR=({events:n,activeEventId:e,onSelectEvent:t,onAddEvent:i,onDeleteEvent:r,onCopyFromEvent:l})=>{const u=re.useRef(null),[f,g]=re.useState(null),[h,_]=re.useState(null),T=(w,V)=>{w.stopPropagation();const k=w.currentTarget.getBoundingClientRect();_({top:k.top,left:k.right+10}),g(V)},S=w=>{f&&(l(f,w),g(null))};return re.useEffect(()=>{const w=()=>g(null);return f&&window.addEventListener("click",w),()=>window.removeEventListener("click",w)},[f]),C.jsxs("div",{className:"flex flex-col h-full bg-slate-100 border-r border-slate-200 relative",children:[C.jsx("div",{className:"p-4 bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm flex-shrink-0",children:C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Timeline"})}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-6 relative",children:[C.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-slate-300 -translate-x-1/2 min-h-full"}),C.jsxs("div",{className:"space-y-8 pb-10",children:[C.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t("profile"),children:[C.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${e==="profile"?"bg-white border-blue-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-blue-400"}`}),C.jsxs("div",{className:`relative w-40 p-4 rounded-lg border text-center transition-all ${e==="profile"?"bg-blue-50 border-blue-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-blue-300"}`,children:[C.jsx(RS,{className:`w-8 h-8 mx-auto mb-1 ${e==="profile"?"text-blue-600":"text-slate-400"}`}),C.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Patient Profile"})]})]}),n.map((w,V)=>{const k=w.id===e;return C.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t(w.id),children:[C.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${k?"bg-white border-green-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-green-400"}`}),C.jsxs("div",{className:`relative w-40 p-3 rounded-lg border text-center transition-all ${k?"bg-green-50 border-green-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-green-300"}`,children:[C.jsx("button",{className:"absolute -top-3 -right-3 w-8 h-8 bg-red-100 hover:bg-red-600 text-red-600 hover:text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all shadow-lg border border-red-200 hover:border-red-700 z-50 pointer-events-auto",onClick:P=>{P.stopPropagation(),P.preventDefault(),r(w.id)},type:"button",title:"Delete Timepoint",children:C.jsx(Au,{className:"w-5 h-5 pointer-events-none"})}),C.jsxs("div",{className:"text-xs font-bold text-slate-500 mb-1",children:["Timepoint ",V+1]}),C.jsxs("div",{className:"flex items-center justify-center text-sm font-semibold text-slate-800",children:[C.jsx(WI,{className:"w-3 h-3 mr-1 opacity-50"}),w.date||"Set Date"]}),C.jsx("button",{className:`absolute -bottom-3 -right-3 w-8 h-8 rounded-full flex items-center justify-center transition-all shadow-lg border z-50 pointer-events-auto ${f===w.id?"bg-blue-600 text-white border-blue-700":"bg-blue-100 hover:bg-blue-600 text-blue-600 hover:text-white border-blue-200 hover:border-blue-700 opacity-0 group-hover:opacity-100"}`,onClick:P=>T(P,w.id),type:"button",title:"Copy content from another timepoint",children:C.jsx(Om,{className:"w-4 h-4 pointer-events-none"})})]})]},w.id)}),C.jsx("div",{ref:u})]})]}),C.jsx("div",{className:"p-4 bg-white border-t border-slate-200 flex-shrink-0",children:C.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all active:scale-95 font-medium",children:[C.jsx(DS,{className:"w-5 h-5 mr-2"}),"Add Timepoint"]})}),f&&h&&Ma.createPortal(C.jsxs("div",{className:"fixed z-[10001] bg-white border border-slate-200 rounded-lg shadow-2xl overflow-hidden min-w-[180px] animate-in zoom-in-95 duration-150",style:{top:h.top,left:h.left},onClick:w=>w.stopPropagation(),children:[C.jsx("div",{className:"bg-blue-600 text-white px-4 py-2 text-xs font-bold uppercase tracking-wider",children:""}),C.jsxs("div",{className:"max-h-60 overflow-y-auto bg-slate-50",children:[n.map((w,V)=>w.id===f?null:C.jsxs("button",{className:"w-full px-4 py-3 text-left text-sm font-semibold text-slate-700 border-b border-slate-200 hover:bg-blue-50 hover:text-blue-700 transition-colors last:border-0",onClick:()=>S(w.id),children:["Timepoint ",V+1]},w.id)),n.length<=1&&C.jsx("div",{className:"p-4 text-xs text-slate-400 italic text-center",children:"No other timepoints to copy from."})]})]}),document.body)]})},sR=({event:n,onUpdate:e,profile:t,onUpdateProfile:i,isProfileSelected:r,informant:l,setInformant:u,lastUpdateTrigger:f})=>{const g=re.useRef(null),h=re.useRef({}),[_,T]=re.useState("");re.useEffect(()=>{if(f&&!r){const B=h.current[f.category];B&&B.scrollIntoView({behavior:"smooth",block:"center"})}},[f,r]);const S=B=>{i({...t,gender:B}),u(B==="male"?"himself":"herself")},w=()=>{const B=_.trim();B&&!t.underlying_diseases.includes(B)&&i({...t,underlying_diseases:[...t.underlying_diseases,B]}),T("")},V=B=>{B.key==="Enter"&&(B.preventDefault(),w())},k=(B,Z)=>{const le=t[B];if(!le)i({...t,[B]:Z});else{const de=le.trim().endsWith(",")?`${le.trim()} ${Z}`:`${le.trim()}, ${Z}`;i({...t,[B]:de})}};if(r)return C.jsxs("div",{className:"flex flex-col h-full bg-white",children:[C.jsx("div",{className:"p-4 border-b border-slate-200 bg-blue-50 flex items-center justify-between flex-shrink-0",children:C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(Jx,{className:"w-5 h-5 text-blue-600"}),C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Patient Profile"})]})}),C.jsxs("div",{className:"p-6 flex-1 overflow-y-auto space-y-8 custom-scrollbar",children:[C.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Age (Numeric)"}),C.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:t.age,onChange:B=>i({...t,age:B.target.value}),placeholder:"65"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Sex"}),C.jsx("div",{className:"flex space-x-2",children:["male","female"].map(B=>C.jsx("button",{onClick:()=>S(B),className:`flex-1 py-2.5 px-4 rounded-lg font-bold text-sm transition-all border ${t.gender===B?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:B.charAt(0).toUpperCase()+B.slice(1)},B))})]})]}),C.jsx("div",{className:"grid grid-cols-1 gap-6 pt-4 border-t border-slate-100",children:C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Informant"}),C.jsx("input",{type:"text",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:l,onChange:B=>u(B.target.value),placeholder:"e.g. himself, wife, family, relatives..."})]})}),C.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[C.jsx("div",{className:"flex items-center justify-between",children:C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Underlying Diseases"})}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Type a disease and press Enter...",className:"w-full pl-3 pr-10 py-2.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-shadow",value:_,onChange:B=>T(B.target.value),onKeyDown:V}),C.jsx("button",{onClick:w,disabled:!_.trim(),className:"absolute right-1.5 top-1.5 p-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 transition-colors",children:C.jsx(DS,{className:"w-4 h-4"})})]}),C.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 rounded-xl min-h-[60px] border border-dashed border-slate-300",children:[t.underlying_diseases.length===0&&C.jsx("p",{className:"text-slate-400 text-xs italic flex items-center justify-center w-full",children:"No diseases selected"}),t.underlying_diseases.map(B=>C.jsxs("div",{className:"bg-blue-100 text-blue-700 px-3 py-1.5 rounded-full flex items-center text-sm font-semibold shadow-sm border border-blue-200",children:[B,C.jsx("button",{onClick:()=>i({...t,underlying_diseases:t.underlying_diseases.filter(Z=>Z!==B)}),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:C.jsx(Au,{className:"w-3 h-3"})})]},B))]})]}),C.jsxs("div",{className:"space-y-6 pt-6 border-t border-slate-100 pb-10",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-green-700",children:[C.jsx(IS,{className:"w-4 h-4"}),C.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",children:"Underlying Disease Control Status"})]}),C.jsxs("div",{className:"space-y-8",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"CONTROL QUALITY ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.control_quality,onChange:B=>i({...t,control_quality:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"General:"}),["Well controlled","Poorly controlled","Fair","Suboptimal","Stable","Unstable","Refractory"].map(B=>C.jsx("button",{onClick:()=>k("control_quality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Specific:"}),["Acute exacerbation","Stationary","Remission","Progressive","Terminal stage"].map(B=>C.jsx("button",{onClick:()=>k("control_quality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]})]})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"MANAGEMENT MODALITY ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.management_modality,onChange:B=>i({...t,management_modality:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"HTN/Heart:"}),["Oral anti-hypertensive agents","Medical control","Diet control","Lifestyle modification"].map(B=>C.jsx("button",{onClick:()=>k("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"DM:"}),["Oral anti-diabetic agents (OAD)","Insulin injection","Diet control and exercise"].map(B=>C.jsx("button",{onClick:()=>k("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"ESRD:"}),["Regular Hemodialysis (H/D)","H/D on Mon/Wed/Fri","H/D on Tue/Thu/Sat","Peritoneal Dialysis (PD/CAPD)","Conservative treatment"].map(B=>C.jsx("button",{onClick:()=>k("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Cancer:"}),["Chemotherapy","Target therapy","Immunotherapy","Regular surveillance post-operation","Palliative care"].map(B=>C.jsx("button",{onClick:()=>k("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]})]})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"FOLLOW-UP STATUS ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.follow_up_status,onChange:B=>i({...t,follow_up_status:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Frequency:"}),["Regularly","Irregularly","Intermittently","Lost to follow-up"].map(B=>C.jsx("button",{onClick:()=>k("follow_up_status",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsx("p",{className:"text-[9px] text-slate-400 italic mt-1 ml-2",children:"Location: Match the Medical Facility items from the left sidebar."})]})]})]})]})]})]});if(!n)return C.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50 text-slate-400 p-8 text-center h-full",children:C.jsx("p",{children:"Select a profile or timepoint from the timeline to start editing."})});const P=(B,Z)=>{const le={...n.categorizedContent,[B]:Z};e(n.id,{categorizedContent:le})},$=lu.filter(B=>B.category!=="Disease");return C.jsxs("div",{className:"flex flex-col h-full bg-white",children:[C.jsxs("div",{className:"p-4 border-b border-slate-200 bg-slate-50 flex items-center justify-between flex-shrink-0",children:[C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Editor"}),C.jsx("div",{className:"text-lg font-mono font-semibold text-slate-800",children:n.date||(n.dateType==="month"?"YYYY-MM":"YYYY-MM-DD")})]}),C.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar",ref:g,children:[C.jsxs("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg border border-blue-100",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"Event Time"}),C.jsxs("div",{className:"flex space-x-2 text-xs",children:[C.jsx("button",{onClick:()=>e(n.id,{dateType:"date",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="date"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Exact Date"}),C.jsx("button",{onClick:()=>e(n.id,{dateType:"month",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="month"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Month Only"})]})]}),C.jsx("input",{type:n.dateType==="date"?"date":"month",className:"w-full p-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:n.date,onChange:B=>e(n.id,{date:B.target.value})})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{ref:B=>{h.current["Medical Facility"]=B},className:"group pb-4 border-b border-slate-100 scroll-mt-10",children:[C.jsxs("label",{className:"block text-xs font-bold text-blue-700 mb-2 uppercase tracking-wide flex items-center",children:[C.jsx(QI,{className:"w-3.5 h-3.5 mr-1.5"}),"Medical Facility ()"]}),C.jsx("textarea",{className:"w-full h-16 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed transition-shadow",placeholder:"e.g. the Emergency Department of Linkou Chang Gung Memorial Hospital",value:n.categorizedContent["Medical Facility"]||"",onChange:B=>P("Medical Facility",B.target.value)})]}),C.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-slate-100",children:[C.jsx("h3",{className:"text-sm font-bold text-slate-800",children:"Clinical Findings"}),C.jsx("span",{className:"text-xs text-slate-500 font-normal hidden sm:inline",children:"(Click menu items to insert)"})]}),$.filter(B=>B.category!=="Medical Facility").map(B=>{const Z=["Tentative Diagnosis","Underlying disease","Definitive diagnosis"].includes(B.category),le=B.category==="Vital Sign",de=Z?"text-indigo-800":le?"text-green-700":B.category==="Negative Symptom"?"text-red-700":"text-orange-700";return C.jsxs("div",{ref:pe=>{h.current[B.category]=pe},className:"group scroll-mt-10",children:[C.jsx("label",{className:`block text-xs font-bold mb-1 uppercase tracking-wide ${de}`,children:B.category}),C.jsx("textarea",{className:`w-full h-24 p-3 border border-slate-300 rounded-lg shadow-sm font-sans text-sm leading-relaxed resize-y transition-shadow ${Z?"focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 bg-indigo-50/10":le?"focus:ring-2 focus:ring-green-200 focus:border-green-400 bg-green-50/10":B.category==="Negative Symptom"?"focus:ring-2 focus:ring-red-200 focus:border-red-400 bg-red-50/20":"focus:ring-2 focus:ring-orange-200 focus:border-orange-400"}`,placeholder:`Describe ${B.category.toLowerCase()}...`,value:n.categorizedContent[B.category]||"",onChange:pe=>P(B.category,pe.target.value)})]},B.category)}),C.jsxs("div",{className:"group pt-4 border-t border-slate-100",children:[C.jsx("label",{className:"block text-xs font-bold text-blue-700 mb-1 uppercase tracking-wide",children:"Other Information"}),C.jsx("textarea",{className:"w-full h-32 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed resize-y transition-shadow",placeholder:"Enter any additional information...",value:n.otherInformation||"",onChange:B=>e(n.id,{otherInformation:B.target.value})})]})]})]})]})},oR=({isOpen:n,onClose:e,onConfirm:t,title:i,message:r,confirmText:l="Delete",cancelText:u="Cancel"})=>n?Ma.createPortal(C.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:e}),C.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 fade-in duration-200",children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[C.jsx(PS,{className:"w-5 h-5"}),C.jsx("h3",{className:"font-bold text-slate-800",children:i})]}),C.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-slate-200 text-slate-400 transition-colors",children:C.jsx(Au,{className:"w-5 h-5"})})]}),C.jsx("div",{className:"p-6",children:C.jsx("p",{className:"text-slate-600 leading-relaxed",children:r})}),C.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 bg-slate-50 border-t border-slate-100",children:[C.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 hover:bg-slate-200 rounded-lg transition-colors",children:u}),C.jsx("button",{onClick:t,className:"px-6 py-2 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-lg shadow-md hover:shadow-lg active:scale-95 transition-all",children:l})]})]})]}),document.body):null,rR=({onLogin:n,authError:e})=>{const[t,i]=re.useState(""),[r,l]=re.useState(!1),[u,f]=re.useState(!1);re.useEffect(()=>{const h=window.location.hostname,_=window.location.href;!h||h===""||_.startsWith("about:")||_.startsWith("file:")||_.startsWith("data:")?(f(!0),i("Sandbox Mode (Auth Disabled)")):(f(!1),i(h))},[]);const g=()=>{u||(navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3))};return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-6 relative",children:[C.jsxs("div",{className:"max-w-4xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row z-10",children:[C.jsxs("div",{className:"md:w-1/2 p-10 bg-blue-50 flex flex-col justify-between relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-purple-500"}),C.jsxs("div",{className:"z-10",children:[C.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[C.jsx("div",{className:"bg-blue-600 p-2.5 rounded-xl shadow-lg",children:C.jsx(NS,{className:"w-8 h-8 text-white"})}),C.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"MediScribe AI"})]}),C.jsx("h2",{className:"text-4xl font-extrabold text-blue-900 mb-4 leading-tight",children:"Transform Medical Records with AI"}),C.jsx("p",{className:"text-slate-600 text-lg mb-8 leading-relaxed",children:"Generate professional, academic-grade admission notes from structured inputs in seconds using Gemini 1.5 Pro."})]}),C.jsxs("div",{className:"space-y-4 z-10",children:[C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(sx,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"Structured Data Entry"})]}),C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(_d,{className:"w-5 h-5 text-purple-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"AI-Powered Generation"})]}),C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(Bx,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"Bring Your Own Key (Secure)"})]})]}),C.jsx("div",{className:"absolute -bottom-10 -right-10 w-64 h-64 bg-blue-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse"}),C.jsx("div",{className:"absolute -bottom-10 -left-10 w-64 h-64 bg-purple-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse delay-1000"})]}),C.jsx("div",{className:"md:w-1/2 p-10 flex flex-col justify-center items-center bg-white relative",children:u?C.jsxs("div",{className:"text-center w-full",children:[C.jsx("div",{className:"w-16 h-16 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-6",children:C.jsx(Dx,{className:"w-8 h-8"})}),C.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Preview Environment Detected"}),C.jsxs("p",{className:"text-slate-500 mb-6 text-sm leading-relaxed px-4",children:["This app is running in a ",C.jsx("strong",{children:"Sandboxed Preview"})," (no domain). Google Login requires a real web server to function securely."]}),C.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 text-left mb-6 mx-2",children:[C.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center",children:[C.jsx(ux,{className:"w-4 h-4 mr-2 text-blue-600"}),"How to fix:"]}),C.jsxs("ol",{className:"list-decimal list-inside text-xs text-slate-600 space-y-2",children:[C.jsxs("li",{children:[C.jsx("strong",{children:"Download"})," or ",C.jsx("strong",{children:"Export"})," this project from the editor."]}),C.jsxs("li",{children:["Run it locally (e.g., ",C.jsx("code",{children:"npm run dev"}),"  ",C.jsx("code",{children:"localhost"}),")."]}),C.jsx("li",{children:"Or deploy it to a hosting service (Vercel, Netlify)."})]})]}),C.jsx("button",{disabled:!0,className:"w-full py-3 bg-slate-200 text-slate-400 font-bold rounded-xl cursor-not-allowed",children:"Login Disabled in Sandbox"})]}):C.jsxs("div",{className:"w-full flex flex-col items-center",children:[C.jsxs("div",{className:"text-center mb-10",children:[C.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Welcome Back"}),C.jsx("p",{className:"text-slate-500",children:"Please sign in to access your workspace"})]}),e&&C.jsxs("div",{className:"mb-6 w-full p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3 animate-in fade-in slide-in-from-top-2",children:[C.jsx(PS,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h4",{className:"text-sm font-bold text-red-800 mb-1",children:"Authentication Error"}),C.jsx("p",{className:"text-xs text-red-700 whitespace-pre-wrap leading-relaxed select-all font-mono bg-red-50/50 p-1 rounded",children:e}),e.includes("Settings > Authorized domains")&&C.jsxs("div",{className:"mt-2 p-2 bg-white border border-red-100 rounded text-xs text-slate-500",children:[C.jsx("strong",{children:"Tip:"})," You must add the ",C.jsx("u",{children:"exact domain"})," shown in the bottom right corner of this screen to Firebase Console."]})]})]}),C.jsxs("button",{onClick:n,className:"w-full max-w-sm flex items-center justify-center space-x-3 px-6 py-4 border border-slate-300 rounded-xl hover:bg-slate-50 hover:border-slate-400 hover:shadow-md transition-all group bg-white",children:[C.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),C.jsx("span",{className:"text-slate-700 font-bold text-lg group-hover:text-slate-900",children:"Sign in with Google"})]}),C.jsx("p",{className:"mt-8 text-xs text-center text-slate-400 max-w-xs leading-relaxed",children:"By signing in, you agree to use your own Gemini API Key. Your key is encrypted and stored securely linked to your account."})]})})]}),C.jsxs("div",{className:"absolute bottom-4 right-4 z-0 flex flex-col items-end opacity-70 hover:opacity-100 transition-opacity",children:[C.jsx("label",{className:"text-[10px] text-blue-200 uppercase font-bold mb-1",children:"Detected Domain (For Firebase Whitelist)"}),C.jsxs("button",{onClick:g,disabled:u,className:`flex items-center space-x-2 px-3 py-1.5 rounded-full border border-white/10 transition-colors ${u?"bg-red-900/40 text-red-200 cursor-not-allowed":"bg-black/20 backdrop-blur-md text-white hover:bg-black/30"}`,children:[C.jsx("span",{className:"text-xs font-mono",children:t}),!u&&(r?C.jsx(xS,{className:"w-3 h-3 text-green-400"}):C.jsx(Om,{className:"w-3 h-3 text-slate-300"}))]})]})]})},aR=({isOpen:n,onSave:e,isDismissible:t=!1,onDismiss:i})=>{const[r,l]=re.useState(""),[u,f]=re.useState(!1),[g,h]=re.useState("");if(!n)return null;const _=async()=>{if(!r.trim()){h("Please enter a valid API key.");return}h(""),f(!0);try{await e(r.trim())}catch{h("Failed to save API Key. Please try again.")}finally{f(!1)}};return C.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:t?i:void 0}),C.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-300",children:[C.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white text-center",children:[C.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-md",children:C.jsx(MS,{className:"w-8 h-8 text-white"})}),C.jsx("h2",{className:"text-2xl font-bold",children:"Setup Gemini API Key"}),C.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Required to power the AI generation"})]}),C.jsxs("div",{className:"p-8 space-y-6",children:[C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 flex items-start space-x-3",children:[C.jsx(nx,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{className:"text-sm text-blue-800",children:[C.jsx("p",{className:"font-bold mb-1",children:"Why do I need this?"}),C.jsx("p",{className:"opacity-90 leading-relaxed",children:"This application runs on your own Google Cloud account. Your API key is stored securely in your database and is never shared with us."})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Enter your Gemini API Key"}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(Sx,{className:"h-4 w-4 text-slate-400"})}),C.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all font-mono text-sm",placeholder:"AIzaSy...",value:r,onChange:T=>l(T.target.value)})]}),g&&C.jsx("p",{className:"text-red-500 text-xs mt-2 font-medium",children:g})]}),C.jsx("div",{className:"text-center",children:C.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 font-semibold hover:underline",children:["Get a free API key here ",C.jsx(fx,{className:"w-3.5 h-3.5 ml-1"})]})})]}),C.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[t&&C.jsx("button",{onClick:i,className:"flex-1 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Cancel"}),C.jsx("button",{onClick:_,disabled:u||!r,className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all active:scale-95 disabled:bg-slate-300 disabled:shadow-none flex items-center justify-center",children:u?C.jsx(pu,{className:"w-5 h-5 animate-spin"}):"Save & Continue"})]})]})]})]})};var lR={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uR,cR;function dR(){return{geminiUrl:uR,vertexUrl:cR}}function fR(n,e,t,i){var r,l;if(!(n!=null&&n.baseUrl)){const u=dR();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(l=u.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zs{}function ge(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const g=n[f];if(Array.isArray(t))for(let h=0;h<g.length;h++){const _=g[h];p(_,e.slice(l+1),t[h])}else for(const h of g)p(h,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const g=n[f];p(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function hR(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),l=i.split("."),u=new Set;let f=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){f=g;break}if(f!==-1&&l.length>f)for(let g=f;g<l.length;g++){const h=l[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Qp(n,r,l,0,u)}}function Qp(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const g of f[u])Qp(g,e,t,i+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),g={};for(const h of f)g[h]=u[h];for(const[h,_]of Object.entries(g)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);p(u,T,_)}for(const h of f)delete u[h]}}else{const u=n;l in u&&Qp(u[l],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pR(n){const e={},t=d(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function mR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],yR(u)),e}function gR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],vR(u)),e}function yR(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>_R(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function vR(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>TR(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function _R(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],wR(t)),e}function TR(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],IR(t)),e}function ER(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function SR(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function AR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],CR(u)),e}function CR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function kS(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],bR(u)),e}function bR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function wR(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Hm(i));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function IR(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Hm(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var v_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(v_||(v_={}));var __;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(__||(__={}));var T_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(T_||(T_={}));var Ho;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ho||(Ho={}));var E_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(E_||(E_={}));var S_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(S_||(S_={}));var A_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(A_||(A_={}));var C_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(C_||(C_={}));var b_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(b_||(b_={}));var w_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(w_||(w_={}));var I_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(I_||(I_={}));var x_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(x_||(x_={}));var R_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(R_||(R_={}));var N_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(N_||(N_={}));var M_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(M_||(M_={}));var D_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(D_||(D_={}));var P_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(P_||(P_={}));var k_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(k_||(k_={}));var V_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(V_||(V_={}));var Dd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Dd||(Dd={}));var U_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(U_||(U_={}));var L_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(L_||(L_={}));var O_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(O_||(O_={}));var Xp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xp||(Xp={}));var H_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(H_||(H_={}));var B_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(B_||(B_={}));var F_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(F_||(F_={}));var G_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(G_||(G_={}));var q_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(q_||(q_={}));var z_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(z_||(z_={}));var K_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(K_||(K_={}));var $_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})($_||($_={}));var Y_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Y_||(Y_={}));var J_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(J_||(J_={}));var Q_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Q_||(Q_={}));var X_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(X_||(X_={}));var W_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(W_||(W_={}));var j_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(j_||(j_={}));var Z_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Z_||(Z_={}));var eT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(eT||(eT={}));var tT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(tT||(tT={}));var nT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(nT||(nT={}));var iT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(iT||(iT={}));var sT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(sT||(sT={}));var oT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(oT||(oT={}));var rT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(rT||(rT={}));var aT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(aT||(aT={}));var lT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(lT||(lT={}));var uT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(uT||(uT={}));var cT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cT||(cT={}));var dT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(dT||(dT={}));var fT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(fT||(fT={}));var hT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hT||(hT={}));var pT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(pT||(pT={}));var mT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(mT||(mT={}));var Da;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Da||(Da={}));class Wp{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ru{get text(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const S of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[w,V]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(V!==null||V!==void 0)&&T.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[S,w]of Object.entries(T))S!=="inlineData"&&(w!==null||w!==void 0)&&_.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,r,l,u,f,g,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,r,l,u,f,g,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class gT{}class yT{}class xR{}class RR{}class NR{}class MR{}class vT{}class _T{}class TT{}class DR{}class Pd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Pd;let r;const l=e;return t?r=gR(l):r=mR(l),Object.assign(i,r),i}}class ET{}class ST{}class AT{}class CT{}class PR{}class kR{}class VR{}class Bm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Bm,l=AR(e);return Object.assign(i,l),i}}class UR{}class LR{}class OR{}class bT{}class HR{get text(){var e,t,i;let r="",l=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(f))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,i;let r="";const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,g]of Object.entries(u))f!=="inlineData"&&g!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class BR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Fm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Fm,l=kS(e);return Object.assign(i,l),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ot(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function VS(n,e){const t=ot(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function US(n){return Array.isArray(n)?n.map(e=>kd(e)):[kd(n)]}function kd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function LS(n){const e=kd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OS(n){const e=kd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function HS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>wT(e)):[wT(n)]}function jp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function IT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function xT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function wn(n){if(n==null)throw new Error("ContentUnion is required");return jp(n)?n:{role:"user",parts:HS(n)}}function Gm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=wn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=wn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>wn(t)):[wn(e)]}function Ri(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(IT(n)||xT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wn(n)]}const e=[],t=[],i=jp(n[0]);for(const r of n){const l=jp(r);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(IT(r)||xT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:HS(t)}),e}function FR(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Ho).includes(t[0].toUpperCase())?t[0].toUpperCase():Ho.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Ho).includes(i.toUpperCase())?i.toUpperCase():Ho.TYPE_UNSPECIFIED})}}function ka(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&FR(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Ho).includes(f.toUpperCase())?f.toUpperCase():Ho.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=ka(f);else if(i.includes(u)){const g=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}g.push(ka(h))}e[u]=g}else if(r.includes(u)){const g={};for(const[h,_]of Object.entries(f))g[h]=ka(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=f}return e}function qm(n){return ka(n)}function zm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Km(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Wa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ka(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ka(e.response));return n}function ja(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function GR(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function eo(n,e){if(typeof e!="string")throw new Error("name must be a string");return GR(n,e,"cachedContents")}function BS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Zo(n){return Hm(n)}function qR(n){return n!=null&&typeof n=="object"&&"name"in n}function zR(n){return n!=null&&typeof n=="object"&&"video"in n}function KR(n){return n!=null&&typeof n=="object"&&"uri"in n}function FS(n){var e;let t;if(qR(n)&&(t=n.name),!(KR(n)&&(t=n.uri,t===void 0))&&!(zR(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function GS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function qS(n){for(const e of["models","tunedModels","publisherModels"])if($R(n,e))return n[e];return[]}function $R(n,e){return n!==null&&typeof n=="object"&&e in n}function YR(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function JR(n,e={}){const t=[],i=new Set;for(const r of n){const l=r.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const u=YR(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function zS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function QR(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function KS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Za(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function $S(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XR(n){const e={},t=d(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>N1(u))),p(e,["inlinedResponses"],l)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["inlinedEmbedContentResponses"],l)}return e}function WR(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function jR(n){const e={},t=d(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Td(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["metadata","state"]);r!=null&&p(e,["state"],$S(r));const l=d(n,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const u=d(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&p(e,["updateTime"],f);const g=d(n,["metadata","model"]);g!=null&&p(e,["model"],g);const h=d(n,["metadata","output"]);return h!=null&&p(e,["dest"],XR(KS(h))),e}function Zp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["state"]);r!=null&&p(e,["state"],$S(r));const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["createTime"]);u!=null&&p(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(e,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(e,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=d(n,["model"]);_!=null&&p(e,["model"],_);const T=d(n,["inputConfig"]);T!=null&&p(e,["src"],ZR(T));const S=d(n,["outputConfig"]);S!=null&&p(e,["dest"],WR(KS(S)));const w=d(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function ZR(n){const e={},t=d(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function e1(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&p(t,["fileName"],i);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>R1(n,u))),p(t,["requests","requests"],l)}return t}function t1(n){const e={},t=d(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function n1(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function i1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Za(n,i)),t}function s1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Za(n,i)),t}function o1(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],r1(i));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function r1(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function YS(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>L1(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function a1(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function l1(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],jR(QR(r))),t}function RT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],e1(n,zS(n,r)));const l=d(e,["config"]);return l!=null&&a1(l,t),t}function u1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],ot(n,i));const r=d(e,["src"]);r!=null&&p(t,["inputConfig"],t1(zS(n,r)));const l=d(e,["config"]);return l!=null&&l1(l,t),t}function c1(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function d1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],v1(n,r));const l=d(e,["config"]);return l!=null&&c1(l,t),t}function f1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Za(n,i)),t}function h1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Za(n,i)),t}function p1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function m1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function g1(n,e){const t={},i=d(e,["contents"]);if(i!=null){let l=Gm(n,i);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(p(t,["_self"],y1(r,t)),hR(t,{"requests[].*":"requests[].request.*"})),t}function y1(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function v1(n,e){const t={},i=d(e,["fileName"]);i!=null&&p(t,["file_name"],i);const r=d(e,["inlinedRequests"]);return r!=null&&p(t,["requests"],g1(n,r)),t}function _1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function T1(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function E1(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function S1(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],YS(wn(r)));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const k=d(e,["seed"]);k!=null&&p(i,["seed"],k);const P=d(e,["responseMimeType"]);P!=null&&p(i,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(i,["responseSchema"],qm($));const B=d(e,["responseJsonSchema"]);if(B!=null&&p(i,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=d(e,["safetySettings"]);if(t!==void 0&&Z!=null){let D=Z;Array.isArray(D)&&(D=D.map(He=>O1(He))),p(t,["safetySettings"],D)}const le=d(e,["tools"]);if(t!==void 0&&le!=null){let D=ja(le);Array.isArray(D)&&(D=D.map(He=>B1(Wa(He)))),p(t,["tools"],D)}const de=d(e,["toolConfig"]);if(t!==void 0&&de!=null&&p(t,["toolConfig"],H1(de)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const pe=d(e,["cachedContent"]);t!==void 0&&pe!=null&&p(t,["cachedContent"],eo(n,pe));const N=d(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const M=d(e,["mediaResolution"]);M!=null&&p(i,["mediaResolution"],M);const R=d(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],zm(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=d(e,["thinkingConfig"]);H!=null&&p(i,["thinkingConfig"],H);const O=d(e,["imageConfig"]);O!=null&&p(i,["imageConfig"],x1(O));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function A1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>o1(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function C1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Za(n,i)),t}function b1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Za(n,i)),t}function w1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function I1(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function x1(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function R1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["request","model"],ot(n,i));const r=d(e,["contents"]);if(r!=null){let f=Ri(r);Array.isArray(f)&&(f=f.map(g=>YS(g))),p(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(e,["config"]);return u!=null&&p(t,["request","generationConfig"],S1(n,u,d(t,["request"],{}))),t}function N1(n){const e={},t=d(n,["response"]);t!=null&&p(e,["response"],A1(t));const i=d(n,["error"]);return i!=null&&p(e,["error"],i),e}function M1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function D1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const l=d(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),t}function P1(n){const e={},t=d(n,["config"]);return t!=null&&M1(t,e),e}function k1(n){const e={},t=d(n,["config"]);return t!=null&&D1(t,e),e}function V1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Td(u))),p(e,["batchJobs"],l)}return e}function U1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Zp(u))),p(e,["batchJobs"],l)}return e}function L1(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],_1(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],T1(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],n1(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function O1(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function H1(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],E1(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function B1(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],w1(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],I1(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Js;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Js||(Js={}));class Lr{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F1 extends Zs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Lr(Js.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=RT(this.apiClient,e),i=t._url,r=ge("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,g=f.requests,h=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const w=T.request;w.systemInstruction=S,T.request=w}h.push(T)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=u1(this.apiClient,e);return f=ge("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Zp(_))}else{const h=RT(this.apiClient,e);return f=ge("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Td(_))}}async createEmbeddingsInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=d1(this.apiClient,e);return l=ge("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>Td(g))}}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=b1(this.apiClient,e);return f=ge("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Zp(_))}else{const h=C1(this.apiClient,e);return f=ge("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Td(_))}}async cancel(e){var t,i,r,l;let u="",f={};if(this.apiClient.isVertexAI()){const g=s1(this.apiClient,e);u=ge("batchPredictionJobs/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=i1(this.apiClient,e);u=ge("batches/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=k1(e);return f=ge("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=U1(_),S=new bT;return Object.assign(S,T),S})}else{const h=P1(e);return f=ge("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=V1(_),S=new bT;return Object.assign(S,T),S})}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=h1(this.apiClient,e);return f=ge("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>m1(_))}else{const h=f1(this.apiClient,e);return f=ge("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>p1(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G1(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function NT(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>dN(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function q1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let _=Ri(u);Array.isArray(_)&&(_=_.map(T=>NT(T))),p(e,["contents"],_)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],NT(wn(f)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>hN(T))),p(e,["tools"],_)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],fN(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function z1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=Ri(u);Array.isArray(T)&&(T=T.map(S=>S)),p(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],wn(f));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>pN(S))),p(e,["tools"],T)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function K1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],VS(n,i));const r=d(e,["config"]);return r!=null&&q1(r,t),t}function $1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],VS(n,i));const r=d(e,["config"]);return r!=null&&z1(r,t),t}function Y1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],eo(n,i)),t}function J1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],eo(n,i)),t}function Q1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function X1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function W1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function j1(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Z1(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function eN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function tN(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],eo(n,i)),t}function nN(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],eo(n,i)),t}function iN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function sN(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function oN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function rN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function aN(n){const e={},t=d(n,["config"]);return t!=null&&oN(t,e),e}function lN(n){const e={},t=d(n,["config"]);return t!=null&&rN(t,e),e}function uN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function cN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function dN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],W1(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],j1(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],G1(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function fN(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],Z1(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function hN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],iN(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],sN(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function pN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>eN(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function mN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function gN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function yN(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],eo(n,i));const r=d(e,["config"]);return r!=null&&mN(r,t),t}function vN(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],eo(n,i));const r=d(e,["config"]);return r!=null&&gN(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _N extends Zs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Lr(Js.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=$1(this.apiClient,e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=K1(this.apiClient,e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=nN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=tN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=J1(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=X1(_),S=new AT;return Object.assign(S,T),S})}else{const h=Y1(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=Q1(_),S=new AT;return Object.assign(S,T),S})}}async update(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=vN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=yN(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=lN(e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=cN(_),S=new CT;return Object.assign(S,T),S})}else{const h=aN(e);return f=ge("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=uN(_),S=new CT;return Object.assign(S,T),S})}}}function Vd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function MT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ve(n){return this instanceof Ve?(this.v=n,this):new Ve(n)}function Yi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(V){return Promise.resolve(V).then(w,T)}}function f(w,V){i[w]&&(r[w]=function(k){return new Promise(function(P,$){l.push([w,k,P,$])>1||g(w,k)})},V&&(r[w]=V(r[w])))}function g(w,V){try{h(i[w](V))}catch(k){S(l[0][3],k)}}function h(w){w.value instanceof Ve?Promise.resolve(w.value.v).then(_,T):S(l[0][2],w)}function _(w){g("next",w)}function T(w){g("throw",w)}function S(w,V){w(V),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Ji(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof MT=="function"?MT(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(u){return new Promise(function(f,g){u=n[l](u),r(f,g,u.done,u.value)})}}function r(l,u,f,g){Promise.resolve(g).then(function(h){l({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:JS(t)}function JS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function EN(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function DT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let l=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),l&&!JS(n[i])&&(l=!1),i++;l?e.push(...r):e.pop()}return e}class SN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new AN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class AN{constructor(e,t,i,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),EN(l)}async sendMessage(e){var t;await this.sendPromise;const i=wn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,f;const g=await r,h=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];_!=null&&(S=(f=_.slice(T))!==null&&f!==void 0?f:[]);const w=h?[h]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=wn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?DT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Yi(this,arguments,function*(){var r,l,u,f,g,h;const _=[];try{for(var T=!0,S=Ji(e),w;w=yield Ve(S.next()),r=w.done,!r;T=!0){f=w.value,T=!1;const V=f;if(TN(V)){const k=(h=(g=V.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;k!==void 0&&_.push(k)}yield yield Ve(V)}}catch(V){l={error:V}}finally{try{!T&&!r&&(u=S.return)&&(yield Ve(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...DT(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class of extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,of.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CN(n){const e={},t=d(n,["file"]);return t!=null&&p(e,["file"],t),e}function bN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function wN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],FS(t)),e}function IN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function xN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],FS(t)),e}function RN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function NN(n){const e={},t=d(n,["config"]);return t!=null&&RN(t,e),e}function MN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DN extends Zs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Lr(Js.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NN(e);return l=ge("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=MN(g),_=new UR;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=CN(e);return l=ge("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=bN(g),_=new LR;return Object.assign(_,h),_})}}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xN(e);return l=ge("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wN(e);return l=ge("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=IN(g),_=new OR;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ed(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function PN(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>QN(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function kN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function VN(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function LN(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const V=d(n,["responseModalities"]);V!=null&&p(e,["responseModalities"],V);const k=d(n,["responseSchema"]);k!=null&&p(e,["responseSchema"],k);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const $=d(n,["seed"]);$!=null&&p(e,["seed"],$);const B=d(n,["speechConfig"]);B!=null&&p(e,["speechConfig"],B);const Z=d(n,["stopSequences"]);Z!=null&&p(e,["stopSequences"],Z);const le=d(n,["temperature"]);le!=null&&p(e,["temperature"],le);const de=d(n,["thinkingConfig"]);de!=null&&p(e,["thinkingConfig"],de);const pe=d(n,["topK"]);pe!=null&&p(e,["topK"],pe);const N=d(n,["topP"]);if(N!=null&&p(e,["topP"],N),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ON(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function HN(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function BN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Km(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],PN(wn(V)));const k=d(n,["tools"]);if(e!==void 0&&k!=null){let pe=ja(k);Array.isArray(pe)&&(pe=pe.map(N=>WN(Wa(N)))),p(e,["setup","tools"],pe)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],XN(P));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const le=d(n,["contextWindowCompression"]);e!==void 0&&le!=null&&p(e,["setup","contextWindowCompression"],le);const de=d(n,["proactivity"]);if(e!==void 0&&de!=null&&p(e,["setup","proactivity"],de),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function FN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],LN(i));const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Km(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],wn(V));const k=d(n,["tools"]);if(e!==void 0&&k!=null){let N=ja(k);Array.isArray(N)&&(N=N.map(M=>jN(Wa(M)))),p(e,["setup","tools"],N)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],P);const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const le=d(n,["contextWindowCompression"]);e!==void 0&&le!=null&&p(e,["setup","contextWindowCompression"],le);const de=d(n,["proactivity"]);e!==void 0&&de!=null&&p(e,["setup","proactivity"],de);const pe=d(n,["explicitVadSignal"]);return e!==void 0&&pe!=null&&p(e,["setup","explicitVadSignal"],pe),t}function GN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],ot(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],BN(r,t)),t}function qN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],ot(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],FN(r,t)),t}function zN(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function KN(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function $N(n){const e={},t=d(n,["media"]);if(t!=null){let h=US(t);Array.isArray(h)&&(h=h.map(_=>Ed(_))),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],Ed(OS(i)));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],Ed(LS(l)));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function YN(n){const e={},t=d(n,["media"]);if(t!=null){let h=US(t);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],OS(i));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],LS(l));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function JN(n){const e={},t=d(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const r=d(n,["toolCall"]);r!=null&&p(e,["toolCall"],r);const l=d(n,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const u=d(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],ZN(u));const f=d(n,["goAway"]);f!=null&&p(e,["goAway"],f);const g=d(n,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function QN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],kN(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],VN(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],Ed(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function XN(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function WN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],ON(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],HN(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function jN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>UN(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function ZN(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const r=d(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const u=d(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const g=d(n,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["promptTokensDetails"],w)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["cacheTokensDetails"],w)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["responseTokensDetails"],w)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(V=>V)),p(e,["toolUsePromptTokensDetails"],w)}const S=d(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eM(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function tM(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],nM(i));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function nM(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function iM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["contents"]);if(r!=null){let l=Ri(r);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["contents"],l)}return t}function sM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["tokensInfo"],r)}return e}function oM(n){const e={},t=d(n,["values"]);t!=null&&p(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&p(e,["statistics"],rM(i)),e}function rM(n){const e={},t=d(n,["truncated"]);t!=null&&p(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function rf(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>mD(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function aM(n){const e={},t=d(n,["controlType"]);t!=null&&p(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function lM(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function uM(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],wn(i));const r=d(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>jS(f))),p(e,["tools"],u)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&p(e,["generationConfig"],eD(l)),t}function cM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["contents"]);if(r!=null){let u=Ri(r);Array.isArray(u)&&(u=u.map(f=>rf(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&lM(l),t}function dM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["contents"]);if(r!=null){let u=Ri(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&uM(l,t),t}function fM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const r=d(n,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function hM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function pM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],ot(n,i)),t}function mM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],ot(n,i)),t}function gM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function yM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function vM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const V=d(n,["outputMimeType"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","mimeType"],V);const k=d(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","compressionQuality"],k);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&p(e,["parameters","addWatermark"],P);const $=d(n,["labels"]);e!==void 0&&$!=null&&p(e,["labels"],$);const B=d(n,["editMode"]);e!==void 0&&B!=null&&p(e,["parameters","editMode"],B);const Z=d(n,["baseSteps"]);return e!==void 0&&Z!=null&&p(e,["parameters","editConfig","baseSteps"],Z),t}function _M(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>ED(g))),p(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&vM(u,t),t}function TM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>af(l))),p(e,["generatedImages"],r)}return e}function EM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function SM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&p(e,["parameters","outputDimensionality"],l);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&p(e,["parameters","autoTruncate"],f),t}function AM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["contents"]);if(r!=null){let f=Gm(n,r);Array.isArray(f)&&(f=f.map(g=>g)),p(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&EM(l,t);const u=d(e,["model"]);return u!==void 0&&p(t,["requests[]","model"],ot(n,u)),t}function CM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["contents"]);if(r!=null){let u=Gm(n,r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["instances[]","content"],u)}const l=d(e,["config"]);return l!=null&&SM(l,t),t}function bM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function wM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>oM(u))),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function IM(n){const e={},t=d(n,["endpoint"]);t!=null&&p(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function xM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function RM(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NM(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function MM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function DM(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],rf(wn(r)));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const k=d(e,["seed"]);k!=null&&p(i,["seed"],k);const P=d(e,["responseMimeType"]);P!=null&&p(i,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(i,["responseSchema"],qm($));const B=d(e,["responseJsonSchema"]);if(B!=null&&p(i,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=d(e,["safetySettings"]);if(t!==void 0&&Z!=null){let D=Z;Array.isArray(D)&&(D=D.map(He=>SD(He))),p(t,["safetySettings"],D)}const le=d(e,["tools"]);if(t!==void 0&&le!=null){let D=ja(le);Array.isArray(D)&&(D=D.map(He=>RD(Wa(He)))),p(t,["tools"],D)}const de=d(e,["toolConfig"]);if(t!==void 0&&de!=null&&p(t,["toolConfig"],xD(de)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const pe=d(e,["cachedContent"]);t!==void 0&&pe!=null&&p(t,["cachedContent"],eo(n,pe));const N=d(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const M=d(e,["mediaResolution"]);M!=null&&p(i,["mediaResolution"],M);const R=d(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],zm(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=d(e,["thinkingConfig"]);H!=null&&p(i,["thinkingConfig"],H);const O=d(e,["imageConfig"]);O!=null&&p(i,["imageConfig"],oD(O));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function PM(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],wn(r));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const V=d(e,["frequencyPenalty"]);V!=null&&p(i,["frequencyPenalty"],V);const k=d(e,["seed"]);k!=null&&p(i,["seed"],k);const P=d(e,["responseMimeType"]);P!=null&&p(i,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(i,["responseSchema"],qm($));const B=d(e,["responseJsonSchema"]);B!=null&&p(i,["responseJsonSchema"],B);const Z=d(e,["routingConfig"]);Z!=null&&p(i,["routingConfig"],Z);const le=d(e,["modelSelectionConfig"]);le!=null&&p(i,["modelConfig"],le);const de=d(e,["safetySettings"]);if(t!==void 0&&de!=null){let W=de;Array.isArray(W)&&(W=W.map(ue=>ue)),p(t,["safetySettings"],W)}const pe=d(e,["tools"]);if(t!==void 0&&pe!=null){let W=ja(pe);Array.isArray(W)&&(W=W.map(ue=>jS(Wa(ue)))),p(t,["tools"],W)}const N=d(e,["toolConfig"]);t!==void 0&&N!=null&&p(t,["toolConfig"],N);const M=d(e,["labels"]);t!==void 0&&M!=null&&p(t,["labels"],M);const R=d(e,["cachedContent"]);t!==void 0&&R!=null&&p(t,["cachedContent"],eo(n,R));const H=d(e,["responseModalities"]);H!=null&&p(i,["responseModalities"],H);const O=d(e,["mediaResolution"]);O!=null&&p(i,["mediaResolution"],O);const q=d(e,["speechConfig"]);q!=null&&p(i,["speechConfig"],zm(q));const D=d(e,["audioTimestamp"]);D!=null&&p(i,["audioTimestamp"],D);const He=d(e,["thinkingConfig"]);He!=null&&p(i,["thinkingConfig"],He);const gt=d(e,["imageConfig"]);if(gt!=null&&p(i,["imageConfig"],rD(gt)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function PT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["contents"]);if(r!=null){let u=Ri(r);Array.isArray(u)&&(u=u.map(f=>rf(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],DM(n,l,t)),t}function kT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["contents"]);if(r!=null){let u=Ri(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],PM(n,l,t)),t}function VT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>tM(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function UT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const r=d(n,["createTime"]);r!=null&&p(e,["createTime"],r);const l=d(n,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const u=d(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(e,["responseId"],f);const g=d(n,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function kM(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=d(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(n,["imageSize"]);if(e!==void 0&&w!=null&&p(e,["parameters","sampleImageSize"],w),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function VM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const V=d(n,["outputMimeType"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","mimeType"],V);const k=d(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","compressionQuality"],k);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&p(e,["parameters","addWatermark"],P);const $=d(n,["labels"]);e!==void 0&&$!=null&&p(e,["labels"],$);const B=d(n,["imageSize"]);e!==void 0&&B!=null&&p(e,["parameters","sampleImageSize"],B);const Z=d(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&p(e,["parameters","enhancePrompt"],Z),t}function UM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&kM(l,t),t}function LM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&VM(l,t),t}function OM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>XM(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],XS(r)),e}function HM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>af(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],WS(r)),e}function BM(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(n,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=d(n,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(n,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],lf(_));const T=d(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>GD(w))),p(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function FM(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const l=d(n,["fps"]);e!==void 0&&l!=null&&p(e,["parameters","fps"],l);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const h=d(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","negativePrompt"],S);const w=d(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const V=d(n,["generateAudio"]);e!==void 0&&V!=null&&p(e,["parameters","generateAudio"],V);const k=d(n,["lastFrame"]);e!==void 0&&k!=null&&p(e,["instances[0]","lastFrame"],Xi(k));const P=d(n,["referenceImages"]);if(e!==void 0&&P!=null){let Z=P;Array.isArray(Z)&&(Z=Z.map(le=>qD(le))),p(e,["instances[0]","referenceImages"],Z)}const $=d(n,["mask"]);e!==void 0&&$!=null&&p(e,["instances[0]","mask"],FD($));const B=d(n,["compressionQuality"]);return e!==void 0&&B!=null&&p(e,["parameters","compressionQuality"],B),t}function GM(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],$M(u)),e}function qM(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],YM(u)),e}function zM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],lf(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],ZS(u));const f=d(e,["source"]);f!=null&&JM(f,t);const g=d(e,["config"]);return g!=null&&BM(g,t),t}function KM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],Xi(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],eA(u));const f=d(e,["source"]);f!=null&&QM(f,t);const g=d(e,["config"]);return g!=null&&FM(g,t),t}function $M(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>jM(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function YM(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>ZM(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function JM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],lf(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],ZS(l)),t}function QM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Xi(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],eA(l)),t}function XM(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],aD(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=d(n,["_self"]);return r!=null&&p(e,["safetyAttributes"],XS(r)),e}function af(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],QS(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=d(n,["_self"]);r!=null&&p(e,["safetyAttributes"],WS(r));const l=d(n,["prompt"]);return l!=null&&p(e,["enhancedPrompt"],l),e}function WM(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["mask"],QS(t));const i=d(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["labels"],r)}return e}function jM(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],HD(t)),e}function ZM(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],BD(t)),e}function eD(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const V=d(n,["responseModalities"]);V!=null&&p(e,["responseModalities"],V);const k=d(n,["responseSchema"]);k!=null&&p(e,["responseSchema"],k);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const $=d(n,["seed"]);$!=null&&p(e,["seed"],$);const B=d(n,["speechConfig"]);B!=null&&p(e,["speechConfig"],B);const Z=d(n,["stopSequences"]);Z!=null&&p(e,["stopSequences"],Z);const le=d(n,["temperature"]);le!=null&&p(e,["temperature"],le);const de=d(n,["thinkingConfig"]);de!=null&&p(e,["thinkingConfig"],de);const pe=d(n,["topK"]);pe!=null&&p(e,["topK"],pe);const N=d(n,["topP"]);if(N!=null&&p(e,["topP"],N),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function tD(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],ot(n,i)),t}function nD(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],ot(n,i)),t}function iD(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function sD(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function oD(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rD(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);const r=d(n,["outputMimeType"]);r!=null&&p(e,["imageOutputOptions","mimeType"],r);const l=d(n,["outputCompressionQuality"]);return l!=null&&p(e,["imageOutputOptions","compressionQuality"],l),e}function aD(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],Zo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function QS(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Zo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function lf(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],Zo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Xi(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Zo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function lD(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],GS(n,f)),i}function uD(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],GS(n,f)),i}function cD(n,e){const t={},i=d(e,["config"]);return i!=null&&lD(n,i,t),t}function dD(n,e){const t={},i=d(e,["config"]);return i!=null&&uD(n,i,t),t}function fD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let l=qS(r);Array.isArray(l)&&(l=l.map(u=>em(u))),p(e,["models"],l)}return e}function hD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let l=qS(r);Array.isArray(l)&&(l=l.map(u=>tm(u))),p(e,["models"],l)}return e}function pD(n){const e={},t=d(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const r=d(n,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function em(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["version"]);l!=null&&p(e,["version"],l);const u=d(n,["_self"]);u!=null&&p(e,["tunedModelInfo"],ND(u));const f=d(n,["inputTokenLimit"]);f!=null&&p(e,["inputTokenLimit"],f);const g=d(n,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const h=d(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=d(n,["temperature"]);_!=null&&p(e,["temperature"],_);const T=d(n,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const S=d(n,["topP"]);S!=null&&p(e,["topP"],S);const w=d(n,["topK"]);w!=null&&p(e,["topK"],w);const V=d(n,["thinking"]);return V!=null&&p(e,["thinking"],V),e}function tm(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["versionId"]);l!=null&&p(e,["version"],l);const u=d(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>IM(S))),p(e,["endpoints"],T)}const f=d(n,["labels"]);f!=null&&p(e,["labels"],f);const g=d(n,["_self"]);g!=null&&p(e,["tunedModelInfo"],MD(g));const h=d(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=d(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>S)),p(e,["checkpoints"],T)}return e}function mD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],xM(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],RM(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],eM(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function gD(n){const e={},t=d(n,["productImage"]);return t!=null&&p(e,["image"],Xi(t)),e}function yD(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const u=d(n,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const w=d(n,["labels"]);return e!==void 0&&w!=null&&p(e,["labels"],w),t}function vD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["source"]);r!=null&&TD(r,t);const l=d(e,["config"]);return l!=null&&yD(l,t),t}function _D(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>af(r))),p(e,["generatedImages"],i)}return e}function TD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Xi(r));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>gD(f))),p(e,["instances[0]","productImages"],u)}return t}function ED(n){const e={},t=d(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Xi(t));const i=d(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);const r=d(n,["referenceType"]);r!=null&&p(e,["referenceType"],r);const l=d(n,["maskImageConfig"]);l!=null&&p(e,["maskImageConfig"],pD(l));const u=d(n,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],aM(u));const f=d(n,["styleImageConfig"]);f!=null&&p(e,["styleImageConfig"],f);const g=d(n,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],g),e}function XS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function WS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function SD(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function AD(n){const e={},t=d(n,["image"]);return t!=null&&p(e,["image"],Xi(t)),e}function CD(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const r=d(n,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","confidenceThreshold"],l);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&p(e,["parameters","binaryColorThreshold"],f);const g=d(n,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),t}function bD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["source"]);r!=null&&ID(r,t);const l=d(e,["config"]);return l!=null&&CD(l,t),t}function wD(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>WM(r))),p(e,["generatedMasks"],i)}return e}function ID(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Xi(r));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&p(e,["instances[0]","scribble"],AD(l)),t}function xD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],NM(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function RD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],iD(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],sD(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function jS(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>MM(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function ND(n){const e={},t=d(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function MD(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function DD(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function PD(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function kD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","name"],ot(n,i));const r=d(e,["config"]);return r!=null&&DD(r,t),t}function VD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["config"]);return r!=null&&PD(r,t),t}function UD(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=d(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&p(e,["parameters","sampleCount"],S);const w=d(n,["mode"]);return e!==void 0&&w!=null&&p(e,["parameters","mode"],w),t}function LD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],ot(n,i));const r=d(e,["image"]);r!=null&&p(t,["instances[0]","image"],Xi(r));const l=d(e,["upscaleFactor"]);l!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=d(e,["config"]);return u!=null&&UD(u,t),t}function OD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>af(l))),p(e,["generatedImages"],r)}return e}function HD(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Zo(i));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function BD(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Zo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function FD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["_self"],Xi(t));const i=d(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function GD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],lf(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function qD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],Xi(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function ZS(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Zo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function eA(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Zo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zD(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function KD(n){const e={},t=d(n,["config"]);return t!=null&&zD(t,e),e}function $D(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function YD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&$D(i,e),e}function JD(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function QD(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["customMetadata"],l)}const r=d(n,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),t}function XD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],jD(u)),e}function WD(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&p(e,["fileName"],i);const r=d(n,["config"]);return r!=null&&QD(r,e),e}function jD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function ZD(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function e2(n){const e={},t=d(n,["config"]);return t!=null&&ZD(t,e),e}function t2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["fileSearchStores"],l)}return e}function tA(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>g)),p(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function n2(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&tA(i,e),e}function i2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s2="Content-Type",o2="X-Server-Timeout",r2="User-Agent",nm="x-goog-api-client",a2="1.34.0",l2=`google-genai-sdk/${a2}`,u2="v1beta1",c2="v1beta";class d2{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:u2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:c2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?i[r]=Object.assign(Object.assign({},i[r]),l):l!==void 0&&(i[r]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&f2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await LT(r),new Wp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await LT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Yi(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Ve(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(_,{stream:!0});try{const V=JSON.parse(T);if("error"in V){const k=JSON.parse(JSON.stringify(V.error)),P=k.status,$=k.code,B=`got status: ${P}. ${JSON.stringify(V)}`;if($>=400&&$<600)throw new of({message:B,status:$})}}catch(V){if(V.name==="ApiError")throw V}u+=T;let S=-1,w=0;for(;;){S=-1,w=0;for(const P of g){const $=u.indexOf(P);$!==-1&&(S===-1||$<S)&&(S=$,w=P.length)}if(S===-1)break;const V=u.substring(0,S);u=u.substring(S+w);const k=V.trim();if(k.startsWith(f)){const P=k.substring(f.length).trim();try{const $=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ve(new Wp($))}catch($){throw new Error(`exception parsing stream chunk ${P}. ${$}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=l2+" "+this.clientOptions.userAgentExtra;return e[r2]=t,e[nm]=t,e[s2]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))i.append(r,l);e.timeout&&e.timeout>0&&i.append(o2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const g={file:r},h=this.getFileName(e),_=ge("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const l=this.clientOptions.uploader,u=await l.stat(t),f=String(u.size),g=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&tA(i,T);const S=await this.fetchUploadUrl(h,f,g,_,T,i==null?void 0:i.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,l,u){var f;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function LT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new of({message:r,status:t}):new Error(r)}}function f2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,u){const f=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],_=f[g];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[g]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[g]=h)}return f}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h2="mcp_used/unknown";let p2=!1;function nA(n){for(const e of n)if(m2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return p2}function iA(n){var e;const t=(e=n[nm])!==null&&e!==void 0?e:"";n[nm]=(t+` ${h2}`).trimStart()}function m2(n){return n!==null&&typeof n=="object"&&n instanceof $m}function g2(n){return Yi(this,arguments,function*(t,i=100){let r,l=0;for(;l<i;){const u=yield Ve(t.listTools({cursor:r}));for(const f of u.tools)yield yield Ve(f),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class $m{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new $m(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,g=(t=void 0,Ji(g2(_))),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const T=r;u.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),JR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function y2(n,e,t){const i=new BR;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class v2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=E2(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(Z=>{h=Z}),T=e.callbacks,S=function(){h({})},w=this.apiClient,V={onopen:S,onmessage:Z=>{y2(w,T.onmessage,Z)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(Z){}},k=this.webSocketFactory.create(g,T2(u),V);k.connect(),await _;const B={setup:{model:ot(this.apiClient,e.model)}};return k.send(JSON.stringify(B)),new _2(k,this.apiClient)}}class _2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=KN(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=zN(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Da.PLAY)}pause(){this.sendPlaybackControl(Da.PAUSE)}stop(){this.sendPlaybackControl(Da.STOP)}resetContext(){this.sendPlaybackControl(Da.RESET_CONTEXT)}close(){this.conn.close()}}function T2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function E2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function A2(n,e,t){const i=new HR;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const u=JN(l);Object.assign(i,u)}else Object.assign(i,l);e(i)}class C2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new v2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&nA(e.config.tools)&&iA(T);const S=x2(T);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const R=this.apiClient.getApiKey();let H="BidiGenerateContent",O="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),H="BidiGenerateContentConstrained",O="access_token"),_=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${H}?${O}=${R}`}let w=()=>{};const V=new Promise(R=>{w=R}),k=e.callbacks,P=function(){var R;(R=k==null?void 0:k.onopen)===null||R===void 0||R.call(k),w({})},$=this.apiClient,B={onopen:P,onmessage:R=>{A2($,k.onmessage,R)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(R){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(R){}},Z=this.webSocketFactory.create(_,I2(S),B);Z.connect(),await V;let le=ot(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&le.startsWith("publishers/")){const R=this.apiClient.getProject(),H=this.apiClient.getLocation();le=`projects/${R}/locations/${H}/`+le}let de={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Dd.AUDIO]}:e.config.responseModalities=[Dd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const pe=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],N=[];for(const R of pe)if(this.isCallableTool(R)){const H=R;N.push(await H.tool())}else N.push(R);N.length>0&&(e.config.tools=N);const M={model:le,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=qN(this.apiClient,M):de=GN(this.apiClient,M),delete de.config,Z.send(JSON.stringify(de)),new w2(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const b2={turnComplete:!0};class w2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Ri(t.turns),e.isVertexAI()||(i=i.map(r=>rf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(S2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},b2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:YN(e)}:t={realtimeInput:$N(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function I2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function x2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OT=10;function HT(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Va(u)){r=!0;break}if(!r)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Va(n){return"callTool"in n&&typeof n.callTool=="function"}function R2(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Va(r)))!==null&&i!==void 0?i:!1}function BT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(Va(i))return;const l=i;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function FT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N2 extends Zs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,l,u,f;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!R2(t)||HT(t.config))return await this.generateContentInternal(g);const h=BT(t);if(h.length>0){const k=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let _,T;const S=Ri(g.contents),w=(l=(r=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:OT;let V=0;for(;V<w&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const k=_.candidates[0].content,P=[];for(const $ of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Va($)){const Z=await $.callTool(_.functionCalls);P.push(...Z)}V++,T={role:"user",parts:P},g.contents=Ri(g.contents),g.contents.push(k),g.contents.push(T),FT(g.config)&&(S.push(k),S.push(T))}return FT(g.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var i,r,l,u,f;if(this.maybeMoveToResponseJsonSchem(t),HT(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=BT(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let l;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Lr(Js.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,l,u,f,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(f=t.source)===null||f===void 0?void 0:f.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>Va(g)?await g.tool():g)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&nA(e.config.tools)){const g=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),iA(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,r;const l=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Va(u)){const f=u,g=await f.tool();for(const h of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var t,i,r;const l=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:OT;let u=!1,f=0;const g=await this.initAfcToolsMap(e);return(function(h,_,T){return Yi(this,arguments,function*(){for(var S,w,V,k,P,$;f<l;){u&&(f++,u=!1);const de=yield Ve(h.processParamsMaybeAddMcpUsage(T)),pe=yield Ve(h.generateContentStreamInternal(de)),N=[],M=[];try{for(var B=!0,Z=(w=void 0,Ji(pe)),le;le=yield Ve(Z.next()),S=le.done,!S;B=!0){k=le.value,B=!1;const R=k;if(yield yield Ve(R),R.candidates&&(!((P=R.candidates[0])===null||P===void 0)&&P.content)){M.push(R.candidates[0].content);for(const H of($=R.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(f<l&&H.functionCall){if(!H.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(H.functionCall.name)){const O=yield Ve(_.get(H.functionCall.name).callTool([H.functionCall]));N.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${H.functionCall.name}`)}}}}catch(R){w={error:R}}finally{try{!B&&!S&&(V=Z.return)&&(yield Ve(V.call(Z)))}finally{if(w)throw w.error}}if(N.length>0){u=!0;const R=new ru;R.candidates=[{content:{role:"user",parts:N}}],yield yield Ve(R);const H=[];H.push(...M),H.push({role:"user",parts:N});const O=Ri(T.contents).concat(H);T.contents=O}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=kT(this.apiClient,e);return f=ge("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=UT(_),S=new ru;return Object.assign(S,T),S})}else{const h=PT(this.apiClient,e);return f=ge("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=VT(_),S=new ru;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=kT(this.apiClient,e);return f=ge("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return Yi(this,arguments,function*(){var S,w,V,k;try{for(var P=!0,$=Ji(T),B;B=yield Ve($.next()),S=B.done,!S;P=!0){k=B.value,P=!1;const Z=k,le=UT(yield Ve(Z.json()));le.sdkHttpResponse={headers:Z.headers};const de=new ru;Object.assign(de,le),yield yield Ve(de)}}catch(Z){w={error:Z}}finally{try{!P&&!S&&(V=$.return)&&(yield Ve(V.call($)))}finally{if(w)throw w.error}}})})}else{const h=PT(this.apiClient,e);return f=ge("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return Yi(this,arguments,function*(){var S,w,V,k;try{for(var P=!0,$=Ji(T),B;B=yield Ve($.next()),S=B.done,!S;P=!0){k=B.value,P=!1;const Z=k,le=VT(yield Ve(Z.json()));le.sdkHttpResponse={headers:Z.headers};const de=new ru;Object.assign(de,le),yield yield Ve(de)}}catch(Z){w={error:Z}}finally{try{!P&&!S&&(V=$.return)&&(yield Ve(V.call($)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=CM(this.apiClient,e);return f=ge("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=wM(_),S=new gT;return Object.assign(S,T),S})}else{const h=AM(this.apiClient,e);return f=ge("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=bM(_),S=new gT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=LM(this.apiClient,e);return f=ge("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=HM(_),S=new yT;return Object.assign(S,T),S})}else{const h=UM(this.apiClient,e);return f=ge("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=OM(_),S=new yT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=_M(this.apiClient,e);return l=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=TM(g),_=new xR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=LD(this.apiClient,e);return l=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=OD(g),_=new RR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=vD(this.apiClient,e);return l=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=_D(g),_=new NR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=bD(this.apiClient,e);return l=ge("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=wD(g),_=new MR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=nD(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>tm(_))}else{const h=tD(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>em(_))}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=dD(this.apiClient,e);return f=ge("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=hD(_),S=new vT;return Object.assign(S,T),S})}else{const h=cD(this.apiClient,e);return f=ge("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=fD(_),S=new vT;return Object.assign(S,T),S})}}async update(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=VD(this.apiClient,e);return f=ge("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>tm(_))}else{const h=kD(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>em(_))}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=mM(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=yM(_),S=new _T;return Object.assign(S,T),S})}else{const h=pM(this.apiClient,e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=gM(_),S=new _T;return Object.assign(S,T),S})}}async countTokens(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=dM(this.apiClient,e);return f=ge("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=hM(_),S=new TT;return Object.assign(S,T),S})}else{const h=cM(this.apiClient,e);return f=ge("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=fM(_),S=new TT;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=iM(this.apiClient,e);return l=ge("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=sM(g),_=new DR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=KM(this.apiClient,e);return f=ge("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=qM(_),S=new Pd;return Object.assign(S,T),S})}else{const h=zM(this.apiClient,e);return f=ge("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const T=GM(_),S=new Pd;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M2 extends Zs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=SR(e);return f=ge("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=ER(e);return f=ge("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=pR(e);return l=ge("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D2(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function P2(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>G2(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function k2(n,e,t){const i={},r=d(e,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&p(t,["newSessionExpireTime"],l);const u=d(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&p(t,["bidiGenerateContentSetup"],F2(n,f));const g=d(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&p(t,["fieldMask"],g),i}function V2(n,e){const t={},i=d(e,["config"]);return i!=null&&p(t,["config"],k2(n,i,t)),t}function U2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function L2(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function O2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function H2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function B2(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Km(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const V=d(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],P2(wn(V)));const k=d(n,["tools"]);if(e!==void 0&&k!=null){let pe=ja(k);Array.isArray(pe)&&(pe=pe.map(N=>z2(Wa(N)))),p(e,["setup","tools"],pe)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],q2(P));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const le=d(n,["contextWindowCompression"]);e!==void 0&&le!=null&&p(e,["setup","contextWindowCompression"],le);const de=d(n,["proactivity"]);if(e!==void 0&&de!=null&&p(e,["setup","proactivity"],de),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function F2(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],ot(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],B2(r,t)),t}function G2(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],U2(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],L2(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],D2(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function q2(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function z2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],O2(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],H2(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function $2(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=K2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];l&&g.push(l),f.length>0&&g.push(...f),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class Y2 extends Zs{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=V2(this.apiClient,e);l=ge("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const g=$2(f,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J2(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function Q2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&J2(i,e),e}function X2(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function W2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function j2(n){const e={},t=d(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&W2(i,e),e}function Z2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eP extends Zs{constructor(e){super(),this.apiClient=e,this.list=async t=>new Lr(Js.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=X2(e);return l=ge("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Q2(e);r=ge("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=j2(e);return l=ge("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=Z2(g),_=new PR;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tP extends Zs{constructor(e,t=new eP(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Lr(Js.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=KD(e);return l=ge("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=JD(e);return l=ge("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=YD(e);r=ge("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=e2(e);return l=ge("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=t2(g),_=new kR;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=n2(e);return l=ge("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=i2(g),_=new VR;return Object.assign(_,h),_})}}async importFile(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=WD(e);return l=ge("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=XD(g),_=new Bm;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return sA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const nP=()=>sA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function im(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const sm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ni extends Error{}class Un extends Ni{constructor(e,t,i,r){super(`${Un.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new uf({message:i,cause:sm(t)});const l=t;return e===400?new rA(e,l,i,r):e===401?new aA(e,l,i,r):e===403?new lA(e,l,i,r):e===404?new uA(e,l,i,r):e===409?new cA(e,l,i,r):e===422?new dA(e,l,i,r):e===429?new fA(e,l,i,r):e>=500?new hA(e,l,i,r):new Un(e,l,i,r)}}class om extends Un{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class uf extends Un{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class oA extends uf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class rA extends Un{}class aA extends Un{}class lA extends Un{}class uA extends Un{}class cA extends Un{}class dA extends Un{}class fA extends Un{}class hA extends Un{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iP=/^[a-z][a-z0-9+.-]*:/i,sP=n=>iP.test(n);let rm=n=>(rm=Array.isArray,rm(n));const oP=rm;let rP=oP;const GT=rP;function aP(n){if(!n)return!0;for(const e in n)return!1;return!0}function lP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const uP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ni(`${n} must be an integer`);if(e<0)throw new Ni(`${n} must be a positive integer`);return e},cP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const hP=()=>{var n,e,t,i,r;const l=fP();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":zT(Deno.build.os),"X-Stainless-Arch":qT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":zT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":qT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=pP();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,l=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const qT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",zT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let ld;const mP=()=>ld??(ld=hP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function pA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function yP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return pA({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function mA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function vP(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _P=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function kp(n,e,t){return gA(),new File(n,e??"unknown_file",t)}function TP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const EP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",SP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&yA(n),AP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function CP(n,e,t){if(gA(),n=await n,SP(n))return n instanceof File?n:kp([await n.arrayBuffer()],n.name);if(AP(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),kp(await am(r),e,t)}const i=await am(n);if(e||(e=TP(n)),!(t!=null&&t.type)){const r=i.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return kp(i,e,t)}async function am(n){var e,t,i,r,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(yA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(EP(n))try{for(var f=!0,g=Ji(n),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const _=r;u.push(...await am(_))}}catch(_){t={error:_}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${bP(n)}`)}return u}function bP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vA{constructor(e){this._client=e}}vA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _A(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const KT=Object.freeze(Object.create(null)),wP=(n=_A)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const l=[],u=t.reduce((_,T,S)=>{var w,V,k;/[?#]/.test(T)&&(r=!0);const P=i[S];let $=(r?encodeURIComponent:n)(""+P);return S!==i.length&&(P==null||typeof P=="object"&&P.toString===((k=Object.getPrototypeOf((V=Object.getPrototypeOf((w=P.hasOwnProperty)!==null&&w!==void 0?w:KT))!==null&&V!==void 0?V:KT))===null||k===void 0?void 0:k.toString))&&($=P+"",l.push({start:_.length+T.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+T+(S===i.length?"":$)},""),f=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(f))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((_,T)=>_.start-T.start),l.length>0){let _=0;const T=l.reduce((S,w)=>{const V=" ".repeat(w.start-_),k="^".repeat(w.length);return _=w.start+w.length,S+V+k},"");throw new Ni(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),ud=wP(_A);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TA extends vA{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,l=Vd(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Ni("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Ni("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ud`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(ud`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(ud`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const l=t??{},{api_version:u=this._client.apiVersion}=l,f=Vd(l,["api_version"]);return this._client.get(ud`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}TA._key=Object.freeze(["interactions"]);class EA extends TA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IP(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let cd;function Ym(n){let e;return(cd??(e=new globalThis.TextEncoder,cd=e.encode.bind(e)))(n)}let dd;function $T(n){let e;return(dd??(e=new globalThis.TextDecoder,dd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ym(e):e;this.buffer=IP([this.buffer,t]);const i=[];let r;for(;(r=xP(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push($T(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=$T(this.buffer.subarray(0,l));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}cf.NEWLINE_CHARS=new Set([`
`,"\r"]);cf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function xP(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function RP(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ud={off:0,error:200,warn:300,info:400,debug:500},YT=(n,e,t)=>{if(n){if(lP(Ud,n))return n;Vn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Ud))}`)}};function uu(){}function fd(n,e,t){return!e||Ud[n]>Ud[t]?uu:e[n].bind(e)}const NP={error:uu,warn:uu,info:uu,debug:uu};let JT=new WeakMap;function Vn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return NP;const r=JT.get(t);if(r&&r[0]===i)return r[1];const l={error:fd("error",t,i),warn:fd("warn",t,i),info:fd("info",t,i),debug:fd("debug",t,i)};return JT.set(t,[i,l]),l}const Ir=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const l=i?Vn(i):console;function u(){return Yi(this,arguments,function*(){var g,h,_,T;if(r)throw new Ni("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,V=Ji(MP(e,t)),k;k=yield Ve(V.next()),g=k.done,!g;w=!0){T=k.value,w=!1;const P=T;if(!S)if(P.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ve(JSON.parse(P.data))}catch($){throw l.error("Could not parse message into JSON:",P.data),l.error("From chunk:",P.raw),$}}}catch(P){h={error:P}}finally{try{!w&&!g&&(_=V.return)&&(yield Ve(_.call(V)))}finally{if(h)throw h.error}}S=!0}catch(P){if(im(P))return yield Ve(void 0);throw P}finally{S||t.abort()}})}return new Pa(u,t,i)}static fromReadableStream(e,t,i){let r=!1;function l(){return Yi(this,arguments,function*(){var g,h,_,T;const S=new cf,w=mA(e);try{for(var V=!0,k=Ji(w),P;P=yield Ve(k.next()),g=P.done,!g;V=!0){T=P.value,V=!1;const $=T;for(const B of S.decode($))yield yield Ve(B)}}catch($){h={error:$}}finally{try{!V&&!g&&(_=k.return)&&(yield Ve(_.call(k)))}finally{if(h)throw h.error}}for(const $ of S.flush())yield yield Ve($)})}function u(){return Yi(this,arguments,function*(){var g,h,_,T;if(r)throw new Ni("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,V=Ji(l()),k;k=yield Ve(V.next()),g=k.done,!g;w=!0){T=k.value,w=!1;const P=T;S||P&&(yield yield Ve(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!w&&!g&&(_=V.return)&&(yield Ve(_.call(V)))}finally{if(h)throw h.error}}S=!0}catch(P){if(im(P))return yield Ve(void 0);throw P}finally{S||t.abort()}})}return new Pa(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=i.next();e.push(u),t.push(u)}return l.shift()}});return[new Pa(()=>r(e),this.controller,this.client),new Pa(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return pA({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:l}=await t.next();if(l)return i.close();const u=Ym(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function MP(n,e){return Yi(this,arguments,function*(){var i,r,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ni("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ni("Attempted to iterate over a response with no body");const f=new PP,g=new cf,h=mA(n.body);try{for(var _=!0,T=Ji(DP(h)),S;S=yield Ve(T.next()),i=S.done,!i;_=!0){u=S.value,_=!1;const w=u;for(const V of g.decode(w)){const k=f.decode(V);k&&(yield yield Ve(k))}}}catch(w){r={error:w}}finally{try{!_&&!i&&(l=T.return)&&(yield Ve(l.call(T)))}finally{if(r)throw r.error}}for(const w of g.flush()){const V=f.decode(w);V&&(yield yield Ve(V))}})}function DP(n){return Yi(this,arguments,function*(){var t,i,r,l;let u=new Uint8Array;try{for(var f=!0,g=Ji(n),h;h=yield Ve(g.next()),t=h.done,!t;f=!0){l=h.value,f=!1;const _=l;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Ym(_):_;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let w;for(;(w=RP(u))!==-1;)yield yield Ve(u.slice(0,w)),u=u.slice(w)}}catch(_){i={error:_}}finally{try{!f&&!t&&(r=g.return)&&(yield Ve(r.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ve(u))})}class PP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=kP(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function kP(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function VP(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var f;if(e.options.stream)return Vn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Pa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),h=(f=g==null?void 0:g.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return Vn(n).debug(`[${i}] response parsed`,Ir({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jm extends Promise{constructor(e,t,i=VP){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Jm(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SA=Symbol("brand.privateNullableHeaders");function*UP(n){if(!n)return;if(SA in n){const{values:i,nulls:r}=n;yield*i.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():GT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=GT(i[1])?i[1]:[i[1]];let u=!1;for(const f of l)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const au=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[l,u]of UP(i)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),u===null?(e.delete(l),t.add(f)):(e.append(l,u),t.delete(f))}}return{[SA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vp=n=>{var e,t,i,r,l,u;if(typeof globalThis.process<"u")return(i=(t=(e=lR)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var AA;class df{constructor(e){var t,i,r,l,u,f,g,{baseURL:h=Vp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Vp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Vd(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:df.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const V="warn";this.logLevel=V,this.logLevel=(u=(l=YT(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:YT(Vp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:V,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:gP(),this.encoder=_P,this._options=w,this.apiKey=_,this.apiVersion=T,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=au([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return au([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return au([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Ni(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${wa}`}defaultIdempotencyKey(){return`stainless-node-retry-${nP()}`}makeStatusError(e,t,i,r){return Un.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,l=sP(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return aP(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Jm(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,l,u;const f=await e,g=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(f);const{req:h,url:_,timeout:T}=await this.buildRequest(f,{retryCount:g-t});await this.prepareRequest(h,{url:_,options:f});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,V=Date.now();if(Vn(this).debug(`[${S}] sending request`,Ir({retryOfRequestLogID:i,method:f.method,url:_,options:f,headers:h.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new om;const k=new AbortController,P=await this.fetchWithTimeout(_,h,T,k).catch(sm),$=Date.now();if(P instanceof globalThis.Error){const Z=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new om;const le=im(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return Vn(this).info(`[${S}] connection ${le?"timed out":"failed"} - ${Z}`),Vn(this).debug(`[${S}] connection ${le?"timed out":"failed"} (${Z})`,Ir({retryOfRequestLogID:i,url:_,durationMs:$-V,message:P.message})),this.retryRequest(f,t,i??S);throw Vn(this).info(`[${S}] connection ${le?"timed out":"failed"} - error; no more retries left`),Vn(this).debug(`[${S}] connection ${le?"timed out":"failed"} (error; no more retries left)`,Ir({retryOfRequestLogID:i,url:_,durationMs:$-V,message:P.message})),le?new oA:new uf({cause:P})}const B=`[${S}${w}] ${h.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${$-V}ms`;if(!P.ok){const Z=await this.shouldRetry(P);if(t&&Z){const R=`retrying, ${t} attempts remaining`;return await vP(P.body),Vn(this).info(`${B} - ${R}`),Vn(this).debug(`[${S}] response error (${R})`,Ir({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-V})),this.retryRequest(f,t,i??S,P.headers)}const le=Z?"error; no more retries left":"error; not retryable";Vn(this).info(`${B} - ${le}`);const de=await P.text().catch(R=>sm(R).message),pe=cP(de),N=pe?void 0:de;throw Vn(this).debug(`[${S}] response error (${le})`,Ir({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:N,durationMs:Date.now()-V})),this.makeStatusError(P.status,pe,N,P.headers)}return Vn(this).info(B),Vn(this).debug(`[${S}] response start`,Ir({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-V})),{response:P,options:f,controller:k,requestLogID:S,retryOfRequestLogID:i,startTime:V}}async fetchWithTimeout(e,t,i,r){const l=t||{},{signal:u,method:f}=l,g=Vd(l,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);f&&(T.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var l;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await dP(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,l;const u=Object.assign({},e),{method:f,path:g,query:h,defaultBaseURL:_}=u,T=this.buildURL(g,h,_);"timeout"in u&&uP("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:u}),V=await this.buildHeaders({options:e,method:f,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:V},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=au([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),mP()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=au([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:yP(e)}:this.encoder({body:e,headers:i})}}df.DEFAULT_TIMEOUT=6e4;class ln extends df{constructor(){super(...arguments),this.interactions=new EA(this)}}AA=ln;ln.GeminiNextGenAPIClient=AA;ln.GeminiNextGenAPIClientError=Ni;ln.APIError=Un;ln.APIConnectionError=uf;ln.APIConnectionTimeoutError=oA;ln.APIUserAbortError=om;ln.NotFoundError=uA;ln.ConflictError=cA;ln.RateLimitError=fA;ln.BadRequestError=rA;ln.AuthenticationError=aA;ln.InternalServerError=hA;ln.PermissionDeniedError=lA;ln.UnprocessableEntityError=dA;ln.toFile=CP;ln.Interactions=EA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function OP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function HP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function BP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function FP(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","batchSize"],f);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function GP(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec"],QT(w))}else if(r==="PREFERENCE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec"],QT(w))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const u=d(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=d(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let _=d(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(_==="PREFERENCE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["beta"]);return e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function qP(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&ek(l);const u=d(n,["config"]);return u!=null&&FP(u,t),t}function zP(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&tk(l,t,e);const u=d(n,["config"]);return u!=null&&GP(u,t,e),t}function KP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function $P(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function YP(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function JP(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function QP(n,e){const t={},i=d(n,["config"]);return i!=null&&YP(i,t),t}function XP(n,e){const t={},i=d(n,["config"]);return i!=null&&JP(i,t),t}function WP(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>CA(f))),p(t,["tuningJobs"],u)}return t}function jP(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>lm(f))),p(t,["tuningJobs"],u)}return t}function ZP(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["model"],i);const r=d(n,["name"]);return r!=null&&p(t,["endpoint"],r),t}function ek(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(t,["examples","examples"],r)}return t}function tk(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function CA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],BS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["tuningTask","completeTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["description"]);_!=null&&p(t,["description"],_);const T=d(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const S=d(n,["_self"]);return S!=null&&p(t,["tunedModel"],ZP(S)),t}function lm(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],BS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["error"]);_!=null&&p(t,["error"],_);const T=d(n,["description"]);T!=null&&p(t,["description"],T);const S=d(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const w=d(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const V=d(n,["preTunedModel"]);V!=null&&p(t,["preTunedModel"],V);const k=d(n,["supervisedTuningSpec"]);k!=null&&p(t,["supervisedTuningSpec"],k);const P=d(n,["preferenceOptimizationSpec"]);P!=null&&p(t,["preferenceOptimizationSpec"],P);const $=d(n,["tuningDataStats"]);$!=null&&p(t,["tuningDataStats"],$);const B=d(n,["encryptionSpec"]);B!=null&&p(t,["encryptionSpec"],B);const Z=d(n,["partnerModelTuningSpec"]);Z!=null&&p(t,["partnerModelTuningSpec"],Z);const le=d(n,["customBaseModel"]);le!=null&&p(t,["customBaseModel"],le);const de=d(n,["experiment"]);de!=null&&p(t,["experiment"],de);const pe=d(n,["labels"]);pe!=null&&p(t,["labels"],pe);const N=d(n,["outputUri"]);N!=null&&p(t,["outputUri"],N);const M=d(n,["pipelineJob"]);M!=null&&p(t,["pipelineJob"],M);const R=d(n,["serviceAccount"]);R!=null&&p(t,["serviceAccount"],R);const H=d(n,["tunedModelDisplayName"]);H!=null&&p(t,["tunedModelDisplayName"],H);const O=d(n,["veoTuningSpec"]);return O!=null&&p(t,["veoTuningSpec"],O),t}function nk(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(n,["done"]);u!=null&&p(t,["done"],u);const f=d(n,["error"]);return f!=null&&p(t,["error"],f),t}function QT(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const r=d(n,["vertexDatasetResource"]);return r!=null&&p(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ik extends Zs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Lr(Js.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Xp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=$P(e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>lm(_))}else{const h=KP(e);return f=ge("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>CA(_))}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=XP(e);return f=ge("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=jP(_),S=new ET;return Object.assign(S,T),S})}else{const h=QP(e);return f=ge("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=WP(_),S=new ET;return Object.assign(S,T),S})}}async cancel(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=OP(e);return f=ge("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=BP(_),S=new ST;return Object.assign(S,T),S})}else{const h=LP(e);return f=ge("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=HP(_),S=new ST;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=zP(e,e);return l=ge("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>lm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qP(e);return l=ge("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>nk(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sk{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ok=1024*1024*8,rk=3,ak=1e3,lk=2,Ld="x-goog-upload-status";async function uk(n,e,t){var i;const r=await bA(n,e,t),l=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ld])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function ck(n,e,t){var i;const r=await bA(n,e,t),l=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ld])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=kS(l),f=new Fm;return Object.assign(f,u),f}async function bA(n,e,t){var i,r;let l=0,u=0,f=new Wp(new Response),g="upload";for(l=n.size;u<l;){const h=Math.min(ok,l-u),_=n.slice(u,u+h);u+h>=l&&(g+=", finalize");let T=0,S=ak;for(;T<rk&&(f=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Ld]));)T++,await fk(S),S=S*lk;if(u+=h,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[Ld])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function dk(n){return{size:n.size,type:n.type}}function fk(n){return new Promise(e=>setTimeout(e,n))}class hk{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uk(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ck(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dk(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pk{create(e,t,i){return new mk(e,t,i)}}class mk{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XT="x-goog-api-key";class gk{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(XT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(XT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yk="gl-node/";class vk{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new ln({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=fR(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new gk(this.apiKey);this.apiClient=new d2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:yk+"web",uploader:new hk,downloader:new sk}),this.models=new N2(this.apiClient),this.live=new C2(this.apiClient,r,new pk),this.batches=new F1(this.apiClient),this.chats=new SN(this.models,this.apiClient),this.caches=new _N(this.apiClient),this.files=new DN(this.apiClient),this.operations=new M2(this.apiClient),this.authTokens=new Y2(this.apiClient),this.tunings=new ik(this.apiClient),this.fileSearchStores=new tP(this.apiClient)}}const Qm=n=>new vk({apiKey:n}),_k=async(n,e)=>{if(!e)return"Error: API Key is missing.";const t=Qm(e);try{return(await t.models.generateContent({model:"gemini-3-flash-preview",contents:JSON.stringify(n),config:{systemInstruction:Lm,temperature:.3}})).text||"Error: No response generated."}catch(i){return console.error("Error generating note:",i),"Error generating note. Please check the console for details."}},Tk=async(n,e,t,i)=>{if(!i)return e;const r=Qm(i),l=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT MEDICAL NOTE DRAFT:
    """
    ${e}
    """
    
    USER REFINEMENT INSTRUCTION:
    "${t}"
    
    CRITICAL RULES:
    1. PRIORITY: Adhere to user instructions while maintaining the facts in the ORIGINAL DATA SOURCE.
    2. CONSISTENCY: Maintain all formatting rules (Vitals order, "denied" list, etc.) from the system instructions.
    3. OUTPUT: Provide ONLY the full updated medical note. No conversational filler.
  `;try{return(await r.models.generateContent({model:"gemini-3-flash-preview",contents:l,config:{systemInstruction:Lm,temperature:.4}})).text||e}catch(u){return console.error("Error refining full note:",u),e}},Ek=async(n,e,t,i,r)=>{var f;if(!r)return t;const l=Qm(r),u=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT FULL NOTE:
    """
    ${e}
    """
    
    The user wants to rewrite the following SPECIFIC SEGMENT:
    "--- ${t} ---"
    
    USER INSTRUCTION FOR THIS SEGMENT:
    "${i}"
    
    CRITICAL RULES:
    1. PRIORITY: User instructions are the highest priority. If the user asks to change the format or tone for this segment, follow it exactly.
    2. MEDICAL STANDARDS: Unless the user explicitly asks to break medical conventions, maintain the standards defined in the original system instructions (e.g., Vitals order, forbidden abbreviations, academic tone).
    3. SCOPE: ONLY rewrite the selected segment. Do not change parts of the note outside of this segment.
    4. OUTPUT: Provide ONLY the new rewritten text for that segment. Do not include any explanations or conversational filler.
  `;try{return((f=(await l.models.generateContent({model:"gemini-3-flash-preview",contents:u,config:{systemInstruction:Lm,temperature:.4}})).text)==null?void 0:f.trim())||t}catch(g){return console.error("Error refining segment:",g),t}},Sk=()=>{};var WT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Ak=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[i++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],u=n[t++],f=n[t++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},IA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const l=n[r],u=r+1<n.length,f=u?n[r+1]:0,g=r+2<n.length,h=g?n[r+2]:0,_=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|h>>6,w=h&63;g||(w=64,u||(S=64)),i.push(t[_],t[T],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ak(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||f==null||h==null||T==null)throw new Ck;const S=l<<2|f>>4;if(i.push(S),h!==64){const w=f<<4&240|h>>2;if(i.push(w),T!==64){const V=h<<6&192|T;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ck extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bk=function(n){const e=wA(n);return IA.encodeByteArray(e,!0)},Od=function(n){return bk(n).replace(/\./g,"")},xA=function(n){try{return IA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=()=>wk().__FIREBASE_DEFAULTS__,xk=()=>{if(typeof process>"u"||typeof WT>"u")return;const n=WT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Rk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&xA(n[1]);return e&&JSON.parse(e)},ff=()=>{try{return Sk()||Ik()||xk()||Rk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RA=n=>{var e,t;return(t=(e=ff())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Nk=n=>{const e=RA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},NA=()=>{var n;return(n=ff())==null?void 0:n.config},MA=n=>{var e;return(e=ff())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Od(JSON.stringify(t)),Od(JSON.stringify(u)),""].join(".")}const mu={};function Pk(){const n={prod:[],emulator:[]};for(const e of Object.keys(mu))mu[e]?n.emulator.push(e):n.prod.push(e);return n}function kk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let jT=!1;function PA(n,e){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||mu[n]===e||mu[n]||jT)return;mu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=Pk().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{jT=!0,u()},S}function _(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=kk(i),w=t("text"),V=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),P=document.getElementById(k)||document.createElement("a"),$=t("preprendIcon"),B=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;f(Z),_(P,k);const le=h();g(B,$),Z.append(B,V,P,le),document.body.appendChild(Z)}l?(V.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function Uk(){var e;const n=(e=ff())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ok(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Hk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bk(){const n=In();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Fk(){return!Uk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gk(){try{return typeof indexedDB=="object"}catch{return!1}}function qk(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="FirebaseError";class to extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=zk,Object.setPrototypeOf(this,to.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Du.prototype.create)}}class Du{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?Kk(l,i):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new to(r,f,i)}}function Kk(n,e){return n.replace($k,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const $k=/\{\$([^}]+)}/g;function Yk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $o(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const l=n[r],u=e[r];if(ZT(l)&&ZT(u)){if(!$o(l,u))return!1}else if(l!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function ZT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Jk(n,e){const t=new Qk(n,e);return t.subscribe.bind(t)}class Qk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Xk(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Up),r.error===void 0&&(r.error=Up),r.complete===void 0&&(r.complete=Up);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Up(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class Pr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Mk;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Zk(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});i.resolve(l)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const l=this.instances.get(i);return l&&e(l,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:jk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jk(n){return n===xr?void 0:n}function Zk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Wk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xe||(Xe={}));const tV={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},nV=Xe.INFO,iV={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},sV=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=iV[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=nV,this._logHandler=sV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const oV=(n,e)=>e.some(t=>n instanceof t);let eE,tE;function rV(){return eE||(eE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aV(){return tE||(tE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kA=new WeakMap,um=new WeakMap,VA=new WeakMap,Lp=new WeakMap,Wm=new WeakMap;function lV(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Fo(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&kA.set(t,n)}).catch(()=>{}),Wm.set(e,n),e}function uV(n){if(um.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});um.set(n,e)}let cm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return um.get(n);if(e==="objectStoreNames")return n.objectStoreNames||VA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cV(n){cm=n(cm)}function dV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Op(this),e,...t);return VA.set(i,e.sort?e.sort():[e]),Fo(i)}:aV().includes(n)?function(...e){return n.apply(Op(this),e),Fo(kA.get(this))}:function(...e){return Fo(n.apply(Op(this),e))}}function fV(n){return typeof n=="function"?dV(n):(n instanceof IDBTransaction&&uV(n),oV(n,rV())?new Proxy(n,cm):n)}function Fo(n){if(n instanceof IDBRequest)return lV(n);if(Lp.has(n))return Lp.get(n);const e=fV(n);return e!==n&&(Lp.set(n,e),Wm.set(e,n)),e}const Op=n=>Wm.get(n);function hV(n,e,{blocked:t,upgrade:i,blocking:r,terminated:l}={}){const u=indexedDB.open(n,e),f=Fo(u);return i&&u.addEventListener("upgradeneeded",g=>{i(Fo(u.result),g.oldVersion,g.newVersion,Fo(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const pV=["get","getKey","getAll","getAllKeys","count"],mV=["put","add","delete","clear"],Hp=new Map;function nE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Hp.get(e))return Hp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=mV.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||pV.includes(t)))return;const l=async function(u,...f){const g=this.transaction(u,r?"readwrite":"readonly");let h=g.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),r&&g.done]))[0]};return Hp.set(e,l),l}cV(n=>({...n,get:(e,t,i)=>nE(e,t)||n.get(e,t,i),has:(e,t)=>!!nE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yV(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function yV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dm="@firebase/app",iE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Xm("@firebase/app"),vV="@firebase/app-compat",_V="@firebase/analytics-compat",TV="@firebase/analytics",EV="@firebase/app-check-compat",SV="@firebase/app-check",AV="@firebase/auth",CV="@firebase/auth-compat",bV="@firebase/database",wV="@firebase/data-connect",IV="@firebase/database-compat",xV="@firebase/functions",RV="@firebase/functions-compat",NV="@firebase/installations",MV="@firebase/installations-compat",DV="@firebase/messaging",PV="@firebase/messaging-compat",kV="@firebase/performance",VV="@firebase/performance-compat",UV="@firebase/remote-config",LV="@firebase/remote-config-compat",OV="@firebase/storage",HV="@firebase/storage-compat",BV="@firebase/firestore",FV="@firebase/ai",GV="@firebase/firestore-compat",qV="firebase",zV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="[DEFAULT]",KV={[dm]:"fire-core",[vV]:"fire-core-compat",[TV]:"fire-analytics",[_V]:"fire-analytics-compat",[SV]:"fire-app-check",[EV]:"fire-app-check-compat",[AV]:"fire-auth",[CV]:"fire-auth-compat",[bV]:"fire-rtdb",[wV]:"fire-data-connect",[IV]:"fire-rtdb-compat",[xV]:"fire-fn",[RV]:"fire-fn-compat",[NV]:"fire-iid",[MV]:"fire-iid-compat",[DV]:"fire-fcm",[PV]:"fire-fcm-compat",[kV]:"fire-perf",[VV]:"fire-perf-compat",[UV]:"fire-rc",[LV]:"fire-rc-compat",[OV]:"fire-gcs",[HV]:"fire-gcs-compat",[BV]:"fire-fst",[GV]:"fire-fst-compat",[FV]:"fire-vertex","fire-js":"fire-js",[qV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new Map,$V=new Map,hm=new Map;function sE(n,e){try{n.container.addComponent(e)}catch(t){Qs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fa(n){const e=n.name;if(hm.has(e))return Qs.debug(`There were multiple attempts to register component ${e}.`),!1;hm.set(e,n);for(const t of Hd.values())sE(t,n);for(const t of $V.values())sE(t,n);return!0}function jm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ki(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Go=new Du("app","Firebase",YV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Go.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=zV;function UA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:fm,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Go.create("bad-app-name",{appName:String(r)});if(t||(t=NA()),!t)throw Go.create("no-options");const l=Hd.get(r);if(l){if($o(t,l.options)&&$o(i,l.config))return l;throw Go.create("duplicate-app",{appName:r})}const u=new eV(r);for(const g of hm.values())u.addComponent(g);const f=new JV(t,i,u);return Hd.set(r,f),f}function LA(n=fm){const e=Hd.get(n);if(!e&&n===fm&&NA())return UA();if(!e)throw Go.create("no-app",{appName:n});return e}function qo(n,e,t){let i=KV[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qs.warn(u.join(" "));return}Fa(new Pr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="firebase-heartbeat-database",XV=1,Cu="firebase-heartbeat-store";let Bp=null;function OA(){return Bp||(Bp=hV(QV,XV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Go.create("idb-open",{originalErrorMessage:n.message})})),Bp}async function WV(n){try{const t=(await OA()).transaction(Cu),i=await t.objectStore(Cu).get(HA(n));return await t.done,i}catch(e){if(e instanceof to)Qs.warn(e.message);else{const t=Go.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qs.warn(t.message)}}}async function oE(n,e){try{const i=(await OA()).transaction(Cu,"readwrite");await i.objectStore(Cu).put(e,HA(n)),await i.done}catch(t){if(t instanceof to)Qs.warn(t.message);else{const i=Go.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Qs.warn(i.message)}}}function HA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=1024,ZV=30;class eU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nU(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=rE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>ZV){const u=iU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Qs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rE(),{heartbeatsToSend:i,unsentEntries:r}=tU(this._heartbeatsCache.heartbeats),l=Od(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Qs.warn(t),""}}}function rE(){return new Date().toISOString().substring(0,10)}function tU(n,e=jV){const t=[];let i=n.slice();for(const r of n){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),aE(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),aE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class nU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gk()?qk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return oE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return oE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function aE(n){return Od(JSON.stringify({version:2,heartbeats:n})).length}function iU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(n){Fa(new Pr("platform-logger",e=>new gV(e),"PRIVATE")),Fa(new Pr("heartbeat",e=>new eU(e),"PRIVATE")),qo(dm,iE,n),qo(dm,iE,"esm2020"),qo("fire-js","")}sU("");function BA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oU=BA,FA=new Du("auth","Firebase",BA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new Xm("@firebase/auth");function rU(n,...e){Bd.logLevel<=Xe.WARN&&Bd.warn(`Auth (${tl}): ${n}`,...e)}function Sd(n,...e){Bd.logLevel<=Xe.ERROR&&Bd.error(`Auth (${tl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(n,...e){throw eg(n,...e)}function Qi(n,...e){return eg(n,...e)}function Zm(n,e,t){const i={...oU(),[e]:t};return new Du("auth","Firebase",i).create(e,{appName:n.name})}function Mr(n){return Zm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aU(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ss(n,"argument-error"),Zm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function eg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return FA.create(n,...e)}function Pe(n,e,...t){if(!n)throw eg(e,...t)}function $s(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sd(e),new Error(e)}function Xs(n,e){n||$s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function lU(){return lE()==="http:"||lE()==="https:"}function lE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lU()||Ok()||"connection"in navigator)?navigator.onLine:!0}function cU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xs(t>e,"Short delay should be less than long delay!"),this.isMobile=Vk()||Hk()}get(){return uU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(n,e){Xs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hU=new ku(3e4,6e4);function ng(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function nl(n,e,t,i,r={}){return qA(n,r,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=Pu({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:g,...l};return Lk()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&el(n.emulatorConfig.host)&&(h.credentials="include"),GA.fetch()(await zA(n,n.config.apiHost,t,f),h)})}async function qA(n,e,t){n._canInitEmulator=!1;const i={...dU,...e};try{const r=new mU(n),l=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw hd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[g,h]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw hd(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw hd(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw hd(n,"user-disabled",u);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Zm(n,_,h);Ss(n,_)}}catch(r){if(r instanceof to)throw r;Ss(n,"network-request-failed",{message:String(r)})}}async function pU(n,e,t,i,r={}){const l=await nl(n,e,t,i,r);return"mfaPendingCredential"in l&&Ss(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function zA(n,e,t,i){const r=`${e}${t}?${i}`,l=n,u=l.config.emulator?tg(n.config,r):`${n.config.apiScheme}://${r}`;return fU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class mU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Qi(this.auth,"network-request-failed")),hU.get())})}}function hd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Qi(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gU(n,e){return nl(n,"POST","/v1/accounts:delete",e)}async function Fd(n,e){return nl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yU(n,e=!1){const t=xn(n),i=await t.getIdToken(e),r=ig(i);Pe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const l=typeof r.firebase=="object"?r.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:r,token:i,authTime:gu(Fp(r.auth_time)),issuedAtTime:gu(Fp(r.iat)),expirationTime:gu(Fp(r.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Fp(n){return Number(n)*1e3}function ig(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Sd("JWT malformed, contained fewer than 3 sections"),null;try{const r=xA(t);return r?JSON.parse(r):(Sd("Failed to decode base64 JWT payload"),null)}catch(r){return Sd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function uE(n){const e=ig(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof to&&vU(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function vU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gu(this.lastLoginAt),this.creationTime=gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gd(n){var T;const e=n.auth,t=await n.getIdToken(),i=await bu(n,Fd(e,{idToken:t}));Pe(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const l=(T=r.providerUserInfo)!=null&&T.length?KA(r.providerUserInfo):[],u=EU(n.providerData,l),f=n.isAnonymous,g=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),h=f?g:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new mm(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function TU(n){const e=xn(n);await Gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EU(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function KA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(n,e){const t=await qA(n,{},async()=>{const i=Pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:l}=n.config,u=await zA(n,r,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return n.emulatorConfig&&el(n.emulatorConfig.host)&&(g.credentials="include"),GA.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AU(n,e){return nl(n,"POST","/v2/accounts:revokeToken",ng(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=uE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:l}=await SU(e,t);this.updateTokensAndExpiration(i,r,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:l}=t,u=new Ua;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(Pe(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),l&&(Pe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return $s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $i{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new _U(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new mm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await bu(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yU(this,e)}reload(){return TU(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $i({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Gd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ki(this.auth.app))return Promise.reject(Mr(this.auth));const e=await this.getIdToken();return await bu(this,gU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:w,providerData:V,stsTokenManager:k}=t;Pe(T&&k,e,"internal-error");const P=Ua.fromJSON(this.name,k);Pe(typeof T=="string",e,"internal-error"),Vo(i,e.name),Vo(r,e.name),Pe(typeof S=="boolean",e,"internal-error"),Pe(typeof w=="boolean",e,"internal-error"),Vo(l,e.name),Vo(u,e.name),Vo(f,e.name),Vo(g,e.name),Vo(h,e.name),Vo(_,e.name);const $=new $i({uid:T,auth:e,email:r,emailVerified:S,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:P,createdAt:h,lastLoginAt:_});return V&&Array.isArray(V)&&($.providerData=V.map(B=>({...B}))),g&&($._redirectEventId=g),$}static async _fromIdTokenResponse(e,t,i=!1){const r=new Ua;r.updateFromServerResponse(t);const l=new $i({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Gd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Pe(r.localId!==void 0,"internal-error");const l=r.providerUserInfo!==void 0?KA(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(l!=null&&l.length),f=new Ua;f.updateFromIdToken(i);const g=new $i({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new mm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,h),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Map;function Ys(n){Xs(n instanceof Function,"Expected a class definition");let e=cE.get(n);return e?(Xs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$A.type="NONE";const dE=$A;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(n,e,t){return`firebase:${n}:${e}:${t}`}class La{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:l}=this.auth;this.fullUserKey=Ad(this.userKey,r.apiKey,l),this.fullPersistenceKey=Ad("persistence",r.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Fd(this.auth,{idToken:e}).catch(()=>{});return t?$i._fromGetAccountInfoResponse(this.auth,t,e):null}return $i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new La(Ys(dE),e,i);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let l=r[0]||Ys(dE);const u=Ad(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const _=await h._get(u);if(_){let T;if(typeof _=="string"){const S=await Fd(e,{idToken:_}).catch(()=>{});if(!S)break;T=await $i._fromGetAccountInfoResponse(e,S,_)}else T=$i._fromJSON(e,_);h!==l&&(f=T),l=h;break}}catch{}const g=r.filter(h=>h._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new La(l,e,i):(l=g[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==l)try{await h._remove(u)}catch{}})),new La(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jA(e))return"Blackberry";if(ZA(e))return"Webos";if(JA(e))return"Safari";if((e.includes("chrome/")||QA(e))&&!e.includes("edge/"))return"Chrome";if(WA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function YA(n=In()){return/firefox\//i.test(n)}function JA(n=In()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QA(n=In()){return/crios\//i.test(n)}function XA(n=In()){return/iemobile/i.test(n)}function WA(n=In()){return/android/i.test(n)}function jA(n=In()){return/blackberry/i.test(n)}function ZA(n=In()){return/webos/i.test(n)}function sg(n=In()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function CU(n=In()){var e;return sg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function bU(){return Bk()&&document.documentMode===10}function eC(n=In()){return sg(n)||WA(n)||ZA(n)||jA(n)||/windows phone/i.test(n)||XA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(n,e=[]){let t;switch(n){case"Browser":t=fE(In());break;case"Worker":t=`${fE(In())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const g=e(l);u(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(n,e={}){return nl(n,"GET","/v2/passwordPolicy",ng(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=6;class RU{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hE(this),this.idTokenSubscription=new hE(this),this.beforeStateQueue=new wU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ys(t)),this._initializationPromise=this.queue(async()=>{var i,r,l;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Fd(this,{idToken:e}),i=await $i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ki(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===f)&&(g!=null&&g.user)&&(i=g.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ki(this.app))return Promise.reject(Mr(this));const t=e?xn(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ki(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ki(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IU(this),t=new RU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Du("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await AU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ys(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[Ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,r);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Ki(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&rU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hf(n){return xn(n)}class hE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jk(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MU(n){og=n}function DU(n){return og.loadJS(n)}function PU(){return og.gapiScript}function kU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(n,e){const t=jm(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),l=t.getOptions();if($o(l,e??{}))return r;Ss(r,"already-initialized")}return t.initialize({options:e})}function UU(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ys);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function LU(n,e,t){const i=hf(n);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,l=nC(e),{host:u,port:f}=OU(e),g=f===null?"":`:${f}`,h={url:`${l}//${u}${g}/`},_=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe($o(h,i.config.emulator)&&$o(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,el(u)?(DA(`${l}//${u}${g}`),PA("Auth",!0)):HU()}function nC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function OU(n){const e=nC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const l=r[1];return{host:l,port:pE(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:pE(u)}}}function pE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function HU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $s("not implemented")}_getIdTokenResponse(e){return $s("not implemented")}_linkToIdToken(e,t){return $s("not implemented")}_getReauthenticationResolver(e){return $s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(n,e){return pU(n,"POST","/v1/accounts:signInWithIdp",ng(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU="http://localhost";class kr extends iC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new kr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ss("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...l}=t;if(!i||!r)return null;const u=new kr(i,r);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Oa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Oa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oa(e,t)}buildRequest(){const e={requestUri:BU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends rg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends Vu{constructor(){super("facebook.com")}static credential(e){return kr._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Uo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return kr._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ks.credential(t,i)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Vu{constructor(){super("github.com")}static credential(e){return kr._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lo.credential(e.oauthAccessToken)}catch{return null}}}Lo.GITHUB_SIGN_IN_METHOD="github.com";Lo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Vu{constructor(){super("twitter.com")}static credential(e,t){return kr._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Oo.credential(t,i)}catch{return null}}}Oo.TWITTER_SIGN_IN_METHOD="twitter.com";Oo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const l=await $i._fromIdTokenResponse(e,i,r),u=mE(i);return new Ga({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=mE(i);return new Ga({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function mE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends to{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,qd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new qd(e,t,i,r)}}function sC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?qd._fromErrorAndOperation(n,l,e,i):l})}async function FU(n,e,t=!1){const i=await bu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ga._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(n,e,t=!1){const{auth:i}=n;if(Ki(i.app))return Promise.reject(Mr(i));const r="reauthenticate";try{const l=await bu(n,sC(i,r,e,n),t);Pe(l.idToken,i,"internal-error");const u=ig(l.idToken);Pe(u,i,"internal-error");const{sub:f}=u;return Pe(n.uid===f,i,"user-mismatch"),Ga._forOperation(n,r,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ss(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(n,e,t=!1){if(Ki(n.app))return Promise.reject(Mr(n));const i="signIn",r=await sC(n,i,e),l=await Ga._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(l.user),l}function zU(n,e,t,i){return xn(n).onIdTokenChanged(e,t,i)}function KU(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function $U(n,e,t,i){return xn(n).onAuthStateChanged(e,t,i)}function YU(n){return xn(n).signOut()}const zd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zd,"1"),this.storage.removeItem(zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=1e3,QU=10;class rC extends oC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);bU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,QU):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},JU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rC.type="LOCAL";const XU=rC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends oC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aC.type="SESSION";const lC=aC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new pf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:l}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const f=Array.from(u).map(async h=>h(t.origin,l)),g=await WU(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let l,u;return new Promise((f,g)=>{const h=ag("",20);r.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return window}function ZU(n){ms().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){return typeof ms().WorkerGlobalScope<"u"&&typeof ms().importScripts=="function"}async function eL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function nL(){return uC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firebaseLocalStorageDb",iL=1,Kd="firebaseLocalStorage",dC="fbase_key";class Uu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mf(n,e){return n.transaction([Kd],e?"readwrite":"readonly").objectStore(Kd)}function sL(){const n=indexedDB.deleteDatabase(cC);return new Uu(n).toPromise()}function gm(){const n=indexedDB.open(cC,iL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Kd,{keyPath:dC})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Kd)?e(i):(i.close(),await sL(),e(await gm()))})})}async function gE(n,e,t){const i=mf(n,!0).put({[dC]:e,value:t});return new Uu(i).toPromise()}async function oL(n,e){const t=mf(n,!1).get(e),i=await new Uu(t).toPromise();return i===void 0?null:i.value}function yE(n,e){const t=mf(n,!0).delete(e);return new Uu(t).toPromise()}const rL=800,aL=3;class fC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>aL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pf._getInstance(nL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await eL(),!this.activeServiceWorker)return;this.sender=new jU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gm();return await gE(e,zd,"1"),await yE(e,zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>gE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>oL(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const l=mf(r,!1).getAll();return new Uu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:l}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(l)&&(this.notifyListeners(r,l),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fC.type="LOCAL";const lL=fC;new ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n,e){return e?Ys(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg extends iC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uL(n){return qU(n.auth,new lg(n),n.bypassAuthState)}function cL(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),GU(t,new lg(n),n.bypassAuthState)}async function dL(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),FU(t,new lg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t,i,r,l=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uL;case"linkViaPopup":case"linkViaRedirect":return dL;case"reauthViaPopup":case"reauthViaRedirect":return cL;default:Ss(this.auth,"internal-error")}}resolve(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=new ku(2e3,1e4);async function hL(n,e,t){if(Ki(n.app))return Promise.reject(Qi(n,"operation-not-supported-in-this-environment"));const i=hf(n);aU(n,e,rg);const r=hC(i,t);return new Rr(i,"signInViaPopup",e,r).executeNotNull()}class Rr extends pC{constructor(e,t,i,r,l){super(e,t,r,l),this.provider=i,this.authWindow=null,this.pollId=null,Rr.currentPopupAction&&Rr.currentPopupAction.cancel(),Rr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Xs(this.filter.length===1,"Popup operations only handle one event");const e=ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fL.get())};e()}}Rr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="pendingRedirect",Cd=new Map;class mL extends pC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Cd.get(this.auth._key());if(!e){try{const i=await gL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Cd.set(this.auth._key(),e)}return this.bypassAuthState||Cd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gL(n,e){const t=_L(e),i=vL(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function yL(n,e){Cd.set(n._key(),e)}function vL(n){return Ys(n._redirectPersistence)}function _L(n){return Ad(pL,n.config.apiKey,n.name)}async function TL(n,e,t=!1){if(Ki(n.app))return Promise.reject(Mr(n));const i=hf(n),r=hC(i,e),u=await new mL(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=600*1e3;class SL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!mC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EL&&this.cachedEventUids.clear(),this.cachedEventUids.has(vE(e))}saveEventToCache(e){this.cachedEventUids.add(vE(e)),this.lastProcessedEventTime=Date.now()}}function vE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CL(n,e={}){return nl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wL=/^https?/;async function IL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await CL(n);for(const t of e)try{if(xL(t))return}catch{}Ss(n,"unauthorized-domain")}function xL(n){const e=pm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!wL.test(t))return!1;if(bL.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new ku(3e4,6e4);function _E(){const n=ms().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NL(n){return new Promise((e,t)=>{var r,l,u;function i(){_E(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_E(),t(Qi(n,"network-request-failed"))},timeout:RL.get()})}if((l=(r=ms().gapi)==null?void 0:r.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=ms().gapi)!=null&&u.load)i();else{const f=kU("iframefcb");return ms()[f]=()=>{gapi.load?i():t(Qi(n,"network-request-failed"))},DU(`${PU()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw bd=null,e})}let bd=null;function ML(n){return bd=bd||NL(n),bd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=new ku(5e3,15e3),PL="__/auth/iframe",kL="emulator/auth/iframe",VL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LL(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?tg(e,kL):`https://${n.config.authDomain}/${PL}`,i={apiKey:e.apiKey,appName:n.name,v:tl},r=UL.get(n.config.apiHost);r&&(i.eid=r);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Pu(i).slice(1)}`}async function OL(n){const e=await ML(n),t=ms().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:LL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VL,dontclear:!0},i=>new Promise(async(r,l)=>{await i.restyle({setHideOnLeave:!1});const u=Qi(n,"network-request-failed"),f=ms().setTimeout(()=>{l(u)},DL.get());function g(){ms().clearTimeout(f),r(i)}i.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BL=500,FL=600,GL="_blank",qL="http://localhost";class TE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zL(n,e,t,i=BL,r=FL){const l=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...HL,width:i.toString(),height:r.toString(),top:l,left:u},h=In().toLowerCase();t&&(f=QA(h)?GL:t),YA(h)&&(e=e||qL,g.scrollbars="yes");const _=Object.entries(g).reduce((S,[w,V])=>`${S}${w}=${V},`,"");if(CU(h)&&f!=="_self")return KL(e||"",f),new TE(null);const T=window.open(e||"",f,_);Pe(T,n,"popup-blocked");try{T.focus()}catch{}return new TE(T)}function KL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L="__/auth/handler",YL="emulator/auth/handler",JL=encodeURIComponent("fac");async function EE(n,e,t,i,r,l){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:tl,eventId:r};if(e instanceof rg){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Yk(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))u[_]=T}if(e instanceof Vu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const g=await n._getAppCheckToken(),h=g?`#${JL}=${encodeURIComponent(g)}`:"";return`${QL(n)}?${Pu(f).slice(1)}${h}`}function QL({config:n}){return n.emulator?tg(n,YL):`https://${n.authDomain}/${$L}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="webStorageSupport";class XL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lC,this._completeRedirectFn=TL,this._overrideRedirectResult=yL}async _openPopup(e,t,i,r){var u;Xs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await EE(e,t,i,pm(),r);return zL(e,l,ag())}async _openRedirect(e,t,i,r){await this._originValidation(e);const l=await EE(e,t,i,pm(),r);return ZU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:l}=this.eventManagers[t];return r?Promise.resolve(r):(Xs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await OL(e),i=new SL(e);return t.register("authEvent",r=>(Pe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gp,{type:Gp},r=>{var u;const l=(u=r==null?void 0:r[0])==null?void 0:u[Gp];l!==void 0&&t(!!l),Ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eC()||JA()||sg()}}const WL=XL;var SE="@firebase/auth",AE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e4(n){Fa(new Pr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Pe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tC(n)},h=new NU(i,r,l,g);return UU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Fa(new Pr("auth-internal",e=>{const t=hf(e.getProvider("auth").getImmediate());return(i=>new jL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qo(SE,AE,ZL(n)),qo(SE,AE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=300,n4=MA("authIdTokenMaxAge")||t4;let CE=null;const i4=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>n4)return;const r=t==null?void 0:t.token;CE!==r&&(CE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function s4(n=LA()){const e=jm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=VU(n,{popupRedirectResolver:WL,persistence:[lL,XU,lC]}),i=MA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=i4(l.toString());KU(t,u,()=>u(t.currentUser)),zU(t,f=>u(f))}}const r=RA("auth");return r&&LU(t,`http://${r}`),t}function o4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}MU({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const l=Qi("internal-error");l.customData=r,t(l)},i.type="text/javascript",i.charset="UTF-8",o4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e4("Browser");var bE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zo,gC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,M){function R(){}R.prototype=M.prototype,N.F=M.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(H,O,q){for(var D=Array(arguments.length-2),He=2;He<arguments.length;He++)D[He-2]=arguments[He];return M.prototype[O].apply(H,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,M,R){R||(R=0);const H=Array(16);if(typeof M=="string")for(var O=0;O<16;++O)H[O]=M.charCodeAt(R++)|M.charCodeAt(R++)<<8|M.charCodeAt(R++)<<16|M.charCodeAt(R++)<<24;else for(O=0;O<16;++O)H[O]=M[R++]|M[R++]<<8|M[R++]<<16|M[R++]<<24;M=N.g[0],R=N.g[1],O=N.g[2];let q=N.g[3],D;D=M+(q^R&(O^q))+H[0]+3614090360&4294967295,M=R+(D<<7&4294967295|D>>>25),D=q+(O^M&(R^O))+H[1]+3905402710&4294967295,q=M+(D<<12&4294967295|D>>>20),D=O+(R^q&(M^R))+H[2]+606105819&4294967295,O=q+(D<<17&4294967295|D>>>15),D=R+(M^O&(q^M))+H[3]+3250441966&4294967295,R=O+(D<<22&4294967295|D>>>10),D=M+(q^R&(O^q))+H[4]+4118548399&4294967295,M=R+(D<<7&4294967295|D>>>25),D=q+(O^M&(R^O))+H[5]+1200080426&4294967295,q=M+(D<<12&4294967295|D>>>20),D=O+(R^q&(M^R))+H[6]+2821735955&4294967295,O=q+(D<<17&4294967295|D>>>15),D=R+(M^O&(q^M))+H[7]+4249261313&4294967295,R=O+(D<<22&4294967295|D>>>10),D=M+(q^R&(O^q))+H[8]+1770035416&4294967295,M=R+(D<<7&4294967295|D>>>25),D=q+(O^M&(R^O))+H[9]+2336552879&4294967295,q=M+(D<<12&4294967295|D>>>20),D=O+(R^q&(M^R))+H[10]+4294925233&4294967295,O=q+(D<<17&4294967295|D>>>15),D=R+(M^O&(q^M))+H[11]+2304563134&4294967295,R=O+(D<<22&4294967295|D>>>10),D=M+(q^R&(O^q))+H[12]+1804603682&4294967295,M=R+(D<<7&4294967295|D>>>25),D=q+(O^M&(R^O))+H[13]+4254626195&4294967295,q=M+(D<<12&4294967295|D>>>20),D=O+(R^q&(M^R))+H[14]+2792965006&4294967295,O=q+(D<<17&4294967295|D>>>15),D=R+(M^O&(q^M))+H[15]+1236535329&4294967295,R=O+(D<<22&4294967295|D>>>10),D=M+(O^q&(R^O))+H[1]+4129170786&4294967295,M=R+(D<<5&4294967295|D>>>27),D=q+(R^O&(M^R))+H[6]+3225465664&4294967295,q=M+(D<<9&4294967295|D>>>23),D=O+(M^R&(q^M))+H[11]+643717713&4294967295,O=q+(D<<14&4294967295|D>>>18),D=R+(q^M&(O^q))+H[0]+3921069994&4294967295,R=O+(D<<20&4294967295|D>>>12),D=M+(O^q&(R^O))+H[5]+3593408605&4294967295,M=R+(D<<5&4294967295|D>>>27),D=q+(R^O&(M^R))+H[10]+38016083&4294967295,q=M+(D<<9&4294967295|D>>>23),D=O+(M^R&(q^M))+H[15]+3634488961&4294967295,O=q+(D<<14&4294967295|D>>>18),D=R+(q^M&(O^q))+H[4]+3889429448&4294967295,R=O+(D<<20&4294967295|D>>>12),D=M+(O^q&(R^O))+H[9]+568446438&4294967295,M=R+(D<<5&4294967295|D>>>27),D=q+(R^O&(M^R))+H[14]+3275163606&4294967295,q=M+(D<<9&4294967295|D>>>23),D=O+(M^R&(q^M))+H[3]+4107603335&4294967295,O=q+(D<<14&4294967295|D>>>18),D=R+(q^M&(O^q))+H[8]+1163531501&4294967295,R=O+(D<<20&4294967295|D>>>12),D=M+(O^q&(R^O))+H[13]+2850285829&4294967295,M=R+(D<<5&4294967295|D>>>27),D=q+(R^O&(M^R))+H[2]+4243563512&4294967295,q=M+(D<<9&4294967295|D>>>23),D=O+(M^R&(q^M))+H[7]+1735328473&4294967295,O=q+(D<<14&4294967295|D>>>18),D=R+(q^M&(O^q))+H[12]+2368359562&4294967295,R=O+(D<<20&4294967295|D>>>12),D=M+(R^O^q)+H[5]+4294588738&4294967295,M=R+(D<<4&4294967295|D>>>28),D=q+(M^R^O)+H[8]+2272392833&4294967295,q=M+(D<<11&4294967295|D>>>21),D=O+(q^M^R)+H[11]+1839030562&4294967295,O=q+(D<<16&4294967295|D>>>16),D=R+(O^q^M)+H[14]+4259657740&4294967295,R=O+(D<<23&4294967295|D>>>9),D=M+(R^O^q)+H[1]+2763975236&4294967295,M=R+(D<<4&4294967295|D>>>28),D=q+(M^R^O)+H[4]+1272893353&4294967295,q=M+(D<<11&4294967295|D>>>21),D=O+(q^M^R)+H[7]+4139469664&4294967295,O=q+(D<<16&4294967295|D>>>16),D=R+(O^q^M)+H[10]+3200236656&4294967295,R=O+(D<<23&4294967295|D>>>9),D=M+(R^O^q)+H[13]+681279174&4294967295,M=R+(D<<4&4294967295|D>>>28),D=q+(M^R^O)+H[0]+3936430074&4294967295,q=M+(D<<11&4294967295|D>>>21),D=O+(q^M^R)+H[3]+3572445317&4294967295,O=q+(D<<16&4294967295|D>>>16),D=R+(O^q^M)+H[6]+76029189&4294967295,R=O+(D<<23&4294967295|D>>>9),D=M+(R^O^q)+H[9]+3654602809&4294967295,M=R+(D<<4&4294967295|D>>>28),D=q+(M^R^O)+H[12]+3873151461&4294967295,q=M+(D<<11&4294967295|D>>>21),D=O+(q^M^R)+H[15]+530742520&4294967295,O=q+(D<<16&4294967295|D>>>16),D=R+(O^q^M)+H[2]+3299628645&4294967295,R=O+(D<<23&4294967295|D>>>9),D=M+(O^(R|~q))+H[0]+4096336452&4294967295,M=R+(D<<6&4294967295|D>>>26),D=q+(R^(M|~O))+H[7]+1126891415&4294967295,q=M+(D<<10&4294967295|D>>>22),D=O+(M^(q|~R))+H[14]+2878612391&4294967295,O=q+(D<<15&4294967295|D>>>17),D=R+(q^(O|~M))+H[5]+4237533241&4294967295,R=O+(D<<21&4294967295|D>>>11),D=M+(O^(R|~q))+H[12]+1700485571&4294967295,M=R+(D<<6&4294967295|D>>>26),D=q+(R^(M|~O))+H[3]+2399980690&4294967295,q=M+(D<<10&4294967295|D>>>22),D=O+(M^(q|~R))+H[10]+4293915773&4294967295,O=q+(D<<15&4294967295|D>>>17),D=R+(q^(O|~M))+H[1]+2240044497&4294967295,R=O+(D<<21&4294967295|D>>>11),D=M+(O^(R|~q))+H[8]+1873313359&4294967295,M=R+(D<<6&4294967295|D>>>26),D=q+(R^(M|~O))+H[15]+4264355552&4294967295,q=M+(D<<10&4294967295|D>>>22),D=O+(M^(q|~R))+H[6]+2734768916&4294967295,O=q+(D<<15&4294967295|D>>>17),D=R+(q^(O|~M))+H[13]+1309151649&4294967295,R=O+(D<<21&4294967295|D>>>11),D=M+(O^(R|~q))+H[4]+4149444226&4294967295,M=R+(D<<6&4294967295|D>>>26),D=q+(R^(M|~O))+H[11]+3174756917&4294967295,q=M+(D<<10&4294967295|D>>>22),D=O+(M^(q|~R))+H[2]+718787259&4294967295,O=q+(D<<15&4294967295|D>>>17),D=R+(q^(O|~M))+H[9]+3951481745&4294967295,N.g[0]=N.g[0]+M&4294967295,N.g[1]=N.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+q&4294967295}i.prototype.v=function(N,M){M===void 0&&(M=N.length);const R=M-this.blockSize,H=this.C;let O=this.h,q=0;for(;q<M;){if(O==0)for(;q<=R;)r(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<M;)if(H[O++]=N.charCodeAt(q++),O==this.blockSize){r(this,H),O=0;break}}else for(;q<M;)if(H[O++]=N[q++],O==this.blockSize){r(this,H),O=0;break}}this.h=O,this.o+=M},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var M=1;M<N.length-8;++M)N[M]=0;M=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=M&255,M/=256;for(this.v(N),N=Array(16),M=0,R=0;R<4;++R)for(let H=0;H<32;H+=8)N[M++]=this.g[R]>>>H&255;return N};function l(N,M){var R=f;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=M(N)}function u(N,M){this.h=M;const R=[];let H=!0;for(let O=N.length-1;O>=0;O--){const q=N[O]|0;H&&q==M||(R[O]=q,H=!1)}this.g=R}var f={};function g(N){return-128<=N&&N<128?l(N,function(M){return new u([M|0],M<0?-1:0)}):new u([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return P(h(-N));const M=[];let R=1;for(let H=0;N>=R;H++)M[H]=N/R|0,R*=4294967296;return new u(M,0)}function _(N,M){if(N.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N.charAt(0)=="-")return P(_(N.substring(1),M));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(M,8));let H=T;for(let q=0;q<N.length;q+=8){var O=Math.min(8,N.length-q);const D=parseInt(N.substring(q,q+O),M);O<8?(O=h(Math.pow(M,O)),H=H.j(O).add(h(D))):(H=H.j(R),H=H.add(h(D)))}return H}var T=g(0),S=g(1),w=g(16777216);n=u.prototype,n.m=function(){if(k(this))return-P(this).m();let N=0,M=1;for(let R=0;R<this.g.length;R++){const H=this.i(R);N+=(H>=0?H:4294967296+H)*M,M*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(V(this))return"0";if(k(this))return"-"+P(this).toString(N);const M=h(Math.pow(N,6));var R=this;let H="";for(;;){const O=le(R,M).g;R=$(R,O.j(M));let q=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=O,V(R))return q+H;for(;q.length<6;)q="0"+q;H=q+H}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function V(N){if(N.h!=0)return!1;for(let M=0;M<N.g.length;M++)if(N.g[M]!=0)return!1;return!0}function k(N){return N.h==-1}n.l=function(N){return N=$(this,N),k(N)?-1:V(N)?0:1};function P(N){const M=N.g.length,R=[];for(let H=0;H<M;H++)R[H]=~N.g[H];return new u(R,~N.h).add(S)}n.abs=function(){return k(this)?P(this):this},n.add=function(N){const M=Math.max(this.g.length,N.g.length),R=[];let H=0;for(let O=0;O<=M;O++){let q=H+(this.i(O)&65535)+(N.i(O)&65535),D=(q>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);H=D>>>16,q&=65535,D&=65535,R[O]=D<<16|q}return new u(R,R[R.length-1]&-2147483648?-1:0)};function $(N,M){return N.add(P(M))}n.j=function(N){if(V(this)||V(N))return T;if(k(this))return k(N)?P(this).j(P(N)):P(P(this).j(N));if(k(N))return P(this.j(P(N)));if(this.l(w)<0&&N.l(w)<0)return h(this.m()*N.m());const M=this.g.length+N.g.length,R=[];for(var H=0;H<2*M;H++)R[H]=0;for(H=0;H<this.g.length;H++)for(let O=0;O<N.g.length;O++){const q=this.i(H)>>>16,D=this.i(H)&65535,He=N.i(O)>>>16,gt=N.i(O)&65535;R[2*H+2*O]+=D*gt,B(R,2*H+2*O),R[2*H+2*O+1]+=q*gt,B(R,2*H+2*O+1),R[2*H+2*O+1]+=D*He,B(R,2*H+2*O+1),R[2*H+2*O+2]+=q*He,B(R,2*H+2*O+2)}for(N=0;N<M;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=M;N<2*M;N++)R[N]=0;return new u(R,0)};function B(N,M){for(;(N[M]&65535)!=N[M];)N[M+1]+=N[M]>>>16,N[M]&=65535,M++}function Z(N,M){this.g=N,this.h=M}function le(N,M){if(V(M))throw Error("division by zero");if(V(N))return new Z(T,T);if(k(N))return M=le(P(N),M),new Z(P(M.g),P(M.h));if(k(M))return M=le(N,P(M)),new Z(P(M.g),M.h);if(N.g.length>30){if(k(N)||k(M))throw Error("slowDivide_ only works with positive integers.");for(var R=S,H=M;H.l(N)<=0;)R=de(R),H=de(H);var O=pe(R,1),q=pe(H,1);for(H=pe(H,2),R=pe(R,2);!V(H);){var D=q.add(H);D.l(N)<=0&&(O=O.add(R),q=D),H=pe(H,1),R=pe(R,1)}return M=$(N,O.j(M)),new Z(O,M)}for(O=T;N.l(M)>=0;){for(R=Math.max(1,Math.floor(N.m()/M.m())),H=Math.ceil(Math.log(R)/Math.LN2),H=H<=48?1:Math.pow(2,H-48),q=h(R),D=q.j(M);k(D)||D.l(N)>0;)R-=H,q=h(R),D=q.j(M);V(q)&&(q=S),O=O.add(q),N=$(N,D)}return new Z(O,N)}n.B=function(N){return le(this,N).h},n.and=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let H=0;H<M;H++)R[H]=this.i(H)&N.i(H);return new u(R,this.h&N.h)},n.or=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let H=0;H<M;H++)R[H]=this.i(H)|N.i(H);return new u(R,this.h|N.h)},n.xor=function(N){const M=Math.max(this.g.length,N.g.length),R=[];for(let H=0;H<M;H++)R[H]=this.i(H)^N.i(H);return new u(R,this.h^N.h)};function de(N){const M=N.g.length+1,R=[];for(let H=0;H<M;H++)R[H]=N.i(H)<<1|N.i(H-1)>>>31;return new u(R,N.h)}function pe(N,M){const R=M>>5;M%=32;const H=N.g.length-R,O=[];for(let q=0;q<H;q++)O[q]=M>0?N.i(q+R)>>>M|N.i(q+R+1)<<32-M:N.i(q+R);return new u(O,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,gC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,zo=u}).apply(typeof bE<"u"?bE:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yC,cu,vC,wd,ym,_C,TC,EC;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var E=0;E<m.length;++E){var b=m[E];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function r(m,E){if(E)e:{var b=i;m=m.split(".");for(var x=0;x<m.length-1;x++){var K=m[x];if(!(K in b))break e;b=b[K]}m=m[m.length-1],x=b[m],E=E(x),E!=x&&E!=null&&e(b,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var b=[],x;for(x in E)Object.prototype.hasOwnProperty.call(E,x)&&b.push([x,E[x]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,b){return m.call.apply(m.bind,arguments)}function h(m,E,b){return h=g,h.apply(null,arguments)}function _(m,E){var b=Array.prototype.slice.call(arguments,1);return function(){var x=b.slice();return x.push.apply(x,arguments),m.apply(this,x)}}function T(m,E){function b(){}b.prototype=E.prototype,m.Z=E.prototype,m.prototype=new b,m.prototype.constructor=m,m.Ob=function(x,K,j){for(var he=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)he[Be-2]=arguments[Be];return E.prototype[K].apply(x,he)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const E=m.length;if(E>0){const b=Array(E);for(let x=0;x<E;x++)b[x]=m[x];return b}return[]}function V(m,E){for(let x=1;x<arguments.length;x++){const K=arguments[x];var b=typeof K;if(b=b!="object"?b:K?Array.isArray(K)?"array":b:"null",b=="array"||b=="object"&&typeof K.length=="number"){b=m.length||0;const j=K.length||0;m.length=b+j;for(let he=0;he<j;he++)m[b+he]=K[he]}else m.push(K)}}class k{constructor(E,b){this.i=E,this.j=b,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function P(m){u.setTimeout(()=>{throw m},0)}function $(){var m=N;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class B{constructor(){this.h=this.g=null}add(E,b){const x=Z.get();x.set(E,b),this.h?this.h.next=x:this.g=x,this.h=x}}var Z=new k(()=>new le,m=>m.reset());class le{constructor(){this.next=this.g=this.h=null}set(E,b){this.h=E,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let de,pe=!1,N=new B,M=()=>{const m=Promise.resolve(void 0);de=()=>{m.then(R)}};function R(){for(var m;m=$();){try{m.h.call(m.g)}catch(b){P(b)}var E=Z;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}pe=!1}function H(){this.u=this.u,this.C=this.C}H.prototype.u=!1,H.prototype.dispose=function(){this.u||(this.u=!0,this.N())},H.prototype[Symbol.dispose]=function(){this.dispose()},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const b=()=>{};u.addEventListener("test",b,E),u.removeEventListener("test",b,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function He(m,E){O.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(He,O),He.prototype.init=function(m,E){const b=this.type=m.type,x=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(b=="mouseover"?E=m.fromElement:b=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),W=0;function ue(m,E,b,x,K){this.listener=m,this.proxy=null,this.src=E,this.type=b,this.capture=!!x,this.ha=K,this.key=++W,this.da=this.fa=!1}function _e(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ke(m,E,b){for(const x in m)E.call(b,m[x],x,m)}function Ze(m,E){for(const b in m)E.call(void 0,m[b],b,m)}function F(m){const E={};for(const b in m)E[b]=m[b];return E}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(m,E){let b,x;for(let K=1;K<arguments.length;K++){x=arguments[K];for(b in x)m[b]=x[b];for(let j=0;j<X.length;j++)b=X[j],Object.prototype.hasOwnProperty.call(x,b)&&(m[b]=x[b])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,E,b,x,K){const j=m.toString();m=this.g[j],m||(m=this.g[j]=[],this.h++);const he=xe(m,E,x,K);return he>-1?(E=m[he],b||(E.fa=!1)):(E=new ue(E,this.src,j,!!x,K),E.fa=b,m.push(E)),E};function Ie(m,E){const b=E.type;if(b in m.g){var x=m.g[b],K=Array.prototype.indexOf.call(x,E,void 0),j;(j=K>=0)&&Array.prototype.splice.call(x,K,1),j&&(_e(E),m.g[b].length==0&&(delete m.g[b],m.h--))}}function xe(m,E,b,x){for(let K=0;K<m.length;++K){const j=m[K];if(!j.da&&j.listener==E&&j.capture==!!b&&j.ha==x)return K}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),ct={};function rt(m,E,b,x,K){if(Array.isArray(E)){for(let j=0;j<E.length;j++)rt(m,E[j],b,x,K);return null}return b=Di(b),m&&m[gt]?m.J(E,b,f(x)?!!x.capture:!1,K):Ln(m,E,b,!1,x,K)}function Ln(m,E,b,x,K,j){if(!E)throw Error("Invalid event type");const he=f(K)?!!K.capture:!!K;let Be=Rn(m);if(Be||(m[Ge]=Be=new me(m)),b=Be.add(E,b,x,he,j),b.proxy)return b;if(x=fi(),b.proxy=x,x.src=m,x.listener=b,m.addEventListener)q||(K=he),K===void 0&&(K=!1),m.addEventListener(E.toString(),x,K);else if(m.attachEvent)m.attachEvent(yn(E.toString()),x);else if(m.addListener&&m.removeListener)m.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return b}function fi(){function m(b){return E.call(m.src,m.listener,b)}const E=Mi;return m}function hi(m,E,b,x,K){if(Array.isArray(E))for(var j=0;j<E.length;j++)hi(m,E[j],b,x,K);else x=f(x)?!!x.capture:!!x,b=Di(b),m&&m[gt]?(m=m.i,j=String(E).toString(),j in m.g&&(E=m.g[j],b=xe(E,b,x,K),b>-1&&(_e(E[b]),Array.prototype.splice.call(E,b,1),E.length==0&&(delete m.g[j],m.h--)))):m&&(m=Rn(m))&&(E=m.g[E.toString()],m=-1,E&&(m=xe(E,b,x,K)),(b=m>-1?E[m]:null)&&pi(b))}function pi(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[gt])Ie(E.i,m);else{var b=m.type,x=m.proxy;E.removeEventListener?E.removeEventListener(b,x,m.capture):E.detachEvent?E.detachEvent(yn(b),x):E.addListener&&E.removeListener&&E.removeListener(x),(b=Rn(E))?(Ie(b,m),b.h==0&&(b.src=null,E[Ge]=null)):_e(m)}}}function yn(m){return m in ct?ct[m]:ct[m]="on"+m}function Mi(m,E){if(m.da)m=!0;else{E=new He(E,this);const b=m.listener,x=m.ha||m.src;m.fa&&pi(m),m=b.call(x,E)}return m}function Rn(m){return m=m[Ge],m instanceof me?m:null}var Wn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Di(m){return typeof m=="function"?m:(m[Wn]||(m[Wn]=function(E){return m.handleEvent(E)}),m[Wn])}function dt(){H.call(this),this.i=new me(this),this.M=this,this.G=null}T(dt,H),dt.prototype[gt]=!0,dt.prototype.removeEventListener=function(m,E,b,x){hi(this,m,E,b,x)};function ft(m,E){var b,x=m.G;if(x)for(b=[];x;x=x.G)b.push(x);if(m=m.M,x=E.type||E,typeof E=="string")E=new O(E,m);else if(E instanceof O)E.target=E.target||m;else{var K=E;E=new O(x,m),ce(E,K)}K=!0;let j,he;if(b)for(he=b.length-1;he>=0;he--)j=E.g=b[he],K=vn(j,x,!0,E)&&K;if(j=E.g=m,K=vn(j,x,!0,E)&&K,K=vn(j,x,!1,E)&&K,b)for(he=0;he<b.length;he++)j=E.g=b[he],K=vn(j,x,!1,E)&&K}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const b=m.g[E];for(let x=0;x<b.length;x++)_e(b[x]);delete m.g[E],m.h--}}this.G=null},dt.prototype.J=function(m,E,b,x){return this.i.add(String(m),E,!1,b,x)},dt.prototype.K=function(m,E,b,x){return this.i.add(String(m),E,!0,b,x)};function vn(m,E,b,x){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let K=!0;for(let j=0;j<E.length;++j){const he=E[j];if(he&&!he.da&&he.capture==b){const Be=he.listener,Bt=he.ha||he.src;he.fa&&Ie(m.i,he),K=Be.call(Bt,x)!==!1&&K}}return K&&!x.defaultPrevented}function Wi(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function On(m){m.g=Wi(()=>{m.g=null,m.i&&(m.i=!1,On(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class Ot extends H{constructor(E,b){super(),this.m=E,this.l=b,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:On(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jn(m){H.call(this),this.h=m,this.g={}}T(jn,H);var ji=[];function Pi(m){Ke(m.g,function(E,b){this.g.hasOwnProperty(b)&&pi(E)},m),m.g={}}jn.prototype.N=function(){jn.Z.N.call(this),Pi(this)},jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nn=u.JSON.stringify,no=u.JSON.parse,bs=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ki(){}function nr(){}var nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rt(){O.call(this,"d")}T(Rt,O);function _n(){O.call(this,"c")}T(_n,O);var St={},Zi=null;function Hn(){return Zi=Zi||new dt}St.Ia="serverreachability";function es(m){O.call(this,St.Ia,m)}T(es,O);function Mn(m){const E=Hn();ft(E,new es(E))}St.STAT_EVENT="statevent";function Vi(m,E){O.call(this,St.STAT_EVENT,m),this.stat=E}T(Vi,O);function oe(m){const E=Hn();ft(E,new Vi(E,m))}St.Ja="timingevent";function Ae(m,E){O.call(this,St.Ja,m),this.size=E}T(Ae,O);function Ce(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function ke(){this.g=!0}ke.prototype.ua=function(){this.g=!1};function At(m,E,b,x,K,j){m.info(function(){if(m.g)if(j){var he="",Be=j.split("&");for(let at=0;at<Be.length;at++){var Bt=Be[at].split("=");if(Bt.length>1){const It=Bt[0];Bt=Bt[1];const vi=It.split("_");he=vi.length>=2&&vi[1]=="type"?he+(It+"="+Bt+"&"):he+(It+"=redacted&")}}}else he=null;else he=j;return"XMLHTTP REQ ("+x+") [attempt "+K+"]: "+E+`
`+b+`
`+he})}function Dn(m,E,b,x,K,j,he){m.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+K+"]: "+E+`
`+b+`
`+j+" "+he})}function Dt(m,E,b,x){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Zn(m,b)+(x?" "+x:"")})}function Tn(m,E){m.info(function(){return"TIMEOUT: "+E})}ke.prototype.info=function(){};function Zn(m,E){if(!m.g)return E;if(!E)return null;try{const j=JSON.parse(E);if(j){for(m=0;m<j.length;m++)if(Array.isArray(j[m])){var b=j[m];if(!(b.length<2)){var x=b[1];if(Array.isArray(x)&&!(x.length<1)){var K=x[0];if(K!="noop"&&K!="stop"&&K!="close")for(let he=1;he<x.length;he++)x[he]=""}}}}return Nn(j)}catch{return E}}var Bn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ui={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pt;function ws(){}T(ws,ki),ws.prototype.g=function(){return new XMLHttpRequest},Pt=new ws;function Fn(m){return encodeURIComponent(String(m))}function Br(m){var E=1;m=m.split(":");const b=[];for(;E>0&&m.length;)b.push(m.shift()),E--;return m.length&&b.push(m.join(":")),b}function ei(m,E,b,x){this.j=m,this.i=E,this.l=b,this.S=x||1,this.V=new jn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ti}function ti(){this.i=null,this.g="",this.h=!1}var kt={},Ht={};function ni(m,E,b){m.M=1,m.A=ir(Kt(E)),m.u=b,m.R=!0,Vt(m,null)}function Vt(m,E){m.F=Date.now(),Me(m),m.B=Kt(m.A);var b=m.B,x=m.S;Array.isArray(x)||(x=[String(x)]),qr(b.i,"t",x),m.C=0,b=m.j.L,m.h=new ti,m.g=tc(m.j,b?E:null,!m.u),m.P>0&&(m.O=new Ot(h(m.Y,m,m.g),m.P)),E=m.V,b=m.g,x=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(ji[0]=K.toString()),K=ji);for(let j=0;j<K.length;j++){const he=rt(b,K[j],x||E.handleEvent,!1,E.h||E);if(!he)break;E.g[he.key]=he}E=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Mn(),At(m.i,m.v,m.B,m.l,m.S,m.u)}ei.prototype.ba=function(m){m=m.target;const E=this.O;E&&Hi(m)==3?E.j():this.Y(m)},ei.prototype.Y=function(m){try{if(m==this.g)e:{const Be=Hi(this.g),Bt=this.g.ya(),at=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||Be!=4||Bt==7||(Bt==8||at<=0?Mn(3):Mn(2)),nt(this);var E=this.g.ca();this.X=E;var b=U(this);if(this.o=E==200,Dn(this.i,this.v,this.B,this.l,this.S,Be,E),this.o){if(this.U&&!this.L){t:{if(this.g){var x,K=this.g;if((x=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(x)){var j=x;break t}}j=null}if(m=j)Dt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mi(this,m);else{this.o=!1,this.m=3,oe(12),sn(this),En(this);break e}}if(this.R){m=!0;let It;for(;!this.K&&this.C<b.length;)if(It=Ee(this,b),It==Ht){Be==4&&(this.m=4,oe(14),m=!1),Dt(this.i,this.l,null,"[Incomplete Response]");break}else if(It==kt){this.m=4,oe(15),Dt(this.i,this.l,b,"[Invalid Chunk]"),m=!1;break}else Dt(this.i,this.l,It,null),mi(this,It);if(fe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||b.length!=0||this.h.h||(this.m=1,oe(16),m=!1),this.o=this.o&&m,!m)Dt(this.i,this.l,b,"[Invalid Chunked Response]"),sn(this),En(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),El(he),he.P=!0,oe(11))}}else Dt(this.i,this.l,b,null),mi(this,b);Be==4&&sn(this),this.o&&!this.K&&(Be==4?Wu(this.j,this):(this.o=!1,Me(this)))}else xs(this.g),E==400&&b.indexOf("Unknown SID")>0?(this.m=3,oe(12)):(this.m=0,oe(13)),sn(this),En(this)}}}catch{}finally{}};function U(m){if(!fe(m))return m.g.la();const E=un(m.g);if(E==="")return"";let b="";const x=E.length,K=Hi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return sn(m),En(m),"";m.h.i=new u.TextDecoder}for(let j=0;j<x;j++)m.h.h=!0,b+=m.h.i.decode(E[j],{stream:!(K&&j==x-1)});return E.length=0,m.h.g+=b,m.C=0,m.h.g}function fe(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Ee(m,E){var b=m.C,x=E.indexOf(`
`,b);return x==-1?Ht:(b=Number(E.substring(b,x)),isNaN(b)?kt:(x+=1,x+b>E.length?Ht:(E=E.slice(x,x+b),m.C=x+b,E)))}ei.prototype.cancel=function(){this.K=!0,sn(this)};function Me(m){m.T=Date.now()+m.H,we(m,m.H)}function we(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ce(h(m.aa,m),E)}function nt(m){m.D&&(u.clearTimeout(m.D),m.D=null)}ei.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Tn(this.i,this.B),this.M!=2&&(Mn(),oe(17)),sn(this),this.m=2,En(this)):we(this,this.T-m)};function En(m){m.j.I==0||m.K||Wu(m.j,m)}function sn(m){nt(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Pi(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function mi(m,E){try{var b=m.j;if(b.I!=0&&(b.g==m||ns(b.h,m))){if(!m.L&&ns(b.h,m)&&b.I==3){try{var x=b.Ba.g.parse(E)}catch{x=null}if(Array.isArray(x)&&x.length==3){var K=x;if(K[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<m.F)Jr(b),co(b);else break e;cr(b),oe(18)}}else b.xa=K[1],0<b.xa-b.K&&K[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ce(h(b.Va,b),6e3));ts(b.h)<=1&&b.ta&&(b.ta=void 0)}else ls(b,11)}else if((m.L||b.g==m)&&Jr(b),!D(E))for(K=b.Ba.g.parse(E),E=0;E<K.length;E++){let at=K[E];const It=at[0];if(!(It<=b.K))if(b.K=It,at=at[1],b.I==2)if(at[0]=="c"){b.M=at[1],b.ba=at[2];const vi=at[3];vi!=null&&(b.ka=vi,b.j.info("VER="+b.ka));const us=at[4];us!=null&&(b.za=us,b.j.info("SVER="+b.za));const Bi=at[5];Bi!=null&&typeof Bi=="number"&&Bi>0&&(x=1.5*Bi,b.O=x,b.j.info("backChannelRequestTimeoutMs_="+x)),x=b;const Fi=m.g;if(Fi){const dr=Fi.g?Fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dr){var j=x.h;j.g||dr.indexOf("spdy")==-1&&dr.indexOf("quic")==-1&&dr.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ul(j,j.h),j.h=null))}if(x.G){const Qr=Fi.g?Fi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qr&&(x.wa=Qr,ht(x.J,x.G,Qr))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-m.F,b.j.info("Handshake RTT: "+b.T+"ms")),x=b;var he=m;if(x.na=ec(x,x.L?x.ba:null,x.W),he.L){cl(x.h,he);var Be=he,Bt=x.O;Bt&&(Be.H=Bt),Be.D&&(nt(Be),Me(Be)),x.g=he}else Qu(x);b.i.length>0&&as(b)}else at[0]!="stop"&&at[0]!="close"||ls(b,7);else b.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?ls(b,7):_l(b):at[0]!="noop"&&b.l&&b.l.qa(at),b.A=0)}}Mn(4)}catch{}}var zt=class{constructor(m,E){this.g=m,this.map=E}};function al(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ll(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ts(m){return m.h?1:m.g?m.g.size:0}function ns(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function ul(m,E){m.g?m.g.add(E):m.h=E}function cl(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}al.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function dl(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const b of m.g.values())E=E.concat(b.G);return E}return w(m.i)}var qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fr(m,E){if(m){m=m.split("&");for(let b=0;b<m.length;b++){const x=m[b].indexOf("=");let K,j=null;x>=0?(K=m[b].substring(0,x),j=m[b].substring(x+1)):K=m[b],E(K,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function ii(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof ii?(this.l=m.l,on(this,m.j),this.o=m.o,this.g=m.g,io(this,m.u),this.h=m.h,fl(this,Yu(m.i)),this.m=m.m):m&&(E=String(m).match(qu))?(this.l=!1,on(this,E[1]||"",!0),this.o=is(E[2]||""),this.g=is(E[3]||"",!0),io(this,E[4]),this.h=is(E[5]||"",!0),fl(this,E[6]||"",!0),this.m=is(E[7]||"")):(this.l=!1,this.i=new oo(null,this.l))}ii.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(sr(E,Gr,!0),":");var b=this.g;return(b||E=="file")&&(m.push("//"),(E=this.o)&&m.push(sr(E,Gr,!0),"@"),m.push(Fn(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&m.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&m.push("/"),m.push(sr(b,b.charAt(0)=="/"?hl:zu,!0))),(b=this.i.toString())&&m.push("?",b),(b=this.m)&&m.push("#",sr(b,Ku)),m.join("")},ii.prototype.resolve=function(m){const E=Kt(this);let b=!!m.j;b?on(E,m.j):b=!!m.o,b?E.o=m.o:b=!!m.g,b?E.g=m.g:b=m.u!=null;var x=m.h;if(b)io(E,m.u);else if(b=!!m.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var K=E.h.lastIndexOf("/");K!=-1&&(x=E.h.slice(0,K+1)+x)}if(K=x,K==".."||K==".")x="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){x=K.lastIndexOf("/",0)==0,K=K.split("/");const j=[];for(let he=0;he<K.length;){const Be=K[he++];Be=="."?x&&he==K.length&&j.push(""):Be==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),x&&he==K.length&&j.push("")):(j.push(Be),x=!0)}x=j.join("/")}else x=K}return b?E.h=x:b=m.i.toString()!=="",b?fl(E,Yu(m.i)):b=!!m.m,b&&(E.m=m.m),E};function Kt(m){return new ii(m)}function on(m,E,b){m.j=b?is(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function io(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function fl(m,E,b){E instanceof oo?(m.i=E,zr(m.i,m.l)):(b||(E=sr(E,so)),m.i=new oo(E,m.l))}function ht(m,E,b){m.i.set(E,b)}function ir(m){return ht(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function is(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function sr(m,E,b){return typeof m=="string"?(m=encodeURI(m).replace(E,Gn),b&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Gn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Gr=/[#\/\?@]/g,zu=/[#\?:]/g,hl=/[#\?]/g,so=/[#\?@]/g,Ku=/#/g;function oo(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function qn(m){m.g||(m.g=new Map,m.h=0,m.i&&Fr(m.i,function(E,b){m.add(decodeURIComponent(E.replace(/\+/g," ")),b)}))}n=oo.prototype,n.add=function(m,E){qn(this),this.i=null,m=ro(this,m);let b=this.g.get(m);return b||this.g.set(m,b=[]),b.push(E),this.h+=1,this};function $u(m,E){qn(m),E=ro(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function pl(m,E){return qn(m),E=ro(m,E),m.g.has(E)}n.forEach=function(m,E){qn(this),this.g.forEach(function(b,x){b.forEach(function(K){m.call(E,K,x,this)},this)},this)};function ml(m,E){qn(m);let b=[];if(typeof E=="string")pl(m,E)&&(b=b.concat(m.g.get(ro(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)b=b.concat(m[E]);return b}n.set=function(m,E){return qn(this),this.i=null,m=ro(this,m),pl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=ml(this,m),m.length>0?String(m[0]):E):E};function qr(m,E,b){$u(m,E),b.length>0&&(m.i=null,m.g.set(ro(m,E),w(b)),m.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let x=0;x<E.length;x++){var b=E[x];const K=Fn(b);b=ml(this,b);for(let j=0;j<b.length;j++){let he=K;b[j]!==""&&(he+="="+Fn(b[j])),m.push(he)}}return this.i=m.join("&")};function Yu(m){const E=new oo;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function ro(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function zr(m,E){E&&!m.j&&(qn(m),m.i=null,m.g.forEach(function(b,x){const K=x.toLowerCase();x!=K&&($u(this,x),qr(this,K,b))},m)),m.j=E}function Li(m,E){const b=new ke;if(u.Image){const x=new Image;x.onload=_(gi,b,"TestLoadImage: loaded",!0,E,x),x.onerror=_(gi,b,"TestLoadImage: error",!1,E,x),x.onabort=_(gi,b,"TestLoadImage: abort",!1,E,x),x.ontimeout=_(gi,b,"TestLoadImage: timeout",!1,E,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=m}else E(!1)}function gl(m,E){const b=new ke,x=new AbortController,K=setTimeout(()=>{x.abort(),gi(b,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:x.signal}).then(j=>{clearTimeout(K),j.ok?gi(b,"TestPingServer: ok",!0,E):gi(b,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(K),gi(b,"TestPingServer: error",!1,E)})}function gi(m,E,b,x,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),x(b)}catch{}}function ao(){this.g=new bs}function ss(m){this.i=m.Sb||null,this.h=m.ab||!1}T(ss,ki),ss.prototype.g=function(){return new or(this.i,this.h)};function or(m,E){dt.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(or,dt),n=or.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Oi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,lo(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?lo(this):Oi(this),this.readyState==3&&Kr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,lo(this))},n.Na=function(m){this.g&&(this.response=m,lo(this))},n.ga=function(){this.g&&lo(this)};function lo(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Oi(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var b=E.next();!b.done;)b=b.value,m.push(b[0]+": "+b[1]),b=E.next();return m.join(`\r
`)};function Oi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(or.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function yi(m){let E="";return Ke(m,function(b,x){E+=x,E+=":",E+=b,E+=`\r
`}),E}function rr(m,E,b){e:{for(x in b){var x=!1;break e}x=!0}x||(b=yi(b),typeof m=="string"?b!=null&&Fn(b):ht(m,E,b))}function yt(m){dt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(yt,dt);var os=/^https?$/i,yl=["POST","PUT"];n=yt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,b,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pt.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(j){ar(this,j);return}if(m=b||"",b=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var K in x)b.set(K,x[K]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const j of x.keys())b.set(j,x.get(j));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(b.keys()).find(j=>j.toLowerCase()=="content-type"),K=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(yl,E,void 0)>=0)||x||K||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,he]of b)this.g.setRequestHeader(j,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(j){ar(this,j)}};function ar(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,vl(m),Is(m)}function vl(m){m.A||(m.A=!0,ft(m,"complete"),ft(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,ft(this,"complete"),ft(this,"abort"),Is(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Is(this,!0)),yt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?lr(this):this.Xa())},n.Xa=function(){lr(this)};function lr(m){if(m.h&&typeof l<"u"){if(m.v&&Hi(m)==4)setTimeout(m.Ca.bind(m),0);else if(ft(m,"readystatechange"),Hi(m)==4){m.h=!1;try{const j=m.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var b;if(!(b=E)){var x;if(x=j===0){let he=String(m.D).match(qu)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),x=!os.test(he?he.toLowerCase():"")}b=x}if(b)ft(m,"complete"),ft(m,"success");else{m.o=6;try{var K=Hi(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",vl(m)}}finally{Is(m)}}}}function Is(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const b=m.g;m.g=null,E||ft(m,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Hi(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Hi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),no(E)}};function un(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function xs(m){const E={};m=(m.g&&Hi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<m.length;x++){if(D(m[x]))continue;var b=Br(m[x]);const K=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const j=E[K]||[];E[K]=j,j.push(b)}Ze(E,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(m,E,b){return b&&b.internalChannelParams&&b.internalChannelParams[m]||E}function uo(m){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rs("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rs("baseRetryDelayMs",5e3,m),this.Za=rs("retryDelaySeedMs",1e4,m),this.Ta=rs("forwardChannelMaxRetries",2,m),this.va=rs("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new al(m&&m.concurrentRequestLimit),this.Ba=new ao,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=uo.prototype,n.ka=8,n.I=1,n.connect=function(m,E,b,x){oe(0),this.W=m,this.H=E||{},b&&x!==void 0&&(this.H.OSID=b,this.H.OAID=x),this.F=this.X,this.J=ec(this,null,this.W),as(this)};function _l(m){if($r(m),m.I==3){var E=m.V++,b=Kt(m.J);if(ht(b,"SID",m.M),ht(b,"RID",E),ht(b,"TYPE","terminate"),ur(m,b),E=new ei(m,m.j,E),E.M=2,E.A=ir(Kt(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=E.A,b=!0),b||(E.g=tc(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Me(E)}Zu(m)}function co(m){m.g&&(El(m),m.g.cancel(),m.g=null)}function $r(m){co(m),m.v&&(u.clearTimeout(m.v),m.v=null),Jr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function as(m){if(!ll(m.h)&&!m.m){m.m=!0;var E=m.Ea;de||M(),pe||(de(),pe=!0),N.add(E,m),m.D=0}}function Yr(m,E){return ts(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ce(h(m.Ea,m,E),ju(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new ei(this,this.j,m);let j=this.o;if(this.U&&(j?(j=F(j),ce(j,this.U)):j=this.U),this.u!==null||this.R||(K.J=j,j=null),this.S)e:{for(var E=0,b=0;b<this.i.length;b++){t:{var x=this.i[b];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(E+=x,E>4096){E=b;break e}if(E===4096||b===this.i.length-1){E=b+1;break e}}E=1e3}else E=1e3;E=Ju(this,K,E),b=Kt(this.J),ht(b,"RID",m),ht(b,"CVER",22),this.G&&ht(b,"X-HTTP-Session-Id",this.G),ur(this,b),j&&(this.R?E="headers="+Fn(yi(j))+"&"+E:this.u&&rr(b,this.u,j)),ul(this.h,K),this.Ra&&ht(b,"TYPE","init"),this.S?(ht(b,"$req",E),ht(b,"SID","null"),K.U=!0,ni(K,b,null)):ni(K,b,E),this.I=2}}else this.I==3&&(m?Tl(this,m):this.i.length==0||ll(this.h)||Tl(this))};function Tl(m,E){var b;E?b=E.l:b=m.V++;const x=Kt(m.J);ht(x,"SID",m.M),ht(x,"RID",b),ht(x,"AID",m.K),ur(m,x),m.u&&m.o&&rr(x,m.u,m.o),b=new ei(m,m.j,b,m.D+1),m.u===null&&(b.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Ju(m,b,1e3),b.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ul(m.h,b),ni(b,x,E)}function ur(m,E){m.H&&Ke(m.H,function(b,x){ht(E,x,b)}),m.l&&Ke({},function(b,x){ht(E,x,b)})}function Ju(m,E,b){b=Math.min(m.i.length,b);const x=m.l?h(m.l.Ka,m.l,m):null;e:{var K=m.i;let Be=-1;for(;;){const Bt=["count="+b];Be==-1?b>0?(Be=K[0].g,Bt.push("ofs="+Be)):Be=0:Bt.push("ofs="+Be);let at=!0;for(let It=0;It<b;It++){var j=K[It].g;const vi=K[It].map;if(j-=Be,j<0)Be=Math.max(0,K[It].g-100),at=!1;else try{j="req"+j+"_"||"";try{var he=vi instanceof Map?vi:Object.entries(vi);for(const[us,Bi]of he){let Fi=Bi;f(Bi)&&(Fi=Nn(Bi)),Bt.push(j+us+"="+encodeURIComponent(Fi))}}catch(us){throw Bt.push(j+"type="+encodeURIComponent("_badmap")),us}}catch{x&&x(vi)}}if(at){he=Bt.join("&");break e}}he=void 0}return m=m.i.splice(0,b),E.G=m,he}function Qu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;de||M(),pe||(de(),pe=!0),N.add(E,m),m.A=0}}function cr(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ce(h(m.Da,m),ju(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ce(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,oe(10),co(this),Xu(this))};function El(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function Xu(m){m.g=new ei(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=Kt(m.na);ht(E,"RID","rpc"),ht(E,"SID",m.M),ht(E,"AID",m.K),ht(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&ht(E,"TO",m.ia),ht(E,"TYPE","xmlhttp"),ur(m,E),m.u&&m.o&&rr(E,m.u,m.o),m.O&&(m.g.H=m.O);var b=m.g;m=m.ba,b.M=1,b.A=ir(Kt(E)),b.u=null,b.R=!0,Vt(b,m)}n.Va=function(){this.C!=null&&(this.C=null,co(this),cr(this),oe(19))};function Jr(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Wu(m,E){var b=null;if(m.g==E){Jr(m),El(m),m.g=null;var x=2}else if(ns(m.h,E))b=E.G,cl(m.h,E),x=1;else return;if(m.I!=0){if(E.o)if(x==1){b=E.u?E.u.length:0,E=Date.now()-E.F;var K=m.D;x=Hn(),ft(x,new Ae(x,b)),as(m)}else Qu(m);else if(K=E.m,K==3||K==0&&E.X>0||!(x==1&&Yr(m,E)||x==2&&cr(m)))switch(b&&b.length>0&&(E=m.h,E.i=E.i.concat(b)),K){case 1:ls(m,5);break;case 4:ls(m,10);break;case 3:ls(m,6);break;default:ls(m,2)}}}function ju(m,E){let b=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(b*=2),b*E}function ls(m,E){if(m.j.info("Error code "+E),E==2){var b=h(m.bb,m),x=m.Ua;const K=!x;x=new ii(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||on(x,"https"),ir(x),K?Li(x.toString(),b):gl(x.toString(),b)}else oe(2);m.I=0,m.l&&m.l.pa(E),Zu(m),$r(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function Zu(m){if(m.I=0,m.ja=[],m.l){const E=dl(m.h);(E.length!=0||m.i.length!=0)&&(V(m.ja,E),V(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function ec(m,E,b){var x=b instanceof ii?Kt(b):new ii(b);if(x.g!="")E&&(x.g=E+"."+x.g),io(x,x.u);else{var K=u.location;x=K.protocol,E=E?E+"."+K.hostname:K.hostname,K=+K.port;const j=new ii(null);x&&on(j,x),E&&(j.g=E),K&&io(j,K),b&&(j.h=b),x=j}return b=m.G,E=m.wa,b&&E&&ht(x,b,E),ht(x,"VER",m.ka),ur(m,x),x}function tc(m,E,b){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new yt(new ss({ab:b})):new yt(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}n=nc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fo(){}fo.prototype.g=function(m,E){return new Pn(m,E)};function Pn(m,E){dt.call(this),this.g=new uo(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Rs(this)}T(Pn,dt),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){_l(this.g)},Pn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var b={};b.__data__=m,m=b}else this.v&&(b={},b.__data__=Nn(m),m=b);E.i.push(new zt(E.Ya++,m)),E.I==3&&as(E)},Pn.prototype.N=function(){this.g.l=null,delete this.j,_l(this.g),delete this.g,Pn.Z.N.call(this)};function ic(m){Rt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const b in E){m=b;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(ic,Rt);function sc(){_n.call(this),this.status=1}T(sc,_n);function Rs(m){this.g=m}T(Rs,nc),Rs.prototype.ra=function(){ft(this.g,"a")},Rs.prototype.qa=function(m){ft(this.g,new ic(m))},Rs.prototype.pa=function(m){ft(this.g,new sc)},Rs.prototype.oa=function(){ft(this.g,"b")},fo.prototype.createWebChannel=fo.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,EC=function(){return new fo},TC=function(){return Hn()},_C=St,ym={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bn.NO_ERROR=0,Bn.TIMEOUT=8,Bn.HTTP_ERROR=6,wd=Bn,Ui.COMPLETE="complete",vC=Ui,nr.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",dt.prototype.listen=dt.prototype.J,cu=nr,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,yC=yt}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});const wE="@firebase/firestore",IE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Xm("@firebase/firestore");function Ia(){return Vr.logLevel}function ye(n,...e){if(Vr.logLevel<=Xe.DEBUG){const t=e.map(ug);Vr.debug(`Firestore (${il}): ${n}`,...t)}}function Ws(n,...e){if(Vr.logLevel<=Xe.ERROR){const t=e.map(ug);Vr.error(`Firestore (${il}): ${n}`,...t)}}function qa(n,...e){if(Vr.logLevel<=Xe.WARN){const t=e.map(ug);Vr.warn(`Firestore (${il}): ${n}`,...t)}}function ug(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,SC(n,i,t)}function SC(n,e,t){let i=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ws(i),new Error(i)}function ut(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||SC(e,r,i)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends to{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class a4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class l4{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0,42304);let i=this.i;const r=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Ko;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ko,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},f=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ko)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ut(typeof i.accessToken=="string",31837,{l:i}),new AC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class u4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new u4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ki(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ut(this.o===void 0,3512);const i=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const r=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ut(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=f4(40);for(let l=0;l<r.length;++l)i.length<20&&r[l]<t&&(i+=e.charAt(r[l]%62))}return i}}function We(n,e){return n<e?-1:n>e?1:0}function vm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),l=e.charAt(i);if(r!==l)return qp(r)===qp(l)?We(r,l):qp(r)?1:-1}return We(n.length,e.length)}const h4=55296,p4=57343;function qp(n){const e=n.charCodeAt(0);return e>=h4&&e<=p4}function za(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="__name__";class ps{constructor(e,t,i){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&De(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const l=ps.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return We(e.length,t.length)}static compareSegments(e,t){const i=ps.isNumericId(e),r=ps.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?ps.extractNumericId(e).compare(ps.extractNumericId(t)):vm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zo.fromString(e.substring(4,e.length-2))}}class Nt extends ps{construct(e,t,i){return new Nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new Nt(t)}static emptyPath(){return new Nt([])}}const m4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends ps{construct(e,t,i){return new mn(e,t,i)}static isValidIdentifier(e){return m4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RE}static keyField(){return new mn([RE])}static fromServerFormat(e){const t=[];let i="",r=0;const l=()=>{if(i.length===0)throw new Se(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new Se(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Se(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(i+=f,r++):(l(),r++)}if(l(),u)throw new Se(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(t)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Nt.fromString(e))}static fromName(e){return new Re(Nt.fromString(e).popFirst(5))}static empty(){return new Re(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(n,e,t){if(!t)throw new Se(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function y4(n,e,t,i){if(e===!0&&i===!0)throw new Se(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NE(n){if(!Re.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function dg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function gs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dg(n);throw new Se(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Lu(n,e){if(!CC(n))throw new Se(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Se(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=-62135596800,DE=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*DE);return new wt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ME)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DE}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ME;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Wt("string",wt._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new wt(0,0))}static max(){return new Ue(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=-1;function v4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ue.fromTimestamp(i===1e9?new wt(t+1,0):new wt(t,i));return new Yo(r,Re.empty(),e)}function _4(n){return new Yo(n.readTime,n.key,wu)}class Yo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Yo(Ue.min(),Re.empty(),wu)}static max(){return new Yo(Ue.max(),Re.empty(),wu)}}function T4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==E4)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let r=0,l=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++l,u&&l===r&&t()}),(g=>i(g)))})),u=!0,l===r&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((r=>r?se.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,l)=>{i.push(t.call(this,r,l))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,r)=>{const l=e.length,u=new Array(l);let f=0;for(let g=0;g<l;g++){const h=g;t(e[h]).next((_=>{u[h]=_,++f,f===l&&i(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new se(((i,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):i()};l()}))}}function A4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ol(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=-1;function yf(n){return n==null}function $d(n){return n===0&&1/n==-1/0}function C4(n){return typeof n=="number"&&Number.isInteger(n)&&!$d(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="";function b4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=PE(e)),e=w4(n.get(t),e);return PE(e)}function w4(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case bC:t+="";break;default:t+=l}}return t}function PE(n){return n+bC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function er(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,t,i,r,l){this.key=e,this.value=t,this.color=i??pn.RED,this.left=r??pn.EMPTY,this.right=l??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,l){return new pn(e??this.key,t??this.value,i??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const l=i(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,i),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return pn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,i,r,l){return this}insert(e,t,i){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VE(this.data.getIterator())}getIteratorFrom(e){return new VE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class VE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new di([])}unionWith(e){let t=new tn(mn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new di(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new IC("Invalid base64 string: "+l):l}})(e);return new gn(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const I4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(n){if(ut(!!n,39018),typeof n=="string"){let e=0;const t=I4.exec(n);if(ut(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qt(n.seconds),nanos:qt(n.nanos)}}function qt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qo(n){return typeof n=="string"?gn.fromBase64String(n):gn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="server_timestamp",RC="__type__",NC="__previous_value__",MC="__local_write_time__";function hg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[RC])==null?void 0:i.stringValue)===xC}function vf(n){const e=n.mapValue.fields[NC];return hg(e)?vf(e):e}function Iu(n){const e=Jo(n.mapValue.fields[MC].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,t,i,r,l,u,f,g,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=h,this.isUsingEmulator=_}}const Yd="(default)";class xu{constructor(e,t){this.projectId=e,this.database=t||Yd}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database===Yd}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="__type__",R4="__max__",gd={mapValue:{}},PC="__vector__",Jd="value";function Xo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hg(n)?4:M4(n)?9007199254740991:N4(n)?10:11:De(28295,{value:n})}function As(n,e){if(n===e)return!0;const t=Xo(n);if(t!==Xo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Iu(n).isEqual(Iu(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=Jo(r.timestampValue),f=Jo(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return Qo(r.bytesValue).isEqual(Qo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return qt(r.geoPointValue.latitude)===qt(l.geoPointValue.latitude)&&qt(r.geoPointValue.longitude)===qt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return qt(r.integerValue)===qt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=qt(r.doubleValue),f=qt(l.doubleValue);return u===f?$d(u)===$d(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return za(n.arrayValue.values||[],e.arrayValue.values||[],As);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},f=l.mapValue.fields||{};if(kE(u)!==kE(f))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(f[g]===void 0||!As(u[g],f[g])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function Ru(n,e){return(n.values||[]).find((t=>As(t,e)))!==void 0}function Ka(n,e){if(n===e)return 0;const t=Xo(n),i=Xo(e);if(t!==i)return We(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=qt(l.integerValue||l.doubleValue),g=qt(u.integerValue||u.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return UE(n.timestampValue,e.timestampValue);case 4:return UE(Iu(n),Iu(e));case 5:return vm(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=Qo(l),g=Qo(u);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),g=u.split("/");for(let h=0;h<f.length&&h<g.length;h++){const _=We(f[h],g[h]);if(_!==0)return _}return We(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=We(qt(l.latitude),qt(u.latitude));return f!==0?f:We(qt(l.longitude),qt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return LE(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,w,V,k;const f=l.fields||{},g=u.fields||{},h=(S=f[Jd])==null?void 0:S.arrayValue,_=(w=g[Jd])==null?void 0:w.arrayValue,T=We(((V=h==null?void 0:h.values)==null?void 0:V.length)||0,((k=_==null?void 0:_.values)==null?void 0:k.length)||0);return T!==0?T:LE(h,_)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===gd.mapValue&&u===gd.mapValue)return 0;if(l===gd.mapValue)return 1;if(u===gd.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),h=u.fields||{},_=Object.keys(h);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const S=vm(g[T],_[T]);if(S!==0)return S;const w=Ka(f[g[T]],h[_[T]]);if(w!==0)return w}return We(g.length,_.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function UE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=Jo(n),i=Jo(e),r=We(t.seconds,i.seconds);return r!==0?r:We(t.nanos,i.nanos)}function LE(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const l=Ka(t[r],i[r]);if(l)return l}return We(t.length,i.length)}function $a(n){return _m(n)}function _m(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Jo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Qo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const l of t.values||[])r?r=!1:i+=",",i+=_m(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const u of i)l?l=!1:r+=",",r+=`${u}:${_m(t.fields[u])}`;return r+"}"})(n.mapValue):De(61005,{value:n})}function Id(n){switch(Xo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vf(n);return e?16+Id(e):16;case 5:return 2*n.stringValue.length;case 6:return Qo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,l)=>r+Id(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return er(i.fields,((l,u)=>{r+=l.length+Id(u)})),r})(n.mapValue);default:throw De(13486,{value:n})}}function Tm(n){return!!n&&"integerValue"in n}function pg(n){return!!n&&"arrayValue"in n}function OE(n){return!!n&&"nullValue"in n}function HE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xd(n){return!!n&&"mapValue"in n}function N4(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[DC])==null?void 0:i.stringValue)===PC}function yu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return er(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=yu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yu(n.arrayValue.values[t]);return e}return{...n}}function M4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===R4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yu(t)}setAll(e){let t=mn.emptyPath(),i={},r=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,r),i={},r=[],t=f.popLast()}u?i[f.lastSegment()]=yu(u):r.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,r)}delete(e){const t=this.field(e.popLast());xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];xd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){er(t,((r,l)=>e[r]=l));for(const r of i)delete e[r]}clone(){return new Xn(yu(this.value))}}function kC(n){const e=[];return er(n.fields,((t,i)=>{const r=new mn([t]);if(xd(i)){const l=kC(i.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t,i,r,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new bn(e,0,Ue.min(),Ue.min(),Ue.min(),Xn.empty(),0)}static newFoundDocument(e,t,i,r){return new bn(e,1,t,Ue.min(),i,r,0)}static newNoDocument(e,t){return new bn(e,2,t,Ue.min(),Ue.min(),Xn.empty(),0)}static newUnknownDocument(e,t){return new bn(e,3,t,Ue.min(),Ue.min(),Xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t){this.position=e,this.inclusive=t}}function BE(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(l.field.isKeyField()?i=Re.comparator(Re.fromName(u.referenceValue),t.key):i=Ka(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function FE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!As(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t="asc"){this.field=e,this.dir=t}}function D4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{}class en extends VC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new k4(e,t,i):t==="array-contains"?new L4(e,i):t==="in"?new O4(e,i):t==="not-in"?new H4(e,i):t==="array-contains-any"?new B4(e,i):new en(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new V4(e,i):new U4(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ka(t,this.value)):t!==null&&Xo(this.value)===Xo(t)&&this.matchesComparison(Ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cs extends VC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Cs(e,t)}matches(e){return UC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UC(n){return n.op==="and"}function LC(n){return P4(n)&&UC(n)}function P4(n){for(const e of n.filters)if(e instanceof Cs)return!1;return!0}function Em(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(LC(n))return n.filters.map((e=>Em(e))).join(",");{const e=n.filters.map((t=>Em(t))).join(",");return`${n.op}(${e})`}}function OC(n,e){return n instanceof en?(function(i,r){return r instanceof en&&i.op===r.op&&i.field.isEqual(r.field)&&As(i.value,r.value)})(n,e):n instanceof Cs?(function(i,r){return r instanceof Cs&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((l,u,f)=>l&&OC(u,r.filters[f])),!0):!1})(n,e):void De(19439)}function HC(n){return n instanceof en?(function(t){return`${t.field.canonicalString()} ${t.op} ${$a(t.value)}`})(n):n instanceof Cs?(function(t){return t.op.toString()+" {"+t.getFilters().map(HC).join(" ,")+"}"})(n):"Filter"}class k4 extends en{constructor(e,t,i){super(e,t,i),this.key=Re.fromName(i.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class V4 extends en{constructor(e,t){super(e,"in",t),this.keys=BC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class U4 extends en{constructor(e,t){super(e,"not-in",t),this.keys=BC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function BC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Re.fromName(i.referenceValue)))}class L4 extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pg(t)&&Ru(t.arrayValue,this.value)}}class O4 extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ru(this.value.arrayValue,t)}}class H4 extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ru(this.value.arrayValue,t)}}class B4 extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ru(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,t=null,i=[],r=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function GE(n,e=null,t=[],i=[],r=null,l=null,u=null){return new F4(n,e,t,i,r,l,u)}function mg(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Em(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),yf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$a(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$a(i))).join(",")),e.Te=t}return e.Te}function gg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!D4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FE(n.startAt,e.startAt)&&FE(n.endAt,e.endAt)}function Sm(n){return Re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t=null,i=[],r=[],l=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function G4(n,e,t,i,r,l,u,f){return new _f(n,e,t,i,r,l,u,f)}function Tf(n){return new _f(n)}function qE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function q4(n){return n.collectionGroup!==null}function vu(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new tn(mn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Xd(l,i))})),t.has(mn.keyField().canonicalString())||e.Ie.push(new Xd(mn.keyField(),i))}return e.Ie}function ys(n){const e=Oe(n);return e.Ee||(e.Ee=z4(e,vu(n))),e.Ee}function z4(n,e){if(n.limitType==="F")return GE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Xd(r.field,l)}));const t=n.endAt?new Qd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Qd(n.startAt.position,n.startAt.inclusive):null;return GE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Am(n,e,t){return new _f(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ef(n,e){return gg(ys(n),ys(e))&&n.limitType===e.limitType}function FC(n){return`${mg(ys(n))}|lt:${n.limitType}`}function xa(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>HC(r))).join(", ")}]`),yf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>$a(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>$a(r))).join(",")),`Target(${i})`})(ys(n))}; limitType=${n.limitType})`}function Sf(n,e){return e.isFoundDocument()&&(function(i,r){const l=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Re.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,r){for(const l of vu(i))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const l of i.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,f,g){const h=BE(u,f,g);return u.inclusive?h<=0:h<0})(i.startAt,vu(i),r)||i.endAt&&!(function(u,f,g){const h=BE(u,f,g);return u.inclusive?h>=0:h>0})(i.endAt,vu(i),r))})(n,e)}function K4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GC(n){return(e,t)=>{let i=!1;for(const r of vu(n)){const l=$4(r,e,t);if(l!==0)return l;i=i||r.field.isKeyField()}return 0}}function $4(n,e,t){const i=n.field.isKeyField()?Re.comparator(e.key,t.key):(function(l,u,f){const g=u.data.field(l),h=f.data.field(l);return g!==null&&h!==null?Ka(g,h):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,l]of i)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){er(this.inner,((t,i)=>{for(const[r,l]of i)e(r,l)}))}isEmpty(){return wC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=new Mt(Re.comparator);function js(){return Y4}const qC=new Mt(Re.comparator);function du(...n){let e=qC;for(const t of n)e=e.insert(t.key,t);return e}function zC(n){let e=qC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Nr(){return _u()}function KC(){return _u()}function _u(){return new Or((n=>n.toString()),((n,e)=>n.isEqual(e)))}const J4=new Mt(Re.comparator),Q4=new tn(Re.comparator);function je(...n){let e=Q4;for(const t of n)e=e.add(t);return e}const X4=new tn(We);function W4(){return X4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$d(e)?"-0":e}}function $C(n){return{integerValue:""+n}}function j4(n,e){return C4(e)?$C(e):yg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this._=void 0}}function Z4(n,e,t){return n instanceof Wd?(function(r,l){const u={fields:{[RC]:{stringValue:xC},[MC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&hg(l)&&(l=vf(l)),l&&(u.fields[NC]=l),{mapValue:u}})(t,e):n instanceof Ya?JC(n,e):n instanceof Nu?QC(n,e):(function(r,l){const u=YC(r,l),f=zE(u)+zE(r.Ae);return Tm(u)&&Tm(r.Ae)?$C(f):yg(r.serializer,f)})(n,e)}function eO(n,e,t){return n instanceof Ya?JC(n,e):n instanceof Nu?QC(n,e):t}function YC(n,e){return n instanceof jd?(function(i){return Tm(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Wd extends Af{}class Ya extends Af{constructor(e){super(),this.elements=e}}function JC(n,e){const t=XC(e);for(const i of n.elements)t.some((r=>As(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Nu extends Af{constructor(e){super(),this.elements=e}}function QC(n,e){let t=XC(e);for(const i of n.elements)t=t.filter((r=>!As(r,i)));return{arrayValue:{values:t}}}class jd extends Af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function zE(n){return qt(n.integerValue||n.doubleValue)}function XC(n){return pg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,t){this.field=e,this.transform=t}}function nO(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Ya&&r instanceof Ya||i instanceof Nu&&r instanceof Nu?za(i.elements,r.elements,As):i instanceof jd&&r instanceof jd?As(i.Ae,r.Ae):i instanceof Wd&&r instanceof Wd})(n.transform,e.transform)}class iO{constructor(e,t){this.version=e,this.transformResults=t}}class vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Cf{}function WC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ZC(n.key,vs.none()):new Ou(n.key,n.data,vs.none());{const t=n.data,i=Xn.empty();let r=new tn(mn.comparator);for(let l of e.fields)if(!r.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),r=r.add(l)}return new tr(n.key,i,new di(r.toArray()),vs.none())}}function sO(n,e,t){n instanceof Ou?(function(r,l,u){const f=r.value.clone(),g=$E(r.fieldTransforms,l,u.transformResults);f.setAll(g),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof tr?(function(r,l,u){if(!Rd(r.precondition,l))return void l.convertToUnknownDocument(u.version);const f=$E(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(jC(r)),g.setAll(f),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Tu(n,e,t,i){return n instanceof Ou?(function(l,u,f,g){if(!Rd(l.precondition,u))return f;const h=l.value.clone(),_=YE(l.fieldTransforms,g,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof tr?(function(l,u,f,g){if(!Rd(l.precondition,u))return f;const h=YE(l.fieldTransforms,g,u),_=u.data;return _.setAll(jC(l)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(l,u,f){return Rd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function oO(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),l=YC(i.transform,r||null);l!=null&&(t===null&&(t=Xn.empty()),t.set(i.field,l))}return t||null}function KE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&za(i,r,((l,u)=>nO(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ou extends Cf{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class tr extends Cf{constructor(e,t,i,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function jC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function $E(n,e,t){const i=new Map;ut(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,f=e.data.field(l.field);i.set(l.field,eO(u,f,t[r]))}return i}function YE(n,e,t){const i=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);i.set(r.field,Z4(l,u,e))}return i}class ZC extends Cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rO extends Cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&sO(l,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Tu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Tu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=KC();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(r.key)?null:f;const g=WC(u,f);g!==null&&i.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,((t,i)=>KE(t,i)))&&za(this.baseMutations,e.baseMutations,((t,i)=>KE(t,i)))}}class vg{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ut(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return J4})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,i[u].version);return new vg(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,tt;function cO(n){switch(n){case ae.OK:return De(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function eb(n){if(n===void 0)return Ws("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Xt.OK:return ae.OK;case Xt.CANCELLED:return ae.CANCELLED;case Xt.UNKNOWN:return ae.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return ae.INTERNAL;case Xt.UNAVAILABLE:return ae.UNAVAILABLE;case Xt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Xt.NOT_FOUND:return ae.NOT_FOUND;case Xt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Xt.ABORTED:return ae.ABORTED;case Xt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Xt.DATA_LOSS:return ae.DATA_LOSS;default:return De(39323,{code:n})}}(tt=Xt||(Xt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new zo([4294967295,4294967295],0);function JE(n){const e=dO().encode(n),t=new gC;return t.update(e),new Uint8Array(t.digest())}function QE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new zo([t,i],0),new zo([r,l],0)]}class _g{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(i<0)throw new fu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=zo.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(zo.fromNumber(i)));return r.compare(fO)===1&&(r=new zo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=JE(e),[i,r]=QE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,r,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new _g(l,r,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=JE(e),[i,r]=QE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,r,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t,i,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new bf(Ue.min(),r,new Mt(We),js(),je())}}class Hu{constructor(e,t,i,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Hu(i,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class tb{constructor(e,t){this.targetId=e,this.Ce=t}}class nb{constructor(e,t,i=gn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class XE{constructor(){this.ve=0,this.Fe=WE(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),i=je();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:De(38017,{changeType:l})}})),new Hu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=WE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hO{constructor(e){this.Ge=e,this.ze=new Map,this.je=js(),this.Je=yd(),this.He=yd(),this.Ye=new Mt(We)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(Sm(l))if(i===0){const u=new Re(l.path);this.et(t,u,bn.newNoDocument(u,Ue.min()))}else ut(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),g=f?this.ct(f,e,u):1;if(g!==0){this.it(t);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:l=0}=t;let u,f;try{u=Qo(i).toUint8Array()}catch(g){if(g instanceof IC)return qa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new _g(u,r,l)}catch(g){return qa(g instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&Sm(f.target)){const g=new Re(f.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,bn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=je();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((g=>{const h=this.ot(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const r=new bf(e,t,this.Ye,this.je,i);return this.je=js(),this.Je=yd(),this.He=yd(),this.Ye=new Mt(We),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new XE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new tn(We),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new tn(We),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yd(){return new Mt(Re.comparator)}function WE(){return new Mt(Re.comparator)}const pO={asc:"ASCENDING",desc:"DESCENDING"},mO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gO={and:"AND",or:"OR"};class yO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cm(n,e){return n.useProto3Json||yf(e)?e:{value:e}}function Zd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ib(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vO(n,e){return Zd(n,e.toTimestamp())}function _s(n){return ut(!!n,49232),Ue.fromTimestamp((function(t){const i=Jo(t);return new wt(i.seconds,i.nanos)})(n))}function Tg(n,e){return bm(n,e).canonicalString()}function bm(n,e){const t=(function(r){return new Nt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function sb(n){const e=Nt.fromString(n);return ut(ub(e),10190,{key:e.toString()}),e}function wm(n,e){return Tg(n.databaseId,e.path)}function zp(n,e){const t=sb(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re(rb(t))}function ob(n,e){return Tg(n.databaseId,e)}function _O(n){const e=sb(n);return e.length===4?Nt.emptyPath():rb(e)}function Im(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rb(n){return ut(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function jE(n,e,t){return{name:wm(n,e),fields:t.value.mapValue.fields}}function TO(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:De(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(h,_){return h.useProto3Json?(ut(_===void 0||typeof _=="string",58123),gn.fromBase64String(_||"")):(ut(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),gn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const _=h.code===void 0?ae.UNKNOWN:eb(h.code);return new Se(_,h.message||"")})(u);t=new nb(i,r,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=zp(n,i.document.name),l=_s(i.document.updateTime),u=i.document.createTime?_s(i.document.createTime):Ue.min(),f=new Xn({mapValue:{fields:i.document.fields}}),g=bn.newFoundDocument(r,l,u,f),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Nd(h,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=zp(n,i.document),l=i.readTime?_s(i.readTime):Ue.min(),u=bn.newNoDocument(r,l),f=i.removedTargetIds||[];t=new Nd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=zp(n,i.document),l=i.removedTargetIds||[];t=new Nd([],l,r,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:l}=i,u=new uO(r,l),f=i.targetId;t=new tb(f,u)}}return t}function EO(n,e){let t;if(e instanceof Ou)t={update:jE(n,e.key,e.value)};else if(e instanceof ZC)t={delete:wm(n,e.key)};else if(e instanceof tr)t={update:jE(n,e.key,e.data),updateMask:NO(e.fieldMask)};else{if(!(e instanceof rO))return De(16599,{Vt:e.type});t={verify:wm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof Wd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ya)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof jd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw De(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:vO(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De(27497)})(n,e.precondition)),t}function SO(n,e){return n&&n.length>0?(ut(e!==void 0,14353),n.map((t=>(function(r,l){let u=r.updateTime?_s(r.updateTime):_s(l);return u.isEqual(Ue.min())&&(u=_s(l)),new iO(u,r.transformResults||[])})(t,e)))):[]}function AO(n,e){return{documents:[ob(n,e.path)]}}function CO(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=ob(n,r);const l=(function(h){if(h.length!==0)return lb(Cs.create(h,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(h){if(h.length!==0)return h.map((_=>(function(S){return{field:Ra(S.field),direction:IO(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Cm(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function bO(n){let e=_O(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ut(i===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const S=ab(T);return S instanceof Cs&&LC(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(V){return new Xd(Na(V.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,yf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,w=T.values||[];return new Qd(w,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,w=T.values||[];return new Qd(w,S)})(t.endAt)),G4(e,r,u,l,f,"F",g,h)}function wO(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ab(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Na(t.unaryFilter.field);return en.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Na(t.unaryFilter.field);return en.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Na(t.unaryFilter.field);return en.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Na(t.unaryFilter.field);return en.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return en.create(Na(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Cs.create(t.compositeFilter.filters.map((i=>ab(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function IO(n){return pO[n]}function xO(n){return mO[n]}function RO(n){return gO[n]}function Ra(n){return{fieldPath:n.canonicalString()}}function Na(n){return mn.fromServerFormat(n.fieldPath)}function lb(n){return n instanceof en?(function(t){if(t.op==="=="){if(HE(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NAN"}};if(OE(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(HE(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NOT_NAN"}};if(OE(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ra(t.field),op:xO(t.op),value:t.value}}})(n):n instanceof Cs?(function(t){const i=t.getFilters().map((r=>lb(r)));return i.length===1?i[0]:{compositeFilter:{op:RO(t.op),filters:i}}})(n):De(54877,{filter:n})}function NO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ub(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t,i,r,l=Ue.min(),u=Ue.min(),f=gn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.yt=e}}function DO(n){const e=bO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this.Cn=new kO}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Yo.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class kO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new tn(Nt.comparator),l=!r.has(i);return this.index[t]=r.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new tn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cb=41943040;class Qn{static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(cb,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ja(0)}static cr(){return new Ja(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="LruGarbageCollector",VO=1048576;function tS([n,e],[t,i]){const r=We(n,t);return r===0?We(e,i):r}class UO{constructor(e){this.Ir=e,this.buffer=new tn(tS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();tS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(eS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ol(t)?ye(eS,"Ignoring IndexedDB error during garbage collection: ",t):await sl(t)}await this.Vr(3e5)}))}}class OO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(gf.ce);const i=new UO(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(ZE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,l,u,f,g,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),Ia()<=Xe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(f-u)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(h-g)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function HO(n,e){return new OO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.changes=new Or((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&Tu(i.mutation,r,di.empty(),wt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=je()){const r=Nr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((l=>{let u=du();return l.forEach(((f,g)=>{u=u.insert(f,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Nr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,je())))}populateOverlays(e,t,i){const r=[];return i.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,r){let l=js();const u=_u(),f=(function(){return _u()})();return t.forEach(((g,h)=>{const _=i.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof tr)?l=l.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),Tu(_.mutation,h,_.mutation.getFieldMask(),wt.now())):u.set(h.key,di.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>f.set(h,new FO(_,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=_u();let r=new Mt(((u,f)=>u-f)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((g=>{const h=t.get(g);if(h===null)return;let _=i.get(g)||di.empty();_=f.applyToLocalView(h,_),i.set(g,_);const T=(r.get(f.batchId)||je()).add(g);r=r.insert(f.batchId,T)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),h=g.key,_=g.value,T=KC();_.forEach((S=>{if(!l.has(S)){const w=WC(t.get(S),i.get(S));w!==null&&T.set(S,w),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(u){return Re.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):q4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-l.size):se.resolve(Nr());let f=wu,g=l;return u.next((h=>se.forEach(h,((_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{g=g.insert(_,S)}))))).next((()=>this.populateOverlays(e,h,l))).next((()=>this.computeViews(e,g,h,je()))).next((_=>({batchId:f,changes:zC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((i=>{let r=du();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const l=t.collectionGroup;let u=du();return this.indexManager.getCollectionParents(e,l).next((f=>se.forEach(f,(g=>{const h=(function(T,S){return new _f(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((_=>{_.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,r)))).next((u=>{l.forEach(((g,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,bn.newInvalidDocument(_)))}));let f=du();return u.forEach(((g,h)=>{const _=l.get(g);_!==void 0&&Tu(_.mutation,h,di.empty(),wt.now()),Sf(t,h)&&(f=f.insert(g,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:_s(r.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:DO(r.bundledQuery),readTime:_s(r.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.overlays=new Mt(Re.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Nr();return se.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&i.set(r,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const r=Nr(),l=t.length+1,u=new Re(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,h=g.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===l&&g.largestBatchId>i&&r.set(g.getKey(),g)}return se.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let l=new Mt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=l.get(h.largestBatchId);_===null&&(_=Nr(),l=l.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const f=Nr(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,_)=>f.set(h,_))),!(f.size()>=r)););return se.resolve(f)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new lO(t,i));let l=this.qr.get(t);l===void 0&&(l=je(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this.Qr=new tn(an.$r),this.Ur=new tn(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new an(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new an(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Re(new Nt([])),i=new an(t,e),r=new an(t,e+1),l=[];return this.Ur.forEachInRange([i,r],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Re(new Nt([])),i=new an(t,e),r=new an(t,e+1);let l=je();return this.Ur.forEachInRange([i,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new an(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class an{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Re.comparator(e.key,t.key)||We(e.Yr,t.Yr)}static Kr(e,t){return We(e.Yr,t.Yr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new tn(an.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new aO(l,t,i,r);this.mutationQueue.push(u);for(const f of r)this.Zr=this.Zr.add(new an(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),l=r<0?0:r;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?fg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new an(t,0),r=new an(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,r],(u=>{const f=this.Xr(u.Yr);l.push(f)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tn(We);return t.forEach((r=>{const l=new an(r,0),u=new an(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{i=i.add(f.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let l=i;Re.isDocumentKey(l)||(l=l.child(""));const u=new an(new Re(l),0);let f=new tn(We);return this.Zr.forEachWhile((g=>{const h=g.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(f=f.add(g.Yr)),!0)}),u),se.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ut(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(r=>{const l=new an(r.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new an(t,0),r=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.ri=e,this.docs=(function(){return new Mt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),l=r?r.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let i=js();return t.forEach((r=>{const l=this.docs.get(r);i=i.insert(r,l?l.document.mutableCopy():bn.newInvalidDocument(r))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let l=js();const u=t.path,f=new Re(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:h,value:{document:_}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||T4(_4(_),i)<=0||(r.has(_.key)||Sf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,i,r){De(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new JO(this)}getSize(e){return se.resolve(this.size)}}class JO extends BO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.persistence=e,this.si=new Or((t=>mg(t)),gg),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Eg,this.targetCount=0,this.ai=Ja.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ja(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let r=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),se.waitFor(l).next((()=>r))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t){this.ui={},this.overlays={},this.ci=new gf(0),this.li=!1,this.li=!0,this.hi=new KO,this.referenceDelegate=e(this),this.Pi=new QO(this),this.indexManager=new PO,this.remoteDocumentCache=(function(r){return new YO(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new MO(t),this.Ii=new qO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new $O(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const r=new XO(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class XO extends S4{constructor(e){super(),this.currentSequenceNumber=e}}class Sg{constructor(e){this.persistence=e,this.Ri=new Eg,this.Vi=null}static mi(e){return new Sg(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const r=Re.fromPath(i);return this.gi(e,r).next((l=>{l||t.removeEntry(r,Ue.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ef{constructor(e,t){this.persistence=e,this.pi=new Or((i=>b4(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=HO(this,t)}static mi(e,t){return new ef(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,r)=>this.br(e,i,r).next((l=>l?se.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,l.removeEntry(u,Ue.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Id(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=je(),r=je();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Ag(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Fk()?8:A4(In())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,r,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new WO;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(Ia()<=Xe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",xa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Ia()<=Xe.DEBUG&&ye("QueryEngine","Query:",xa(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Ia()<=Xe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",xa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(t))):se.resolve())}ys(e,t){if(qE(t))return se.resolve(null);let i=ys(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Am(t,null,"F"),i=ys(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=je(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const h=this.Ds(t,f);return this.Cs(t,h,u,g.readTime)?this.ys(e,Am(t,null,"F")):this.vs(e,h,t,g)}))))})))))}ws(e,t,i,r){return qE(t)||r.isEqual(Ue.min())?se.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,r)?se.resolve(null):(Ia()<=Xe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xa(t)),this.vs(e,u,t,v4(r,wu)).next((f=>f)))}))}Ds(e,t){let i=new tn(GC(e));return t.forEach(((r,l)=>{Sf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,i){return Ia()<=Xe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",xa(t)),this.ps.getDocumentsMatchingQuery(e,t,Yo.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="LocalStore",ZO=3e8;class e5{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Mt(We),this.xs=new Or((l=>mg(l)),gg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function t5(n,e,t,i){return new e5(n,e,t,i)}async function fb(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let g=je();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}for(const h of l){f.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function n5(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,h,_){const T=h.batch,S=T.keys();let w=se.resolve();return S.forEach((V=>{w=w.next((()=>_.getEntry(g,V))).next((k=>{const P=h.docVersions.get(V);ut(P!==null,48541),k.version.compareTo(P)<0&&(T.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),_.addEntry(k)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=je();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(g=g.add(f.batch.mutations[h].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function hb(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function i5(n,e){const t=Oe(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const f=[];e.targetChanges.forEach(((_,T)=>{const S=r.get(T);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(gn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,i)),r=r.insert(T,w),(function(k,P,$){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=ZO?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,w,_)&&f.push(t.Pi.updateTargetData(l,w))}));let g=js(),h=je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(s5(l,u,e.documentUpdates).next((_=>{g=_.ks,h=_.qs}))),!i.isEqual(Ue.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return se.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,h))).next((()=>g))})).then((l=>(t.Ms=r,l)))}function s5(n,e,t){let i=je(),r=je();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=js();return t.forEach(((f,g)=>{const h=l.get(f);g.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(f)),g.isNoDocument()&&g.version.isEqual(Ue.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):ye(Cg,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",g.version)})),{ks:u,qs:r}}))}function o5(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=fg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function r5(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((l=>l?(r=l,se.resolve(r)):t.Pi.allocateTargetId(i).next((u=>(r=new Bo(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function xm(n,e,t){const i=Oe(n),r=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!ol(u))throw u;ye(Cg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function nS(n,e,t){const i=Oe(n);let r=Ue.min(),l=je();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,_){const T=Oe(g),S=T.xs.get(_);return S!==void 0?se.resolve(T.Ms.get(S)):T.Pi.getTargetData(h,_)})(i,u,ys(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?r:Ue.min(),t?l:je()))).next((f=>(a5(i,K4(e),f),{documents:f,Qs:l})))))}function a5(n,e,t){let i=n.Os.get(e)||Ue.min();t.forEach(((r,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class iS{constructor(){this.activeTargetIds=W4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l5{constructor(){this.Mo=new iS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new iS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="ConnectivityMonitor";class oS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(sS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(sS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd=null;function Rm(){return vd===null?vd=(function(){return 268435456+Math.round(2147483648*Math.random())})():vd++,"0x"+vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="RestConnection",c5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class d5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Yd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,l){const u=Rm(),f=this.zo(e,t.toUriEncodedString());ye(Kp,`Sending RPC '${e}' ${u}:`,f,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,l);const{host:h}=new URL(f),_=el(h);return this.Jo(e,f,g,i,_).then((T=>(ye(Kp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw qa(Kp,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,r,l,u){return this.Go(e,t,i,r,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),i&&i.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const i=c5[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class h5 extends d5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,l){const u=Rm();return new Promise(((f,g)=>{const h=new yC;h.setWithCredentials(!0),h.listenOnce(vC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case wd.NO_ERROR:const T=h.getResponseJson();ye(An,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case wd.TIMEOUT:ye(An,`RPC '${e}' ${u} timed out`),g(new Se(ae.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const S=h.getStatus();if(ye(An,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const V=w==null?void 0:w.error;if(V&&V.status&&V.message){const k=(function($){const B=$.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(B)>=0?B:ae.UNKNOWN})(V.status);g(new Se(k,V.message))}else g(new Se(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else g(new Se(ae.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ye(An,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ye(An,`RPC '${e}' ${u} sending request:`,r),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const r=Rm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=EC(),f=TC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(g.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const _=l.join("");ye(An,`Creating RPC '${e}' stream ${r}: ${_}`,g);const T=u.createWebChannel(_,g);this.I_(T);let S=!1,w=!1;const V=new f5({Yo:P=>{w?ye(An,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(S||(ye(An,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),ye(An,`RPC '${e}' stream ${r} sending:`,P),T.send(P))},Zo:()=>T.close()}),k=(P,$,B)=>{P.listen($,(Z=>{try{B(Z)}catch(le){setTimeout((()=>{throw le}),0)}}))};return k(T,cu.EventType.OPEN,(()=>{w||(ye(An,`RPC '${e}' stream ${r} transport opened.`),V.o_())})),k(T,cu.EventType.CLOSE,(()=>{w||(w=!0,ye(An,`RPC '${e}' stream ${r} transport closed`),V.a_(),this.E_(T))})),k(T,cu.EventType.ERROR,(P=>{w||(w=!0,qa(An,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),V.a_(new Se(ae.UNAVAILABLE,"The operation could not be completed")))})),k(T,cu.EventType.MESSAGE,(P=>{var $;if(!w){const B=P.data[0];ut(!!B,16349);const Z=B,le=(Z==null?void 0:Z.error)||(($=Z[0])==null?void 0:$.error);if(le){ye(An,`RPC '${e}' stream ${r} received error:`,le);const de=le.status;let pe=(function(R){const H=Xt[R];if(H!==void 0)return eb(H)})(de),N=le.message;pe===void 0&&(pe=ae.INTERNAL,N="Unknown error status: "+de+" with message "+le.message),w=!0,V.a_(new Se(pe,N)),T.close()}else ye(An,`RPC '${e}' stream ${r} received:`,B),V.u_(B)}})),k(f,_C.STAT_EVENT,(P=>{P.stat===ym.PROXY?ye(An,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===ym.NOPROXY&&ye(An,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function $p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n){return new yO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,t,i=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="PersistentStream";class mb{constructor(e,t,i,r,l,u,f,g){this.Mi=e,this.S_=i,this.b_=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Ws(t.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Se(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(rS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(rS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class p5 extends mb{constructor(e,t,i,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=TO(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ue.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?_s(u.readTime):Ue.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Im(this.serializer),t.addTarget=(function(l,u){let f;const g=u.target;if(f=Sm(g)?{documents:AO(l,g)}:{query:CO(l,g).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=ib(l,u.resumeToken);const h=Cm(l,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ue.min())>0){f.readTime=Zd(l,u.snapshotVersion.toTimestamp());const h=Cm(l,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=wO(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Im(this.serializer),t.removeTarget=e,this.q_(t)}}class m5 extends mb{constructor(e,t,i,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SO(e.writeResults,e.commitTime),i=_s(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Im(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>EO(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{}class y5 extends g5{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,bm(t,i),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(ae.UNKNOWN,l.toString())}))}Ho(e,t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,bm(t,i),r,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(ae.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class v5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ws(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="RemoteStore";class _5{constructor(e,t,i,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Hr(this)&&(ye(Ur,"Restarting streams for network reachability change."),await(async function(g){const h=Oe(g);h.Ea.add(4),await Bu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await If(h)})(this))}))})),this.Ra=new v5(i,r)}}async function If(n){if(Hr(n))for(const e of n.da)await e(!0)}async function Bu(n){for(const e of n.da)await e(!1)}function gb(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),xg(t)?Ig(t):rl(t).O_()&&wg(t,e))}function bg(n,e){const t=Oe(n),i=rl(t);t.Ia.delete(e),i.O_()&&yb(t,e),t.Ia.size===0&&(i.O_()?i.L_():Hr(t)&&t.Ra.set("Unknown"))}function wg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rl(n).Y_(e)}function yb(n,e){n.Va.Ue(e),rl(n).Z_(e)}function Ig(n){n.Va=new hO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),rl(n).start(),n.Ra.ua()}function xg(n){return Hr(n)&&!rl(n).x_()&&n.Ia.size>0}function Hr(n){return Oe(n).Ea.size===0}function vb(n){n.Va=void 0}async function T5(n){n.Ra.set("Online")}async function E5(n){n.Ia.forEach(((e,t)=>{wg(n,e)}))}async function S5(n,e){vb(n),xg(n)?(n.Ra.ha(e),Ig(n)):n.Ra.set("Unknown")}async function A5(n,e,t){if(n.Ra.set("Online"),e instanceof nb&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const f of l.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.Ia.delete(f),r.Va.removeTarget(f))})(n,e)}catch(i){ye(Ur,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await tf(n,i)}else if(e instanceof Nd?n.Va.Ze(e):e instanceof tb?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ue.min()))try{const i=await hb(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(h);_&&l.Ia.set(h,_.withResumeToken(g.resumeToken,u))}})),f.targetMismatches.forEach(((g,h)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(gn.EMPTY_BYTE_STRING,_.snapshotVersion)),yb(l,g);const T=new Bo(_.target,g,h,_.sequenceNumber);wg(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){ye(Ur,"Failed to raise snapshot:",i),await tf(n,i)}}async function tf(n,e,t){if(!ol(e))throw e;n.Ea.add(1),await Bu(n),n.Ra.set("Offline"),t||(t=()=>hb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(Ur,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await If(n)}))}function _b(n,e){return e().catch((t=>tf(n,t,e)))}async function xf(n){const e=Oe(n),t=Wo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fg;for(;C5(e);)try{const r=await o5(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,b5(e,r)}catch(r){await tf(e,r)}Tb(e)&&Eb(e)}function C5(n){return Hr(n)&&n.Ta.length<10}function b5(n,e){n.Ta.push(e);const t=Wo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Tb(n){return Hr(n)&&!Wo(n).x_()&&n.Ta.length>0}function Eb(n){Wo(n).start()}async function w5(n){Wo(n).ra()}async function I5(n){const e=Wo(n);for(const t of n.Ta)e.ea(t.mutations)}async function x5(n,e,t){const i=n.Ta.shift(),r=vg.from(i,e,t);await _b(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await xf(n)}async function R5(n,e){e&&Wo(n).X_&&await(async function(i,r){if((function(u){return cO(u)&&u!==ae.ABORTED})(r.code)){const l=i.Ta.shift();Wo(i).B_(),await _b(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r))),await xf(i)}})(n,e),Tb(n)&&Eb(n)}async function aS(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ye(Ur,"RemoteStore received new credentials");const i=Hr(t);t.Ea.add(3),await Bu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await If(t)}async function N5(n,e){const t=Oe(n);e?(t.Ea.delete(2),await If(t)):e||(t.Ea.add(2),await Bu(t),t.Ra.set("Unknown"))}function rl(n){return n.ma||(n.ma=(function(t,i,r){const l=Oe(t);return l.sa(),new p5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:T5.bind(null,n),t_:E5.bind(null,n),r_:S5.bind(null,n),H_:A5.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),xg(n)?Ig(n):n.Ra.set("Unknown")):(await n.ma.stop(),vb(n))}))),n.ma}function Wo(n){return n.fa||(n.fa=(function(t,i,r){const l=Oe(t);return l.sa(),new m5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:w5.bind(null,n),r_:R5.bind(null,n),ta:I5.bind(null,n),na:x5.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await xf(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(Ur,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t,i,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=l,this.deferred=new Ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,l){const u=Date.now()+i,f=new Rg(e,t,u,r,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ng(n,e){if(Ws("AsyncQueue",`${e}: ${n}`),ol(n))return new Se(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{static emptySet(e){return new Ha(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Re.comparator(t.key,i.key):(t,i)=>Re.comparator(t.key,i.key),this.keyedMap=du(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ha)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ha;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.ga=new Mt(Re.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Qa{constructor(e,t,i,r,l,u,f,g,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Qa(e,t,Ha.emptySet(t),u,i,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class D5{constructor(){this.queries=uS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Oe(t),l=r.queries;r.queries=uS(),l.forEach(((u,f)=>{for(const g of f.Sa)g.onError(i)}))})(this,new Se(ae.ABORTED,"Firestore shutting down"))}}function uS(){return new Or((n=>FC(n)),Ef)}async function Sb(n,e){const t=Oe(n);let i=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(i=2):(l=new M5,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const f=Ng(u,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Mg(t)}async function Ab(n,e){const t=Oe(n),i=e.query;let r=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function P5(n,e){const t=Oe(n);let i=!1;for(const r of e){const l=r.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(r)&&(i=!0);u.wa=r}}i&&Mg(t)}function k5(n,e,t){const i=Oe(n),r=i.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);i.queries.delete(e)}function Mg(n){n.Ca.forEach((e=>{e.next()}))}var Nm,cS;(cS=Nm||(Nm={})).Ma="default",cS.Cache="cache";class Cb{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.key=e}}class wb{constructor(e){this.key=e}}class V5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=GC(e),this.tu=new Ha(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new lS,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const S=r.get(_),w=Sf(this.query,T)?T:null,V=!!S&&this.mutatedKeys.has(S.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;S&&w?S.data.isEqual(w.data)?V!==k&&(i.track({type:3,doc:w}),P=!0):this.su(S,w)||(i.track({type:2,doc:w}),P=!0,(g&&this.eu(w,g)>0||h&&this.eu(w,h)<0)&&(f=!0)):!S&&w?(i.track({type:0,doc:w}),P=!0):S&&!w&&(i.track({type:1,doc:S}),P=!0,(g||h)&&(f=!0)),P&&(w?(u=u.add(w),l=k?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(w,V){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:P})}};return k(w)-k(V)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const f=t&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,h=g!==this.Za;return this.Za=g,u.length!==0||h?{snapshot:new Qa(this.query,e.tu,l,u,e.mutatedKeys,g===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new wb(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new bb(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dg="SyncEngine";class U5{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class L5{constructor(e){this.key=e,this.hu=!1}}class O5{constructor(e,t,i,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Or((f=>FC(f)),Ef),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Re.comparator),this.Au=new Map,this.Ru=new Eg,this.Vu={},this.mu=new Map,this.fu=Ja.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function H5(n,e,t=!0){const i=Db(n);let r;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await Ib(i,e,t,!0),r}async function B5(n,e){const t=Db(n);await Ib(t,e,!0,!1)}async function Ib(n,e,t,i){const r=await r5(n.localStore,ys(e)),l=r.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await F5(n,e,l,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&gb(n.remoteStore,r),f}async function F5(n,e,t,i,r){n.pu=(T,S,w)=>(async function(k,P,$,B){let Z=P.view.ru($);Z.Cs&&(Z=await nS(k.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,Z))));const le=B&&B.targetChanges.get(P.targetId),de=B&&B.targetMismatches.get(P.targetId)!=null,pe=P.view.applyChanges(Z,k.isPrimaryClient,le,de);return fS(k,P.targetId,pe.au),pe.snapshot})(n,T,S,w);const l=await nS(n.localStore,e,!0),u=new V5(e,l.Qs),f=u.ru(l.documents),g=Hu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=u.applyChanges(f,n.isPrimaryClient,g);fS(n,t,h.au);const _=new U5(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function G5(n,e,t){const i=Oe(n),r=i.Tu.get(e),l=i.Iu.get(r.targetId);if(l.length>1)return i.Iu.set(r.targetId,l.filter((u=>!Ef(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await xm(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&bg(i.remoteStore,r.targetId),Mm(i,r.targetId)})).catch(sl)):(Mm(i,r.targetId),await xm(i.localStore,r.targetId,!0))}async function q5(n,e){const t=Oe(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),bg(t.remoteStore,i.targetId))}async function z5(n,e,t){const i=W5(n);try{const r=await(function(u,f){const g=Oe(u),h=wt.now(),_=f.reduce(((w,V)=>w.add(V.key)),je());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let V=js(),k=je();return g.Ns.getEntries(w,_).next((P=>{V=P,V.forEach((($,B)=>{B.isValidDocument()||(k=k.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,V))).next((P=>{T=P;const $=[];for(const B of f){const Z=oO(B,T.get(B.key).overlayedDocument);Z!=null&&$.push(new tr(B.key,Z,kC(Z.value.mapValue),vs.exists(!0)))}return g.mutationQueue.addMutationBatch(w,h,$,f)})).next((P=>{S=P;const $=P.applyToLocalDocumentSet(T,k);return g.documentOverlayCache.saveOverlays(w,P.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:zC(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,f,g){let h=u.Vu[u.currentUser.toKey()];h||(h=new Mt(We)),h=h.insert(f,g),u.Vu[u.currentUser.toKey()]=h})(i,r.batchId,t),await Fu(i,r.changes),await xf(i.remoteStore)}catch(r){const l=Ng(r,"Failed to persist write");t.reject(l)}}async function xb(n,e){const t=Oe(n);try{const i=await i5(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=t.Au.get(l);u&&(ut(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?ut(u.hu,14607):r.removedDocuments.size>0&&(ut(u.hu,42227),u.hu=!1))})),await Fu(t,i,e)}catch(i){await sl(i)}}function dS(n,e,t){const i=Oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const g=Oe(u);g.onlineState=f;let h=!1;g.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(f)&&(h=!0)})),h&&Mg(g)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function K5(n,e,t){const i=Oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),l=r&&r.key;if(l){let u=new Mt(Re.comparator);u=u.insert(l,bn.newNoDocument(l,Ue.min()));const f=je().add(l),g=new bf(Ue.min(),new Map,new Mt(We),u,f);await xb(i,g),i.du=i.du.remove(l),i.Au.delete(e),Pg(i)}else await xm(i.localStore,e,!1).then((()=>Mm(i,e,t))).catch(sl)}async function $5(n,e){const t=Oe(n),i=e.batch.batchId;try{const r=await n5(t.localStore,e);Nb(t,i,null),Rb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Fu(t,r)}catch(r){await sl(r)}}async function Y5(n,e,t){const i=Oe(n);try{const r=await(function(u,f){const g=Oe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return g.mutationQueue.lookupMutationBatch(h,f).next((T=>(ut(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(h,T)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>g.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);Nb(i,e,t),Rb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Fu(i,r)}catch(r){await sl(r)}}function Rb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Nb(n,e,t){const i=Oe(n);let r=i.Vu[i.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Mm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Mb(n,i)}))}function Mb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(bg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Pg(n))}function fS(n,e,t){for(const i of t)i instanceof bb?(n.Ru.addReference(i.key,e),J5(n,i)):i instanceof wb?(ye(Dg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Mb(n,i.key)):De(19791,{wu:i})}function J5(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ye(Dg,"New document in limbo: "+t),n.Eu.add(i),Pg(n))}function Pg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Re(Nt.fromString(e)),i=n.fu.next();n.Au.set(i,new L5(t)),n.du=n.du.insert(t,i),gb(n.remoteStore,new Bo(ys(Tf(t.path)),i,"TargetPurposeLimboResolution",gf.ce))}}async function Fu(n,e,t){const i=Oe(n),r=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{u.push(i.pu(g,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(h){r.push(h);const T=Ag.As(g.targetId,h);l.push(T)}})))})),await Promise.all(u),i.Pu.H_(r),await(async function(g,h){const _=Oe(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(S=>se.forEach(S.Es,(w=>_.persistence.referenceDelegate.addReference(T,S.targetId,w))).next((()=>se.forEach(S.ds,(w=>_.persistence.referenceDelegate.removeReference(T,S.targetId,w)))))))))}catch(T){if(!ol(T))throw T;ye(Cg,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const w=_.Ms.get(S),V=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(V);_.Ms=_.Ms.insert(S,k)}}})(i.localStore,l))}async function Q5(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ye(Dg,"User change. New user:",e.toKey());const i=await fb(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new Se(ae.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Fu(t,i.Ls)}}function X5(n,e){const t=Oe(n),i=t.Au.get(e);if(i&&i.hu)return je().add(i.key);{let r=je();const l=t.Iu.get(e);if(!l)return r;for(const u of l){const f=t.Tu.get(u);r=r.unionWith(f.view.nu)}return r}}function Db(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K5.bind(null,e),e.Pu.H_=P5.bind(null,e.eventManager),e.Pu.yu=k5.bind(null,e.eventManager),e}function W5(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y5.bind(null,e),e}class nf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return t5(this.persistence,new jO,e.initialUser,this.serializer)}Cu(e){return new db(Sg.mi,this.serializer)}Du(e){return new l5}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nf.provider={build:()=>new nf};class j5 extends nf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ut(this.persistence.referenceDelegate instanceof ef,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new LO(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new db((i=>ef.mi(i,t)),this.serializer)}}class Dm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q5.bind(null,this.syncEngine),await N5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new D5})()}createDatastore(e){const t=wf(e.databaseInfo.databaseId),i=(function(l){return new h5(l)})(e.databaseInfo);return(function(l,u,f,g){return new y5(l,u,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,l,u,f){return new _5(i,r,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>dS(this.syncEngine,t,0)),(function(){return oS.v()?new oS:new u5})())}createSyncEngine(e,t){return(function(r,l,u,f,g,h,_){const T=new O5(r,l,u,f,g,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Oe(r);ye(Ur,"RemoteStore shutting down."),l.Ea.add(5),await Bu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Dm.provider={build:()=>new Dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="FirestoreClient";class Z5{constructor(e,t,i,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Cn.UNAUTHENTICATED,this.clientId=cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{ye(jo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ye(jo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ng(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Yp(n,e){n.asyncQueue.verifyOperationInProgress(),ye(jo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await fb(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function hS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await e3(n);ye(jo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>aS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>aS(e.remoteStore,r))),n._onlineComponents=e}async function e3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(jo,"Using user provided OfflineComponentProvider");try{await Yp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ae.FAILED_PRECONDITION||r.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;qa("Error using user provided cache. Falling back to memory cache: "+t),await Yp(n,new nf)}}else ye(jo,"Using default OfflineComponentProvider"),await Yp(n,new j5(void 0));return n._offlineComponents}async function kb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(jo,"Using user provided OnlineComponentProvider"),await hS(n,n._uninitializedComponentsProvider._online)):(ye(jo,"Using default OnlineComponentProvider"),await hS(n,new Dm))),n._onlineComponents}function t3(n){return kb(n).then((e=>e.syncEngine))}async function Pm(n){const e=await kb(n),t=e.eventManager;return t.onListen=H5.bind(null,e.syncEngine),t.onUnlisten=G5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=B5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=q5.bind(null,e.syncEngine),t}function n3(n,e,t={}){const i=new Ko;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,h){const _=new Pb({next:S=>{_.Nu(),u.enqueueAndForget((()=>Ab(l,T)));const w=S.docs.has(f);!w&&S.fromCache?h.reject(new Se(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&g&&g.source==="server"?h.reject(new Se(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new Cb(Tf(f.path),_,{includeMetadataChanges:!0,qa:!0});return Sb(l,T)})(await Pm(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firestore.googleapis.com",mS=!0;class gS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ub,this.ssl=mS}else this.host=e.host,this.ssl=e.ssl??mS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VO)throw new Se(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kg{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new r4;switch(i.type){case"firstParty":return new c4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=pS.get(t);i&&(ye("ComponentProvider","Removing Datastore"),pS.delete(t),i.terminate())})(this),Promise.resolve()}}function i3(n,e,t,i={}){var h;n=gs(n,kg);const r=el(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(DA(`https://${f}`),PA("Firestore",!0)),l.host!==Ub&&l.host!==f&&qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:r,emulatorOptions:i};if(!$o(g,u)&&(n._setSettings(g),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=Cn.MOCK_USER;else{_=Dk(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Se(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Cn(S)}n._authCredentials=new a4(new AC(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Rf(this.firestore,e,this._query)}}class jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Lu(t,jt._jsonSchema))return new jt(e,i||null,new Re(Nt.fromString(t.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Wt("string",jt._jsonSchemaVersion),referencePath:Wt("string")};class Mu extends Rf{constructor(e,t,i){super(e,t,Tf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new Re(e))}withConverter(e){return new Mu(this.firestore,e,this._path)}}function Eu(n,e,...t){if(n=xn(n),arguments.length===1&&(e=cg.newId()),g4("doc","path",e),n instanceof kg){const i=Nt.fromString(e,...t);return NE(i),new jt(n,null,new Re(i))}{if(!(n instanceof jt||n instanceof Mu))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nt.fromString(e,...t));return NE(i),new jt(n.firestore,n instanceof Mu?n.converter:null,new Re(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="AsyncQueue";class vS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pb(this,"async_queue_retry"),this._c=()=>{const i=$p();i&&ye(yS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=$p();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$p();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ko;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ol(e))throw e;ye(yS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ws("INTERNAL UNHANDLED ERROR: ",_S(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Rg.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&De(47125,{Pc:_S(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function _S(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const l of i)if(l in r&&typeof r[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Xa extends kg{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new vS,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vS(e),this._firestoreClient=void 0,await e}}}function s3(n,e){const t=typeof n=="object"?n:LA(),i=typeof n=="string"?n:Yd,r=jm(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const l=Nk("firestore");l&&i3(r,...l)}return r}function Vg(n){if(n._terminated)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||o3(n),n._firestoreClient}function o3(n){var i,r,l;const e=n._freezeSettings(),t=(function(f,g,h,_){return new x4(f,g,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Vb(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Z5(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xi(gn.fromBase64String(e))}catch(t){throw new Se(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xi(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,xi._jsonSchema))return xi.fromBase64String(e.bytes)}}xi._jsonSchemaVersion="firestore/bytes/1.0",xi._jsonSchema={type:Wt("string",xi._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ts._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,Ts._jsonSchema))return new Ts(e.latitude,e.longitude)}}Ts._jsonSchemaVersion="firestore/geoPoint/1.0",Ts._jsonSchema={type:Wt("string",Ts._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,Es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Es(e.vectorValues);throw new Se(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Es._jsonSchemaVersion="firestore/vectorValue/1.0",Es._jsonSchema={type:Wt("string",Es._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=/^__.*__$/;class a3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ou(e,this.data,t,this.fieldTransforms)}}class Lb{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new tr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ob(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class Df{constructor(e,t,i,r,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Df({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ob(this.Ac)&&r3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class l3{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||wf(e)}Cc(e,t,i,r=!1){return new Df({Ac:e,methodName:t,Dc:i,path:mn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hb(n){const e=n._freezeSettings(),t=wf(n._databaseId);return new l3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function u3(n,e,t,i,r,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);Lg("Data must be an object, but it was:",u,i);const f=Bb(i,u);let g,h;if(l.merge)g=new di(u.fieldMask),h=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const S=km(e,T,t);if(!u.contains(S))throw new Se(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Gb(_,S)||_.push(S)}g=new di(_),h=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,h=u.fieldTransforms;return new a3(new Xn(f),g,h)}class Pf extends Mf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pf}}function c3(n,e,t){return new Df({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ug extends Mf{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=c3(this,e,!0),i=this.vc.map((l=>Gu(l,t))),r=new Ya(i);return new tO(e.path,r)}isEqual(e){return e instanceof Ug&&$o(this.vc,e.vc)}}function d3(n,e,t,i){const r=n.Cc(1,e,t);Lg("Data must be an object, but it was:",r,i);const l=[],u=Xn.empty();er(i,((g,h)=>{const _=Og(e,g,t);h=xn(h);const T=r.yc(_);if(h instanceof Pf)l.push(_);else{const S=Gu(h,T);S!=null&&(l.push(_),u.set(_,S))}}));const f=new di(l);return new Lb(u,f,r.fieldTransforms)}function f3(n,e,t,i,r,l){const u=n.Cc(1,e,t),f=[km(e,i,t)],g=[r];if(l.length%2!=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(km(e,l[S])),g.push(l[S+1]);const h=[],_=Xn.empty();for(let S=f.length-1;S>=0;--S)if(!Gb(h,f[S])){const w=f[S];let V=g[S];V=xn(V);const k=u.yc(w);if(V instanceof Pf)h.push(w);else{const P=Gu(V,k);P!=null&&(h.push(w),_.set(w,P))}}const T=new di(h);return new Lb(_,T,u.fieldTransforms)}function Gu(n,e){if(Fb(n=xn(n)))return Lg("Unsupported field value:",e,n),Bb(n,e);if(n instanceof Mf)return(function(i,r){if(!Ob(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const l=[];let u=0;for(const f of i){let g=Gu(f,r.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,r){if((i=xn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return j4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=wt.fromDate(i);return{timestampValue:Zd(r.serializer,l)}}if(i instanceof wt){const l=new wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Zd(r.serializer,l)}}if(i instanceof Ts)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xi)return{bytesValue:ib(r.serializer,i._byteString)};if(i instanceof jt){const l=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Tg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Es)return(function(u,f){return{mapValue:{fields:{[DC]:{stringValue:PC},[Jd]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return yg(f.serializer,h)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${dg(i)}`)})(n,e)}function Bb(n,e){const t={};return wC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):er(n,((i,r)=>{const l=Gu(r,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Fb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof Ts||n instanceof xi||n instanceof jt||n instanceof Mf||n instanceof Es)}function Lg(n,e,t){if(!Fb(t)||!CC(t)){const i=dg(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function km(n,e,t){if((e=xn(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return Og(n,e);throw sf("Field path arguments must be of type string or ",n,!1,void 0,t)}const h3=new RegExp("[~\\*/\\[\\]]");function Og(n,e,t){if(e.search(h3)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nf(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sf(n,e,t,i,r){const l=i&&!i.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${i}`),u&&(g+=` in document ${r}`),g+=")"),new Se(ae.INVALID_ARGUMENT,f+n+g)}function Gb(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,t,i,r,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new p3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class p3 extends qb{data(){return super.data()}}function zb(n,e){return typeof e=="string"?Og(n,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Se(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g3{convertValue(e,t="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return er(e,((r,l)=>{i[r]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,r,l;const t=(l=(r=(i=e.fields)==null?void 0:i[Jd].arrayValue)==null?void 0:r.values)==null?void 0:l.map((u=>qt(u.doubleValue)));return new Es(t)}convertGeoPoint(e){return new Ts(qt(e.latitude),qt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=vf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const t=Jo(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Nt.fromString(e);ut(ub(i),9688,{name:e});const r=new xu(i.get(1),i.get(3)),l=new Re(i.popFirst(5));return r.isEqual(t)||Ws(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class hu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dr extends qb{constructor(e,t,i,r,l,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(zb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Dr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Dr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dr._jsonSchema={type:Wt("string",Dr._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Md extends Dr{data(e={}){return super.data(e)}}class Ba{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new hu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Md(this._firestore,this._userDataWriter,i.key,i,new hu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const g=new Md(r._firestore,r._userDataWriter,f.doc.key,f.doc,new hu(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Md(r._firestore,r._userDataWriter,f.doc.key,f.doc,new hu(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:v3(f.type),doc:g,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ba._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function v3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(n){n=gs(n,jt);const e=gs(n.firestore,Xa);return n3(Vg(e),n._key).then((t=>Yb(e,n,t)))}Ba._jsonSchemaVersion="firestore/querySnapshot/1.0",Ba._jsonSchema={type:Wt("string",Ba._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Kb extends g3{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function Vm(n,e,t){n=gs(n,jt);const i=gs(n.firestore,Xa),r=y3(n.converter,e,t);return $b(i,[u3(Hb(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,vs.none())])}function ES(n,e,t,...i){n=gs(n,jt);const r=gs(n.firestore,Xa),l=Hb(r);let u;return u=typeof(e=xn(e))=="string"||e instanceof Nf?f3(l,"updateDoc",n._key,e,t,i):d3(l,"updateDoc",n._key,e),$b(r,[u.toMutation(n._key,vs.exists(!0))])}function T3(n,...e){var g,h,_;n=xn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||TS(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(TS(e[i])){const T=e[i];e[i]=(g=T.next)==null?void 0:g.bind(T),e[i+1]=(h=T.error)==null?void 0:h.bind(T),e[i+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,u,f;if(n instanceof jt)u=gs(n.firestore,Xa),f=Tf(n._key.path),l={next:T=>{e[i]&&e[i](Yb(u,n,T))},error:e[i+1],complete:e[i+2]};else{const T=gs(n,Rf);u=gs(T.firestore,Xa),f=T._query;const S=new Kb(u);l={next:w=>{e[i]&&e[i](new Ba(u,S,T,w))},error:e[i+1],complete:e[i+2]},m3(n._query)}return(function(S,w,V,k){const P=new Pb(k),$=new Cb(w,P,V);return S.asyncQueue.enqueueAndForget((async()=>Sb(await Pm(S),$))),()=>{P.Nu(),S.asyncQueue.enqueueAndForget((async()=>Ab(await Pm(S),$)))}})(Vg(u),f,r,l)}function $b(n,e){return(function(i,r){const l=new Ko;return i.asyncQueue.enqueueAndForget((async()=>z5(await t3(i),r,l))),l.promise})(Vg(n),e)}function Yb(n,e,t){const i=t.docs.get(e._key),r=new Kb(n);return new Dr(n,r,e._key,i,new hu(t.hasPendingWrites,t.fromCache),e.converter)}function SS(...n){return new Ug("arrayUnion",n)}(function(e,t=!0){(function(r){il=r})(tl),Fa(new Pr("firestore",((i,{instanceIdentifier:r,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Xa(new l4(i.getProvider("auth-internal")),new d4(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Se(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(h.options.projectId,_)})(u,r),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),qo(wE,IE,e),qo(wE,IE,"esm2020")})();var E3="firebase",S3="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qo(E3,S3,"app");const A3={apiKey:"AIzaSyDj1IdjKsPsC0UKQeUtP8v3sCPo4IRQdt0",authDomain:"web-app-8b273.firebaseapp.com",projectId:"web-app-8b273",storageBucket:"web-app-8b273.firebasestorage.app",messagingSenderId:"512346814244",appId:"1:512346814244:web:a8322ebf02727a508ae5b1",measurementId:"G-B9H3XP1PNB"},Jb=UA(A3),Jp=s4(Jb),C3=new Ks,Su=s3(Jb),Qb=re.createContext(void 0),b3=({children:n})=>{const[e,t]=re.useState(null),[i,r]=re.useState(!0),[l,u]=re.useState(null),[f,g]=re.useState(null),h=async k=>{try{const P=Eu(Su,"users",k),$=await _3(P);$.exists()?u($.data().geminiApiKey||null):u(null)}catch(P){console.error("Error fetching API key:",P),u(null)}};re.useEffect(()=>{const k=$U(Jp,async P=>{t(P),P?await h(P.uid):u(null),r(!1)});return()=>k()},[]);const _=()=>g(null),T=async()=>{g(null);try{await hL(Jp,C3)}catch(k){console.error("Error signing in with Google",k);let P="Login failed. Please try again.";if(k.code==="auth/configuration-not-found")P=` Firebase Console 
 Authentication  'Get Started'`;else if(k.code==="auth/operation-not-allowed")P=` Google 
 Firebase Console > Authentication > Sign-in method  Google`;else if(k.code==="auth/unauthorized-domain")P=` (Unauthorized Domain)

 (${window.location.hostname})  Firebase 
 Firebase Console > Authentication > Settings > Authorized domains `;else{if(k.code==="auth/popup-closed-by-user")return;k.message&&(P=`Login failed: ${k.message}`)}g(P)}},S=async()=>{try{await YU(Jp),u(null),g(null)}catch(k){console.error("Error signing out",k)}},w=async k=>{if(e)try{await Vm(Eu(Su,"users",e.uid),{geminiApiKey:k,updatedAt:new Date().toISOString(),email:e.email},{merge:!0}),u(k)}catch(P){throw console.error("Error saving API key:",P),P}},V=async()=>{if(e)try{await Vm(Eu(Su,"users",e.uid),{geminiApiKey:null,updatedAt:new Date().toISOString()},{merge:!0}),u(null)}catch(k){throw console.error("Error removing API key:",k),k}};return C.jsx(Qb.Provider,{value:{user:e,loading:i,apiKey:l,error:f,signInWithGoogle:T,signOut:S,saveApiKey:w,removeApiKey:V,clearError:_},children:n})},Xb=()=>{const n=re.useContext(Qb);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},w3=()=>{const{user:n,apiKey:e,saveApiKey:t,removeApiKey:i,signOut:r}=Xb(),[l,u]=re.useState([{id:"1",date:new Date().toISOString().split("T")[0],dateType:"date",categorizedContent:{},otherInformation:""}]),[f,g]=re.useState("profile"),[h,_]=re.useState(!1),[T,S]=re.useState({});re.useEffect(()=>{if(!n){S({});return}const oe=T3(Eu(Su,"users",n.uid),Ae=>{if(Ae.exists()){const Ce=Ae.data();S(Ce.customItems||{})}});return()=>oe()},[n]);const w=async(oe,Ae)=>{if(!n)return;const Ce=Eu(Su,"users",n.uid);try{await ES(Ce,{[`customItems.${oe}`]:SS(Ae)})}catch(ke){console.error("Error adding custom item:",ke),await Vm(Ce,{customItems:{[oe]:[Ae]}},{merge:!0}),await ES(Ce,{[`customItems.${oe}`]:SS(Ae)})}},[V,k]=re.useState(""),[P,$]=re.useState([]),[B,Z]=re.useState(-1),[le,de]=re.useState(!1),[pe,N]=re.useState(!1),[M,R]=re.useState(!1),[H,O]=re.useState(null),[q,D]=re.useState({age:"65",gender:"male",underlying_diseases:["Hypertension","Diabetes Mellitus"],control_quality:"",management_modality:"",follow_up_status:""}),[He,gt]=re.useState("himself"),[W,ue]=re.useState(""),[_e,Ke]=re.useState(null),[Ze,F]=re.useState(null),[X,ce]=re.useState(""),[me,Ie]=re.useState(!1),[xe,Ge]=re.useState(""),[ct,rt]=re.useState(!1),Ln=re.useRef(null),[fi,hi]=re.useState(260),[pi,yn]=re.useState(300),[Mi,Rn]=re.useState(380),[Wn,Di]=re.useState(!1),[dt,ft]=re.useState(null),vn=re.useRef(!1),Wi=re.useMemo(()=>{for(let oe=l.length-1;oe>=0;oe--){const Ae=l[oe].categorizedContent["Definitive diagnosis"];if(Ae&&Ae.trim())return Ae}return"Pending"},[l]),On=oe=>Ae=>{vn.current=!0,Ae.preventDefault();const Ce=Ae.clientX,ke=Ae.clientY,At=oe==="sidebar"?fi:pi,Dn=Mi,Dt=Zn=>{vn.current&&(oe==="sidebar"?hi(Math.max(200,Math.min(600,At+(Zn.clientX-Ce)))):oe==="timeline"?yn(Math.max(200,Math.min(600,At+(Zn.clientX-Ce)))):oe==="genArea"&&Rn(Math.max(200,Math.min(window.innerHeight-100,Dn-(Zn.clientY-ke)))))},Tn=()=>{vn.current=!1,document.removeEventListener("mousemove",Dt),document.removeEventListener("mouseup",Tn)};document.addEventListener("mousemove",Dt),document.addEventListener("mouseup",Tn)},Ot=()=>{const oe=Date.now().toString();u([...l,{id:oe,date:"",dateType:"date",categorizedContent:{},otherInformation:""}]),g(oe)},jn=oe=>{if(l.length<=1)return alert("Must have at least one timepoint.");const Ae=l.findIndex(Ce=>Ce.id===oe);O({id:oe,index:Ae})},ji=()=>{if(!H)return;const{id:oe,index:Ae}=H;u(Ce=>{var At,Dn;const ke=Ce.filter(Dt=>Dt.id!==oe);return f===oe&&g(((At=ke[Ae])==null?void 0:At.id)||((Dn=ke[Ae-1])==null?void 0:Dn.id)||"profile"),ke}),O(null)},Pi=(oe,Ae)=>{u(Ce=>Ce.map(ke=>ke.id===oe?{...ke,...Ae}:ke))},Nn=(oe,Ae)=>{const Ce=l.find(ke=>ke.id===Ae);Ce&&u(ke=>ke.map(At=>{if(At.id===oe){const Dn={...At.categorizedContent};Object.keys(Ce.categorizedContent).forEach(Tn=>{const Zn=Ce.categorizedContent[Tn];if(Zn){const Bn=Dn[Tn]||"";Dn[Tn]=Bn?`${Bn}, ${Zn}`:Zn}});let Dt=At.otherInformation;return Ce.otherInformation&&(Dt=Dt?`${Dt}
${Ce.otherInformation}`:Ce.otherInformation),{...At,categorizedContent:Dn,otherInformation:Dt}}return At}))},no=(oe,Ae)=>{if(f){if(f==="profile"){oe==="Underlying disease"&&D(Ce=>({...Ce,underlying_diseases:Array.from(new Set([...Ce.underlying_diseases,Ae]))}));return}ft({category:oe,timestamp:Date.now()}),u(Ce=>Ce.map(ke=>{if(ke.id===f){const At=ke.categorizedContent[oe]||"";return{...ke,categorizedContent:{...ke.categorizedContent,[oe]:At?`${At}, ${Ae}`:Ae}}}return ke}))}},bs=()=>({patient_profile:{age:parseInt(q.age)||0,gender:q.gender,informant:He,underlying_disease:q.underlying_diseases,control_status:{quality:q.control_quality,modality:q.management_modality,follow_up:q.follow_up_status}},timepoints:l.map(oe=>({date:oe.date,vital_sign:oe.categorizedContent["Vital Sign"]||"",symptom:oe.categorizedContent.Symptom||"",negative_symptom:oe.categorizedContent["Negative Symptom"]||"",medical_facility:oe.categorizedContent["Medical Facility"]||"",tentative_diagnosis:oe.categorizedContent["Tentative Diagnosis"]||"",underlying_disease:oe.categorizedContent["Underlying disease"]||"",definitive_diagnosis:oe.categorizedContent["Definitive diagnosis"]||"",physical_examination:oe.categorizedContent["Physical examination"]||"",lab_data:oe.categorizedContent["Lab data"]||"",image_finding:oe.categorizedContent["Image finding"]||"",treatment:oe.categorizedContent.Treatment||"",other_information:oe.otherInformation||""}))}),ki=oe=>{const Ce=[...P.slice(0,B+1),oe];$(Ce),Z(Ce.length-1),k(oe)},nr=async()=>{if(!e){N(!0);return}_(!0);const oe=bs(),Ae=await _k(oe,e);ki(Ae),_(!1)},nn=async oe=>{if(!e){N(!0);return}const Ae=oe||xe;if(!Ae.trim()||!V)return;rt(!0);const Ce=bs(),ke=await Tk(Ce,V,Ae,e);ki(ke),rt(!1),oe||Ge("")},Rt=()=>{if(B>0){const oe=B-1;Z(oe),k(P[oe])}},_n=()=>{if(B<P.length-1){const oe=B+1;Z(oe),k(P[oe])}},St=oe=>{Z(oe),k(P[oe]),de(!1)},Zi=()=>{const oe=Ln.current;if(!oe)return;const Ae=oe.selectionStart,Ce=oe.selectionEnd,ke=oe.value.substring(Ae,Ce).trim();if(ke.length>0){const At=oe.getBoundingClientRect();ue(ke),Ke({start:Ae,end:Ce}),F({x:At.left+50,y:At.top+50})}else ue(""),Ke(null),F(null)},Hn=async()=>{if(!e){N(!0);return}if(!W||!X||!_e)return;Ie(!0);const oe=bs(),Ae=await Ek(oe,V,W,X,e),Ce=V.substring(0,_e.start),ke=V.substring(_e.end),At=Ce+Ae+ke;ki(At),Ie(!1),F(null),ue(""),ce("")},es=()=>{V&&(navigator.clipboard.writeText(V),R(!0),setTimeout(()=>R(!1),2e3))},Mn=l.find(oe=>oe.id===f),Vi=!e&&!pe;return C.jsxs("div",{className:"h-screen w-screen flex flex-col bg-slate-50 text-slate-800 font-sans overflow-hidden",children:[C.jsx(oR,{isOpen:!!H,onClose:()=>O(null),onConfirm:ji,title:"Delete Timepoint",message:"Are you sure?"}),C.jsx(aR,{isOpen:Vi||pe,onSave:async oe=>{await t(oe),N(!1)},isDismissible:!!e,onDismiss:()=>N(!1)}),le&&C.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>de(!1)}),C.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[C.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-blue-700",children:[C.jsx(y_,{className:"w-5 h-5"}),C.jsx("h3",{className:"font-bold",children:"Version History"})]}),C.jsx("button",{onClick:()=>de(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:C.jsx(Au,{className:"w-5 h-5"})})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[P.length===0&&C.jsx("p",{className:"text-center text-slate-400 py-10",children:"No history available yet."}),[...P].reverse().map((oe,Ae)=>{const Ce=P.length-1-Ae,ke=Ce===B;return C.jsxs("button",{onClick:()=>St(Ce),className:`w-full text-left p-4 rounded-xl border-2 transition-all flex items-start space-x-4 ${ke?"border-blue-500 bg-blue-50":"border-slate-100 hover:border-blue-200 hover:bg-slate-50"}`,children:[C.jsx("div",{className:`mt-1 p-2 rounded-lg ${ke?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:C.jsx(ax,{className:"w-4 h-4"})}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsxs("div",{className:"flex items-center justify-between mb-1",children:[C.jsxs("span",{className:"font-bold text-sm",children:["Version ",Ce+1]}),ke&&C.jsx("span",{className:"text-[10px] font-black uppercase text-blue-600 bg-blue-100 px-2 py-0.5 rounded",children:"Active"})]}),C.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2 italic",children:[oe.substring(0,150),"..."]})]}),C.jsx(KI,{className:"w-4 h-4 self-center text-slate-300"})]},Ce)})]})]})]}),C.jsxs("header",{className:"h-14 bg-blue-900 text-white flex items-center px-4 justify-between shadow-md z-20 flex-shrink-0",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(NS,{className:"w-5 h-5"}),C.jsx("h1",{className:"font-bold text-lg hidden md:block",children:"Smart Medical Record"})]}),C.jsxs("div",{className:"hidden md:flex text-sm opacity-80 gap-4",children:[C.jsxs("span",{children:["Patient: ",q.age,"y/",q.gender]}),C.jsxs("span",{className:"max-w-[300px] truncate",children:["Dx: ",Wi]})]}),C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("button",{onClick:()=>N(!0),className:"p-1.5 rounded-full hover:bg-blue-800 text-blue-200 transition-colors",title:"API Key Settings",children:C.jsx(MS,{className:"w-4 h-4"})}),C.jsxs("div",{className:"flex items-center space-x-2 bg-blue-800 rounded-full pl-1 pr-3 py-1",children:[n!=null&&n.photoURL?C.jsx("img",{src:n.photoURL,alt:"User",className:"w-6 h-6 rounded-full border border-white/20"}):C.jsx(RS,{className:"w-6 h-6 text-blue-200"}),C.jsx("span",{className:"text-xs font-semibold max-w-[100px] truncate",children:(n==null?void 0:n.displayName)||(n==null?void 0:n.email)})]}),C.jsx("button",{onClick:r,className:"p-1.5 hover:bg-red-600 rounded-full transition-colors text-white",title:"Sign Out",children:C.jsx(Cx,{className:"w-4 h-4"})})]})]}),C.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[C.jsx("div",{style:{width:fi},className:"flex-shrink-0 z-10 flex flex-col",children:C.jsx(nR,{onItemClick:no,customItems:T,onAddCustomItem:w})}),C.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:On("sidebar")}),C.jsx("div",{style:{width:pi},className:"flex-shrink-0 z-0 flex flex-col",children:C.jsx(iR,{events:l,activeEventId:f,onSelectEvent:g,onAddEvent:Ot,onDeleteEvent:jn,onCopyFromEvent:Nn})}),C.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:On("timeline")}),C.jsx("div",{className:"flex-1 min-w-0",children:C.jsx(sR,{event:Mn,onUpdate:Pi,profile:q,onUpdateProfile:D,isProfileSelected:f==="profile",informant:He,setInformant:gt,lastUpdateTrigger:dt})})]}),!Wn&&C.jsx("div",{className:"h-1 bg-slate-300 hover:bg-blue-500 cursor-row-resize z-20",onMouseDown:On("genArea")}),C.jsxs("div",{style:{height:Wn?"100vh":Mi},className:`flex flex-col border-t-4 border-slate-200 bg-white shadow-2xl transition-all ${Wn?"fixed inset-0 z-50":"relative"}`,children:[C.jsxs("div",{className:"px-6 py-3 border-b flex items-center justify-between bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(_d,{className:"w-5 h-5 text-purple-600"}),C.jsx("h2",{className:"font-bold text-slate-700",children:"AI Generation Area"}),C.jsxs("div",{className:"flex items-center ml-4 bg-white rounded-lg border border-slate-200 p-0.5 shadow-sm",children:[C.jsx("button",{onClick:Rt,disabled:B<=0,title:"Undo (Ctrl+Z)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 transition-colors",children:C.jsx($x,{className:"w-4 h-4"})}),C.jsx("button",{onClick:_n,disabled:B>=P.length-1,title:"Redo (Ctrl+Y)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 border-l border-slate-100 transition-colors",children:C.jsx(Vx,{className:"w-4 h-4"})}),C.jsxs("button",{onClick:()=>de(!0),className:"p-1.5 hover:bg-slate-100 rounded text-blue-600 font-bold text-xs flex items-center border-l border-slate-100 transition-colors",children:[C.jsx(y_,{className:"w-3.5 h-3.5 mr-1"}),"V",B+1]})]})]}),C.jsxs("div",{className:"flex items-center space-x-3",children:[V&&C.jsxs("button",{onClick:es,className:`flex items-center px-4 py-2 rounded-full font-bold text-sm transition-all shadow-sm ${M?"bg-green-100 text-green-700 border border-green-200":"bg-white border border-slate-300 text-slate-700 hover:bg-slate-100 active:scale-95"}`,children:[M?C.jsx(xS,{className:"w-4 h-4 mr-2"}):C.jsx(Om,{className:"w-4 h-4 mr-2"}),M?"Copied":"Copy"]}),C.jsx("button",{onClick:()=>Di(!Wn),className:"p-2 text-slate-500 hover:bg-slate-200 rounded-full transition-colors",children:Wn?C.jsx(Nx,{className:"w-5 h-5"}):C.jsx(wx,{className:"w-5 h-5"})}),C.jsxs("button",{onClick:nr,disabled:h,className:`flex items-center px-6 py-2 rounded-full font-bold shadow-md transition-all active:scale-95 ${h?"bg-slate-300 cursor-not-allowed opacity-70":"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:brightness-110"}`,children:[h?C.jsx(pu,{className:"w-4 h-4 mr-2 animate-spin"}):null,h?"Generating...":"Generate Note"]})]})]}),C.jsxs("div",{className:"flex-1 flex bg-slate-50 overflow-hidden",children:[C.jsx("div",{className:"w-[70%] h-full p-4 relative overflow-hidden flex flex-col",children:C.jsxs("div",{className:"flex-1 relative",children:[C.jsx("textarea",{ref:Ln,onMouseUp:Zi,onKeyUp:Zi,className:"w-full h-full p-8 bg-white border rounded-lg shadow-inner resize-none font-serif text-lg leading-relaxed custom-scrollbar outline-none focus:ring-2 focus:ring-blue-100 transition-shadow",value:V,onChange:oe=>{const Ae=oe.target.value;k(Ae)},placeholder:e?"The generated medical admission note will appear here...":"Please set your API Key to start generating notes."}),Ze&&W&&C.jsxs("div",{className:"absolute z-[60] bg-white border border-slate-200 rounded-xl shadow-2xl p-4 w-80 animate-in zoom-in-95 duration-200",style:{top:20,right:20},children:[C.jsxs("div",{className:"flex items-center justify-between mb-3",children:[C.jsxs("div",{className:"flex items-center space-x-1.5 text-blue-600",children:[C.jsx(Xx,{className:"w-4 h-4"}),C.jsx("span",{className:"text-xs font-bold uppercase",children:"Refine Selection"})]}),C.jsx("button",{onClick:()=>{F(null),ue("")},className:"text-slate-400 hover:text-slate-600",children:C.jsx(Au,{className:"w-4 h-4"})})]}),C.jsxs("div",{className:"mb-3",children:[C.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Target Text"}),C.jsxs("div",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded border border-slate-100 max-h-20 overflow-y-auto italic",children:['"',W,'"']})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsx("textarea",{autoFocus:!0,placeholder:"e.g. Rewrite this more formally...",className:"w-full p-2.5 text-xs border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none h-20",value:X,onChange:oe=>ce(oe.target.value)}),C.jsxs("button",{disabled:me||!X.trim(),onClick:Hn,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold rounded-lg shadow-md transition-all flex items-center justify-center disabled:bg-slate-300",children:[me?C.jsx(pu,{className:"w-3.5 h-3.5 mr-2 animate-spin"}):C.jsx(_d,{className:"w-3.5 h-3.5 mr-2"}),me?"Refining...":"Refine Segment"]})]})]})]})}),C.jsxs("div",{className:"w-[30%] h-full border-l border-slate-200 bg-white flex flex-col",children:[C.jsxs("div",{className:"p-3 border-b flex items-center space-x-2 bg-slate-50/50",children:[C.jsx(xx,{className:"w-4 h-4 text-blue-600"}),C.jsx("h3",{className:"text-xs font-bold text-slate-700 uppercase tracking-widest",children:" Assistant"})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Quick Refine"}),C.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[C.jsxs("button",{onClick:()=>nn("Make the note more concise and pithy without losing clinical facts."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(tR,{className:"w-3.5 h-3.5 mr-2 text-yellow-500"}),C.jsx("span",{children:" (Make it concise)"})]}),C.jsxs("button",{onClick:()=>nn("Analyze the original JSON data and checking if any clinical details are missing in the current draft. Flag them or add them if the data allows."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(YI,{className:"w-3.5 h-3.5 mr-2 text-purple-500"}),C.jsx("span",{children:" (Detail check)"})]}),C.jsxs("button",{onClick:()=>nn("Carefully check for grammar, prepositions, and article usage. Ensure formal academic medical tone."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(zx,{className:"w-3.5 h-3.5 mr-2 text-blue-500"}),C.jsx("span",{children:" (Grammar check)"})]})]})]}),C.jsx("div",{className:"h-px bg-slate-100 my-2"}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Manual Refinement"}),C.jsx("textarea",{className:"w-full h-32 p-3 text-sm border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-100 outline-none transition-shadow resize-none bg-slate-50/30",placeholder:"e.g. Rewrite the second paragraph to emphasize the fever course...",value:xe,onChange:oe=>Ge(oe.target.value)}),C.jsxs("button",{disabled:ct||!xe.trim()||!V,onClick:()=>nn(),className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-xl shadow-md transition-all flex items-center justify-center disabled:bg-slate-200 disabled:text-slate-400",children:[ct?C.jsx(pu,{className:"w-4 h-4 mr-2 animate-spin"}):C.jsx(_d,{className:"w-4 h-4 mr-2"}),ct?"Refining Note...":"Refine Full Note"]})]}),!V&&C.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-100 text-[11px] text-amber-700 italic",children:"Generate a note first to use the refinement assistant."})]})]})]})]})]})},I3=()=>C.jsx(b3,{children:C.jsx(x3,{})}),x3=()=>{const{user:n,loading:e,signInWithGoogle:t,error:i}=Xb();return e?C.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-blue-50",children:C.jsx(pu,{className:"w-10 h-10 text-blue-600 animate-spin"})}):n?C.jsx(w3,{}):C.jsx(rR,{onLogin:t,authError:i})},Wb=document.getElementById("root");if(!Wb)throw new Error("Could not find root element to mount to");const R3=LI.createRoot(Wb);R3.render(C.jsx(CS.StrictMode,{children:C.jsx(I3,{})}));
