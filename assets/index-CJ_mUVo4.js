(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function uS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gp={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function cI(){if(J0)return Jl;J0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:l}}return Jl.Fragment=e,Jl.jsx=t,Jl.jsxs=t,Jl}var Q0;function dI(){return Q0||(Q0=1,gp.exports=cI()),gp.exports}var C=dI(),yp={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function fI(){if(X0)return Ue;X0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=S&&H[S]||H["@@iterator"],typeof H=="function"?H:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,k={};function Q(H,ne,de){this.props=H,this.context=ne,this.refs=k,this.updater=de||O}Q.prototype.isReactComponent={},Q.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},Q.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function B(){}B.prototype=Q.prototype;function W(H,ne,de){this.props=H,this.context=ne,this.refs=k,this.updater=de||O}var re=W.prototype=new B;re.constructor=W,P(re,Q.prototype),re.isPureReactComponent=!0;var he=Array.isArray;function ce(){}var N={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function x(H,ne,de){var pe=de.ref;return{$$typeof:n,type:H,key:ne,ref:pe!==void 0?pe:null,props:de}}function L(H,ne){return x(H.type,ne,H.props)}function U(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function q(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(de){return ne[de]})}var D=/\/+/g;function Ve(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?q(""+H.key):ne.toString(36)}function at(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(ce,ce):(H.status="pending",H.then(function(ne){H.status==="pending"&&(H.status="fulfilled",H.value=ne)},function(ne){H.status==="pending"&&(H.status="rejected",H.reason=ne)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function j(H,ne,de,pe,Ie){var Ne=typeof H;(Ne==="undefined"||Ne==="boolean")&&(H=null);var Ge=!1;if(H===null)Ge=!0;else switch(Ne){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(H.$$typeof){case n:case e:Ge=!0;break;case _:return Ge=H._init,j(Ge(H._payload),ne,de,pe,Ie)}}if(Ge)return Ie=Ie(H),Ge=pe===""?"."+Ve(H,0):pe,he(Ie)?(de="",Ge!=null&&(de=Ge.replace(D,"$&/")+"/"),j(Ie,ne,de,"",function(Cn){return Cn})):Ie!=null&&(U(Ie)&&(Ie=L(Ie,de+(Ie.key==null||H&&H.key===Ie.key?"":(""+Ie.key).replace(D,"$&/")+"/")+Ge)),ne.push(Ie)),1;Ge=0;var yt=pe===""?".":pe+":";if(he(H))for(var lt=0;lt<H.length;lt++)pe=H[lt],Ne=yt+Ve(pe,lt),Ge+=j(pe,ne,de,Ne,Ie);else if(lt=w(H),typeof lt=="function")for(H=lt.call(H),lt=0;!(pe=H.next()).done;)pe=pe.value,Ne=yt+Ve(pe,lt++),Ge+=j(pe,ne,de,Ne,Ie);else if(Ne==="object"){if(typeof H.then=="function")return j(at(H),ne,de,pe,Ie);throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function ue(H,ne,de){if(H==null)return H;var pe=[],Ie=0;return j(H,pe,"","",function(Ne){return ne.call(de,Ne,Ie++)}),pe}function Ee(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(de){(H._status===0||H._status===-1)&&(H._status=1,H._result=de)},function(de){(H._status===0||H._status===-1)&&(H._status=2,H._result=de)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var Be=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Ce={map:ue,forEach:function(H,ne,de){ue(H,function(){ne.apply(this,arguments)},de)},count:function(H){var ne=0;return ue(H,function(){ne++}),ne},toArray:function(H){return ue(H,function(ne){return ne})||[]},only:function(H){if(!U(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ue.Activity=T,Ue.Children=Ce,Ue.Component=Q,Ue.Fragment=t,Ue.Profiler=r,Ue.PureComponent=W,Ue.StrictMode=i,Ue.Suspense=g,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(H){return N.H.useMemoCache(H)}},Ue.cache=function(H){return function(){return H.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(H,ne,de){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var pe=P({},H.props),Ie=H.key;if(ne!=null)for(Ne in ne.key!==void 0&&(Ie=""+ne.key),ne)!M.call(ne,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&ne.ref===void 0||(pe[Ne]=ne[Ne]);var Ne=arguments.length-2;if(Ne===1)pe.children=de;else if(1<Ne){for(var Ge=Array(Ne),yt=0;yt<Ne;yt++)Ge[yt]=arguments[yt+2];pe.children=Ge}return x(H.type,Ie,pe)},Ue.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},Ue.createElement=function(H,ne,de){var pe,Ie={},Ne=null;if(ne!=null)for(pe in ne.key!==void 0&&(Ne=""+ne.key),ne)M.call(ne,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ie[pe]=ne[pe]);var Ge=arguments.length-2;if(Ge===1)Ie.children=de;else if(1<Ge){for(var yt=Array(Ge),lt=0;lt<Ge;lt++)yt[lt]=arguments[lt+2];Ie.children=yt}if(H&&H.defaultProps)for(pe in Ge=H.defaultProps,Ge)Ie[pe]===void 0&&(Ie[pe]=Ge[pe]);return x(H,Ne,Ie)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(H){return{$$typeof:f,render:H}},Ue.isValidElement=U,Ue.lazy=function(H){return{$$typeof:_,_payload:{_status:-1,_result:H},_init:Ee}},Ue.memo=function(H,ne){return{$$typeof:h,type:H,compare:ne===void 0?null:ne}},Ue.startTransition=function(H){var ne=N.T,de={};N.T=de;try{var pe=H(),Ie=N.S;Ie!==null&&Ie(de,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(ce,Be)}catch(Ne){Be(Ne)}finally{ne!==null&&de.types!==null&&(ne.types=de.types),N.T=ne}},Ue.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ue.use=function(H){return N.H.use(H)},Ue.useActionState=function(H,ne,de){return N.H.useActionState(H,ne,de)},Ue.useCallback=function(H,ne){return N.H.useCallback(H,ne)},Ue.useContext=function(H){return N.H.useContext(H)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(H,ne){return N.H.useDeferredValue(H,ne)},Ue.useEffect=function(H,ne){return N.H.useEffect(H,ne)},Ue.useEffectEvent=function(H){return N.H.useEffectEvent(H)},Ue.useId=function(){return N.H.useId()},Ue.useImperativeHandle=function(H,ne,de){return N.H.useImperativeHandle(H,ne,de)},Ue.useInsertionEffect=function(H,ne){return N.H.useInsertionEffect(H,ne)},Ue.useLayoutEffect=function(H,ne){return N.H.useLayoutEffect(H,ne)},Ue.useMemo=function(H,ne){return N.H.useMemo(H,ne)},Ue.useOptimistic=function(H,ne){return N.H.useOptimistic(H,ne)},Ue.useReducer=function(H,ne,de){return N.H.useReducer(H,ne,de)},Ue.useRef=function(H){return N.H.useRef(H)},Ue.useState=function(H){return N.H.useState(H)},Ue.useSyncExternalStore=function(H,ne,de){return N.H.useSyncExternalStore(H,ne,de)},Ue.useTransition=function(){return N.H.useTransition()},Ue.version="19.2.3",Ue}var W0;function Cm(){return W0||(W0=1,yp.exports=fI()),yp.exports}var le=Cm();const cS=uS(le);var vp={exports:{}},Ql={},_p={exports:{}},Tp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function hI(){return j0||(j0=1,(function(n){function e(j,ue){var Ee=j.length;j.push(ue);e:for(;0<Ee;){var Be=Ee-1>>>1,Ce=j[Be];if(0<r(Ce,ue))j[Be]=ue,j[Ee]=Ce,Ee=Be;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var ue=j[0],Ee=j.pop();if(Ee!==ue){j[0]=Ee;e:for(var Be=0,Ce=j.length,H=Ce>>>1;Be<H;){var ne=2*(Be+1)-1,de=j[ne],pe=ne+1,Ie=j[pe];if(0>r(de,Ee))pe<Ce&&0>r(Ie,de)?(j[Be]=Ie,j[pe]=Ee,Be=pe):(j[Be]=de,j[ne]=Ee,Be=ne);else if(pe<Ce&&0>r(Ie,Ee))j[Be]=Ie,j[pe]=Ee,Be=pe;else break e}}return ue}function r(j,ue){var Ee=j.sortIndex-ue.sortIndex;return Ee!==0?Ee:j.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var g=[],h=[],_=1,T=null,S=3,w=!1,O=!1,P=!1,k=!1,Q=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function re(j){for(var ue=t(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=j)i(h),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(h)}}function he(j){if(P=!1,re(j),!O)if(t(g)!==null)O=!0,ce||(ce=!0,q());else{var ue=t(h);ue!==null&&at(he,ue.startTime-j)}}var ce=!1,N=-1,M=5,x=-1;function L(){return k?!0:!(n.unstable_now()-x<M)}function U(){if(k=!1,ce){var j=n.unstable_now();x=j;var ue=!0;try{e:{O=!1,P&&(P=!1,B(N),N=-1),w=!0;var Ee=S;try{t:{for(re(j),T=t(g);T!==null&&!(T.expirationTime>j&&L());){var Be=T.callback;if(typeof Be=="function"){T.callback=null,S=T.priorityLevel;var Ce=Be(T.expirationTime<=j);if(j=n.unstable_now(),typeof Ce=="function"){T.callback=Ce,re(j),ue=!0;break t}T===t(g)&&i(g),re(j)}else i(g);T=t(g)}if(T!==null)ue=!0;else{var H=t(h);H!==null&&at(he,H.startTime-j),ue=!1}}break e}finally{T=null,S=Ee,w=!1}ue=void 0}}finally{ue?q():ce=!1}}}var q;if(typeof W=="function")q=function(){W(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ve=D.port2;D.port1.onmessage=U,q=function(){Ve.postMessage(null)}}else q=function(){Q(U,0)};function at(j,ue){N=Q(function(){j(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(j){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var Ee=S;S=ue;try{return j()}finally{S=Ee}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(j,ue){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Ee=S;S=j;try{return ue()}finally{S=Ee}},n.unstable_scheduleCallback=function(j,ue,Ee){var Be=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Be+Ee:Be):Ee=Be,j){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=Ee+Ce,j={id:_++,callback:ue,priorityLevel:j,startTime:Ee,expirationTime:Ce,sortIndex:-1},Ee>Be?(j.sortIndex=Ee,e(h,j),t(g)===null&&j===t(h)&&(P?(B(N),N=-1):P=!0,at(he,Ee-Be))):(j.sortIndex=Ce,e(g,j),O||w||(O=!0,ce||(ce=!0,q()))),j},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(j){var ue=S;return function(){var Ee=S;S=ue;try{return j.apply(this,arguments)}finally{S=Ee}}}})(Tp)),Tp}var Z0;function pI(){return Z0||(Z0=1,_p.exports=hI()),_p.exports}var Ep={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function mI(){if(e_)return hn;e_=1;var n=Cm();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hn.createPortal=function(g,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(g,h,null,_)},hn.flushSync=function(g){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=h,i.p=_,i.d.f()}},hn.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(g,h))},hn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},hn.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:w}):_==="script"&&i.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},hn.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(g)},hn.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin);i.d.L(g,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},hn.preloadModule=function(g,h){if(typeof g=="string")if(h){var _=f(h.as,h.crossOrigin);i.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(g)},hn.requestFormReset=function(g){i.d.r(g)},hn.unstable_batchedUpdates=function(g,h){return g(h)},hn.useFormState=function(g,h,_){return u.H.useFormState(g,h,_)},hn.useFormStatus=function(){return u.H.useHostTransitionStatus()},hn.version="19.2.3",hn}var t_;function dS(){if(t_)return Ep.exports;t_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ep.exports=mI(),Ep.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function gI(){if(n_)return Ql;n_=1;var n=pI(),e=Cm(),t=dS();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var o=s,a=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(a=o.return),s=o.return;while(s)}return o.tag===3?a:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function g(s){if(l(s)!==s)throw Error(i(188))}function h(s){var o=s.alternate;if(!o){if(o=l(s),o===null)throw Error(i(188));return o!==s?null:s}for(var a=s,c=o;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),s;if(v===c)return g(y),o;v=v.sibling}throw Error(i(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=v;break}if(I===c){A=!0,c=y,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,c=y;break}if(I===c){A=!0,c=v,a=y;break}I=I.sibling}if(!A)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?s:o}function _(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=_(s),o!==null)return o;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),W=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Ve(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case Q:return"Profiler";case k:return"StrictMode";case he:return"Suspense";case ce:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case O:return"Portal";case W:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case re:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return o=s.displayName||null,o!==null?o:Ve(s.type)||"Memo";case M:o=s._payload,s=s._init;try{return Ve(s(o))}catch{}}return null}var at=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Be=[],Ce=-1;function H(s){return{current:s}}function ne(s){0>Ce||(s.current=Be[Ce],Be[Ce]=null,Ce--)}function de(s,o){Ce++,Be[Ce]=s.current,s.current=o}var pe=H(null),Ie=H(null),Ne=H(null),Ge=H(null);function yt(s,o){switch(de(Ne,o),de(Ie,s),de(pe,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?y0(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=y0(o),s=v0(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(pe),de(pe,s)}function lt(){ne(pe),ne(Ie),ne(Ne)}function Cn(s){s.memoizedState!==null&&de(Ge,s);var o=pe.current,a=v0(o,s.type);o!==a&&(de(Ie,s),de(pe,a))}function hi(s){Ie.current===s&&(ne(pe),ne(Ie)),Ge.current===s&&(ne(Ge),zl._currentValue=Ee)}var kn,pi;function Xt(s){if(kn===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);kn=o&&o[1]||"",pi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kn+s+pi}var ls=!1;function $n(s,o){if(!s||ls)return"";ls=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Z){var J=Z}Reflect.construct(s,[],se)}else{try{se.call()}catch(Z){J=Z}s.call(se.prototype)}}else{try{throw Error()}catch(Z){J=Z}(se=s())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Z){if(Z&&J&&typeof Z.stack=="string")return[Z.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var V=A.split(`
`),$=I.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===$.length)for(c=V.length-1,y=$.length-1;1<=c&&0<=y&&V[c]!==$[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==$[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==$[y]){var te=`
`+V[c].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=c&&0<=y);break}}}finally{ls=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?Xt(a):""}function us(s,o){switch(s.tag){case 26:case 27:case 5:return Xt(s.type);case 16:return Xt("Lazy");case 13:return s.child!==o&&o!==null?Xt("Suspense Fallback"):Xt("Suspense");case 19:return Xt("SuspenseList");case 0:case 15:return $n(s.type,!1);case 11:return $n(s.type.render,!1);case 1:return $n(s.type,!0);case 31:return Xt("Activity");default:return""}}function mi(s){try{var o="",a=null;do o+=us(s,a),a=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,_t=n.unstable_scheduleCallback,Jn=n.unstable_cancelCallback,Go=n.unstable_shouldYield,Gs=n.unstable_requestPaint,Kt=n.unstable_now,Vn=n.unstable_getCurrentPriorityLevel,Un=n.unstable_ImmediatePriority,vt=n.unstable_UserBlockingPriority,bn=n.unstable_NormalPriority,ki=n.unstable_LowPriority,gi=n.unstable_IdlePriority,Fs=n.log,qs=n.unstable_setDisableYieldValue,_n=null,wt=null;function sn(s){if(typeof Fs=="function"&&qs(s),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(_n,s)}catch{}}var ze=Math.clz32?Math.clz32:ee,F=Math.log,ve=Math.LN2;function ee(s){return s>>>=0,s===0?32:31-(F(s)/ve|0)|0}var ge=256,Te=262144,Ae=4194304;function et(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Yt(s,o,a){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var I=c&134217727;return I!==0?(c=I&~v,c!==0?y=et(c):(A&=I,A!==0?y=et(A):a||(a=I&~s,a!==0&&(y=et(a))))):(I=c&~v,I!==0?y=et(I):A!==0?y=et(A):a||(a=c&~s,a!==0&&(y=et(a)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:y}function Mt(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Vi(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qn(){var s=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),s}function Ln(s){for(var o=[],a=0;31>a;a++)o.push(s);return o}function Fo(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ef(s,o,a,c,y,v){var A=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var I=s.entanglements,V=s.expirationTimes,$=s.hiddenUpdates;for(a=A&~a;0<a;){var te=31-ze(a),se=1<<te;I[te]=0,V[te]=-1;var J=$[te];if(J!==null)for($[te]=null,te=0;te<J.length;te++){var Z=J[te];Z!==null&&(Z.lane&=-536870913)}a&=~se}c!==0&&qo(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~o))}function qo(s,o,a){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-ze(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|a&261930}function Qa(s,o){var a=s.entangledLanes|=o;for(s=s.entanglements;a;){var c=31-ze(a),y=1<<c;y&o|s[c]&o&&(s[c]|=o),a&=~y}}function Xa(s,o){var a=o&-o;return a=(a&42)!==0?1:zo(a),(a&(s.suspendedLanes|o))!==0?0:a}function zo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function cs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Du(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:G0(s.type))}function yi(s,o){var a=ue.p;try{return ue.p=s,o()}finally{ue.p=a}}var vi=Math.random().toString(36).slice(2),Ut="__reactFiber$"+vi,Wt="__reactProps$"+vi,Ui="__reactContainer$"+vi,Mr="__reactEvents$"+vi,Sf="__reactListeners$"+vi,Pu="__reactHandles$"+vi,ku="__reactResources$"+vi,Li="__reactMarker$"+vi;function Dr(s){delete s[Ut],delete s[Wt],delete s[Mr],delete s[Sf],delete s[Pu]}function Oi(s){var o=s[Ut];if(o)return o;for(var a=s.parentNode;a;){if(o=a[Ui]||a[Ut]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(s=b0(s);s!==null;){if(a=s[Ut])return a;s=b0(s)}return o}s=a,a=s.parentNode}return null}function Xn(s){if(s=s[Ut]||s[Ui]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function On(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Hi(s){var o=s[ku];return o||(o=s[ku]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Lt(s){s[Li]=!0}var Wa=new Set,ja={};function Bi(s,o){Gi(s,o),Gi(s+"Capture",o)}function Gi(s,o){for(ja[s]=o,s=0;s<o.length;s++)Wa.add(o[s])}var Za=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),el={},tl={};function Vu(s){return At.call(tl,s)?!0:At.call(el,s)?!1:Za.test(s)?tl[s]=!0:(el[s]=!0,!1)}function Pr(s,o,a){if(Vu(o))if(a===null)s.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+a)}}function Hn(s,o,a){if(a===null)s.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+a)}}function Ot(s,o,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(o,a,""+c)}}function jt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function zs(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function nl(s,o,a){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function ut(s){if(!s._valueTracker){var o=zs(s)?"checked":"value";s._valueTracker=nl(s,o,""+s[o])}}function Ko(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return s&&(c=zs(s)?s.checked?"true":"false":s.value),s=c,s!==a?(o.setValue(s),!0):!1}function Fi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Yo=/[\n"\\]/g;function wn(s){return s.replace(Yo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function kr(s,o,a,c,y,v,A,I){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),o!=null?A==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+jt(o)):s.value!==""+jt(o)&&(s.value=""+jt(o)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),o!=null?il(s,A,jt(o)):a!=null?il(s,A,jt(a)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+jt(I):s.removeAttribute("name")}function Uu(s,o,a,c,y,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){ut(s);return}a=a!=null?""+jt(a):"",o=o!=null?""+jt(o):a,I||o===s.value||(s.value=o),s.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=I?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),ut(s)}function il(s,o,a){o==="number"&&Fi(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function Ks(s,o,a,c){if(s=s.options,o){o={};for(var y=0;y<a.length;y++)o["$"+a[y]]=!0;for(a=0;a<s.length;a++)y=o.hasOwnProperty("$"+s[a].value),s[a].selected!==y&&(s[a].selected=y),y&&c&&(s[a].defaultSelected=!0)}else{for(a=""+jt(a),o=null,y=0;y<s.length;y++){if(s[y].value===a){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function Lu(s,o,a){if(o!=null&&(o=""+jt(o),o!==s.value&&(s.value=o),a==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=a!=null?""+jt(a):""}function Ys(s,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(i(92));if(at(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=jt(o),s.defaultValue=a,c=s.textContent,c===a&&c!==""&&c!==null&&(s.value=c),ut(s)}function In(s,o){if(o){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=o;return}}s.textContent=o}var Ou=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sl(s,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,a):typeof a!="number"||a===0||Ou.has(o)?o==="float"?s.cssFloat=a:s[o]=(""+a).trim():s[o]=a+"px"}function ol(s,o,a){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&a[y]!==c&&sl(s,y,c)}else for(var v in o)o.hasOwnProperty(v)&&sl(s,v,o[v])}function Vr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$s=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ur(s){return $s.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function _i(){}var rl=null;function Wn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Js=null,qi=null;function $o(s){var o=Xn(s);if(o&&(s=o.stateNode)){var a=s[Wt]||null;e:switch(s=o.stateNode,o.type){case"input":if(kr(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==s&&c.form===s.form){var y=c[Wt]||null;if(!y)throw Error(i(90));kr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===s.form&&Ko(c)}break e;case"textarea":Lu(s,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&Ks(s,!!a.multiple,o,!1)}}}var Lr=!1;function Qs(s,o,a){if(Lr)return s(o,a);Lr=!0;try{var c=s(o);return c}finally{if(Lr=!1,(Js!==null||qi!==null)&&(Dc(),Js&&(o=Js,s=qi,qi=Js=null,$o(o),s)))for(o=0;o<s.length;o++)$o(s[o])}}function Ti(s,o){var a=s.stateNode;if(a===null)return null;var c=a[Wt]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(i(231,o,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=!1;if(jn)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{Jo=!1}var zi=null,al=null,Qo=null;function ll(){if(Qo)return Qo;var s,o=al,a=o.length,c,y="value"in zi?zi.value:zi.textContent,v=y.length;for(s=0;s<a&&o[s]===y[s];s++);var A=a-s;for(c=1;c<=A&&o[a-c]===y[v-c];c++);return Qo=y.slice(s,1<c?1-c:void 0)}function Xo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function ds(){return!0}function Ei(){return!1}function on(s){function o(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(a=s[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ds:Ei,this.isPropagationStopped=Ei,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),o}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ki=on(fs),Xs=T({},fs,{view:0,detail:0}),ul=on(Xs),Ws,Or,Yi,Hr=T({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Yi&&(Yi&&s.type==="mousemove"?(Ws=s.screenX-Yi.screenX,Or=s.screenY-Yi.screenY):Or=Ws=0,Yi=s),Ws)},movementY:function(s){return"movementY"in s?s.movementY:Or}}),cl=on(Hr),Wo=T({},Hr,{dataTransfer:0}),Bu=on(Wo),Gu=T({},Xs,{relatedTarget:0}),jo=on(Gu),dl=T({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Fu=on(dl),Br=T({},fs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qu=on(Br),zu=T({},fs,{data:0}),$i=on(zu),Ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=$u[s])?!!o[s]:!1}function js(){return Ju}var Tn=T({},Xs,{key:function(s){if(s.key){var o=Ku[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Xo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Yu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(s){return s.type==="keypress"?Xo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Xo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Qu=on(Tn),Xu=T({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hs=on(Xu),m=T({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),E=on(m),b=T({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=on(b),K=T({},Hr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=on(K),fe=T({},fs,{newState:0,oldState:0}),Oe=on(fe),Dt=[9,13,27,32],st=jn&&"CompositionEvent"in window,Ct=null;jn&&"documentMode"in document&&(Ct=document.documentMode);var Zn=jn&&"TextEvent"in window&&!Ct,Ji=jn&&(!st||Ct&&8<Ct&&11>=Ct),Si=" ",Ai=!1;function Zo(s,o){switch(s){case"keyup":return Dt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gr(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Fr=!1;function kb(s,o){switch(s){case"compositionend":return Gr(o);case"keypress":return o.which!==32?null:(Ai=!0,Si);case"textInput":return s=o.data,s===Si&&Ai?null:s;default:return null}}function Vb(s,o){if(Fr)return s==="compositionend"||!st&&Zo(s,o)?(s=ll(),Qo=al=zi=null,Fr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ji&&o.locale!=="ko"?null:o.data;default:return null}}var Ub={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rg(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Ub[s.type]:o==="textarea"}function xg(s,o,a,c){Js?qi?qi.push(c):qi=[c]:Js=c,o=Hc(o,"onChange"),0<o.length&&(a=new Ki("onChange","change",null,a,c),s.push({event:a,listeners:o}))}var fl=null,hl=null;function Lb(s){d0(s,0)}function Wu(s){var o=On(s);if(Ko(o))return s}function Ng(s,o){if(s==="change")return o}var Mg=!1;if(jn){var Af;if(jn){var Cf="oninput"in document;if(!Cf){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),Cf=typeof Dg.oninput=="function"}Af=Cf}else Af=!1;Mg=Af&&(!document.documentMode||9<document.documentMode)}function Pg(){fl&&(fl.detachEvent("onpropertychange",kg),hl=fl=null)}function kg(s){if(s.propertyName==="value"&&Wu(hl)){var o=[];xg(o,hl,s,Wn(s)),Qs(Lb,o)}}function Ob(s,o,a){s==="focusin"?(Pg(),fl=o,hl=a,fl.attachEvent("onpropertychange",kg)):s==="focusout"&&Pg()}function Hb(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Wu(hl)}function Bb(s,o){if(s==="click")return Wu(o)}function Gb(s,o){if(s==="input"||s==="change")return Wu(o)}function Fb(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Bn=typeof Object.is=="function"?Object.is:Fb;function pl(s,o){if(Bn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var a=Object.keys(s),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!At.call(o,y)||!Bn(s[y],o[y]))return!1}return!0}function Vg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ug(s,o){var a=Vg(s);s=0;for(var c;a;){if(a.nodeType===3){if(c=s+a.textContent.length,s<=o&&c>=o)return{node:a,offset:o-s};s=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vg(a)}}function Lg(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Lg(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Og(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Fi(s.document);o instanceof s.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)s=o.contentWindow;else break;o=Fi(s.document)}return o}function bf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var qb=jn&&"documentMode"in document&&11>=document.documentMode,qr=null,wf=null,ml=null,If=!1;function Hg(s,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;If||qr==null||qr!==Fi(c)||(c=qr,"selectionStart"in c&&bf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ml&&pl(ml,c)||(ml=c,c=Hc(wf,"onSelect"),0<c.length&&(o=new Ki("onSelect","select",null,o,a),s.push({event:o,listeners:c}),o.target=qr)))}function er(s,o){var a={};return a[s.toLowerCase()]=o.toLowerCase(),a["Webkit"+s]="webkit"+o,a["Moz"+s]="moz"+o,a}var zr={animationend:er("Animation","AnimationEnd"),animationiteration:er("Animation","AnimationIteration"),animationstart:er("Animation","AnimationStart"),transitionrun:er("Transition","TransitionRun"),transitionstart:er("Transition","TransitionStart"),transitioncancel:er("Transition","TransitionCancel"),transitionend:er("Transition","TransitionEnd")},Rf={},Bg={};jn&&(Bg=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function tr(s){if(Rf[s])return Rf[s];if(!zr[s])return s;var o=zr[s],a;for(a in o)if(o.hasOwnProperty(a)&&a in Bg)return Rf[s]=o[a];return s}var Gg=tr("animationend"),Fg=tr("animationiteration"),qg=tr("animationstart"),zb=tr("transitionrun"),Kb=tr("transitionstart"),Yb=tr("transitioncancel"),zg=tr("transitionend"),Kg=new Map,xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xf.push("scrollEnd");function Ci(s,o){Kg.set(s,o),Bi(o,[s])}var ju=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ei=[],Kr=0,Nf=0;function Zu(){for(var s=Kr,o=Nf=Kr=0;o<s;){var a=ei[o];ei[o++]=null;var c=ei[o];ei[o++]=null;var y=ei[o];ei[o++]=null;var v=ei[o];if(ei[o++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Yg(a,y,v)}}function ec(s,o,a,c){ei[Kr++]=s,ei[Kr++]=o,ei[Kr++]=a,ei[Kr++]=c,Nf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Mf(s,o,a,c){return ec(s,o,a,c),tc(s)}function nr(s,o){return ec(s,null,null,o),tc(s)}function Yg(s,o,a){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=s.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&o!==null&&(y=31-ze(a),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[o]:c.push(o),o.lane=a|536870912),v):null}function tc(s){if(50<Ll)throw Ll=0,Bh=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Yr={};function $b(s,o,a,c){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(s,o,a,c){return new $b(s,o,a,c)}function Df(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ps(s,o){var a=s.alternate;return a===null?(a=Gn(s.tag,o,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=o,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,o=s.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function $g(s,o){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,o=a.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function nc(s,o,a,c,y,v){var A=0;if(c=s,typeof s=="function")Df(s)&&(A=1);else if(typeof s=="string")A=jw(s,a,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=Gn(31,a,o,y),s.elementType=x,s.lanes=v,s;case P:return ir(a.children,y,v,o);case k:A=8,y|=24;break;case Q:return s=Gn(12,a,o,y|2),s.elementType=Q,s.lanes=v,s;case he:return s=Gn(13,a,o,y),s.elementType=he,s.lanes=v,s;case ce:return s=Gn(19,a,o,y),s.elementType=ce,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:A=10;break e;case B:A=9;break e;case re:A=11;break e;case N:A=14;break e;case M:A=16,c=null;break e}A=29,a=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=Gn(A,a,o,y),o.elementType=s,o.type=c,o.lanes=v,o}function ir(s,o,a,c){return s=Gn(7,s,c,o),s.lanes=a,s}function Pf(s,o,a){return s=Gn(6,s,null,o),s.lanes=a,s}function Jg(s){var o=Gn(18,null,null,0);return o.stateNode=s,o}function kf(s,o,a){return o=Gn(4,s.children!==null?s.children:[],s.key,o),o.lanes=a,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Qg=new WeakMap;function ti(s,o){if(typeof s=="object"&&s!==null){var a=Qg.get(s);return a!==void 0?a:(o={value:s,source:o,stack:mi(o)},Qg.set(s,o),o)}return{value:s,source:o,stack:mi(o)}}var $r=[],Jr=0,ic=null,gl=0,ni=[],ii=0,Zs=null,Qi=1,Xi="";function ms(s,o){$r[Jr++]=gl,$r[Jr++]=ic,ic=s,gl=o}function Xg(s,o,a){ni[ii++]=Qi,ni[ii++]=Xi,ni[ii++]=Zs,Zs=s;var c=Qi;s=Xi;var y=32-ze(c)-1;c&=~(1<<y),a+=1;var v=32-ze(o)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Qi=1<<32-ze(o)+y|a<<y|c,Xi=v+s}else Qi=1<<v|a<<y|c,Xi=s}function Vf(s){s.return!==null&&(ms(s,1),Xg(s,1,0))}function Uf(s){for(;s===ic;)ic=$r[--Jr],$r[Jr]=null,gl=$r[--Jr],$r[Jr]=null;for(;s===Zs;)Zs=ni[--ii],ni[ii]=null,Xi=ni[--ii],ni[ii]=null,Qi=ni[--ii],ni[ii]=null}function Wg(s,o){ni[ii++]=Qi,ni[ii++]=Xi,ni[ii++]=Zs,Qi=o.id,Xi=o.overflow,Zs=s}var rn=null,Tt=null,je=!1,eo=null,si=!1,Lf=Error(i(519));function to(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yl(ti(o,s)),Lf}function jg(s){var o=s.stateNode,a=s.type,c=s.memoizedProps;switch(o[Ut]=s,o[Wt]=c,a){case"dialog":Ye("cancel",o),Ye("close",o);break;case"iframe":case"object":case"embed":Ye("load",o);break;case"video":case"audio":for(a=0;a<Hl.length;a++)Ye(Hl[a],o);break;case"source":Ye("error",o);break;case"img":case"image":case"link":Ye("error",o),Ye("load",o);break;case"details":Ye("toggle",o);break;case"input":Ye("invalid",o),Uu(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",o);break;case"textarea":Ye("invalid",o),Ys(o,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||m0(o.textContent,a)?(c.popover!=null&&(Ye("beforetoggle",o),Ye("toggle",o)),c.onScroll!=null&&Ye("scroll",o),c.onScrollEnd!=null&&Ye("scrollend",o),c.onClick!=null&&(o.onclick=_i),o=!0):o=!1,o||to(s,!0)}function Zg(s){for(rn=s.return;rn;)switch(rn.tag){case 5:case 31:case 13:si=!1;return;case 27:case 3:si=!0;return;default:rn=rn.return}}function Qr(s){if(s!==rn)return!1;if(!je)return Zg(s),je=!0,!1;var o=s.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||tp(s.type,s.memoizedProps)),a=!a),a&&Tt&&to(s),Zg(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Tt=C0(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Tt=C0(s)}else o===27?(o=Tt,go(s.type)?(s=rp,rp=null,Tt=s):Tt=o):Tt=rn?ri(s.stateNode.nextSibling):null;return!0}function sr(){Tt=rn=null,je=!1}function Of(){var s=eo;return s!==null&&(Mn===null?Mn=s:Mn.push.apply(Mn,s),eo=null),s}function yl(s){eo===null?eo=[s]:eo.push(s)}var Hf=H(null),or=null,gs=null;function no(s,o,a){de(Hf,o._currentValue),o._currentValue=a}function ys(s){s._currentValue=Hf.current,ne(Hf)}function Bf(s,o,a){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===a)break;s=s.return}}function Gf(s,o,a,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var V=0;V<o.length;V++)if(I.context===o[V]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),Bf(v.return,a,s),c||(A=null);break e}v=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),Bf(A,a,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Xr(s,o,a,c){s=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var I=y.type;Bn(y.pendingProps.value,A.value)||(s!==null?s.push(I):s=[I])}}else if(y===Ge.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(zl):s=[zl])}y=y.return}s!==null&&Gf(o,s,a,c),o.flags|=262144}function sc(s){for(s=s.firstContext;s!==null;){if(!Bn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function rr(s){or=s,gs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function an(s){return ey(or,s)}function oc(s,o){return or===null&&rr(s),ey(s,o)}function ey(s,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},gs===null){if(s===null)throw Error(i(308));gs=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else gs=gs.next=o;return a}var Jb=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(a,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(a){return a()})}},Qb=n.unstable_scheduleCallback,Xb=n.unstable_NormalPriority,Ht={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ff(){return{controller:new Jb,data:new Map,refCount:0}}function vl(s){s.refCount--,s.refCount===0&&Qb(Xb,function(){s.controller.abort()})}var _l=null,qf=0,Wr=0,jr=null;function Wb(s,o){if(_l===null){var a=_l=[];qf=0,Wr=Yh(),jr={status:"pending",value:void 0,then:function(c){a.push(c)}}}return qf++,o.then(ty,ty),o}function ty(){if(--qf===0&&_l!==null){jr!==null&&(jr.status="fulfilled");var s=_l;_l=null,Wr=0,jr=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function jb(s,o){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<a.length;y++)(0,a[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var ny=j.S;j.S=function(s,o){Hv=Kt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Wb(s,o),ny!==null&&ny(s,o)};var ar=H(null);function zf(){var s=ar.current;return s!==null?s:gt.pooledCache}function rc(s,o){o===null?de(ar,ar.current):de(ar,o.pool)}function iy(){var s=zf();return s===null?null:{parent:Ht._currentValue,pool:s}}var Zr=Error(i(460)),Kf=Error(i(474)),ac=Error(i(542)),lc={then:function(){}};function sy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function oy(s,o,a){switch(a=s[a],a===void 0?s.push(o):a!==o&&(o.then(_i,_i),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,ay(s),s;default:if(typeof o.status=="string")o.then(_i,_i);else{if(s=gt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,ay(s),s}throw ur=o,Zr}}function lr(s){try{var o=s._init;return o(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ur=a,Zr):a}}var ur=null;function ry(){if(ur===null)throw Error(i(459));var s=ur;return ur=null,s}function ay(s){if(s===Zr||s===ac)throw Error(i(483))}var ea=null,Tl=0;function uc(s){var o=Tl;return Tl+=1,ea===null&&(ea=[]),oy(ea,s,o)}function El(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function cc(s,o){throw o.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function ly(s){function o(z,G){if(s){var Y=z.deletions;Y===null?(z.deletions=[G],z.flags|=16):Y.push(G)}}function a(z,G){if(!s)return null;for(;G!==null;)o(z,G),G=G.sibling;return null}function c(z){for(var G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function y(z,G){return z=ps(z,G),z.index=0,z.sibling=null,z}function v(z,G,Y){return z.index=Y,s?(Y=z.alternate,Y!==null?(Y=Y.index,Y<G?(z.flags|=67108866,G):Y):(z.flags|=67108866,G)):(z.flags|=1048576,G)}function A(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function I(z,G,Y,ie){return G===null||G.tag!==6?(G=Pf(Y,z.mode,ie),G.return=z,G):(G=y(G,Y),G.return=z,G)}function V(z,G,Y,ie){var we=Y.type;return we===P?te(z,G,Y.props.children,ie,Y.key):G!==null&&(G.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===M&&lr(we)===G.type)?(G=y(G,Y.props),El(G,Y),G.return=z,G):(G=nc(Y.type,Y.key,Y.props,null,z.mode,ie),El(G,Y),G.return=z,G)}function $(z,G,Y,ie){return G===null||G.tag!==4||G.stateNode.containerInfo!==Y.containerInfo||G.stateNode.implementation!==Y.implementation?(G=kf(Y,z.mode,ie),G.return=z,G):(G=y(G,Y.children||[]),G.return=z,G)}function te(z,G,Y,ie,we){return G===null||G.tag!==7?(G=ir(Y,z.mode,ie,we),G.return=z,G):(G=y(G,Y),G.return=z,G)}function se(z,G,Y){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Pf(""+G,z.mode,Y),G.return=z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return Y=nc(G.type,G.key,G.props,null,z.mode,Y),El(Y,G),Y.return=z,Y;case O:return G=kf(G,z.mode,Y),G.return=z,G;case M:return G=lr(G),se(z,G,Y)}if(at(G)||q(G))return G=ir(G,z.mode,Y,null),G.return=z,G;if(typeof G.then=="function")return se(z,uc(G),Y);if(G.$$typeof===W)return se(z,oc(z,G),Y);cc(z,G)}return null}function J(z,G,Y,ie){var we=G!==null?G.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return we!==null?null:I(z,G,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===we?V(z,G,Y,ie):null;case O:return Y.key===we?$(z,G,Y,ie):null;case M:return Y=lr(Y),J(z,G,Y,ie)}if(at(Y)||q(Y))return we!==null?null:te(z,G,Y,ie,null);if(typeof Y.then=="function")return J(z,G,uc(Y),ie);if(Y.$$typeof===W)return J(z,G,oc(z,Y),ie);cc(z,Y)}return null}function Z(z,G,Y,ie,we){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return z=z.get(Y)||null,I(G,z,""+ie,we);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case w:return z=z.get(ie.key===null?Y:ie.key)||null,V(G,z,ie,we);case O:return z=z.get(ie.key===null?Y:ie.key)||null,$(G,z,ie,we);case M:return ie=lr(ie),Z(z,G,Y,ie,we)}if(at(ie)||q(ie))return z=z.get(Y)||null,te(G,z,ie,we,null);if(typeof ie.then=="function")return Z(z,G,Y,uc(ie),we);if(ie.$$typeof===W)return Z(z,G,Y,oc(G,ie),we);cc(G,ie)}return null}function _e(z,G,Y,ie){for(var we=null,tt=null,Se=G,Fe=G=0,Je=null;Se!==null&&Fe<Y.length;Fe++){Se.index>Fe?(Je=Se,Se=null):Je=Se.sibling;var nt=J(z,Se,Y[Fe],ie);if(nt===null){Se===null&&(Se=Je);break}s&&Se&&nt.alternate===null&&o(z,Se),G=v(nt,G,Fe),tt===null?we=nt:tt.sibling=nt,tt=nt,Se=Je}if(Fe===Y.length)return a(z,Se),je&&ms(z,Fe),we;if(Se===null){for(;Fe<Y.length;Fe++)Se=se(z,Y[Fe],ie),Se!==null&&(G=v(Se,G,Fe),tt===null?we=Se:tt.sibling=Se,tt=Se);return je&&ms(z,Fe),we}for(Se=c(Se);Fe<Y.length;Fe++)Je=Z(Se,z,Fe,Y[Fe],ie),Je!==null&&(s&&Je.alternate!==null&&Se.delete(Je.key===null?Fe:Je.key),G=v(Je,G,Fe),tt===null?we=Je:tt.sibling=Je,tt=Je);return s&&Se.forEach(function(Eo){return o(z,Eo)}),je&&ms(z,Fe),we}function xe(z,G,Y,ie){if(Y==null)throw Error(i(151));for(var we=null,tt=null,Se=G,Fe=G=0,Je=null,nt=Y.next();Se!==null&&!nt.done;Fe++,nt=Y.next()){Se.index>Fe?(Je=Se,Se=null):Je=Se.sibling;var Eo=J(z,Se,nt.value,ie);if(Eo===null){Se===null&&(Se=Je);break}s&&Se&&Eo.alternate===null&&o(z,Se),G=v(Eo,G,Fe),tt===null?we=Eo:tt.sibling=Eo,tt=Eo,Se=Je}if(nt.done)return a(z,Se),je&&ms(z,Fe),we;if(Se===null){for(;!nt.done;Fe++,nt=Y.next())nt=se(z,nt.value,ie),nt!==null&&(G=v(nt,G,Fe),tt===null?we=nt:tt.sibling=nt,tt=nt);return je&&ms(z,Fe),we}for(Se=c(Se);!nt.done;Fe++,nt=Y.next())nt=Z(Se,z,Fe,nt.value,ie),nt!==null&&(s&&nt.alternate!==null&&Se.delete(nt.key===null?Fe:nt.key),G=v(nt,G,Fe),tt===null?we=nt:tt.sibling=nt,tt=nt);return s&&Se.forEach(function(uI){return o(z,uI)}),je&&ms(z,Fe),we}function mt(z,G,Y,ie){if(typeof Y=="object"&&Y!==null&&Y.type===P&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:e:{for(var we=Y.key;G!==null;){if(G.key===we){if(we=Y.type,we===P){if(G.tag===7){a(z,G.sibling),ie=y(G,Y.props.children),ie.return=z,z=ie;break e}}else if(G.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===M&&lr(we)===G.type){a(z,G.sibling),ie=y(G,Y.props),El(ie,Y),ie.return=z,z=ie;break e}a(z,G);break}else o(z,G);G=G.sibling}Y.type===P?(ie=ir(Y.props.children,z.mode,ie,Y.key),ie.return=z,z=ie):(ie=nc(Y.type,Y.key,Y.props,null,z.mode,ie),El(ie,Y),ie.return=z,z=ie)}return A(z);case O:e:{for(we=Y.key;G!==null;){if(G.key===we)if(G.tag===4&&G.stateNode.containerInfo===Y.containerInfo&&G.stateNode.implementation===Y.implementation){a(z,G.sibling),ie=y(G,Y.children||[]),ie.return=z,z=ie;break e}else{a(z,G);break}else o(z,G);G=G.sibling}ie=kf(Y,z.mode,ie),ie.return=z,z=ie}return A(z);case M:return Y=lr(Y),mt(z,G,Y,ie)}if(at(Y))return _e(z,G,Y,ie);if(q(Y)){if(we=q(Y),typeof we!="function")throw Error(i(150));return Y=we.call(Y),xe(z,G,Y,ie)}if(typeof Y.then=="function")return mt(z,G,uc(Y),ie);if(Y.$$typeof===W)return mt(z,G,oc(z,Y),ie);cc(z,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,G!==null&&G.tag===6?(a(z,G.sibling),ie=y(G,Y),ie.return=z,z=ie):(a(z,G),ie=Pf(Y,z.mode,ie),ie.return=z,z=ie),A(z)):a(z,G)}return function(z,G,Y,ie){try{Tl=0;var we=mt(z,G,Y,ie);return ea=null,we}catch(Se){if(Se===Zr||Se===ac)throw Se;var tt=Gn(29,Se,null,z.mode);return tt.lanes=ie,tt.return=z,tt}finally{}}}var cr=ly(!0),uy=ly(!1),io=!1;function Yf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function so(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function oo(s,o,a){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(ot&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=tc(s),Yg(s,null,a),o}return ec(s,c,o,a),tc(s)}function Sl(s,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,a|=c,o.lanes=a,Qa(s,a)}}function Jf(s,o){var a=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=o:v=v.next=o}else y=v=o;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=o:s.next=o,a.lastBaseUpdate=o}var Qf=!1;function Al(){if(Qf){var s=jr;if(s!==null)throw s}}function Cl(s,o,a,c){Qf=!1;var y=s.updateQueue;io=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var V=I,$=V.next;V.next=null,A===null?v=$:A.next=$,A=V;var te=s.alternate;te!==null&&(te=te.updateQueue,I=te.lastBaseUpdate,I!==A&&(I===null?te.firstBaseUpdate=$:I.next=$,te.lastBaseUpdate=V))}if(v!==null){var se=y.baseState;A=0,te=$=V=null,I=v;do{var J=I.lane&-536870913,Z=J!==I.lane;if(Z?($e&J)===J:(c&J)===J){J!==0&&J===Wr&&(Qf=!0),te!==null&&(te=te.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var _e=s,xe=I;J=o;var mt=a;switch(xe.tag){case 1:if(_e=xe.payload,typeof _e=="function"){se=_e.call(mt,se,J);break e}se=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=xe.payload,J=typeof _e=="function"?_e.call(mt,se,J):_e,J==null)break e;se=T({},se,J);break e;case 2:io=!0}}J=I.callback,J!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[J]:Z.push(J))}else Z={lane:J,tag:I.tag,payload:I.payload,callback:I.callback,next:null},te===null?($=te=Z,V=se):te=te.next=Z,A|=J;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);te===null&&(V=se),y.baseState=V,y.firstBaseUpdate=$,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),co|=A,s.lanes=A,s.memoizedState=se}}function cy(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function dy(s,o){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)cy(a[s],o)}var ta=H(null),dc=H(0);function fy(s,o){s=ws,de(dc,s),de(ta,o),ws=s|o.baseLanes}function Xf(){de(dc,ws),de(ta,ta.current)}function Wf(){ws=dc.current,ne(ta),ne(dc)}var Fn=H(null),oi=null;function ro(s){var o=s.alternate;de(Pt,Pt.current&1),de(Fn,s),oi===null&&(o===null||ta.current!==null||o.memoizedState!==null)&&(oi=s)}function jf(s){de(Pt,Pt.current),de(Fn,s),oi===null&&(oi=s)}function hy(s){s.tag===22?(de(Pt,Pt.current),de(Fn,s),oi===null&&(oi=s)):ao()}function ao(){de(Pt,Pt.current),de(Fn,Fn.current)}function qn(s){ne(Fn),oi===s&&(oi=null),ne(Pt)}var Pt=H(0);function fc(s){for(var o=s;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||sp(a)||op(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var vs=0,He=null,ht=null,Bt=null,hc=!1,na=!1,dr=!1,pc=0,bl=0,ia=null,Zb=0;function xt(){throw Error(i(321))}function Zf(s,o){if(o===null)return!1;for(var a=0;a<o.length&&a<s.length;a++)if(!Bn(s[a],o[a]))return!1;return!0}function eh(s,o,a,c,y,v){return vs=v,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,j.H=s===null||s.memoizedState===null?Xy:mh,dr=!1,v=a(c,y),dr=!1,na&&(v=my(o,a,c,y)),py(s),v}function py(s){j.H=Rl;var o=ht!==null&&ht.next!==null;if(vs=0,Bt=ht=He=null,hc=!1,bl=0,ia=null,o)throw Error(i(300));s===null||Gt||(s=s.dependencies,s!==null&&sc(s)&&(Gt=!0))}function my(s,o,a,c){He=s;var y=0;do{if(na&&(ia=null),bl=0,na=!1,25<=y)throw Error(i(301));if(y+=1,Bt=ht=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}j.H=Wy,v=o(a,c)}while(na);return v}function ew(){var s=j.H,o=s.useState()[0];return o=typeof o.then=="function"?wl(o):o,s=s.useState()[0],(ht!==null?ht.memoizedState:null)!==s&&(He.flags|=1024),o}function th(){var s=pc!==0;return pc=0,s}function nh(s,o,a){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~a}function ih(s){if(hc){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}hc=!1}vs=0,Bt=ht=He=null,na=!1,bl=pc=0,ia=null}function En(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?He.memoizedState=Bt=s:Bt=Bt.next=s,Bt}function kt(){if(ht===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=ht.next;var o=Bt===null?He.memoizedState:Bt.next;if(o!==null)Bt=o,ht=s;else{if(s===null)throw He.alternate===null?Error(i(467)):Error(i(310));ht=s,s={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Bt===null?He.memoizedState=Bt=s:Bt=Bt.next=s}return Bt}function mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(s){var o=bl;return bl+=1,ia===null&&(ia=[]),s=oy(ia,s,o),o=He,(Bt===null?o.memoizedState:Bt.next)===null&&(o=o.alternate,j.H=o===null||o.memoizedState===null?Xy:mh),s}function gc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return wl(s);if(s.$$typeof===W)return an(s)}throw Error(i(438,String(s)))}function sh(s){var o=null,a=He.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=He.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=mc(),He.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(s),c=0;c<s;c++)a[c]=L;return o.index++,a}function _s(s,o){return typeof o=="function"?o(s):o}function yc(s){var o=kt();return oh(o,ht,s)}function oh(s,o,a){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}o.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{o=y.next;var I=A=null,V=null,$=o,te=!1;do{var se=$.lane&-536870913;if(se!==$.lane?($e&se)===se:(vs&se)===se){var J=$.revertLane;if(J===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),se===Wr&&(te=!0);else if((vs&J)===J){$=$.next,J===Wr&&(te=!0);continue}else se={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(I=V=se,A=v):V=V.next=se,He.lanes|=J,co|=J;se=$.action,dr&&a(v,se),v=$.hasEagerState?$.eagerState:a(v,se)}else J={lane:se,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},V===null?(I=V=J,A=v):V=V.next=J,He.lanes|=se,co|=se;$=$.next}while($!==null&&$!==o);if(V===null?A=v:V.next=I,!Bn(v,s.memoizedState)&&(Gt=!0,te&&(a=jr,a!==null)))throw a;s.memoizedState=v,s.baseState=A,s.baseQueue=V,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function rh(s){var o=kt(),a=o.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var c=a.dispatch,y=a.pending,v=o.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=s(v,A.action),A=A.next;while(A!==y);Bn(v,o.memoizedState)||(Gt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,c]}function gy(s,o,a){var c=He,y=kt(),v=je;if(v){if(a===void 0)throw Error(i(407));a=a()}else a=o();var A=!Bn((ht||y).memoizedState,a);if(A&&(y.memoizedState=a,Gt=!0),y=y.queue,uh(_y.bind(null,c,y,s),[s]),y.getSnapshot!==o||A||Bt!==null&&Bt.memoizedState.tag&1){if(c.flags|=2048,sa(9,{destroy:void 0},vy.bind(null,c,y,a,o),null),gt===null)throw Error(i(349));v||(vs&127)!==0||yy(c,o,a)}return a}function yy(s,o,a){s.flags|=16384,s={getSnapshot:o,value:a},o=He.updateQueue,o===null?(o=mc(),He.updateQueue=o,o.stores=[s]):(a=o.stores,a===null?o.stores=[s]:a.push(s))}function vy(s,o,a,c){o.value=a,o.getSnapshot=c,Ty(o)&&Ey(s)}function _y(s,o,a){return a(function(){Ty(o)&&Ey(s)})}function Ty(s){var o=s.getSnapshot;s=s.value;try{var a=o();return!Bn(s,a)}catch{return!0}}function Ey(s){var o=nr(s,2);o!==null&&Dn(o,s,2)}function ah(s){var o=En();if(typeof s=="function"){var a=s;if(s=a(),dr){sn(!0);try{a()}finally{sn(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:s},o}function Sy(s,o,a,c){return s.baseState=a,oh(s,ht,typeof c=="function"?c:_s)}function tw(s,o,a,c,y){if(Tc(s))throw Error(i(485));if(s=o.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};j.T!==null?a(!0):v.isTransition=!1,c(v),a=o.pending,a===null?(v.next=o.pending=v,Ay(o,v)):(v.next=a.next,o.pending=a.next=v)}}function Ay(s,o){var a=o.action,c=o.payload,y=s.state;if(o.isTransition){var v=j.T,A={};j.T=A;try{var I=a(y,c),V=j.S;V!==null&&V(A,I),Cy(s,o,I)}catch($){lh(s,o,$)}finally{v!==null&&A.types!==null&&(v.types=A.types),j.T=v}}else try{v=a(y,c),Cy(s,o,v)}catch($){lh(s,o,$)}}function Cy(s,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){by(s,o,c)},function(c){return lh(s,o,c)}):by(s,o,a)}function by(s,o,a){o.status="fulfilled",o.value=a,wy(o),s.state=a,o=s.pending,o!==null&&(a=o.next,a===o?s.pending=null:(a=a.next,o.next=a,Ay(s,a)))}function lh(s,o,a){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,wy(o),o=o.next;while(o!==c)}s.action=null}function wy(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Iy(s,o){return o}function Ry(s,o){if(je){var a=gt.formState;if(a!==null){e:{var c=He;if(je){if(Tt){t:{for(var y=Tt,v=si;y.nodeType!==8;){if(!v){y=null;break t}if(y=ri(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){Tt=ri(y.nextSibling),c=y.data==="F!";break e}}to(c)}c=!1}c&&(o=a[0])}}return a=En(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iy,lastRenderedState:o},a.queue=c,a=$y.bind(null,He,c),c.dispatch=a,c=ah(!1),v=ph.bind(null,He,!1,c.queue),c=En(),y={state:o,dispatch:null,action:s,pending:null},c.queue=y,a=tw.bind(null,He,y,v,a),y.dispatch=a,c.memoizedState=s,[o,a,!1]}function xy(s){var o=kt();return Ny(o,ht,s)}function Ny(s,o,a){if(o=oh(s,o,Iy)[0],s=yc(_s)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=wl(o)}catch(A){throw A===Zr?ac:A}else c=o;o=kt();var y=o.queue,v=y.dispatch;return a!==o.memoizedState&&(He.flags|=2048,sa(9,{destroy:void 0},nw.bind(null,y,a),null)),[c,v,s]}function nw(s,o){s.action=o}function My(s){var o=kt(),a=ht;if(a!==null)return Ny(o,a,s);kt(),o=o.memoizedState,a=kt();var c=a.queue.dispatch;return a.memoizedState=s,[o,c,!1]}function sa(s,o,a,c){return s={tag:s,create:a,deps:c,inst:o,next:null},o=He.updateQueue,o===null&&(o=mc(),He.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=s.next=s:(c=a.next,a.next=s,s.next=c,o.lastEffect=s),s}function Dy(){return kt().memoizedState}function vc(s,o,a,c){var y=En();He.flags|=s,y.memoizedState=sa(1|o,{destroy:void 0},a,c===void 0?null:c)}function _c(s,o,a,c){var y=kt();c=c===void 0?null:c;var v=y.memoizedState.inst;ht!==null&&c!==null&&Zf(c,ht.memoizedState.deps)?y.memoizedState=sa(o,v,a,c):(He.flags|=s,y.memoizedState=sa(1|o,v,a,c))}function Py(s,o){vc(8390656,8,s,o)}function uh(s,o){_c(2048,8,s,o)}function iw(s){He.flags|=4;var o=He.updateQueue;if(o===null)o=mc(),He.updateQueue=o,o.events=[s];else{var a=o.events;a===null?o.events=[s]:a.push(s)}}function ky(s){var o=kt().memoizedState;return iw({ref:o,nextImpl:s}),function(){if((ot&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Vy(s,o){return _c(4,2,s,o)}function Uy(s,o){return _c(4,4,s,o)}function Ly(s,o){if(typeof o=="function"){s=s();var a=o(s);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Oy(s,o,a){a=a!=null?a.concat([s]):null,_c(4,4,Ly.bind(null,o,s),a)}function ch(){}function Hy(s,o){var a=kt();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&Zf(o,c[1])?c[0]:(a.memoizedState=[s,o],s)}function By(s,o){var a=kt();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&Zf(o,c[1]))return c[0];if(c=s(),dr){sn(!0);try{s()}finally{sn(!1)}}return a.memoizedState=[c,o],c}function dh(s,o,a){return a===void 0||(vs&1073741824)!==0&&($e&261930)===0?s.memoizedState=o:(s.memoizedState=a,s=Gv(),He.lanes|=s,co|=s,a)}function Gy(s,o,a,c){return Bn(a,o)?a:ta.current!==null?(s=dh(s,a,c),Bn(s,o)||(Gt=!0),s):(vs&42)===0||(vs&1073741824)!==0&&($e&261930)===0?(Gt=!0,s.memoizedState=a):(s=Gv(),He.lanes|=s,co|=s,o)}function Fy(s,o,a,c,y){var v=ue.p;ue.p=v!==0&&8>v?v:8;var A=j.T,I={};j.T=I,ph(s,!1,o,a);try{var V=y(),$=j.S;if($!==null&&$(I,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var te=jb(V,c);Il(s,o,te,Yn(s))}else Il(s,o,c,Yn(s))}catch(se){Il(s,o,{then:function(){},status:"rejected",reason:se},Yn())}finally{ue.p=v,A!==null&&I.types!==null&&(A.types=I.types),j.T=A}}function sw(){}function fh(s,o,a,c){if(s.tag!==5)throw Error(i(476));var y=qy(s).queue;Fy(s,y,o,Ee,a===null?sw:function(){return zy(s),a(c)})}function qy(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:Ee},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:a},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function zy(s){var o=qy(s);o.next===null&&(o=s.alternate.memoizedState),Il(s,o.next.queue,{},Yn())}function hh(){return an(zl)}function Ky(){return kt().memoizedState}function Yy(){return kt().memoizedState}function ow(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var a=Yn();s=so(a);var c=oo(o,s,a);c!==null&&(Dn(c,o,a),Sl(c,o,a)),o={cache:Ff()},s.payload=o;return}o=o.return}}function rw(s,o,a){var c=Yn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Tc(s)?Jy(o,a):(a=Mf(s,o,a,c),a!==null&&(Dn(a,s,c),Qy(a,o,c)))}function $y(s,o,a){var c=Yn();Il(s,o,a,c)}function Il(s,o,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Tc(s))Jy(o,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,I=v(A,a);if(y.hasEagerState=!0,y.eagerState=I,Bn(I,A))return ec(s,o,y,0),gt===null&&Zu(),!1}catch{}finally{}if(a=Mf(s,o,y,c),a!==null)return Dn(a,s,c),Qy(a,o,c),!0}return!1}function ph(s,o,a,c){if(c={lane:2,revertLane:Yh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Tc(s)){if(o)throw Error(i(479))}else o=Mf(s,a,c,2),o!==null&&Dn(o,s,2)}function Tc(s){var o=s.alternate;return s===He||o!==null&&o===He}function Jy(s,o){na=hc=!0;var a=s.pending;a===null?o.next=o:(o.next=a.next,a.next=o),s.pending=o}function Qy(s,o,a){if((a&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,a|=c,o.lanes=a,Qa(s,a)}}var Rl={readContext:an,use:gc,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};Rl.useEffectEvent=xt;var Xy={readContext:an,use:gc,useCallback:function(s,o){return En().memoizedState=[s,o===void 0?null:o],s},useContext:an,useEffect:Py,useImperativeHandle:function(s,o,a){a=a!=null?a.concat([s]):null,vc(4194308,4,Ly.bind(null,o,s),a)},useLayoutEffect:function(s,o){return vc(4194308,4,s,o)},useInsertionEffect:function(s,o){vc(4,2,s,o)},useMemo:function(s,o){var a=En();o=o===void 0?null:o;var c=s();if(dr){sn(!0);try{s()}finally{sn(!1)}}return a.memoizedState=[c,o],c},useReducer:function(s,o,a){var c=En();if(a!==void 0){var y=a(o);if(dr){sn(!0);try{a(o)}finally{sn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=rw.bind(null,He,s),[c.memoizedState,s]},useRef:function(s){var o=En();return s={current:s},o.memoizedState=s},useState:function(s){s=ah(s);var o=s.queue,a=$y.bind(null,He,o);return o.dispatch=a,[s.memoizedState,a]},useDebugValue:ch,useDeferredValue:function(s,o){var a=En();return dh(a,s,o)},useTransition:function(){var s=ah(!1);return s=Fy.bind(null,He,s.queue,!0,!1),En().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,a){var c=He,y=En();if(je){if(a===void 0)throw Error(i(407));a=a()}else{if(a=o(),gt===null)throw Error(i(349));($e&127)!==0||yy(c,o,a)}y.memoizedState=a;var v={value:a,getSnapshot:o};return y.queue=v,Py(_y.bind(null,c,v,s),[s]),c.flags|=2048,sa(9,{destroy:void 0},vy.bind(null,c,v,a,o),null),a},useId:function(){var s=En(),o=gt.identifierPrefix;if(je){var a=Xi,c=Qi;a=(c&~(1<<32-ze(c)-1)).toString(32)+a,o="_"+o+"R_"+a,a=pc++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=Zb++,o="_"+o+"r_"+a.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:hh,useFormState:Ry,useActionState:Ry,useOptimistic:function(s){var o=En();o.memoizedState=o.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=ph.bind(null,He,!0,a),a.dispatch=o,[s,o]},useMemoCache:sh,useCacheRefresh:function(){return En().memoizedState=ow.bind(null,He)},useEffectEvent:function(s){var o=En(),a={impl:s};return o.memoizedState=a,function(){if((ot&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},mh={readContext:an,use:gc,useCallback:Hy,useContext:an,useEffect:uh,useImperativeHandle:Oy,useInsertionEffect:Vy,useLayoutEffect:Uy,useMemo:By,useReducer:yc,useRef:Dy,useState:function(){return yc(_s)},useDebugValue:ch,useDeferredValue:function(s,o){var a=kt();return Gy(a,ht.memoizedState,s,o)},useTransition:function(){var s=yc(_s)[0],o=kt().memoizedState;return[typeof s=="boolean"?s:wl(s),o]},useSyncExternalStore:gy,useId:Ky,useHostTransitionStatus:hh,useFormState:xy,useActionState:xy,useOptimistic:function(s,o){var a=kt();return Sy(a,ht,s,o)},useMemoCache:sh,useCacheRefresh:Yy};mh.useEffectEvent=ky;var Wy={readContext:an,use:gc,useCallback:Hy,useContext:an,useEffect:uh,useImperativeHandle:Oy,useInsertionEffect:Vy,useLayoutEffect:Uy,useMemo:By,useReducer:rh,useRef:Dy,useState:function(){return rh(_s)},useDebugValue:ch,useDeferredValue:function(s,o){var a=kt();return ht===null?dh(a,s,o):Gy(a,ht.memoizedState,s,o)},useTransition:function(){var s=rh(_s)[0],o=kt().memoizedState;return[typeof s=="boolean"?s:wl(s),o]},useSyncExternalStore:gy,useId:Ky,useHostTransitionStatus:hh,useFormState:My,useActionState:My,useOptimistic:function(s,o){var a=kt();return ht!==null?Sy(a,ht,s,o):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:sh,useCacheRefresh:Yy};Wy.useEffectEvent=ky;function gh(s,o,a,c){o=s.memoizedState,a=a(c,o),a=a==null?o:T({},o,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var yh={enqueueSetState:function(s,o,a){s=s._reactInternals;var c=Yn(),y=so(c);y.payload=o,a!=null&&(y.callback=a),o=oo(s,y,c),o!==null&&(Dn(o,s,c),Sl(o,s,c))},enqueueReplaceState:function(s,o,a){s=s._reactInternals;var c=Yn(),y=so(c);y.tag=1,y.payload=o,a!=null&&(y.callback=a),o=oo(s,y,c),o!==null&&(Dn(o,s,c),Sl(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var a=Yn(),c=so(a);c.tag=2,o!=null&&(c.callback=o),o=oo(s,c,a),o!==null&&(Dn(o,s,a),Sl(o,s,a))}};function jy(s,o,a,c,y,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,A):o.prototype&&o.prototype.isPureReactComponent?!pl(a,c)||!pl(y,v):!0}function Zy(s,o,a,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==s&&yh.enqueueReplaceState(o,o.state,null)}function fr(s,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(s=s.defaultProps){a===o&&(a=T({},a));for(var y in s)a[y]===void 0&&(a[y]=s[y])}return a}function ev(s){ju(s)}function tv(s){console.error(s)}function nv(s){ju(s)}function Ec(s,o){try{var a=s.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function iv(s,o,a){try{var c=s.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function vh(s,o,a){return a=so(a),a.tag=3,a.payload={element:null},a.callback=function(){Ec(s,o)},a}function sv(s){return s=so(s),s.tag=3,s}function ov(s,o,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){iv(o,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){iv(o,a,c),typeof y!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function aw(s,o,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&Xr(o,a,y,!0),a=Fn.current,a!==null){switch(a.tag){case 31:case 13:return oi===null?Pc():a.alternate===null&&Nt===0&&(Nt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===lc?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),qh(s,c,y)),!1;case 22:return a.flags|=65536,c===lc?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),qh(s,c,y)),!1}throw Error(i(435,a.tag))}return qh(s,c,y),Pc(),!1}if(je)return o=Fn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==Lf&&(s=Error(i(422),{cause:c}),yl(ti(s,a)))):(c!==Lf&&(o=Error(i(423),{cause:c}),yl(ti(o,a))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=ti(c,a),y=vh(s.stateNode,c,y),Jf(s,y),Nt!==4&&(Nt=2)),!1;var v=Error(i(520),{cause:c});if(v=ti(v,a),Ul===null?Ul=[v]:Ul.push(v),Nt!==4&&(Nt=2),o===null)return!0;c=ti(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,s=y&-y,a.lanes|=s,s=vh(a.stateNode,c,s),Jf(a,s),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fo===null||!fo.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=sv(y),ov(y,s,a,c),Jf(a,y),!1}a=a.return}while(a!==null);return!1}var _h=Error(i(461)),Gt=!1;function ln(s,o,a,c){o.child=s===null?uy(o,null,a,c):cr(o,s.child,a,c)}function rv(s,o,a,c,y){a=a.render;var v=o.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return rr(o),c=eh(s,o,a,A,v,y),I=th(),s!==null&&!Gt?(nh(s,o,y),Ts(s,o,y)):(je&&I&&Vf(o),o.flags|=1,ln(s,o,c,y),o.child)}function av(s,o,a,c,y){if(s===null){var v=a.type;return typeof v=="function"&&!Df(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,lv(s,o,v,c,y)):(s=nc(a.type,null,c,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!Ih(s,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:pl,a(A,c)&&s.ref===o.ref)return Ts(s,o,y)}return o.flags|=1,s=ps(v,c),s.ref=o.ref,s.return=o,o.child=s}function lv(s,o,a,c,y){if(s!==null){var v=s.memoizedProps;if(pl(v,c)&&s.ref===o.ref)if(Gt=!1,o.pendingProps=c=v,Ih(s,y))(s.flags&131072)!==0&&(Gt=!0);else return o.lanes=s.lanes,Ts(s,o,y)}return Th(s,o,a,c,y)}function uv(s,o,a,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,s!==null){for(c=o.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return cv(s,o,v,a,c)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&rc(o,v!==null?v.cachePool:null),v!==null?fy(o,v):Xf(),hy(o);else return c=o.lanes=536870912,cv(s,o,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(rc(o,v.cachePool),fy(o,v),ao(),o.memoizedState=null):(s!==null&&rc(o,null),Xf(),ao());return ln(s,o,y,a),o.child}function xl(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function cv(s,o,a,c,y){var v=zf();return v=v===null?null:{parent:Ht._currentValue,pool:v},o.memoizedState={baseLanes:a,cachePool:v},s!==null&&rc(o,null),Xf(),hy(o),s!==null&&Xr(s,o,c,!0),o.childLanes=y,null}function Sc(s,o){return o=Cc({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function dv(s,o,a){return cr(o,s.child,null,a),s=Sc(o,o.pendingProps),s.flags|=2,qn(o),o.memoizedState=null,s}function lw(s,o,a){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(je){if(c.mode==="hidden")return s=Sc(o,c),o.lanes=536870912,xl(null,s);if(jf(o),(s=Tt)?(s=A0(s,si),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Zs!==null?{id:Qi,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},a=Jg(s),a.return=o,o.child=a,rn=o,Tt=null)):s=null,s===null)throw to(o);return o.lanes=536870912,null}return Sc(o,c)}var v=s.memoizedState;if(v!==null){var A=v.dehydrated;if(jf(o),y)if(o.flags&256)o.flags&=-257,o=dv(s,o,a);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Gt||Xr(s,o,a,!1),y=(a&s.childLanes)!==0,Gt||y){if(c=gt,c!==null&&(A=Xa(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,nr(s,A),Dn(c,s,A),_h;Pc(),o=dv(s,o,a)}else s=v.treeContext,Tt=ri(A.nextSibling),rn=o,je=!0,eo=null,si=!1,s!==null&&Wg(o,s),o=Sc(o,c),o.flags|=4096;return o}return s=ps(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function Ac(s,o){var a=o.ref;if(a===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(s===null||s.ref!==a)&&(o.flags|=4194816)}}function Th(s,o,a,c,y){return rr(o),a=eh(s,o,a,c,void 0,y),c=th(),s!==null&&!Gt?(nh(s,o,y),Ts(s,o,y)):(je&&c&&Vf(o),o.flags|=1,ln(s,o,a,y),o.child)}function fv(s,o,a,c,y,v){return rr(o),o.updateQueue=null,a=my(o,c,a,y),py(s),c=th(),s!==null&&!Gt?(nh(s,o,v),Ts(s,o,v)):(je&&c&&Vf(o),o.flags|=1,ln(s,o,a,v),o.child)}function hv(s,o,a,c,y){if(rr(o),o.stateNode===null){var v=Yr,A=a.contextType;typeof A=="object"&&A!==null&&(v=an(A)),v=new a(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=yh,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},Yf(o),A=a.contextType,v.context=typeof A=="object"&&A!==null?an(A):Yr,v.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(gh(o,a,A,c),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&yh.enqueueReplaceState(v,v.state,null),Cl(o,c,v,y),Al(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){v=o.stateNode;var I=o.memoizedProps,V=fr(a,I);v.props=V;var $=v.context,te=a.contextType;A=Yr,typeof te=="object"&&te!==null&&(A=an(te));var se=a.getDerivedStateFromProps;te=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||$!==A)&&Zy(o,v,c,A),io=!1;var J=o.memoizedState;v.state=J,Cl(o,c,v,y),Al(),$=o.memoizedState,I||J!==$||io?(typeof se=="function"&&(gh(o,a,se,c),$=o.memoizedState),(V=io||jy(o,a,V,c,J,$,A))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=$),v.props=c,v.state=$,v.context=A,c=V):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,$f(s,o),A=o.memoizedProps,te=fr(a,A),v.props=te,se=o.pendingProps,J=v.context,$=a.contextType,V=Yr,typeof $=="object"&&$!==null&&(V=an($)),I=a.getDerivedStateFromProps,($=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==se||J!==V)&&Zy(o,v,c,V),io=!1,J=o.memoizedState,v.state=J,Cl(o,c,v,y),Al();var Z=o.memoizedState;A!==se||J!==Z||io||s!==null&&s.dependencies!==null&&sc(s.dependencies)?(typeof I=="function"&&(gh(o,a,I,c),Z=o.memoizedState),(te=io||jy(o,a,te,c,J,Z,V)||s!==null&&s.dependencies!==null&&sc(s.dependencies))?($||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,V)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=Z),v.props=c,v.state=Z,v.context=V,c=te):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(o.flags|=1024),c=!1)}return v=c,Ac(s,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&c?(o.child=cr(o,s.child,null,y),o.child=cr(o,null,a,y)):ln(s,o,a,y),o.memoizedState=v.state,s=o.child):s=Ts(s,o,y),s}function pv(s,o,a,c){return sr(),o.flags|=256,ln(s,o,a,c),o.child}var Eh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sh(s){return{baseLanes:s,cachePool:iy()}}function Ah(s,o,a){return s=s!==null?s.childLanes&~a:0,o&&(s|=Kn),s}function mv(s,o,a){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(Pt.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,s===null){if(je){if(y?ro(o):ao(),(s=Tt)?(s=A0(s,si),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Zs!==null?{id:Qi,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},a=Jg(s),a.return=o,o.child=a,rn=o,Tt=null)):s=null,s===null)throw to(o);return op(s)?o.lanes=32:o.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(ao(),y=o.mode,I=Cc({mode:"hidden",children:I},y),c=ir(c,y,a,null),I.return=o,c.return=o,I.sibling=c,o.child=I,c=o.child,c.memoizedState=Sh(a),c.childLanes=Ah(s,A,a),o.memoizedState=Eh,xl(null,c)):(ro(o),Ch(o,I))}var V=s.memoizedState;if(V!==null&&(I=V.dehydrated,I!==null)){if(v)o.flags&256?(ro(o),o.flags&=-257,o=bh(s,o,a)):o.memoizedState!==null?(ao(),o.child=s.child,o.flags|=128,o=null):(ao(),I=c.fallback,y=o.mode,c=Cc({mode:"visible",children:c.children},y),I=ir(I,y,a,null),I.flags|=2,c.return=o,I.return=o,c.sibling=I,o.child=c,cr(o,s.child,null,a),c=o.child,c.memoizedState=Sh(a),c.childLanes=Ah(s,A,a),o.memoizedState=Eh,o=xl(null,c));else if(ro(o),op(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var $=A.dgst;A=$,c=Error(i(419)),c.stack="",c.digest=A,yl({value:c,source:null,stack:null}),o=bh(s,o,a)}else if(Gt||Xr(s,o,a,!1),A=(a&s.childLanes)!==0,Gt||A){if(A=gt,A!==null&&(c=Xa(A,a),c!==0&&c!==V.retryLane))throw V.retryLane=c,nr(s,c),Dn(A,s,c),_h;sp(I)||Pc(),o=bh(s,o,a)}else sp(I)?(o.flags|=192,o.child=s.child,o=null):(s=V.treeContext,Tt=ri(I.nextSibling),rn=o,je=!0,eo=null,si=!1,s!==null&&Wg(o,s),o=Ch(o,c.children),o.flags|=4096);return o}return y?(ao(),I=c.fallback,y=o.mode,V=s.child,$=V.sibling,c=ps(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,$!==null?I=ps($,I):(I=ir(I,y,a,null),I.flags|=2),I.return=o,c.return=o,c.sibling=I,o.child=c,xl(null,c),c=o.child,I=s.child.memoizedState,I===null?I=Sh(a):(y=I.cachePool,y!==null?(V=Ht._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=iy(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=Ah(s,A,a),o.memoizedState=Eh,xl(s.child,c)):(ro(o),a=s.child,s=a.sibling,a=ps(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,s!==null&&(A=o.deletions,A===null?(o.deletions=[s],o.flags|=16):A.push(s)),o.child=a,o.memoizedState=null,a)}function Ch(s,o){return o=Cc({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Cc(s,o){return s=Gn(22,s,null,o),s.lanes=0,s}function bh(s,o,a){return cr(o,s.child,null,a),s=Ch(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function gv(s,o,a){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),Bf(s.return,o,a)}function wh(s,o,a,c,y,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function yv(s,o,a){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Pt.current,I=(A&2)!==0;if(I?(A=A&1|2,o.flags|=128):A&=1,de(Pt,A),ln(s,o,c,a),c=je?gl:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&gv(s,a,o);else if(s.tag===19)gv(s,a,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(a=o.child,y=null;a!==null;)s=a.alternate,s!==null&&fc(s)===null&&(y=a),a=a.sibling;a=y,a===null?(y=o.child,o.child=null):(y=a.sibling,a.sibling=null),wh(o,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&fc(s)===null){o.child=y;break}s=y.sibling,y.sibling=a,a=y,y=s}wh(o,!0,a,null,v,c);break;case"together":wh(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function Ts(s,o,a){if(s!==null&&(o.dependencies=s.dependencies),co|=o.lanes,(a&o.childLanes)===0)if(s!==null){if(Xr(s,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,a=ps(s,s.pendingProps),o.child=a,a.return=o;s.sibling!==null;)s=s.sibling,a=a.sibling=ps(s,s.pendingProps),a.return=o;a.sibling=null}return o.child}function Ih(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&sc(s)))}function uw(s,o,a){switch(o.tag){case 3:yt(o,o.stateNode.containerInfo),no(o,Ht,s.memoizedState.cache),sr();break;case 27:case 5:Cn(o);break;case 4:yt(o,o.stateNode.containerInfo);break;case 10:no(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,jf(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(ro(o),o.flags|=128,null):(a&o.child.childLanes)!==0?mv(s,o,a):(ro(o),s=Ts(s,o,a),s!==null?s.sibling:null);ro(o);break;case 19:var y=(s.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(Xr(s,o,a,!1),c=(a&o.childLanes)!==0),y){if(c)return yv(s,o,a);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),de(Pt,Pt.current),c)break;return null;case 22:return o.lanes=0,uv(s,o,a,o.pendingProps);case 24:no(o,Ht,s.memoizedState.cache)}return Ts(s,o,a)}function vv(s,o,a){if(s!==null)if(s.memoizedProps!==o.pendingProps)Gt=!0;else{if(!Ih(s,a)&&(o.flags&128)===0)return Gt=!1,uw(s,o,a);Gt=(s.flags&131072)!==0}else Gt=!1,je&&(o.flags&1048576)!==0&&Xg(o,gl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=lr(o.elementType),o.type=s,typeof s=="function")Df(s)?(c=fr(s,c),o.tag=1,o=hv(null,o,s,c,a)):(o.tag=0,o=Th(null,o,s,c,a));else{if(s!=null){var y=s.$$typeof;if(y===re){o.tag=11,o=rv(null,o,s,c,a);break e}else if(y===N){o.tag=14,o=av(null,o,s,c,a);break e}}throw o=Ve(s)||s,Error(i(306,o,""))}}return o;case 0:return Th(s,o,o.type,o.pendingProps,a);case 1:return c=o.type,y=fr(c,o.pendingProps),hv(s,o,c,y,a);case 3:e:{if(yt(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,$f(s,o),Cl(o,c,null,a);var A=o.memoizedState;if(c=A.cache,no(o,Ht,c),c!==v.cache&&Gf(o,[Ht],a,!0),Al(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=pv(s,o,c,a);break e}else if(c!==y){y=ti(Error(i(424)),o),yl(y),o=pv(s,o,c,a);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Tt=ri(s.firstChild),rn=o,je=!0,eo=null,si=!0,a=uy(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(sr(),c===y){o=Ts(s,o,a);break e}ln(s,o,c,a)}o=o.child}return o;case 26:return Ac(s,o),s===null?(a=x0(o.type,null,o.pendingProps,null))?o.memoizedState=a:je||(a=o.type,s=o.pendingProps,c=Bc(Ne.current).createElement(a),c[Ut]=o,c[Wt]=s,un(c,a,s),Lt(c),o.stateNode=c):o.memoizedState=x0(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Cn(o),s===null&&je&&(c=o.stateNode=w0(o.type,o.pendingProps,Ne.current),rn=o,si=!0,y=Tt,go(o.type)?(rp=y,Tt=ri(c.firstChild)):Tt=y),ln(s,o,o.pendingProps.children,a),Ac(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&je&&((y=c=Tt)&&(c=Hw(c,o.type,o.pendingProps,si),c!==null?(o.stateNode=c,rn=o,Tt=ri(c.firstChild),si=!1,y=!0):y=!1),y||to(o)),Cn(o),y=o.type,v=o.pendingProps,A=s!==null?s.memoizedProps:null,c=v.children,tp(y,v)?c=null:A!==null&&tp(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=eh(s,o,ew,null,null,a),zl._currentValue=y),Ac(s,o),ln(s,o,c,a),o.child;case 6:return s===null&&je&&((s=a=Tt)&&(a=Bw(a,o.pendingProps,si),a!==null?(o.stateNode=a,rn=o,Tt=null,s=!0):s=!1),s||to(o)),null;case 13:return mv(s,o,a);case 4:return yt(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=cr(o,null,c,a):ln(s,o,c,a),o.child;case 11:return rv(s,o,o.type,o.pendingProps,a);case 7:return ln(s,o,o.pendingProps,a),o.child;case 8:return ln(s,o,o.pendingProps.children,a),o.child;case 12:return ln(s,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,no(o,o.type,c.value),ln(s,o,c.children,a),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,rr(o),y=an(y),c=c(y),o.flags|=1,ln(s,o,c,a),o.child;case 14:return av(s,o,o.type,o.pendingProps,a);case 15:return lv(s,o,o.type,o.pendingProps,a);case 19:return yv(s,o,a);case 31:return lw(s,o,a);case 22:return uv(s,o,a,o.pendingProps);case 24:return rr(o),c=an(Ht),s===null?(y=zf(),y===null&&(y=gt,v=Ff(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),o.memoizedState={parent:c,cache:y},Yf(o),no(o,Ht,y)):((s.lanes&a)!==0&&($f(s,o),Cl(o,null,null,a),Al()),y=s.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),no(o,Ht,c)):(c=v.cache,no(o,Ht,c),c!==y.cache&&Gf(o,[Ht],a,!0))),ln(s,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Es(s){s.flags|=4}function Rh(s,o,a,c,y){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(Kv())s.flags|=8192;else throw ur=lc,Kf}else s.flags&=-16777217}function _v(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!k0(o))if(Kv())s.flags|=8192;else throw ur=lc,Kf}function bc(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Qn():536870912,s.lanes|=o,la|=o)}function Nl(s,o){if(!je)switch(s.tailMode){case"hidden":o=s.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function Et(s){var o=s.alternate!==null&&s.alternate.child===s.child,a=0,c=0;if(o)for(var y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=a,o}function cw(s,o,a){var c=o.pendingProps;switch(Uf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return a=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),ys(Ht),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Qr(o)?Es(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Of())),Et(o),null;case 26:var y=o.type,v=o.memoizedState;return s===null?(Es(o),v!==null?(Et(o),_v(o,v)):(Et(o),Rh(o,y,null,c,a))):v?v!==s.memoizedState?(Es(o),Et(o),_v(o,v)):(Et(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&Es(o),Et(o),Rh(o,y,s,c,a)),null;case 27:if(hi(o),a=Ne.current,y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Es(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return Et(o),null}s=pe.current,Qr(o)?jg(o):(s=w0(y,c,a),o.stateNode=s,Es(o))}return Et(o),null;case 5:if(hi(o),y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Es(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return Et(o),null}if(v=pe.current,Qr(o))jg(o);else{var A=Bc(Ne.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[Ut]=o,v[Wt]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch(un(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Es(o)}}return Et(o),Rh(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,a),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&Es(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=Ne.current,Qr(o)){if(s=o.stateNode,a=o.memoizedProps,c=null,y=rn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[Ut]=o,s=!!(s.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||m0(s.nodeValue,a)),s||to(o,!0)}else s=Bc(s).createTextNode(c),s[Ut]=o,o.stateNode=s}return Et(o),null;case 31:if(a=o.memoizedState,s===null||s.memoizedState!==null){if(c=Qr(o),a!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Ut]=o}else sr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),s=!1}else a=Of(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return o.flags&256?(qn(o),o):(qn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Et(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Qr(o),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Ut]=o}else sr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),y=!1}else y=Of(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(qn(o),o):(qn(o),null)}return qn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=c!==null,s=s!==null&&s.memoizedState!==null,a&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==s&&a&&(o.child.flags|=8192),bc(o,o.updateQueue),Et(o),null);case 4:return lt(),s===null&&Xh(o.stateNode.containerInfo),Et(o),null;case 10:return ys(o.type),Et(o),null;case 19:if(ne(Pt),c=o.memoizedState,c===null)return Et(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)Nl(c,!1);else{if(Nt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=fc(s),v!==null){for(o.flags|=128,Nl(c,!1),s=v.updateQueue,o.updateQueue=s,bc(o,s),o.subtreeFlags=0,s=a,a=o.child;a!==null;)$g(a,s),a=a.sibling;return de(Pt,Pt.current&1|2),je&&ms(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&Kt()>Nc&&(o.flags|=128,y=!0,Nl(c,!1),o.lanes=4194304)}else{if(!y)if(s=fc(v),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,bc(o,s),Nl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!je)return Et(o),null}else 2*Kt()-c.renderingStartTime>Nc&&a!==536870912&&(o.flags|=128,y=!0,Nl(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(s=c.last,s!==null?s.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Kt(),s.sibling=null,a=Pt.current,de(Pt,y?a&1|2:a&1),je&&ms(o,c.treeForkCount),s):(Et(o),null);case 22:case 23:return qn(o),Wf(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),a=o.updateQueue,a!==null&&bc(o,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),s!==null&&ne(ar),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),ys(Ht),Et(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function dw(s,o){switch(Uf(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ys(Ht),lt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return hi(o),null;case 31:if(o.memoizedState!==null){if(qn(o),o.alternate===null)throw Error(i(340));sr()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(qn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));sr()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ne(Pt),null;case 4:return lt(),null;case 10:return ys(o.type),null;case 22:case 23:return qn(o),Wf(),s!==null&&ne(ar),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return ys(Ht),null;case 25:return null;default:return null}}function Tv(s,o){switch(Uf(o),o.tag){case 3:ys(Ht),lt();break;case 26:case 27:case 5:hi(o);break;case 4:lt();break;case 31:o.memoizedState!==null&&qn(o);break;case 13:qn(o);break;case 19:ne(Pt);break;case 10:ys(o.type);break;case 22:case 23:qn(o),Wf(),s!==null&&ne(ar);break;case 24:ys(Ht)}}function Ml(s,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&s)===s){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){dt(o,o.return,I)}}function lo(s,o,a){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=o;var V=a,$=I;try{$()}catch(te){dt(y,V,te)}}}c=c.next}while(c!==v)}}catch(te){dt(o,o.return,te)}}function Ev(s){var o=s.updateQueue;if(o!==null){var a=s.stateNode;try{dy(o,a)}catch(c){dt(s,s.return,c)}}}function Sv(s,o,a){a.props=fr(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(c){dt(s,o,c)}}function Dl(s,o){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof a=="function"?s.refCleanup=a(c):a.current=c}}catch(y){dt(s,o,y)}}function Wi(s,o){var a=s.ref,c=s.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){dt(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){dt(s,o,y)}else a.current=null}function Av(s){var o=s.type,a=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){dt(s,s.return,y)}}function xh(s,o,a){try{var c=s.stateNode;Pw(c,s.type,a,o),c[Wt]=o}catch(y){dt(s,s.return,y)}}function Cv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&go(s.type)||s.tag===4}function Nh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Cv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&go(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Mh(s,o,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(s),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=_i));else if(c!==4&&(c===27&&go(s.type)&&(a=s.stateNode,o=null),s=s.child,s!==null))for(Mh(s,o,a),s=s.sibling;s!==null;)Mh(s,o,a),s=s.sibling}function wc(s,o,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?a.insertBefore(s,o):a.appendChild(s);else if(c!==4&&(c===27&&go(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(wc(s,o,a),s=s.sibling;s!==null;)wc(s,o,a),s=s.sibling}function bv(s){var o=s.stateNode,a=s.memoizedProps;try{for(var c=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);un(o,c,a),o[Ut]=s,o[Wt]=a}catch(v){dt(s,s.return,v)}}var Ss=!1,Ft=!1,Dh=!1,wv=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function fw(s,o){if(s=s.containerInfo,Zh=$c,s=Og(s),bf(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,V=-1,$=0,te=0,se=s,J=null;t:for(;;){for(var Z;se!==a||y!==0&&se.nodeType!==3||(I=A+y),se!==v||c!==0&&se.nodeType!==3||(V=A+c),se.nodeType===3&&(A+=se.nodeValue.length),(Z=se.firstChild)!==null;)J=se,se=Z;for(;;){if(se===s)break t;if(J===a&&++$===y&&(I=A),J===v&&++te===c&&(V=A),(Z=se.nextSibling)!==null)break;se=J,J=se.parentNode}se=Z}a=I===-1||V===-1?null:{start:I,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(ep={focusedElem:s,selectionRange:a},$c=!1,Zt=o;Zt!==null;)if(o=Zt,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Zt=s;else for(;Zt!==null;){switch(o=Zt,v=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)y=s[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,a=o,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var _e=fr(a.type,y);s=c.getSnapshotBeforeUpdate(_e,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(xe){dt(a,a.return,xe)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,a=s.nodeType,a===9)ip(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ip(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Zt=s;break}Zt=o.return}}function Iv(s,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Cs(s,a),c&4&&Ml(5,a);break;case 1:if(Cs(s,a),c&4)if(s=a.stateNode,o===null)try{s.componentDidMount()}catch(A){dt(a,a.return,A)}else{var y=fr(a.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(A){dt(a,a.return,A)}}c&64&&Ev(a),c&512&&Dl(a,a.return);break;case 3:if(Cs(s,a),c&64&&(s=a.updateQueue,s!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{dy(s,o)}catch(A){dt(a,a.return,A)}}break;case 27:o===null&&c&4&&bv(a);case 26:case 5:Cs(s,a),o===null&&c&4&&Av(a),c&512&&Dl(a,a.return);break;case 12:Cs(s,a);break;case 31:Cs(s,a),c&4&&Nv(s,a);break;case 13:Cs(s,a),c&4&&Mv(s,a),c&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=Ew.bind(null,a),Gw(s,a))));break;case 22:if(c=a.memoizedState!==null||Ss,!c){o=o!==null&&o.memoizedState!==null||Ft,y=Ss;var v=Ft;Ss=c,(Ft=o)&&!v?bs(s,a,(a.subtreeFlags&8772)!==0):Cs(s,a),Ss=y,Ft=v}break;case 30:break;default:Cs(s,a)}}function Rv(s){var o=s.alternate;o!==null&&(s.alternate=null,Rv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Dr(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var bt=null,Rn=!1;function As(s,o,a){for(a=a.child;a!==null;)xv(s,o,a),a=a.sibling}function xv(s,o,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(_n,a)}catch{}switch(a.tag){case 26:Ft||Wi(a,o),As(s,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ft||Wi(a,o);var c=bt,y=Rn;go(a.type)&&(bt=a.stateNode,Rn=!1),As(s,o,a),Gl(a.stateNode),bt=c,Rn=y;break;case 5:Ft||Wi(a,o);case 6:if(c=bt,y=Rn,bt=null,As(s,o,a),bt=c,Rn=y,bt!==null)if(Rn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(a.stateNode)}catch(v){dt(a,o,v)}else try{bt.removeChild(a.stateNode)}catch(v){dt(a,o,v)}break;case 18:bt!==null&&(Rn?(s=bt,E0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),ga(s)):E0(bt,a.stateNode));break;case 4:c=bt,y=Rn,bt=a.stateNode.containerInfo,Rn=!0,As(s,o,a),bt=c,Rn=y;break;case 0:case 11:case 14:case 15:lo(2,a,o),Ft||lo(4,a,o),As(s,o,a);break;case 1:Ft||(Wi(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Sv(a,o,c)),As(s,o,a);break;case 21:As(s,o,a);break;case 22:Ft=(c=Ft)||a.memoizedState!==null,As(s,o,a),Ft=c;break;default:As(s,o,a)}}function Nv(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ga(s)}catch(a){dt(o,o.return,a)}}}function Mv(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ga(s)}catch(a){dt(o,o.return,a)}}function hw(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new wv),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new wv),o;default:throw Error(i(435,s.tag))}}function Ic(s,o){var a=hw(s);o.forEach(function(c){if(!a.has(c)){a.add(c);var y=Sw.bind(null,s,c);c.then(y,y)}})}function xn(s,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=s,A=o,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(go(I.type)){bt=I.stateNode,Rn=!1;break e}break;case 5:bt=I.stateNode,Rn=!1;break e;case 3:case 4:bt=I.stateNode.containerInfo,Rn=!0;break e}I=I.return}if(bt===null)throw Error(i(160));xv(v,A,y),bt=null,Rn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Dv(o,s),o=o.sibling}var bi=null;function Dv(s,o){var a=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:xn(o,s),Nn(s),c&4&&(lo(3,s,s.return),Ml(3,s),lo(5,s,s.return));break;case 1:xn(o,s),Nn(s),c&512&&(Ft||a===null||Wi(a,a.return)),c&64&&Ss&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=bi;if(xn(o,s),Nn(s),c&512&&(Ft||a===null||Wi(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=s.memoizedState,a===null)if(c===null)if(s.stateNode===null){e:{c=s.type,a=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Li]||v[Ut]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),un(v,c,a),v[Ut]=s,Lt(v),c=v;break e;case"link":var A=D0("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=y.createElement(c),un(v,c,a),y.head.appendChild(v);break;case"meta":if(A=D0("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=y.createElement(c),un(v,c,a),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[Ut]=s,Lt(v),c=v}s.stateNode=c}else P0(y,s.type,s.stateNode);else s.stateNode=M0(y,c,s.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?P0(y,s.type,s.stateNode):M0(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&xh(s,s.memoizedProps,a.memoizedProps)}break;case 27:xn(o,s),Nn(s),c&512&&(Ft||a===null||Wi(a,a.return)),a!==null&&c&4&&xh(s,s.memoizedProps,a.memoizedProps);break;case 5:if(xn(o,s),Nn(s),c&512&&(Ft||a===null||Wi(a,a.return)),s.flags&32){y=s.stateNode;try{In(y,"")}catch(_e){dt(s,s.return,_e)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,xh(s,y,a!==null?a.memoizedProps:y)),c&1024&&(Dh=!0);break;case 6:if(xn(o,s),Nn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,a=s.stateNode;try{a.nodeValue=c}catch(_e){dt(s,s.return,_e)}}break;case 3:if(qc=null,y=bi,bi=Gc(o.containerInfo),xn(o,s),bi=y,Nn(s),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ga(o.containerInfo)}catch(_e){dt(s,s.return,_e)}Dh&&(Dh=!1,Pv(s));break;case 4:c=bi,bi=Gc(s.stateNode.containerInfo),xn(o,s),Nn(s),bi=c;break;case 12:xn(o,s),Nn(s);break;case 31:xn(o,s),Nn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ic(s,c)));break;case 13:xn(o,s),Nn(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xc=Kt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ic(s,c)));break;case 22:y=s.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,$=Ss,te=Ft;if(Ss=$||y,Ft=te||V,xn(o,s),Ft=te,Ss=$,Nn(s),c&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(a===null||V||Ss||Ft||hr(s)),a=null,o=s;;){if(o.tag===5||o.tag===26){if(a===null){V=a=o;try{if(v=V.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=V.stateNode;var se=V.memoizedProps.style,J=se!=null&&se.hasOwnProperty("display")?se.display:null;I.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(_e){dt(V,V.return,_e)}}}else if(o.tag===6){if(a===null){V=o;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(_e){dt(V,V.return,_e)}}}else if(o.tag===18){if(a===null){V=o;try{var Z=V.stateNode;y?S0(Z,!0):S0(V.stateNode,!1)}catch(_e){dt(V,V.return,_e)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Ic(s,a))));break;case 19:xn(o,s),Nn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ic(s,c)));break;case 30:break;case 21:break;default:xn(o,s),Nn(s)}}function Nn(s){var o=s.flags;if(o&2){try{for(var a,c=s.return;c!==null;){if(Cv(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var y=a.stateNode,v=Nh(s);wc(s,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(In(A,""),a.flags&=-33);var I=Nh(s);wc(s,I,A);break;case 3:case 4:var V=a.stateNode.containerInfo,$=Nh(s);Mh(s,$,V);break;default:throw Error(i(161))}}catch(te){dt(s,s.return,te)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Pv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Pv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Cs(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Iv(s,o.alternate,o),o=o.sibling}function hr(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:lo(4,o,o.return),hr(o);break;case 1:Wi(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Sv(o,o.return,a),hr(o);break;case 27:Gl(o.stateNode);case 26:case 5:Wi(o,o.return),hr(o);break;case 22:o.memoizedState===null&&hr(o);break;case 30:hr(o);break;default:hr(o)}s=s.sibling}}function bs(s,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=s,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:bs(y,v,a),Ml(4,v);break;case 1:if(bs(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){dt(c,c.return,$)}if(c=v,y=c.updateQueue,y!==null){var I=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)cy(V[y],I)}catch($){dt(c,c.return,$)}}a&&A&64&&Ev(v),Dl(v,v.return);break;case 27:bv(v);case 26:case 5:bs(y,v,a),a&&c===null&&A&4&&Av(v),Dl(v,v.return);break;case 12:bs(y,v,a);break;case 31:bs(y,v,a),a&&A&4&&Nv(y,v);break;case 13:bs(y,v,a),a&&A&4&&Mv(y,v);break;case 22:v.memoizedState===null&&bs(y,v,a),Dl(v,v.return);break;case 30:break;default:bs(y,v,a)}o=o.sibling}}function Ph(s,o){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&vl(a))}function kh(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&vl(s))}function wi(s,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)kv(s,o,a,c),o=o.sibling}function kv(s,o,a,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:wi(s,o,a,c),y&2048&&Ml(9,o);break;case 1:wi(s,o,a,c);break;case 3:wi(s,o,a,c),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&vl(s)));break;case 12:if(y&2048){wi(s,o,a,c),s=o.stateNode;try{var v=o.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){dt(o,o.return,V)}}else wi(s,o,a,c);break;case 31:wi(s,o,a,c);break;case 13:wi(s,o,a,c);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?wi(s,o,a,c):Pl(s,o):v._visibility&2?wi(s,o,a,c):(v._visibility|=2,oa(s,o,a,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Ph(A,o);break;case 24:wi(s,o,a,c),y&2048&&kh(o.alternate,o);break;default:wi(s,o,a,c)}}function oa(s,o,a,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=s,A=o,I=a,V=c,$=A.flags;switch(A.tag){case 0:case 11:case 15:oa(v,A,I,V,y),Ml(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?oa(v,A,I,V,y):Pl(v,A):(te._visibility|=2,oa(v,A,I,V,y)),y&&$&2048&&Ph(A.alternate,A);break;case 24:oa(v,A,I,V,y),y&&$&2048&&kh(A.alternate,A);break;default:oa(v,A,I,V,y)}o=o.sibling}}function Pl(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=s,c=o,y=c.flags;switch(c.tag){case 22:Pl(a,c),y&2048&&Ph(c.alternate,c);break;case 24:Pl(a,c),y&2048&&kh(c.alternate,c);break;default:Pl(a,c)}o=o.sibling}}var kl=8192;function ra(s,o,a){if(s.subtreeFlags&kl)for(s=s.child;s!==null;)Vv(s,o,a),s=s.sibling}function Vv(s,o,a){switch(s.tag){case 26:ra(s,o,a),s.flags&kl&&s.memoizedState!==null&&Zw(a,bi,s.memoizedState,s.memoizedProps);break;case 5:ra(s,o,a);break;case 3:case 4:var c=bi;bi=Gc(s.stateNode.containerInfo),ra(s,o,a),bi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=kl,kl=16777216,ra(s,o,a),kl=c):ra(s,o,a));break;default:ra(s,o,a)}}function Uv(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Vl(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];Zt=c,Ov(c,s)}Uv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Lv(s),s=s.sibling}function Lv(s){switch(s.tag){case 0:case 11:case 15:Vl(s),s.flags&2048&&lo(9,s,s.return);break;case 3:Vl(s);break;case 12:Vl(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Rc(s)):Vl(s);break;default:Vl(s)}}function Rc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];Zt=c,Ov(c,s)}Uv(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:lo(8,o,o.return),Rc(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Rc(o));break;default:Rc(o)}s=s.sibling}}function Ov(s,o){for(;Zt!==null;){var a=Zt;switch(a.tag){case 0:case 11:case 15:lo(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:vl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Zt=c;else e:for(a=s;Zt!==null;){c=Zt;var y=c.sibling,v=c.return;if(Rv(c),c===a){Zt=null;break e}if(y!==null){y.return=v,Zt=y;break e}Zt=v}}}var pw={getCacheForType:function(s){var o=an(Ht),a=o.data.get(s);return a===void 0&&(a=s(),o.data.set(s,a)),a},cacheSignal:function(){return an(Ht).controller.signal}},mw=typeof WeakMap=="function"?WeakMap:Map,ot=0,gt=null,Ke=null,$e=0,ct=0,zn=null,uo=!1,aa=!1,Vh=!1,ws=0,Nt=0,co=0,pr=0,Uh=0,Kn=0,la=0,Ul=null,Mn=null,Lh=!1,xc=0,Hv=0,Nc=1/0,Mc=null,fo=null,$t=0,ho=null,ua=null,Is=0,Oh=0,Hh=null,Bv=null,Ll=0,Bh=null;function Yn(){return(ot&2)!==0&&$e!==0?$e&-$e:j.T!==null?Yh():Du()}function Gv(){if(Kn===0)if(($e&536870912)===0||je){var s=Te;Te<<=1,(Te&3932160)===0&&(Te=262144),Kn=s}else Kn=536870912;return s=Fn.current,s!==null&&(s.flags|=32),Kn}function Dn(s,o,a){(s===gt&&(ct===2||ct===9)||s.cancelPendingCommit!==null)&&(ca(s,0),po(s,$e,Kn,!1)),Fo(s,a),((ot&2)===0||s!==gt)&&(s===gt&&((ot&2)===0&&(pr|=a),Nt===4&&po(s,$e,Kn,!1)),ji(s))}function Fv(s,o,a){if((ot&6)!==0)throw Error(i(327));var c=!a&&(o&127)===0&&(o&s.expiredLanes)===0||Mt(s,o),y=c?vw(s,o):Fh(s,o,!0),v=c;do{if(y===0){aa&&!c&&po(s,o,0,!1);break}else{if(a=s.current.alternate,v&&!gw(a)){y=Fh(s,o,!1),v=!1;continue}if(y===2){if(v=o,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var I=s;y=Ul;var V=I.current.memoizedState.isDehydrated;if(V&&(ca(I,A).flags|=256),A=Fh(I,A,!1),A!==2){if(Vh&&!V){I.errorRecoveryDisabledLanes|=v,pr|=v,y=4;break e}v=Mn,Mn=y,v!==null&&(Mn===null?Mn=v:Mn.push.apply(Mn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){ca(s,0),po(s,o,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:po(c,o,Kn,!uo);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=xc+300-Kt(),10<y)){if(po(c,o,Kn,!uo),Yt(c,0,!0)!==0)break e;Is=o,c.timeoutHandle=_0(qv.bind(null,c,a,Mn,Mc,Lh,o,Kn,pr,la,uo,v,"Throttled",-0,0),y);break e}qv(c,a,Mn,Mc,Lh,o,Kn,pr,la,uo,v,null,-0,0)}}break}while(!0);ji(s)}function qv(s,o,a,c,y,v,A,I,V,$,te,se,J,Z){if(s.timeoutHandle=-1,se=o.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},Vv(o,v,se);var _e=(v&62914560)===v?xc-Kt():(v&4194048)===v?Hv-Kt():0;if(_e=eI(se,_e),_e!==null){Is=v,s.cancelPendingCommit=_e(Wv.bind(null,s,o,v,a,c,y,A,I,V,te,se,null,J,Z)),po(s,v,A,!$);return}}Wv(s,o,v,a,c,y,A,I,V)}function gw(s){for(var o=s;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!Bn(v(),y))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function po(s,o,a,c){o&=~Uh,o&=~pr,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var y=o;0<y;){var v=31-ze(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&qo(s,a,o)}function Dc(){return(ot&6)===0?(Ol(0),!1):!0}function Gh(){if(Ke!==null){if(ct===0)var s=Ke.return;else s=Ke,gs=or=null,ih(s),ea=null,Tl=0,s=Ke;for(;s!==null;)Tv(s.alternate,s),s=s.return;Ke=null}}function ca(s,o){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,Uw(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),Is=0,Gh(),gt=s,Ke=a=ps(s.current,null),$e=o,ct=0,zn=null,uo=!1,aa=Mt(s,o),Vh=!1,la=Kn=Uh=pr=co=Nt=0,Mn=Ul=null,Lh=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var y=31-ze(c),v=1<<y;o|=s[y],c&=~v}return ws=o,Zu(),a}function zv(s,o){He=null,j.H=Rl,o===Zr||o===ac?(o=ry(),ct=3):o===Kf?(o=ry(),ct=4):ct=o===_h?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,zn=o,Ke===null&&(Nt=1,Ec(s,ti(o,s.current)))}function Kv(){var s=Fn.current;return s===null?!0:($e&4194048)===$e?oi===null:($e&62914560)===$e||($e&536870912)!==0?s===oi:!1}function Yv(){var s=j.H;return j.H=Rl,s===null?Rl:s}function $v(){var s=j.A;return j.A=pw,s}function Pc(){Nt=4,uo||($e&4194048)!==$e&&Fn.current!==null||(aa=!0),(co&134217727)===0&&(pr&134217727)===0||gt===null||po(gt,$e,Kn,!1)}function Fh(s,o,a){var c=ot;ot|=2;var y=Yv(),v=$v();(gt!==s||$e!==o)&&(Mc=null,ca(s,o)),o=!1;var A=Nt;e:do try{if(ct!==0&&Ke!==null){var I=Ke,V=zn;switch(ct){case 8:Gh(),A=6;break e;case 3:case 2:case 9:case 6:Fn.current===null&&(o=!0);var $=ct;if(ct=0,zn=null,da(s,I,V,$),a&&aa){A=0;break e}break;default:$=ct,ct=0,zn=null,da(s,I,V,$)}}yw(),A=Nt;break}catch(te){zv(s,te)}while(!0);return o&&s.shellSuspendCounter++,gs=or=null,ot=c,j.H=y,j.A=v,Ke===null&&(gt=null,$e=0,Zu()),A}function yw(){for(;Ke!==null;)Jv(Ke)}function vw(s,o){var a=ot;ot|=2;var c=Yv(),y=$v();gt!==s||$e!==o?(Mc=null,Nc=Kt()+500,ca(s,o)):aa=Mt(s,o);e:do try{if(ct!==0&&Ke!==null){o=Ke;var v=zn;t:switch(ct){case 1:ct=0,zn=null,da(s,o,v,1);break;case 2:case 9:if(sy(v)){ct=0,zn=null,Qv(o);break}o=function(){ct!==2&&ct!==9||gt!==s||(ct=7),ji(s)},v.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:sy(v)?(ct=0,zn=null,Qv(o)):(ct=0,zn=null,da(s,o,v,7));break;case 5:var A=null;switch(Ke.tag){case 26:A=Ke.memoizedState;case 5:case 27:var I=Ke;if(A?k0(A):I.stateNode.complete){ct=0,zn=null;var V=I.sibling;if(V!==null)Ke=V;else{var $=I.return;$!==null?(Ke=$,kc($)):Ke=null}break t}}ct=0,zn=null,da(s,o,v,5);break;case 6:ct=0,zn=null,da(s,o,v,6);break;case 8:Gh(),Nt=6;break e;default:throw Error(i(462))}}_w();break}catch(te){zv(s,te)}while(!0);return gs=or=null,j.H=c,j.A=y,ot=a,Ke!==null?0:(gt=null,$e=0,Zu(),Nt)}function _w(){for(;Ke!==null&&!Go();)Jv(Ke)}function Jv(s){var o=vv(s.alternate,s,ws);s.memoizedProps=s.pendingProps,o===null?kc(s):Ke=o}function Qv(s){var o=s,a=o.alternate;switch(o.tag){case 15:case 0:o=fv(a,o,o.pendingProps,o.type,void 0,$e);break;case 11:o=fv(a,o,o.pendingProps,o.type.render,o.ref,$e);break;case 5:ih(o);default:Tv(a,o),o=Ke=$g(o,ws),o=vv(a,o,ws)}s.memoizedProps=s.pendingProps,o===null?kc(s):Ke=o}function da(s,o,a,c){gs=or=null,ih(o),ea=null,Tl=0;var y=o.return;try{if(aw(s,y,o,a,$e)){Nt=1,Ec(s,ti(a,s.current)),Ke=null;return}}catch(v){if(y!==null)throw Ke=y,v;Nt=1,Ec(s,ti(a,s.current)),Ke=null;return}o.flags&32768?(je||c===1?s=!0:aa||($e&536870912)!==0?s=!1:(uo=s=!0,(c===2||c===9||c===3||c===6)&&(c=Fn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Xv(o,s)):kc(o)}function kc(s){var o=s;do{if((o.flags&32768)!==0){Xv(o,uo);return}s=o.return;var a=cw(o.alternate,o,ws);if(a!==null){Ke=a;return}if(o=o.sibling,o!==null){Ke=o;return}Ke=o=s}while(o!==null);Nt===0&&(Nt=5)}function Xv(s,o){do{var a=dw(s.alternate,s);if(a!==null){a.flags&=32767,Ke=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(s=s.sibling,s!==null)){Ke=s;return}Ke=s=a}while(s!==null);Nt=6,Ke=null}function Wv(s,o,a,c,y,v,A,I,V){s.cancelPendingCommit=null;do Vc();while($t!==0);if((ot&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=Nf,Ef(s,a,v,A,I,V),s===gt&&(Ke=gt=null,$e=0),ua=o,ho=s,Is=a,Oh=v,Hh=y,Bv=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Aw(bn,function(){return n0(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=j.T,j.T=null,y=ue.p,ue.p=2,A=ot,ot|=4;try{fw(s,o,a)}finally{ot=A,ue.p=y,j.T=c}}$t=1,jv(),Zv(),e0()}}function jv(){if($t===1){$t=0;var s=ho,o=ua,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var c=ue.p;ue.p=2;var y=ot;ot|=4;try{Dv(o,s);var v=ep,A=Og(s.containerInfo),I=v.focusedElem,V=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&Lg(I.ownerDocument.documentElement,I)){if(V!==null&&bf(I)){var $=V.start,te=V.end;if(te===void 0&&(te=$),"selectionStart"in I)I.selectionStart=$,I.selectionEnd=Math.min(te,I.value.length);else{var se=I.ownerDocument||document,J=se&&se.defaultView||window;if(J.getSelection){var Z=J.getSelection(),_e=I.textContent.length,xe=Math.min(V.start,_e),mt=V.end===void 0?xe:Math.min(V.end,_e);!Z.extend&&xe>mt&&(A=mt,mt=xe,xe=A);var z=Ug(I,xe),G=Ug(I,mt);if(z&&G&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==G.node||Z.focusOffset!==G.offset)){var Y=se.createRange();Y.setStart(z.node,z.offset),Z.removeAllRanges(),xe>mt?(Z.addRange(Y),Z.extend(G.node,G.offset)):(Y.setEnd(G.node,G.offset),Z.addRange(Y))}}}}for(se=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&se.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<se.length;I++){var ie=se[I];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}$c=!!Zh,ep=Zh=null}finally{ot=y,ue.p=c,j.T=a}}s.current=o,$t=2}}function Zv(){if($t===2){$t=0;var s=ho,o=ua,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var c=ue.p;ue.p=2;var y=ot;ot|=4;try{Iv(s,o.alternate,o)}finally{ot=y,ue.p=c,j.T=a}}$t=3}}function e0(){if($t===4||$t===3){$t=0,Gs();var s=ho,o=ua,a=Is,c=Bv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?$t=5:($t=0,ua=ho=null,t0(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(fo=null),cs(a),o=o.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(_n,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=j.T,y=ue.p,ue.p=2,j.T=null;try{for(var v=s.onRecoverableError,A=0;A<c.length;A++){var I=c[A];v(I.value,{componentStack:I.stack})}}finally{j.T=o,ue.p=y}}(Is&3)!==0&&Vc(),ji(s),y=s.pendingLanes,(a&261930)!==0&&(y&42)!==0?s===Bh?Ll++:(Ll=0,Bh=s):Ll=0,Ol(0)}}function t0(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,vl(o)))}function Vc(){return jv(),Zv(),e0(),n0()}function n0(){if($t!==5)return!1;var s=ho,o=Oh;Oh=0;var a=cs(Is),c=j.T,y=ue.p;try{ue.p=32>a?32:a,j.T=null,a=Hh,Hh=null;var v=ho,A=Is;if($t=0,ua=ho=null,Is=0,(ot&6)!==0)throw Error(i(331));var I=ot;if(ot|=4,Lv(v.current),kv(v,v.current,A,a),ot=I,Ol(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(_n,v)}catch{}return!0}finally{ue.p=y,j.T=c,t0(s,o)}}function i0(s,o,a){o=ti(a,o),o=vh(s.stateNode,o,2),s=oo(s,o,2),s!==null&&(Fo(s,2),ji(s))}function dt(s,o,a){if(s.tag===3)i0(s,s,a);else for(;o!==null;){if(o.tag===3){i0(o,s,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(fo===null||!fo.has(c))){s=ti(a,s),a=sv(2),c=oo(o,a,2),c!==null&&(ov(a,c,o,s),Fo(c,2),ji(c));break}}o=o.return}}function qh(s,o,a){var c=s.pingCache;if(c===null){c=s.pingCache=new mw;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(a)||(Vh=!0,y.add(a),s=Tw.bind(null,s,o,a),o.then(s,s))}function Tw(s,o,a){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,gt===s&&($e&a)===a&&(Nt===4||Nt===3&&($e&62914560)===$e&&300>Kt()-xc?(ot&2)===0&&ca(s,0):Uh|=a,la===$e&&(la=0)),ji(s)}function s0(s,o){o===0&&(o=Qn()),s=nr(s,o),s!==null&&(Fo(s,o),ji(s))}function Ew(s){var o=s.memoizedState,a=0;o!==null&&(a=o.retryLane),s0(s,a)}function Sw(s,o){var a=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),s0(s,a)}function Aw(s,o){return _t(s,o)}var Uc=null,fa=null,zh=!1,Lc=!1,Kh=!1,mo=0;function ji(s){s!==fa&&s.next===null&&(fa===null?Uc=fa=s:fa=fa.next=s),Lc=!0,zh||(zh=!0,bw())}function Ol(s,o){if(!Kh&&Lc){Kh=!0;do for(var a=!1,c=Uc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,I=c.pingedLanes;v=(1<<31-ze(42|s)+1)-1,v&=y&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,l0(c,v))}else v=$e,v=Yt(c,c===gt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Mt(c,v)||(a=!0,l0(c,v));c=c.next}while(a);Kh=!1}}function Cw(){o0()}function o0(){Lc=zh=!1;var s=0;mo!==0&&Vw()&&(s=mo);for(var o=Kt(),a=null,c=Uc;c!==null;){var y=c.next,v=r0(c,o);v===0?(c.next=null,a===null?Uc=y:a.next=y,y===null&&(fa=a)):(a=c,(s!==0||(v&3)!==0)&&(Lc=!0)),c=y}$t!==0&&$t!==5||Ol(s),mo!==0&&(mo=0)}function r0(s,o){for(var a=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-ze(v),I=1<<A,V=y[A];V===-1?((I&a)===0||(I&c)!==0)&&(y[A]=Vi(I,o)):V<=o&&(s.expiredLanes|=I),v&=~I}if(o=gt,a=$e,a=Yt(s,s===o?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,a===0||s===o&&(ct===2||ct===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Jn(c),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||Mt(s,a)){if(o=a&-a,o===s.callbackPriority)return o;switch(c!==null&&Jn(c),cs(a)){case 2:case 8:a=vt;break;case 32:a=bn;break;case 268435456:a=gi;break;default:a=bn}return c=a0.bind(null,s),a=_t(a,c),s.callbackPriority=o,s.callbackNode=a,o}return c!==null&&c!==null&&Jn(c),s.callbackPriority=2,s.callbackNode=null,2}function a0(s,o){if($t!==0&&$t!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(Vc()&&s.callbackNode!==a)return null;var c=$e;return c=Yt(s,s===gt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Fv(s,c,o),r0(s,Kt()),s.callbackNode!=null&&s.callbackNode===a?a0.bind(null,s):null)}function l0(s,o){if(Vc())return null;Fv(s,o,!0)}function bw(){Lw(function(){(ot&6)!==0?_t(Un,Cw):o0()})}function Yh(){if(mo===0){var s=Wr;s===0&&(s=ge,ge<<=1,(ge&261888)===0&&(ge=256)),mo=s}return mo}function u0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ur(""+s)}function c0(s,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,s.id&&a.setAttribute("form",s.id),o.parentNode.insertBefore(a,o),s=new FormData(s),a.parentNode.removeChild(a),s}function ww(s,o,a,c,y){if(o==="submit"&&a&&a.stateNode===y){var v=u0((y[Wt]||null).action),A=c.submitter;A&&(o=(o=A[Wt]||null)?u0(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var I=new Ki("action","action",null,c,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(mo!==0){var V=A?c0(y,A):new FormData(y);fh(a,{pending:!0,data:V,method:y.method,action:v},null,V)}}else typeof v=="function"&&(I.preventDefault(),V=A?c0(y,A):new FormData(y),fh(a,{pending:!0,data:V,method:y.method,action:v},v,V))},currentTarget:y}]})}}for(var $h=0;$h<xf.length;$h++){var Jh=xf[$h],Iw=Jh.toLowerCase(),Rw=Jh[0].toUpperCase()+Jh.slice(1);Ci(Iw,"on"+Rw)}Ci(Gg,"onAnimationEnd"),Ci(Fg,"onAnimationIteration"),Ci(qg,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(zb,"onTransitionRun"),Ci(Kb,"onTransitionStart"),Ci(Yb,"onTransitionCancel"),Ci(zg,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hl));function d0(s,o){o=(o&4)!==0;for(var a=0;a<s.length;a++){var c=s[a],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var A=c.length-1;0<=A;A--){var I=c[A],V=I.instance,$=I.currentTarget;if(I=I.listener,V!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=$;try{v(y)}catch(te){ju(te)}y.currentTarget=null,v=V}else for(A=0;A<c.length;A++){if(I=c[A],V=I.instance,$=I.currentTarget,I=I.listener,V!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=$;try{v(y)}catch(te){ju(te)}y.currentTarget=null,v=V}}}}function Ye(s,o){var a=o[Mr];a===void 0&&(a=o[Mr]=new Set);var c=s+"__bubble";a.has(c)||(f0(o,s,2,!1),a.add(c))}function Qh(s,o,a){var c=0;o&&(c|=4),f0(a,s,c,o)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function Xh(s){if(!s[Oc]){s[Oc]=!0,Wa.forEach(function(a){a!=="selectionchange"&&(xw.has(a)||Qh(a,!1,s),Qh(a,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Oc]||(o[Oc]=!0,Qh("selectionchange",!1,o))}}function f0(s,o,a,c){switch(G0(o)){case 2:var y=iI;break;case 8:y=sI;break;default:y=dp}a=y.bind(null,o,a,s),y=void 0,!Jo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(o,a,{capture:!0,passive:y}):s.addEventListener(o,a,!0):y!==void 0?s.addEventListener(o,a,{passive:y}):s.addEventListener(o,a,!1)}function Wh(s,o,a,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=Oi(I),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){c=v=A;continue e}I=I.parentNode}}c=c.return}Qs(function(){var $=v,te=Wn(a),se=[];e:{var J=Kg.get(s);if(J!==void 0){var Z=Ki,_e=s;switch(s){case"keypress":if(Xo(a)===0)break e;case"keydown":case"keyup":Z=Qu;break;case"focusin":_e="focus",Z=jo;break;case"focusout":_e="blur",Z=jo;break;case"beforeblur":case"afterblur":Z=jo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=E;break;case Gg:case Fg:case qg:Z=Fu;break;case zg:Z=R;break;case"scroll":case"scrollend":Z=ul;break;case"wheel":Z=X;break;case"copy":case"cut":case"paste":Z=qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=hs;break;case"toggle":case"beforetoggle":Z=Oe}var xe=(o&4)!==0,mt=!xe&&(s==="scroll"||s==="scrollend"),z=xe?J!==null?J+"Capture":null:J;xe=[];for(var G=$,Y;G!==null;){var ie=G;if(Y=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Y===null||z===null||(ie=Ti(G,z),ie!=null&&xe.push(Bl(G,ie,Y))),mt)break;G=G.return}0<xe.length&&(J=new Z(J,_e,null,a,te),se.push({event:J,listeners:xe}))}}if((o&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",J&&a!==rl&&(_e=a.relatedTarget||a.fromElement)&&(Oi(_e)||_e[Ui]))break e;if((Z||J)&&(J=te.window===te?te:(J=te.ownerDocument)?J.defaultView||J.parentWindow:window,Z?(_e=a.relatedTarget||a.toElement,Z=$,_e=_e?Oi(_e):null,_e!==null&&(mt=l(_e),xe=_e.tag,_e!==mt||xe!==5&&xe!==27&&xe!==6)&&(_e=null)):(Z=null,_e=$),Z!==_e)){if(xe=cl,ie="onMouseLeave",z="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(xe=hs,ie="onPointerLeave",z="onPointerEnter",G="pointer"),mt=Z==null?J:On(Z),Y=_e==null?J:On(_e),J=new xe(ie,G+"leave",Z,a,te),J.target=mt,J.relatedTarget=Y,ie=null,Oi(te)===$&&(xe=new xe(z,G+"enter",_e,a,te),xe.target=Y,xe.relatedTarget=mt,ie=xe),mt=ie,Z&&_e)t:{for(xe=Nw,z=Z,G=_e,Y=0,ie=z;ie;ie=xe(ie))Y++;ie=0;for(var we=G;we;we=xe(we))ie++;for(;0<Y-ie;)z=xe(z),Y--;for(;0<ie-Y;)G=xe(G),ie--;for(;Y--;){if(z===G||G!==null&&z===G.alternate){xe=z;break t}z=xe(z),G=xe(G)}xe=null}else xe=null;Z!==null&&h0(se,J,Z,xe,!1),_e!==null&&mt!==null&&h0(se,mt,_e,xe,!0)}}e:{if(J=$?On($):window,Z=J.nodeName&&J.nodeName.toLowerCase(),Z==="select"||Z==="input"&&J.type==="file")var tt=Ng;else if(Rg(J))if(Mg)tt=Gb;else{tt=Hb;var Se=Ob}else Z=J.nodeName,!Z||Z.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?$&&Vr($.elementType)&&(tt=Ng):tt=Bb;if(tt&&(tt=tt(s,$))){xg(se,tt,a,te);break e}Se&&Se(s,J,$),s==="focusout"&&$&&J.type==="number"&&$.memoizedProps.value!=null&&il(J,"number",J.value)}switch(Se=$?On($):window,s){case"focusin":(Rg(Se)||Se.contentEditable==="true")&&(qr=Se,wf=$,ml=null);break;case"focusout":ml=wf=qr=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,Hg(se,a,te);break;case"selectionchange":if(qb)break;case"keydown":case"keyup":Hg(se,a,te)}var Fe;if(st)e:{switch(s){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Fr?Zo(s,a)&&(Je="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(Ji&&a.locale!=="ko"&&(Fr||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Fr&&(Fe=ll()):(zi=te,al="value"in zi?zi.value:zi.textContent,Fr=!0)),Se=Hc($,Je),0<Se.length&&(Je=new $i(Je,s,null,a,te),se.push({event:Je,listeners:Se}),Fe?Je.data=Fe:(Fe=Gr(a),Fe!==null&&(Je.data=Fe)))),(Fe=Zn?kb(s,a):Vb(s,a))&&(Je=Hc($,"onBeforeInput"),0<Je.length&&(Se=new $i("onBeforeInput","beforeinput",null,a,te),se.push({event:Se,listeners:Je}),Se.data=Fe)),ww(se,s,$,a,te)}d0(se,o)})}function Bl(s,o,a){return{instance:s,listener:o,currentTarget:a}}function Hc(s,o){for(var a=o+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Ti(s,a),y!=null&&c.unshift(Bl(s,y,v)),y=Ti(s,o),y!=null&&c.push(Bl(s,y,v))),s.tag===3)return c;s=s.return}return[]}function Nw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function h0(s,o,a,c,y){for(var v=o._reactName,A=[];a!==null&&a!==c;){var I=a,V=I.alternate,$=I.stateNode;if(I=I.tag,V!==null&&V===c)break;I!==5&&I!==26&&I!==27||$===null||(V=$,y?($=Ti(a,v),$!=null&&A.unshift(Bl(a,$,V))):y||($=Ti(a,v),$!=null&&A.push(Bl(a,$,V)))),a=a.return}A.length!==0&&s.push({event:o,listeners:A})}var Mw=/\r\n?/g,Dw=/\u0000|\uFFFD/g;function p0(s){return(typeof s=="string"?s:""+s).replace(Mw,`
`).replace(Dw,"")}function m0(s,o){return o=p0(o),p0(s)===o}function pt(s,o,a,c,y,v){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||In(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&In(s,""+c);break;case"className":Hn(s,"class",c);break;case"tabIndex":Hn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(s,a,c);break;case"style":ol(s,c,v);break;case"data":if(o!=="object"){Hn(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){s.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=Ur(""+c),s.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&pt(s,o,"name",y.name,y,null),pt(s,o,"formEncType",y.formEncType,y,null),pt(s,o,"formMethod",y.formMethod,y,null),pt(s,o,"formTarget",y.formTarget,y,null)):(pt(s,o,"encType",y.encType,y,null),pt(s,o,"method",y.method,y,null),pt(s,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=Ur(""+c),s.setAttribute(a,c);break;case"onClick":c!=null&&(s.onclick=_i);break;case"onScroll":c!=null&&Ye("scroll",s);break;case"onScrollEnd":c!=null&&Ye("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}a=Ur(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""+c):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":c===!0?s.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,c):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(a,c):s.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(a):s.setAttribute(a,c);break;case"popover":Ye("beforetoggle",s),Ye("toggle",s),Pr(s,"popover",c);break;case"xlinkActuate":Ot(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ot(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ot(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ot(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ot(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ot(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ot(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ot(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ot(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Pr(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Hu.get(a)||a,Pr(s,a,c))}}function jh(s,o,a,c,y,v){switch(a){case"style":ol(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"children":typeof c=="string"?In(s,c):(typeof c=="number"||typeof c=="bigint")&&In(s,""+c);break;case"onScroll":c!=null&&Ye("scroll",s);break;case"onScrollEnd":c!=null&&Ye("scrollend",s);break;case"onClick":c!=null&&(s.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ja.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),o=a.slice(2,y?a.length-7:void 0),v=s[Wt]||null,v=v!=null?v[a]:null,typeof v=="function"&&s.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(o,c,y);break e}a in s?s[a]=c:c===!0?s.setAttribute(a,""):Pr(s,a,c)}}}function un(s,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",s),Ye("load",s);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:pt(s,o,v,A,a,null)}}y&&pt(s,o,"srcSet",a.srcSet,a,null),c&&pt(s,o,"src",a.src,a,null);return;case"input":Ye("invalid",s);var I=v=A=y=null,V=null,$=null;for(c in a)if(a.hasOwnProperty(c)){var te=a[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":V=te;break;case"defaultChecked":$=te;break;case"value":v=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:pt(s,o,c,te,a,null)}}Uu(s,v,I,V,$,A,y,!1);return;case"select":Ye("invalid",s),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:pt(s,o,y,I,a,null)}o=v,a=A,s.multiple=!!c,o!=null?Ks(s,!!c,o,!1):a!=null&&Ks(s,!!c,a,!0);return;case"textarea":Ye("invalid",s),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:pt(s,o,A,I,a,null)}Ys(s,c,y,v);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(c=a[V],c!=null))switch(V){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:pt(s,o,V,c,a,null)}return;case"dialog":Ye("beforetoggle",s),Ye("toggle",s),Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":Ye("load",s);break;case"video":case"audio":for(c=0;c<Hl.length;c++)Ye(Hl[c],s);break;case"image":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"embed":case"source":case"link":Ye("error",s),Ye("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:pt(s,o,$,c,a,null)}return;default:if(Vr(o)){for(te in a)a.hasOwnProperty(te)&&(c=a[te],c!==void 0&&jh(s,o,te,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&pt(s,o,I,c,a,null))}function Pw(s,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,I=null,V=null,$=null,te=null;for(Z in a){var se=a[Z];if(a.hasOwnProperty(Z)&&se!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":V=se;default:c.hasOwnProperty(Z)||pt(s,o,Z,null,c,se)}}for(var J in c){var Z=c[J];if(se=a[J],c.hasOwnProperty(J)&&(Z!=null||se!=null))switch(J){case"type":v=Z;break;case"name":y=Z;break;case"checked":$=Z;break;case"defaultChecked":te=Z;break;case"value":A=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:Z!==se&&pt(s,o,J,Z,c,se)}}kr(s,A,I,V,$,te,v,y);return;case"select":Z=A=I=J=null;for(v in a)if(V=a[v],a.hasOwnProperty(v)&&V!=null)switch(v){case"value":break;case"multiple":Z=V;default:c.hasOwnProperty(v)||pt(s,o,v,null,c,V)}for(y in c)if(v=c[y],V=a[y],c.hasOwnProperty(y)&&(v!=null||V!=null))switch(y){case"value":J=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==V&&pt(s,o,y,v,c,V)}o=I,a=A,c=Z,J!=null?Ks(s,!!a,J,!1):!!c!=!!a&&(o!=null?Ks(s,!!a,o,!0):Ks(s,!!a,a?[]:"",!1));return;case"textarea":Z=J=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:pt(s,o,I,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":J=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&pt(s,o,A,y,c,v)}Lu(s,J,Z);return;case"option":for(var _e in a)if(J=a[_e],a.hasOwnProperty(_e)&&J!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":s.selected=!1;break;default:pt(s,o,_e,null,c,J)}for(V in c)if(J=c[V],Z=a[V],c.hasOwnProperty(V)&&J!==Z&&(J!=null||Z!=null))switch(V){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:pt(s,o,V,J,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)J=a[xe],a.hasOwnProperty(xe)&&J!=null&&!c.hasOwnProperty(xe)&&pt(s,o,xe,null,c,J);for($ in c)if(J=c[$],Z=a[$],c.hasOwnProperty($)&&J!==Z&&(J!=null||Z!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,o));break;default:pt(s,o,$,J,c,Z)}return;default:if(Vr(o)){for(var mt in a)J=a[mt],a.hasOwnProperty(mt)&&J!==void 0&&!c.hasOwnProperty(mt)&&jh(s,o,mt,void 0,c,J);for(te in c)J=c[te],Z=a[te],!c.hasOwnProperty(te)||J===Z||J===void 0&&Z===void 0||jh(s,o,te,J,c,Z);return}}for(var z in a)J=a[z],a.hasOwnProperty(z)&&J!=null&&!c.hasOwnProperty(z)&&pt(s,o,z,null,c,J);for(se in c)J=c[se],Z=a[se],!c.hasOwnProperty(se)||J===Z||J==null&&Z==null||pt(s,o,se,J,c,Z)}function g0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,I=y.duration;if(v&&I&&g0(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var V=a[c],$=V.startTime;if($>I)break;var te=V.transferSize,se=V.initiatorType;te&&g0(se)&&(V=V.responseEnd,A+=te*(V<I?1:(I-$)/(V-$)))}if(--c,o+=8*(v+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Zh=null,ep=null;function Bc(s){return s.nodeType===9?s:s.ownerDocument}function y0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v0(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function tp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var np=null;function Vw(){var s=window.event;return s&&s.type==="popstate"?s===np?!1:(np=s,!0):(np=null,!1)}var _0=typeof setTimeout=="function"?setTimeout:void 0,Uw=typeof clearTimeout=="function"?clearTimeout:void 0,T0=typeof Promise=="function"?Promise:void 0,Lw=typeof queueMicrotask=="function"?queueMicrotask:typeof T0<"u"?function(s){return T0.resolve(null).then(s).catch(Ow)}:_0;function Ow(s){setTimeout(function(){throw s})}function go(s){return s==="head"}function E0(s,o){var a=o,c=0;do{var y=a.nextSibling;if(s.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){s.removeChild(y),ga(o);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Gl(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,Gl(a);for(var v=a.firstChild;v;){var A=v.nextSibling,I=v.nodeName;v[Li]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&Gl(s.ownerDocument.body);a=y}while(a);ga(o)}function S0(s,o){var a=s;s=0;do{var c=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=c}while(a)}function ip(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ip(a),Dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function Hw(s,o,a,c){for(;s.nodeType===1;){var y=a;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Li])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ri(s.nextSibling),s===null)break}return null}function Bw(s,o,a){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ri(s.nextSibling),s===null))return null;return s}function A0(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=ri(s.nextSibling),s===null))return null;return s}function sp(s){return s.data==="$?"||s.data==="$~"}function op(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Gw(s,o){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||a.readyState!=="loading")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ri(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var rp=null;function C0(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(o===0)return ri(s.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}s=s.nextSibling}return null}function b0(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return s;o--}else a!=="/$"&&a!=="/&"||o++}s=s.previousSibling}return null}function w0(s,o,a){switch(o=Bc(a),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Gl(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Dr(s)}var ai=new Map,I0=new Set;function Gc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Rs=ue.d;ue.d={f:Fw,r:qw,D:zw,C:Kw,L:Yw,m:$w,X:Qw,S:Jw,M:Xw};function Fw(){var s=Rs.f(),o=Dc();return s||o}function qw(s){var o=Xn(s);o!==null&&o.tag===5&&o.type==="form"?zy(o):Rs.r(s)}var ha=typeof document>"u"?null:document;function R0(s,o,a){var c=ha;if(c&&typeof o=="string"&&o){var y=wn(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),I0.has(y)||(I0.add(y),s={rel:s,crossOrigin:a,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),un(o,"link",s),Lt(o),c.head.appendChild(o)))}}function zw(s){Rs.D(s),R0("dns-prefetch",s,null)}function Kw(s,o){Rs.C(s,o),R0("preconnect",s,o)}function Yw(s,o,a){Rs.L(s,o,a);var c=ha;if(c&&s&&o){var y='link[rel="preload"][as="'+wn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+wn(a.imageSizes)+'"]')):y+='[href="'+wn(s)+'"]';var v=y;switch(o){case"style":v=pa(s);break;case"script":v=ma(s)}ai.has(v)||(s=T({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:s,as:o},a),ai.set(v,s),c.querySelector(y)!==null||o==="style"&&c.querySelector(Fl(v))||o==="script"&&c.querySelector(ql(v))||(o=c.createElement("link"),un(o,"link",s),Lt(o),c.head.appendChild(o)))}}function $w(s,o){Rs.m(s,o);var a=ha;if(a&&s){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+wn(c)+'"][href="'+wn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ma(s)}if(!ai.has(v)&&(s=T({rel:"modulepreload",href:s},o),ai.set(v,s),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ql(v)))return}c=a.createElement("link"),un(c,"link",s),Lt(c),a.head.appendChild(c)}}}function Jw(s,o,a){Rs.S(s,o,a);var c=ha;if(c&&s){var y=Hi(c).hoistableStyles,v=pa(s);o=o||"default";var A=y.get(v);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(Fl(v)))I.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":o},a),(a=ai.get(v))&&ap(s,a);var V=A=c.createElement("link");Lt(V),un(V,"link",s),V._p=new Promise(function($,te){V.onload=$,V.onerror=te}),V.addEventListener("load",function(){I.loading|=1}),V.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Fc(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(v,A)}}}function Qw(s,o){Rs.X(s,o);var a=ha;if(a&&s){var c=Hi(a).hoistableScripts,y=ma(s),v=c.get(y);v||(v=a.querySelector(ql(y)),v||(s=T({src:s,async:!0},o),(o=ai.get(y))&&lp(s,o),v=a.createElement("script"),Lt(v),un(v,"link",s),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function Xw(s,o){Rs.M(s,o);var a=ha;if(a&&s){var c=Hi(a).hoistableScripts,y=ma(s),v=c.get(y);v||(v=a.querySelector(ql(y)),v||(s=T({src:s,async:!0,type:"module"},o),(o=ai.get(y))&&lp(s,o),v=a.createElement("script"),Lt(v),un(v,"link",s),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function x0(s,o,a,c){var y=(y=Ne.current)?Gc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=pa(a.href),a=Hi(y).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=pa(a.href);var v=Hi(y).hoistableStyles,A=v.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=y.querySelector(Fl(s)))&&!v._p&&(A.instance=v,A.state.loading=5),ai.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ai.set(s,a),v||Ww(y,s,a,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ma(a),a=Hi(y).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function pa(s){return'href="'+wn(s)+'"'}function Fl(s){return'link[rel="stylesheet"]['+s+"]"}function N0(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function Ww(s,o,a,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),un(o,"link",a),Lt(o),s.head.appendChild(o))}function ma(s){return'[src="'+wn(s)+'"]'}function ql(s){return"script[async]"+s}function M0(s,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+wn(a.href)+'"]');if(c)return o.instance=c,Lt(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Lt(c),un(c,"style",y),Fc(c,a.precedence,s),o.instance=c;case"stylesheet":y=pa(a.href);var v=s.querySelector(Fl(y));if(v)return o.state.loading|=4,o.instance=v,Lt(v),v;c=N0(a),(y=ai.get(y))&&ap(c,y),v=(s.ownerDocument||s).createElement("link"),Lt(v);var A=v;return A._p=new Promise(function(I,V){A.onload=I,A.onerror=V}),un(v,"link",c),o.state.loading|=4,Fc(v,a.precedence,s),o.instance=v;case"script":return v=ma(a.src),(y=s.querySelector(ql(v)))?(o.instance=y,Lt(y),y):(c=a,(y=ai.get(v))&&(c=T({},a),lp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Lt(y),un(y,"link",c),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Fc(c,a.precedence,s));return o.instance}function Fc(s,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===o)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(s,o.firstChild))}function ap(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function lp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var qc=null;function D0(s,o,a){if(qc===null){var c=new Map,y=qc=new Map;y.set(a,c)}else y=qc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(s))return c;for(c.set(s,null),a=a.getElementsByTagName(s),y=0;y<a.length;y++){var v=a[y];if(!(v[Li]||v[Ut]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=s+A;var I=c.get(A);I?I.push(v):c.set(A,[v])}}return c}function P0(s,o,a){s=s.ownerDocument||s,s.head.insertBefore(a,o==="title"?s.querySelector("head > title"):null)}function jw(s,o,a){if(a===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function k0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Zw(s,o,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=pa(c.href),v=o.querySelector(Fl(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=zc.bind(s),o.then(s,s)),a.state.loading|=4,a.instance=v,Lt(v);return}v=o.ownerDocument||o,c=N0(c),(y=ai.get(y))&&ap(c,y),v=v.createElement("link"),Lt(v);var A=v;A._p=new Promise(function(I,V){A.onload=I,A.onerror=V}),un(v,"link",c),a.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=zc.bind(s),o.addEventListener("load",a),o.addEventListener("error",a))}}var up=0;function eI(s,o){return s.stylesheets&&s.count===0&&Yc(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var c=setTimeout(function(){if(s.stylesheets&&Yc(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+o);0<s.imgBytes&&up===0&&(up=62500*kw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Yc(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>up?50:800)+o);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Kc=null;function Yc(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Kc=new Map,o.forEach(tI,s),Kc=null,zc.call(s))}function tI(s,o){if(!(o.state.loading&4)){var a=Kc.get(s);if(a)var c=a.get(null);else{a=new Map,Kc.set(s,a);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=o.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=zc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var zl={$$typeof:W,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function nI(s,o,a,c,y,v,A,I,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ln(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ln(0),this.hiddenUpdates=Ln(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function V0(s,o,a,c,y,v,A,I,V,$,te,se){return s=new nI(s,o,a,A,V,$,te,se,I),o=1,v===!0&&(o|=24),v=Gn(3,null,null,o),s.current=v,v.stateNode=s,o=Ff(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:o},Yf(v),s}function U0(s){return s?(s=Yr,s):Yr}function L0(s,o,a,c,y,v){y=U0(y),c.context===null?c.context=y:c.pendingContext=y,c=so(o),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=oo(s,c,o),a!==null&&(Dn(a,s,o),Sl(a,s,o))}function O0(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<o?a:o}}function cp(s,o){O0(s,o),(s=s.alternate)&&O0(s,o)}function H0(s){if(s.tag===13||s.tag===31){var o=nr(s,67108864);o!==null&&Dn(o,s,67108864),cp(s,67108864)}}function B0(s){if(s.tag===13||s.tag===31){var o=Yn();o=zo(o);var a=nr(s,o);a!==null&&Dn(a,s,o),cp(s,o)}}var $c=!0;function iI(s,o,a,c){var y=j.T;j.T=null;var v=ue.p;try{ue.p=2,dp(s,o,a,c)}finally{ue.p=v,j.T=y}}function sI(s,o,a,c){var y=j.T;j.T=null;var v=ue.p;try{ue.p=8,dp(s,o,a,c)}finally{ue.p=v,j.T=y}}function dp(s,o,a,c){if($c){var y=fp(c);if(y===null)Wh(s,o,c,Jc,a),F0(s,c);else if(rI(y,s,o,a,c))c.stopPropagation();else if(F0(s,c),o&4&&-1<oI.indexOf(s)){for(;y!==null;){var v=Xn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=et(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var V=1<<31-ze(A);I.entanglements[1]|=V,A&=~V}ji(v),(ot&6)===0&&(Nc=Kt()+500,Ol(0))}}break;case 31:case 13:I=nr(v,2),I!==null&&Dn(I,v,2),Dc(),cp(v,2)}if(v=fp(c),v===null&&Wh(s,o,c,Jc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else Wh(s,o,c,null,a)}}function fp(s){return s=Wn(s),hp(s)}var Jc=null;function hp(s){if(Jc=null,s=Oi(s),s!==null){var o=l(s);if(o===null)s=null;else{var a=o.tag;if(a===13){if(s=u(o),s!==null)return s;s=null}else if(a===31){if(s=f(o),s!==null)return s;s=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Jc=s,null}function G0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vn()){case Un:return 2;case vt:return 8;case bn:case ki:return 32;case gi:return 268435456;default:return 32}default:return 32}}var pp=!1,yo=null,vo=null,_o=null,Kl=new Map,Yl=new Map,To=[],oI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function F0(s,o){switch(s){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":vo=null;break;case"mouseover":case"mouseout":_o=null;break;case"pointerover":case"pointerout":Kl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(o.pointerId)}}function $l(s,o,a,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=Xn(o),o!==null&&H0(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function rI(s,o,a,c,y){switch(o){case"focusin":return yo=$l(yo,s,o,a,c,y),!0;case"dragenter":return vo=$l(vo,s,o,a,c,y),!0;case"mouseover":return _o=$l(_o,s,o,a,c,y),!0;case"pointerover":var v=y.pointerId;return Kl.set(v,$l(Kl.get(v)||null,s,o,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,Yl.set(v,$l(Yl.get(v)||null,s,o,a,c,y)),!0}return!1}function q0(s){var o=Oi(s.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=u(a),o!==null){s.blockedOn=o,yi(s.priority,function(){B0(a)});return}}else if(o===31){if(o=f(a),o!==null){s.blockedOn=o,yi(s.priority,function(){B0(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Qc(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var a=fp(s.nativeEvent);if(a===null){a=s.nativeEvent;var c=new a.constructor(a.type,a);rl=c,a.target.dispatchEvent(c),rl=null}else return o=Xn(a),o!==null&&H0(o),s.blockedOn=a,!1;o.shift()}return!0}function z0(s,o,a){Qc(s)&&a.delete(o)}function aI(){pp=!1,yo!==null&&Qc(yo)&&(yo=null),vo!==null&&Qc(vo)&&(vo=null),_o!==null&&Qc(_o)&&(_o=null),Kl.forEach(z0),Yl.forEach(z0)}function Xc(s,o){s.blockedOn===o&&(s.blockedOn=null,pp||(pp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aI)))}var Wc=null;function K0(s){Wc!==s&&(Wc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wc===s&&(Wc=null);for(var o=0;o<s.length;o+=3){var a=s[o],c=s[o+1],y=s[o+2];if(typeof c!="function"){if(hp(c||a)===null)continue;break}var v=Xn(a);v!==null&&(s.splice(o,3),o-=3,fh(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function ga(s){function o(V){return Xc(V,s)}yo!==null&&Xc(yo,s),vo!==null&&Xc(vo,s),_o!==null&&Xc(_o,s),Kl.forEach(o),Yl.forEach(o);for(var a=0;a<To.length;a++){var c=To[a];c.blockedOn===s&&(c.blockedOn=null)}for(;0<To.length&&(a=To[0],a.blockedOn===null);)q0(a),a.blockedOn===null&&To.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[Wt]||null;if(typeof v=="function")A||K0(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Wt]||null)I=A.formAction;else if(hp(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),K0(a)}}}function Y0(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function mp(s){this._internalRoot=s}jc.prototype.render=mp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var a=o.current,c=Yn();L0(a,c,s,o,null,null)},jc.prototype.unmount=mp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;L0(s.current,2,null,s,null,null),Dc(),o[Ui]=null}};function jc(s){this._internalRoot=s}jc.prototype.unstable_scheduleHydration=function(s){if(s){var o=Du();s={blockedOn:null,target:s,priority:o};for(var a=0;a<To.length&&o!==0&&o<To[a].priority;a++);To.splice(a,0,s),a===0&&q0(s)}};var $0=e.version;if($0!=="19.2.3")throw Error(i(527,$0,"19.2.3"));ue.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(o),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var lI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{_n=Zc.inject(lI),wt=Zc}catch{}}return Ql.createRoot=function(s,o){if(!r(s))throw Error(i(299));var a=!1,c="",y=ev,v=tv,A=nv;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=V0(s,1,!1,null,null,a,c,null,y,v,A,Y0),s[Ui]=o.current,Xh(s),new mp(o)},Ql.hydrateRoot=function(s,o,a){if(!r(s))throw Error(i(299));var c=!1,y="",v=ev,A=tv,I=nv,V=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),o=V0(s,1,!0,o,a??null,c,y,V,v,A,I,Y0),o.context=U0(null),a=o.current,c=Yn(),c=zo(c),y=so(c),y.callback=null,oo(a,y,c),a=c,o.current.lanes=a,Fo(o,a),ji(o),s[Ui]=o.current,Xh(s),new jc(o)},Ql.version="19.2.3",Ql}var i_;function yI(){if(i_)return vp.exports;i_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vp.exports=gI(),vp.exports}var vI=yI();const _I=uS(vI);var Cd=dS();const ya=n=>Array.from(new Set(n)).sort((e,t)=>e.localeCompare(t)),fS=[{category:"Vital Sign",items:["Vital sign"]},{category:"Symptom",items:ya(["Abdominal distention","Abdominal pain","Abnormal menstruation","Abnormal sexual exposure","Alopecia","Anorexia","Anosmia","Anxiety","Arthralgia","Back pain","Belching","Blurred vision","Bone pain","Cataracts","Change of bowel habit","Chest tightness/pain","Chills","Clay-colored stool","Cloudy urine","Color changes","Consciousness disturbance","Constipation","Cough","Cramps","Decreased appetite","Delusion","Dental problems","Depression","Diarrhea","Diplopia","Dizziness","Dry eye","Dry mouth","Dryness","Dysphagia","Dyspnea","Dysuria","Ecchymoses","Epistaxis","Excess tearing","Eye redness","Fatigue","Fever","Flank pain","Flatulence","Fractures","Gait disturbance","General edema","Glaucoma","Gum bleeding","Hair loss","Hallucination","Head trauma","Headache","Hearing impairment","Heartburn/acid regurgitation","Heat/cold intolerance","Hematemesis","Hematuria","Hemoptysis","Hesitancy","Hiccup","Hirsutism","Hoarseness","Impotence","Incontinence","Insomnia","Intermittent claudication","Jaundice","Joint stiffness","Joint swelling","Memory loss","Mental stage change","Moles","Myalgia","Nasal congestion","Nausea","Night sweats","Nocturia","Numbness","Ocular pain","Odynophagia","Oliguria","Oral ulcer","Orthopnea","Otalgia","Otorrhea","Palpitation","Panic","Paraesthesia","Paresis/plegia","Paroxysmal nocturnal dyspnea","Petechiae","Photophobia","Plaque","Polyuria","Pruritus","Purpura","Rash","Resting tremor","Rhinorrhea","Small stream of urine","Somnolence","Sore throat","Speech problem","Sputum","Suicidality","Syncope","Tarry stool","Telangiectasia","Tenesmus","Thirsty","Tinnitus","Ulcers","Urgency","Urinary frequency","Vertigo","Visual field defect","Vomiting","Weight change","Wheezes"])},{category:"Negative Symptom",items:[]},{category:"Medical Facility",items:["Keelung Chang Gung Memorial Hospital ()","Linkou Chang Gung Memorial Hospital ()","Chiayi Chang Gung Memorial Hospital ()","Kaohsiung Chang Gung Memorial Hospital ()","National Taiwan University Hospital ()","National Taiwan University Hospital Yunlin Branch ()","National Taiwan University Hospital Hsinchu Branch ()","National Taiwan University Cancer Center ()","Taipei Veterans General Hospital ()","Taichung Veterans General Hospital ()","Kaohsiung Veterans General Hospital ()","Taipei City Hospital, Renai Branch ()","Taipei City Hospital, Zhongxing Branch ()","Taipei City Hospital, Heping Fuyou Branch ()","Taipei City Hospital, Yangming Branch ()","Taipei City Hospital, Zhongxiao Branch ()","Tri-Service General Hospital ()","Mackay Memorial Hospital ()","Hsinchu Mackay Memorial Hospital ()","Mackay Memorial Hospital Tamsui Branch ()","Cathay General Hospital ()","Sijhih Cathay General Hospital ()","Shin Kong Wu Ho-Su Memorial Hospital ()","Wanfang Hospital","Taipei Medical University Hospital ()","Cheng Hsin General Hospital ()","Far Eastern Memorial Hospital ()","Taipei Tzu Chi Hospital ()","Hualien Tzu Chi Hospital ()","Dalin Tzu Chi Hospital ()","Cardinal Tien Hospital ()","Fu Jen Catholic University Hospital ()","Taoyuan General Hospital, Ministry of Health and Welfare ()","China Medical University Hospital ()","Chung Shan Medical University Hospital ()","Tungs' Taichung MetroHarbor Hospital ()","Kuang Tien General Hospital ()","Cheng Ching Hospital ()","Changhua Christian Hospital ()","Show Chwan Memorial Hospital ()","Chia-Yi Christian Hospital ()","National Cheng Kung University Hospital ()","Chi Mei Medical Center ()","Kaohsiung Medical University Chung-Ho Memorial Hospital ()","E-Da Hospital ()","Taiwan Adventist Hospital ()","Pojen General Hospital ()","West Garden Hospital ()","Taipei Hospital, Ministry of Health and Welfare ()","New Taipei City Hospital ()","Cardinal Tien Hospital Yonghe Branch ()","New Taipei Municipal Tucheng Hospital ()"]},{category:"Disease",items:ya(["Acute Bronchitis","Acute Gastroenteritis (AGE)","Acute Kidney Injury (AKI)","Acute Myocardial Infarction (AMI)","Acute Pancreatitis","Acute Pyelonephritis (APN)","Adrenal Insufficiency","Anemia","Ankylosing Spondylitis (AS)","Aortic Stenosis / Regurgitation","Appendicitis","Asthma","Atrial Fibrillation (Afib)","Benign Prostatic Hyperplasia (BPH)","Breast Cancer","Cellulitis","Cerebrovascular Accident (CVA) / Stroke","Cholecystitis","Chronic Kidney Disease (CKD)","Chronic Obstructive Pulmonary Disease (COPD)","Colorectal Cancer","Congestive Heart Failure (CHF) / Heart Failure (HF)","Coronary Artery Disease (CAD)","Deep Vein Thrombosis (DVT)","Dehydration","Dementia","Depression / Anxiety Disorder","Diabetes Mellitus (DM)","Diabetic Foot","Diabetic Ketoacidosis (DKA)","Diverticulitis","End-Stage Renal Disease (ESRD)","Esophageal Cancer","Gastroesophageal Reflux Disease (GERD)","Gout","Hepatitis B / C","Hepatocellular Carcinoma (HCC)","Herniated Intervertebral Disc (HIVD)","Herpes Zoster (Shingles)","Hyperlipidemia","Hypertension (HTN)","Hyperthyroidism","Hypothyroidism","Ileus / Bowel Obstruction","Infective Endocarditis","Influenza","Leukemia","Liver Cirrhosis","Lower GI Bleeding","Lung Cancer","Lymphoma","Meningitis / Encephalitis","Myasthenia Gravis (MG)","Necrotizing Fasciitis","Nephrotic Syndrome","Obstructive Sleep Apnea (OSA)","Parkinson's Disease","Peptic Ulcer Disease (PUD)","Peripheral Arterial Occlusive Disease (PAOD)","Pleural Effusion","Pneumonia","Pneumothorax","Prostate Cancer","Pulmonary Embolism (PE)","Pulmonary Tuberculosis (TB)","Rabies","Rheumatoid Arthritis (RA)","Seizure Disorder / Epilepsy","Sepsis / Septic Shock","Sjogren's Syndrome","Systemic Lupus Erythematosus (SLE)","Thrombocytopenia","Tumor Bleeding","Upper GI Bleeding","Urinary Tract Infection (UTI)","Urolithiasis / Renal Stone","Vertigo / Benign Paroxysmal Positional Vertigo (BPPV)"])},{category:"Tentative Diagnosis",items:[]},{category:"Underlying disease",items:[]},{category:"Definitive diagnosis",items:[]},{category:"Physical examination",items:ya(["Breathing sound","Heart sound","Pitting edema","Abdominal tenderness","Rebound tenderness","Muscle guarding","Knocking pain","Tenderness"])},{category:"Lab data",items:ya(["Anemia","Leukocytosis","Leukopenia","Neutrophilia","Neutropenia","Lymphocytosis","Lymphocytopenia / Lymphopenia","Monocytosis","Eosinophilia","Basophilia","Thrombocytosis","Thrombocytopenia","Pancytopenia","Polycythemia / Erythrocytosis","Macrocytosis","Microcytosis","Reticulocytosis","Prolonged PT/INR","Prolonged aPTT","Hypofibrinogenemia","Hypernatremia","Hyponatremia","Hyperkalemia","Hypokalemia","Hypercalcemia","Hypocalcemia","Hypermagnesemia","Hypomagnesemia","Hyperphosphatemia","Hypophosphatemia","Hyperchloremia","Hypochloremia","Azotemia","Uremia","Hematuria","Proteinuria","Albuminuria / Microalbuminuria","Pyuria","Glycosuria / Glucosuria","Ketonuria","Bacteriuria","Cylindruria","Crystalluria","Hemoglobinuria","Myoglobinuria","Hyperbilirubinemia","Elevated Transaminases","Cholestasis","Hypoalbuminemia","Hyperglobulinemia","Hyperammonemia","Elevated Alkaline Phosphatase (Alk-P)","Hypoproteinemia","Hyperglycemia","Hypoglycemia","Elevated HbA1c","Hyperlipidemia / Dyslipidemia","Hypercholesterolemia","Hypertriglyceridemia","Hyperuricemia","Thyrotoxicosis","Subclinical Hypothyroidism","Hyperferritinemia","Metabolic Acidosis","Metabolic Alkalosis","Respiratory Acidosis","Respiratory Alkalosis","Hypoxemia","Hypercapnia","Hypocapnia","Hyperlactatemia / Lactic Acidosis","Elevated C-Reactive Protein (CRP)","Elevated ESR","Procalcitonin Elevation","Elevated Troponin (Troponin-I / T)","Elevated BNP / NT-proBNP","Elevated CK-MB","Elevated CPK / Creatine Kinase","elevated lactate","elevated BUN","elevated creatinine","microscopic hematuria","macroscopic hematuria"])},{category:"Culture / Gram stain",items:["wound","pus","blood","sputum","urine","stool","CSF","pleural effusion","ascites","Synovial fluid","CVC Tip","Port-A Tip","Foley Tip","Bronchoalveolar Lavage","Nasopharyngeal Swab","Throat Swab"]},{category:"Image finding",items:ya(["Chest X-ray (CXR)","Kidney, Ureter, and Bladder (KUB)","Abdominal Plain Film (Abd X-ray)","Spine X-ray (C/T/L-spine)","Bone X-ray","Abdominal Ultrasonography (Abd Echo/TAS)","Echocardiography (Echo)","Thyroid Ultrasonography","Breast Ultrasonography","Carotid Duplex Ultrasound","Kidney/Renal Ultrasonography","Brain CT","Chest CT","Abdominal CT","CT Angiography (CTA)","High-Resolution Computed Tomography (HRCT)","Brain MRI","Spine MRI","Magnetic Resonance Angiography (MRA)","Magnetic Resonance Cholangiopancreatography (MRCP)","Bone Scan","Positron Emission Potentially (PET)","Angiography","Mammography"])},{category:"Treatment",items:ya(["Antibiotics","Diuretics","Fluid resuscitation","Oxygen therapy","Hemodialysis","Bronchodilator"])}],bm=`
**Role:**
 JSON   / Admission Note - Present Illness section

**Input Data Structure ():**
 JSON 
1. \`patient_profile\`:  ( \`control_status\`)
2. \`timepoints\`:  ** (Array)** \`date\`, \`symptom\`, \`vital_sign\`, \`treatment\`, \`lab_data\`, \`image_finding\`, \`negative_symptom\`  Key
   - **:**  Key  \`""\`  \`null\` (SKIP) "unknown" 

**Objective:**


**Style Guidelines (STYLE GUIDELINES) - :**

1. ** (Narrative Logic & Chain of Care):**
   - **LMD  ER :**  \`timepoints\`  (LMD)  **"futile"**, **"ineffective"**  **"not effective"** (ER) 
   - **:**  **"This time"**  **"At this time"**  (PMH)  (Present Illness)
   - **:** **"According to [family/wife/husband]..."**  **"[Family member] witnessed that..."**

2. ** (Sentence Structure & Grammar):**
   - **"Denied" () :**  "No fever, no cough"  \`negative_symptom\`  **"denied"**"He denied fever, chills, or chest pain."**"No [symptom] was noted/mentioned."**
   - **"Beside" :**  **"Beside"** "Besides"
   - **/:**  "He had a tremor" **"[Symptom] was noted/observed"**  **"[Symptom] occurred"**
   - **/:** **"Aggravated by [A] but not [B]"**  **"Relieved by [C]"**
   - **:** **"For [Diagnosis], he/she was admitted..."**  **"Under the impression of [Diagnosis], he/she was admitted..."**

3. ** (Data Formatting):**
   - **:** **"[Disease] + [Duration] + [Follow-up Location] + [Control status]"**"Hypertension for 10 years with regular follow-up at our OPD."
   - ** ():** **Temperature -> Blood Pressure -> Pulse -> Respiratory Rate -> SpO2**
   - **:**  (;) "WBC: 10700/ul; CRP: 76.4 mg/L"
   - **:**  ** + /**"Yellowish, tenacious sputum", "Pinkish urine"
   - **:**  **"unremarkable"**
   - **:** **Brand names** ()  (e.g., *Unasyn*); **Generic names** ()  (e.g., *moxifloxacin*)

4. ** (Grammar & Terminology Precision) [NEW]:**
   - **:**  "since 3 days ago" **"for 3 days"**, **"since 3 days prior"**,  **"developed 3 days before admission"**
   - **:** - : **lungs**, **feet**, **breath sounds**, **bowel sounds**
     - : sputum, urine, inflammation
   - **:** - Weakness **in** the leg (NOT over).
     - Tenderness **over** the spine.
     - Mass **in** the lung.
   - **:**  "LMD"  **"local clinic"**  **"private clinic"** "AAD"  **"discharged against medical advice (AMA)"**

** (VOCABULARY BANK) - :**


* ** (Mode of Onset / Appearance):**
  - ** (Verbs):** Appear, Develop, Present (with), Occur (on), Strike, Ensue from, Be restricted to.
  - ** (Adjectives):** Sudden / Abrupt, Gradual / Insidious, Progressive, Episodic / Paroxysmal, Intermittent, Transient, Periodic, Recurrent.
* ** (Causality):**
  - **:** Be provoked by, Be precipitated by, Be triggered by, Be induced by.
  - **:** Be associated with, Be related to, Be accompanied by, Be complicated by.
* ** (Course & Outcome):**
  - **:** Disappear, Vanish, Subside.
  - **:** Improve, Become better, Lessen; (Passive) Be relieved, Be palliated, Be alleviated.
  - **:** Aggravate, Exacerbate, Worsen, Deteriorate.
  - **:** Recur, Relapse, Flare up.
  - **:** Fluctuate, Wax and wane.
* ** (Encounter & Work-up):**
  - **:** Was admitted, Was seen, Was evaluated, Was referred, Was transferred.
  - ** (Procedures):** - Use: **"Insert a Foley"**, **"Perform intubation"**, **"Replace an NG tube"**.
    - **FORBIDDEN:** "On Foley", "Re-on NG", "On endo".
  - ** (Test):** Was performed, Was obtained, Was collected.
* ** (Treatment):**
  - **:** Treat, Administer, Give, Initiate, Start.
  - **:** **Switch to**, **Replace by**, **Substitute for**. (FORBIDDEN: "Shift to").
  - **:** **Discontinue**, **Withhold**, **Stop**. (FORBIDDEN: "Hold").
  - **:** Be ineffective, Not effective, **Futile**; Result in improvement.
* **:**
  - **:** **"Sequently"**, **"Consecutively"**, **"Successively"**, **"Afterwards"**.
  - **:** **"manifested"**, **"depicted"**, **"revealed"**, **"demonstrated"**, **"evinced"**.
  - **:** **"Avowed"**, **"Perceived"**, **"Complained of"**, State, Insist, Claim, Confide.
  - **:** Use **"Was diagnosed with"**, **"A diagnosis of... was made"**. (FORBIDDEN: "Was told to have", "Pneumonia was impressed").
  - **:** Use **"Lost to follow-up"**, **"Defaulted"**. (FORBIDDEN: "Escape").
  - **:** **stationary**, **"stable"**.
  - **:** **"antecedent [Disease]"**.

**Drafting Structure ( - Dynamic Loop):**

1. ** (Background)**
   -  \`patient_profile\` 
   - : "This [Age]-year-old [Gender] has a medical history of [Disease]..." ( \`control_status\`)

2. ** N  (The Narrative Loop)**
   - **:**  (Iterate through) \`timepoints\` 
   - **Loop :**
     - ** (Timepoint):**
       -  \`date\` 
       - ** (Symptom):**  \`symptom\` ()  \`negative_symptom\` ( "denied")
       - ** (Objective):**  \`vital_sign\`, \`lab_data\`, \`image_finding\` "revealed/evinced/manifested" 
       - ** (Treatment):**  \`treatment\` LMD (Local Clinic)  **"futile"**  **"ineffective"**
     - ** (Transition):**  Vocabulary Bank  ( "Sequently", "Consecutively") 

3. ** (Conclusion/Admission)**
   -  ( ER)  \`definitive_diagnosis\` 
   - : "**For [Diagnosis], he/she was admitted for further evaluation and administration.**"

**Anti-Hallucination & Missing Detail Prompts ( - CRITICAL):**

**Rule 1: Strict Anti-Hallucination**
Do **NOT** invent any data not present in the JSON. If the JSON says "fever" but gives no temperature, do NOT make up a number like "38.5C".

**Rule 2: The "Missing Detail" Heuristic ()**
While you must not invent details, you MUST flag clinically important missing information. If the JSON input provides a *generic* term without *specific attributes*, **insert a reminder in parentheses within the sentence**: \`(Note: Please add [Detail Name])\`.

**Apply this rule to the following categories:**

* **Symptoms (LQQOPERA check):**
    * If a symptom is listed without **Duration**, insert \`(Note: duration?)\`.
    * If "Pain" is listed without **Location**, **Quality**, or **Radiation**, insert \`(Note: location/quality/radiation?)\`.
    * If "Fever" is listed without **Temperature (Tmax)**, insert \`(Note: Tmax?)\`.
* **Secretions/Excretions:**
    * If "Sputum", "Diarrhea", "Hematuria" are mentioned without **Color/Amount/Consistency**, insert \`(Note: color/amount/consistency?)\`.
* **Treatment/Medication:**
    * If generic terms (e.g., "Antibiotics") are used without a **Specific Drug Name**, insert \`(Note: drug name?)\`.
* **Labs/Images:**
    * If "Image finding" is present but lacks a **Description**, insert \`(Note: image finding description?)\`.
    * If generic lab abnormalities (e.g., "Leukocytosis") are mentioned without \`Specific Values\`, insert \`(Note: value?)\`.
`;/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),s_=n=>{const e=EI(n);return e.charAt(0).toUpperCase()+e.slice(1)},hS=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),SI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=le.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:l,iconNode:u,...f},g)=>le.createElement("svg",{ref:g,...AI,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:hS("lucide",r),...!l&&!SI(f)&&{"aria-hidden":"true"},...f},[...u.map(([h,_])=>le.createElement(h,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(n,e)=>{const t=le.forwardRef(({className:i,...r},l)=>le.createElement(CI,{ref:l,iconNode:e,className:hS(`lucide-${TI(s_(n))}`,`lucide-${n}`,i),...r}));return t.displayName=s_(n),t};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],pS=qe("activity",bI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],II=qe("arrow-right",wI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],xI=qe("brain-circuit",RI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],MI=qe("building-2",NI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],PI=qe("calendar-days",DI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mS=qe("check",kI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],UI=qe("chevron-down",VI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],So=qe("chevron-right",LI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],HI=qe("circle-alert",OI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],GI=qe("circle-check",BI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],gS=qe("circle-user",FI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zI=qe("clock",qI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],YI=qe("cloud-download",KI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],wm=qe("copy",$I);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],QI=qe("external-link",JI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],yS=qe("file-text",XI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],jI=qe("grip-vertical",WI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],eR=qe("heart-pulse",ZI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],o_=qe("history",tR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],vS=qe("key",nR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],iu=qe("loader-circle",iR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],oR=qe("lock",sR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],aR=qe("log-out",rR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],uR=qe("maximize-2",lR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],dR=qe("message-square-text",cR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],hR=qe("minimize-2",fR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],mR=qe("octagon-alert",pR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_S=qe("plus",gR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],vR=qe("redo-2",yR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Sp=qe("search",_R);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ER=qe("shield-check",TR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],dd=qe("sparkles",SR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TS=qe("triangle-alert",AR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],bR=qe("type",CR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],IR=qe("undo-2",wR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xR=qe("user",RR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],MR=qe("wand-sparkles",NR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],PR=qe("wind",DR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],du=qe("x",kR);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],UR=qe("zap",VR),LR=({onItemClick:n})=>{const[e,t]=le.useState(""),[i,r]=le.useState(""),[l,u]=le.useState(""),[f,g]=le.useState(null),[h,_]=le.useState(null),[T,S]=le.useState(null),[w,O]=le.useState(null),[P,k]=le.useState(null),[Q,B]=le.useState(null),[W,re]=le.useState(null),he=le.useRef(null),ce=le.useRef(null),N=le.useRef(null),M=le.useRef(null),x=le.useRef(null),[L,U]=le.useState([]),[q,D]=le.useState(!1),[Ve,at]=le.useState(""),[j,ue]=le.useState([]),[Ee,Be]=le.useState(""),[Ce,H]=le.useState({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),[ne,de]=le.useState(null),[pe,Ie]=le.useState([]),[Ne,Ge]=le.useState(!1),[yt,lt]=le.useState(null),[Cn,hi]=le.useState(""),[kn,pi]=le.useState(""),Xt=["Vital Sign","Symptom","Disease","Medical Facility","Physical examination","Lab data","Culture / Gram stain","Image finding","Treatment"],ls=["Penicillins ()","Cephalosporins ()","Carbapenems ()","Fluoroquinolones ()","Aminoglycosides ()","Tetracyclines ()","Macrolides ()","Glycopeptides & Lipopeptides ()","Other ()"],$n={"Penicillins ()":["Penicillin G Benzathine","Penicillin G Sodium","Oxacillin (IV)","Dicloxacillin (PO)","Ampicillin","Amoxicillin","Ampicillin + Sulbactam (Unasyn)","Amoxicillin + Clavulanate (Augmentin)","Amoxicillin + Clavulanate (Curam)","Piperacillin + Tazobactam (Tazocin)","Ticarcillin + Clavulanate (Timentin)"],"Cephalosporins ()":[{type:"header",label:"--  --"},"Cefazolin (IV)","Cephalexin (PO)",{type:"header",label:"--  --"},"Cefuroxime (Zinacef - IV)","Cefuroxime (Ceflour - PO)",{type:"header",label:"--  (Cephamycins) --"},"Cefmetazole","Cefoxitin",{type:"header",label:"-- 2.5 --"},"Flomoxef (Flumarin)",{type:"header",label:"--  --"},"Ceftriaxone (Rocephin)","Cefotaxime (Claforan/Loforan)","Cefixime (PO)","Ceftazidime (Fortum)",{type:"header",label:"-- 3.5 --"},"Cefoperazone + Sulbactam (Brosym)",{type:"header",label:"--  --"},"Cefepime (Maxipime)",{type:"header",label:"--  --"},"Ceftobiprole (Zeftera)","Ceftaroline (Zinforo)",{type:"header",label:"--  --"},"Cefiderocol","Ceftazidime + Avibactam (Zavicefta)"],"Carbapenems ()":["Ertapenem (Invanz)","Imipenem (Tienam)","Meropenem (Mepem)","Doripenem (Finibax)"],"Fluoroquinolones ()":["Ciprofloxacin (Ciproxin)","Levofloxacin (Cravit)","Moxifloxacin (Avelox)","Gemifloxacin (Factive)","Nemonoxacin"],"Aminoglycosides ()":["Gentamicin","Amikacin","Streptomycin"],"Tetracyclines ()":["Tetracycline","Doxycycline","Minocycline","Tigecycline (Tygacil)","Eravacycline"],"Macrolides ()":["Erythromycin","Clarithromycin (Klaricid)","Azithromycin (Zithromax)"],"Glycopeptides & Lipopeptides ()":["Vancomycin","Teicoplanin (Targocid)","Daptomycin (Cubicicin)"],"Other ()":["Linezolid (Zyvox)","Metronidazole (Flagyl)","TMP-SMX (Baktar)","TMP-SMX (Sevatrim)","Colistin (Colimycin)","Clindamycin (Clincin)","Rifampin","Fosfomycin","Fusidic acid (Fucidin)","Monobactam (Aztreonam)"]},us=["Acinetobacter baumannii","Acinetobacter spp.","Actinomyces","Aeromonas hydrophila","Aggregatibacter actinomycetemcomitans","Alcaligenes","Aspergillus fumigatus","Bacillus anthracis","Bacillus cereus","Bacillus spp.","Bacteroides fragilis","Bartonella henselae","Bordetella pertussis","Borrelia burgdorferi","Borrelia recurrentis","Brucella melitensis","Burkholderia cepacia complex","Burkholderia pseudomallei","Campylobacter coli","Campylobacter jejuni","Candida albicans","Candida spp.","Capnocytophaga canimorsus","Cardiobacterium hominis","Chlamydia pneumoniae","Chlamydia trachomatis","Chlamydophila psittaci","Citrobacter","Clostridium botulinum","Clostridium difficile (also known as Clostridioides difficile)","Clostridium perfringens","Clostridium septicum","Clostridium sordellii","Clostridium tetani","Corynebacterium diphtheriae","Corynebacterium spp.","Coxiella burnetii","Cryptococcus","Eikenella corrodens","Enterobacter cloacae","Enterobacter spp.","Enterococcus faecalis","Enterococcus faecium","Enterococcus spp.","Erysipelothrix rhusiopathiae","Escherichia coli (E. coli)","Francisella tularensis","Fusobacterium","Gardnerella vaginalis","Haemophilus ducreyi","Haemophilus influenzae","Helicobacter pylori","Kingella kingae","Klebsiella pneumoniae","Klebsiella spp.","Lactobacillus","Legionella pneumophila","Leptospira interrogans","Listeria monocytogenes","Micrococci species","Moraxella catarrhalis","Morganella","Mycobacterium abscessus","Mycobacterium africanum","Mycobacterium avium complex (MAC)","Mycobacterium bovis","Mycobacterium canettii","Mycobacterium caprae","Mycobacterium chelonae","Mycobacterium fortuitum","Mycobacterium gordonae","Mycobacterium haemophilum","Mycobacterium kansasii","Mycobacterium leprae","Mycobacterium lepromatosis","Mycobacterium malmoense","Mycobacterium marinum","Mycobacterium microti","Mycobacterium orygis","Mycobacterium scrofulaceum","Mycobacterium tuberculosis","Mycobacterium ulcerans","Mycobacterium xenopi","Mycoplasma genitalium","Mycoplasma pneumoniae","Neisseria gonorrhoeae","Neisseria meningitidis","Nocardia","Orientia tsutsugamushi","Pasteurella multocida","Peptostreptococcus","Pneumocystis jirovecii","Prevotella","Proteus mirabilis","Proteus spp.","Providencia","Providencia stuartii","Pseudomonas aeruginosa","Rickettsia prowazekii","Rickettsia rickettsii","Rickettsia typhi","Salmonella enteritidis","Salmonella paratyphi","Salmonella typhi","Salmonella typhimurium","Schistosoma spp.","Serratia marcescens","Shigella dysenteriae","Staphylococcus aureus","Staphylococcus epidermidis","Staphylococcus saprophyticus","Stenotrophomonas maltophilia","Streptococcus agalactiae (Group B Streptococcus)","Streptococcus bovis","Streptococcus dysgalactiae","Streptococcus mutans","Streptococcus pneumoniae","Streptococcus pyogenes (Group A Streptococcus)","Streptococcus viridans","Treponema pallidum","Trichomonas vaginalis","Ureaplasma urealyticum","Vibrio cholerae","Vibrio parahaemolyticus","Vibrio vulnificus","Yersinia enterocolitica","Yersinia pestis"],mi=["No organisms seen","GPC: Gram-positive cocci in clusters","GPC: Gram-positive cocci in chains","GPC: Gram-positive cocci in pairs","GNB: Gram-negative bacilli","Yeast-like","GPB (Gram-positive bacilli / rods)","GNC (Gram-negative cocci)","GVC (Gram-variable cocci/bacilli)"],At=["Crackles (Rales) - Coarse","Crackles (Rales) - Fine","Stridor","Wheezes","Rhonchi","Pleural Friction Rub"],_t=[{id:"RUL",label:"RUL",col:"Right",row:"Upper"},{id:"LUL",label:"LUL",col:"Left",row:"Upper"},{id:"RML",label:"RML",col:"Right",row:"Middle"},{id:"LML",label:"LML",col:"Left",row:"Middle"},{id:"RLL",label:"RLL",col:"Right",row:"Lower"},{id:"LLL",label:"LLL",col:"Left",row:"Lower"}],Jn=["LUQ","RUQ","LLQ","RLQ"],Go=["Right Hypochondriac Region","Epigastric Region","Left Hypochondriac Region","Right Lumbar / Flank Region","Umbilical Region","Left Lumbar / Flank Region","Right Iliac / Inguinal Fossa","Hypogastric / Suprapubic Region","Left Iliac / Inguinal Fossa"],[Gs,Kt]=le.useState([]),Vn=le.useCallback(()=>{N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{g(null),k(null),vt()},150)},[]),Un=le.useCallback(()=>{N.current&&(clearTimeout(N.current),N.current=null)},[]);le.useEffect(()=>{f&&M.current&&M.current.focus()},[f]),le.useEffect(()=>{(P||ne)&&x.current&&x.current.focus()},[P,ne]),le.useLayoutEffect(()=>{if(T&&he.current){const F=he.current.getBoundingClientRect(),ve=16;let{top:ee,left:ge}=T;ee+F.height>window.innerHeight-ve&&(ee=Math.max(ve,window.innerHeight-F.height-ve)),ge+F.width>window.innerWidth-ve&&(ge=Math.max(ve,window.innerWidth-F.width-ve)),O({top:ee,left:ge,width:F.width,maxHeight:window.innerHeight-ee-ve})}},[T,f]),le.useLayoutEffect(()=>{if(Q&&ce.current){const F=ce.current.getBoundingClientRect(),ve=16;let{top:ee,left:ge}=Q;ee+F.height>window.innerHeight-ve&&(ee=Math.max(ve,window.innerHeight-F.height-ve)),w&&ge+F.width>window.innerWidth-ve&&(ge=Math.max(ve,w.left-F.width-4)),re({top:ee,left:ge,width:F.width,maxHeight:window.innerHeight-ee-ve})}},[Q,w,P,ne]);const vt=()=>{Ie([]),Ge(!1),de(null),lt(null),hi(""),pi(""),r(""),u(""),U([]),D(!1),at(""),ue([]),Be("")},bn=(F,ve,ee)=>{Un();const ge=F.currentTarget.getBoundingClientRect();g(ve),_(ee),r(""),S({top:ge.top,left:ge.right+4,right:ge.right}),f!==ve&&(k(null),vt())},ki=(F,ve)=>{Un();const ee=F.currentTarget.getBoundingClientRect();k(ve),u(""),B({top:ee.top,left:ee.right+4,right:ee.right})},gi=F=>{D(!1),U(ve=>ve.includes(F)?ve.filter(ee=>ee!==F):[...ve,F])},Fs=()=>{const F=q?"Bilateral":L.join(", ");F?n("Physical examination",`${P} at ${F}`):n("Physical examination",P),g(null),vt()},qs=()=>{const F=Ve?`Grade ${Ve}/6`:"",ve=j.length>0?j.join(", "):"",ee=Ee?`at ${Ee}`:"",Te=`Murmur: ${[F,ve,ee].filter(Boolean).join(" ")}`;n("Physical examination",Te),g(null),vt()},_n=()=>{const F=[];Ce.T&&F.push(`T: ${Ce.T} C`),Ce.P&&F.push(`P: ${Ce.P} bpm`),Ce.R&&F.push(`R: ${Ce.R} /min`),Ce.BP&&F.push(`BP: ${Ce.BP} mmHg`),Ce.SpO2&&F.push(`SpO2: ${Ce.SpO2} %`),Ce.GCS&&F.push(`GCS: ${Ce.GCS}`),F.length>0&&(n("Vital Sign",F.join(", ")),H({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),g(null),vt())},wt=(F,ve)=>{Un();const ee=F.currentTarget.getBoundingClientRect();ve==="zones"?(B({top:ee.top,left:ee.right+4,right:ee.right}),de("zones"),u("")):(B({top:ee.top,left:ee.right+4,right:ee.right}),lt("details"),u(""))},sn=F=>{Ie(ve=>ve.includes(F)?ve.filter(ee=>ee!==F):[...ve,F]),Ge(!1)},ze=(F,ve)=>{if(!ve)return F;const ee=ve.toLowerCase();return F.filter(ge=>(typeof ge=="string"?ge:ge.label).toLowerCase().includes(ee))};return C.jsxs("div",{className:"flex flex-col h-full bg-slate-50 border-r border-slate-200 overflow-visible relative",children:[C.jsxs("div",{className:"p-4 bg-white border-b border-slate-200 shadow-sm z-10",children:[C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:"Menu Source"}),C.jsxs("div",{className:"relative mb-3",children:[C.jsx("input",{type:"text",placeholder:"Search categories...",className:"w-full pl-9 pr-3 py-2 text-sm border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",value:e,onChange:F=>t(F.target.value)}),C.jsx(Sp,{className:"absolute left-3 top-2.5 text-slate-400 w-4 h-4"})]})]}),C.jsx("div",{className:"flex-1 overflow-y-auto p-2 scrollbar-thin",children:fS.map(F=>{if(!Xt.includes(F.category))return null;const ve=F.items.filter(Te=>Te.toLowerCase().includes(e.toLowerCase()));if(e&&ve.length===0)return null;const ee=Gs.includes(F.category),ge=F.category==="Vital Sign"?"text-green-600 hover:bg-green-50":F.category==="Medical Facility"?"text-blue-600 hover:bg-blue-50":F.category==="Culture / Gram stain"?"text-cyan-600 hover:bg-cyan-50":F.category==="Lab data"?"text-orange-600 hover:bg-orange-50":"text-slate-600 hover:bg-slate-100";return C.jsxs("div",{className:"mb-2",children:[C.jsxs("button",{onClick:()=>Kt(Te=>Te.includes(F.category)?Te.filter(Ae=>Ae!==F.category):[...Te,F.category]),className:`w-full flex items-center px-2 py-2 text-sm font-semibold rounded-md transition-colors ${ge}`,children:[ee?C.jsx(UI,{className:"w-4 h-4 mr-1"}):C.jsx(So,{className:"w-4 h-4 mr-1"}),F.category]}),ee&&C.jsx("div",{className:"pl-4 mt-1 space-y-1",children:ve.map(Te=>{const Ae=F.category==="Vital Sign"||F.category==="Symptom"||F.category==="Disease"||F.category==="Medical Facility"||F.category==="Physical examination"||F.category==="Culture / Gram stain"||F.category==="Treatment"&&Te==="Antibiotics";return C.jsxs("div",{onMouseEnter:et=>Ae&&bn(et,Te,F.category),onMouseLeave:Vn,onClick:()=>!Ae&&n(F.category,Te),className:`group relative flex items-center justify-between px-3 py-2 text-sm text-slate-700 bg-white border rounded-md transition-all active:scale-95 cursor-pointer ${f===Te?"border-blue-400 bg-blue-50/30 shadow-sm":"border-slate-200 hover:border-blue-400 hover:shadow-sm"}`,children:[C.jsx("span",{className:"truncate",children:Te}),Ae?C.jsx(So,{className:`w-3 h-3 ${f===Te?"opacity-100":"text-slate-300 opacity-60 group-hover:opacity-100"}`}):C.jsx(jI,{className:"w-3 h-3 text-slate-300 opacity-0 group-hover:opacity-100"})]},Te)})})]},F.category)})}),f&&T&&Cd.createPortal(C.jsxs("div",{ref:he,onMouseEnter:Un,onMouseLeave:Vn,className:"fixed z-[9999] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-1 duration-150 min-w-[220px] max-w-[340px] overflow-hidden flex flex-col",style:{top:(w==null?void 0:w.top)??T.top,left:(w==null?void 0:w.left)??T.left,maxHeight:(w==null?void 0:w.maxHeight)??"80vh"},children:[h!=="Vital Sign"&&h!=="Medical Facility"&&C.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{ref:M,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:i,onChange:F=>r(F.target.value)}),C.jsx(Sp,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),C.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[h==="Medical Facility"&&["Emergency Department","Outpatient Department"].map(F=>C.jsx("button",{onClick:()=>{const ve=f.replace(/\s*\(.*?\)/,"");n("Medical Facility",`the ${F} of ${ve}`),g(null),vt()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-blue-50 text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:F},F)),h==="Culture / Gram stain"&&ze(["Culture","Gram stain"],i).map(F=>C.jsxs("div",{onMouseEnter:ve=>ki(ve,F),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${P===F?"bg-cyan-50 text-cyan-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[F,C.jsx(So,{className:"w-3 h-3"})]},F)),h==="Vital Sign"&&f==="Vital sign"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(pS,{className:"w-4 h-4"}),C.jsx("span",{children:"Vital Sign Entry"})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"T (C)"}),C.jsx("input",{type:"text",placeholder:"37.0",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:Ce.T,onChange:F=>H({...Ce,T:F.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"P (bpm)"}),C.jsx("input",{type:"text",placeholder:"80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:Ce.P,onChange:F=>H({...Ce,P:F.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"R (/min)"}),C.jsx("input",{type:"text",placeholder:"18",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:Ce.R,onChange:F=>H({...Ce,R:F.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"SpO2 (%)"}),C.jsx("input",{type:"text",placeholder:"98",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:Ce.SpO2,onChange:F=>H({...Ce,SpO2:F.target.value})})]})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"BP (mmHg)"}),C.jsx("input",{type:"text",placeholder:"120/80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:Ce.BP,onChange:F=>H({...Ce,BP:F.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"GCS"}),C.jsx("input",{type:"text",placeholder:"E4V5M6",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:Ce.GCS,onChange:F=>H({...Ce,GCS:F.target.value})})]}),C.jsx("button",{onClick:_n,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 active:scale-95 transition-all",children:"Insert Vital Signs"})]}),h==="Symptom"&&ze(["Positive","Negative"],i).map(F=>C.jsx("button",{onClick:()=>{n(F==="Positive"?"Symptom":"Negative Symptom",f),g(null),vt()},className:`w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 ${F==="Positive"?"hover:bg-blue-50 text-blue-700":"hover:bg-red-50 text-red-700"}`,children:F},F)),h==="Disease"&&ze(["Tentative Diagnosis","Underlying Disease","Definitive Disease"],i).map(F=>C.jsx("button",{onClick:()=>{n(F==="Underlying Disease"?"Underlying disease":F==="Definitive Disease"?"Definitive diagnosis":F,f),g(null),vt()},className:"w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 hover:bg-indigo-50 text-indigo-700",children:F},F)),h==="Physical examination"&&f==="Breathing sound"&&ze(At,i).map(F=>C.jsxs("div",{onMouseEnter:ve=>ki(ve,F),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${P===F?"bg-blue-50 text-blue-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[F,C.jsx(So,{className:"w-3 h-3"})]},F)),h==="Physical examination"&&f==="Heart sound"&&ze(["Heart Beats","Murmur"],i).map(F=>C.jsxs("div",{onMouseEnter:ve=>ki(ve,F),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${P===F?"bg-indigo-50 text-indigo-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[F,C.jsx(So,{className:"w-3 h-3"})]},F)),h==="Treatment"&&f==="Antibiotics"&&ze(ls,i).map(F=>C.jsxs("div",{onMouseEnter:ve=>ki(ve,F),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${P===F?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:[F,C.jsx(So,{className:"w-3 h-3"})]},F)),h==="Physical examination"&&(f==="Abdominal tenderness"||f==="Rebound tenderness"||f==="Muscle guarding"||f==="Knocking pain")&&ze(["Yes","No"],i).map(F=>C.jsxs("button",{onMouseEnter:ve=>F==="Yes"?wt(ve,"zones"):void 0,onClick:()=>F==="No"&&(n("Physical examination",`No ${f}`),g(null),vt()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${F==="Yes"&&ne?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[F," ",F==="Yes"&&C.jsx(So,{className:"w-4 h-4"})]},F)),h==="Physical examination"&&f==="Pitting edema"&&ze(["Yes","No"],i).map(F=>C.jsxs("button",{onMouseEnter:ve=>F==="Yes"?wt(ve,"details"):void 0,onClick:()=>F==="No"&&(n("Physical examination","No pitting edema"),g(null),vt()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${F==="Yes"&&yt?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[F," ",F==="Yes"&&C.jsx(So,{className:"w-4 h-4"})]},F))]})]}),document.body),(P||ne||yt)&&Q&&Cd.createPortal(C.jsxs("div",{ref:ce,onMouseEnter:Un,onMouseLeave:Vn,className:"fixed z-[10000] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-2 duration-200 min-w-[260px] max-w-[420px] overflow-hidden flex flex-col",style:{top:(W==null?void 0:W.top)??Q.top,left:(W==null?void 0:W.left)??Q.left,maxHeight:(W==null?void 0:W.maxHeight)??"80vh"},children:[C.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{ref:x,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:l,onChange:F=>u(F.target.value)}),C.jsx(Sp,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),C.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[h==="Culture / Gram stain"&&P==="Culture"&&ze(us,l).map(F=>C.jsx("button",{onClick:()=>{n("Lab data",`${f} Culture: ${F}`),g(null),vt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:F},F)),h==="Culture / Gram stain"&&P==="Gram stain"&&ze(mi,l).map(F=>C.jsx("button",{onClick:()=>{n("Lab data",`${f} Gram stain: ${F}`),g(null),vt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:F},F)),h==="Physical examination"&&f==="Breathing sound"&&C.jsxs("div",{className:"p-4 w-64 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(PR,{className:"w-4 h-4"}),C.jsx("span",{children:"Zone Selector"})]}),C.jsx("button",{onClick:()=>{D(!q),U([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${q?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Bilateral"}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Right"}),C.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Left"}),_t.map(F=>C.jsx("button",{onClick:()=>gi(F.id),className:`py-3 text-xs font-bold border-2 rounded-lg transition-all ${L.includes(F.id)?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white border-slate-100 text-slate-600 hover:border-blue-200"}`,children:F.label},F.id))]}),C.jsx("button",{onClick:Fs,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Findings"})]}),h==="Physical examination"&&P==="Heart Beats"&&ze(["regular","irregular"],l).map(F=>C.jsx("button",{onClick:()=>{n("Physical examination",`Heart Beats: ${F}`),g(null),vt()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-indigo-50 hover:text-indigo-700 transition-colors border-b border-slate-50 last:border-0",children:F},F)),h==="Physical examination"&&P==="Murmur"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-indigo-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(eR,{className:"w-4 h-4"}),C.jsx("span",{children:"Murmur Detail"})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Intensity (Grade 1-6)"}),C.jsx("div",{className:"grid grid-cols-6 gap-1",children:[1,2,3,4,5,6].map(F=>C.jsx("button",{onClick:()=>at(F.toString()),className:`py-1.5 text-xs font-bold border-2 rounded-md transition-all ${Ve===F.toString()?"bg-indigo-600 border-indigo-600 text-white":"bg-white text-slate-600 hover:bg-indigo-50 border-slate-100"}`,children:F},F))})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Timing"}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Early"}),C.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Late"}),["Systolic","Diastolic"].map(F=>C.jsx(cS.Fragment,{children:["Early","Late"].map(ve=>{const ee=`${ve} ${F}`,ge=j.includes(ee);return C.jsx("button",{onClick:()=>ue(Te=>ge?Te.filter(Ae=>Ae!==ee):[...Te,ee]),className:`py-2 text-[10px] font-bold border-2 rounded-lg transition-all ${ge?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-slate-100 text-slate-500 hover:border-indigo-100"}`,children:ee},ee)})},F))]})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),C.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-32 overflow-y-auto p-1 border border-slate-100 rounded-lg bg-slate-50/50",children:["Aortic Area","Pulmonic Area","Tricuspid Area","Mitral Area, Apex"].map(F=>C.jsx("button",{onClick:()=>Be(F),className:`px-3 py-1.5 text-left text-[11px] font-semibold rounded-md transition-colors ${Ee===F?"bg-indigo-100 text-indigo-700":"text-slate-600 hover:bg-white"}`,children:F},F))})]}),C.jsx("button",{onClick:qs,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Murmur"})]}),h==="Treatment"&&P&&$n[P]&&ze($n[P],l).map((F,ve)=>{if(typeof F!="string"&&F.type==="header")return C.jsx("div",{className:"px-4 py-1.5 bg-slate-100 text-[11px] font-bold text-slate-400 uppercase tracking-tight",children:F.label},`h-${ve}`);const ee=typeof F=="string"?F:F.label;return C.jsx("button",{onClick:()=>{n("Treatment",ee),g(null),vt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-blue-50 hover:text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:ee},ee)}),ne==="zones"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsx("button",{onClick:()=>{Ge(!Ne),Ie([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${Ne?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Diffuse"}),C.jsxs("section",{children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Quadrants"}),C.jsx("div",{className:"grid grid-cols-2 gap-2",children:ze(Jn,l).map(F=>C.jsx("button",{onClick:()=>sn(F),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${pe.includes(F)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:F},F))})]}),C.jsxs("section",{className:"pt-2 border-t border-slate-100",children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Regions"}),C.jsx("div",{className:"grid grid-cols-3 gap-1",children:ze(Go,l).map(F=>C.jsx("button",{onClick:()=>sn(F),className:`p-1 text-[8px] leading-tight font-bold border-2 rounded-md h-12 flex items-center justify-center text-center ${pe.includes(F)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:F.replace(" Region","").replace(" / ",`
`)},F))})]}),C.jsx("button",{onClick:()=>{const F=Ne?`${f}: diffuse`:pe.length>0?`${f} at ${pe.join(", ")}`:"";F&&(n("Physical examination",F),g(null),vt())},disabled:!Ne&&pe.length===0,className:`w-full py-3 rounded-xl text-sm font-bold shadow-lg transition-all ${!Ne&&pe.length===0?"bg-slate-200 text-slate-400":"bg-green-600 text-white hover:bg-green-700"}`,children:"Insert Findings"})]}),yt==="details"&&C.jsxs("div",{className:"p-5 w-60 space-y-5",children:[C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3",children:"Grade"}),C.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:ze(["1+","2+","3+","4+"],l).map(F=>C.jsx("button",{onClick:()=>hi(F),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${Cn===F?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white text-slate-600 hover:bg-blue-50"}`,children:F},F))})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),C.jsx("input",{type:"text",placeholder:"e.g. Bilateral lower limbs",className:"w-full p-2.5 text-xs border-2 border-slate-100 rounded-lg outline-none focus:border-blue-400",value:kn,onChange:F=>pi(F.target.value)})]}),C.jsx("button",{onClick:()=>{const F=Cn?`Grade ${Cn}`:"",ve=kn?`at ${kn}`:"";n("Physical examination",`Pitting edema: ${[F,ve].filter(Boolean).join(" ")}`),g(null),vt()},className:"w-full py-3 bg-green-600 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-green-700 transition-all",children:"Insert"})]})]})]}),document.body)]})},OR=({events:n,activeEventId:e,onSelectEvent:t,onAddEvent:i,onDeleteEvent:r,onCopyFromEvent:l})=>{const u=le.useRef(null),[f,g]=le.useState(null),[h,_]=le.useState(null),T=(w,O)=>{w.stopPropagation();const P=w.currentTarget.getBoundingClientRect();_({top:P.top,left:P.right+10}),g(O)},S=w=>{f&&(l(f,w),g(null))};return le.useEffect(()=>{const w=()=>g(null);return f&&window.addEventListener("click",w),()=>window.removeEventListener("click",w)},[f]),C.jsxs("div",{className:"flex flex-col h-full bg-slate-100 border-r border-slate-200 relative",children:[C.jsx("div",{className:"p-4 bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm flex-shrink-0",children:C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Timeline"})}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-6 relative",children:[C.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-slate-300 -translate-x-1/2 min-h-full"}),C.jsxs("div",{className:"space-y-8 pb-10",children:[C.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t("profile"),children:[C.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${e==="profile"?"bg-white border-blue-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-blue-400"}`}),C.jsxs("div",{className:`relative w-40 p-4 rounded-lg border text-center transition-all ${e==="profile"?"bg-blue-50 border-blue-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-blue-300"}`,children:[C.jsx(gS,{className:`w-8 h-8 mx-auto mb-1 ${e==="profile"?"text-blue-600":"text-slate-400"}`}),C.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Patient Profile"})]})]}),n.map((w,O)=>{const P=w.id===e;return C.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t(w.id),children:[C.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${P?"bg-white border-green-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-green-400"}`}),C.jsxs("div",{className:`relative w-40 p-3 rounded-lg border text-center transition-all ${P?"bg-green-50 border-green-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-green-300"}`,children:[C.jsx("button",{className:"absolute -top-3 -right-3 w-8 h-8 bg-red-100 hover:bg-red-600 text-red-600 hover:text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all shadow-lg border border-red-200 hover:border-red-700 z-50 pointer-events-auto",onClick:k=>{k.stopPropagation(),k.preventDefault(),r(w.id)},type:"button",title:"Delete Timepoint",children:C.jsx(du,{className:"w-5 h-5 pointer-events-none"})}),C.jsxs("div",{className:"text-xs font-bold text-slate-500 mb-1",children:["Timepoint ",O+1]}),C.jsxs("div",{className:"flex items-center justify-center text-sm font-semibold text-slate-800",children:[C.jsx(PI,{className:"w-3 h-3 mr-1 opacity-50"}),w.date||"Set Date"]}),C.jsx("button",{className:`absolute -bottom-3 -right-3 w-8 h-8 rounded-full flex items-center justify-center transition-all shadow-lg border z-50 pointer-events-auto ${f===w.id?"bg-blue-600 text-white border-blue-700":"bg-blue-100 hover:bg-blue-600 text-blue-600 hover:text-white border-blue-200 hover:border-blue-700 opacity-0 group-hover:opacity-100"}`,onClick:k=>T(k,w.id),type:"button",title:"Copy content from another timepoint",children:C.jsx(wm,{className:"w-4 h-4 pointer-events-none"})})]})]},w.id)}),C.jsx("div",{ref:u})]})]}),C.jsx("div",{className:"p-4 bg-white border-t border-slate-200 flex-shrink-0",children:C.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all active:scale-95 font-medium",children:[C.jsx(_S,{className:"w-5 h-5 mr-2"}),"Add Timepoint"]})}),f&&h&&Cd.createPortal(C.jsxs("div",{className:"fixed z-[10001] bg-white border border-slate-200 rounded-lg shadow-2xl overflow-hidden min-w-[180px] animate-in zoom-in-95 duration-150",style:{top:h.top,left:h.left},onClick:w=>w.stopPropagation(),children:[C.jsx("div",{className:"bg-blue-600 text-white px-4 py-2 text-xs font-bold uppercase tracking-wider",children:""}),C.jsxs("div",{className:"max-h-60 overflow-y-auto bg-slate-50",children:[n.map((w,O)=>w.id===f?null:C.jsxs("button",{className:"w-full px-4 py-3 text-left text-sm font-semibold text-slate-700 border-b border-slate-200 hover:bg-blue-50 hover:text-blue-700 transition-colors last:border-0",onClick:()=>S(w.id),children:["Timepoint ",O+1]},w.id)),n.length<=1&&C.jsx("div",{className:"p-4 text-xs text-slate-400 italic text-center",children:"No other timepoints to copy from."})]})]}),document.body)]})},HR=({event:n,onUpdate:e,profile:t,onUpdateProfile:i,isProfileSelected:r,informant:l,setInformant:u,lastUpdateTrigger:f})=>{const g=le.useRef(null),h=le.useRef({}),[_,T]=le.useState("");le.useEffect(()=>{if(f&&!r){const B=h.current[f.category];B&&B.scrollIntoView({behavior:"smooth",block:"center"})}},[f,r]);const S=B=>{i({...t,gender:B}),u(B==="male"?"himself":"herself")},w=()=>{const B=_.trim();B&&!t.underlying_diseases.includes(B)&&i({...t,underlying_diseases:[...t.underlying_diseases,B]}),T("")},O=B=>{B.key==="Enter"&&(B.preventDefault(),w())},P=(B,W)=>{const re=t[B];if(!re)i({...t,[B]:W});else{const he=re.trim().endsWith(",")?`${re.trim()} ${W}`:`${re.trim()}, ${W}`;i({...t,[B]:he})}};if(r)return C.jsxs("div",{className:"flex flex-col h-full bg-white",children:[C.jsx("div",{className:"p-4 border-b border-slate-200 bg-blue-50 flex items-center justify-between flex-shrink-0",children:C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(xR,{className:"w-5 h-5 text-blue-600"}),C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Patient Profile"})]})}),C.jsxs("div",{className:"p-6 flex-1 overflow-y-auto space-y-8 custom-scrollbar",children:[C.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Age (Numeric)"}),C.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:t.age,onChange:B=>i({...t,age:B.target.value}),placeholder:"65"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Sex"}),C.jsx("div",{className:"flex space-x-2",children:["male","female"].map(B=>C.jsx("button",{onClick:()=>S(B),className:`flex-1 py-2.5 px-4 rounded-lg font-bold text-sm transition-all border ${t.gender===B?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:B.charAt(0).toUpperCase()+B.slice(1)},B))})]})]}),C.jsx("div",{className:"grid grid-cols-1 gap-6 pt-4 border-t border-slate-100",children:C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Informant"}),C.jsx("input",{type:"text",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:l,onChange:B=>u(B.target.value),placeholder:"e.g. himself, wife, family, relatives..."})]})}),C.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[C.jsx("div",{className:"flex items-center justify-between",children:C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Underlying Diseases"})}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Type a disease and press Enter...",className:"w-full pl-3 pr-10 py-2.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-shadow",value:_,onChange:B=>T(B.target.value),onKeyDown:O}),C.jsx("button",{onClick:w,disabled:!_.trim(),className:"absolute right-1.5 top-1.5 p-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 transition-colors",children:C.jsx(_S,{className:"w-4 h-4"})})]}),C.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 rounded-xl min-h-[60px] border border-dashed border-slate-300",children:[t.underlying_diseases.length===0&&C.jsx("p",{className:"text-slate-400 text-xs italic flex items-center justify-center w-full",children:"No diseases selected"}),t.underlying_diseases.map(B=>C.jsxs("div",{className:"bg-blue-100 text-blue-700 px-3 py-1.5 rounded-full flex items-center text-sm font-semibold shadow-sm border border-blue-200",children:[B,C.jsx("button",{onClick:()=>i({...t,underlying_diseases:t.underlying_diseases.filter(W=>W!==B)}),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:C.jsx(du,{className:"w-3 h-3"})})]},B))]})]}),C.jsxs("div",{className:"space-y-6 pt-6 border-t border-slate-100 pb-10",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-green-700",children:[C.jsx(pS,{className:"w-4 h-4"}),C.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",children:"Underlying Disease Control Status"})]}),C.jsxs("div",{className:"space-y-8",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"CONTROL QUALITY ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.control_quality,onChange:B=>i({...t,control_quality:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"General:"}),["Well controlled","Poorly controlled","Fair","Suboptimal","Stable","Unstable","Refractory"].map(B=>C.jsx("button",{onClick:()=>P("control_quality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Specific:"}),["Acute exacerbation","Stationary","Remission","Progressive","Terminal stage"].map(B=>C.jsx("button",{onClick:()=>P("control_quality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]})]})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"MANAGEMENT MODALITY ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.management_modality,onChange:B=>i({...t,management_modality:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"HTN/Heart:"}),["Oral anti-hypertensive agents","Medical control","Diet control","Lifestyle modification"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"DM:"}),["Oral anti-diabetic agents (OAD)","Insulin injection","Diet control and exercise"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"ESRD:"}),["Regular Hemodialysis (H/D)","H/D on Mon/Wed/Fri","H/D on Tue/Thu/Sat","Peritoneal Dialysis (PD/CAPD)","Conservative treatment"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Cancer:"}),["Chemotherapy","Target therapy","Immunotherapy","Regular surveillance post-operation","Palliative care"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]})]})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"FOLLOW-UP STATUS ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.follow_up_status,onChange:B=>i({...t,follow_up_status:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Frequency:"}),["Regularly","Irregularly","Intermittently","Lost to follow-up"].map(B=>C.jsx("button",{onClick:()=>P("follow_up_status",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsx("p",{className:"text-[9px] text-slate-400 italic mt-1 ml-2",children:"Location: Match the Medical Facility items from the left sidebar."})]})]})]})]})]})]});if(!n)return C.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50 text-slate-400 p-8 text-center h-full",children:C.jsx("p",{children:"Select a profile or timepoint from the timeline to start editing."})});const k=(B,W)=>{const re={...n.categorizedContent,[B]:W};e(n.id,{categorizedContent:re})},Q=fS.filter(B=>B.category!=="Disease");return C.jsxs("div",{className:"flex flex-col h-full bg-white",children:[C.jsxs("div",{className:"p-4 border-b border-slate-200 bg-slate-50 flex items-center justify-between flex-shrink-0",children:[C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Editor"}),C.jsx("div",{className:"text-lg font-mono font-semibold text-slate-800",children:n.date||(n.dateType==="month"?"YYYY-MM":"YYYY-MM-DD")})]}),C.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar",ref:g,children:[C.jsxs("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg border border-blue-100",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"Event Time"}),C.jsxs("div",{className:"flex space-x-2 text-xs",children:[C.jsx("button",{onClick:()=>e(n.id,{dateType:"date",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="date"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Exact Date"}),C.jsx("button",{onClick:()=>e(n.id,{dateType:"month",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="month"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Month Only"})]})]}),C.jsx("input",{type:n.dateType==="date"?"date":"month",className:"w-full p-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:n.date,onChange:B=>e(n.id,{date:B.target.value})})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{ref:B=>{h.current["Medical Facility"]=B},className:"group pb-4 border-b border-slate-100 scroll-mt-10",children:[C.jsxs("label",{className:"block text-xs font-bold text-blue-700 mb-2 uppercase tracking-wide flex items-center",children:[C.jsx(MI,{className:"w-3.5 h-3.5 mr-1.5"}),"Medical Facility ()"]}),C.jsx("textarea",{className:"w-full h-16 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed transition-shadow",placeholder:"e.g. the Emergency Department of Linkou Chang Gung Memorial Hospital",value:n.categorizedContent["Medical Facility"]||"",onChange:B=>k("Medical Facility",B.target.value)})]}),C.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-slate-100",children:[C.jsx("h3",{className:"text-sm font-bold text-slate-800",children:"Clinical Findings"}),C.jsx("span",{className:"text-xs text-slate-500 font-normal hidden sm:inline",children:"(Click menu items to insert)"})]}),Q.filter(B=>B.category!=="Medical Facility").map(B=>{const W=["Tentative Diagnosis","Underlying disease","Definitive diagnosis"].includes(B.category),re=B.category==="Vital Sign",he=W?"text-indigo-800":re?"text-green-700":B.category==="Negative Symptom"?"text-red-700":"text-orange-700";return C.jsxs("div",{ref:ce=>{h.current[B.category]=ce},className:"group scroll-mt-10",children:[C.jsx("label",{className:`block text-xs font-bold mb-1 uppercase tracking-wide ${he}`,children:B.category}),C.jsx("textarea",{className:`w-full h-24 p-3 border border-slate-300 rounded-lg shadow-sm font-sans text-sm leading-relaxed resize-y transition-shadow ${W?"focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 bg-indigo-50/10":re?"focus:ring-2 focus:ring-green-200 focus:border-green-400 bg-green-50/10":B.category==="Negative Symptom"?"focus:ring-2 focus:ring-red-200 focus:border-red-400 bg-red-50/20":"focus:ring-2 focus:ring-orange-200 focus:border-orange-400"}`,placeholder:`Describe ${B.category.toLowerCase()}...`,value:n.categorizedContent[B.category]||"",onChange:ce=>k(B.category,ce.target.value)})]},B.category)}),C.jsxs("div",{className:"group pt-4 border-t border-slate-100",children:[C.jsx("label",{className:"block text-xs font-bold text-blue-700 mb-1 uppercase tracking-wide",children:"Other Information"}),C.jsx("textarea",{className:"w-full h-32 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed resize-y transition-shadow",placeholder:"Enter any additional information...",value:n.otherInformation||"",onChange:B=>e(n.id,{otherInformation:B.target.value})})]})]})]})]})},BR=({isOpen:n,onClose:e,onConfirm:t,title:i,message:r,confirmText:l="Delete",cancelText:u="Cancel"})=>n?Cd.createPortal(C.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:e}),C.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 fade-in duration-200",children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[C.jsx(TS,{className:"w-5 h-5"}),C.jsx("h3",{className:"font-bold text-slate-800",children:i})]}),C.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-slate-200 text-slate-400 transition-colors",children:C.jsx(du,{className:"w-5 h-5"})})]}),C.jsx("div",{className:"p-6",children:C.jsx("p",{className:"text-slate-600 leading-relaxed",children:r})}),C.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 bg-slate-50 border-t border-slate-100",children:[C.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 hover:bg-slate-200 rounded-lg transition-colors",children:u}),C.jsx("button",{onClick:t,className:"px-6 py-2 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-lg shadow-md hover:shadow-lg active:scale-95 transition-all",children:l})]})]})]}),document.body):null,GR=({onLogin:n,authError:e})=>{const[t,i]=le.useState(""),[r,l]=le.useState(!1),[u,f]=le.useState(!1);le.useEffect(()=>{const h=window.location.hostname,_=window.location.href;!h||h===""||_.startsWith("about:")||_.startsWith("file:")||_.startsWith("data:")?(f(!0),i("Sandbox Mode (Auth Disabled)")):(f(!1),i(h))},[]);const g=()=>{u||(navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3))};return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-6 relative",children:[C.jsxs("div",{className:"max-w-4xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row z-10",children:[C.jsxs("div",{className:"md:w-1/2 p-10 bg-blue-50 flex flex-col justify-between relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-purple-500"}),C.jsxs("div",{className:"z-10",children:[C.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[C.jsx("div",{className:"bg-blue-600 p-2.5 rounded-xl shadow-lg",children:C.jsx(yS,{className:"w-8 h-8 text-white"})}),C.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"MediScribe AI"})]}),C.jsx("h2",{className:"text-4xl font-extrabold text-blue-900 mb-4 leading-tight",children:"Transform Medical Records with AI"}),C.jsx("p",{className:"text-slate-600 text-lg mb-8 leading-relaxed",children:"Generate professional, academic-grade admission notes from structured inputs in seconds using Gemini 1.5 Pro."})]}),C.jsxs("div",{className:"space-y-4 z-10",children:[C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(GI,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"Structured Data Entry"})]}),C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(dd,{className:"w-5 h-5 text-purple-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"AI-Powered Generation"})]}),C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(ER,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"Bring Your Own Key (Secure)"})]})]}),C.jsx("div",{className:"absolute -bottom-10 -right-10 w-64 h-64 bg-blue-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse"}),C.jsx("div",{className:"absolute -bottom-10 -left-10 w-64 h-64 bg-purple-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse delay-1000"})]}),C.jsx("div",{className:"md:w-1/2 p-10 flex flex-col justify-center items-center bg-white relative",children:u?C.jsxs("div",{className:"text-center w-full",children:[C.jsx("div",{className:"w-16 h-16 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-6",children:C.jsx(mR,{className:"w-8 h-8"})}),C.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Preview Environment Detected"}),C.jsxs("p",{className:"text-slate-500 mb-6 text-sm leading-relaxed px-4",children:["This app is running in a ",C.jsx("strong",{children:"Sandboxed Preview"})," (no domain). Google Login requires a real web server to function securely."]}),C.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 text-left mb-6 mx-2",children:[C.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center",children:[C.jsx(YI,{className:"w-4 h-4 mr-2 text-blue-600"}),"How to fix:"]}),C.jsxs("ol",{className:"list-decimal list-inside text-xs text-slate-600 space-y-2",children:[C.jsxs("li",{children:[C.jsx("strong",{children:"Download"})," or ",C.jsx("strong",{children:"Export"})," this project from the editor."]}),C.jsxs("li",{children:["Run it locally (e.g., ",C.jsx("code",{children:"npm run dev"}),"  ",C.jsx("code",{children:"localhost"}),")."]}),C.jsx("li",{children:"Or deploy it to a hosting service (Vercel, Netlify)."})]})]}),C.jsx("button",{disabled:!0,className:"w-full py-3 bg-slate-200 text-slate-400 font-bold rounded-xl cursor-not-allowed",children:"Login Disabled in Sandbox"})]}):C.jsxs("div",{className:"w-full flex flex-col items-center",children:[C.jsxs("div",{className:"text-center mb-10",children:[C.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Welcome Back"}),C.jsx("p",{className:"text-slate-500",children:"Please sign in to access your workspace"})]}),e&&C.jsxs("div",{className:"mb-6 w-full p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3 animate-in fade-in slide-in-from-top-2",children:[C.jsx(TS,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h4",{className:"text-sm font-bold text-red-800 mb-1",children:"Authentication Error"}),C.jsx("p",{className:"text-xs text-red-700 whitespace-pre-wrap leading-relaxed select-all font-mono bg-red-50/50 p-1 rounded",children:e}),e.includes("Settings > Authorized domains")&&C.jsxs("div",{className:"mt-2 p-2 bg-white border border-red-100 rounded text-xs text-slate-500",children:[C.jsx("strong",{children:"Tip:"})," You must add the ",C.jsx("u",{children:"exact domain"})," shown in the bottom right corner of this screen to Firebase Console."]})]})]}),C.jsxs("button",{onClick:n,className:"w-full max-w-sm flex items-center justify-center space-x-3 px-6 py-4 border border-slate-300 rounded-xl hover:bg-slate-50 hover:border-slate-400 hover:shadow-md transition-all group bg-white",children:[C.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),C.jsx("span",{className:"text-slate-700 font-bold text-lg group-hover:text-slate-900",children:"Sign in with Google"})]}),C.jsx("p",{className:"mt-8 text-xs text-center text-slate-400 max-w-xs leading-relaxed",children:"By signing in, you agree to use your own Gemini API Key. Your key is encrypted and stored securely linked to your account."})]})})]}),C.jsxs("div",{className:"absolute bottom-4 right-4 z-0 flex flex-col items-end opacity-70 hover:opacity-100 transition-opacity",children:[C.jsx("label",{className:"text-[10px] text-blue-200 uppercase font-bold mb-1",children:"Detected Domain (For Firebase Whitelist)"}),C.jsxs("button",{onClick:g,disabled:u,className:`flex items-center space-x-2 px-3 py-1.5 rounded-full border border-white/10 transition-colors ${u?"bg-red-900/40 text-red-200 cursor-not-allowed":"bg-black/20 backdrop-blur-md text-white hover:bg-black/30"}`,children:[C.jsx("span",{className:"text-xs font-mono",children:t}),!u&&(r?C.jsx(mS,{className:"w-3 h-3 text-green-400"}):C.jsx(wm,{className:"w-3 h-3 text-slate-300"}))]})]})]})},FR=({isOpen:n,onSave:e,isDismissible:t=!1,onDismiss:i})=>{const[r,l]=le.useState(""),[u,f]=le.useState(!1),[g,h]=le.useState("");if(!n)return null;const _=async()=>{if(!r.trim()){h("Please enter a valid API key.");return}h(""),f(!0);try{await e(r.trim())}catch{h("Failed to save API Key. Please try again.")}finally{f(!1)}};return C.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:t?i:void 0}),C.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-300",children:[C.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white text-center",children:[C.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-md",children:C.jsx(vS,{className:"w-8 h-8 text-white"})}),C.jsx("h2",{className:"text-2xl font-bold",children:"Setup Gemini API Key"}),C.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Required to power the AI generation"})]}),C.jsxs("div",{className:"p-8 space-y-6",children:[C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 flex items-start space-x-3",children:[C.jsx(HI,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{className:"text-sm text-blue-800",children:[C.jsx("p",{className:"font-bold mb-1",children:"Why do I need this?"}),C.jsx("p",{className:"opacity-90 leading-relaxed",children:"This application runs on your own Google Cloud account. Your API key is stored securely in your database and is never shared with us."})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Enter your Gemini API Key"}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(oR,{className:"h-4 w-4 text-slate-400"})}),C.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all font-mono text-sm",placeholder:"AIzaSy...",value:r,onChange:T=>l(T.target.value)})]}),g&&C.jsx("p",{className:"text-red-500 text-xs mt-2 font-medium",children:g})]}),C.jsx("div",{className:"text-center",children:C.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 font-semibold hover:underline",children:["Get a free API key here ",C.jsx(QI,{className:"w-3.5 h-3.5 ml-1"})]})})]}),C.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[t&&C.jsx("button",{onClick:i,className:"flex-1 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Cancel"}),C.jsx("button",{onClick:_,disabled:u||!r,className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all active:scale-95 disabled:bg-slate-300 disabled:shadow-none flex items-center justify-center",children:u?C.jsx(iu,{className:"w-5 h-5 animate-spin"}):"Save & Continue"})]})]})]})]})};var qR={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zR,KR;function YR(){return{geminiUrl:zR,vertexUrl:KR}}function $R(n,e,t,i){var r,l;if(!(n!=null&&n.baseUrl)){const u=YR();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(l=u.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Os{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const g=n[f];if(Array.isArray(t))for(let h=0;h<g.length;h++){const _=g[h];p(_,e.slice(l+1),t[h])}else for(const h of g)p(h,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const g=n[f];p(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function JR(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),l=i.split("."),u=new Set;let f=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){f=g;break}if(f!==-1&&l.length>f)for(let g=f;g<l.length;g++){const h=l[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Bp(n,r,l,0,u)}}function Bp(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const g of f[u])Bp(g,e,t,i+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),g={};for(const h of f)g[h]=u[h];for(const[h,_]of Object.entries(g)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);p(u,T,_)}for(const h of f)delete u[h]}}else{const u=n;l in u&&Bp(u[l],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Im(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QR(n){const e={},t=d(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function XR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],jR(u)),e}function WR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],ZR(u)),e}function jR(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>ex(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function ZR(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>tx(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function ex(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],ax(t)),e}function tx(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],lx(t)),e}function nx(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function ix(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function sx(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],ox(u)),e}function ox(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function ES(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],rx(u)),e}function rx(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function ax(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Im(i));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function lx(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Im(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var r_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(r_||(r_={}));var a_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(a_||(a_={}));var l_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(l_||(l_={}));var Io;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Io||(Io={}));var u_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(u_||(u_={}));var c_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(c_||(c_={}));var d_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(d_||(d_={}));var f_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(f_||(f_={}));var h_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(h_||(h_={}));var p_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(p_||(p_={}));var m_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(m_||(m_={}));var g_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(g_||(g_={}));var y_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(y_||(y_={}));var v_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(v_||(v_={}));var __;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(__||(__={}));var T_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(T_||(T_={}));var E_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(E_||(E_={}));var S_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(S_||(S_={}));var A_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(A_||(A_={}));var bd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(bd||(bd={}));var C_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(C_||(C_={}));var b_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(b_||(b_={}));var w_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(w_||(w_={}));var Gp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Gp||(Gp={}));var I_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(I_||(I_={}));var R_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(R_||(R_={}));var x_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(x_||(x_={}));var N_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(N_||(N_={}));var M_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(M_||(M_={}));var D_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(D_||(D_={}));var P_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(P_||(P_={}));var k_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(k_||(k_={}));var V_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(V_||(V_={}));var U_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(U_||(U_={}));var L_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(L_||(L_={}));var O_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(O_||(O_={}));var H_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(H_||(H_={}));var B_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(B_||(B_={}));var G_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(G_||(G_={}));var F_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(F_||(F_={}));var q_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(q_||(q_={}));var z_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(z_||(z_={}));var K_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(K_||(K_={}));var Y_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Y_||(Y_={}));var $_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})($_||($_={}));var J_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(J_||(J_={}));var Q_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Q_||(Q_={}));var X_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(X_||(X_={}));var W_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(W_||(W_={}));var j_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(j_||(j_={}));var Z_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Z_||(Z_={}));var eT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(eT||(eT={}));var tT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tT||(tT={}));var nT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(nT||(nT={}));var iT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(iT||(iT={}));var Aa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Aa||(Aa={}));class Fp{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Xl{get text(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const S of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[w,O]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(O!==null||O!==void 0)&&T.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[S,w]of Object.entries(T))S!=="inlineData"&&(w!==null||w!==void 0)&&_.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,r,l,u,f,g,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,r,l,u,f,g,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class sT{}class oT{}class ux{}class cx{}class dx{}class fx{}class rT{}class aT{}class lT{}class hx{}class wd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new wd;let r;const l=e;return t?r=WR(l):r=XR(l),Object.assign(i,r),i}}class uT{}class cT{}class dT{}class fT{}class px{}class mx{}class gx{}class Rm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Rm,l=sx(e);return Object.assign(i,l),i}}class yx{}class vx{}class _x{}class hT{}class Tx{get text(){var e,t,i;let r="",l=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(f))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,i;let r="";const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,g]of Object.entries(u))f!=="inlineData"&&g!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Ex{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class xm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new xm,l=ES(e);return Object.assign(i,l),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function it(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function SS(n,e){const t=it(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function AS(n){return Array.isArray(n)?n.map(e=>Id(e)):[Id(n)]}function Id(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function CS(n){const e=Id(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bS(n){const e=Id(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function wS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>pT(e)):[pT(n)]}function qp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function mT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function gT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function yn(n){if(n==null)throw new Error("ContentUnion is required");return qp(n)?n:{role:"user",parts:wS(n)}}function Nm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=yn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=yn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>yn(t)):[yn(e)]}function ci(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(mT(n)||gT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[yn(n)]}const e=[],t=[],i=qp(n[0]);for(const r of n){const l=qp(r);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(mT(r)||gT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:wS(t)}),e}function Sx(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Io).includes(t[0].toUpperCase())?t[0].toUpperCase():Io.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Io).includes(i.toUpperCase())?i.toUpperCase():Io.TYPE_UNSPECIFIED})}}function ba(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Sx(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Io).includes(f.toUpperCase())?f.toUpperCase():Io.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=ba(f);else if(i.includes(u)){const g=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}g.push(ba(h))}e[u]=g}else if(r.includes(u)){const g={};for(const[h,_]of Object.entries(f))g[h]=ba(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Mm(n){return ba(n)}function Dm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Pm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ha(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ba(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ba(e.response));return n}function Ba(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Ax(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Hs(n,e){if(typeof e!="string")throw new Error("name must be a string");return Ax(n,e,"cachedContents")}function IS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Bo(n){return Im(n)}function Cx(n){return n!=null&&typeof n=="object"&&"name"in n}function bx(n){return n!=null&&typeof n=="object"&&"video"in n}function wx(n){return n!=null&&typeof n=="object"&&"uri"in n}function RS(n){var e;let t;if(Cx(n)&&(t=n.name),!(wx(n)&&(t=n.uri,t===void 0))&&!(bx(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function xS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function NS(n){for(const e of["models","tunedModels","publisherModels"])if(Ix(n,e))return n[e];return[]}function Ix(n,e){return n!==null&&typeof n=="object"&&e in n}function Rx(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function xx(n,e={}){const t=[],i=new Set;for(const r of n){const l=r.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const u=Rx(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function MS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Nx(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function DS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ga(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function PS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mx(n){const e={},t=d(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>d1(u))),p(e,["inlinedResponses"],l)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["inlinedEmbedContentResponses"],l)}return e}function Dx(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function Px(n){const e={},t=d(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function fd(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["metadata","state"]);r!=null&&p(e,["state"],PS(r));const l=d(n,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const u=d(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&p(e,["updateTime"],f);const g=d(n,["metadata","model"]);g!=null&&p(e,["model"],g);const h=d(n,["metadata","output"]);return h!=null&&p(e,["dest"],Mx(DS(h))),e}function zp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["state"]);r!=null&&p(e,["state"],PS(r));const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["createTime"]);u!=null&&p(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(e,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(e,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=d(n,["model"]);_!=null&&p(e,["model"],_);const T=d(n,["inputConfig"]);T!=null&&p(e,["src"],kx(T));const S=d(n,["outputConfig"]);S!=null&&p(e,["dest"],Dx(DS(S)));const w=d(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function kx(n){const e={},t=d(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function Vx(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&p(t,["fileName"],i);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>c1(n,u))),p(t,["requests","requests"],l)}return t}function Ux(n){const e={},t=d(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Lx(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Ox(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ga(n,i)),t}function Hx(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ga(n,i)),t}function Bx(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],Gx(i));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function Gx(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function kS(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>v1(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function Fx(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function qx(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],Px(Nx(r))),t}function yT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],Vx(n,MS(n,r)));const l=d(e,["config"]);return l!=null&&Fx(l,t),t}function zx(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],it(n,i));const r=d(e,["src"]);r!=null&&p(t,["inputConfig"],Ux(MS(n,r)));const l=d(e,["config"]);return l!=null&&qx(l,t),t}function Kx(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function Yx(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],Zx(n,r));const l=d(e,["config"]);return l!=null&&Kx(l,t),t}function $x(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ga(n,i)),t}function Jx(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ga(n,i)),t}function Qx(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function Xx(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function Wx(n,e){const t={},i=d(e,["contents"]);if(i!=null){let l=Nm(n,i);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(p(t,["_self"],jx(r,t)),JR(t,{"requests[].*":"requests[].request.*"})),t}function jx(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Zx(n,e){const t={},i=d(e,["fileName"]);i!=null&&p(t,["file_name"],i);const r=d(e,["inlinedRequests"]);return r!=null&&p(t,["requests"],Wx(n,r)),t}function e1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function t1(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function n1(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function i1(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],kS(yn(r)));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const O=d(e,["frequencyPenalty"]);O!=null&&p(i,["frequencyPenalty"],O);const P=d(e,["seed"]);P!=null&&p(i,["seed"],P);const k=d(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const Q=d(e,["responseSchema"]);Q!=null&&p(i,["responseSchema"],Mm(Q));const B=d(e,["responseJsonSchema"]);if(B!=null&&p(i,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=d(e,["safetySettings"]);if(t!==void 0&&W!=null){let D=W;Array.isArray(D)&&(D=D.map(Ve=>_1(Ve))),p(t,["safetySettings"],D)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let D=Ba(re);Array.isArray(D)&&(D=D.map(Ve=>E1(Ha(Ve)))),p(t,["tools"],D)}const he=d(e,["toolConfig"]);if(t!==void 0&&he!=null&&p(t,["toolConfig"],T1(he)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=d(e,["cachedContent"]);t!==void 0&&ce!=null&&p(t,["cachedContent"],Hs(n,ce));const N=d(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const M=d(e,["mediaResolution"]);M!=null&&p(i,["mediaResolution"],M);const x=d(e,["speechConfig"]);if(x!=null&&p(i,["speechConfig"],Dm(x)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=d(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const U=d(e,["imageConfig"]);U!=null&&p(i,["imageConfig"],u1(U));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function s1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>Bx(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function o1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ga(n,i)),t}function r1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ga(n,i)),t}function a1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function l1(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function u1(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function c1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["request","model"],it(n,i));const r=d(e,["contents"]);if(r!=null){let f=ci(r);Array.isArray(f)&&(f=f.map(g=>kS(g))),p(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(e,["config"]);return u!=null&&p(t,["request","generationConfig"],i1(n,u,d(t,["request"],{}))),t}function d1(n){const e={},t=d(n,["response"]);t!=null&&p(e,["response"],s1(t));const i=d(n,["error"]);return i!=null&&p(e,["error"],i),e}function f1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function h1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const l=d(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),t}function p1(n){const e={},t=d(n,["config"]);return t!=null&&f1(t,e),e}function m1(n){const e={},t=d(n,["config"]);return t!=null&&h1(t,e),e}function g1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>fd(u))),p(e,["batchJobs"],l)}return e}function y1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>zp(u))),p(e,["batchJobs"],l)}return e}function v1(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],e1(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],t1(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],Lx(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function _1(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function T1(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],n1(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function E1(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],a1(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],l1(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ps;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ps||(Ps={}));class wr{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S1 extends Os{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new wr(Ps.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=yT(this.apiClient,e),i=t._url,r=me("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,g=f.requests,h=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const w=T.request;w.systemInstruction=S,T.request=w}h.push(T)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=zx(this.apiClient,e);return f=me("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>zp(_))}else{const h=yT(this.apiClient,e);return f=me("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>fd(_))}}async createEmbeddingsInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Yx(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>fd(g))}}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=r1(this.apiClient,e);return f=me("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>zp(_))}else{const h=o1(this.apiClient,e);return f=me("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>fd(_))}}async cancel(e){var t,i,r,l;let u="",f={};if(this.apiClient.isVertexAI()){const g=Hx(this.apiClient,e);u=me("batchPredictionJobs/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=Ox(this.apiClient,e);u=me("batches/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=m1(e);return f=me("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=y1(_),S=new hT;return Object.assign(S,T),S})}else{const h=p1(e);return f=me("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=g1(_),S=new hT;return Object.assign(S,T),S})}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=Jx(this.apiClient,e);return f=me("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>Xx(_))}else{const h=$x(this.apiClient,e);return f=me("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>Qx(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A1(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function vT(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Y1(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function C1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let _=ci(u);Array.isArray(_)&&(_=_.map(T=>vT(T))),p(e,["contents"],_)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],vT(yn(f)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>J1(T))),p(e,["tools"],_)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],$1(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function b1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=ci(u);Array.isArray(T)&&(T=T.map(S=>S)),p(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],yn(f));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>Q1(S))),p(e,["tools"],T)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function w1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],SS(n,i));const r=d(e,["config"]);return r!=null&&C1(r,t),t}function I1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],SS(n,i));const r=d(e,["config"]);return r!=null&&b1(r,t),t}function R1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Hs(n,i)),t}function x1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Hs(n,i)),t}function N1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function M1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function D1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function P1(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function k1(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function V1(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function U1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Hs(n,i)),t}function L1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Hs(n,i)),t}function O1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function H1(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function B1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function G1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function F1(n){const e={},t=d(n,["config"]);return t!=null&&B1(t,e),e}function q1(n){const e={},t=d(n,["config"]);return t!=null&&G1(t,e),e}function z1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function K1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function Y1(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],D1(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],P1(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],A1(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function $1(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],k1(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function J1(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],O1(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],H1(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function Q1(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>V1(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function X1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function W1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function j1(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Hs(n,i));const r=d(e,["config"]);return r!=null&&X1(r,t),t}function Z1(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Hs(n,i));const r=d(e,["config"]);return r!=null&&W1(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eN extends Os{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new wr(Ps.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=I1(this.apiClient,e);return f=me("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=w1(this.apiClient,e);return f=me("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=L1(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=U1(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=x1(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=M1(_),S=new dT;return Object.assign(S,T),S})}else{const h=R1(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=N1(_),S=new dT;return Object.assign(S,T),S})}}async update(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=Z1(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=j1(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=q1(e);return f=me("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=K1(_),S=new fT;return Object.assign(S,T),S})}else{const h=F1(e);return f=me("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=z1(_),S=new fT;return Object.assign(S,T),S})}}}function Rd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function _T(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(n){return this instanceof Pe?(this.v=n,this):new Pe(n)}function Ni(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(O){return Promise.resolve(O).then(w,T)}}function f(w,O){i[w]&&(r[w]=function(P){return new Promise(function(k,Q){l.push([w,P,k,Q])>1||g(w,P)})},O&&(r[w]=O(r[w])))}function g(w,O){try{h(i[w](O))}catch(P){S(l[0][3],P)}}function h(w){w.value instanceof Pe?Promise.resolve(w.value.v).then(_,T):S(l[0][2],w)}function _(w){g("next",w)}function T(w){g("throw",w)}function S(w,O){w(O),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Mi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _T=="function"?_T(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(u){return new Promise(function(f,g){u=n[l](u),r(f,g,u.done,u.value)})}}function r(l,u,f,g){Promise.resolve(g).then(function(h){l({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:VS(t)}function VS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function nN(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function TT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let l=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),l&&!VS(n[i])&&(l=!1),i++;l?e.push(...r):e.pop()}return e}class iN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new sN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class sN{constructor(e,t,i,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),nN(l)}async sendMessage(e){var t;await this.sendPromise;const i=yn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,f;const g=await r,h=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];_!=null&&(S=(f=_.slice(T))!==null&&f!==void 0?f:[]);const w=h?[h]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=yn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?TT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Ni(this,arguments,function*(){var r,l,u,f,g,h;const _=[];try{for(var T=!0,S=Mi(e),w;w=yield Pe(S.next()),r=w.done,!r;T=!0){f=w.value,T=!1;const O=f;if(tN(O)){const P=(h=(g=O.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;P!==void 0&&_.push(P)}yield yield Pe(O)}}catch(O){l={error:O}}finally{try{!T&&!r&&(u=S.return)&&(yield Pe(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...TT(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oN(n){const e={},t=d(n,["file"]);return t!=null&&p(e,["file"],t),e}function rN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function aN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],RS(t)),e}function lN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function uN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],RS(t)),e}function cN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function dN(n){const e={},t=d(n,["config"]);return t!=null&&cN(t,e),e}function fN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hN extends Os{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new wr(Ps.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=dN(e);return l=me("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=fN(g),_=new yx;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=oN(e);return l=me("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=rN(g),_=new vx;return Object.assign(_,h),_})}}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uN(e);return l=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=aN(e);return l=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=lN(g),_=new _x;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hd(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function pN(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>NN(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function mN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function gN(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function vN(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const O=d(n,["responseModalities"]);O!=null&&p(e,["responseModalities"],O);const P=d(n,["responseSchema"]);P!=null&&p(e,["responseSchema"],P);const k=d(n,["routingConfig"]);k!=null&&p(e,["routingConfig"],k);const Q=d(n,["seed"]);Q!=null&&p(e,["seed"],Q);const B=d(n,["speechConfig"]);B!=null&&p(e,["speechConfig"],B);const W=d(n,["stopSequences"]);W!=null&&p(e,["stopSequences"],W);const re=d(n,["temperature"]);re!=null&&p(e,["temperature"],re);const he=d(n,["thinkingConfig"]);he!=null&&p(e,["thinkingConfig"],he);const ce=d(n,["topK"]);ce!=null&&p(e,["topK"],ce);const N=d(n,["topP"]);if(N!=null&&p(e,["topP"],N),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _N(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function TN(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function EN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Pm(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=d(n,["systemInstruction"]);e!==void 0&&O!=null&&p(e,["setup","systemInstruction"],pN(yn(O)));const P=d(n,["tools"]);if(e!==void 0&&P!=null){let ce=Ba(P);Array.isArray(ce)&&(ce=ce.map(N=>DN(Ha(N)))),p(e,["setup","tools"],ce)}const k=d(n,["sessionResumption"]);e!==void 0&&k!=null&&p(e,["setup","sessionResumption"],MN(k));const Q=d(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","inputAudioTranscription"],Q);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const W=d(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&p(e,["setup","realtimeInputConfig"],W);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const he=d(n,["proactivity"]);if(e!==void 0&&he!=null&&p(e,["setup","proactivity"],he),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function SN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],vN(i));const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Pm(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=d(n,["systemInstruction"]);e!==void 0&&O!=null&&p(e,["setup","systemInstruction"],yn(O));const P=d(n,["tools"]);if(e!==void 0&&P!=null){let N=Ba(P);Array.isArray(N)&&(N=N.map(M=>PN(Ha(M)))),p(e,["setup","tools"],N)}const k=d(n,["sessionResumption"]);e!==void 0&&k!=null&&p(e,["setup","sessionResumption"],k);const Q=d(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","inputAudioTranscription"],Q);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const W=d(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&p(e,["setup","realtimeInputConfig"],W);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const he=d(n,["proactivity"]);e!==void 0&&he!=null&&p(e,["setup","proactivity"],he);const ce=d(n,["explicitVadSignal"]);return e!==void 0&&ce!=null&&p(e,["setup","explicitVadSignal"],ce),t}function AN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],it(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],EN(r,t)),t}function CN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],it(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],SN(r,t)),t}function bN(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function wN(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function IN(n){const e={},t=d(n,["media"]);if(t!=null){let h=AS(t);Array.isArray(h)&&(h=h.map(_=>hd(_))),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],hd(bS(i)));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],hd(CS(l)));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function RN(n){const e={},t=d(n,["media"]);if(t!=null){let h=AS(t);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],bS(i));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],CS(l));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function xN(n){const e={},t=d(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const r=d(n,["toolCall"]);r!=null&&p(e,["toolCall"],r);const l=d(n,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const u=d(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],kN(u));const f=d(n,["goAway"]);f!=null&&p(e,["goAway"],f);const g=d(n,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function NN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],mN(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],gN(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],hd(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function MN(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],_N(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],TN(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function PN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>yN(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function kN(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const r=d(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const u=d(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const g=d(n,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(O=>O)),p(e,["promptTokensDetails"],w)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(O=>O)),p(e,["cacheTokensDetails"],w)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(O=>O)),p(e,["responseTokensDetails"],w)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(O=>O)),p(e,["toolUsePromptTokensDetails"],w)}const S=d(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VN(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function UN(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],LN(i));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function LN(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function ON(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["contents"]);if(r!=null){let l=ci(r);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["contents"],l)}return t}function HN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["tokensInfo"],r)}return e}function BN(n){const e={},t=d(n,["values"]);t!=null&&p(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&p(e,["statistics"],GN(i)),e}function GN(n){const e={},t=d(n,["truncated"]);t!=null&&p(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function jd(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>XM(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function FN(n){const e={},t=d(n,["controlType"]);t!=null&&p(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function qN(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function zN(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],yn(i));const r=d(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>HS(f))),p(e,["tools"],u)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&p(e,["generationConfig"],VM(l)),t}function KN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["contents"]);if(r!=null){let u=ci(r);Array.isArray(u)&&(u=u.map(f=>jd(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&qN(l),t}function YN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["contents"]);if(r!=null){let u=ci(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&zN(l,t),t}function $N(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const r=d(n,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function JN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function QN(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],it(n,i)),t}function XN(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],it(n,i)),t}function WN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function jN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function ZN(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const O=d(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const k=d(n,["addWatermark"]);e!==void 0&&k!=null&&p(e,["parameters","addWatermark"],k);const Q=d(n,["labels"]);e!==void 0&&Q!=null&&p(e,["labels"],Q);const B=d(n,["editMode"]);e!==void 0&&B!=null&&p(e,["parameters","editMode"],B);const W=d(n,["baseSteps"]);return e!==void 0&&W!=null&&p(e,["parameters","editConfig","baseSteps"],W),t}function eM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>nD(g))),p(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&ZN(u,t),t}function tM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Zd(l))),p(e,["generatedImages"],r)}return e}function nM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function iM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&p(e,["parameters","outputDimensionality"],l);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&p(e,["parameters","autoTruncate"],f),t}function sM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["contents"]);if(r!=null){let f=Nm(n,r);Array.isArray(f)&&(f=f.map(g=>g)),p(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&nM(l,t);const u=d(e,["model"]);return u!==void 0&&p(t,["requests[]","model"],it(n,u)),t}function oM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["contents"]);if(r!=null){let u=Nm(n,r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["instances[]","content"],u)}const l=d(e,["config"]);return l!=null&&iM(l,t),t}function rM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function aM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>BN(u))),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function lM(n){const e={},t=d(n,["endpoint"]);t!=null&&p(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function uM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function cM(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dM(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function hM(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],jd(yn(r)));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const O=d(e,["frequencyPenalty"]);O!=null&&p(i,["frequencyPenalty"],O);const P=d(e,["seed"]);P!=null&&p(i,["seed"],P);const k=d(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const Q=d(e,["responseSchema"]);Q!=null&&p(i,["responseSchema"],Mm(Q));const B=d(e,["responseJsonSchema"]);if(B!=null&&p(i,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=d(e,["safetySettings"]);if(t!==void 0&&W!=null){let D=W;Array.isArray(D)&&(D=D.map(Ve=>iD(Ve))),p(t,["safetySettings"],D)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let D=Ba(re);Array.isArray(D)&&(D=D.map(Ve=>cD(Ha(Ve)))),p(t,["tools"],D)}const he=d(e,["toolConfig"]);if(t!==void 0&&he!=null&&p(t,["toolConfig"],uD(he)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=d(e,["cachedContent"]);t!==void 0&&ce!=null&&p(t,["cachedContent"],Hs(n,ce));const N=d(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const M=d(e,["mediaResolution"]);M!=null&&p(i,["mediaResolution"],M);const x=d(e,["speechConfig"]);if(x!=null&&p(i,["speechConfig"],Dm(x)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=d(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const U=d(e,["imageConfig"]);U!=null&&p(i,["imageConfig"],BM(U));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function pM(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],yn(r));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const O=d(e,["frequencyPenalty"]);O!=null&&p(i,["frequencyPenalty"],O);const P=d(e,["seed"]);P!=null&&p(i,["seed"],P);const k=d(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const Q=d(e,["responseSchema"]);Q!=null&&p(i,["responseSchema"],Mm(Q));const B=d(e,["responseJsonSchema"]);B!=null&&p(i,["responseJsonSchema"],B);const W=d(e,["routingConfig"]);W!=null&&p(i,["routingConfig"],W);const re=d(e,["modelSelectionConfig"]);re!=null&&p(i,["modelConfig"],re);const he=d(e,["safetySettings"]);if(t!==void 0&&he!=null){let j=he;Array.isArray(j)&&(j=j.map(ue=>ue)),p(t,["safetySettings"],j)}const ce=d(e,["tools"]);if(t!==void 0&&ce!=null){let j=Ba(ce);Array.isArray(j)&&(j=j.map(ue=>HS(Ha(ue)))),p(t,["tools"],j)}const N=d(e,["toolConfig"]);t!==void 0&&N!=null&&p(t,["toolConfig"],N);const M=d(e,["labels"]);t!==void 0&&M!=null&&p(t,["labels"],M);const x=d(e,["cachedContent"]);t!==void 0&&x!=null&&p(t,["cachedContent"],Hs(n,x));const L=d(e,["responseModalities"]);L!=null&&p(i,["responseModalities"],L);const U=d(e,["mediaResolution"]);U!=null&&p(i,["mediaResolution"],U);const q=d(e,["speechConfig"]);q!=null&&p(i,["speechConfig"],Dm(q));const D=d(e,["audioTimestamp"]);D!=null&&p(i,["audioTimestamp"],D);const Ve=d(e,["thinkingConfig"]);Ve!=null&&p(i,["thinkingConfig"],Ve);const at=d(e,["imageConfig"]);if(at!=null&&p(i,["imageConfig"],GM(at)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function ET(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["contents"]);if(r!=null){let u=ci(r);Array.isArray(u)&&(u=u.map(f=>jd(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],hM(n,l,t)),t}function ST(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["contents"]);if(r!=null){let u=ci(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],pM(n,l,t)),t}function AT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>UN(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function CT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const r=d(n,["createTime"]);r!=null&&p(e,["createTime"],r);const l=d(n,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const u=d(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(e,["responseId"],f);const g=d(n,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function mM(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=d(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(n,["imageSize"]);if(e!==void 0&&w!=null&&p(e,["parameters","sampleImageSize"],w),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function gM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const O=d(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const k=d(n,["addWatermark"]);e!==void 0&&k!=null&&p(e,["parameters","addWatermark"],k);const Q=d(n,["labels"]);e!==void 0&&Q!=null&&p(e,["labels"],Q);const B=d(n,["imageSize"]);e!==void 0&&B!=null&&p(e,["parameters","sampleImageSize"],B);const W=d(n,["enhancePrompt"]);return e!==void 0&&W!=null&&p(e,["parameters","enhancePrompt"],W),t}function yM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&mM(l,t),t}function vM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&gM(l,t),t}function _M(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>MM(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],LS(r)),e}function TM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Zd(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],OS(r)),e}function EM(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(n,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=d(n,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(n,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],ef(_));const T=d(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>AD(w))),p(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function SM(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const l=d(n,["fps"]);e!==void 0&&l!=null&&p(e,["parameters","fps"],l);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const h=d(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","negativePrompt"],S);const w=d(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const O=d(n,["generateAudio"]);e!==void 0&&O!=null&&p(e,["parameters","generateAudio"],O);const P=d(n,["lastFrame"]);e!==void 0&&P!=null&&p(e,["instances[0]","lastFrame"],Pi(P));const k=d(n,["referenceImages"]);if(e!==void 0&&k!=null){let W=k;Array.isArray(W)&&(W=W.map(re=>CD(re))),p(e,["instances[0]","referenceImages"],W)}const Q=d(n,["mask"]);e!==void 0&&Q!=null&&p(e,["instances[0]","mask"],SD(Q));const B=d(n,["compressionQuality"]);return e!==void 0&&B!=null&&p(e,["parameters","compressionQuality"],B),t}function AM(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],IM(u)),e}function CM(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],RM(u)),e}function bM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],ef(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],BS(u));const f=d(e,["source"]);f!=null&&xM(f,t);const g=d(e,["config"]);return g!=null&&EM(g,t),t}function wM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],Pi(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],GS(u));const f=d(e,["source"]);f!=null&&NM(f,t);const g=d(e,["config"]);return g!=null&&SM(g,t),t}function IM(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>PM(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function RM(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>kM(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function xM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],ef(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],BS(l)),t}function NM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Pi(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],GS(l)),t}function MM(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],FM(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=d(n,["_self"]);return r!=null&&p(e,["safetyAttributes"],LS(r)),e}function Zd(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],US(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=d(n,["_self"]);r!=null&&p(e,["safetyAttributes"],OS(r));const l=d(n,["prompt"]);return l!=null&&p(e,["enhancedPrompt"],l),e}function DM(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["mask"],US(t));const i=d(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["labels"],r)}return e}function PM(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],TD(t)),e}function kM(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],ED(t)),e}function VM(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const O=d(n,["responseModalities"]);O!=null&&p(e,["responseModalities"],O);const P=d(n,["responseSchema"]);P!=null&&p(e,["responseSchema"],P);const k=d(n,["routingConfig"]);k!=null&&p(e,["routingConfig"],k);const Q=d(n,["seed"]);Q!=null&&p(e,["seed"],Q);const B=d(n,["speechConfig"]);B!=null&&p(e,["speechConfig"],B);const W=d(n,["stopSequences"]);W!=null&&p(e,["stopSequences"],W);const re=d(n,["temperature"]);re!=null&&p(e,["temperature"],re);const he=d(n,["thinkingConfig"]);he!=null&&p(e,["thinkingConfig"],he);const ce=d(n,["topK"]);ce!=null&&p(e,["topK"],ce);const N=d(n,["topP"]);if(N!=null&&p(e,["topP"],N),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function UM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],it(n,i)),t}function LM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],it(n,i)),t}function OM(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function HM(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function BM(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function GM(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);const r=d(n,["outputMimeType"]);r!=null&&p(e,["imageOutputOptions","mimeType"],r);const l=d(n,["outputCompressionQuality"]);return l!=null&&p(e,["imageOutputOptions","compressionQuality"],l),e}function FM(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],Bo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function US(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Bo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function ef(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],Bo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Pi(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Bo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function qM(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],xS(n,f)),i}function zM(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],xS(n,f)),i}function KM(n,e){const t={},i=d(e,["config"]);return i!=null&&qM(n,i,t),t}function YM(n,e){const t={},i=d(e,["config"]);return i!=null&&zM(n,i,t),t}function $M(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let l=NS(r);Array.isArray(l)&&(l=l.map(u=>Kp(u))),p(e,["models"],l)}return e}function JM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let l=NS(r);Array.isArray(l)&&(l=l.map(u=>Yp(u))),p(e,["models"],l)}return e}function QM(n){const e={},t=d(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const r=d(n,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function Kp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["version"]);l!=null&&p(e,["version"],l);const u=d(n,["_self"]);u!=null&&p(e,["tunedModelInfo"],dD(u));const f=d(n,["inputTokenLimit"]);f!=null&&p(e,["inputTokenLimit"],f);const g=d(n,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const h=d(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=d(n,["temperature"]);_!=null&&p(e,["temperature"],_);const T=d(n,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const S=d(n,["topP"]);S!=null&&p(e,["topP"],S);const w=d(n,["topK"]);w!=null&&p(e,["topK"],w);const O=d(n,["thinking"]);return O!=null&&p(e,["thinking"],O),e}function Yp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["versionId"]);l!=null&&p(e,["version"],l);const u=d(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>lM(S))),p(e,["endpoints"],T)}const f=d(n,["labels"]);f!=null&&p(e,["labels"],f);const g=d(n,["_self"]);g!=null&&p(e,["tunedModelInfo"],fD(g));const h=d(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=d(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>S)),p(e,["checkpoints"],T)}return e}function XM(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],uM(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],cM(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],VN(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function WM(n){const e={},t=d(n,["productImage"]);return t!=null&&p(e,["image"],Pi(t)),e}function jM(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const u=d(n,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const w=d(n,["labels"]);return e!==void 0&&w!=null&&p(e,["labels"],w),t}function ZM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["source"]);r!=null&&tD(r,t);const l=d(e,["config"]);return l!=null&&jM(l,t),t}function eD(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Zd(r))),p(e,["generatedImages"],i)}return e}function tD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Pi(r));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>WM(f))),p(e,["instances[0]","productImages"],u)}return t}function nD(n){const e={},t=d(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Pi(t));const i=d(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);const r=d(n,["referenceType"]);r!=null&&p(e,["referenceType"],r);const l=d(n,["maskImageConfig"]);l!=null&&p(e,["maskImageConfig"],QM(l));const u=d(n,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],FN(u));const f=d(n,["styleImageConfig"]);f!=null&&p(e,["styleImageConfig"],f);const g=d(n,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],g),e}function LS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function OS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function iD(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function sD(n){const e={},t=d(n,["image"]);return t!=null&&p(e,["image"],Pi(t)),e}function oD(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const r=d(n,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","confidenceThreshold"],l);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&p(e,["parameters","binaryColorThreshold"],f);const g=d(n,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),t}function rD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["source"]);r!=null&&lD(r,t);const l=d(e,["config"]);return l!=null&&oD(l,t),t}function aD(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>DM(r))),p(e,["generatedMasks"],i)}return e}function lD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Pi(r));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&p(e,["instances[0]","scribble"],sD(l)),t}function uD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],dM(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function cD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],OM(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],HM(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function HS(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>fM(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function dD(n){const e={},t=d(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function fD(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function hD(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function pD(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function mD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","name"],it(n,i));const r=d(e,["config"]);return r!=null&&hD(r,t),t}function gD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["config"]);return r!=null&&pD(r,t),t}function yD(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=d(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&p(e,["parameters","sampleCount"],S);const w=d(n,["mode"]);return e!==void 0&&w!=null&&p(e,["parameters","mode"],w),t}function vD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],it(n,i));const r=d(e,["image"]);r!=null&&p(t,["instances[0]","image"],Pi(r));const l=d(e,["upscaleFactor"]);l!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=d(e,["config"]);return u!=null&&yD(u,t),t}function _D(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Zd(l))),p(e,["generatedImages"],r)}return e}function TD(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Bo(i));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function ED(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Bo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function SD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["_self"],Pi(t));const i=d(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function AD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],ef(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function CD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],Pi(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function BS(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Bo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function GS(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Bo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bD(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function wD(n){const e={},t=d(n,["config"]);return t!=null&&bD(t,e),e}function ID(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function RD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&ID(i,e),e}function xD(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function ND(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["customMetadata"],l)}const r=d(n,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),t}function MD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],PD(u)),e}function DD(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&p(e,["fileName"],i);const r=d(n,["config"]);return r!=null&&ND(r,e),e}function PD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function kD(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function VD(n){const e={},t=d(n,["config"]);return t!=null&&kD(t,e),e}function UD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["fileSearchStores"],l)}return e}function FS(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>g)),p(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function LD(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&FS(i,e),e}function OD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HD="Content-Type",BD="X-Server-Timeout",GD="User-Agent",$p="x-goog-api-client",FD="1.34.0",qD=`google-genai-sdk/${FD}`,zD="v1beta1",KD="v1beta";class YD{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:zD,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:KD,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?i[r]=Object.assign(Object.assign({},i[r]),l):l!==void 0&&(i[r]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&$D(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await bT(r),new Fp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await bT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Ni(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Pe(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(_,{stream:!0});try{const O=JSON.parse(T);if("error"in O){const P=JSON.parse(JSON.stringify(O.error)),k=P.status,Q=P.code,B=`got status: ${k}. ${JSON.stringify(O)}`;if(Q>=400&&Q<600)throw new Wd({message:B,status:Q})}}catch(O){if(O.name==="ApiError")throw O}u+=T;let S=-1,w=0;for(;;){S=-1,w=0;for(const k of g){const Q=u.indexOf(k);Q!==-1&&(S===-1||Q<S)&&(S=Q,w=k.length)}if(S===-1)break;const O=u.substring(0,S);u=u.substring(S+w);const P=O.trim();if(P.startsWith(f)){const k=P.substring(f.length).trim();try{const Q=new Response(k,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Pe(new Fp(Q))}catch(Q){throw new Error(`exception parsing stream chunk ${k}. ${Q}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=qD+" "+this.clientOptions.userAgentExtra;return e[GD]=t,e[$p]=t,e[HD]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))i.append(r,l);e.timeout&&e.timeout>0&&i.append(BD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const g={file:r},h=this.getFileName(e),_=me("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const l=this.clientOptions.uploader,u=await l.stat(t),f=String(u.size),g=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&FS(i,T);const S=await this.fetchUploadUrl(h,f,g,_,T,i==null?void 0:i.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,l,u){var f;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function bT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new Wd({message:r,status:t}):new Error(r)}}function $D(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,u){const f=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],_=f[g];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[g]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[g]=h)}return f}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JD="mcp_used/unknown";let QD=!1;function qS(n){for(const e of n)if(XD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return QD}function zS(n){var e;const t=(e=n[$p])!==null&&e!==void 0?e:"";n[$p]=(t+` ${JD}`).trimStart()}function XD(n){return n!==null&&typeof n=="object"&&n instanceof km}function WD(n){return Ni(this,arguments,function*(t,i=100){let r,l=0;for(;l<i;){const u=yield Pe(t.listTools({cursor:r}));for(const f of u.tools)yield yield Pe(f),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class km{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new km(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,g=(t=void 0,Mi(WD(_))),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const T=r;u.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),xx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jD(n,e,t){const i=new Ex;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class ZD{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=n2(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(W=>{h=W}),T=e.callbacks,S=function(){h({})},w=this.apiClient,O={onopen:S,onmessage:W=>{jD(w,T.onmessage,W)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(W){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(W){}},P=this.webSocketFactory.create(g,t2(u),O);P.connect(),await _;const B={setup:{model:it(this.apiClient,e.model)}};return P.send(JSON.stringify(B)),new e2(P,this.apiClient)}}class e2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=wN(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=bN(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Aa.PLAY)}pause(){this.sendPlaybackControl(Aa.PAUSE)}stop(){this.sendPlaybackControl(Aa.STOP)}resetContext(){this.sendPlaybackControl(Aa.RESET_CONTEXT)}close(){this.conn.close()}}function t2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function n2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function s2(n,e,t){const i=new Tx;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const u=xN(l);Object.assign(i,u)}else Object.assign(i,l);e(i)}class o2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new ZD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&qS(e.config.tools)&&zS(T);const S=u2(T);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const x=this.apiClient.getApiKey();let L="BidiGenerateContent",U="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",U="access_token"),_=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${U}=${x}`}let w=()=>{};const O=new Promise(x=>{w=x}),P=e.callbacks,k=function(){var x;(x=P==null?void 0:P.onopen)===null||x===void 0||x.call(P),w({})},Q=this.apiClient,B={onopen:k,onmessage:x=>{s2(Q,P.onmessage,x)},onerror:(t=P==null?void 0:P.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=P==null?void 0:P.onclose)!==null&&i!==void 0?i:function(x){}},W=this.webSocketFactory.create(_,l2(S),B);W.connect(),await O;let re=it(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const x=this.apiClient.getProject(),L=this.apiClient.getLocation();re=`projects/${x}/locations/${L}/`+re}let he={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[bd.AUDIO]}:e.config.responseModalities=[bd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],N=[];for(const x of ce)if(this.isCallableTool(x)){const L=x;N.push(await L.tool())}else N.push(x);N.length>0&&(e.config.tools=N);const M={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?he=CN(this.apiClient,M):he=AN(this.apiClient,M),delete he.config,W.send(JSON.stringify(he)),new a2(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const r2={turnComplete:!0};class a2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ci(t.turns),e.isVertexAI()||(i=i.map(r=>jd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(i2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},r2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:RN(e)}:t={realtimeInput:IN(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function l2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function u2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wT=10;function IT(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(wa(u)){r=!0;break}if(!r)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function wa(n){return"callTool"in n&&typeof n.callTool=="function"}function c2(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>wa(r)))!==null&&i!==void 0?i:!1}function RT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(wa(i))return;const l=i;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function xT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d2 extends Os{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,l,u,f;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!c2(t)||IT(t.config))return await this.generateContentInternal(g);const h=RT(t);if(h.length>0){const P=h.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let _,T;const S=ci(g.contents),w=(l=(r=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:wT;let O=0;for(;O<w&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const P=_.candidates[0].content,k=[];for(const Q of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(wa(Q)){const W=await Q.callTool(_.functionCalls);k.push(...W)}O++,T={role:"user",parts:k},g.contents=ci(g.contents),g.contents.push(P),g.contents.push(T),xT(g.config)&&(S.push(P),S.push(T))}return xT(g.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var i,r,l,u,f;if(this.maybeMoveToResponseJsonSchem(t),IT(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=RT(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let l;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new wr(Ps.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,l,u,f,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(f=t.source)===null||f===void 0?void 0:f.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>wa(g)?await g.tool():g)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&qS(e.config.tools)){const g=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),zS(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,r;const l=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(wa(u)){const f=u,g=await f.tool();for(const h of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var t,i,r;const l=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:wT;let u=!1,f=0;const g=await this.initAfcToolsMap(e);return(function(h,_,T){return Ni(this,arguments,function*(){for(var S,w,O,P,k,Q;f<l;){u&&(f++,u=!1);const he=yield Pe(h.processParamsMaybeAddMcpUsage(T)),ce=yield Pe(h.generateContentStreamInternal(he)),N=[],M=[];try{for(var B=!0,W=(w=void 0,Mi(ce)),re;re=yield Pe(W.next()),S=re.done,!S;B=!0){P=re.value,B=!1;const x=P;if(yield yield Pe(x),x.candidates&&(!((k=x.candidates[0])===null||k===void 0)&&k.content)){M.push(x.candidates[0].content);for(const L of(Q=x.candidates[0].content.parts)!==null&&Q!==void 0?Q:[])if(f<l&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(L.functionCall.name)){const U=yield Pe(_.get(L.functionCall.name).callTool([L.functionCall]));N.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(x){w={error:x}}finally{try{!B&&!S&&(O=W.return)&&(yield Pe(O.call(W)))}finally{if(w)throw w.error}}if(N.length>0){u=!0;const x=new Xl;x.candidates=[{content:{role:"user",parts:N}}],yield yield Pe(x);const L=[];L.push(...M),L.push({role:"user",parts:N});const U=ci(T.contents).concat(L);T.contents=U}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=ST(this.apiClient,e);return f=me("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=CT(_),S=new Xl;return Object.assign(S,T),S})}else{const h=ET(this.apiClient,e);return f=me("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=AT(_),S=new Xl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=ST(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return Ni(this,arguments,function*(){var S,w,O,P;try{for(var k=!0,Q=Mi(T),B;B=yield Pe(Q.next()),S=B.done,!S;k=!0){P=B.value,k=!1;const W=P,re=CT(yield Pe(W.json()));re.sdkHttpResponse={headers:W.headers};const he=new Xl;Object.assign(he,re),yield yield Pe(he)}}catch(W){w={error:W}}finally{try{!k&&!S&&(O=Q.return)&&(yield Pe(O.call(Q)))}finally{if(w)throw w.error}}})})}else{const h=ET(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return Ni(this,arguments,function*(){var S,w,O,P;try{for(var k=!0,Q=Mi(T),B;B=yield Pe(Q.next()),S=B.done,!S;k=!0){P=B.value,k=!1;const W=P,re=AT(yield Pe(W.json()));re.sdkHttpResponse={headers:W.headers};const he=new Xl;Object.assign(he,re),yield yield Pe(he)}}catch(W){w={error:W}}finally{try{!k&&!S&&(O=Q.return)&&(yield Pe(O.call(Q)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=oM(this.apiClient,e);return f=me("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=aM(_),S=new sT;return Object.assign(S,T),S})}else{const h=sM(this.apiClient,e);return f=me("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=rM(_),S=new sT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=vM(this.apiClient,e);return f=me("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=TM(_),S=new oT;return Object.assign(S,T),S})}else{const h=yM(this.apiClient,e);return f=me("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=_M(_),S=new oT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=eM(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=tM(g),_=new ux;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=vD(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=_D(g),_=new cx;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=ZM(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=eD(g),_=new dx;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=rD(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=aD(g),_=new fx;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=LM(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Yp(_))}else{const h=UM(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Kp(_))}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=YM(this.apiClient,e);return f=me("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=JM(_),S=new rT;return Object.assign(S,T),S})}else{const h=KM(this.apiClient,e);return f=me("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=$M(_),S=new rT;return Object.assign(S,T),S})}}async update(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=gD(this.apiClient,e);return f=me("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Yp(_))}else{const h=mD(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Kp(_))}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=XN(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=jN(_),S=new aT;return Object.assign(S,T),S})}else{const h=QN(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=WN(_),S=new aT;return Object.assign(S,T),S})}}async countTokens(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=YN(this.apiClient,e);return f=me("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=JN(_),S=new lT;return Object.assign(S,T),S})}else{const h=KN(this.apiClient,e);return f=me("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=$N(_),S=new lT;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=ON(this.apiClient,e);return l=me("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=HN(g),_=new hx;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=wM(this.apiClient,e);return f=me("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=CM(_),S=new wd;return Object.assign(S,T),S})}else{const h=bM(this.apiClient,e);return f=me("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const T=AM(_),S=new wd;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f2 extends Os{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=ix(e);return f=me("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=nx(e);return f=me("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=QR(e);return l=me("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h2(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function p2(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>A2(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function m2(n,e,t){const i={},r=d(e,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&p(t,["newSessionExpireTime"],l);const u=d(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&p(t,["bidiGenerateContentSetup"],S2(n,f));const g=d(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&p(t,["fieldMask"],g),i}function g2(n,e){const t={},i=d(e,["config"]);return i!=null&&p(t,["config"],m2(n,i,t)),t}function y2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function v2(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function T2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function E2(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Pm(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const O=d(n,["systemInstruction"]);e!==void 0&&O!=null&&p(e,["setup","systemInstruction"],p2(yn(O)));const P=d(n,["tools"]);if(e!==void 0&&P!=null){let ce=Ba(P);Array.isArray(ce)&&(ce=ce.map(N=>b2(Ha(N)))),p(e,["setup","tools"],ce)}const k=d(n,["sessionResumption"]);e!==void 0&&k!=null&&p(e,["setup","sessionResumption"],C2(k));const Q=d(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","inputAudioTranscription"],Q);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const W=d(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&p(e,["setup","realtimeInputConfig"],W);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const he=d(n,["proactivity"]);if(e!==void 0&&he!=null&&p(e,["setup","proactivity"],he),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function S2(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],it(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],E2(r,t)),t}function A2(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],y2(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],v2(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],h2(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function C2(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function b2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],_2(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],T2(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function I2(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=w2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];l&&g.push(l),f.length>0&&g.push(...f),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class R2 extends Os{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=g2(this.apiClient,e);l=me("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const g=I2(f,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x2(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function N2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&x2(i,e),e}function M2(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function D2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function P2(n){const e={},t=d(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&D2(i,e),e}function k2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V2 extends Os{constructor(e){super(),this.apiClient=e,this.list=async t=>new wr(Ps.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=M2(e);return l=me("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=N2(e);r=me("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=P2(e);return l=me("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=k2(g),_=new px;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U2 extends Os{constructor(e,t=new V2(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new wr(Ps.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wD(e);return l=me("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xD(e);return l=me("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RD(e);r=me("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=VD(e);return l=me("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=UD(g),_=new mx;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=LD(e);return l=me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=OD(g),_=new gx;return Object.assign(_,h),_})}}async importFile(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=DD(e);return l=me("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=MD(g),_=new Rm;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let KS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return KS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const L2=()=>KS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Qp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class di extends Error{}class An extends di{constructor(e,t,i,r){super(`${An.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new tf({message:i,cause:Qp(t)});const l=t;return e===400?new $S(e,l,i,r):e===401?new JS(e,l,i,r):e===403?new QS(e,l,i,r):e===404?new XS(e,l,i,r):e===409?new WS(e,l,i,r):e===422?new jS(e,l,i,r):e===429?new ZS(e,l,i,r):e>=500?new eA(e,l,i,r):new An(e,l,i,r)}}class Xp extends An{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class tf extends An{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class YS extends tf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $S extends An{}class JS extends An{}class QS extends An{}class XS extends An{}class WS extends An{}class jS extends An{}class ZS extends An{}class eA extends An{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O2=/^[a-z][a-z0-9+.-]*:/i,H2=n=>O2.test(n);let Wp=n=>(Wp=Array.isArray,Wp(n));const B2=Wp;let G2=B2;const NT=G2;function F2(n){if(!n)return!0;for(const e in n)return!1;return!0}function q2(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const z2=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new di(`${n} must be an integer`);if(e<0)throw new di(`${n} must be a positive integer`);return e},K2=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y2=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const va="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const J2=()=>{var n,e,t,i,r;const l=$2();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":DT(Deno.build.os),"X-Stainless-Arch":MT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":DT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":MT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=Q2();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Q2(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,l=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const MT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",DT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let ed;const X2=()=>ed??(ed=J2());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W2(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function tA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function j2(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return tA({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function nA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Z2(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ap(n,e,t){return iA(),new File(n,e??"unknown_file",t)}function tP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const nP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",iP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&sA(n),sP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function oP(n,e,t){if(iA(),n=await n,iP(n))return n instanceof File?n:Ap([await n.arrayBuffer()],n.name);if(sP(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Ap(await jp(r),e,t)}const i=await jp(n);if(e||(e=tP(n)),!(t!=null&&t.type)){const r=i.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Ap(i,e,t)}async function jp(n){var e,t,i,r,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(sA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(nP(n))try{for(var f=!0,g=Mi(n),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const _=r;u.push(...await jp(_))}}catch(_){t={error:_}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${rP(n)}`)}return u}function rP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oA{constructor(e){this._client=e}}oA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const PT=Object.freeze(Object.create(null)),aP=(n=rA)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const l=[],u=t.reduce((_,T,S)=>{var w,O,P;/[?#]/.test(T)&&(r=!0);const k=i[S];let Q=(r?encodeURIComponent:n)(""+k);return S!==i.length&&(k==null||typeof k=="object"&&k.toString===((P=Object.getPrototypeOf((O=Object.getPrototypeOf((w=k.hasOwnProperty)!==null&&w!==void 0?w:PT))!==null&&O!==void 0?O:PT))===null||P===void 0?void 0:P.toString))&&(Q=k+"",l.push({start:_.length+T.length,length:Q.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),_+T+(S===i.length?"":Q)},""),f=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(f))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((_,T)=>_.start-T.start),l.length>0){let _=0;const T=l.reduce((S,w)=>{const O=" ".repeat(w.start-_),P="^".repeat(w.length);return _=w.start+w.length,S+O+P},"");throw new di(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),td=aP(rA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aA extends oA{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,l=Rd(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new di("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new di("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(td`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(td`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(td`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const l=t??{},{api_version:u=this._client.apiVersion}=l,f=Rd(l,["api_version"]);return this._client.get(td`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}aA._key=Object.freeze(["interactions"]);class lA extends aA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lP(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let nd;function Vm(n){let e;return(nd??(e=new globalThis.TextEncoder,nd=e.encode.bind(e)))(n)}let id;function kT(n){let e;return(id??(e=new globalThis.TextDecoder,id=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Vm(e):e;this.buffer=lP([this.buffer,t]);const i=[];let r;for(;(r=uP(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(kT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=kT(this.buffer.subarray(0,l));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}nf.NEWLINE_CHARS=new Set([`
`,"\r"]);nf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function uP(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function cP(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xd={off:0,error:200,warn:300,info:400,debug:500},VT=(n,e,t)=>{if(n){if(q2(xd,n))return n;Sn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(xd))}`)}};function jl(){}function sd(n,e,t){return!e||xd[n]>xd[t]?jl:e[n].bind(e)}const dP={error:jl,warn:jl,info:jl,debug:jl};let UT=new WeakMap;function Sn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return dP;const r=UT.get(t);if(r&&r[0]===i)return r[1];const l={error:sd("error",t,i),warn:sd("warn",t,i),info:sd("info",t,i),debug:sd("debug",t,i)};return UT.set(t,[i,l]),l}const mr=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ca{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const l=i?Sn(i):console;function u(){return Ni(this,arguments,function*(){var g,h,_,T;if(r)throw new di("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,O=Mi(fP(e,t)),P;P=yield Pe(O.next()),g=P.done,!g;w=!0){T=P.value,w=!1;const k=T;if(!S)if(k.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Pe(JSON.parse(k.data))}catch(Q){throw l.error("Could not parse message into JSON:",k.data),l.error("From chunk:",k.raw),Q}}}catch(k){h={error:k}}finally{try{!w&&!g&&(_=O.return)&&(yield Pe(_.call(O)))}finally{if(h)throw h.error}}S=!0}catch(k){if(Jp(k))return yield Pe(void 0);throw k}finally{S||t.abort()}})}return new Ca(u,t,i)}static fromReadableStream(e,t,i){let r=!1;function l(){return Ni(this,arguments,function*(){var g,h,_,T;const S=new nf,w=nA(e);try{for(var O=!0,P=Mi(w),k;k=yield Pe(P.next()),g=k.done,!g;O=!0){T=k.value,O=!1;const Q=T;for(const B of S.decode(Q))yield yield Pe(B)}}catch(Q){h={error:Q}}finally{try{!O&&!g&&(_=P.return)&&(yield Pe(_.call(P)))}finally{if(h)throw h.error}}for(const Q of S.flush())yield yield Pe(Q)})}function u(){return Ni(this,arguments,function*(){var g,h,_,T;if(r)throw new di("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,O=Mi(l()),P;P=yield Pe(O.next()),g=P.done,!g;w=!0){T=P.value,w=!1;const k=T;S||k&&(yield yield Pe(JSON.parse(k)))}}catch(k){h={error:k}}finally{try{!w&&!g&&(_=O.return)&&(yield Pe(_.call(O)))}finally{if(h)throw h.error}}S=!0}catch(k){if(Jp(k))return yield Pe(void 0);throw k}finally{S||t.abort()}})}return new Ca(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=i.next();e.push(u),t.push(u)}return l.shift()}});return[new Ca(()=>r(e),this.controller,this.client),new Ca(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return tA({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:l}=await t.next();if(l)return i.close();const u=Vm(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function fP(n,e){return Ni(this,arguments,function*(){var i,r,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new di("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new di("Attempted to iterate over a response with no body");const f=new pP,g=new nf,h=nA(n.body);try{for(var _=!0,T=Mi(hP(h)),S;S=yield Pe(T.next()),i=S.done,!i;_=!0){u=S.value,_=!1;const w=u;for(const O of g.decode(w)){const P=f.decode(O);P&&(yield yield Pe(P))}}}catch(w){r={error:w}}finally{try{!_&&!i&&(l=T.return)&&(yield Pe(l.call(T)))}finally{if(r)throw r.error}}for(const w of g.flush()){const O=f.decode(w);O&&(yield yield Pe(O))}})}function hP(n){return Ni(this,arguments,function*(){var t,i,r,l;let u=new Uint8Array;try{for(var f=!0,g=Mi(n),h;h=yield Pe(g.next()),t=h.done,!t;f=!0){l=h.value,f=!1;const _=l;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Vm(_):_;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let w;for(;(w=cP(u))!==-1;)yield yield Pe(u.slice(0,w)),u=u.slice(w)}}catch(_){i={error:_}}finally{try{!f&&!t&&(r=g.return)&&(yield Pe(r.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Pe(u))})}class pP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=mP(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function mP(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gP(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var f;if(e.options.stream)return Sn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Ca.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),h=(f=g==null?void 0:g.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return Sn(n).debug(`[${i}] response parsed`,mr({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Um extends Promise{constructor(e,t,i=gP){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Um(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uA=Symbol("brand.privateNullableHeaders");function*yP(n){if(!n)return;if(uA in n){const{values:i,nulls:r}=n;yield*i.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():NT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=NT(i[1])?i[1]:[i[1]];let u=!1;for(const f of l)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const Wl=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[l,u]of yP(i)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),u===null?(e.delete(l),t.add(f)):(e.append(l,u),t.delete(f))}}return{[uA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cp=n=>{var e,t,i,r,l,u;if(typeof globalThis.process<"u")return(i=(t=(e=qR)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cA;class sf{constructor(e){var t,i,r,l,u,f,g,{baseURL:h=Cp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Cp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Rd(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:sf.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const O="warn";this.logLevel=O,this.logLevel=(u=(l=VT(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:VT(Cp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:O,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:W2(),this.encoder=eP,this._options=w,this.apiKey=_,this.apiVersion=T,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Wl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Wl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Wl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new di(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${va}`}defaultIdempotencyKey(){return`stainless-node-retry-${L2()}`}makeStatusError(e,t,i,r){return An.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,l=H2(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return F2(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Um(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,l,u;const f=await e,g=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(f);const{req:h,url:_,timeout:T}=await this.buildRequest(f,{retryCount:g-t});await this.prepareRequest(h,{url:_,options:f});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,O=Date.now();if(Sn(this).debug(`[${S}] sending request`,mr({retryOfRequestLogID:i,method:f.method,url:_,options:f,headers:h.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new Xp;const P=new AbortController,k=await this.fetchWithTimeout(_,h,T,P).catch(Qp),Q=Date.now();if(k instanceof globalThis.Error){const W=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Xp;const re=Jp(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(t)return Sn(this).info(`[${S}] connection ${re?"timed out":"failed"} - ${W}`),Sn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (${W})`,mr({retryOfRequestLogID:i,url:_,durationMs:Q-O,message:k.message})),this.retryRequest(f,t,i??S);throw Sn(this).info(`[${S}] connection ${re?"timed out":"failed"} - error; no more retries left`),Sn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (error; no more retries left)`,mr({retryOfRequestLogID:i,url:_,durationMs:Q-O,message:k.message})),re?new YS:new tf({cause:k})}const B=`[${S}${w}] ${h.method} ${_} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${Q-O}ms`;if(!k.ok){const W=await this.shouldRetry(k);if(t&&W){const x=`retrying, ${t} attempts remaining`;return await Z2(k.body),Sn(this).info(`${B} - ${x}`),Sn(this).debug(`[${S}] response error (${x})`,mr({retryOfRequestLogID:i,url:k.url,status:k.status,headers:k.headers,durationMs:Q-O})),this.retryRequest(f,t,i??S,k.headers)}const re=W?"error; no more retries left":"error; not retryable";Sn(this).info(`${B} - ${re}`);const he=await k.text().catch(x=>Qp(x).message),ce=K2(he),N=ce?void 0:he;throw Sn(this).debug(`[${S}] response error (${re})`,mr({retryOfRequestLogID:i,url:k.url,status:k.status,headers:k.headers,message:N,durationMs:Date.now()-O})),this.makeStatusError(k.status,ce,N,k.headers)}return Sn(this).info(B),Sn(this).debug(`[${S}] response start`,mr({retryOfRequestLogID:i,url:k.url,status:k.status,headers:k.headers,durationMs:Q-O})),{response:k,options:f,controller:P,requestLogID:S,retryOfRequestLogID:i,startTime:O}}async fetchWithTimeout(e,t,i,r){const l=t||{},{signal:u,method:f}=l,g=Rd(l,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);f&&(T.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var l;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await Y2(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,l;const u=Object.assign({},e),{method:f,path:g,query:h,defaultBaseURL:_}=u,T=this.buildURL(g,h,_);"timeout"in u&&z2("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:u}),O=await this.buildHeaders({options:e,method:f,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:O},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=Wl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),X2()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Wl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:j2(e)}:this.encoder({body:e,headers:i})}}sf.DEFAULT_TIMEOUT=6e4;class nn extends sf{constructor(){super(...arguments),this.interactions=new lA(this)}}cA=nn;nn.GeminiNextGenAPIClient=cA;nn.GeminiNextGenAPIClientError=di;nn.APIError=An;nn.APIConnectionError=tf;nn.APIConnectionTimeoutError=YS;nn.APIUserAbortError=Xp;nn.NotFoundError=XS;nn.ConflictError=WS;nn.RateLimitError=ZS;nn.BadRequestError=$S;nn.AuthenticationError=JS;nn.InternalServerError=eA;nn.PermissionDeniedError=QS;nn.UnprocessableEntityError=jS;nn.toFile=oP;nn.Interactions=lA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function _P(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function TP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function EP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function SP(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","batchSize"],f);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function AP(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec"],LT(w))}else if(r==="PREFERENCE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec"],LT(w))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const u=d(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=d(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let _=d(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(_==="PREFERENCE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["beta"]);return e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function CP(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&VP(l);const u=d(n,["config"]);return u!=null&&SP(u,t),t}function bP(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&UP(l,t,e);const u=d(n,["config"]);return u!=null&&AP(u,t,e),t}function wP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function IP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function RP(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function xP(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function NP(n,e){const t={},i=d(n,["config"]);return i!=null&&RP(i,t),t}function MP(n,e){const t={},i=d(n,["config"]);return i!=null&&xP(i,t),t}function DP(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>dA(f))),p(t,["tuningJobs"],u)}return t}function PP(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>Zp(f))),p(t,["tuningJobs"],u)}return t}function kP(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["model"],i);const r=d(n,["name"]);return r!=null&&p(t,["endpoint"],r),t}function VP(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(t,["examples","examples"],r)}return t}function UP(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function dA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],IS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["tuningTask","completeTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["description"]);_!=null&&p(t,["description"],_);const T=d(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const S=d(n,["_self"]);return S!=null&&p(t,["tunedModel"],kP(S)),t}function Zp(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],IS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["error"]);_!=null&&p(t,["error"],_);const T=d(n,["description"]);T!=null&&p(t,["description"],T);const S=d(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const w=d(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const O=d(n,["preTunedModel"]);O!=null&&p(t,["preTunedModel"],O);const P=d(n,["supervisedTuningSpec"]);P!=null&&p(t,["supervisedTuningSpec"],P);const k=d(n,["preferenceOptimizationSpec"]);k!=null&&p(t,["preferenceOptimizationSpec"],k);const Q=d(n,["tuningDataStats"]);Q!=null&&p(t,["tuningDataStats"],Q);const B=d(n,["encryptionSpec"]);B!=null&&p(t,["encryptionSpec"],B);const W=d(n,["partnerModelTuningSpec"]);W!=null&&p(t,["partnerModelTuningSpec"],W);const re=d(n,["customBaseModel"]);re!=null&&p(t,["customBaseModel"],re);const he=d(n,["experiment"]);he!=null&&p(t,["experiment"],he);const ce=d(n,["labels"]);ce!=null&&p(t,["labels"],ce);const N=d(n,["outputUri"]);N!=null&&p(t,["outputUri"],N);const M=d(n,["pipelineJob"]);M!=null&&p(t,["pipelineJob"],M);const x=d(n,["serviceAccount"]);x!=null&&p(t,["serviceAccount"],x);const L=d(n,["tunedModelDisplayName"]);L!=null&&p(t,["tunedModelDisplayName"],L);const U=d(n,["veoTuningSpec"]);return U!=null&&p(t,["veoTuningSpec"],U),t}function LP(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(n,["done"]);u!=null&&p(t,["done"],u);const f=d(n,["error"]);return f!=null&&p(t,["error"],f),t}function LT(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const r=d(n,["vertexDatasetResource"]);return r!=null&&p(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OP extends Os{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new wr(Ps.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Gp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=IP(e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>Zp(_))}else{const h=wP(e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>dA(_))}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=MP(e);return f=me("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=PP(_),S=new uT;return Object.assign(S,T),S})}else{const h=NP(e);return f=me("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=DP(_),S=new uT;return Object.assign(S,T),S})}}async cancel(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=_P(e);return f=me("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=EP(_),S=new cT;return Object.assign(S,T),S})}else{const h=vP(e);return f=me("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=TP(_),S=new cT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=bP(e,e);return l=me("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>Zp(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=CP(e);return l=me("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>LP(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HP{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const BP=1024*1024*8,GP=3,FP=1e3,qP=2,Nd="x-goog-upload-status";async function zP(n,e,t){var i;const r=await fA(n,e,t),l=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Nd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function KP(n,e,t){var i;const r=await fA(n,e,t),l=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Nd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=ES(l),f=new xm;return Object.assign(f,u),f}async function fA(n,e,t){var i,r;let l=0,u=0,f=new Fp(new Response),g="upload";for(l=n.size;u<l;){const h=Math.min(BP,l-u),_=n.slice(u,u+h);u+h>=l&&(g+=", finalize");let T=0,S=FP;for(;T<GP&&(f=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Nd]));)T++,await $P(S),S=S*qP;if(u+=h,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[Nd])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function YP(n){return{size:n.size,type:n.type}}function $P(n){return new Promise(e=>setTimeout(e,n))}class JP{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zP(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KP(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QP{create(e,t,i){return new XP(e,t,i)}}class XP{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OT="x-goog-api-key";class WP{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(OT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(OT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jP="gl-node/";class ZP{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new nn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=$R(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new WP(this.apiKey);this.apiClient=new YD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:jP+"web",uploader:new JP,downloader:new HP}),this.models=new d2(this.apiClient),this.live=new o2(this.apiClient,r,new QP),this.batches=new S1(this.apiClient),this.chats=new iN(this.models,this.apiClient),this.caches=new eN(this.apiClient),this.files=new hN(this.apiClient),this.operations=new f2(this.apiClient),this.authTokens=new R2(this.apiClient),this.tunings=new OP(this.apiClient),this.fileSearchStores=new U2(this.apiClient)}}const Lm=n=>new ZP({apiKey:n}),ek=async(n,e)=>{if(!e)return"Error: API Key is missing.";const t=Lm(e);try{return(await t.models.generateContent({model:"gemini-3-flash-preview",contents:JSON.stringify(n),config:{systemInstruction:bm,temperature:.3}})).text||"Error: No response generated."}catch(i){return console.error("Error generating note:",i),"Error generating note. Please check the console for details."}},tk=async(n,e,t,i)=>{if(!i)return e;const r=Lm(i),l=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT MEDICAL NOTE DRAFT:
    """
    ${e}
    """
    
    USER REFINEMENT INSTRUCTION:
    "${t}"
    
    CRITICAL RULES:
    1. PRIORITY: Adhere to user instructions while maintaining the facts in the ORIGINAL DATA SOURCE.
    2. CONSISTENCY: Maintain all formatting rules (Vitals order, "denied" list, etc.) from the system instructions.
    3. OUTPUT: Provide ONLY the full updated medical note. No conversational filler.
  `;try{return(await r.models.generateContent({model:"gemini-3-flash-preview",contents:l,config:{systemInstruction:bm,temperature:.4}})).text||e}catch(u){return console.error("Error refining full note:",u),e}},nk=async(n,e,t,i,r)=>{var f;if(!r)return t;const l=Lm(r),u=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT FULL NOTE:
    """
    ${e}
    """
    
    The user wants to rewrite the following SPECIFIC SEGMENT:
    "--- ${t} ---"
    
    USER INSTRUCTION FOR THIS SEGMENT:
    "${i}"
    
    CRITICAL RULES:
    1. PRIORITY: User instructions are the highest priority. If the user asks to change the format or tone for this segment, follow it exactly.
    2. MEDICAL STANDARDS: Unless the user explicitly asks to break medical conventions, maintain the standards defined in the original system instructions (e.g., Vitals order, forbidden abbreviations, academic tone).
    3. SCOPE: ONLY rewrite the selected segment. Do not change parts of the note outside of this segment.
    4. OUTPUT: Provide ONLY the new rewritten text for that segment. Do not include any explanations or conversational filler.
  `;try{return((f=(await l.models.generateContent({model:"gemini-3-flash-preview",contents:u,config:{systemInstruction:bm,temperature:.4}})).text)==null?void 0:f.trim())||t}catch(g){return console.error("Error refining segment:",g),t}},ik=()=>{};var HT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},sk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[i++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],u=n[t++],f=n[t++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},pA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const l=n[r],u=r+1<n.length,f=u?n[r+1]:0,g=r+2<n.length,h=g?n[r+2]:0,_=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|h>>6,w=h&63;g||(w=64,u||(S=64)),i.push(t[_],t[T],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||f==null||h==null||T==null)throw new ok;const S=l<<2|f>>4;if(i.push(S),h!==64){const w=f<<4&240|h>>2;if(i.push(w),T!==64){const O=h<<6&192|T;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ok extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rk=function(n){const e=hA(n);return pA.encodeByteArray(e,!0)},Md=function(n){return rk(n).replace(/\./g,"")},mA=function(n){try{return pA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=()=>ak().__FIREBASE_DEFAULTS__,uk=()=>{if(typeof process>"u"||typeof HT>"u")return;const n=HT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ck=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&mA(n[1]);return e&&JSON.parse(e)},of=()=>{try{return ik()||lk()||uk()||ck()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gA=n=>{var e,t;return(t=(e=of())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},dk=n=>{const e=gA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},yA=()=>{var n;return(n=of())==null?void 0:n.config},vA=n=>{var e;return(e=of())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _A(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Md(JSON.stringify(t)),Md(JSON.stringify(u)),""].join(".")}const su={};function pk(){const n={prod:[],emulator:[]};for(const e of Object.keys(su))su[e]?n.emulator.push(e):n.prod.push(e);return n}function mk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let BT=!1;function TA(n,e){if(typeof window>"u"||typeof document>"u"||!Fa(window.location.host)||su[n]===e||su[n]||BT)return;su[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=pk().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{BT=!0,u()},S}function _(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=mk(i),w=t("text"),O=document.getElementById(w)||document.createElement("span"),P=t("learnmore"),k=document.getElementById(P)||document.createElement("a"),Q=t("preprendIcon"),B=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;f(W),_(k,P);const re=h();g(B,Q),W.append(B,O,k,re),document.body.appendChild(W)}l?(O.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function yk(){var e;const n=(e=of())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _k(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Tk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ek(){const n=vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Sk(){return!yk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ak(){try{return typeof indexedDB=="object"}catch{return!1}}function Ck(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="FirebaseError";class Bs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=bk,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Su.prototype.create)}}class Su{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?wk(l,i):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new Bs(r,f,i)}}function wk(n,e){return n.replace(Ik,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Ik=/\{\$([^}]+)}/g;function Rk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Er(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const l=n[r],u=e[r];if(GT(l)&&GT(u)){if(!Er(l,u))return!1}else if(l!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function GT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function xk(n,e){const t=new Nk(n,e);return t.subscribe.bind(t)}class Nk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Mk(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=bp),r.error===void 0&&(r.error=bp),r.complete===void 0&&(r.complete=bp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(n){return n&&n._delegate?n._delegate:n}class Sr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new fk;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kk(e))try{this.getOrInitializeService({instanceIdentifier:gr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});i.resolve(l)}catch{}}}}clearInstance(e=gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gr){return this.instances.has(e)}getOptions(e=gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const l=this.instances.get(i);return l&&e(l,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Pk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gr){return this.component?this.component.multipleInstances?e:gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pk(n){return n===gr?void 0:n}function kk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Dk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const Uk={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},Lk=Qe.INFO,Ok={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},Hk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Ok[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Om{constructor(e){this.name=e,this._logLevel=Lk,this._logHandler=Hk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Uk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const Bk=(n,e)=>e.some(t=>n instanceof t);let FT,qT;function Gk(){return FT||(FT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fk(){return qT||(qT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EA=new WeakMap,em=new WeakMap,SA=new WeakMap,wp=new WeakMap,Hm=new WeakMap;function qk(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(xo(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&EA.set(t,n)}).catch(()=>{}),Hm.set(e,n),e}function zk(n){if(em.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});em.set(n,e)}let tm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return em.get(n);if(e==="objectStoreNames")return n.objectStoreNames||SA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Kk(n){tm=n(tm)}function Yk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Ip(this),e,...t);return SA.set(i,e.sort?e.sort():[e]),xo(i)}:Fk().includes(n)?function(...e){return n.apply(Ip(this),e),xo(EA.get(this))}:function(...e){return xo(n.apply(Ip(this),e))}}function $k(n){return typeof n=="function"?Yk(n):(n instanceof IDBTransaction&&zk(n),Bk(n,Gk())?new Proxy(n,tm):n)}function xo(n){if(n instanceof IDBRequest)return qk(n);if(wp.has(n))return wp.get(n);const e=$k(n);return e!==n&&(wp.set(n,e),Hm.set(e,n)),e}const Ip=n=>Hm.get(n);function Jk(n,e,{blocked:t,upgrade:i,blocking:r,terminated:l}={}){const u=indexedDB.open(n,e),f=xo(u);return i&&u.addEventListener("upgradeneeded",g=>{i(xo(u.result),g.oldVersion,g.newVersion,xo(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const Qk=["get","getKey","getAll","getAllKeys","count"],Xk=["put","add","delete","clear"],Rp=new Map;function zT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Rp.get(e))return Rp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=Xk.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Qk.includes(t)))return;const l=async function(u,...f){const g=this.transaction(u,r?"readwrite":"readonly");let h=g.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),r&&g.done]))[0]};return Rp.set(e,l),l}Kk(n=>({...n,get:(e,t,i)=>zT(e,t)||n.get(e,t,i),has:(e,t)=>!!zT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jk(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function jk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nm="@firebase/app",KT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Om("@firebase/app"),Zk="@firebase/app-compat",eV="@firebase/analytics-compat",tV="@firebase/analytics",nV="@firebase/app-check-compat",iV="@firebase/app-check",sV="@firebase/auth",oV="@firebase/auth-compat",rV="@firebase/database",aV="@firebase/data-connect",lV="@firebase/database-compat",uV="@firebase/functions",cV="@firebase/functions-compat",dV="@firebase/installations",fV="@firebase/installations-compat",hV="@firebase/messaging",pV="@firebase/messaging-compat",mV="@firebase/performance",gV="@firebase/performance-compat",yV="@firebase/remote-config",vV="@firebase/remote-config-compat",_V="@firebase/storage",TV="@firebase/storage-compat",EV="@firebase/firestore",SV="@firebase/ai",AV="@firebase/firestore-compat",CV="firebase",bV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",wV={[nm]:"fire-core",[Zk]:"fire-core-compat",[tV]:"fire-analytics",[eV]:"fire-analytics-compat",[iV]:"fire-app-check",[nV]:"fire-app-check-compat",[sV]:"fire-auth",[oV]:"fire-auth-compat",[rV]:"fire-rtdb",[aV]:"fire-data-connect",[lV]:"fire-rtdb-compat",[uV]:"fire-fn",[cV]:"fire-fn-compat",[dV]:"fire-iid",[fV]:"fire-iid-compat",[hV]:"fire-fcm",[pV]:"fire-fcm-compat",[mV]:"fire-perf",[gV]:"fire-perf-compat",[yV]:"fire-rc",[vV]:"fire-rc-compat",[_V]:"fire-gcs",[TV]:"fire-gcs-compat",[EV]:"fire-fst",[AV]:"fire-fst-compat",[SV]:"fire-vertex","fire-js":"fire-js",[CV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new Map,IV=new Map,sm=new Map;function YT(n,e){try{n.container.addComponent(e)}catch(t){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ma(n){const e=n.name;if(sm.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;sm.set(e,n);for(const t of Dd.values())YT(t,n);for(const t of IV.values())YT(t,n);return!0}function Bm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ii(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},No=new Su("app","Firebase",RV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw No.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=bV;function AA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:im,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw No.create("bad-app-name",{appName:String(r)});if(t||(t=yA()),!t)throw No.create("no-options");const l=Dd.get(r);if(l){if(Er(t,l.options)&&Er(i,l.config))return l;throw No.create("duplicate-app",{appName:r})}const u=new Vk(r);for(const g of sm.values())u.addComponent(g);const f=new xV(t,i,u);return Dd.set(r,f),f}function CA(n=im){const e=Dd.get(n);if(!e&&n===im&&yA())return AA();if(!e)throw No.create("no-app",{appName:n});return e}function Mo(n,e,t){let i=wV[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(u.join(" "));return}Ma(new Sr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV="firebase-heartbeat-database",MV=1,fu="firebase-heartbeat-store";let xp=null;function bA(){return xp||(xp=Jk(NV,MV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fu)}catch(t){console.warn(t)}}}}).catch(n=>{throw No.create("idb-open",{originalErrorMessage:n.message})})),xp}async function DV(n){try{const t=(await bA()).transaction(fu),i=await t.objectStore(fu).get(wA(n));return await t.done,i}catch(e){if(e instanceof Bs)ks.warn(e.message);else{const t=No.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(t.message)}}}async function $T(n,e){try{const i=(await bA()).transaction(fu,"readwrite");await i.objectStore(fu).put(e,wA(n)),await i.done}catch(t){if(t instanceof Bs)ks.warn(t.message);else{const i=No.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ks.warn(i.message)}}}function wA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=1024,kV=30;class VV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LV(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=JT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>kV){const u=OV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ks.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=JT(),{heartbeatsToSend:i,unsentEntries:r}=UV(this._heartbeatsCache.heartbeats),l=Md(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ks.warn(t),""}}}function JT(){return new Date().toISOString().substring(0,10)}function UV(n,e=PV){const t=[];let i=n.slice();for(const r of n){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),QT(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),QT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class LV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ak()?Ck().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await DV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return $T(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return $T(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function QT(n){return Md(JSON.stringify({version:2,heartbeats:n})).length}function OV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(n){Ma(new Sr("platform-logger",e=>new Wk(e),"PRIVATE")),Ma(new Sr("heartbeat",e=>new VV(e),"PRIVATE")),Mo(nm,KT,n),Mo(nm,KT,"esm2020"),Mo("fire-js","")}HV("");function IA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BV=IA,RA=new Su("auth","Firebase",IA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Om("@firebase/auth");function GV(n,...e){Pd.logLevel<=Qe.WARN&&Pd.warn(`Auth (${qa}): ${n}`,...e)}function pd(n,...e){Pd.logLevel<=Qe.ERROR&&Pd.error(`Auth (${qa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,...e){throw Fm(n,...e)}function Di(n,...e){return Fm(n,...e)}function Gm(n,e,t){const i={...BV(),[e]:t};return new Su("auth","Firebase",i).create(e,{appName:n.name})}function _r(n){return Gm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FV(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&os(n,"argument-error"),Gm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return RA.create(n,...e)}function De(n,e,...t){if(!n)throw Fm(e,...t)}function Ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pd(e),new Error(e)}function Vs(n,e){n||Ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function qV(){return XT()==="http:"||XT()==="https:"}function XT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qV()||_k()||"connection"in navigator)?navigator.onLine:!0}function KV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vs(t>e,"Short delay should be less than long delay!"),this.isMobile=gk()||Tk()}get(){return zV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(n,e){Vs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JV=new Cu(3e4,6e4);function zm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function za(n,e,t,i,r={}){return NA(n,r,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=Au({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:g,...l};return vk()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Fa(n.emulatorConfig.host)&&(h.credentials="include"),xA.fetch()(await MA(n,n.config.apiHost,t,f),h)})}async function NA(n,e,t){n._canInitEmulator=!1;const i={...YV,...e};try{const r=new XV(n),l=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw od(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[g,h]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw od(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw od(n,"user-disabled",u);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Gm(n,_,h);os(n,_)}}catch(r){if(r instanceof Bs)throw r;os(n,"network-request-failed",{message:String(r)})}}async function QV(n,e,t,i,r={}){const l=await za(n,e,t,i,r);return"mfaPendingCredential"in l&&os(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function MA(n,e,t,i){const r=`${e}${t}?${i}`,l=n,u=l.config.emulator?qm(n.config,r):`${n.config.apiScheme}://${r}`;return $V.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class XV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Di(this.auth,"network-request-failed")),JV.get())})}}function od(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Di(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(n,e){return za(n,"POST","/v1/accounts:delete",e)}async function kd(n,e){return za(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jV(n,e=!1){const t=fi(n),i=await t.getIdToken(e),r=Km(i);De(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const l=typeof r.firebase=="object"?r.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:r,token:i,authTime:ou(Np(r.auth_time)),issuedAtTime:ou(Np(r.iat)),expirationTime:ou(Np(r.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Np(n){return Number(n)*1e3}function Km(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return pd("JWT malformed, contained fewer than 3 sections"),null;try{const r=mA(t);return r?JSON.parse(r):(pd("Failed to decode base64 JWT payload"),null)}catch(r){return pd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function WT(n){const e=Km(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Bs&&ZV(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function ZV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(n){var T;const e=n.auth,t=await n.getIdToken(),i=await hu(n,kd(e,{idToken:t}));De(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const l=(T=r.providerUserInfo)!=null&&T.length?DA(r.providerUserInfo):[],u=nU(n.providerData,l),f=n.isAnonymous,g=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),h=f?g:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new rm(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function tU(n){const e=fi(n);await Vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nU(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function DA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iU(n,e){const t=await NA(n,{},async()=>{const i=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:l}=n.config,u=await MA(n,r,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return n.emulatorConfig&&Fa(n.emulatorConfig.host)&&(g.credentials="include"),xA.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sU(n,e){return za(n,"POST","/v2/accounts:revokeToken",zm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=WT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:l}=await iU(e,t);this.updateTokensAndExpiration(i,r,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:l}=t,u=new Ia;return i&&(De(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(De(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),l&&(De(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return Ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ri{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new eU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new rm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await hu(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jV(this,e)}reload(){return tU(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Vd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ii(this.auth.app))return Promise.reject(_r(this.auth));const e=await this.getIdToken();return await hu(this,WV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:w,providerData:O,stsTokenManager:P}=t;De(T&&P,e,"internal-error");const k=Ia.fromJSON(this.name,P);De(typeof T=="string",e,"internal-error"),Ao(i,e.name),Ao(r,e.name),De(typeof S=="boolean",e,"internal-error"),De(typeof w=="boolean",e,"internal-error"),Ao(l,e.name),Ao(u,e.name),Ao(f,e.name),Ao(g,e.name),Ao(h,e.name),Ao(_,e.name);const Q=new Ri({uid:T,auth:e,email:r,emailVerified:S,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:k,createdAt:h,lastLoginAt:_});return O&&Array.isArray(O)&&(Q.providerData=O.map(B=>({...B}))),g&&(Q._redirectEventId=g),Q}static async _fromIdTokenResponse(e,t,i=!1){const r=new Ia;r.updateFromServerResponse(t);const l=new Ri({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Vd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];De(r.localId!==void 0,"internal-error");const l=r.providerUserInfo!==void 0?DA(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(l!=null&&l.length),f=new Ia;f.updateFromIdToken(i);const g=new Ri({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new rm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,h),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=new Map;function Ms(n){Vs(n instanceof Function,"Expected a class definition");let e=jT.get(n);return e?(Vs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}PA.type="NONE";const ZT=PA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n,e,t){return`firebase:${n}:${e}:${t}`}class Ra{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:l}=this.auth;this.fullUserKey=md(this.userKey,r.apiKey,l),this.fullPersistenceKey=md("persistence",r.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kd(this.auth,{idToken:e}).catch(()=>{});return t?Ri._fromGetAccountInfoResponse(this.auth,t,e):null}return Ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ra(Ms(ZT),e,i);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let l=r[0]||Ms(ZT);const u=md(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const _=await h._get(u);if(_){let T;if(typeof _=="string"){const S=await kd(e,{idToken:_}).catch(()=>{});if(!S)break;T=await Ri._fromGetAccountInfoResponse(e,S,_)}else T=Ri._fromJSON(e,_);h!==l&&(f=T),l=h;break}}catch{}const g=r.filter(h=>h._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ra(l,e,i):(l=g[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==l)try{await h._remove(u)}catch{}})),new Ra(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HA(e))return"Blackberry";if(BA(e))return"Webos";if(VA(e))return"Safari";if((e.includes("chrome/")||UA(e))&&!e.includes("edge/"))return"Chrome";if(OA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function kA(n=vn()){return/firefox\//i.test(n)}function VA(n=vn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UA(n=vn()){return/crios\//i.test(n)}function LA(n=vn()){return/iemobile/i.test(n)}function OA(n=vn()){return/android/i.test(n)}function HA(n=vn()){return/blackberry/i.test(n)}function BA(n=vn()){return/webos/i.test(n)}function Ym(n=vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oU(n=vn()){var e;return Ym(n)&&!!((e=window.navigator)!=null&&e.standalone)}function rU(){return Ek()&&document.documentMode===10}function GA(n=vn()){return Ym(n)||OA(n)||BA(n)||HA(n)||/windows phone/i.test(n)||LA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(n,e=[]){let t;switch(n){case"Browser":t=eE(vn());break;case"Worker":t=`${eE(vn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const g=e(l);u(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(n,e={}){return za(n,"GET","/v2/passwordPolicy",zm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=6;class cU{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??uU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tE(this),this.idTokenSubscription=new tE(this),this.beforeStateQueue=new aU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ms(t)),this._initializationPromise=this.queue(async()=>{var i,r,l;if(!this._deleted&&(this.persistenceManager=await Ra.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kd(this,{idToken:e}),i=await Ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ii(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===f)&&(g!=null&&g.user)&&(i=g.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ii(this.app))return Promise.reject(_r(this));const t=e?fi(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ii(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ii(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lU(this),t=new cU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Su("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await sU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ms(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Ra.create(this,[Ms(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,r);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&GV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function rf(n){return fi(n)}class tE{constructor(e){this.auth=e,this.observer=null,this.addObserver=xk(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $m={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fU(n){$m=n}function hU(n){return $m.loadJS(n)}function pU(){return $m.gapiScript}function mU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(n,e){const t=Bm(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),l=t.getOptions();if(Er(l,e??{}))return r;os(r,"already-initialized")}return t.initialize({options:e})}function yU(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ms);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function vU(n,e,t){const i=rf(n);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,l=qA(e),{host:u,port:f}=_U(e),g=f===null?"":`:${f}`,h={url:`${l}//${u}${g}/`},_=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Er(h,i.config.emulator)&&Er(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Fa(u)?(_A(`${l}//${u}${g}`),TA("Auth",!0)):TU()}function qA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _U(n){const e=qA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const l=r[1];return{host:l,port:nE(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:nE(u)}}}function nE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function TU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ns("not implemented")}_getIdTokenResponse(e){return Ns("not implemented")}_linkToIdToken(e,t){return Ns("not implemented")}_getReauthenticationResolver(e){return Ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(n,e){return QV(n,"POST","/v1/accounts:signInWithIdp",zm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU="http://localhost";class Ar extends zA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ar(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):os("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...l}=t;if(!i||!r)return null;const u=new Ar(i,r);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return xa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,xa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xa(e,t)}buildRequest(){const e={requestUri:EU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Jm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends bu{constructor(){super("facebook.com")}static credential(e){return Ar._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Co.credential(e.oauthAccessToken)}catch{return null}}}Co.FACEBOOK_SIGN_IN_METHOD="facebook.com";Co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ar._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return xs.credential(t,i)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends bu{constructor(){super("github.com")}static credential(e){return Ar._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bo.credential(e.oauthAccessToken)}catch{return null}}}bo.GITHUB_SIGN_IN_METHOD="github.com";bo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends bu{constructor(){super("twitter.com")}static credential(e,t){return Ar._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return wo.credential(t,i)}catch{return null}}}wo.TWITTER_SIGN_IN_METHOD="twitter.com";wo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const l=await Ri._fromIdTokenResponse(e,i,r),u=iE(i);return new Da({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=iE(i);return new Da({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function iE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends Bs{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ud.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Ud(e,t,i,r)}}function KA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ud._fromErrorAndOperation(n,l,e,i):l})}async function SU(n,e,t=!1){const i=await hu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Da._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(n,e,t=!1){const{auth:i}=n;if(Ii(i.app))return Promise.reject(_r(i));const r="reauthenticate";try{const l=await hu(n,KA(i,r,e,n),t);De(l.idToken,i,"internal-error");const u=Km(l.idToken);De(u,i,"internal-error");const{sub:f}=u;return De(n.uid===f,i,"user-mismatch"),Da._forOperation(n,r,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&os(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(n,e,t=!1){if(Ii(n.app))return Promise.reject(_r(n));const i="signIn",r=await KA(n,i,e),l=await Da._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(l.user),l}function bU(n,e,t,i){return fi(n).onIdTokenChanged(e,t,i)}function wU(n,e,t){return fi(n).beforeAuthStateChanged(e,t)}function IU(n,e,t,i){return fi(n).onAuthStateChanged(e,t,i)}function RU(n){return fi(n).signOut()}const Ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=1e3,NU=10;class $A extends YA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);rU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,NU):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},xU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$A.type="LOCAL";const MU=$A;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA extends YA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}JA.type="SESSION";const QA=JA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new af(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:l}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const f=Array.from(u).map(async h=>h(t.origin,l)),g=await DU(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let l,u;return new Promise((f,g)=>{const h=Qm("",20);r.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function kU(n){es().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function VU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function LU(){return XA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="firebaseLocalStorageDb",OU=1,Od="firebaseLocalStorage",jA="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lf(n,e){return n.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function HU(){const n=indexedDB.deleteDatabase(WA);return new wu(n).toPromise()}function am(){const n=indexedDB.open(WA,OU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Od,{keyPath:jA})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Od)?e(i):(i.close(),await HU(),e(await am()))})})}async function sE(n,e,t){const i=lf(n,!0).put({[jA]:e,value:t});return new wu(i).toPromise()}async function BU(n,e){const t=lf(n,!1).get(e),i=await new wu(t).toPromise();return i===void 0?null:i.value}function oE(n,e){const t=lf(n,!0).delete(e);return new wu(t).toPromise()}const GU=800,FU=3;class ZA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>FU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(LU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await VU(),!this.activeServiceWorker)return;this.sender=new PU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await sE(e,Ld,"1"),await oE(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>sE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>BU(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>oE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const l=lf(r,!1).getAll();return new wu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:l}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(l)&&(this.notifyListeners(r,l),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZA.type="LOCAL";const qU=ZA;new Cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(n,e){return e?Ms(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends zA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zU(n){return CU(n.auth,new Xm(n),n.bypassAuthState)}function KU(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),AU(t,new Xm(n),n.bypassAuthState)}async function YU(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),SU(t,new Xm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,i,r,l=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zU;case"linkViaPopup":case"linkViaRedirect":return YU;case"reauthViaPopup":case"reauthViaRedirect":return KU;default:os(this.auth,"internal-error")}}resolve(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=new Cu(2e3,1e4);async function JU(n,e,t){if(Ii(n.app))return Promise.reject(Di(n,"operation-not-supported-in-this-environment"));const i=rf(n);FV(n,e,Jm);const r=eC(i,t);return new yr(i,"signInViaPopup",e,r).executeNotNull()}class yr extends tC{constructor(e,t,i,r,l){super(e,t,r,l),this.provider=i,this.authWindow=null,this.pollId=null,yr.currentPopupAction&&yr.currentPopupAction.cancel(),yr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");const e=Qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$U.get())};e()}}yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU="pendingRedirect",gd=new Map;class XU extends tC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=gd.get(this.auth._key());if(!e){try{const i=await WU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}gd.set(this.auth._key(),e)}return this.bypassAuthState||gd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WU(n,e){const t=eL(e),i=ZU(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function jU(n,e){gd.set(n._key(),e)}function ZU(n){return Ms(n._redirectPersistence)}function eL(n){return md(QU,n.config.apiKey,n.name)}async function tL(n,e,t=!1){if(Ii(n.app))return Promise.reject(_r(n));const i=rf(n),r=eC(i,e),u=await new XU(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=600*1e3;class iL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!nC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nL&&this.cachedEventUids.clear(),this.cachedEventUids.has(rE(e))}saveEventToCache(e){this.cachedEventUids.add(rE(e)),this.lastProcessedEventTime=Date.now()}}function rE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(n,e={}){return za(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aL=/^https?/;async function lL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oL(n);for(const t of e)try{if(uL(t))return}catch{}os(n,"unauthorized-domain")}function uL(n){const e=om(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!aL.test(t))return!1;if(rL.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new Cu(3e4,6e4);function aE(){const n=es().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dL(n){return new Promise((e,t)=>{var r,l,u;function i(){aE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aE(),t(Di(n,"network-request-failed"))},timeout:cL.get()})}if((l=(r=es().gapi)==null?void 0:r.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=es().gapi)!=null&&u.load)i();else{const f=mU("iframefcb");return es()[f]=()=>{gapi.load?i():t(Di(n,"network-request-failed"))},hU(`${pU()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw yd=null,e})}let yd=null;function fL(n){return yd=yd||dL(n),yd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Cu(5e3,15e3),pL="__/auth/iframe",mL="emulator/auth/iframe",gL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vL(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qm(e,mL):`https://${n.config.authDomain}/${pL}`,i={apiKey:e.apiKey,appName:n.name,v:qa},r=yL.get(n.config.apiHost);r&&(i.eid=r);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Au(i).slice(1)}`}async function _L(n){const e=await fL(n),t=es().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:vL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gL,dontclear:!0},i=>new Promise(async(r,l)=>{await i.restyle({setHideOnLeave:!1});const u=Di(n,"network-request-failed"),f=es().setTimeout(()=>{l(u)},hL.get());function g(){es().clearTimeout(f),r(i)}i.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EL=500,SL=600,AL="_blank",CL="http://localhost";class lE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bL(n,e,t,i=EL,r=SL){const l=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...TL,width:i.toString(),height:r.toString(),top:l,left:u},h=vn().toLowerCase();t&&(f=UA(h)?AL:t),kA(h)&&(e=e||CL,g.scrollbars="yes");const _=Object.entries(g).reduce((S,[w,O])=>`${S}${w}=${O},`,"");if(oU(h)&&f!=="_self")return wL(e||"",f),new lE(null);const T=window.open(e||"",f,_);De(T,n,"popup-blocked");try{T.focus()}catch{}return new lE(T)}function wL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="__/auth/handler",RL="emulator/auth/handler",xL=encodeURIComponent("fac");async function uE(n,e,t,i,r,l){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:qa,eventId:r};if(e instanceof Jm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Rk(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))u[_]=T}if(e instanceof bu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const g=await n._getAppCheckToken(),h=g?`#${xL}=${encodeURIComponent(g)}`:"";return`${NL(n)}?${Au(f).slice(1)}${h}`}function NL({config:n}){return n.emulator?qm(n,RL):`https://${n.authDomain}/${IL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="webStorageSupport";class ML{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QA,this._completeRedirectFn=tL,this._overrideRedirectResult=jU}async _openPopup(e,t,i,r){var u;Vs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await uE(e,t,i,om(),r);return bL(e,l,Qm())}async _openRedirect(e,t,i,r){await this._originValidation(e);const l=await uE(e,t,i,om(),r);return kU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:l}=this.eventManagers[t];return r?Promise.resolve(r):(Vs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await _L(e),i=new iL(e);return t.register("authEvent",r=>(De(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mp,{type:Mp},r=>{var u;const l=(u=r==null?void 0:r[0])==null?void 0:u[Mp];l!==void 0&&t(!!l),os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GA()||VA()||Ym()}}const DL=ML;var cE="@firebase/auth",dE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VL(n){Ma(new Sr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;De(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FA(n)},h=new dU(i,r,l,g);return yU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ma(new Sr("auth-internal",e=>{const t=rf(e.getProvider("auth").getImmediate());return(i=>new PL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mo(cE,dE,kL(n)),Mo(cE,dE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=300,LL=vA("authIdTokenMaxAge")||UL;let fE=null;const OL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>LL)return;const r=t==null?void 0:t.token;fE!==r&&(fE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function HL(n=CA()){const e=Bm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=gU(n,{popupRedirectResolver:DL,persistence:[qU,MU,QA]}),i=vA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=OL(l.toString());wU(t,u,()=>u(t.currentUser)),bU(t,f=>u(f))}}const r=gA("auth");return r&&vU(t,`http://${r}`),t}function BL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}fU({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const l=Di("internal-error");l.customData=r,t(l)},i.type="text/javascript",i.charset="UTF-8",BL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VL("Browser");var hE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Do,iC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,M){function x(){}x.prototype=M.prototype,N.F=M.prototype,N.prototype=new x,N.prototype.constructor=N,N.D=function(L,U,q){for(var D=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)D[Ve-2]=arguments[Ve];return M.prototype[U].apply(L,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,M,x){x||(x=0);const L=Array(16);if(typeof M=="string")for(var U=0;U<16;++U)L[U]=M.charCodeAt(x++)|M.charCodeAt(x++)<<8|M.charCodeAt(x++)<<16|M.charCodeAt(x++)<<24;else for(U=0;U<16;++U)L[U]=M[x++]|M[x++]<<8|M[x++]<<16|M[x++]<<24;M=N.g[0],x=N.g[1],U=N.g[2];let q=N.g[3],D;D=M+(q^x&(U^q))+L[0]+3614090360&4294967295,M=x+(D<<7&4294967295|D>>>25),D=q+(U^M&(x^U))+L[1]+3905402710&4294967295,q=M+(D<<12&4294967295|D>>>20),D=U+(x^q&(M^x))+L[2]+606105819&4294967295,U=q+(D<<17&4294967295|D>>>15),D=x+(M^U&(q^M))+L[3]+3250441966&4294967295,x=U+(D<<22&4294967295|D>>>10),D=M+(q^x&(U^q))+L[4]+4118548399&4294967295,M=x+(D<<7&4294967295|D>>>25),D=q+(U^M&(x^U))+L[5]+1200080426&4294967295,q=M+(D<<12&4294967295|D>>>20),D=U+(x^q&(M^x))+L[6]+2821735955&4294967295,U=q+(D<<17&4294967295|D>>>15),D=x+(M^U&(q^M))+L[7]+4249261313&4294967295,x=U+(D<<22&4294967295|D>>>10),D=M+(q^x&(U^q))+L[8]+1770035416&4294967295,M=x+(D<<7&4294967295|D>>>25),D=q+(U^M&(x^U))+L[9]+2336552879&4294967295,q=M+(D<<12&4294967295|D>>>20),D=U+(x^q&(M^x))+L[10]+4294925233&4294967295,U=q+(D<<17&4294967295|D>>>15),D=x+(M^U&(q^M))+L[11]+2304563134&4294967295,x=U+(D<<22&4294967295|D>>>10),D=M+(q^x&(U^q))+L[12]+1804603682&4294967295,M=x+(D<<7&4294967295|D>>>25),D=q+(U^M&(x^U))+L[13]+4254626195&4294967295,q=M+(D<<12&4294967295|D>>>20),D=U+(x^q&(M^x))+L[14]+2792965006&4294967295,U=q+(D<<17&4294967295|D>>>15),D=x+(M^U&(q^M))+L[15]+1236535329&4294967295,x=U+(D<<22&4294967295|D>>>10),D=M+(U^q&(x^U))+L[1]+4129170786&4294967295,M=x+(D<<5&4294967295|D>>>27),D=q+(x^U&(M^x))+L[6]+3225465664&4294967295,q=M+(D<<9&4294967295|D>>>23),D=U+(M^x&(q^M))+L[11]+643717713&4294967295,U=q+(D<<14&4294967295|D>>>18),D=x+(q^M&(U^q))+L[0]+3921069994&4294967295,x=U+(D<<20&4294967295|D>>>12),D=M+(U^q&(x^U))+L[5]+3593408605&4294967295,M=x+(D<<5&4294967295|D>>>27),D=q+(x^U&(M^x))+L[10]+38016083&4294967295,q=M+(D<<9&4294967295|D>>>23),D=U+(M^x&(q^M))+L[15]+3634488961&4294967295,U=q+(D<<14&4294967295|D>>>18),D=x+(q^M&(U^q))+L[4]+3889429448&4294967295,x=U+(D<<20&4294967295|D>>>12),D=M+(U^q&(x^U))+L[9]+568446438&4294967295,M=x+(D<<5&4294967295|D>>>27),D=q+(x^U&(M^x))+L[14]+3275163606&4294967295,q=M+(D<<9&4294967295|D>>>23),D=U+(M^x&(q^M))+L[3]+4107603335&4294967295,U=q+(D<<14&4294967295|D>>>18),D=x+(q^M&(U^q))+L[8]+1163531501&4294967295,x=U+(D<<20&4294967295|D>>>12),D=M+(U^q&(x^U))+L[13]+2850285829&4294967295,M=x+(D<<5&4294967295|D>>>27),D=q+(x^U&(M^x))+L[2]+4243563512&4294967295,q=M+(D<<9&4294967295|D>>>23),D=U+(M^x&(q^M))+L[7]+1735328473&4294967295,U=q+(D<<14&4294967295|D>>>18),D=x+(q^M&(U^q))+L[12]+2368359562&4294967295,x=U+(D<<20&4294967295|D>>>12),D=M+(x^U^q)+L[5]+4294588738&4294967295,M=x+(D<<4&4294967295|D>>>28),D=q+(M^x^U)+L[8]+2272392833&4294967295,q=M+(D<<11&4294967295|D>>>21),D=U+(q^M^x)+L[11]+1839030562&4294967295,U=q+(D<<16&4294967295|D>>>16),D=x+(U^q^M)+L[14]+4259657740&4294967295,x=U+(D<<23&4294967295|D>>>9),D=M+(x^U^q)+L[1]+2763975236&4294967295,M=x+(D<<4&4294967295|D>>>28),D=q+(M^x^U)+L[4]+1272893353&4294967295,q=M+(D<<11&4294967295|D>>>21),D=U+(q^M^x)+L[7]+4139469664&4294967295,U=q+(D<<16&4294967295|D>>>16),D=x+(U^q^M)+L[10]+3200236656&4294967295,x=U+(D<<23&4294967295|D>>>9),D=M+(x^U^q)+L[13]+681279174&4294967295,M=x+(D<<4&4294967295|D>>>28),D=q+(M^x^U)+L[0]+3936430074&4294967295,q=M+(D<<11&4294967295|D>>>21),D=U+(q^M^x)+L[3]+3572445317&4294967295,U=q+(D<<16&4294967295|D>>>16),D=x+(U^q^M)+L[6]+76029189&4294967295,x=U+(D<<23&4294967295|D>>>9),D=M+(x^U^q)+L[9]+3654602809&4294967295,M=x+(D<<4&4294967295|D>>>28),D=q+(M^x^U)+L[12]+3873151461&4294967295,q=M+(D<<11&4294967295|D>>>21),D=U+(q^M^x)+L[15]+530742520&4294967295,U=q+(D<<16&4294967295|D>>>16),D=x+(U^q^M)+L[2]+3299628645&4294967295,x=U+(D<<23&4294967295|D>>>9),D=M+(U^(x|~q))+L[0]+4096336452&4294967295,M=x+(D<<6&4294967295|D>>>26),D=q+(x^(M|~U))+L[7]+1126891415&4294967295,q=M+(D<<10&4294967295|D>>>22),D=U+(M^(q|~x))+L[14]+2878612391&4294967295,U=q+(D<<15&4294967295|D>>>17),D=x+(q^(U|~M))+L[5]+4237533241&4294967295,x=U+(D<<21&4294967295|D>>>11),D=M+(U^(x|~q))+L[12]+1700485571&4294967295,M=x+(D<<6&4294967295|D>>>26),D=q+(x^(M|~U))+L[3]+2399980690&4294967295,q=M+(D<<10&4294967295|D>>>22),D=U+(M^(q|~x))+L[10]+4293915773&4294967295,U=q+(D<<15&4294967295|D>>>17),D=x+(q^(U|~M))+L[1]+2240044497&4294967295,x=U+(D<<21&4294967295|D>>>11),D=M+(U^(x|~q))+L[8]+1873313359&4294967295,M=x+(D<<6&4294967295|D>>>26),D=q+(x^(M|~U))+L[15]+4264355552&4294967295,q=M+(D<<10&4294967295|D>>>22),D=U+(M^(q|~x))+L[6]+2734768916&4294967295,U=q+(D<<15&4294967295|D>>>17),D=x+(q^(U|~M))+L[13]+1309151649&4294967295,x=U+(D<<21&4294967295|D>>>11),D=M+(U^(x|~q))+L[4]+4149444226&4294967295,M=x+(D<<6&4294967295|D>>>26),D=q+(x^(M|~U))+L[11]+3174756917&4294967295,q=M+(D<<10&4294967295|D>>>22),D=U+(M^(q|~x))+L[2]+718787259&4294967295,U=q+(D<<15&4294967295|D>>>17),D=x+(q^(U|~M))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+M&4294967295,N.g[1]=N.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+q&4294967295}i.prototype.v=function(N,M){M===void 0&&(M=N.length);const x=M-this.blockSize,L=this.C;let U=this.h,q=0;for(;q<M;){if(U==0)for(;q<=x;)r(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<M;)if(L[U++]=N.charCodeAt(q++),U==this.blockSize){r(this,L),U=0;break}}else for(;q<M;)if(L[U++]=N[q++],U==this.blockSize){r(this,L),U=0;break}}this.h=U,this.o+=M},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var M=1;M<N.length-8;++M)N[M]=0;M=this.o*8;for(var x=N.length-8;x<N.length;++x)N[x]=M&255,M/=256;for(this.v(N),N=Array(16),M=0,x=0;x<4;++x)for(let L=0;L<32;L+=8)N[M++]=this.g[x]>>>L&255;return N};function l(N,M){var x=f;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=M(N)}function u(N,M){this.h=M;const x=[];let L=!0;for(let U=N.length-1;U>=0;U--){const q=N[U]|0;L&&q==M||(x[U]=q,L=!1)}this.g=x}var f={};function g(N){return-128<=N&&N<128?l(N,function(M){return new u([M|0],M<0?-1:0)}):new u([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return k(h(-N));const M=[];let x=1;for(let L=0;N>=x;L++)M[L]=N/x|0,x*=4294967296;return new u(M,0)}function _(N,M){if(N.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N.charAt(0)=="-")return k(_(N.substring(1),M));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=h(Math.pow(M,8));let L=T;for(let q=0;q<N.length;q+=8){var U=Math.min(8,N.length-q);const D=parseInt(N.substring(q,q+U),M);U<8?(U=h(Math.pow(M,U)),L=L.j(U).add(h(D))):(L=L.j(x),L=L.add(h(D)))}return L}var T=g(0),S=g(1),w=g(16777216);n=u.prototype,n.m=function(){if(P(this))return-k(this).m();let N=0,M=1;for(let x=0;x<this.g.length;x++){const L=this.i(x);N+=(L>=0?L:4294967296+L)*M,M*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(O(this))return"0";if(P(this))return"-"+k(this).toString(N);const M=h(Math.pow(N,6));var x=this;let L="";for(;;){const U=re(x,M).g;x=Q(x,U.j(M));let q=((x.g.length>0?x.g[0]:x.h)>>>0).toString(N);if(x=U,O(x))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function O(N){if(N.h!=0)return!1;for(let M=0;M<N.g.length;M++)if(N.g[M]!=0)return!1;return!0}function P(N){return N.h==-1}n.l=function(N){return N=Q(this,N),P(N)?-1:O(N)?0:1};function k(N){const M=N.g.length,x=[];for(let L=0;L<M;L++)x[L]=~N.g[L];return new u(x,~N.h).add(S)}n.abs=function(){return P(this)?k(this):this},n.add=function(N){const M=Math.max(this.g.length,N.g.length),x=[];let L=0;for(let U=0;U<=M;U++){let q=L+(this.i(U)&65535)+(N.i(U)&65535),D=(q>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);L=D>>>16,q&=65535,D&=65535,x[U]=D<<16|q}return new u(x,x[x.length-1]&-2147483648?-1:0)};function Q(N,M){return N.add(k(M))}n.j=function(N){if(O(this)||O(N))return T;if(P(this))return P(N)?k(this).j(k(N)):k(k(this).j(N));if(P(N))return k(this.j(k(N)));if(this.l(w)<0&&N.l(w)<0)return h(this.m()*N.m());const M=this.g.length+N.g.length,x=[];for(var L=0;L<2*M;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(let U=0;U<N.g.length;U++){const q=this.i(L)>>>16,D=this.i(L)&65535,Ve=N.i(U)>>>16,at=N.i(U)&65535;x[2*L+2*U]+=D*at,B(x,2*L+2*U),x[2*L+2*U+1]+=q*at,B(x,2*L+2*U+1),x[2*L+2*U+1]+=D*Ve,B(x,2*L+2*U+1),x[2*L+2*U+2]+=q*Ve,B(x,2*L+2*U+2)}for(N=0;N<M;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=M;N<2*M;N++)x[N]=0;return new u(x,0)};function B(N,M){for(;(N[M]&65535)!=N[M];)N[M+1]+=N[M]>>>16,N[M]&=65535,M++}function W(N,M){this.g=N,this.h=M}function re(N,M){if(O(M))throw Error("division by zero");if(O(N))return new W(T,T);if(P(N))return M=re(k(N),M),new W(k(M.g),k(M.h));if(P(M))return M=re(N,k(M)),new W(k(M.g),M.h);if(N.g.length>30){if(P(N)||P(M))throw Error("slowDivide_ only works with positive integers.");for(var x=S,L=M;L.l(N)<=0;)x=he(x),L=he(L);var U=ce(x,1),q=ce(L,1);for(L=ce(L,2),x=ce(x,2);!O(L);){var D=q.add(L);D.l(N)<=0&&(U=U.add(x),q=D),L=ce(L,1),x=ce(x,1)}return M=Q(N,U.j(M)),new W(U,M)}for(U=T;N.l(M)>=0;){for(x=Math.max(1,Math.floor(N.m()/M.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=h(x),D=q.j(M);P(D)||D.l(N)>0;)x-=L,q=h(x),D=q.j(M);O(q)&&(q=S),U=U.add(q),N=Q(N,D)}return new W(U,N)}n.B=function(N){return re(this,N).h},n.and=function(N){const M=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<M;L++)x[L]=this.i(L)&N.i(L);return new u(x,this.h&N.h)},n.or=function(N){const M=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<M;L++)x[L]=this.i(L)|N.i(L);return new u(x,this.h|N.h)},n.xor=function(N){const M=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<M;L++)x[L]=this.i(L)^N.i(L);return new u(x,this.h^N.h)};function he(N){const M=N.g.length+1,x=[];for(let L=0;L<M;L++)x[L]=N.i(L)<<1|N.i(L-1)>>>31;return new u(x,N.h)}function ce(N,M){const x=M>>5;M%=32;const L=N.g.length-x,U=[];for(let q=0;q<L;q++)U[q]=M>0?N.i(q+x)>>>M|N.i(q+x+1)<<32-M:N.i(q+x);return new u(U,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,iC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,Do=u}).apply(typeof hE<"u"?hE:typeof self<"u"?self:typeof window<"u"?window:{});var rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sC,Zl,oC,vd,lm,rC,aC,lC;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof rd=="object"&&rd];for(var E=0;E<m.length;++E){var b=m[E];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function r(m,E){if(E)e:{var b=i;m=m.split(".");for(var R=0;R<m.length-1;R++){var K=m[R];if(!(K in b))break e;b=b[K]}m=m[m.length-1],R=b[m],E=E(R),E!=R&&E!=null&&e(b,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var b=[],R;for(R in E)Object.prototype.hasOwnProperty.call(E,R)&&b.push([R,E[R]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,b){return m.call.apply(m.bind,arguments)}function h(m,E,b){return h=g,h.apply(null,arguments)}function _(m,E){var b=Array.prototype.slice.call(arguments,1);return function(){var R=b.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function T(m,E){function b(){}b.prototype=E.prototype,m.Z=E.prototype,m.prototype=new b,m.prototype.constructor=m,m.Ob=function(R,K,X){for(var fe=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)fe[Oe-2]=arguments[Oe];return E.prototype[K].apply(R,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const E=m.length;if(E>0){const b=Array(E);for(let R=0;R<E;R++)b[R]=m[R];return b}return[]}function O(m,E){for(let R=1;R<arguments.length;R++){const K=arguments[R];var b=typeof K;if(b=b!="object"?b:K?Array.isArray(K)?"array":b:"null",b=="array"||b=="object"&&typeof K.length=="number"){b=m.length||0;const X=K.length||0;m.length=b+X;for(let fe=0;fe<X;fe++)m[b+fe]=K[fe]}else m.push(K)}}class P{constructor(E,b){this.i=E,this.j=b,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function k(m){u.setTimeout(()=>{throw m},0)}function Q(){var m=N;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class B{constructor(){this.h=this.g=null}add(E,b){const R=W.get();R.set(E,b),this.h?this.h.next=R:this.g=R,this.h=R}}var W=new P(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,b){this.h=E,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ce=!1,N=new B,M=()=>{const m=Promise.resolve(void 0);he=()=>{m.then(x)}};function x(){for(var m;m=Q();){try{m.h.call(m.g)}catch(b){k(b)}var E=W;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}ce=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const b=()=>{};u.addEventListener("test",b,E),u.removeEventListener("test",b,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function Ve(m,E){U.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(Ve,U),Ve.prototype.init=function(m,E){const b=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(b=="mouseover"?E=m.fromElement:b=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),j=0;function ue(m,E,b,R,K){this.listener=m,this.proxy=null,this.src=E,this.type=b,this.capture=!!R,this.ha=K,this.key=++j,this.da=this.fa=!1}function Ee(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Be(m,E,b){for(const R in m)E.call(b,m[R],R,m)}function Ce(m,E){for(const b in m)E.call(void 0,m[b],b,m)}function H(m){const E={};for(const b in m)E[b]=m[b];return E}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(m,E){let b,R;for(let K=1;K<arguments.length;K++){R=arguments[K];for(b in R)m[b]=R[b];for(let X=0;X<ne.length;X++)b=ne[X],Object.prototype.hasOwnProperty.call(R,b)&&(m[b]=R[b])}}function pe(m){this.src=m,this.g={},this.h=0}pe.prototype.add=function(m,E,b,R,K){const X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);const fe=Ne(m,E,R,K);return fe>-1?(E=m[fe],b||(E.fa=!1)):(E=new ue(E,this.src,X,!!R,K),E.fa=b,m.push(E)),E};function Ie(m,E){const b=E.type;if(b in m.g){var R=m.g[b],K=Array.prototype.indexOf.call(R,E,void 0),X;(X=K>=0)&&Array.prototype.splice.call(R,K,1),X&&(Ee(E),m.g[b].length==0&&(delete m.g[b],m.h--))}}function Ne(m,E,b,R){for(let K=0;K<m.length;++K){const X=m[K];if(!X.da&&X.listener==E&&X.capture==!!b&&X.ha==R)return K}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),yt={};function lt(m,E,b,R,K){if(Array.isArray(E)){for(let X=0;X<E.length;X++)lt(m,E[X],b,R,K);return null}return b=mi(b),m&&m[at]?m.J(E,b,f(R)?!!R.capture:!1,K):Cn(m,E,b,!1,R,K)}function Cn(m,E,b,R,K,X){if(!E)throw Error("Invalid event type");const fe=f(K)?!!K.capture:!!K;let Oe=$n(m);if(Oe||(m[Ge]=Oe=new pe(m)),b=Oe.add(E,b,R,fe,X),b.proxy)return b;if(R=hi(),b.proxy=R,R.src=m,R.listener=b,m.addEventListener)q||(K=fe),K===void 0&&(K=!1),m.addEventListener(E.toString(),R,K);else if(m.attachEvent)m.attachEvent(Xt(E.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return b}function hi(){function m(b){return E.call(m.src,m.listener,b)}const E=ls;return m}function kn(m,E,b,R,K){if(Array.isArray(E))for(var X=0;X<E.length;X++)kn(m,E[X],b,R,K);else R=f(R)?!!R.capture:!!R,b=mi(b),m&&m[at]?(m=m.i,X=String(E).toString(),X in m.g&&(E=m.g[X],b=Ne(E,b,R,K),b>-1&&(Ee(E[b]),Array.prototype.splice.call(E,b,1),E.length==0&&(delete m.g[X],m.h--)))):m&&(m=$n(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Ne(E,b,R,K)),(b=m>-1?E[m]:null)&&pi(b))}function pi(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[at])Ie(E.i,m);else{var b=m.type,R=m.proxy;E.removeEventListener?E.removeEventListener(b,R,m.capture):E.detachEvent?E.detachEvent(Xt(b),R):E.addListener&&E.removeListener&&E.removeListener(R),(b=$n(E))?(Ie(b,m),b.h==0&&(b.src=null,E[Ge]=null)):Ee(m)}}}function Xt(m){return m in yt?yt[m]:yt[m]="on"+m}function ls(m,E){if(m.da)m=!0;else{E=new Ve(E,this);const b=m.listener,R=m.ha||m.src;m.fa&&pi(m),m=b.call(R,E)}return m}function $n(m){return m=m[Ge],m instanceof pe?m:null}var us="__closure_events_fn_"+(Math.random()*1e9>>>0);function mi(m){return typeof m=="function"?m:(m[us]||(m[us]=function(E){return m.handleEvent(E)}),m[us])}function At(){L.call(this),this.i=new pe(this),this.M=this,this.G=null}T(At,L),At.prototype[at]=!0,At.prototype.removeEventListener=function(m,E,b,R){kn(this,m,E,b,R)};function _t(m,E){var b,R=m.G;if(R)for(b=[];R;R=R.G)b.push(R);if(m=m.M,R=E.type||E,typeof E=="string")E=new U(E,m);else if(E instanceof U)E.target=E.target||m;else{var K=E;E=new U(R,m),de(E,K)}K=!0;let X,fe;if(b)for(fe=b.length-1;fe>=0;fe--)X=E.g=b[fe],K=Jn(X,R,!0,E)&&K;if(X=E.g=m,K=Jn(X,R,!0,E)&&K,K=Jn(X,R,!1,E)&&K,b)for(fe=0;fe<b.length;fe++)X=E.g=b[fe],K=Jn(X,R,!1,E)&&K}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const b=m.g[E];for(let R=0;R<b.length;R++)Ee(b[R]);delete m.g[E],m.h--}}this.G=null},At.prototype.J=function(m,E,b,R){return this.i.add(String(m),E,!1,b,R)},At.prototype.K=function(m,E,b,R){return this.i.add(String(m),E,!0,b,R)};function Jn(m,E,b,R){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let K=!0;for(let X=0;X<E.length;++X){const fe=E[X];if(fe&&!fe.da&&fe.capture==b){const Oe=fe.listener,Dt=fe.ha||fe.src;fe.fa&&Ie(m.i,fe),K=Oe.call(Dt,R)!==!1&&K}}return K&&!R.defaultPrevented}function Go(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function Gs(m){m.g=Go(()=>{m.g=null,m.i&&(m.i=!1,Gs(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class Kt extends L{constructor(E,b){super(),this.m=E,this.l=b,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Gs(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vn(m){L.call(this),this.h=m,this.g={}}T(Vn,L);var Un=[];function vt(m){Be(m.g,function(E,b){this.g.hasOwnProperty(b)&&pi(E)},m),m.g={}}Vn.prototype.N=function(){Vn.Z.N.call(this),vt(this)},Vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=u.JSON.stringify,ki=u.JSON.parse,gi=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function Fs(){}function qs(){}var _n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wt(){U.call(this,"d")}T(wt,U);function sn(){U.call(this,"c")}T(sn,U);var ze={},F=null;function ve(){return F=F||new At}ze.Ia="serverreachability";function ee(m){U.call(this,ze.Ia,m)}T(ee,U);function ge(m){const E=ve();_t(E,new ee(E))}ze.STAT_EVENT="statevent";function Te(m,E){U.call(this,ze.STAT_EVENT,m),this.stat=E}T(Te,U);function Ae(m){const E=ve();_t(E,new Te(E,m))}ze.Ja="timingevent";function et(m,E){U.call(this,ze.Ja,m),this.size=E}T(et,U);function Yt(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function Mt(){this.g=!0}Mt.prototype.ua=function(){this.g=!1};function Vi(m,E,b,R,K,X){m.info(function(){if(m.g)if(X){var fe="",Oe=X.split("&");for(let st=0;st<Oe.length;st++){var Dt=Oe[st].split("=");if(Dt.length>1){const Ct=Dt[0];Dt=Dt[1];const Zn=Ct.split("_");fe=Zn.length>=2&&Zn[1]=="type"?fe+(Ct+"="+Dt+"&"):fe+(Ct+"=redacted&")}}}else fe=null;else fe=X;return"XMLHTTP REQ ("+R+") [attempt "+K+"]: "+E+`
`+b+`
`+fe})}function Qn(m,E,b,R,K,X,fe){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+K+"]: "+E+`
`+b+`
`+X+" "+fe})}function Ln(m,E,b,R){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ef(m,b)+(R?" "+R:"")})}function Fo(m,E){m.info(function(){return"TIMEOUT: "+E})}Mt.prototype.info=function(){};function Ef(m,E){if(!m.g)return E;if(!E)return null;try{const X=JSON.parse(E);if(X){for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var b=X[m];if(!(b.length<2)){var R=b[1];if(Array.isArray(R)&&!(R.length<1)){var K=R[0];if(K!="noop"&&K!="stop"&&K!="close")for(let fe=1;fe<R.length;fe++)R[fe]=""}}}}return bn(X)}catch{return E}}var qo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xa;function zo(){}T(zo,Fs),zo.prototype.g=function(){return new XMLHttpRequest},Xa=new zo;function cs(m){return encodeURIComponent(String(m))}function Du(m){var E=1;m=m.split(":");const b=[];for(;E>0&&m.length;)b.push(m.shift()),E--;return m.length&&b.push(m.join(":")),b}function yi(m,E,b,R){this.j=m,this.i=E,this.l=b,this.S=R||1,this.V=new Vn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vi}function vi(){this.i=null,this.g="",this.h=!1}var Ut={},Wt={};function Ui(m,E,b){m.M=1,m.A=Ko(Ot(E)),m.u=b,m.R=!0,Mr(m,null)}function Mr(m,E){m.F=Date.now(),Li(m),m.B=Ot(m.A);var b=m.B,R=m.S;Array.isArray(R)||(R=[String(R)]),Vr(b.i,"t",R),m.C=0,b=m.j.L,m.h=new vi,m.g=$u(m.j,b?E:null,!m.u),m.P>0&&(m.O=new Kt(h(m.Y,m,m.g),m.P)),E=m.V,b=m.g,R=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(Un[0]=K.toString()),K=Un);for(let X=0;X<K.length;X++){const fe=lt(b,K[X],R||E.handleEvent,!1,E.h||E);if(!fe)break;E.g[fe.key]=fe}E=m.J?H(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),ge(),Vi(m.i,m.v,m.B,m.l,m.S,m.u)}yi.prototype.ba=function(m){m=m.target;const E=this.O;E&&Ei(m)==3?E.j():this.Y(m)},yi.prototype.Y=function(m){try{if(m==this.g)e:{const Oe=Ei(this.g),Dt=this.g.ya(),st=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||Oe!=4||Dt==7||(Dt==8||st<=0?ge(3):ge(2)),Oi(this);var E=this.g.ca();this.X=E;var b=Sf(this);if(this.o=E==200,Qn(this.i,this.v,this.B,this.l,this.S,Oe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var R,K=this.g;if((R=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var X=R;break t}}X=null}if(m=X)Ln(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hi(this,m);else{this.o=!1,this.m=3,Ae(12),On(this),Xn(this);break e}}if(this.R){m=!0;let Ct;for(;!this.K&&this.C<b.length;)if(Ct=ku(this,b),Ct==Wt){Oe==4&&(this.m=4,Ae(14),m=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==Ut){this.m=4,Ae(15),Ln(this.i,this.l,b,"[Invalid Chunk]"),m=!1;break}else Ln(this.i,this.l,Ct,null),Hi(this,Ct);if(Pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||b.length!=0||this.h.h||(this.m=1,Ae(16),m=!1),this.o=this.o&&m,!m)Ln(this.i,this.l,b,"[Invalid Chunked Response]"),On(this),Xn(this);else if(b.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),dl(fe),fe.P=!0,Ae(11))}}else Ln(this.i,this.l,b,null),Hi(this,b);Oe==4&&On(this),this.o&&!this.K&&(Oe==4?qu(this.j,this):(this.o=!1,Li(this)))}else fs(this.g),E==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ae(12)):(this.m=0,Ae(13)),On(this),Xn(this)}}}catch{}finally{}};function Sf(m){if(!Pu(m))return m.g.la();const E=on(m.g);if(E==="")return"";let b="";const R=E.length,K=Ei(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return On(m),Xn(m),"";m.h.i=new u.TextDecoder}for(let X=0;X<R;X++)m.h.h=!0,b+=m.h.i.decode(E[X],{stream:!(K&&X==R-1)});return E.length=0,m.h.g+=b,m.C=0,m.h.g}function Pu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function ku(m,E){var b=m.C,R=E.indexOf(`
`,b);return R==-1?Wt:(b=Number(E.substring(b,R)),isNaN(b)?Ut:(R+=1,R+b>E.length?Wt:(E=E.slice(R,R+b),m.C=R+b,E)))}yi.prototype.cancel=function(){this.K=!0,On(this)};function Li(m){m.T=Date.now()+m.H,Dr(m,m.H)}function Dr(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Yt(h(m.aa,m),E)}function Oi(m){m.D&&(u.clearTimeout(m.D),m.D=null)}yi.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Fo(this.i,this.B),this.M!=2&&(ge(),Ae(17)),On(this),this.m=2,Xn(this)):Dr(this,this.T-m)};function Xn(m){m.j.I==0||m.K||qu(m.j,m)}function On(m){Oi(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,vt(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Hi(m,E){try{var b=m.j;if(b.I!=0&&(b.g==m||Gi(b.h,m))){if(!m.L&&Gi(b.h,m)&&b.I==3){try{var R=b.Ba.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var K=R;if(K[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<m.F)Br(b),Ws(b);else break e;jo(b),Ae(18)}}else b.xa=K[1],0<b.xa-b.K&&K[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Yt(h(b.Va,b),6e3));Bi(b.h)<=1&&b.ta&&(b.ta=void 0)}else $i(b,11)}else if((m.L||b.g==m)&&Br(b),!D(E))for(K=b.Ba.g.parse(E),E=0;E<K.length;E++){let st=K[E];const Ct=st[0];if(!(Ct<=b.K))if(b.K=Ct,st=st[1],b.I==2)if(st[0]=="c"){b.M=st[1],b.ba=st[2];const Zn=st[3];Zn!=null&&(b.ka=Zn,b.j.info("VER="+b.ka));const Ji=st[4];Ji!=null&&(b.za=Ji,b.j.info("SVER="+b.za));const Si=st[5];Si!=null&&typeof Si=="number"&&Si>0&&(R=1.5*Si,b.O=R,b.j.info("backChannelRequestTimeoutMs_="+R)),R=b;const Ai=m.g;if(Ai){const Zo=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zo){var X=R.h;X.g||Zo.indexOf("spdy")==-1&&Zo.indexOf("quic")==-1&&Zo.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Za(X,X.h),X.h=null))}if(R.G){const Gr=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Gr&&(R.wa=Gr,ut(R.J,R.G,Gr))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-m.F,b.j.info("Handshake RTT: "+b.T+"ms")),R=b;var fe=m;if(R.na=Yu(R,R.L?R.ba:null,R.W),fe.L){el(R.h,fe);var Oe=fe,Dt=R.O;Dt&&(Oe.H=Dt),Oe.D&&(Oi(Oe),Li(Oe)),R.g=fe}else Gu(R);b.i.length>0&&Yi(b)}else st[0]!="stop"&&st[0]!="close"||$i(b,7);else b.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?$i(b,7):ul(b):st[0]!="noop"&&b.l&&b.l.qa(st),b.A=0)}}ge(4)}catch{}}var Lt=class{constructor(m,E){this.g=m,this.map=E}};function Wa(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ja(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Bi(m){return m.h?1:m.g?m.g.size:0}function Gi(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Za(m,E){m.g?m.g.add(E):m.h=E}function el(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Wa.prototype.cancel=function(){if(this.i=tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function tl(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const b of m.g.values())E=E.concat(b.G);return E}return w(m.i)}var Vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pr(m,E){if(m){m=m.split("&");for(let b=0;b<m.length;b++){const R=m[b].indexOf("=");let K,X=null;R>=0?(K=m[b].substring(0,R),X=m[b].substring(R+1)):K=m[b],E(K,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Hn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof Hn?(this.l=m.l,jt(this,m.j),this.o=m.o,this.g=m.g,zs(this,m.u),this.h=m.h,nl(this,Hu(m.i)),this.m=m.m):m&&(E=String(m).match(Vu))?(this.l=!1,jt(this,E[1]||"",!0),this.o=Fi(E[2]||""),this.g=Fi(E[3]||"",!0),zs(this,E[4]),this.h=Fi(E[5]||"",!0),nl(this,E[6]||"",!0),this.m=Fi(E[7]||"")):(this.l=!1,this.i=new Ys(null,this.l))}Hn.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(Yo(E,kr,!0),":");var b=this.g;return(b||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Yo(E,kr,!0),"@"),m.push(cs(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&m.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&m.push("/"),m.push(Yo(b,b.charAt(0)=="/"?il:Uu,!0))),(b=this.i.toString())&&m.push("?",b),(b=this.m)&&m.push("#",Yo(b,Lu)),m.join("")},Hn.prototype.resolve=function(m){const E=Ot(this);let b=!!m.j;b?jt(E,m.j):b=!!m.o,b?E.o=m.o:b=!!m.g,b?E.g=m.g:b=m.u!=null;var R=m.h;if(b)zs(E,m.u);else if(b=!!m.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var K=E.h.lastIndexOf("/");K!=-1&&(R=E.h.slice(0,K+1)+R)}if(K=R,K==".."||K==".")R="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){R=K.lastIndexOf("/",0)==0,K=K.split("/");const X=[];for(let fe=0;fe<K.length;){const Oe=K[fe++];Oe=="."?R&&fe==K.length&&X.push(""):Oe==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&fe==K.length&&X.push("")):(X.push(Oe),R=!0)}R=X.join("/")}else R=K}return b?E.h=R:b=m.i.toString()!=="",b?nl(E,Hu(m.i)):b=!!m.m,b&&(E.m=m.m),E};function Ot(m){return new Hn(m)}function jt(m,E,b){m.j=b?Fi(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function zs(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function nl(m,E,b){E instanceof Ys?(m.i=E,Ur(m.i,m.l)):(b||(E=Yo(E,Ks)),m.i=new Ys(E,m.l))}function ut(m,E,b){m.i.set(E,b)}function Ko(m){return ut(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Fi(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Yo(m,E,b){return typeof m=="string"?(m=encodeURI(m).replace(E,wn),b&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function wn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var kr=/[#\/\?@]/g,Uu=/[#\?:]/g,il=/[#\?]/g,Ks=/[#\?@]/g,Lu=/#/g;function Ys(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function In(m){m.g||(m.g=new Map,m.h=0,m.i&&Pr(m.i,function(E,b){m.add(decodeURIComponent(E.replace(/\+/g," ")),b)}))}n=Ys.prototype,n.add=function(m,E){In(this),this.i=null,m=$s(this,m);let b=this.g.get(m);return b||this.g.set(m,b=[]),b.push(E),this.h+=1,this};function Ou(m,E){In(m),E=$s(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function sl(m,E){return In(m),E=$s(m,E),m.g.has(E)}n.forEach=function(m,E){In(this),this.g.forEach(function(b,R){b.forEach(function(K){m.call(E,K,R,this)},this)},this)};function ol(m,E){In(m);let b=[];if(typeof E=="string")sl(m,E)&&(b=b.concat(m.g.get($s(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)b=b.concat(m[E]);return b}n.set=function(m,E){return In(this),this.i=null,m=$s(this,m),sl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=ol(this,m),m.length>0?String(m[0]):E):E};function Vr(m,E,b){Ou(m,E),b.length>0&&(m.i=null,m.g.set($s(m,E),w(b)),m.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let R=0;R<E.length;R++){var b=E[R];const K=cs(b);b=ol(this,b);for(let X=0;X<b.length;X++){let fe=K;b[X]!==""&&(fe+="="+cs(b[X])),m.push(fe)}}return this.i=m.join("&")};function Hu(m){const E=new Ys;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function $s(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Ur(m,E){E&&!m.j&&(In(m),m.i=null,m.g.forEach(function(b,R){const K=R.toLowerCase();R!=K&&(Ou(this,R),Vr(this,K,b))},m)),m.j=E}function _i(m,E){const b=new Mt;if(u.Image){const R=new Image;R.onload=_(Wn,b,"TestLoadImage: loaded",!0,E,R),R.onerror=_(Wn,b,"TestLoadImage: error",!1,E,R),R.onabort=_(Wn,b,"TestLoadImage: abort",!1,E,R),R.ontimeout=_(Wn,b,"TestLoadImage: timeout",!1,E,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else E(!1)}function rl(m,E){const b=new Mt,R=new AbortController,K=setTimeout(()=>{R.abort(),Wn(b,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:R.signal}).then(X=>{clearTimeout(K),X.ok?Wn(b,"TestPingServer: ok",!0,E):Wn(b,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(K),Wn(b,"TestPingServer: error",!1,E)})}function Wn(m,E,b,R,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),R(b)}catch{}}function Js(){this.g=new gi}function qi(m){this.i=m.Sb||null,this.h=m.ab||!1}T(qi,Fs),qi.prototype.g=function(){return new $o(this.i,this.h)};function $o(m,E){At.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T($o,At),n=$o.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Ti(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qs(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Lr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Qs(this):Ti(this),this.readyState==3&&Lr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Qs(this))},n.Na=function(m){this.g&&(this.response=m,Qs(this))},n.ga=function(){this.g&&Qs(this)};function Qs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ti(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var b=E.next();!b.done;)b=b.value,m.push(b[0]+": "+b[1]),b=E.next();return m.join(`\r
`)};function Ti(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty($o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function jn(m){let E="";return Be(m,function(b,R){E+=R,E+=":",E+=b,E+=`\r
`}),E}function Jo(m,E,b){e:{for(R in b){var R=!1;break e}R=!0}R||(b=jn(b),typeof m=="string"?b!=null&&cs(b):ut(m,E,b))}function ft(m){At.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ft,At);var zi=/^https?$/i,al=["POST","PUT"];n=ft.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,b,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xa.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(X){Qo(this,X);return}if(m=b||"",b=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var K in R)b.set(K,R[K]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())b.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),K=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(al,E,void 0)>=0)||R||K||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,fe]of b)this.g.setRequestHeader(X,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(X){Qo(this,X)}};function Qo(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,ll(m),ds(m)}function ll(m){m.A||(m.A=!0,_t(m,"complete"),_t(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,_t(this,"complete"),_t(this,"abort"),ds(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ds(this,!0)),ft.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Xo(this):this.Xa())},n.Xa=function(){Xo(this)};function Xo(m){if(m.h&&typeof l<"u"){if(m.v&&Ei(m)==4)setTimeout(m.Ca.bind(m),0);else if(_t(m,"readystatechange"),Ei(m)==4){m.h=!1;try{const X=m.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var b;if(!(b=E)){var R;if(R=X===0){let fe=String(m.D).match(Vu)[1]||null;!fe&&u.self&&u.self.location&&(fe=u.self.location.protocol.slice(0,-1)),R=!zi.test(fe?fe.toLowerCase():"")}b=R}if(b)_t(m,"complete"),_t(m,"success");else{m.o=6;try{var K=Ei(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",ll(m)}}finally{ds(m)}}}}function ds(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const b=m.g;m.g=null,E||_t(m,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ei(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),ki(E)}};function on(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function fs(m){const E={};m=(m.g&&Ei(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(D(m[R]))continue;var b=Du(m[R]);const K=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=E[K]||[];E[K]=X,X.push(b)}Ce(E,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ki(m,E,b){return b&&b.internalChannelParams&&b.internalChannelParams[m]||E}function Xs(m){this.za=0,this.i=[],this.j=new Mt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ki("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ki("baseRetryDelayMs",5e3,m),this.Za=Ki("retryDelaySeedMs",1e4,m),this.Ta=Ki("forwardChannelMaxRetries",2,m),this.va=Ki("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Wa(m&&m.concurrentRequestLimit),this.Ba=new Js,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Xs.prototype,n.ka=8,n.I=1,n.connect=function(m,E,b,R){Ae(0),this.W=m,this.H=E||{},b&&R!==void 0&&(this.H.OSID=b,this.H.OAID=R),this.F=this.X,this.J=Yu(this,null,this.W),Yi(this)};function ul(m){if(Or(m),m.I==3){var E=m.V++,b=Ot(m.J);if(ut(b,"SID",m.M),ut(b,"RID",E),ut(b,"TYPE","terminate"),Wo(m,b),E=new yi(m,m.j,E),E.M=2,E.A=Ko(Ot(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=E.A,b=!0),b||(E.g=$u(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Li(E)}Ku(m)}function Ws(m){m.g&&(dl(m),m.g.cancel(),m.g=null)}function Or(m){Ws(m),m.v&&(u.clearTimeout(m.v),m.v=null),Br(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Yi(m){if(!ja(m.h)&&!m.m){m.m=!0;var E=m.Ea;he||M(),ce||(he(),ce=!0),N.add(E,m),m.D=0}}function Hr(m,E){return Bi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Yt(h(m.Ea,m,E),zu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new yi(this,this.j,m);let X=this.o;if(this.U&&(X?(X=H(X),de(X,this.U)):X=this.U),this.u!==null||this.R||(K.J=X,X=null),this.S)e:{for(var E=0,b=0;b<this.i.length;b++){t:{var R=this.i[b];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,E>4096){E=b;break e}if(E===4096||b===this.i.length-1){E=b+1;break e}}E=1e3}else E=1e3;E=Bu(this,K,E),b=Ot(this.J),ut(b,"RID",m),ut(b,"CVER",22),this.G&&ut(b,"X-HTTP-Session-Id",this.G),Wo(this,b),X&&(this.R?E="headers="+cs(jn(X))+"&"+E:this.u&&Jo(b,this.u,X)),Za(this.h,K),this.Ra&&ut(b,"TYPE","init"),this.S?(ut(b,"$req",E),ut(b,"SID","null"),K.U=!0,Ui(K,b,null)):Ui(K,b,E),this.I=2}}else this.I==3&&(m?cl(this,m):this.i.length==0||ja(this.h)||cl(this))};function cl(m,E){var b;E?b=E.l:b=m.V++;const R=Ot(m.J);ut(R,"SID",m.M),ut(R,"RID",b),ut(R,"AID",m.K),Wo(m,R),m.u&&m.o&&Jo(R,m.u,m.o),b=new yi(m,m.j,b,m.D+1),m.u===null&&(b.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Bu(m,b,1e3),b.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Za(m.h,b),Ui(b,R,E)}function Wo(m,E){m.H&&Be(m.H,function(b,R){ut(E,R,b)}),m.l&&Be({},function(b,R){ut(E,R,b)})}function Bu(m,E,b){b=Math.min(m.i.length,b);const R=m.l?h(m.l.Ka,m.l,m):null;e:{var K=m.i;let Oe=-1;for(;;){const Dt=["count="+b];Oe==-1?b>0?(Oe=K[0].g,Dt.push("ofs="+Oe)):Oe=0:Dt.push("ofs="+Oe);let st=!0;for(let Ct=0;Ct<b;Ct++){var X=K[Ct].g;const Zn=K[Ct].map;if(X-=Oe,X<0)Oe=Math.max(0,K[Ct].g-100),st=!1;else try{X="req"+X+"_"||"";try{var fe=Zn instanceof Map?Zn:Object.entries(Zn);for(const[Ji,Si]of fe){let Ai=Si;f(Si)&&(Ai=bn(Si)),Dt.push(X+Ji+"="+encodeURIComponent(Ai))}}catch(Ji){throw Dt.push(X+"type="+encodeURIComponent("_badmap")),Ji}}catch{R&&R(Zn)}}if(st){fe=Dt.join("&");break e}}fe=void 0}return m=m.i.splice(0,b),E.G=m,fe}function Gu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;he||M(),ce||(he(),ce=!0),N.add(E,m),m.A=0}}function jo(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Yt(h(m.Da,m),zu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Fu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Yt(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ae(10),Ws(this),Fu(this))};function dl(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function Fu(m){m.g=new yi(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=Ot(m.na);ut(E,"RID","rpc"),ut(E,"SID",m.M),ut(E,"AID",m.K),ut(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&ut(E,"TO",m.ia),ut(E,"TYPE","xmlhttp"),Wo(m,E),m.u&&m.o&&Jo(E,m.u,m.o),m.O&&(m.g.H=m.O);var b=m.g;m=m.ba,b.M=1,b.A=Ko(Ot(E)),b.u=null,b.R=!0,Mr(b,m)}n.Va=function(){this.C!=null&&(this.C=null,Ws(this),jo(this),Ae(19))};function Br(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function qu(m,E){var b=null;if(m.g==E){Br(m),dl(m),m.g=null;var R=2}else if(Gi(m.h,E))b=E.G,el(m.h,E),R=1;else return;if(m.I!=0){if(E.o)if(R==1){b=E.u?E.u.length:0,E=Date.now()-E.F;var K=m.D;R=ve(),_t(R,new et(R,b)),Yi(m)}else Gu(m);else if(K=E.m,K==3||K==0&&E.X>0||!(R==1&&Hr(m,E)||R==2&&jo(m)))switch(b&&b.length>0&&(E=m.h,E.i=E.i.concat(b)),K){case 1:$i(m,5);break;case 4:$i(m,10);break;case 3:$i(m,6);break;default:$i(m,2)}}}function zu(m,E){let b=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(b*=2),b*E}function $i(m,E){if(m.j.info("Error code "+E),E==2){var b=h(m.bb,m),R=m.Ua;const K=!R;R=new Hn(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||jt(R,"https"),Ko(R),K?_i(R.toString(),b):rl(R.toString(),b)}else Ae(2);m.I=0,m.l&&m.l.pa(E),Ku(m),Or(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function Ku(m){if(m.I=0,m.ja=[],m.l){const E=tl(m.h);(E.length!=0||m.i.length!=0)&&(O(m.ja,E),O(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Yu(m,E,b){var R=b instanceof Hn?Ot(b):new Hn(b);if(R.g!="")E&&(R.g=E+"."+R.g),zs(R,R.u);else{var K=u.location;R=K.protocol,E=E?E+"."+K.hostname:K.hostname,K=+K.port;const X=new Hn(null);R&&jt(X,R),E&&(X.g=E),K&&zs(X,K),b&&(X.h=b),R=X}return b=m.G,E=m.wa,b&&E&&ut(R,b,E),ut(R,"VER",m.ka),Wo(m,R),R}function $u(m,E,b){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new ft(new qi({ab:b})):new ft(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ju(){}n=Ju.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function js(){}js.prototype.g=function(m,E){return new Tn(m,E)};function Tn(m,E){At.call(this),this.g=new Xs(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new hs(this)}T(Tn,At),Tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){ul(this.g)},Tn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var b={};b.__data__=m,m=b}else this.v&&(b={},b.__data__=bn(m),m=b);E.i.push(new Lt(E.Ya++,m)),E.I==3&&Yi(E)},Tn.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,Tn.Z.N.call(this)};function Qu(m){wt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const b in E){m=b;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(Qu,wt);function Xu(){sn.call(this),this.status=1}T(Xu,sn);function hs(m){this.g=m}T(hs,Ju),hs.prototype.ra=function(){_t(this.g,"a")},hs.prototype.qa=function(m){_t(this.g,new Qu(m))},hs.prototype.pa=function(m){_t(this.g,new Xu)},hs.prototype.oa=function(){_t(this.g,"b")},js.prototype.createWebChannel=js.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,lC=function(){return new js},aC=function(){return ve()},rC=ze,lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qo.NO_ERROR=0,qo.TIMEOUT=8,qo.HTTP_ERROR=6,vd=qo,Qa.COMPLETE="complete",oC=Qa,qs.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",At.prototype.listen=At.prototype.J,Zl=qs,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,sC=ft}).apply(typeof rd<"u"?rd:typeof self<"u"?self:typeof window<"u"?window:{});const pE="@firebase/firestore",mE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Om("@firebase/firestore");function _a(){return Cr.logLevel}function ye(n,...e){if(Cr.logLevel<=Qe.DEBUG){const t=e.map(Wm);Cr.debug(`Firestore (${Ka}): ${n}`,...t)}}function Us(n,...e){if(Cr.logLevel<=Qe.ERROR){const t=e.map(Wm);Cr.error(`Firestore (${Ka}): ${n}`,...t)}}function Pa(n,...e){if(Cr.logLevel<=Qe.WARN){const t=e.map(Wm);Cr.warn(`Firestore (${Ka}): ${n}`,...t)}}function Wm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,uC(n,i,t)}function uC(n,e,t){let i=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Us(i),new Error(i)}function rt(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||uC(e,r,i)}function Le(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Bs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(mn.UNAUTHENTICATED)))}shutdown(){}}class FL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qL{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0,42304);let i=this.i;const r=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Po;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Po,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},f=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Po)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(rt(typeof i.accessToken=="string",31837,{l:i}),new cC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class zL{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KL{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new zL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rt(this.o===void 0,3512);const i=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const r=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new gE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=$L(40);for(let l=0;l<r.length;++l)i.length<20&&r[l]<t&&(i+=e.charAt(r[l]%62))}return i}}function Xe(n,e){return n<e?-1:n>e?1:0}function um(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),l=e.charAt(i);if(r!==l)return Dp(r)===Dp(l)?Xe(r,l):Dp(r)?1:-1}return Xe(n.length,e.length)}const JL=55296,QL=57343;function Dp(n){const e=n.charCodeAt(0);return e>=JL&&e<=QL}function ka(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="__name__";class Zi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Me(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const l=Zi.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Xe(e.length,t.length)}static compareSegments(e,t){const i=Zi.isNumericId(e),r=Zi.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Zi.extractNumericId(e).compare(Zi.extractNumericId(t)):um(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Do.fromString(e.substring(4,e.length-2))}}class It extends Zi{construct(e,t,i){return new It(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new It(t)}static emptyPath(){return new It([])}}const XL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Zi{construct(e,t,i){return new dn(e,t,i)}static isValidIdentifier(e){return XL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yE}static keyField(){return new dn([yE])}static fromServerFormat(e){const t=[];let i="",r=0;const l=()=>{if(i.length===0)throw new be(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new be(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new be(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(i+=f,r++):(l(),r++)}if(l(),u)throw new be(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(t)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(It.fromString(e))}static fromName(e){return new Re(It.fromString(e).popFirst(5))}static empty(){return new Re(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(n,e,t){if(!t)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jL(n,e,t,i){if(e===!0&&i===!0)throw new be(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vE(n){if(!Re.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me(12329,{type:typeof n})}function pu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zm(n);throw new be(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Iu(n,e){if(!dC(n))throw new be(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new be(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=-62135596800,TE=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*TE);return new St(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_E)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TE}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Iu(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_E;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:zt("string",St._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new St(0,0))}static max(){return new ke(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=-1;function ZL(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ke.fromTimestamp(i===1e9?new St(t+1,0):new St(t,i));return new ko(r,Re.empty(),e)}function e4(n){return new ko(n.readTime,n.key,mu)}class ko{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ko(ke.min(),Re.empty(),mu)}static max(){return new ko(ke.max(),Re.empty(),mu)}}function t4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==n4)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((i,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,i)=>{t(e)}))}static reject(e){return new oe(((t,i)=>{i(e)}))}static waitFor(e){return new oe(((t,i)=>{let r=0,l=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++l,u&&l===r&&t()}),(g=>i(g)))})),u=!0,l===r&&t()}))}static or(e){let t=oe.resolve(!1);for(const i of e)t=t.next((r=>r?oe.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,l)=>{i.push(t.call(this,r,l))})),this.waitFor(i)}static mapArray(e,t){return new oe(((i,r)=>{const l=e.length,u=new Array(l);let f=0;for(let g=0;g<l;g++){const h=g;t(e[h]).next((_=>{u[h]=_,++f,f===l&&i(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new oe(((i,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):i()};l()}))}}function s4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $a(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}uf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function cf(n){return n==null}function Hd(n){return n===0&&1/n==-1/0}function o4(n){return typeof n=="number"&&Number.isInteger(n)&&!Hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="";function r4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=EE(e)),e=a4(n.get(t),e);return EE(e)}function a4(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case fC:t+="";break;default:t+=l}}return t}function EE(n){return n+fC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ir(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||cn.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ad(this.root,e,this.comparator,!0)}}class ad{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,t,i,r,l){this.key=e,this.value=t,this.color=i??cn.RED,this.left=r??cn.EMPTY,this.right=l??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,l){return new cn(e??this.key,t??this.value,i??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const l=i(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,i),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return cn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,i,r,l){return this}insert(e,t,i){return new cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AE(this.data.getIterator())}getIteratorFrom(e){return new AE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class AE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new xi([])}unionWith(e){let t=new Qt(dn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new xi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ka(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new pC("Invalid base64 string: "+l):l}})(e);return new fn(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const l4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(n){if(rt(!!n,39018),typeof n=="string"){let e=0;const t=l4.exec(n);if(rt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Uo(n){return typeof n=="string"?fn.fromBase64String(n):fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="server_timestamp",gC="__type__",yC="__previous_value__",vC="__local_write_time__";function tg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[gC])==null?void 0:i.stringValue)===mC}function df(n){const e=n.mapValue.fields[yC];return tg(e)?df(e):e}function gu(n){const e=Vo(n.mapValue.fields[vC].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,t,i,r,l,u,f,g,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=h,this.isUsingEmulator=_}}const Bd="(default)";class yu{constructor(e,t){this.projectId=e,this.database=t||Bd}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===Bd}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="__type__",c4="__max__",ld={mapValue:{}},TC="__vector__",Gd="value";function Lo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tg(n)?4:f4(n)?9007199254740991:d4(n)?10:11:Me(28295,{value:n})}function rs(n,e){if(n===e)return!0;const t=Lo(n);if(t!==Lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gu(n).isEqual(gu(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=Vo(r.timestampValue),f=Vo(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return Uo(r.bytesValue).isEqual(Uo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return Vt(r.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(r.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Vt(r.integerValue)===Vt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=Vt(r.doubleValue),f=Vt(l.doubleValue);return u===f?Hd(u)===Hd(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return ka(n.arrayValue.values||[],e.arrayValue.values||[],rs);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},f=l.mapValue.fields||{};if(SE(u)!==SE(f))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(f[g]===void 0||!rs(u[g],f[g])))return!1;return!0})(n,e);default:return Me(52216,{left:n})}}function vu(n,e){return(n.values||[]).find((t=>rs(t,e)))!==void 0}function Va(n,e){if(n===e)return 0;const t=Lo(n),i=Lo(e);if(t!==i)return Xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Vt(l.integerValue||l.doubleValue),g=Vt(u.integerValue||u.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return CE(n.timestampValue,e.timestampValue);case 4:return CE(gu(n),gu(e));case 5:return um(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=Uo(l),g=Uo(u);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),g=u.split("/");for(let h=0;h<f.length&&h<g.length;h++){const _=Xe(f[h],g[h]);if(_!==0)return _}return Xe(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=Xe(Vt(l.latitude),Vt(u.latitude));return f!==0?f:Xe(Vt(l.longitude),Vt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return bE(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,w,O,P;const f=l.fields||{},g=u.fields||{},h=(S=f[Gd])==null?void 0:S.arrayValue,_=(w=g[Gd])==null?void 0:w.arrayValue,T=Xe(((O=h==null?void 0:h.values)==null?void 0:O.length)||0,((P=_==null?void 0:_.values)==null?void 0:P.length)||0);return T!==0?T:bE(h,_)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===ld.mapValue&&u===ld.mapValue)return 0;if(l===ld.mapValue)return 1;if(u===ld.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),h=u.fields||{},_=Object.keys(h);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const S=um(g[T],_[T]);if(S!==0)return S;const w=Va(f[g[T]],h[_[T]]);if(w!==0)return w}return Xe(g.length,_.length)})(n.mapValue,e.mapValue);default:throw Me(23264,{he:t})}}function CE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=Vo(n),i=Vo(e),r=Xe(t.seconds,i.seconds);return r!==0?r:Xe(t.nanos,i.nanos)}function bE(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const l=Va(t[r],i[r]);if(l)return l}return Xe(t.length,i.length)}function Ua(n){return cm(n)}function cm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Vo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Uo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const l of t.values||[])r?r=!1:i+=",",i+=cm(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const u of i)l?l=!1:r+=",",r+=`${u}:${cm(t.fields[u])}`;return r+"}"})(n.mapValue):Me(61005,{value:n})}function _d(n){switch(Lo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=df(n);return e?16+_d(e):16;case 5:return 2*n.stringValue.length;case 6:return Uo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,l)=>r+_d(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Ir(i.fields,((l,u)=>{r+=l.length+_d(u)})),r})(n.mapValue);default:throw Me(13486,{value:n})}}function dm(n){return!!n&&"integerValue"in n}function ng(n){return!!n&&"arrayValue"in n}function wE(n){return!!n&&"nullValue"in n}function IE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Td(n){return!!n&&"mapValue"in n}function d4(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[_C])==null?void 0:i.stringValue)===TC}function ru(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ir(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ru(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ru(n.arrayValue.values[t]);return e}return{...n}}function f4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===c4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Td(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(t)}setAll(e){let t=dn.emptyPath(),i={},r=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,r),i={},r=[],t=f.popLast()}u?i[f.lastSegment()]=ru(u):r.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,r)}delete(e){const t=this.field(e.popLast());Td(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Td(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ir(t,((r,l)=>e[r]=l));for(const r of i)delete e[r]}clone(){return new li(ru(this.value))}}function EC(n){const e=[];return Ir(n.fields,((t,i)=>{const r=new dn([t]);if(Td(i)){const l=EC(i.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new xi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t,i,r,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new gn(e,0,ke.min(),ke.min(),ke.min(),li.empty(),0)}static newFoundDocument(e,t,i,r){return new gn(e,1,t,ke.min(),i,r,0)}static newNoDocument(e,t){return new gn(e,2,t,ke.min(),ke.min(),li.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,ke.min(),ke.min(),li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t){this.position=e,this.inclusive=t}}function RE(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(l.field.isKeyField()?i=Re.comparator(Re.fromName(u.referenceValue),t.key):i=Va(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function xE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!rs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t="asc"){this.field=e,this.dir=t}}function h4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{}class Jt extends SC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new m4(e,t,i):t==="array-contains"?new v4(e,i):t==="in"?new _4(e,i):t==="not-in"?new T4(e,i):t==="array-contains-any"?new E4(e,i):new Jt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new g4(e,i):new y4(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Va(t,this.value)):t!==null&&Lo(this.value)===Lo(t)&&this.matchesComparison(Va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends SC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new as(e,t)}matches(e){return AC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function AC(n){return n.op==="and"}function CC(n){return p4(n)&&AC(n)}function p4(n){for(const e of n.filters)if(e instanceof as)return!1;return!0}function fm(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+Ua(n.value);if(CC(n))return n.filters.map((e=>fm(e))).join(",");{const e=n.filters.map((t=>fm(t))).join(",");return`${n.op}(${e})`}}function bC(n,e){return n instanceof Jt?(function(i,r){return r instanceof Jt&&i.op===r.op&&i.field.isEqual(r.field)&&rs(i.value,r.value)})(n,e):n instanceof as?(function(i,r){return r instanceof as&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((l,u,f)=>l&&bC(u,r.filters[f])),!0):!1})(n,e):void Me(19439)}function wC(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ua(t.value)}`})(n):n instanceof as?(function(t){return t.op.toString()+" {"+t.getFilters().map(wC).join(" ,")+"}"})(n):"Filter"}class m4 extends Jt{constructor(e,t,i){super(e,t,i),this.key=Re.fromName(i.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class g4 extends Jt{constructor(e,t){super(e,"in",t),this.keys=IC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class y4 extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=IC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function IC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Re.fromName(i.referenceValue)))}class v4 extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ng(t)&&vu(t.arrayValue,this.value)}}class _4 extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vu(this.value.arrayValue,t)}}class T4 extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vu(this.value.arrayValue,t)}}class E4 extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ng(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>vu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,t=null,i=[],r=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function NE(n,e=null,t=[],i=[],r=null,l=null,u=null){return new S4(n,e,t,i,r,l,u)}function ig(n){const e=Le(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>fm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ua(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ua(i))).join(",")),e.Te=t}return e.Te}function sg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!h4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xE(n.startAt,e.startAt)&&xE(n.endAt,e.endAt)}function hm(n){return Re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t=null,i=[],r=[],l=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function A4(n,e,t,i,r,l,u,f){return new ff(n,e,t,i,r,l,u,f)}function og(n){return new ff(n)}function ME(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function C4(n){return n.collectionGroup!==null}function au(n){const e=Le(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Qt(dn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new qd(l,i))})),t.has(dn.keyField().canonicalString())||e.Ie.push(new qd(dn.keyField(),i))}return e.Ie}function ts(n){const e=Le(n);return e.Ee||(e.Ee=b4(e,au(n))),e.Ee}function b4(n,e){if(n.limitType==="F")return NE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new qd(r.field,l)}));const t=n.endAt?new Fd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Fd(n.startAt.position,n.startAt.inclusive):null;return NE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function pm(n,e,t){return new ff(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hf(n,e){return sg(ts(n),ts(e))&&n.limitType===e.limitType}function RC(n){return`${ig(ts(n))}|lt:${n.limitType}`}function Ta(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>wC(r))).join(", ")}]`),cf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Ua(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Ua(r))).join(",")),`Target(${i})`})(ts(n))}; limitType=${n.limitType})`}function pf(n,e){return e.isFoundDocument()&&(function(i,r){const l=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Re.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,r){for(const l of au(i))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const l of i.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,f,g){const h=RE(u,f,g);return u.inclusive?h<=0:h<0})(i.startAt,au(i),r)||i.endAt&&!(function(u,f,g){const h=RE(u,f,g);return u.inclusive?h>=0:h>0})(i.endAt,au(i),r))})(n,e)}function w4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xC(n){return(e,t)=>{let i=!1;for(const r of au(n)){const l=I4(r,e,t);if(l!==0)return l;i=i||r.field.isKeyField()}return 0}}function I4(n,e,t){const i=n.field.isKeyField()?Re.comparator(e.key,t.key):(function(l,u,f){const g=u.data.field(l),h=f.data.field(l);return g!==null&&h!==null?Va(g,h):Me(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,l]of i)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,((t,i)=>{for(const[r,l]of i)e(r,l)}))}isEmpty(){return hC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new Rt(Re.comparator);function Ls(){return R4}const NC=new Rt(Re.comparator);function eu(...n){let e=NC;for(const t of n)e=e.insert(t.key,t);return e}function MC(n){let e=NC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function vr(){return lu()}function DC(){return lu()}function lu(){return new Rr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const x4=new Rt(Re.comparator),N4=new Qt(Re.comparator);function We(...n){let e=N4;for(const t of n)e=e.add(t);return e}const M4=new Qt(Xe);function D4(){return M4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hd(e)?"-0":e}}function PC(n){return{integerValue:""+n}}function P4(n,e){return o4(e)?PC(e):rg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(){this._=void 0}}function k4(n,e,t){return n instanceof zd?(function(r,l){const u={fields:{[gC]:{stringValue:mC},[vC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&tg(l)&&(l=df(l)),l&&(u.fields[yC]=l),{mapValue:u}})(t,e):n instanceof _u?VC(n,e):n instanceof Tu?UC(n,e):(function(r,l){const u=kC(r,l),f=DE(u)+DE(r.Ae);return dm(u)&&dm(r.Ae)?PC(f):rg(r.serializer,f)})(n,e)}function V4(n,e,t){return n instanceof _u?VC(n,e):n instanceof Tu?UC(n,e):t}function kC(n,e){return n instanceof Kd?(function(i){return dm(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class zd extends mf{}class _u extends mf{constructor(e){super(),this.elements=e}}function VC(n,e){const t=LC(e);for(const i of n.elements)t.some((r=>rs(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Tu extends mf{constructor(e){super(),this.elements=e}}function UC(n,e){let t=LC(e);for(const i of n.elements)t=t.filter((r=>!rs(r,i)));return{arrayValue:{values:t}}}class Kd extends mf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function DE(n){return Vt(n.integerValue||n.doubleValue)}function LC(n){return ng(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function U4(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof _u&&r instanceof _u||i instanceof Tu&&r instanceof Tu?ka(i.elements,r.elements,rs):i instanceof Kd&&r instanceof Kd?rs(i.Ae,r.Ae):i instanceof zd&&r instanceof zd})(n.transform,e.transform)}class L4{constructor(e,t){this.version=e,this.transformResults=t}}class Ds{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ds}static exists(e){return new Ds(void 0,e)}static updateTime(e){return new Ds(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ed(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class gf{}function OC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new BC(n.key,Ds.none()):new Ru(n.key,n.data,Ds.none());{const t=n.data,i=li.empty();let r=new Qt(dn.comparator);for(let l of e.fields)if(!r.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),r=r.add(l)}return new xr(n.key,i,new xi(r.toArray()),Ds.none())}}function O4(n,e,t){n instanceof Ru?(function(r,l,u){const f=r.value.clone(),g=kE(r.fieldTransforms,l,u.transformResults);f.setAll(g),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof xr?(function(r,l,u){if(!Ed(r.precondition,l))return void l.convertToUnknownDocument(u.version);const f=kE(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(HC(r)),g.setAll(f),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function uu(n,e,t,i){return n instanceof Ru?(function(l,u,f,g){if(!Ed(l.precondition,u))return f;const h=l.value.clone(),_=VE(l.fieldTransforms,g,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof xr?(function(l,u,f,g){if(!Ed(l.precondition,u))return f;const h=VE(l.fieldTransforms,g,u),_=u.data;return _.setAll(HC(l)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(l,u,f){return Ed(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function H4(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),l=kC(i.transform,r||null);l!=null&&(t===null&&(t=li.empty()),t.set(i.field,l))}return t||null}function PE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ka(i,r,((l,u)=>U4(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ru extends gf{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xr extends gf{constructor(e,t,i,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function HC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function kE(n,e,t){const i=new Map;rt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,f=e.data.field(l.field);i.set(l.field,V4(u,f,t[r]))}return i}function VE(n,e,t){const i=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);i.set(r.field,k4(l,u,e))}return i}class BC extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B4 extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&O4(l,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=uu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=uu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=DC();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(r.key)?null:f;const g=OC(u,f);g!==null&&i.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&ka(this.mutations,e.mutations,((t,i)=>PE(t,i)))&&ka(this.baseMutations,e.baseMutations,((t,i)=>PE(t,i)))}}class ag{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){rt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return x4})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,i[u].version);return new ag(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Ze;function z4(n){switch(n){case ae.OK:return Me(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Me(15467,{code:n})}}function GC(n){if(n===void 0)return Us("GRPC error has no .code"),ae.UNKNOWN;switch(n){case qt.OK:return ae.OK;case qt.CANCELLED:return ae.CANCELLED;case qt.UNKNOWN:return ae.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ae.INTERNAL;case qt.UNAVAILABLE:return ae.UNAVAILABLE;case qt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case qt.NOT_FOUND:return ae.NOT_FOUND;case qt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case qt.ABORTED:return ae.ABORTED;case qt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case qt.DATA_LOSS:return ae.DATA_LOSS;default:return Me(39323,{code:n})}}(Ze=qt||(qt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=new Do([4294967295,4294967295],0);function UE(n){const e=K4().encode(n),t=new iC;return t.update(e),new Uint8Array(t.digest())}function LE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Do([t,i],0),new Do([r,l],0)]}class lg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new tu(`Invalid padding: ${t}`);if(i<0)throw new tu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new tu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Do.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Do.fromNumber(i)));return r.compare(Y4)===1&&(r=new Do([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=UE(e),[i,r]=LE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,r,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new lg(l,r,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=UE(e),[i,r]=LE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,r,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,i,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new yf(ke.min(),r,new Rt(Xe),Ls(),We())}}class xu{constructor(e,t,i,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new xu(i,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class FC{constructor(e,t){this.targetId=e,this.Ce=t}}class qC{constructor(e,t,i=fn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class OE{constructor(){this.ve=0,this.Fe=HE(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),i=We();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Me(38017,{changeType:l})}})),new xu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=HE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $4{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ls(),this.Je=ud(),this.He=ud(),this.Ye=new Rt(Xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(hm(l))if(i===0){const u=new Re(l.path);this.et(t,u,gn.newNoDocument(u,ke.min()))}else rt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),g=f?this.ct(f,e,u):1;if(g!==0){this.it(t);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:l=0}=t;let u,f;try{u=Uo(i).toUint8Array()}catch(g){if(g instanceof pC)return Pa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new lg(u,r,l)}catch(g){return Pa(g instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&hm(f.target)){const g=new Re(f.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,gn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=We();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((g=>{const h=this.ot(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const r=new yf(e,t,this.Ye,this.je,i);return this.je=Ls(),this.Je=ud(),this.He=ud(),this.Ye=new Rt(Xe),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new OE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qt(Xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qt(Xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new OE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ud(){return new Rt(Re.comparator)}function HE(){return new Rt(Re.comparator)}const J4={asc:"ASCENDING",desc:"DESCENDING"},Q4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X4={and:"AND",or:"OR"};class W4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mm(n,e){return n.useProto3Json||cf(e)?e:{value:e}}function Yd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function j4(n,e){return Yd(n,e.toTimestamp())}function ns(n){return rt(!!n,49232),ke.fromTimestamp((function(t){const i=Vo(t);return new St(i.seconds,i.nanos)})(n))}function ug(n,e){return gm(n,e).canonicalString()}function gm(n,e){const t=(function(r){return new It(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function KC(n){const e=It.fromString(n);return rt(XC(e),10190,{key:e.toString()}),e}function ym(n,e){return ug(n.databaseId,e.path)}function Pp(n,e){const t=KC(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re($C(t))}function YC(n,e){return ug(n.databaseId,e)}function Z4(n){const e=KC(n);return e.length===4?It.emptyPath():$C(e)}function vm(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $C(n){return rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BE(n,e,t){return{name:ym(n,e),fields:t.value.mapValue.fields}}function eO(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Me(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(h,_){return h.useProto3Json?(rt(_===void 0||typeof _=="string",58123),fn.fromBase64String(_||"")):(rt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),fn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const _=h.code===void 0?ae.UNKNOWN:GC(h.code);return new be(_,h.message||"")})(u);t=new qC(i,r,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Pp(n,i.document.name),l=ns(i.document.updateTime),u=i.document.createTime?ns(i.document.createTime):ke.min(),f=new li({mapValue:{fields:i.document.fields}}),g=gn.newFoundDocument(r,l,u,f),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Sd(h,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Pp(n,i.document),l=i.readTime?ns(i.readTime):ke.min(),u=gn.newNoDocument(r,l),f=i.removedTargetIds||[];t=new Sd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Pp(n,i.document),l=i.removedTargetIds||[];t=new Sd([],l,r,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:l}=i,u=new q4(r,l),f=i.targetId;t=new FC(f,u)}}return t}function tO(n,e){let t;if(e instanceof Ru)t={update:BE(n,e.key,e.value)};else if(e instanceof BC)t={delete:ym(n,e.key)};else if(e instanceof xr)t={update:BE(n,e.key,e.data),updateMask:cO(e.fieldMask)};else{if(!(e instanceof B4))return Me(16599,{Vt:e.type});t={verify:ym(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof zd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof _u)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Tu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Kd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Me(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:j4(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)})(n,e.precondition)),t}function nO(n,e){return n&&n.length>0?(rt(e!==void 0,14353),n.map((t=>(function(r,l){let u=r.updateTime?ns(r.updateTime):ns(l);return u.isEqual(ke.min())&&(u=ns(l)),new L4(u,r.transformResults||[])})(t,e)))):[]}function iO(n,e){return{documents:[YC(n,e.path)]}}function sO(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=YC(n,r);const l=(function(h){if(h.length!==0)return QC(as.create(h,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(h){if(h.length!==0)return h.map((_=>(function(S){return{field:Ea(S.field),direction:aO(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=mm(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function oO(n){let e=Z4(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){rt(i===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const S=JC(T);return S instanceof as&&CC(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(O){return new qd(Sa(O.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,cf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,w=T.values||[];return new Fd(w,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,w=T.values||[];return new Fd(w,S)})(t.endAt)),A4(e,r,u,l,f,"F",g,h)}function rO(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Sa(t.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Sa(t.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Sa(t.unaryFilter.field);return Jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Sa(t.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(Sa(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return as.create(t.compositeFilter.filters.map((i=>JC(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(t.compositeFilter.op))})(n):Me(30097,{filter:n})}function aO(n){return J4[n]}function lO(n){return Q4[n]}function uO(n){return X4[n]}function Ea(n){return{fieldPath:n.canonicalString()}}function Sa(n){return dn.fromServerFormat(n.fieldPath)}function QC(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(IE(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NAN"}};if(wE(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(IE(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NAN"}};if(wE(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(t.field),op:lO(t.op),value:t.value}}})(n):n instanceof as?(function(t){const i=t.getFilters().map((r=>QC(r)));return i.length===1?i[0]:{compositeFilter:{op:uO(t.op),filters:i}}})(n):Me(54877,{filter:n})}function cO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function XC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t,i,r,l=ke.min(),u=ke.min(),f=fn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.yt=e}}function fO(n){const e=oO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.Cn=new pO}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(ko.min())}updateCollectionGroup(e,t,i){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class pO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Qt(It.comparator),l=!r.has(i);return this.index[t]=r.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Qt(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WC=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(WC,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new La(0)}static cr(){return new La(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="LruGarbageCollector",mO=1048576;function qE([n,e],[t,i]){const r=Xe(n,t);return r===0?Xe(e,i):r}class gO{constructor(e){this.Ir=e,this.buffer=new Qt(qE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();qE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(FE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$a(t)?ye(FE,"Ignoring IndexedDB error during garbage collection: ",t):await Ya(t)}await this.Vr(3e5)}))}}class vO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(uf.ce);const i=new gO(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(GE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,l,u,f,g,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),_a()<=Qe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(f-u)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(h-g)+`ms
Total Duration: ${h-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function _O(n,e){return new vO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.changes=new Rr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?oe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&uu(i.mutation,r,xi.empty(),St.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,We()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=We()){const r=vr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((l=>{let u=eu();return l.forEach(((f,g)=>{u=u.insert(f,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=vr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,We())))}populateOverlays(e,t,i){const r=[];return i.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,r){let l=Ls();const u=lu(),f=(function(){return lu()})();return t.forEach(((g,h)=>{const _=i.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof xr)?l=l.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),uu(_.mutation,h,_.mutation.getFieldMask(),St.now())):u.set(h.key,xi.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>f.set(h,new EO(_,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=lu();let r=new Rt(((u,f)=>u-f)),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((g=>{const h=t.get(g);if(h===null)return;let _=i.get(g)||xi.empty();_=f.applyToLocalView(h,_),i.set(g,_);const T=(r.get(f.batchId)||We()).add(g);r=r.insert(f.batchId,T)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),h=g.key,_=g.value,T=DC();_.forEach((S=>{if(!l.has(S)){const w=OC(t.get(S),i.get(S));w!==null&&T.set(S,w),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return oe.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(u){return Re.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):C4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-l.size):oe.resolve(vr());let f=mu,g=l;return u.next((h=>oe.forEach(h,((_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{g=g.insert(_,S)}))))).next((()=>this.populateOverlays(e,h,l))).next((()=>this.computeViews(e,g,h,We()))).next((_=>({batchId:f,changes:MC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((i=>{let r=eu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const l=t.collectionGroup;let u=eu();return this.indexManager.getCollectionParents(e,l).next((f=>oe.forEach(f,(g=>{const h=(function(T,S){return new ff(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((_=>{_.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,r)))).next((u=>{l.forEach(((g,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,gn.newInvalidDocument(_)))}));let f=eu();return u.forEach(((g,h)=>{const _=l.get(g);_!==void 0&&uu(_.mutation,h,xi.empty(),St.now()),pf(t,h)&&(f=f.insert(g,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:ns(r.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:fO(r.bundledQuery),readTime:ns(r.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this.overlays=new Rt(Re.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=vr();return oe.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&i.set(r,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),oe.resolve()}getOverlaysForCollection(e,t,i){const r=vr(),l=t.length+1,u=new Re(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,h=g.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===l&&g.largestBatchId>i&&r.set(g.getKey(),g)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let l=new Rt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=l.get(h.largestBatchId);_===null&&(_=vr(),l=l.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const f=vr(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,_)=>f.set(h,_))),!(f.size()>=r)););return oe.resolve(f)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new F4(t,i));let l=this.qr.get(t);l===void 0&&(l=We(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.Qr=new Qt(en.$r),this.Ur=new Qt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new en(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new en(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Re(new It([])),i=new en(t,e),r=new en(t,e+1),l=[];return this.Ur.forEachInRange([i,r],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Re(new It([])),i=new en(t,e),r=new en(t,e+1);let l=We();return this.Ur.forEachInRange([i,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new en(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class en{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Re.comparator(e.key,t.key)||Xe(e.Yr,t.Yr)}static Kr(e,t){return Xe(e.Yr,t.Yr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(en.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new G4(l,t,i,r);this.mutationQueue.push(u);for(const f of r)this.Zr=this.Zr.add(new en(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),l=r<0?0:r;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?eg:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new en(t,0),r=new en(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,r],(u=>{const f=this.Xr(u.Yr);l.push(f)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qt(Xe);return t.forEach((r=>{const l=new en(r,0),u=new en(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{i=i.add(f.Yr)}))})),oe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let l=i;Re.isDocumentKey(l)||(l=l.child(""));const u=new en(new Re(l),0);let f=new Qt(Xe);return this.Zr.forEachWhile((g=>{const h=g.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(f=f.add(g.Yr)),!0)}),u),oe.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){rt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return oe.forEach(t.mutations,(r=>{const l=new en(r.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new en(t,0),r=this.Zr.firstAfterOrEqual(i);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.ri=e,this.docs=(function(){return new Rt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),l=r?r.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return oe.resolve(i?i.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let i=Ls();return t.forEach((r=>{const l=this.docs.get(r);i=i.insert(r,l?l.document.mutableCopy():gn.newInvalidDocument(r))})),oe.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let l=Ls();const u=t.path,f=new Re(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:h,value:{document:_}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||t4(e4(_),i)<=0||(r.has(_.key)||pf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,i,r){Me(9500)}ii(e,t){return oe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new RO(this)}getSize(e){return oe.resolve(this.size)}}class RO extends TO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.persistence=e,this.si=new Rr((t=>ig(t)),sg),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new cg,this.targetCount=0,this.ai=La.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new La(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,i){let r=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),oe.waitFor(l).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return oe.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),oe.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return oe.resolve(i)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,t){this.ui={},this.overlays={},this.ci=new uf(0),this.li=!1,this.li=!0,this.hi=new bO,this.referenceDelegate=e(this),this.Pi=new xO(this),this.indexManager=new hO,this.remoteDocumentCache=(function(r){return new IO(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new dO(t),this.Ii=new AO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new wO(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const r=new NO(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class NO extends i4{constructor(e){super(),this.currentSequenceNumber=e}}class dg{constructor(e){this.persistence=e,this.Ri=new cg,this.Vi=null}static mi(e){return new dg(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),oe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(i=>{const r=Re.fromPath(i);return this.gi(e,r).next((l=>{l||t.removeEntry(r,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $d{constructor(e,t){this.persistence=e,this.pi=new Rr((i=>r4(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=_O(this,t)}static mi(e,t){return new $d(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((i,r)=>this.br(e,i,r).next((l=>l?oe.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,l.removeEntry(u,ke.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_d(e.data.value)),t}br(e,t,i){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return oe.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=We(),r=We();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new fg(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Sk()?8:s4(vn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,r,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new MO;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(_a()<=Qe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(_a()<=Qe.DEBUG&&ye("QueryEngine","Query:",Ta(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(_a()<=Qe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ts(t))):oe.resolve())}ys(e,t){if(ME(t))return oe.resolve(null);let i=ts(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=pm(t,null,"F"),i=ts(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=We(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const h=this.Ds(t,f);return this.Cs(t,h,u,g.readTime)?this.ys(e,pm(t,null,"F")):this.vs(e,h,t,g)}))))})))))}ws(e,t,i,r){return ME(t)||r.isEqual(ke.min())?oe.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,r)?oe.resolve(null):(_a()<=Qe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ta(t)),this.vs(e,u,t,ZL(r,mu)).next((f=>f)))}))}Ds(e,t){let i=new Qt(xC(e));return t.forEach(((r,l)=>{pf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,i){return _a()<=Qe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ta(t)),this.ps.getDocumentsMatchingQuery(e,t,ko.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="LocalStore",PO=3e8;class kO{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Rt(Xe),this.xs=new Rr((l=>ig(l)),sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function VO(n,e,t,i){return new kO(n,e,t,i)}async function ZC(n,e){const t=Le(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let g=We();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}for(const h of l){f.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function UO(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,h,_){const T=h.batch,S=T.keys();let w=oe.resolve();return S.forEach((O=>{w=w.next((()=>_.getEntry(g,O))).next((P=>{const k=h.docVersions.get(O);rt(k!==null,48541),P.version.compareTo(k)<0&&(T.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),_.addEntry(P)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=We();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(g=g.add(f.batch.mutations[h].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function eb(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function LO(n,e){const t=Le(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const f=[];e.targetChanges.forEach(((_,T)=>{const S=r.get(T);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(fn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,i)),r=r.insert(T,w),(function(P,k,Q){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=PO?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,w,_)&&f.push(t.Pi.updateTargetData(l,w))}));let g=Ls(),h=We();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(OO(l,u,e.documentUpdates).next((_=>{g=_.ks,h=_.qs}))),!i.isEqual(ke.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return oe.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,h))).next((()=>g))})).then((l=>(t.Ms=r,l)))}function OO(n,e,t){let i=We(),r=We();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=Ls();return t.forEach(((f,g)=>{const h=l.get(f);g.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(f)),g.isNoDocument()&&g.version.isEqual(ke.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):ye(hg,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",g.version)})),{ks:u,qs:r}}))}function HO(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=eg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function BO(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((l=>l?(r=l,oe.resolve(r)):t.Pi.allocateTargetId(i).next((u=>(r=new Ro(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function _m(n,e,t){const i=Le(n),r=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!$a(u))throw u;ye(hg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function zE(n,e,t){const i=Le(n);let r=ke.min(),l=We();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,_){const T=Le(g),S=T.xs.get(_);return S!==void 0?oe.resolve(T.Ms.get(S)):T.Pi.getTargetData(h,_)})(i,u,ts(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?r:ke.min(),t?l:We()))).next((f=>(GO(i,w4(e),f),{documents:f,Qs:l})))))}function GO(n,e,t){let i=n.Os.get(e)||ke.min();t.forEach(((r,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class KE{constructor(){this.activeTargetIds=D4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FO{constructor(){this.Mo=new KE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new KE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="ConnectivityMonitor";class $E{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(YE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(YE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd=null;function Tm(){return cd===null?cd=(function(){return 268435456+Math.round(2147483648*Math.random())})():cd++,"0x"+cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="RestConnection",zO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Bd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,l){const u=Tm(),f=this.zo(e,t.toUriEncodedString());ye(kp,`Sending RPC '${e}' ${u}:`,f,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,l);const{host:h}=new URL(f),_=Fa(h);return this.Jo(e,f,g,i,_).then((T=>(ye(kp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Pa(kp,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,r,l,u){return this.Go(e,t,i,r,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ka})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),i&&i.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const i=zO[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class $O extends KO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,l){const u=Tm();return new Promise(((f,g)=>{const h=new sC;h.setWithCredentials(!0),h.listenOnce(oC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case vd.NO_ERROR:const T=h.getResponseJson();ye(pn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case vd.TIMEOUT:ye(pn,`RPC '${e}' ${u} timed out`),g(new be(ae.DEADLINE_EXCEEDED,"Request time out"));break;case vd.HTTP_ERROR:const S=h.getStatus();if(ye(pn,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const O=w==null?void 0:w.error;if(O&&O.status&&O.message){const P=(function(Q){const B=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(B)>=0?B:ae.UNKNOWN})(O.status);g(new be(P,O.message))}else g(new be(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else g(new be(ae.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ye(pn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ye(pn,`RPC '${e}' ${u} sending request:`,r),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const r=Tm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=lC(),f=aC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(g.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const _=l.join("");ye(pn,`Creating RPC '${e}' stream ${r}: ${_}`,g);const T=u.createWebChannel(_,g);this.I_(T);let S=!1,w=!1;const O=new YO({Yo:k=>{w?ye(pn,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(S||(ye(pn,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),ye(pn,`RPC '${e}' stream ${r} sending:`,k),T.send(k))},Zo:()=>T.close()}),P=(k,Q,B)=>{k.listen(Q,(W=>{try{B(W)}catch(re){setTimeout((()=>{throw re}),0)}}))};return P(T,Zl.EventType.OPEN,(()=>{w||(ye(pn,`RPC '${e}' stream ${r} transport opened.`),O.o_())})),P(T,Zl.EventType.CLOSE,(()=>{w||(w=!0,ye(pn,`RPC '${e}' stream ${r} transport closed`),O.a_(),this.E_(T))})),P(T,Zl.EventType.ERROR,(k=>{w||(w=!0,Pa(pn,`RPC '${e}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),O.a_(new be(ae.UNAVAILABLE,"The operation could not be completed")))})),P(T,Zl.EventType.MESSAGE,(k=>{var Q;if(!w){const B=k.data[0];rt(!!B,16349);const W=B,re=(W==null?void 0:W.error)||((Q=W[0])==null?void 0:Q.error);if(re){ye(pn,`RPC '${e}' stream ${r} received error:`,re);const he=re.status;let ce=(function(x){const L=qt[x];if(L!==void 0)return GC(L)})(he),N=re.message;ce===void 0&&(ce=ae.INTERNAL,N="Unknown error status: "+he+" with message "+re.message),w=!0,O.a_(new be(ce,N)),T.close()}else ye(pn,`RPC '${e}' stream ${r} received:`,B),O.u_(B)}})),P(f,rC.STAT_EVENT,(k=>{k.stat===lm.PROXY?ye(pn,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===lm.NOPROXY&&ye(pn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n){return new W4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t,i=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="PersistentStream";class nb{constructor(e,t,i,r,l,u,f,g){this.Mi=e,this.S_=i,this.b_=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Us(t.toString()),Us("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new be(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(JE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(JE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JO extends nb{constructor(e,t,i,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=eO(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ke.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?ns(u.readTime):ke.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=vm(this.serializer),t.addTarget=(function(l,u){let f;const g=u.target;if(f=hm(g)?{documents:iO(l,g)}:{query:sO(l,g).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=zC(l,u.resumeToken);const h=mm(l,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(ke.min())>0){f.readTime=Yd(l,u.snapshotVersion.toTimestamp());const h=mm(l,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=rO(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=vm(this.serializer),t.removeTarget=e,this.q_(t)}}class QO extends nb{constructor(e,t,i,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=nO(e.writeResults,e.commitTime),i=ns(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=vm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>tO(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{}class WO extends XO{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,gm(t,i),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(ae.UNKNOWN,l.toString())}))}Ho(e,t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,gm(t,i),r,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(ae.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class jO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Us(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="RemoteStore";class ZO{constructor(e,t,i,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Nr(this)&&(ye(br,"Restarting streams for network reachability change."),await(async function(g){const h=Le(g);h.Ea.add(4),await Nu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await _f(h)})(this))}))})),this.Ra=new jO(i,r)}}async function _f(n){if(Nr(n))for(const e of n.da)await e(!0)}async function Nu(n){for(const e of n.da)await e(!1)}function ib(n,e){const t=Le(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yg(t)?gg(t):Ja(t).O_()&&mg(t,e))}function pg(n,e){const t=Le(n),i=Ja(t);t.Ia.delete(e),i.O_()&&sb(t,e),t.Ia.size===0&&(i.O_()?i.L_():Nr(t)&&t.Ra.set("Unknown"))}function mg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ja(n).Y_(e)}function sb(n,e){n.Va.Ue(e),Ja(n).Z_(e)}function gg(n){n.Va=new $4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ja(n).start(),n.Ra.ua()}function yg(n){return Nr(n)&&!Ja(n).x_()&&n.Ia.size>0}function Nr(n){return Le(n).Ea.size===0}function ob(n){n.Va=void 0}async function e5(n){n.Ra.set("Online")}async function t5(n){n.Ia.forEach(((e,t)=>{mg(n,e)}))}async function n5(n,e){ob(n),yg(n)?(n.Ra.ha(e),gg(n)):n.Ra.set("Unknown")}async function i5(n,e,t){if(n.Ra.set("Online"),e instanceof qC&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const f of l.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.Ia.delete(f),r.Va.removeTarget(f))})(n,e)}catch(i){ye(br,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jd(n,i)}else if(e instanceof Sd?n.Va.Ze(e):e instanceof FC?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{const i=await eb(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(h);_&&l.Ia.set(h,_.withResumeToken(g.resumeToken,u))}})),f.targetMismatches.forEach(((g,h)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(fn.EMPTY_BYTE_STRING,_.snapshotVersion)),sb(l,g);const T=new Ro(_.target,g,h,_.sequenceNumber);mg(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){ye(br,"Failed to raise snapshot:",i),await Jd(n,i)}}async function Jd(n,e,t){if(!$a(e))throw e;n.Ea.add(1),await Nu(n),n.Ra.set("Offline"),t||(t=()=>eb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(br,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _f(n)}))}function rb(n,e){return e().catch((t=>Jd(n,t,e)))}async function Tf(n){const e=Le(n),t=Oo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eg;for(;s5(e);)try{const r=await HO(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,o5(e,r)}catch(r){await Jd(e,r)}ab(e)&&lb(e)}function s5(n){return Nr(n)&&n.Ta.length<10}function o5(n,e){n.Ta.push(e);const t=Oo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ab(n){return Nr(n)&&!Oo(n).x_()&&n.Ta.length>0}function lb(n){Oo(n).start()}async function r5(n){Oo(n).ra()}async function a5(n){const e=Oo(n);for(const t of n.Ta)e.ea(t.mutations)}async function l5(n,e,t){const i=n.Ta.shift(),r=ag.from(i,e,t);await rb(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Tf(n)}async function u5(n,e){e&&Oo(n).X_&&await(async function(i,r){if((function(u){return z4(u)&&u!==ae.ABORTED})(r.code)){const l=i.Ta.shift();Oo(i).B_(),await rb(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Tf(i)}})(n,e),ab(n)&&lb(n)}async function QE(n,e){const t=Le(n);t.asyncQueue.verifyOperationInProgress(),ye(br,"RemoteStore received new credentials");const i=Nr(t);t.Ea.add(3),await Nu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _f(t)}async function c5(n,e){const t=Le(n);e?(t.Ea.delete(2),await _f(t)):e||(t.Ea.add(2),await Nu(t),t.Ra.set("Unknown"))}function Ja(n){return n.ma||(n.ma=(function(t,i,r){const l=Le(t);return l.sa(),new JO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:e5.bind(null,n),t_:t5.bind(null,n),r_:n5.bind(null,n),H_:i5.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),yg(n)?gg(n):n.Ra.set("Unknown")):(await n.ma.stop(),ob(n))}))),n.ma}function Oo(n){return n.fa||(n.fa=(function(t,i,r){const l=Le(t);return l.sa(),new QO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:r5.bind(null,n),r_:u5.bind(null,n),ta:a5.bind(null,n),na:l5.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Tf(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(br,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,i,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=l,this.deferred=new Po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,l){const u=Date.now()+i,f=new vg(e,t,u,r,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(n,e){if(Us("AsyncQueue",`${e}: ${n}`),$a(n))return new be(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{static emptySet(e){return new Na(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Re.comparator(t.key,i.key):(t,i)=>Re.comparator(t.key,i.key),this.keyedMap=eu(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Na;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.ga=new Rt(Re.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Oa{constructor(e,t,i,r,l,u,f,g,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Oa(e,t,Na.emptySet(t),u,i,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class f5{constructor(){this.queries=WE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Le(t),l=r.queries;r.queries=WE(),l.forEach(((u,f)=>{for(const g of f.Sa)g.onError(i)}))})(this,new be(ae.ABORTED,"Firestore shutting down"))}}function WE(){return new Rr((n=>RC(n)),hf)}async function h5(n,e){const t=Le(n);let i=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(i=2):(l=new d5,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const f=_g(u,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Tg(t)}async function p5(n,e){const t=Le(n),i=e.query;let r=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function m5(n,e){const t=Le(n);let i=!1;for(const r of e){const l=r.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(r)&&(i=!0);u.wa=r}}i&&Tg(t)}function g5(n,e,t){const i=Le(n),r=i.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);i.queries.delete(e)}function Tg(n){n.Ca.forEach((e=>{e.next()}))}var Em,jE;(jE=Em||(Em={})).Ma="default",jE.Cache="cache";class y5{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Oa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.key=e}}class cb{constructor(e){this.key=e}}class v5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=xC(e),this.tu=new Na(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new XE,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const S=r.get(_),w=pf(this.query,T)?T:null,O=!!S&&this.mutatedKeys.has(S.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let k=!1;S&&w?S.data.isEqual(w.data)?O!==P&&(i.track({type:3,doc:w}),k=!0):this.su(S,w)||(i.track({type:2,doc:w}),k=!0,(g&&this.eu(w,g)>0||h&&this.eu(w,h)<0)&&(f=!0)):!S&&w?(i.track({type:0,doc:w}),k=!0):S&&!w&&(i.track({type:1,doc:S}),k=!0,(g||h)&&(f=!0)),k&&(w?(u=u.add(w),l=P?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(w,O){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:k})}};return P(w)-P(O)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const f=t&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,h=g!==this.Za;return this.Za=g,u.length!==0||h?{snapshot:new Oa(this.query,e.tu,l,u,e.mutatedKeys,g===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new XE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=We(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new cb(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new ub(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=We();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Oa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Eg="SyncEngine";class _5{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class T5{constructor(e){this.key=e,this.hu=!1}}class E5{constructor(e,t,i,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Rr((f=>RC(f)),hf),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(Re.comparator),this.Au=new Map,this.Ru=new cg,this.Vu={},this.mu=new Map,this.fu=La.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S5(n,e,t=!0){const i=gb(n);let r;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await db(i,e,t,!0),r}async function A5(n,e){const t=gb(n);await db(t,e,!0,!1)}async function db(n,e,t,i){const r=await BO(n.localStore,ts(e)),l=r.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await C5(n,e,l,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&ib(n.remoteStore,r),f}async function C5(n,e,t,i,r){n.pu=(T,S,w)=>(async function(P,k,Q,B){let W=k.view.ru(Q);W.Cs&&(W=await zE(P.localStore,k.query,!1).then((({documents:N})=>k.view.ru(N,W))));const re=B&&B.targetChanges.get(k.targetId),he=B&&B.targetMismatches.get(k.targetId)!=null,ce=k.view.applyChanges(W,P.isPrimaryClient,re,he);return eS(P,k.targetId,ce.au),ce.snapshot})(n,T,S,w);const l=await zE(n.localStore,e,!0),u=new v5(e,l.Qs),f=u.ru(l.documents),g=xu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=u.applyChanges(f,n.isPrimaryClient,g);eS(n,t,h.au);const _=new _5(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function b5(n,e,t){const i=Le(n),r=i.Tu.get(e),l=i.Iu.get(r.targetId);if(l.length>1)return i.Iu.set(r.targetId,l.filter((u=>!hf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await _m(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&pg(i.remoteStore,r.targetId),Sm(i,r.targetId)})).catch(Ya)):(Sm(i,r.targetId),await _m(i.localStore,r.targetId,!0))}async function w5(n,e){const t=Le(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),pg(t.remoteStore,i.targetId))}async function I5(n,e,t){const i=k5(n);try{const r=await(function(u,f){const g=Le(u),h=St.now(),_=f.reduce(((w,O)=>w.add(O.key)),We());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let O=Ls(),P=We();return g.Ns.getEntries(w,_).next((k=>{O=k,O.forEach(((Q,B)=>{B.isValidDocument()||(P=P.add(Q))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,O))).next((k=>{T=k;const Q=[];for(const B of f){const W=H4(B,T.get(B.key).overlayedDocument);W!=null&&Q.push(new xr(B.key,W,EC(W.value.mapValue),Ds.exists(!0)))}return g.mutationQueue.addMutationBatch(w,h,Q,f)})).next((k=>{S=k;const Q=k.applyToLocalDocumentSet(T,P);return g.documentOverlayCache.saveOverlays(w,k.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:MC(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,f,g){let h=u.Vu[u.currentUser.toKey()];h||(h=new Rt(Xe)),h=h.insert(f,g),u.Vu[u.currentUser.toKey()]=h})(i,r.batchId,t),await Mu(i,r.changes),await Tf(i.remoteStore)}catch(r){const l=_g(r,"Failed to persist write");t.reject(l)}}async function fb(n,e){const t=Le(n);try{const i=await LO(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=t.Au.get(l);u&&(rt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?rt(u.hu,14607):r.removedDocuments.size>0&&(rt(u.hu,42227),u.hu=!1))})),await Mu(t,i,e)}catch(i){await Ya(i)}}function ZE(n,e,t){const i=Le(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const g=Le(u);g.onlineState=f;let h=!1;g.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(f)&&(h=!0)})),h&&Tg(g)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function R5(n,e,t){const i=Le(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),l=r&&r.key;if(l){let u=new Rt(Re.comparator);u=u.insert(l,gn.newNoDocument(l,ke.min()));const f=We().add(l),g=new yf(ke.min(),new Map,new Rt(Xe),u,f);await fb(i,g),i.du=i.du.remove(l),i.Au.delete(e),Sg(i)}else await _m(i.localStore,e,!1).then((()=>Sm(i,e,t))).catch(Ya)}async function x5(n,e){const t=Le(n),i=e.batch.batchId;try{const r=await UO(t.localStore,e);pb(t,i,null),hb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Mu(t,r)}catch(r){await Ya(r)}}async function N5(n,e,t){const i=Le(n);try{const r=await(function(u,f){const g=Le(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return g.mutationQueue.lookupMutationBatch(h,f).next((T=>(rt(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(h,T)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>g.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);pb(i,e,t),hb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Mu(i,r)}catch(r){await Ya(r)}}function hb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function pb(n,e,t){const i=Le(n);let r=i.Vu[i.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Sm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||mb(n,i)}))}function mb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(pg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Sg(n))}function eS(n,e,t){for(const i of t)i instanceof ub?(n.Ru.addReference(i.key,e),M5(n,i)):i instanceof cb?(ye(Eg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||mb(n,i.key)):Me(19791,{wu:i})}function M5(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ye(Eg,"New document in limbo: "+t),n.Eu.add(i),Sg(n))}function Sg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Re(It.fromString(e)),i=n.fu.next();n.Au.set(i,new T5(t)),n.du=n.du.insert(t,i),ib(n.remoteStore,new Ro(ts(og(t.path)),i,"TargetPurposeLimboResolution",uf.ce))}}async function Mu(n,e,t){const i=Le(n),r=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{u.push(i.pu(g,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(h){r.push(h);const T=fg.As(g.targetId,h);l.push(T)}})))})),await Promise.all(u),i.Pu.H_(r),await(async function(g,h){const _=Le(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(h,(S=>oe.forEach(S.Es,(w=>_.persistence.referenceDelegate.addReference(T,S.targetId,w))).next((()=>oe.forEach(S.ds,(w=>_.persistence.referenceDelegate.removeReference(T,S.targetId,w)))))))))}catch(T){if(!$a(T))throw T;ye(hg,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const w=_.Ms.get(S),O=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(O);_.Ms=_.Ms.insert(S,P)}}})(i.localStore,l))}async function D5(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){ye(Eg,"User change. New user:",e.toKey());const i=await ZC(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new be(ae.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Mu(t,i.Ls)}}function P5(n,e){const t=Le(n),i=t.Au.get(e);if(i&&i.hu)return We().add(i.key);{let r=We();const l=t.Iu.get(e);if(!l)return r;for(const u of l){const f=t.Tu.get(u);r=r.unionWith(f.view.nu)}return r}}function gb(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R5.bind(null,e),e.Pu.H_=m5.bind(null,e.eventManager),e.Pu.yu=g5.bind(null,e.eventManager),e}function k5(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N5.bind(null,e),e}class Qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return VO(this.persistence,new DO,e.initialUser,this.serializer)}Cu(e){return new jC(dg.mi,this.serializer)}Du(e){return new FO}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qd.provider={build:()=>new Qd};class V5 extends Qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){rt(this.persistence.referenceDelegate instanceof $d,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new yO(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new jC((i=>$d.mi(i,t)),this.serializer)}}class Am{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ZE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D5.bind(null,this.syncEngine),await c5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f5})()}createDatastore(e){const t=vf(e.databaseInfo.databaseId),i=(function(l){return new $O(l)})(e.databaseInfo);return(function(l,u,f,g){return new WO(l,u,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,l,u,f){return new ZO(i,r,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>ZE(this.syncEngine,t,0)),(function(){return $E.v()?new $E:new qO})())}createSyncEngine(e,t){return(function(r,l,u,f,g,h,_){const T=new E5(r,l,u,f,g,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Le(r);ye(br,"RemoteStore shutting down."),l.Ea.add(5),await Nu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Am.provider={build:()=>new Am};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Us("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="FirestoreClient";class L5{constructor(e,t,i,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=mn.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{ye(Ho,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ye(Ho,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=_g(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Up(n,e){n.asyncQueue.verifyOperationInProgress(),ye(Ho,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await ZC(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function tS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await O5(n);ye(Ho,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>QE(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>QE(e.remoteStore,r))),n._onlineComponents=e}async function O5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(Ho,"Using user provided OfflineComponentProvider");try{await Up(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ae.FAILED_PRECONDITION||r.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Pa("Error using user provided cache. Falling back to memory cache: "+t),await Up(n,new Qd)}}else ye(Ho,"Using default OfflineComponentProvider"),await Up(n,new V5(void 0));return n._offlineComponents}async function yb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(Ho,"Using user provided OnlineComponentProvider"),await tS(n,n._uninitializedComponentsProvider._online)):(ye(Ho,"Using default OnlineComponentProvider"),await tS(n,new Am))),n._onlineComponents}function H5(n){return yb(n).then((e=>e.syncEngine))}async function B5(n){const e=await yb(n),t=e.eventManager;return t.onListen=S5.bind(null,e.syncEngine),t.onUnlisten=b5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=A5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=w5.bind(null,e.syncEngine),t}function G5(n,e,t={}){const i=new Po;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,h){const _=new U5({next:S=>{_.Nu(),u.enqueueAndForget((()=>p5(l,T)));const w=S.docs.has(f);!w&&S.fromCache?h.reject(new be(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&g&&g.source==="server"?h.reject(new be(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new y5(og(f.path),_,{includeMetadataChanges:!0,qa:!0});return h5(l,T)})(await B5(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="firestore.googleapis.com",iS=!0;class sS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_b,this.ssl=iS}else this.host=e.host,this.ssl=e.ssl??iS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mO)throw new be(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ag{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new GL;switch(i.type){case"firstParty":return new KL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new be(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=nS.get(t);i&&(ye("ComponentProvider","Removing Datastore"),nS.delete(t),i.terminate())})(this),Promise.resolve()}}function F5(n,e,t,i={}){var h;n=pu(n,Ag);const r=Fa(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(_A(`https://${f}`),TA("Firestore",!0)),l.host!==_b&&l.host!==f&&Pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:r,emulatorOptions:i};if(!Er(g,u)&&(n._setSettings(g),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=mn.MOCK_USER;else{_=hk(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new be(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new mn(S)}n._authCredentials=new FL(new cC(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Cg(this.firestore,e,this._query)}}class tn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}toJSON(){return{type:tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Iu(t,tn._jsonSchema))return new tn(e,i||null,new Re(It.fromString(t.referencePath)))}}tn._jsonSchemaVersion="firestore/documentReference/1.0",tn._jsonSchema={type:zt("string",tn._jsonSchemaVersion),referencePath:zt("string")};class Eu extends Cg{constructor(e,t,i){super(e,t,og(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new Re(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function Lp(n,e,...t){if(n=fi(n),arguments.length===1&&(e=jm.newId()),WL("doc","path",e),n instanceof Ag){const i=It.fromString(e,...t);return vE(i),new tn(n,null,new Re(i))}{if(!(n instanceof tn||n instanceof Eu))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(It.fromString(e,...t));return vE(i),new tn(n.firestore,n instanceof Eu?n.converter:null,new Re(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="AsyncQueue";class rS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tb(this,"async_queue_retry"),this._c=()=>{const i=Vp();i&&ye(oS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Vp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Vp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Po;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$a(e))throw e;ye(oS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Us("INTERNAL UNHANDLED ERROR: ",aS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=vg.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Me(47125,{Pc:aS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function aS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class bg extends Ag{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new rS,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rS(e),this._firestoreClient=void 0,await e}}}function q5(n,e){const t=typeof n=="object"?n:CA(),i=typeof n=="string"?n:Bd,r=Bm(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const l=dk("firestore");l&&F5(r,...l)}return r}function Tb(n){if(n._terminated)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||z5(n),n._firestoreClient}function z5(n){var i,r,l;const e=n._freezeSettings(),t=(function(f,g,h,_){return new u4(f,g,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,vb(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new L5(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ui(fn.fromBase64String(e))}catch(t){throw new be(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ui(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Iu(e,ui._jsonSchema))return ui.fromBase64String(e.bytes)}}ui._jsonSchemaVersion="firestore/bytes/1.0",ui._jsonSchema={type:zt("string",ui._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:is._jsonSchemaVersion}}static fromJSON(e){if(Iu(e,is._jsonSchema))return new is(e.latitude,e.longitude)}}is._jsonSchemaVersion="firestore/geoPoint/1.0",is._jsonSchema={type:zt("string",is._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Iu(e,ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ss(e.vectorValues);throw new be(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ss._jsonSchemaVersion="firestore/vectorValue/1.0",ss._jsonSchema={type:zt("string",ss._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=/^__.*__$/;class Y5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new xr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ru(e,this.data,t,this.fieldTransforms)}}function Sb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:n})}}class Ig{constructor(e,t,i,r,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Sb(this.Ac)&&K5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $5{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||vf(e)}Cc(e,t,i,r=!1){return new Ig({Ac:e,methodName:t,Dc:i,path:dn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J5(n){const e=n._freezeSettings(),t=vf(n._databaseId);return new $5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Q5(n,e,t,i,r,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);wb("Data must be an object, but it was:",u,i);const f=Cb(i,u);let g,h;if(l.merge)g=new xi(u.fieldMask),h=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const S=X5(e,T,t);if(!u.contains(S))throw new be(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);j5(_,S)||_.push(S)}g=new xi(_),h=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,h=u.fieldTransforms;return new Y5(new li(f),g,h)}function Ab(n,e){if(bb(n=fi(n)))return wb("Unsupported field value:",e,n),Cb(n,e);if(n instanceof Eb)return(function(i,r){if(!Sb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const l=[];let u=0;for(const f of i){let g=Ab(f,r.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,r){if((i=fi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return P4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=St.fromDate(i);return{timestampValue:Yd(r.serializer,l)}}if(i instanceof St){const l=new St(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yd(r.serializer,l)}}if(i instanceof is)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ui)return{bytesValue:zC(r.serializer,i._byteString)};if(i instanceof tn){const l=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ug(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ss)return(function(u,f){return{mapValue:{fields:{[_C]:{stringValue:TC},[Gd]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return rg(f.serializer,h)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Zm(i)}`)})(n,e)}function Cb(n,e){const t={};return hC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(n,((i,r)=>{const l=Ab(r,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function bb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof is||n instanceof ui||n instanceof tn||n instanceof Eb||n instanceof ss)}function wb(n,e,t){if(!bb(t)||!dC(t)){const i=Zm(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function X5(n,e,t){if((e=fi(e))instanceof wg)return e._internalPath;if(typeof e=="string")return Ib(n,e);throw Xd("Field path arguments must be of type string or ",n,!1,void 0,t)}const W5=new RegExp("[~\\*/\\[\\]]");function Ib(n,e,t){if(e.search(W5)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wg(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xd(n,e,t,i,r){const l=i&&!i.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${i}`),u&&(g+=` in document ${r}`),g+=")"),new be(ae.INVALID_ARGUMENT,f+n+g)}function j5(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t,i,r,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Z5 extends Rb{data(){return super.data()}}function xb(n,e){return typeof e=="string"?Ib(n,e):e instanceof wg?e._internalPath:e._delegate._internalPath}class e6{convertValue(e,t="none"){switch(Lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ir(e,((r,l)=>{i[r]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,r,l;const t=(l=(r=(i=e.fields)==null?void 0:i[Gd].arrayValue)==null?void 0:r.values)==null?void 0:l.map((u=>Vt(u.doubleValue)));return new ss(t)}convertGeoPoint(e){return new is(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=df(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const t=Vo(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=It.fromString(e);rt(XC(i),9688,{name:e});const r=new yu(i.get(1),i.get(3)),l=new Re(i.popFirst(5));return r.isEqual(t)||Us(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tr extends Rb{constructor(e,t,i,r,l,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(xb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Tr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Tr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Tr._jsonSchema={type:zt("string",Tr._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Ad extends Tr{data(e={}){return super.data(e)}}class cu{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ad(this._firestore,this._userDataWriter,i.key,i,new nu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const g=new Ad(r._firestore,r._userDataWriter,f.doc.key,f.doc,new nu(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Ad(r._firestore,r._userDataWriter,f.doc.key,f.doc,new nu(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:n6(f.type),doc:g,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function n6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(n){n=pu(n,tn);const e=pu(n.firestore,bg);return G5(Tb(e),n._key).then((t=>r6(e,n,t)))}cu._jsonSchemaVersion="firestore/querySnapshot/1.0",cu._jsonSchema={type:zt("string",cu._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class s6 extends e6{constructor(e){super(),this.firestore=e}convertBytes(e){return new ui(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}}function lS(n,e,t){n=pu(n,tn);const i=pu(n.firestore,bg),r=t6(n.converter,e,t);return o6(i,[Q5(J5(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Ds.none())])}function o6(n,e){return(function(i,r){const l=new Po;return i.asyncQueue.enqueueAndForget((async()=>I5(await H5(i),r,l))),l.promise})(Tb(n),e)}function r6(n,e,t){const i=t.docs.get(e._key),r=new s6(n);return new Tr(n,r,e._key,i,new nu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Ka=r})(qa),Ma(new Sr("firestore",((i,{instanceIdentifier:r,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new bg(new qL(i.getProvider("auth-internal")),new YL(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new be(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(h.options.projectId,_)})(u,r),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Mo(pE,mE,e),Mo(pE,mE,"esm2020")})();var a6="firebase",l6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mo(a6,l6,"app");const u6={apiKey:"AIzaSyDj1IdjKsPsC0UKQeUtP8v3sCPo4IRQdt0",authDomain:"web-app-8b273.firebaseapp.com",projectId:"web-app-8b273",storageBucket:"web-app-8b273.firebasestorage.app",messagingSenderId:"512346814244",appId:"1:512346814244:web:a8322ebf02727a508ae5b1",measurementId:"G-B9H3XP1PNB"},Nb=AA(u6),Op=HL(Nb),c6=new xs,Hp=q5(Nb),Mb=le.createContext(void 0),d6=({children:n})=>{const[e,t]=le.useState(null),[i,r]=le.useState(!0),[l,u]=le.useState(null),[f,g]=le.useState(null),h=async P=>{try{const k=Lp(Hp,"users",P),Q=await i6(k);Q.exists()?u(Q.data().geminiApiKey||null):u(null)}catch(k){console.error("Error fetching API key:",k),u(null)}};le.useEffect(()=>{const P=IU(Op,async k=>{t(k),k?await h(k.uid):u(null),r(!1)});return()=>P()},[]);const _=()=>g(null),T=async()=>{g(null);try{await JU(Op,c6)}catch(P){console.error("Error signing in with Google",P);let k="Login failed. Please try again.";if(P.code==="auth/configuration-not-found")k=` Firebase Console 
 Authentication  'Get Started'`;else if(P.code==="auth/operation-not-allowed")k=` Google 
 Firebase Console > Authentication > Sign-in method  Google`;else if(P.code==="auth/unauthorized-domain")k=` (Unauthorized Domain)

 (${window.location.hostname})  Firebase 
 Firebase Console > Authentication > Settings > Authorized domains `;else{if(P.code==="auth/popup-closed-by-user")return;P.message&&(k=`Login failed: ${P.message}`)}g(k)}},S=async()=>{try{await RU(Op),u(null),g(null)}catch(P){console.error("Error signing out",P)}},w=async P=>{if(e)try{await lS(Lp(Hp,"users",e.uid),{geminiApiKey:P,updatedAt:new Date().toISOString(),email:e.email},{merge:!0}),u(P)}catch(k){throw console.error("Error saving API key:",k),k}},O=async()=>{if(e)try{await lS(Lp(Hp,"users",e.uid),{geminiApiKey:null,updatedAt:new Date().toISOString()},{merge:!0}),u(null)}catch(P){throw console.error("Error removing API key:",P),P}};return C.jsx(Mb.Provider,{value:{user:e,loading:i,apiKey:l,error:f,signInWithGoogle:T,signOut:S,saveApiKey:w,removeApiKey:O,clearError:_},children:n})},Db=()=>{const n=le.useContext(Mb);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},f6=()=>{const{user:n,apiKey:e,saveApiKey:t,removeApiKey:i,signOut:r}=Db(),[l,u]=le.useState([{id:"1",date:new Date().toISOString().split("T")[0],dateType:"date",categorizedContent:{},otherInformation:""}]),[f,g]=le.useState("profile"),[h,_]=le.useState(!1),[T,S]=le.useState(""),[w,O]=le.useState([]),[P,k]=le.useState(-1),[Q,B]=le.useState(!1),[W,re]=le.useState(!1),[he,ce]=le.useState(!1),[N,M]=le.useState(null),[x,L]=le.useState({age:"65",gender:"male",underlying_diseases:["Hypertension","Diabetes Mellitus"],control_quality:"",management_modality:"",follow_up_status:""}),[U,q]=le.useState("himself"),[D,Ve]=le.useState(""),[at,j]=le.useState(null),[ue,Ee]=le.useState(null),[Be,Ce]=le.useState(""),[H,ne]=le.useState(!1),[de,pe]=le.useState(""),[Ie,Ne]=le.useState(!1),Ge=le.useRef(null),[yt,lt]=le.useState(260),[Cn,hi]=le.useState(300),[kn,pi]=le.useState(380),[Xt,ls]=le.useState(!1),[$n,us]=le.useState(null),mi=le.useRef(!1),At=le.useMemo(()=>{for(let ee=l.length-1;ee>=0;ee--){const ge=l[ee].categorizedContent["Definitive diagnosis"];if(ge&&ge.trim())return ge}return"Pending"},[l]),_t=ee=>ge=>{mi.current=!0,ge.preventDefault();const Te=ge.clientX,Ae=ge.clientY,et=ee==="sidebar"?yt:Cn,Yt=kn,Mt=Qn=>{mi.current&&(ee==="sidebar"?lt(Math.max(200,Math.min(600,et+(Qn.clientX-Te)))):ee==="timeline"?hi(Math.max(200,Math.min(600,et+(Qn.clientX-Te)))):ee==="genArea"&&pi(Math.max(200,Math.min(window.innerHeight-100,Yt-(Qn.clientY-Ae)))))},Vi=()=>{mi.current=!1,document.removeEventListener("mousemove",Mt),document.removeEventListener("mouseup",Vi)};document.addEventListener("mousemove",Mt),document.addEventListener("mouseup",Vi)},Jn=()=>{const ee=Date.now().toString();u([...l,{id:ee,date:"",dateType:"date",categorizedContent:{},otherInformation:""}]),g(ee)},Go=ee=>{if(l.length<=1)return alert("Must have at least one timepoint.");const ge=l.findIndex(Te=>Te.id===ee);M({id:ee,index:ge})},Gs=()=>{if(!N)return;const{id:ee,index:ge}=N;u(Te=>{var et,Yt;const Ae=Te.filter(Mt=>Mt.id!==ee);return f===ee&&g(((et=Ae[ge])==null?void 0:et.id)||((Yt=Ae[ge-1])==null?void 0:Yt.id)||"profile"),Ae}),M(null)},Kt=(ee,ge)=>{u(Te=>Te.map(Ae=>Ae.id===ee?{...Ae,...ge}:Ae))},Vn=(ee,ge)=>{const Te=l.find(Ae=>Ae.id===ge);Te&&u(Ae=>Ae.map(et=>{if(et.id===ee){const Yt={...et.categorizedContent};Object.keys(Te.categorizedContent).forEach(Vi=>{const Qn=Te.categorizedContent[Vi];if(Qn){const Ln=Yt[Vi]||"";Yt[Vi]=Ln?`${Ln}, ${Qn}`:Qn}});let Mt=et.otherInformation;return Te.otherInformation&&(Mt=Mt?`${Mt}
${Te.otherInformation}`:Te.otherInformation),{...et,categorizedContent:Yt,otherInformation:Mt}}return et}))},Un=(ee,ge)=>{if(f){if(f==="profile"){ee==="Underlying disease"&&L(Te=>({...Te,underlying_diseases:Array.from(new Set([...Te.underlying_diseases,ge]))}));return}us({category:ee,timestamp:Date.now()}),u(Te=>Te.map(Ae=>{if(Ae.id===f){const et=Ae.categorizedContent[ee]||"";return{...Ae,categorizedContent:{...Ae.categorizedContent,[ee]:et?`${et}, ${ge}`:ge}}}return Ae}))}},vt=()=>({patient_profile:{age:parseInt(x.age)||0,gender:x.gender,informant:U,underlying_disease:x.underlying_diseases,control_status:{quality:x.control_quality,modality:x.management_modality,follow_up:x.follow_up_status}},timepoints:l.map(ee=>({date:ee.date,vital_sign:ee.categorizedContent["Vital Sign"]||"",symptom:ee.categorizedContent.Symptom||"",negative_symptom:ee.categorizedContent["Negative Symptom"]||"",medical_facility:ee.categorizedContent["Medical Facility"]||"",tentative_diagnosis:ee.categorizedContent["Tentative Diagnosis"]||"",underlying_disease:ee.categorizedContent["Underlying disease"]||"",definitive_diagnosis:ee.categorizedContent["Definitive diagnosis"]||"",physical_examination:ee.categorizedContent["Physical examination"]||"",lab_data:ee.categorizedContent["Lab data"]||"",image_finding:ee.categorizedContent["Image finding"]||"",treatment:ee.categorizedContent.Treatment||"",other_information:ee.otherInformation||""}))}),bn=ee=>{const Te=[...w.slice(0,P+1),ee];O(Te),k(Te.length-1),S(ee)},ki=async()=>{if(!e){re(!0);return}_(!0);const ee=vt(),ge=await ek(ee,e);bn(ge),_(!1)},gi=async ee=>{if(!e){re(!0);return}const ge=ee||de;if(!ge.trim()||!T)return;Ne(!0);const Te=vt(),Ae=await tk(Te,T,ge,e);bn(Ae),Ne(!1),ee||pe("")},Fs=()=>{if(P>0){const ee=P-1;k(ee),S(w[ee])}},qs=()=>{if(P<w.length-1){const ee=P+1;k(ee),S(w[ee])}},_n=ee=>{k(ee),S(w[ee]),B(!1)},wt=()=>{const ee=Ge.current;if(!ee)return;const ge=ee.selectionStart,Te=ee.selectionEnd,Ae=ee.value.substring(ge,Te).trim();if(Ae.length>0){const et=ee.getBoundingClientRect();Ve(Ae),j({start:ge,end:Te}),Ee({x:et.left+50,y:et.top+50})}else Ve(""),j(null),Ee(null)},sn=async()=>{if(!e){re(!0);return}if(!D||!Be||!at)return;ne(!0);const ee=vt(),ge=await nk(ee,T,D,Be,e),Te=T.substring(0,at.start),Ae=T.substring(at.end),et=Te+ge+Ae;bn(et),ne(!1),Ee(null),Ve(""),Ce("")},ze=()=>{T&&(navigator.clipboard.writeText(T),ce(!0),setTimeout(()=>ce(!1),2e3))},F=l.find(ee=>ee.id===f),ve=!e&&!W;return C.jsxs("div",{className:"h-screen w-screen flex flex-col bg-slate-50 text-slate-800 font-sans overflow-hidden",children:[C.jsx(BR,{isOpen:!!N,onClose:()=>M(null),onConfirm:Gs,title:"Delete Timepoint",message:"Are you sure?"}),C.jsx(FR,{isOpen:ve||W,onSave:async ee=>{await t(ee),re(!1)},isDismissible:!!e,onDismiss:()=>re(!1)}),Q&&C.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>B(!1)}),C.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[C.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-blue-700",children:[C.jsx(o_,{className:"w-5 h-5"}),C.jsx("h3",{className:"font-bold",children:"Version History"})]}),C.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:C.jsx(du,{className:"w-5 h-5"})})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[w.length===0&&C.jsx("p",{className:"text-center text-slate-400 py-10",children:"No history available yet."}),[...w].reverse().map((ee,ge)=>{const Te=w.length-1-ge,Ae=Te===P;return C.jsxs("button",{onClick:()=>_n(Te),className:`w-full text-left p-4 rounded-xl border-2 transition-all flex items-start space-x-4 ${Ae?"border-blue-500 bg-blue-50":"border-slate-100 hover:border-blue-200 hover:bg-slate-50"}`,children:[C.jsx("div",{className:`mt-1 p-2 rounded-lg ${Ae?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:C.jsx(zI,{className:"w-4 h-4"})}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsxs("div",{className:"flex items-center justify-between mb-1",children:[C.jsxs("span",{className:"font-bold text-sm",children:["Version ",Te+1]}),Ae&&C.jsx("span",{className:"text-[10px] font-black uppercase text-blue-600 bg-blue-100 px-2 py-0.5 rounded",children:"Active"})]}),C.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2 italic",children:[ee.substring(0,150),"..."]})]}),C.jsx(II,{className:"w-4 h-4 self-center text-slate-300"})]},Te)})]})]})]}),C.jsxs("header",{className:"h-14 bg-blue-900 text-white flex items-center px-4 justify-between shadow-md z-20 flex-shrink-0",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(yS,{className:"w-5 h-5"}),C.jsx("h1",{className:"font-bold text-lg hidden md:block",children:"Smart Medical Record"})]}),C.jsxs("div",{className:"hidden md:flex text-sm opacity-80 gap-4",children:[C.jsxs("span",{children:["Patient: ",x.age,"y/",x.gender]}),C.jsxs("span",{className:"max-w-[300px] truncate",children:["Dx: ",At]})]}),C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("button",{onClick:()=>re(!0),className:"p-1.5 rounded-full hover:bg-blue-800 text-blue-200 transition-colors",title:"API Key Settings",children:C.jsx(vS,{className:"w-4 h-4"})}),C.jsxs("div",{className:"flex items-center space-x-2 bg-blue-800 rounded-full pl-1 pr-3 py-1",children:[n!=null&&n.photoURL?C.jsx("img",{src:n.photoURL,alt:"User",className:"w-6 h-6 rounded-full border border-white/20"}):C.jsx(gS,{className:"w-6 h-6 text-blue-200"}),C.jsx("span",{className:"text-xs font-semibold max-w-[100px] truncate",children:(n==null?void 0:n.displayName)||(n==null?void 0:n.email)})]}),C.jsx("button",{onClick:r,className:"p-1.5 hover:bg-red-600 rounded-full transition-colors text-white",title:"Sign Out",children:C.jsx(aR,{className:"w-4 h-4"})})]})]}),C.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[C.jsx("div",{style:{width:yt},className:"flex-shrink-0 z-10 flex flex-col",children:C.jsx(LR,{onItemClick:Un})}),C.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:_t("sidebar")}),C.jsx("div",{style:{width:Cn},className:"flex-shrink-0 z-0 flex flex-col",children:C.jsx(OR,{events:l,activeEventId:f,onSelectEvent:g,onAddEvent:Jn,onDeleteEvent:Go,onCopyFromEvent:Vn})}),C.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:_t("timeline")}),C.jsx("div",{className:"flex-1 min-w-0",children:C.jsx(HR,{event:F,onUpdate:Kt,profile:x,onUpdateProfile:L,isProfileSelected:f==="profile",informant:U,setInformant:q,lastUpdateTrigger:$n})})]}),!Xt&&C.jsx("div",{className:"h-1 bg-slate-300 hover:bg-blue-500 cursor-row-resize z-20",onMouseDown:_t("genArea")}),C.jsxs("div",{style:{height:Xt?"100vh":kn},className:`flex flex-col border-t-4 border-slate-200 bg-white shadow-2xl transition-all ${Xt?"fixed inset-0 z-50":"relative"}`,children:[C.jsxs("div",{className:"px-6 py-3 border-b flex items-center justify-between bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(dd,{className:"w-5 h-5 text-purple-600"}),C.jsx("h2",{className:"font-bold text-slate-700",children:"AI Generation Area"}),C.jsxs("div",{className:"flex items-center ml-4 bg-white rounded-lg border border-slate-200 p-0.5 shadow-sm",children:[C.jsx("button",{onClick:Fs,disabled:P<=0,title:"Undo (Ctrl+Z)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 transition-colors",children:C.jsx(IR,{className:"w-4 h-4"})}),C.jsx("button",{onClick:qs,disabled:P>=w.length-1,title:"Redo (Ctrl+Y)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 border-l border-slate-100 transition-colors",children:C.jsx(vR,{className:"w-4 h-4"})}),C.jsxs("button",{onClick:()=>B(!0),className:"p-1.5 hover:bg-slate-100 rounded text-blue-600 font-bold text-xs flex items-center border-l border-slate-100 transition-colors",children:[C.jsx(o_,{className:"w-3.5 h-3.5 mr-1"}),"V",P+1]})]})]}),C.jsxs("div",{className:"flex items-center space-x-3",children:[T&&C.jsxs("button",{onClick:ze,className:`flex items-center px-4 py-2 rounded-full font-bold text-sm transition-all shadow-sm ${he?"bg-green-100 text-green-700 border border-green-200":"bg-white border border-slate-300 text-slate-700 hover:bg-slate-100 active:scale-95"}`,children:[he?C.jsx(mS,{className:"w-4 h-4 mr-2"}):C.jsx(wm,{className:"w-4 h-4 mr-2"}),he?"Copied":"Copy"]}),C.jsx("button",{onClick:()=>ls(!Xt),className:"p-2 text-slate-500 hover:bg-slate-200 rounded-full transition-colors",children:Xt?C.jsx(hR,{className:"w-5 h-5"}):C.jsx(uR,{className:"w-5 h-5"})}),C.jsxs("button",{onClick:ki,disabled:h,className:`flex items-center px-6 py-2 rounded-full font-bold shadow-md transition-all active:scale-95 ${h?"bg-slate-300 cursor-not-allowed opacity-70":"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:brightness-110"}`,children:[h?C.jsx(iu,{className:"w-4 h-4 mr-2 animate-spin"}):null,h?"Generating...":"Generate Note"]})]})]}),C.jsxs("div",{className:"flex-1 flex bg-slate-50 overflow-hidden",children:[C.jsx("div",{className:"w-[70%] h-full p-4 relative overflow-hidden flex flex-col",children:C.jsxs("div",{className:"flex-1 relative",children:[C.jsx("textarea",{ref:Ge,onMouseUp:wt,onKeyUp:wt,className:"w-full h-full p-8 bg-white border rounded-lg shadow-inner resize-none font-serif text-lg leading-relaxed custom-scrollbar outline-none focus:ring-2 focus:ring-blue-100 transition-shadow",value:T,onChange:ee=>{const ge=ee.target.value;S(ge)},placeholder:e?"The generated medical admission note will appear here...":"Please set your API Key to start generating notes."}),ue&&D&&C.jsxs("div",{className:"absolute z-[60] bg-white border border-slate-200 rounded-xl shadow-2xl p-4 w-80 animate-in zoom-in-95 duration-200",style:{top:20,right:20},children:[C.jsxs("div",{className:"flex items-center justify-between mb-3",children:[C.jsxs("div",{className:"flex items-center space-x-1.5 text-blue-600",children:[C.jsx(MR,{className:"w-4 h-4"}),C.jsx("span",{className:"text-xs font-bold uppercase",children:"Refine Selection"})]}),C.jsx("button",{onClick:()=>{Ee(null),Ve("")},className:"text-slate-400 hover:text-slate-600",children:C.jsx(du,{className:"w-4 h-4"})})]}),C.jsxs("div",{className:"mb-3",children:[C.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Target Text"}),C.jsxs("div",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded border border-slate-100 max-h-20 overflow-y-auto italic",children:['"',D,'"']})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsx("textarea",{autoFocus:!0,placeholder:"e.g. Rewrite this more formally...",className:"w-full p-2.5 text-xs border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none h-20",value:Be,onChange:ee=>Ce(ee.target.value)}),C.jsxs("button",{disabled:H||!Be.trim(),onClick:sn,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold rounded-lg shadow-md transition-all flex items-center justify-center disabled:bg-slate-300",children:[H?C.jsx(iu,{className:"w-3.5 h-3.5 mr-2 animate-spin"}):C.jsx(dd,{className:"w-3.5 h-3.5 mr-2"}),H?"Refining...":"Refine Segment"]})]})]})]})}),C.jsxs("div",{className:"w-[30%] h-full border-l border-slate-200 bg-white flex flex-col",children:[C.jsxs("div",{className:"p-3 border-b flex items-center space-x-2 bg-slate-50/50",children:[C.jsx(dR,{className:"w-4 h-4 text-blue-600"}),C.jsx("h3",{className:"text-xs font-bold text-slate-700 uppercase tracking-widest",children:" Assistant"})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Quick Refine"}),C.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[C.jsxs("button",{onClick:()=>gi("Make the note more concise and pithy without losing clinical facts."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(UR,{className:"w-3.5 h-3.5 mr-2 text-yellow-500"}),C.jsx("span",{children:" (Make it concise)"})]}),C.jsxs("button",{onClick:()=>gi("Analyze the original JSON data and checking if any clinical details are missing in the current draft. Flag them or add them if the data allows."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(xI,{className:"w-3.5 h-3.5 mr-2 text-purple-500"}),C.jsx("span",{children:" (Detail check)"})]}),C.jsxs("button",{onClick:()=>gi("Carefully check for grammar, prepositions, and article usage. Ensure formal academic medical tone."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(bR,{className:"w-3.5 h-3.5 mr-2 text-blue-500"}),C.jsx("span",{children:" (Grammar check)"})]})]})]}),C.jsx("div",{className:"h-px bg-slate-100 my-2"}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Manual Refinement"}),C.jsx("textarea",{className:"w-full h-32 p-3 text-sm border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-100 outline-none transition-shadow resize-none bg-slate-50/30",placeholder:"e.g. Rewrite the second paragraph to emphasize the fever course...",value:de,onChange:ee=>pe(ee.target.value)}),C.jsxs("button",{disabled:Ie||!de.trim()||!T,onClick:()=>gi(),className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-xl shadow-md transition-all flex items-center justify-center disabled:bg-slate-200 disabled:text-slate-400",children:[Ie?C.jsx(iu,{className:"w-4 h-4 mr-2 animate-spin"}):C.jsx(dd,{className:"w-4 h-4 mr-2"}),Ie?"Refining Note...":"Refine Full Note"]})]}),!T&&C.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-100 text-[11px] text-amber-700 italic",children:"Generate a note first to use the refinement assistant."})]})]})]})]})]})},h6=()=>C.jsx(d6,{children:C.jsx(p6,{})}),p6=()=>{const{user:n,loading:e,signInWithGoogle:t,error:i}=Db();return e?C.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-blue-50",children:C.jsx(iu,{className:"w-10 h-10 text-blue-600 animate-spin"})}):n?C.jsx(f6,{}):C.jsx(GR,{onLogin:t,authError:i})},Pb=document.getElementById("root");if(!Pb)throw new Error("Could not find root element to mount to");const m6=_I.createRoot(Pb);m6.render(C.jsx(cS.StrictMode,{children:C.jsx(h6,{})}));
