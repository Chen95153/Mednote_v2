(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function pS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sp={exports:{}},nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function _I(){if(W0)return nu;W0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:l}}return nu.Fragment=e,nu.jsx=t,nu.jsxs=t,nu}var j0;function TI(){return j0||(j0=1,Sp.exports=_I()),Sp.exports}var C=TI(),Ap={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function EI(){if(Z0)return Ue;Z0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,k={};function K(F,j,ce){this.props=F,this.context=j,this.refs=k,this.updater=ce||H}K.prototype.isReactComponent={},K.prototype.setState=function(F,j){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,j,"setState")},K.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function B(){}B.prototype=K.prototype;function ee(F,j,ce){this.props=F,this.context=j,this.refs=k,this.updater=ce||H}var re=ee.prototype=new B;re.constructor=ee,P(re,K.prototype),re.isPureReactComponent=!0;var he=Array.isArray;function fe(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(F,j,ce){var me=ce.ref;return{$$typeof:n,type:F,key:j,ref:me!==void 0?me:null,props:ce}}function O(F,j){return R(F.type,j,F.props)}function U(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function q(F){var j={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ce){return j[ce]})}var D=/\/+/g;function Ge(F,j){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):j.toString(36)}function at(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(fe,fe):(F.status="pending",F.then(function(j){F.status==="pending"&&(F.status="fulfilled",F.value=j)},function(j){F.status==="pending"&&(F.status="rejected",F.reason=j)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function X(F,j,ce,me,be){var xe=typeof F;(xe==="undefined"||xe==="boolean")&&(F=null);var He=!1;if(F===null)He=!0;else switch(xe){case"bigint":case"string":case"number":He=!0;break;case"object":switch(F.$$typeof){case n:case e:He=!0;break;case _:return He=F._init,X(He(F._payload),j,ce,me,be)}}if(He)return be=be(F),He=me===""?"."+Ge(F,0):me,he(be)?(ce="",He!=null&&(ce=He.replace(D,"$&/")+"/"),X(be,j,ce,"",function(Nn){return Nn})):be!=null&&(U(be)&&(be=O(be,ce+(be.key==null||F&&F.key===be.key?"":(""+be.key).replace(D,"$&/")+"/")+He)),j.push(be)),1;He=0;var yt=me===""?".":me+":";if(he(F))for(var lt=0;lt<F.length;lt++)me=F[lt],xe=yt+Ge(me,lt),He+=X(me,j,ce,xe,be);else if(lt=w(F),typeof lt=="function")for(F=lt.call(F),lt=0;!(me=F.next()).done;)me=me.value,xe=yt+Ge(me,lt++),He+=X(me,j,ce,xe,be);else if(xe==="object"){if(typeof F.then=="function")return X(at(F),j,ce,me,be);throw j=String(F),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return He}function de(F,j,ce){if(F==null)return F;var me=[],be=0;return X(F,me,"","",function(xe){return j.call(ce,xe,be++)}),me}function Se(F){if(F._status===-1){var j=F._result;j=j(),j.then(function(ce){(F._status===0||F._status===-1)&&(F._status=1,F._result=ce)},function(ce){(F._status===0||F._status===-1)&&(F._status=2,F._result=ce)}),F._status===-1&&(F._status=0,F._result=j)}if(F._status===1)return F._result.default;throw F._result}var Ke=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Ye={map:de,forEach:function(F,j,ce){de(F,function(){j.apply(this,arguments)},ce)},count:function(F){var j=0;return de(F,function(){j++}),j},toArray:function(F){return de(F,function(j){return j})||[]},only:function(F){if(!U(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Ue.Activity=T,Ue.Children=Ye,Ue.Component=K,Ue.Fragment=t,Ue.Profiler=r,Ue.PureComponent=ee,Ue.StrictMode=i,Ue.Suspense=g,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},Ue.cache=function(F){return function(){return F.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(F,j,ce){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var me=P({},F.props),be=F.key;if(j!=null)for(xe in j.key!==void 0&&(be=""+j.key),j)!N.call(j,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&j.ref===void 0||(me[xe]=j[xe]);var xe=arguments.length-2;if(xe===1)me.children=ce;else if(1<xe){for(var He=Array(xe),yt=0;yt<xe;yt++)He[yt]=arguments[yt+2];me.children=He}return R(F.type,be,me)},Ue.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},Ue.createElement=function(F,j,ce){var me,be={},xe=null;if(j!=null)for(me in j.key!==void 0&&(xe=""+j.key),j)N.call(j,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(be[me]=j[me]);var He=arguments.length-2;if(He===1)be.children=ce;else if(1<He){for(var yt=Array(He),lt=0;lt<He;lt++)yt[lt]=arguments[lt+2];be.children=yt}if(F&&F.defaultProps)for(me in He=F.defaultProps,He)be[me]===void 0&&(be[me]=He[me]);return R(F,xe,be)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(F){return{$$typeof:f,render:F}},Ue.isValidElement=U,Ue.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:Se}},Ue.memo=function(F,j){return{$$typeof:h,type:F,compare:j===void 0?null:j}},Ue.startTransition=function(F){var j=M.T,ce={};M.T=ce;try{var me=F(),be=M.S;be!==null&&be(ce,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(fe,Ke)}catch(xe){Ke(xe)}finally{j!==null&&ce.types!==null&&(j.types=ce.types),M.T=j}},Ue.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ue.use=function(F){return M.H.use(F)},Ue.useActionState=function(F,j,ce){return M.H.useActionState(F,j,ce)},Ue.useCallback=function(F,j){return M.H.useCallback(F,j)},Ue.useContext=function(F){return M.H.useContext(F)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(F,j){return M.H.useDeferredValue(F,j)},Ue.useEffect=function(F,j){return M.H.useEffect(F,j)},Ue.useEffectEvent=function(F){return M.H.useEffectEvent(F)},Ue.useId=function(){return M.H.useId()},Ue.useImperativeHandle=function(F,j,ce){return M.H.useImperativeHandle(F,j,ce)},Ue.useInsertionEffect=function(F,j){return M.H.useInsertionEffect(F,j)},Ue.useLayoutEffect=function(F,j){return M.H.useLayoutEffect(F,j)},Ue.useMemo=function(F,j){return M.H.useMemo(F,j)},Ue.useOptimistic=function(F,j){return M.H.useOptimistic(F,j)},Ue.useReducer=function(F,j,ce){return M.H.useReducer(F,j,ce)},Ue.useRef=function(F){return M.H.useRef(F)},Ue.useState=function(F){return M.H.useState(F)},Ue.useSyncExternalStore=function(F,j,ce){return M.H.useSyncExternalStore(F,j,ce)},Ue.useTransition=function(){return M.H.useTransition()},Ue.version="19.2.3",Ue}var e_;function Rm(){return e_||(e_=1,Ap.exports=EI()),Ap.exports}var oe=Rm();const mS=pS(oe);var Cp={exports:{}},iu={},bp={exports:{}},wp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function SI(){return t_||(t_=1,(function(n){function e(X,de){var Se=X.length;X.push(de);e:for(;0<Se;){var Ke=Se-1>>>1,Ye=X[Ke];if(0<r(Ye,de))X[Ke]=de,X[Se]=Ye,Se=Ke;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var de=X[0],Se=X.pop();if(Se!==de){X[0]=Se;e:for(var Ke=0,Ye=X.length,F=Ye>>>1;Ke<F;){var j=2*(Ke+1)-1,ce=X[j],me=j+1,be=X[me];if(0>r(ce,Se))me<Ye&&0>r(be,ce)?(X[Ke]=be,X[me]=Se,Ke=me):(X[Ke]=ce,X[j]=Se,Ke=j);else if(me<Ye&&0>r(be,Se))X[Ke]=be,X[me]=Se,Ke=me;else break e}}return de}function r(X,de){var Se=X.sortIndex-de.sortIndex;return Se!==0?Se:X.id-de.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var g=[],h=[],_=1,T=null,S=3,w=!1,H=!1,P=!1,k=!1,K=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function re(X){for(var de=t(h);de!==null;){if(de.callback===null)i(h);else if(de.startTime<=X)i(h),de.sortIndex=de.expirationTime,e(g,de);else break;de=t(h)}}function he(X){if(P=!1,re(X),!H)if(t(g)!==null)H=!0,fe||(fe=!0,q());else{var de=t(h);de!==null&&at(he,de.startTime-X)}}var fe=!1,M=-1,N=5,R=-1;function O(){return k?!0:!(n.unstable_now()-R<N)}function U(){if(k=!1,fe){var X=n.unstable_now();R=X;var de=!0;try{e:{H=!1,P&&(P=!1,B(M),M=-1),w=!0;var Se=S;try{t:{for(re(X),T=t(g);T!==null&&!(T.expirationTime>X&&O());){var Ke=T.callback;if(typeof Ke=="function"){T.callback=null,S=T.priorityLevel;var Ye=Ke(T.expirationTime<=X);if(X=n.unstable_now(),typeof Ye=="function"){T.callback=Ye,re(X),de=!0;break t}T===t(g)&&i(g),re(X)}else i(g);T=t(g)}if(T!==null)de=!0;else{var F=t(h);F!==null&&at(he,F.startTime-X),de=!1}}break e}finally{T=null,S=Se,w=!1}de=void 0}}finally{de?q():fe=!1}}}var q;if(typeof ee=="function")q=function(){ee(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ge=D.port2;D.port1.onmessage=U,q=function(){Ge.postMessage(null)}}else q=function(){K(U,0)};function at(X,de){M=K(function(){X(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(X){switch(S){case 1:case 2:case 3:var de=3;break;default:de=S}var Se=S;S=de;try{return X()}finally{S=Se}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(X,de){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Se=S;S=X;try{return de()}finally{S=Se}},n.unstable_scheduleCallback=function(X,de,Se){var Ke=n.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Ke+Se:Ke):Se=Ke,X){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=Se+Ye,X={id:_++,callback:de,priorityLevel:X,startTime:Se,expirationTime:Ye,sortIndex:-1},Se>Ke?(X.sortIndex=Se,e(h,X),t(g)===null&&X===t(h)&&(P?(B(M),M=-1):P=!0,at(he,Se-Ke))):(X.sortIndex=Ye,e(g,X),H||w||(H=!0,fe||(fe=!0,q()))),X},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(X){var de=S;return function(){var Se=S;S=de;try{return X.apply(this,arguments)}finally{S=Se}}}})(wp)),wp}var n_;function AI(){return n_||(n_=1,bp.exports=SI()),bp.exports}var Ip={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function CI(){if(i_)return _n;i_=1;var n=Rm();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_n.createPortal=function(g,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(g,h,null,_)},_n.flushSync=function(g){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=h,i.p=_,i.d.f()}},_n.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(g,h))},_n.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},_n.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:w}):_==="script"&&i.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_n.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(g)},_n.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin);i.d.L(g,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_n.preloadModule=function(g,h){if(typeof g=="string")if(h){var _=f(h.as,h.crossOrigin);i.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(g)},_n.requestFormReset=function(g){i.d.r(g)},_n.unstable_batchedUpdates=function(g,h){return g(h)},_n.useFormState=function(g,h,_){return u.H.useFormState(g,h,_)},_n.useFormStatus=function(){return u.H.useHostTransitionStatus()},_n.version="19.2.3",_n}var s_;function gS(){if(s_)return Ip.exports;s_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ip.exports=CI(),Ip.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function bI(){if(o_)return iu;o_=1;var n=AI(),e=Rm(),t=gS();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var o=s,a=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(a=o.return),s=o.return;while(s)}return o.tag===3?a:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function g(s){if(l(s)!==s)throw Error(i(188))}function h(s){var o=s.alternate;if(!o){if(o=l(s),o===null)throw Error(i(188));return o!==s?null:s}for(var a=s,c=o;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),s;if(v===c)return g(y),o;v=v.sibling}throw Error(i(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=v;break}if(I===c){A=!0,c=y,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,c=y;break}if(I===c){A=!0,c=v,a=y;break}I=I.sibling}if(!A)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?s:o}function _(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=_(s),o!==null)return o;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case K:return"Profiler";case k:return"StrictMode";case he:return"Suspense";case fe:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case H:return"Portal";case ee:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case re:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return o=s.displayName||null,o!==null?o:Ge(s.type)||"Memo";case N:o=s._payload,s=s._init;try{return Ge(s(o))}catch{}}return null}var at=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Ke=[],Ye=-1;function F(s){return{current:s}}function j(s){0>Ye||(s.current=Ke[Ye],Ke[Ye]=null,Ye--)}function ce(s,o){Ye++,Ke[Ye]=s.current,s.current=o}var me=F(null),be=F(null),xe=F(null),He=F(null);function yt(s,o){switch(ce(xe,o),ce(be,s),ce(me,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?T0(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=T0(o),s=E0(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}j(me),ce(me,s)}function lt(){j(me),j(be),j(xe)}function Nn(s){s.memoizedState!==null&&ce(He,s);var o=me.current,a=E0(o,s.type);o!==a&&(ce(be,s),ce(me,a))}function Si(s){be.current===s&&(j(me),j(be)),He.current===s&&(j(He),jl._currentValue=Se)}var Fn,Ai;function an(s){if(Fn===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Fn=o&&o[1]||"",Ai=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fn+s+Ai}var Gi=!1;function Xt(s,o){if(!s||Gi)return"";Gi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var Q=Z}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(Z){Q=Z}s.call(ie.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var L=A.split(`
`),J=I.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===J.length)for(c=L.length-1,y=J.length-1;1<=c&&0<=y&&L[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==J[y]){var te=`
`+L[c].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=c&&0<=y);break}}}finally{Gi=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?an(a):""}function ms(s,o){switch(s.tag){case 26:case 27:case 5:return an(s.type);case 16:return an("Lazy");case 13:return s.child!==o&&o!==null?an("Suspense Fallback"):an("Suspense");case 19:return an("SuspenseList");case 0:case 15:return Xt(s.type,!1);case 11:return Xt(s.type.render,!1);case 1:return Xt(s.type,!0);case 31:return an("Activity");default:return""}}function Ci(s){try{var o="",a=null;do o+=ms(s,a),a=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ht=Object.prototype.hasOwnProperty,ut=n.unstable_scheduleCallback,Mn=n.unstable_cancelCallback,Zn=n.unstable_shouldYield,ei=n.unstable_requestPaint,Ut=n.unstable_now,Gn=n.unstable_getCurrentPriorityLevel,gs=n.unstable_ImmediatePriority,bi=n.unstable_UserBlockingPriority,bn=n.unstable_NormalPriority,qi=n.unstable_LowPriority,ti=n.unstable_IdlePriority,ys=n.log,ni=n.unstable_setDisableYieldValue,Wt=null,Mt=null;function ln(s){if(typeof ys=="function"&&ni(s),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(Wt,s)}catch{}}var Ct=Math.clz32?Math.clz32:_s,vs=Math.log,zi=Math.LN2;function _s(s){return s>>>=0,s===0?32:31-(vs(s)/zi|0)|0}var Dn=256,ue=262144,Te=4194304;function Ne(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Oe(s,o,a){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var I=c&134217727;return I!==0?(c=I&~v,c!==0?y=Ne(c):(A&=I,A!==0?y=Ne(A):a||(a=I&~s,a!==0&&(y=Ne(a))))):(I=c&~v,I!==0?y=Ne(I):A!==0?y=Ne(A):a||(a=c&~s,a!==0&&(y=Ne(a)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:y}function it(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function vn(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ft(){var s=Te;return Te<<=1,(Te&62914560)===0&&(Te=4194304),s}function tt(s){for(var o=[],a=0;31>a;a++)o.push(s);return o}function un(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function wi(s,o,a,c,y,v){var A=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var I=s.entanglements,L=s.expirationTimes,J=s.hiddenUpdates;for(a=A&~a;0<a;){var te=31-Ct(a),ie=1<<te;I[te]=0,L[te]=-1;var Q=J[te];if(Q!==null)for(J[te]=null,te=0;te<Q.length;te++){var Z=Q[te];Z!==null&&(Z.lane&=-536870913)}a&=~ie}c!==0&&Ts(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~o))}function Ts(s,o,a){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-Ct(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|a&261930}function Wo(s,o){var a=s.entangledLanes|=o;for(s=s.entanglements;a;){var c=31-Ct(a),y=1<<c;y&o|s[c]&o&&(s[c]|=o),a&=~y}}function jo(s,o){var a=o&-o;return a=(a&42)!==0?1:Es(a),(a&(s.suspendedLanes|o))!==0?0:a}function Es(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ii(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Zo(){var s=de.p;return s!==0?s:(s=window.event,s===void 0?32:z0(s.type))}function St(s,o){var a=de.p;try{return de.p=s,o()}finally{de.p=a}}var V=Math.random().toString(36).slice(2),le="__reactFiber$"+V,ge="__reactProps$"+V,Me="__reactContainer$"+V,we="__reactEvents$"+V,bt="__reactListeners$"+V,Zs="__reactHandles$"+V,Ss="__reactResources$"+V,si="__reactMarker$"+V;function Br(s){delete s[le],delete s[ge],delete s[we],delete s[bt],delete s[Zs]}function Ki(s){var o=s[le];if(o)return o;for(var a=s.parentNode;a;){if(o=a[Me]||a[le]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(s=x0(s);s!==null;){if(a=s[le])return a;s=x0(s)}return o}s=a,a=s.parentNode}return null}function oi(s){if(s=s[le]||s[Me]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function qn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Yi(s){var o=s[Ss];return o||(o=s[Ss]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Gt(s){s[si]=!0}var ol=new Set,rl={};function $i(s,o){Ji(s,o),Ji(s+"Capture",o)}function Ji(s,o){for(rl[s]=o,s=0;s<o.length;s++)ol.add(o[s])}var al=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ll={},ul={};function Bu(s){return ht.call(ul,s)?!0:ht.call(ll,s)?!1:al.test(s)?ul[s]=!0:(ll[s]=!0,!1)}function Fr(s,o,a){if(Bu(o))if(a===null)s.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+a)}}function zn(s,o,a){if(a===null)s.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+a)}}function qt(s,o,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(o,a,""+c)}}function nn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function eo(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function cl(s,o,a){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function pt(s){if(!s._valueTracker){var o=eo(s)?"checked":"value";s._valueTracker=cl(s,o,""+s[o])}}function er(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return s&&(c=eo(s)?s.checked?"true":"false":s.value),s=c,s!==a?(o.setValue(s),!0):!1}function Qi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var tr=/[\n"\\]/g;function Pn(s){return s.replace(tr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Gr(s,o,a,c,y,v,A,I){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),o!=null?A==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+nn(o)):s.value!==""+nn(o)&&(s.value=""+nn(o)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),o!=null?dl(s,A,nn(o)):a!=null?dl(s,A,nn(a)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+nn(I):s.removeAttribute("name")}function Fu(s,o,a,c,y,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){pt(s);return}a=a!=null?""+nn(a):"",o=o!=null?""+nn(o):a,I||o===s.value||(s.value=o),s.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=I?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),pt(s)}function dl(s,o,a){o==="number"&&Qi(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function to(s,o,a,c){if(s=s.options,o){o={};for(var y=0;y<a.length;y++)o["$"+a[y]]=!0;for(a=0;a<s.length;a++)y=o.hasOwnProperty("$"+s[a].value),s[a].selected!==y&&(s[a].selected=y),y&&c&&(s[a].defaultSelected=!0)}else{for(a=""+nn(a),o=null,y=0;y<s.length;y++){if(s[y].value===a){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function Gu(s,o,a){if(o!=null&&(o=""+nn(o),o!==s.value&&(s.value=o),a==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=a!=null?""+nn(a):""}function no(s,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(i(92));if(at(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=nn(o),s.defaultValue=a,c=s.textContent,c===a&&c!==""&&c!==null&&(s.value=c),pt(s)}function kn(s,o){if(o){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=o;return}}s.textContent=o}var qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fl(s,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,a):typeof a!="number"||a===0||qu.has(o)?o==="float"?s.cssFloat=a:s[o]=(""+a).trim():s[o]=a+"px"}function hl(s,o,a){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&a[y]!==c&&fl(s,y,c)}else for(var v in o)o.hasOwnProperty(v)&&fl(s,v,o[v])}function qr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),io=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zr(s){return io.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ii(){}var pl=null;function ri(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var so=null,Xi=null;function nr(s){var o=oi(s);if(o&&(s=o.stateNode)){var a=s[ge]||null;e:switch(s=o.stateNode,o.type){case"input":if(Gr(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==s&&c.form===s.form){var y=c[ge]||null;if(!y)throw Error(i(90));Gr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===s.form&&er(c)}break e;case"textarea":Gu(s,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&to(s,!!a.multiple,o,!1)}}}var Kr=!1;function oo(s,o,a){if(Kr)return s(o,a);Kr=!0;try{var c=s(o);return c}finally{if(Kr=!1,(so!==null||Xi!==null)&&(Lc(),so&&(o=so,s=Xi,Xi=so=null,nr(o),s)))for(o=0;o<s.length;o++)nr(s[o])}}function xi(s,o){var a=s.stateNode;if(a===null)return null;var c=a[ge]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(i(231,o,typeof a));return a}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ir=!1;if(ai)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){ir=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{ir=!1}var Wi=null,ml=null,sr=null;function gl(){if(sr)return sr;var s,o=ml,a=o.length,c,y="value"in Wi?Wi.value:Wi.textContent,v=y.length;for(s=0;s<a&&o[s]===y[s];s++);var A=a-s;for(c=1;c<=A&&o[a-c]===y[v-c];c++);return sr=y.slice(s,1<c?1-c:void 0)}function or(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function As(){return!0}function Ri(){return!1}function cn(s){function o(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(a=s[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?As:Ri,this.isPropagationStopped=Ri,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),o}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ji=cn(Cs),ro=T({},Cs,{view:0,detail:0}),yl=cn(ro),ao,Yr,Zi,$r=T({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Zi&&(Zi&&s.type==="mousemove"?(ao=s.screenX-Zi.screenX,Yr=s.screenY-Zi.screenY):Yr=ao=0,Zi=s),ao)},movementY:function(s){return"movementY"in s?s.movementY:Yr}}),vl=cn($r),rr=T({},$r,{dataTransfer:0}),Ku=cn(rr),Yu=T({},ro,{relatedTarget:0}),ar=cn(Yu),_l=T({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),$u=cn(_l),Jr=T({},Cs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ju=cn(Jr),Qu=T({},Cs,{data:0}),es=cn(Qu),Xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=ju[s])?!!o[s]:!1}function lo(){return Zu}var wn=T({},ro,{key:function(s){if(s.key){var o=Xu[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=or(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Wu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lo,charCode:function(s){return s.type==="keypress"?or(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?or(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ec=cn(wn),tc=T({},$r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bs=cn(tc),m=T({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lo}),E=cn(m),b=T({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=cn(b),Y=T({},$r,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),W=cn(Y),pe=T({},Cs,{newState:0,oldState:0}),Be=cn(pe),Lt=[9,13,27,32],ct=ai&&"CompositionEvent"in window,Rt=null;ai&&"documentMode"in document&&(Rt=document.documentMode);var li=ai&&"TextEvent"in window&&!Rt,ts=ai&&(!ct||Rt&&8<Rt&&11>=Rt),Ni=" ",Mi=!1;function lr(s,o){switch(s){case"keyup":return Lt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qr(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xr=!1;function qb(s,o){switch(s){case"compositionend":return Qr(o);case"keypress":return o.which!==32?null:(Mi=!0,Ni);case"textInput":return s=o.data,s===Ni&&Mi?null:s;default:return null}}function zb(s,o){if(Xr)return s==="compositionend"||!ct&&lr(s,o)?(s=gl(),sr=ml=Wi=null,Xr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ts&&o.locale!=="ko"?null:o.data;default:return null}}var Kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mg(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Kb[s.type]:o==="textarea"}function Dg(s,o,a,c){so?Xi?Xi.push(c):Xi=[c]:so=c,o=zc(o,"onChange"),0<o.length&&(a=new ji("onChange","change",null,a,c),s.push({event:a,listeners:o}))}var Tl=null,El=null;function Yb(s){p0(s,0)}function nc(s){var o=qn(s);if(er(o))return s}function Pg(s,o){if(s==="change")return o}var kg=!1;if(ai){var Rf;if(ai){var Nf="oninput"in document;if(!Nf){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),Nf=typeof Vg.oninput=="function"}Rf=Nf}else Rf=!1;kg=Rf&&(!document.documentMode||9<document.documentMode)}function Ug(){Tl&&(Tl.detachEvent("onpropertychange",Lg),El=Tl=null)}function Lg(s){if(s.propertyName==="value"&&nc(El)){var o=[];Dg(o,El,s,ri(s)),oo(Yb,o)}}function $b(s,o,a){s==="focusin"?(Ug(),Tl=o,El=a,Tl.attachEvent("onpropertychange",Lg)):s==="focusout"&&Ug()}function Jb(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return nc(El)}function Qb(s,o){if(s==="click")return nc(o)}function Xb(s,o){if(s==="input"||s==="change")return nc(o)}function Wb(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Kn=typeof Object.is=="function"?Object.is:Wb;function Sl(s,o){if(Kn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var a=Object.keys(s),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!ht.call(o,y)||!Kn(s[y],o[y]))return!1}return!0}function Og(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Hg(s,o){var a=Og(s);s=0;for(var c;a;){if(a.nodeType===3){if(c=s+a.textContent.length,s<=o&&c>=o)return{node:a,offset:o-s};s=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Og(a)}}function Bg(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Bg(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Fg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Qi(s.document);o instanceof s.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)s=o.contentWindow;else break;o=Qi(s.document)}return o}function Mf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var jb=ai&&"documentMode"in document&&11>=document.documentMode,Wr=null,Df=null,Al=null,Pf=!1;function Gg(s,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Pf||Wr==null||Wr!==Qi(c)||(c=Wr,"selectionStart"in c&&Mf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Al&&Sl(Al,c)||(Al=c,c=zc(Df,"onSelect"),0<c.length&&(o=new ji("onSelect","select",null,o,a),s.push({event:o,listeners:c}),o.target=Wr)))}function ur(s,o){var a={};return a[s.toLowerCase()]=o.toLowerCase(),a["Webkit"+s]="webkit"+o,a["Moz"+s]="moz"+o,a}var jr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},kf={},qg={};ai&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);function cr(s){if(kf[s])return kf[s];if(!jr[s])return s;var o=jr[s],a;for(a in o)if(o.hasOwnProperty(a)&&a in qg)return kf[s]=o[a];return s}var zg=cr("animationend"),Kg=cr("animationiteration"),Yg=cr("animationstart"),Zb=cr("transitionrun"),ew=cr("transitionstart"),tw=cr("transitioncancel"),$g=cr("transitionend"),Jg=new Map,Vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vf.push("scrollEnd");function Di(s,o){Jg.set(s,o),$i(o,[s])}var ic=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ui=[],Zr=0,Uf=0;function sc(){for(var s=Zr,o=Uf=Zr=0;o<s;){var a=ui[o];ui[o++]=null;var c=ui[o];ui[o++]=null;var y=ui[o];ui[o++]=null;var v=ui[o];if(ui[o++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Qg(a,y,v)}}function oc(s,o,a,c){ui[Zr++]=s,ui[Zr++]=o,ui[Zr++]=a,ui[Zr++]=c,Uf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Lf(s,o,a,c){return oc(s,o,a,c),rc(s)}function dr(s,o){return oc(s,null,null,o),rc(s)}function Qg(s,o,a){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=s.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&o!==null&&(y=31-Ct(a),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[o]:c.push(o),o.lane=a|536870912),v):null}function rc(s){if(50<Kl)throw Kl=0,Yh=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var ea={};function nw(s,o,a,c){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(s,o,a,c){return new nw(s,o,a,c)}function Of(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ws(s,o){var a=s.alternate;return a===null?(a=Yn(s.tag,o,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=o,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,o=s.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function Xg(s,o){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,o=a.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function ac(s,o,a,c,y,v){var A=0;if(c=s,typeof s=="function")Of(s)&&(A=1);else if(typeof s=="string")A=aI(s,a,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=Yn(31,a,o,y),s.elementType=R,s.lanes=v,s;case P:return fr(a.children,y,v,o);case k:A=8,y|=24;break;case K:return s=Yn(12,a,o,y|2),s.elementType=K,s.lanes=v,s;case he:return s=Yn(13,a,o,y),s.elementType=he,s.lanes=v,s;case fe:return s=Yn(19,a,o,y),s.elementType=fe,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ee:A=10;break e;case B:A=9;break e;case re:A=11;break e;case M:A=14;break e;case N:A=16,c=null;break e}A=29,a=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=Yn(A,a,o,y),o.elementType=s,o.type=c,o.lanes=v,o}function fr(s,o,a,c){return s=Yn(7,s,c,o),s.lanes=a,s}function Hf(s,o,a){return s=Yn(6,s,null,o),s.lanes=a,s}function Wg(s){var o=Yn(18,null,null,0);return o.stateNode=s,o}function Bf(s,o,a){return o=Yn(4,s.children!==null?s.children:[],s.key,o),o.lanes=a,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var jg=new WeakMap;function ci(s,o){if(typeof s=="object"&&s!==null){var a=jg.get(s);return a!==void 0?a:(o={value:s,source:o,stack:Ci(o)},jg.set(s,o),o)}return{value:s,source:o,stack:Ci(o)}}var ta=[],na=0,lc=null,Cl=0,di=[],fi=0,uo=null,ns=1,is="";function Is(s,o){ta[na++]=Cl,ta[na++]=lc,lc=s,Cl=o}function Zg(s,o,a){di[fi++]=ns,di[fi++]=is,di[fi++]=uo,uo=s;var c=ns;s=is;var y=32-Ct(c)-1;c&=~(1<<y),a+=1;var v=32-Ct(o)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,ns=1<<32-Ct(o)+y|a<<y|c,is=v+s}else ns=1<<v|a<<y|c,is=s}function Ff(s){s.return!==null&&(Is(s,1),Zg(s,1,0))}function Gf(s){for(;s===lc;)lc=ta[--na],ta[na]=null,Cl=ta[--na],ta[na]=null;for(;s===uo;)uo=di[--fi],di[fi]=null,is=di[--fi],di[fi]=null,ns=di[--fi],di[fi]=null}function ey(s,o){di[fi++]=ns,di[fi++]=is,di[fi++]=uo,ns=o.id,is=o.overflow,uo=s}var dn=null,wt=null,et=!1,co=null,hi=!1,qf=Error(i(519));function fo(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl(ci(o,s)),qf}function ty(s){var o=s.stateNode,a=s.type,c=s.memoizedProps;switch(o[le]=s,o[ge]=c,a){case"dialog":Je("cancel",o),Je("close",o);break;case"iframe":case"object":case"embed":Je("load",o);break;case"video":case"audio":for(a=0;a<$l.length;a++)Je($l[a],o);break;case"source":Je("error",o);break;case"img":case"image":case"link":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"input":Je("invalid",o),Fu(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Je("invalid",o);break;case"textarea":Je("invalid",o),no(o,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||v0(o.textContent,a)?(c.popover!=null&&(Je("beforetoggle",o),Je("toggle",o)),c.onScroll!=null&&Je("scroll",o),c.onScrollEnd!=null&&Je("scrollend",o),c.onClick!=null&&(o.onclick=Ii),o=!0):o=!1,o||fo(s,!0)}function ny(s){for(dn=s.return;dn;)switch(dn.tag){case 5:case 31:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:dn=dn.return}}function ia(s){if(s!==dn)return!1;if(!et)return ny(s),et=!0,!1;var o=s.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||ap(s.type,s.memoizedProps)),a=!a),a&&wt&&fo(s),ny(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));wt=I0(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));wt=I0(s)}else o===27?(o=wt,wo(s.type)?(s=fp,fp=null,wt=s):wt=o):wt=dn?mi(s.stateNode.nextSibling):null;return!0}function hr(){wt=dn=null,et=!1}function zf(){var s=co;return s!==null&&(On===null?On=s:On.push.apply(On,s),co=null),s}function bl(s){co===null?co=[s]:co.push(s)}var Kf=F(null),pr=null,xs=null;function ho(s,o,a){ce(Kf,o._currentValue),o._currentValue=a}function Rs(s){s._currentValue=Kf.current,j(Kf)}function Yf(s,o,a){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===a)break;s=s.return}}function $f(s,o,a,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var L=0;L<o.length;L++)if(I.context===o[L]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),Yf(v.return,a,s),c||(A=null);break e}v=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),Yf(A,a,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function sa(s,o,a,c){s=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var I=y.type;Kn(y.pendingProps.value,A.value)||(s!==null?s.push(I):s=[I])}}else if(y===He.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(jl):s=[jl])}y=y.return}s!==null&&$f(o,s,a,c),o.flags|=262144}function uc(s){for(s=s.firstContext;s!==null;){if(!Kn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function mr(s){pr=s,xs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function fn(s){return iy(pr,s)}function cc(s,o){return pr===null&&mr(s),iy(s,o)}function iy(s,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},xs===null){if(s===null)throw Error(i(308));xs=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else xs=xs.next=o;return a}var iw=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(a,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(a){return a()})}},sw=n.unstable_scheduleCallback,ow=n.unstable_NormalPriority,zt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new iw,data:new Map,refCount:0}}function wl(s){s.refCount--,s.refCount===0&&sw(ow,function(){s.controller.abort()})}var Il=null,Qf=0,oa=0,ra=null;function rw(s,o){if(Il===null){var a=Il=[];Qf=0,oa=jh(),ra={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Qf++,o.then(sy,sy),o}function sy(){if(--Qf===0&&Il!==null){ra!==null&&(ra.status="fulfilled");var s=Il;Il=null,oa=0,ra=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function aw(s,o){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<a.length;y++)(0,a[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var oy=X.S;X.S=function(s,o){Gv=Ut(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&rw(s,o),oy!==null&&oy(s,o)};var gr=F(null);function Xf(){var s=gr.current;return s!==null?s:At.pooledCache}function dc(s,o){o===null?ce(gr,gr.current):ce(gr,o.pool)}function ry(){var s=Xf();return s===null?null:{parent:zt._currentValue,pool:s}}var aa=Error(i(460)),Wf=Error(i(474)),fc=Error(i(542)),hc={then:function(){}};function ay(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ly(s,o,a){switch(a=s[a],a===void 0?s.push(o):a!==o&&(o.then(Ii,Ii),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,cy(s),s;default:if(typeof o.status=="string")o.then(Ii,Ii);else{if(s=At,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,cy(s),s}throw vr=o,aa}}function yr(s){try{var o=s._init;return o(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(vr=a,aa):a}}var vr=null;function uy(){if(vr===null)throw Error(i(459));var s=vr;return vr=null,s}function cy(s){if(s===aa||s===fc)throw Error(i(483))}var la=null,xl=0;function pc(s){var o=xl;return xl+=1,la===null&&(la=[]),ly(la,s,o)}function Rl(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function mc(s,o){throw o.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function dy(s){function o(z,G){if(s){var $=z.deletions;$===null?(z.deletions=[G],z.flags|=16):$.push(G)}}function a(z,G){if(!s)return null;for(;G!==null;)o(z,G),G=G.sibling;return null}function c(z){for(var G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function y(z,G){return z=ws(z,G),z.index=0,z.sibling=null,z}function v(z,G,$){return z.index=$,s?($=z.alternate,$!==null?($=$.index,$<G?(z.flags|=67108866,G):$):(z.flags|=67108866,G)):(z.flags|=1048576,G)}function A(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function I(z,G,$,ne){return G===null||G.tag!==6?(G=Hf($,z.mode,ne),G.return=z,G):(G=y(G,$),G.return=z,G)}function L(z,G,$,ne){var Ce=$.type;return Ce===P?te(z,G,$.props.children,ne,$.key):G!==null&&(G.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&yr(Ce)===G.type)?(G=y(G,$.props),Rl(G,$),G.return=z,G):(G=ac($.type,$.key,$.props,null,z.mode,ne),Rl(G,$),G.return=z,G)}function J(z,G,$,ne){return G===null||G.tag!==4||G.stateNode.containerInfo!==$.containerInfo||G.stateNode.implementation!==$.implementation?(G=Bf($,z.mode,ne),G.return=z,G):(G=y(G,$.children||[]),G.return=z,G)}function te(z,G,$,ne,Ce){return G===null||G.tag!==7?(G=fr($,z.mode,ne,Ce),G.return=z,G):(G=y(G,$),G.return=z,G)}function ie(z,G,$){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Hf(""+G,z.mode,$),G.return=z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return $=ac(G.type,G.key,G.props,null,z.mode,$),Rl($,G),$.return=z,$;case H:return G=Bf(G,z.mode,$),G.return=z,G;case N:return G=yr(G),ie(z,G,$)}if(at(G)||q(G))return G=fr(G,z.mode,$,null),G.return=z,G;if(typeof G.then=="function")return ie(z,pc(G),$);if(G.$$typeof===ee)return ie(z,cc(z,G),$);mc(z,G)}return null}function Q(z,G,$,ne){var Ce=G!==null?G.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ce!==null?null:I(z,G,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return $.key===Ce?L(z,G,$,ne):null;case H:return $.key===Ce?J(z,G,$,ne):null;case N:return $=yr($),Q(z,G,$,ne)}if(at($)||q($))return Ce!==null?null:te(z,G,$,ne,null);if(typeof $.then=="function")return Q(z,G,pc($),ne);if($.$$typeof===ee)return Q(z,G,cc(z,$),ne);mc(z,$)}return null}function Z(z,G,$,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get($)||null,I(G,z,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return z=z.get(ne.key===null?$:ne.key)||null,L(G,z,ne,Ce);case H:return z=z.get(ne.key===null?$:ne.key)||null,J(G,z,ne,Ce);case N:return ne=yr(ne),Z(z,G,$,ne,Ce)}if(at(ne)||q(ne))return z=z.get($)||null,te(G,z,ne,Ce,null);if(typeof ne.then=="function")return Z(z,G,$,pc(ne),Ce);if(ne.$$typeof===ee)return Z(z,G,$,cc(G,ne),Ce);mc(G,ne)}return null}function _e(z,G,$,ne){for(var Ce=null,st=null,Ee=G,qe=G=0,Xe=null;Ee!==null&&qe<$.length;qe++){Ee.index>qe?(Xe=Ee,Ee=null):Xe=Ee.sibling;var ot=Q(z,Ee,$[qe],ne);if(ot===null){Ee===null&&(Ee=Xe);break}s&&Ee&&ot.alternate===null&&o(z,Ee),G=v(ot,G,qe),st===null?Ce=ot:st.sibling=ot,st=ot,Ee=Xe}if(qe===$.length)return a(z,Ee),et&&Is(z,qe),Ce;if(Ee===null){for(;qe<$.length;qe++)Ee=ie(z,$[qe],ne),Ee!==null&&(G=v(Ee,G,qe),st===null?Ce=Ee:st.sibling=Ee,st=Ee);return et&&Is(z,qe),Ce}for(Ee=c(Ee);qe<$.length;qe++)Xe=Z(Ee,z,qe,$[qe],ne),Xe!==null&&(s&&Xe.alternate!==null&&Ee.delete(Xe.key===null?qe:Xe.key),G=v(Xe,G,qe),st===null?Ce=Xe:st.sibling=Xe,st=Xe);return s&&Ee.forEach(function(Mo){return o(z,Mo)}),et&&Is(z,qe),Ce}function Re(z,G,$,ne){if($==null)throw Error(i(151));for(var Ce=null,st=null,Ee=G,qe=G=0,Xe=null,ot=$.next();Ee!==null&&!ot.done;qe++,ot=$.next()){Ee.index>qe?(Xe=Ee,Ee=null):Xe=Ee.sibling;var Mo=Q(z,Ee,ot.value,ne);if(Mo===null){Ee===null&&(Ee=Xe);break}s&&Ee&&Mo.alternate===null&&o(z,Ee),G=v(Mo,G,qe),st===null?Ce=Mo:st.sibling=Mo,st=Mo,Ee=Xe}if(ot.done)return a(z,Ee),et&&Is(z,qe),Ce;if(Ee===null){for(;!ot.done;qe++,ot=$.next())ot=ie(z,ot.value,ne),ot!==null&&(G=v(ot,G,qe),st===null?Ce=ot:st.sibling=ot,st=ot);return et&&Is(z,qe),Ce}for(Ee=c(Ee);!ot.done;qe++,ot=$.next())ot=Z(Ee,z,qe,ot.value,ne),ot!==null&&(s&&ot.alternate!==null&&Ee.delete(ot.key===null?qe:ot.key),G=v(ot,G,qe),st===null?Ce=ot:st.sibling=ot,st=ot);return s&&Ee.forEach(function(vI){return o(z,vI)}),et&&Is(z,qe),Ce}function Et(z,G,$,ne){if(typeof $=="object"&&$!==null&&$.type===P&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case w:e:{for(var Ce=$.key;G!==null;){if(G.key===Ce){if(Ce=$.type,Ce===P){if(G.tag===7){a(z,G.sibling),ne=y(G,$.props.children),ne.return=z,z=ne;break e}}else if(G.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&yr(Ce)===G.type){a(z,G.sibling),ne=y(G,$.props),Rl(ne,$),ne.return=z,z=ne;break e}a(z,G);break}else o(z,G);G=G.sibling}$.type===P?(ne=fr($.props.children,z.mode,ne,$.key),ne.return=z,z=ne):(ne=ac($.type,$.key,$.props,null,z.mode,ne),Rl(ne,$),ne.return=z,z=ne)}return A(z);case H:e:{for(Ce=$.key;G!==null;){if(G.key===Ce)if(G.tag===4&&G.stateNode.containerInfo===$.containerInfo&&G.stateNode.implementation===$.implementation){a(z,G.sibling),ne=y(G,$.children||[]),ne.return=z,z=ne;break e}else{a(z,G);break}else o(z,G);G=G.sibling}ne=Bf($,z.mode,ne),ne.return=z,z=ne}return A(z);case N:return $=yr($),Et(z,G,$,ne)}if(at($))return _e(z,G,$,ne);if(q($)){if(Ce=q($),typeof Ce!="function")throw Error(i(150));return $=Ce.call($),Re(z,G,$,ne)}if(typeof $.then=="function")return Et(z,G,pc($),ne);if($.$$typeof===ee)return Et(z,G,cc(z,$),ne);mc(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,G!==null&&G.tag===6?(a(z,G.sibling),ne=y(G,$),ne.return=z,z=ne):(a(z,G),ne=Hf($,z.mode,ne),ne.return=z,z=ne),A(z)):a(z,G)}return function(z,G,$,ne){try{xl=0;var Ce=Et(z,G,$,ne);return la=null,Ce}catch(Ee){if(Ee===aa||Ee===fc)throw Ee;var st=Yn(29,Ee,null,z.mode);return st.lanes=ne,st.return=z,st}finally{}}}var _r=dy(!0),fy=dy(!1),po=!1;function jf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function mo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function go(s,o,a){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(dt&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=rc(s),Qg(s,null,a),o}return oc(s,c,o,a),rc(s)}function Nl(s,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,a|=c,o.lanes=a,Wo(s,a)}}function eh(s,o){var a=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=o:v=v.next=o}else y=v=o;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=o:s.next=o,a.lastBaseUpdate=o}var th=!1;function Ml(){if(th){var s=ra;if(s!==null)throw s}}function Dl(s,o,a,c){th=!1;var y=s.updateQueue;po=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var L=I,J=L.next;L.next=null,A===null?v=J:A.next=J,A=L;var te=s.alternate;te!==null&&(te=te.updateQueue,I=te.lastBaseUpdate,I!==A&&(I===null?te.firstBaseUpdate=J:I.next=J,te.lastBaseUpdate=L))}if(v!==null){var ie=y.baseState;A=0,te=J=L=null,I=v;do{var Q=I.lane&-536870913,Z=Q!==I.lane;if(Z?(Qe&Q)===Q:(c&Q)===Q){Q!==0&&Q===oa&&(th=!0),te!==null&&(te=te.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var _e=s,Re=I;Q=o;var Et=a;switch(Re.tag){case 1:if(_e=Re.payload,typeof _e=="function"){ie=_e.call(Et,ie,Q);break e}ie=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Re.payload,Q=typeof _e=="function"?_e.call(Et,ie,Q):_e,Q==null)break e;ie=T({},ie,Q);break e;case 2:po=!0}}Q=I.callback,Q!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},te===null?(J=te=Z,L=ie):te=te.next=Z,A|=Q;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);te===null&&(L=ie),y.baseState=L,y.firstBaseUpdate=J,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),Eo|=A,s.lanes=A,s.memoizedState=ie}}function hy(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function py(s,o){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)hy(a[s],o)}var ua=F(null),gc=F(0);function my(s,o){s=Os,ce(gc,s),ce(ua,o),Os=s|o.baseLanes}function nh(){ce(gc,Os),ce(ua,ua.current)}function ih(){Os=gc.current,j(ua),j(gc)}var $n=F(null),pi=null;function yo(s){var o=s.alternate;ce(Ot,Ot.current&1),ce($n,s),pi===null&&(o===null||ua.current!==null||o.memoizedState!==null)&&(pi=s)}function sh(s){ce(Ot,Ot.current),ce($n,s),pi===null&&(pi=s)}function gy(s){s.tag===22?(ce(Ot,Ot.current),ce($n,s),pi===null&&(pi=s)):vo()}function vo(){ce(Ot,Ot.current),ce($n,$n.current)}function Jn(s){j($n),pi===s&&(pi=null),j(Ot)}var Ot=F(0);function yc(s){for(var o=s;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||cp(a)||dp(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ns=0,Fe=null,_t=null,Kt=null,vc=!1,ca=!1,Tr=!1,_c=0,Pl=0,da=null,lw=0;function kt(){throw Error(i(321))}function oh(s,o){if(o===null)return!1;for(var a=0;a<o.length&&a<s.length;a++)if(!Kn(s[a],o[a]))return!1;return!0}function rh(s,o,a,c,y,v){return Ns=v,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,X.H=s===null||s.memoizedState===null?Zy:Eh,Tr=!1,v=a(c,y),Tr=!1,ca&&(v=vy(o,a,c,y)),yy(s),v}function yy(s){X.H=Ul;var o=_t!==null&&_t.next!==null;if(Ns=0,Kt=_t=Fe=null,vc=!1,Pl=0,da=null,o)throw Error(i(300));s===null||Yt||(s=s.dependencies,s!==null&&uc(s)&&(Yt=!0))}function vy(s,o,a,c){Fe=s;var y=0;do{if(ca&&(da=null),Pl=0,ca=!1,25<=y)throw Error(i(301));if(y+=1,Kt=_t=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}X.H=ev,v=o(a,c)}while(ca);return v}function uw(){var s=X.H,o=s.useState()[0];return o=typeof o.then=="function"?kl(o):o,s=s.useState()[0],(_t!==null?_t.memoizedState:null)!==s&&(Fe.flags|=1024),o}function ah(){var s=_c!==0;return _c=0,s}function lh(s,o,a){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~a}function uh(s){if(vc){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}vc=!1}Ns=0,Kt=_t=Fe=null,ca=!1,Pl=_c=0,da=null}function In(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Fe.memoizedState=Kt=s:Kt=Kt.next=s,Kt}function Ht(){if(_t===null){var s=Fe.alternate;s=s!==null?s.memoizedState:null}else s=_t.next;var o=Kt===null?Fe.memoizedState:Kt.next;if(o!==null)Kt=o,_t=s;else{if(s===null)throw Fe.alternate===null?Error(i(467)):Error(i(310));_t=s,s={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Kt===null?Fe.memoizedState=Kt=s:Kt=Kt.next=s}return Kt}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(s){var o=Pl;return Pl+=1,da===null&&(da=[]),s=ly(da,s,o),o=Fe,(Kt===null?o.memoizedState:Kt.next)===null&&(o=o.alternate,X.H=o===null||o.memoizedState===null?Zy:Eh),s}function Ec(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return kl(s);if(s.$$typeof===ee)return fn(s)}throw Error(i(438,String(s)))}function ch(s){var o=null,a=Fe.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=Fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Tc(),Fe.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(s),c=0;c<s;c++)a[c]=O;return o.index++,a}function Ms(s,o){return typeof o=="function"?o(s):o}function Sc(s){var o=Ht();return dh(o,_t,s)}function dh(s,o,a){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}o.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{o=y.next;var I=A=null,L=null,J=o,te=!1;do{var ie=J.lane&-536870913;if(ie!==J.lane?(Qe&ie)===ie:(Ns&ie)===ie){var Q=J.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ie===oa&&(te=!0);else if((Ns&Q)===Q){J=J.next,Q===oa&&(te=!0);continue}else ie={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(I=L=ie,A=v):L=L.next=ie,Fe.lanes|=Q,Eo|=Q;ie=J.action,Tr&&a(v,ie),v=J.hasEagerState?J.eagerState:a(v,ie)}else Q={lane:ie,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(I=L=Q,A=v):L=L.next=Q,Fe.lanes|=ie,Eo|=ie;J=J.next}while(J!==null&&J!==o);if(L===null?A=v:L.next=I,!Kn(v,s.memoizedState)&&(Yt=!0,te&&(a=ra,a!==null)))throw a;s.memoizedState=v,s.baseState=A,s.baseQueue=L,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function fh(s){var o=Ht(),a=o.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var c=a.dispatch,y=a.pending,v=o.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=s(v,A.action),A=A.next;while(A!==y);Kn(v,o.memoizedState)||(Yt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,c]}function _y(s,o,a){var c=Fe,y=Ht(),v=et;if(v){if(a===void 0)throw Error(i(407));a=a()}else a=o();var A=!Kn((_t||y).memoizedState,a);if(A&&(y.memoizedState=a,Yt=!0),y=y.queue,mh(Sy.bind(null,c,y,s),[s]),y.getSnapshot!==o||A||Kt!==null&&Kt.memoizedState.tag&1){if(c.flags|=2048,fa(9,{destroy:void 0},Ey.bind(null,c,y,a,o),null),At===null)throw Error(i(349));v||(Ns&127)!==0||Ty(c,o,a)}return a}function Ty(s,o,a){s.flags|=16384,s={getSnapshot:o,value:a},o=Fe.updateQueue,o===null?(o=Tc(),Fe.updateQueue=o,o.stores=[s]):(a=o.stores,a===null?o.stores=[s]:a.push(s))}function Ey(s,o,a,c){o.value=a,o.getSnapshot=c,Ay(o)&&Cy(s)}function Sy(s,o,a){return a(function(){Ay(o)&&Cy(s)})}function Ay(s){var o=s.getSnapshot;s=s.value;try{var a=o();return!Kn(s,a)}catch{return!0}}function Cy(s){var o=dr(s,2);o!==null&&Hn(o,s,2)}function hh(s){var o=In();if(typeof s=="function"){var a=s;if(s=a(),Tr){ln(!0);try{a()}finally{ln(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:s},o}function by(s,o,a,c){return s.baseState=a,dh(s,_t,typeof c=="function"?c:Ms)}function cw(s,o,a,c,y){if(bc(s))throw Error(i(485));if(s=o.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};X.T!==null?a(!0):v.isTransition=!1,c(v),a=o.pending,a===null?(v.next=o.pending=v,wy(o,v)):(v.next=a.next,o.pending=a.next=v)}}function wy(s,o){var a=o.action,c=o.payload,y=s.state;if(o.isTransition){var v=X.T,A={};X.T=A;try{var I=a(y,c),L=X.S;L!==null&&L(A,I),Iy(s,o,I)}catch(J){ph(s,o,J)}finally{v!==null&&A.types!==null&&(v.types=A.types),X.T=v}}else try{v=a(y,c),Iy(s,o,v)}catch(J){ph(s,o,J)}}function Iy(s,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){xy(s,o,c)},function(c){return ph(s,o,c)}):xy(s,o,a)}function xy(s,o,a){o.status="fulfilled",o.value=a,Ry(o),s.state=a,o=s.pending,o!==null&&(a=o.next,a===o?s.pending=null:(a=a.next,o.next=a,wy(s,a)))}function ph(s,o,a){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,Ry(o),o=o.next;while(o!==c)}s.action=null}function Ry(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Ny(s,o){return o}function My(s,o){if(et){var a=At.formState;if(a!==null){e:{var c=Fe;if(et){if(wt){t:{for(var y=wt,v=hi;y.nodeType!==8;){if(!v){y=null;break t}if(y=mi(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){wt=mi(y.nextSibling),c=y.data==="F!";break e}}fo(c)}c=!1}c&&(o=a[0])}}return a=In(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ny,lastRenderedState:o},a.queue=c,a=Xy.bind(null,Fe,c),c.dispatch=a,c=hh(!1),v=Th.bind(null,Fe,!1,c.queue),c=In(),y={state:o,dispatch:null,action:s,pending:null},c.queue=y,a=cw.bind(null,Fe,y,v,a),y.dispatch=a,c.memoizedState=s,[o,a,!1]}function Dy(s){var o=Ht();return Py(o,_t,s)}function Py(s,o,a){if(o=dh(s,o,Ny)[0],s=Sc(Ms)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=kl(o)}catch(A){throw A===aa?fc:A}else c=o;o=Ht();var y=o.queue,v=y.dispatch;return a!==o.memoizedState&&(Fe.flags|=2048,fa(9,{destroy:void 0},dw.bind(null,y,a),null)),[c,v,s]}function dw(s,o){s.action=o}function ky(s){var o=Ht(),a=_t;if(a!==null)return Py(o,a,s);Ht(),o=o.memoizedState,a=Ht();var c=a.queue.dispatch;return a.memoizedState=s,[o,c,!1]}function fa(s,o,a,c){return s={tag:s,create:a,deps:c,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=Tc(),Fe.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=s.next=s:(c=a.next,a.next=s,s.next=c,o.lastEffect=s),s}function Vy(){return Ht().memoizedState}function Ac(s,o,a,c){var y=In();Fe.flags|=s,y.memoizedState=fa(1|o,{destroy:void 0},a,c===void 0?null:c)}function Cc(s,o,a,c){var y=Ht();c=c===void 0?null:c;var v=y.memoizedState.inst;_t!==null&&c!==null&&oh(c,_t.memoizedState.deps)?y.memoizedState=fa(o,v,a,c):(Fe.flags|=s,y.memoizedState=fa(1|o,v,a,c))}function Uy(s,o){Ac(8390656,8,s,o)}function mh(s,o){Cc(2048,8,s,o)}function fw(s){Fe.flags|=4;var o=Fe.updateQueue;if(o===null)o=Tc(),Fe.updateQueue=o,o.events=[s];else{var a=o.events;a===null?o.events=[s]:a.push(s)}}function Ly(s){var o=Ht().memoizedState;return fw({ref:o,nextImpl:s}),function(){if((dt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Oy(s,o){return Cc(4,2,s,o)}function Hy(s,o){return Cc(4,4,s,o)}function By(s,o){if(typeof o=="function"){s=s();var a=o(s);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Fy(s,o,a){a=a!=null?a.concat([s]):null,Cc(4,4,By.bind(null,o,s),a)}function gh(){}function Gy(s,o){var a=Ht();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&oh(o,c[1])?c[0]:(a.memoizedState=[s,o],s)}function qy(s,o){var a=Ht();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&oh(o,c[1]))return c[0];if(c=s(),Tr){ln(!0);try{s()}finally{ln(!1)}}return a.memoizedState=[c,o],c}function yh(s,o,a){return a===void 0||(Ns&1073741824)!==0&&(Qe&261930)===0?s.memoizedState=o:(s.memoizedState=a,s=zv(),Fe.lanes|=s,Eo|=s,a)}function zy(s,o,a,c){return Kn(a,o)?a:ua.current!==null?(s=yh(s,a,c),Kn(s,o)||(Yt=!0),s):(Ns&42)===0||(Ns&1073741824)!==0&&(Qe&261930)===0?(Yt=!0,s.memoizedState=a):(s=zv(),Fe.lanes|=s,Eo|=s,o)}function Ky(s,o,a,c,y){var v=de.p;de.p=v!==0&&8>v?v:8;var A=X.T,I={};X.T=I,Th(s,!1,o,a);try{var L=y(),J=X.S;if(J!==null&&J(I,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=aw(L,c);Vl(s,o,te,Wn(s))}else Vl(s,o,c,Wn(s))}catch(ie){Vl(s,o,{then:function(){},status:"rejected",reason:ie},Wn())}finally{de.p=v,A!==null&&I.types!==null&&(A.types=I.types),X.T=A}}function hw(){}function vh(s,o,a,c){if(s.tag!==5)throw Error(i(476));var y=Yy(s).queue;Ky(s,y,o,Se,a===null?hw:function(){return $y(s),a(c)})}function Yy(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:Se},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:a},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function $y(s){var o=Yy(s);o.next===null&&(o=s.alternate.memoizedState),Vl(s,o.next.queue,{},Wn())}function _h(){return fn(jl)}function Jy(){return Ht().memoizedState}function Qy(){return Ht().memoizedState}function pw(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var a=Wn();s=mo(a);var c=go(o,s,a);c!==null&&(Hn(c,o,a),Nl(c,o,a)),o={cache:Jf()},s.payload=o;return}o=o.return}}function mw(s,o,a){var c=Wn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bc(s)?Wy(o,a):(a=Lf(s,o,a,c),a!==null&&(Hn(a,s,c),jy(a,o,c)))}function Xy(s,o,a){var c=Wn();Vl(s,o,a,c)}function Vl(s,o,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(bc(s))Wy(o,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,I=v(A,a);if(y.hasEagerState=!0,y.eagerState=I,Kn(I,A))return oc(s,o,y,0),At===null&&sc(),!1}catch{}finally{}if(a=Lf(s,o,y,c),a!==null)return Hn(a,s,c),jy(a,o,c),!0}return!1}function Th(s,o,a,c){if(c={lane:2,revertLane:jh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},bc(s)){if(o)throw Error(i(479))}else o=Lf(s,a,c,2),o!==null&&Hn(o,s,2)}function bc(s){var o=s.alternate;return s===Fe||o!==null&&o===Fe}function Wy(s,o){ca=vc=!0;var a=s.pending;a===null?o.next=o:(o.next=a.next,a.next=o),s.pending=o}function jy(s,o,a){if((a&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,a|=c,o.lanes=a,Wo(s,a)}}var Ul={readContext:fn,use:Ec,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};Ul.useEffectEvent=kt;var Zy={readContext:fn,use:Ec,useCallback:function(s,o){return In().memoizedState=[s,o===void 0?null:o],s},useContext:fn,useEffect:Uy,useImperativeHandle:function(s,o,a){a=a!=null?a.concat([s]):null,Ac(4194308,4,By.bind(null,o,s),a)},useLayoutEffect:function(s,o){return Ac(4194308,4,s,o)},useInsertionEffect:function(s,o){Ac(4,2,s,o)},useMemo:function(s,o){var a=In();o=o===void 0?null:o;var c=s();if(Tr){ln(!0);try{s()}finally{ln(!1)}}return a.memoizedState=[c,o],c},useReducer:function(s,o,a){var c=In();if(a!==void 0){var y=a(o);if(Tr){ln(!0);try{a(o)}finally{ln(!1)}}}else y=o;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=mw.bind(null,Fe,s),[c.memoizedState,s]},useRef:function(s){var o=In();return s={current:s},o.memoizedState=s},useState:function(s){s=hh(s);var o=s.queue,a=Xy.bind(null,Fe,o);return o.dispatch=a,[s.memoizedState,a]},useDebugValue:gh,useDeferredValue:function(s,o){var a=In();return yh(a,s,o)},useTransition:function(){var s=hh(!1);return s=Ky.bind(null,Fe,s.queue,!0,!1),In().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,a){var c=Fe,y=In();if(et){if(a===void 0)throw Error(i(407));a=a()}else{if(a=o(),At===null)throw Error(i(349));(Qe&127)!==0||Ty(c,o,a)}y.memoizedState=a;var v={value:a,getSnapshot:o};return y.queue=v,Uy(Sy.bind(null,c,v,s),[s]),c.flags|=2048,fa(9,{destroy:void 0},Ey.bind(null,c,v,a,o),null),a},useId:function(){var s=In(),o=At.identifierPrefix;if(et){var a=is,c=ns;a=(c&~(1<<32-Ct(c)-1)).toString(32)+a,o="_"+o+"R_"+a,a=_c++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=lw++,o="_"+o+"r_"+a.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:_h,useFormState:My,useActionState:My,useOptimistic:function(s){var o=In();o.memoizedState=o.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Th.bind(null,Fe,!0,a),a.dispatch=o,[s,o]},useMemoCache:ch,useCacheRefresh:function(){return In().memoizedState=pw.bind(null,Fe)},useEffectEvent:function(s){var o=In(),a={impl:s};return o.memoizedState=a,function(){if((dt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Eh={readContext:fn,use:Ec,useCallback:Gy,useContext:fn,useEffect:mh,useImperativeHandle:Fy,useInsertionEffect:Oy,useLayoutEffect:Hy,useMemo:qy,useReducer:Sc,useRef:Vy,useState:function(){return Sc(Ms)},useDebugValue:gh,useDeferredValue:function(s,o){var a=Ht();return zy(a,_t.memoizedState,s,o)},useTransition:function(){var s=Sc(Ms)[0],o=Ht().memoizedState;return[typeof s=="boolean"?s:kl(s),o]},useSyncExternalStore:_y,useId:Jy,useHostTransitionStatus:_h,useFormState:Dy,useActionState:Dy,useOptimistic:function(s,o){var a=Ht();return by(a,_t,s,o)},useMemoCache:ch,useCacheRefresh:Qy};Eh.useEffectEvent=Ly;var ev={readContext:fn,use:Ec,useCallback:Gy,useContext:fn,useEffect:mh,useImperativeHandle:Fy,useInsertionEffect:Oy,useLayoutEffect:Hy,useMemo:qy,useReducer:fh,useRef:Vy,useState:function(){return fh(Ms)},useDebugValue:gh,useDeferredValue:function(s,o){var a=Ht();return _t===null?yh(a,s,o):zy(a,_t.memoizedState,s,o)},useTransition:function(){var s=fh(Ms)[0],o=Ht().memoizedState;return[typeof s=="boolean"?s:kl(s),o]},useSyncExternalStore:_y,useId:Jy,useHostTransitionStatus:_h,useFormState:ky,useActionState:ky,useOptimistic:function(s,o){var a=Ht();return _t!==null?by(a,_t,s,o):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:ch,useCacheRefresh:Qy};ev.useEffectEvent=Ly;function Sh(s,o,a,c){o=s.memoizedState,a=a(c,o),a=a==null?o:T({},o,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var Ah={enqueueSetState:function(s,o,a){s=s._reactInternals;var c=Wn(),y=mo(c);y.payload=o,a!=null&&(y.callback=a),o=go(s,y,c),o!==null&&(Hn(o,s,c),Nl(o,s,c))},enqueueReplaceState:function(s,o,a){s=s._reactInternals;var c=Wn(),y=mo(c);y.tag=1,y.payload=o,a!=null&&(y.callback=a),o=go(s,y,c),o!==null&&(Hn(o,s,c),Nl(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var a=Wn(),c=mo(a);c.tag=2,o!=null&&(c.callback=o),o=go(s,c,a),o!==null&&(Hn(o,s,a),Nl(o,s,a))}};function tv(s,o,a,c,y,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,A):o.prototype&&o.prototype.isPureReactComponent?!Sl(a,c)||!Sl(y,v):!0}function nv(s,o,a,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==s&&Ah.enqueueReplaceState(o,o.state,null)}function Er(s,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(s=s.defaultProps){a===o&&(a=T({},a));for(var y in s)a[y]===void 0&&(a[y]=s[y])}return a}function iv(s){ic(s)}function sv(s){console.error(s)}function ov(s){ic(s)}function wc(s,o){try{var a=s.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function rv(s,o,a){try{var c=s.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Ch(s,o,a){return a=mo(a),a.tag=3,a.payload={element:null},a.callback=function(){wc(s,o)},a}function av(s){return s=mo(s),s.tag=3,s}function lv(s,o,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){rv(o,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){rv(o,a,c),typeof y!="function"&&(So===null?So=new Set([this]):So.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function gw(s,o,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&sa(o,a,y,!0),a=$n.current,a!==null){switch(a.tag){case 31:case 13:return pi===null?Oc():a.alternate===null&&Vt===0&&(Vt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===hc?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),Qh(s,c,y)),!1;case 22:return a.flags|=65536,c===hc?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),Qh(s,c,y)),!1}throw Error(i(435,a.tag))}return Qh(s,c,y),Oc(),!1}if(et)return o=$n.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==qf&&(s=Error(i(422),{cause:c}),bl(ci(s,a)))):(c!==qf&&(o=Error(i(423),{cause:c}),bl(ci(o,a))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=ci(c,a),y=Ch(s.stateNode,c,y),eh(s,y),Vt!==4&&(Vt=2)),!1;var v=Error(i(520),{cause:c});if(v=ci(v,a),zl===null?zl=[v]:zl.push(v),Vt!==4&&(Vt=2),o===null)return!0;c=ci(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,s=y&-y,a.lanes|=s,s=Ch(a.stateNode,c,s),eh(a,s),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(So===null||!So.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=av(y),lv(y,s,a,c),eh(a,y),!1}a=a.return}while(a!==null);return!1}var bh=Error(i(461)),Yt=!1;function hn(s,o,a,c){o.child=s===null?fy(o,null,a,c):_r(o,s.child,a,c)}function uv(s,o,a,c,y){a=a.render;var v=o.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return mr(o),c=rh(s,o,a,A,v,y),I=ah(),s!==null&&!Yt?(lh(s,o,y),Ds(s,o,y)):(et&&I&&Ff(o),o.flags|=1,hn(s,o,c,y),o.child)}function cv(s,o,a,c,y){if(s===null){var v=a.type;return typeof v=="function"&&!Of(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,dv(s,o,v,c,y)):(s=ac(a.type,null,c,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!Ph(s,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Sl,a(A,c)&&s.ref===o.ref)return Ds(s,o,y)}return o.flags|=1,s=ws(v,c),s.ref=o.ref,s.return=o,o.child=s}function dv(s,o,a,c,y){if(s!==null){var v=s.memoizedProps;if(Sl(v,c)&&s.ref===o.ref)if(Yt=!1,o.pendingProps=c=v,Ph(s,y))(s.flags&131072)!==0&&(Yt=!0);else return o.lanes=s.lanes,Ds(s,o,y)}return wh(s,o,a,c,y)}function fv(s,o,a,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,s!==null){for(c=o.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return hv(s,o,v,a,c)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&dc(o,v!==null?v.cachePool:null),v!==null?my(o,v):nh(),gy(o);else return c=o.lanes=536870912,hv(s,o,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(dc(o,v.cachePool),my(o,v),vo(),o.memoizedState=null):(s!==null&&dc(o,null),nh(),vo());return hn(s,o,y,a),o.child}function Ll(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function hv(s,o,a,c,y){var v=Xf();return v=v===null?null:{parent:zt._currentValue,pool:v},o.memoizedState={baseLanes:a,cachePool:v},s!==null&&dc(o,null),nh(),gy(o),s!==null&&sa(s,o,c,!0),o.childLanes=y,null}function Ic(s,o){return o=Rc({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function pv(s,o,a){return _r(o,s.child,null,a),s=Ic(o,o.pendingProps),s.flags|=2,Jn(o),o.memoizedState=null,s}function yw(s,o,a){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(et){if(c.mode==="hidden")return s=Ic(o,c),o.lanes=536870912,Ll(null,s);if(sh(o),(s=wt)?(s=w0(s,hi),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:uo!==null?{id:ns,overflow:is}:null,retryLane:536870912,hydrationErrors:null},a=Wg(s),a.return=o,o.child=a,dn=o,wt=null)):s=null,s===null)throw fo(o);return o.lanes=536870912,null}return Ic(o,c)}var v=s.memoizedState;if(v!==null){var A=v.dehydrated;if(sh(o),y)if(o.flags&256)o.flags&=-257,o=pv(s,o,a);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Yt||sa(s,o,a,!1),y=(a&s.childLanes)!==0,Yt||y){if(c=At,c!==null&&(A=jo(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,dr(s,A),Hn(c,s,A),bh;Oc(),o=pv(s,o,a)}else s=v.treeContext,wt=mi(A.nextSibling),dn=o,et=!0,co=null,hi=!1,s!==null&&ey(o,s),o=Ic(o,c),o.flags|=4096;return o}return s=ws(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function xc(s,o){var a=o.ref;if(a===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(s===null||s.ref!==a)&&(o.flags|=4194816)}}function wh(s,o,a,c,y){return mr(o),a=rh(s,o,a,c,void 0,y),c=ah(),s!==null&&!Yt?(lh(s,o,y),Ds(s,o,y)):(et&&c&&Ff(o),o.flags|=1,hn(s,o,a,y),o.child)}function mv(s,o,a,c,y,v){return mr(o),o.updateQueue=null,a=vy(o,c,a,y),yy(s),c=ah(),s!==null&&!Yt?(lh(s,o,v),Ds(s,o,v)):(et&&c&&Ff(o),o.flags|=1,hn(s,o,a,v),o.child)}function gv(s,o,a,c,y){if(mr(o),o.stateNode===null){var v=ea,A=a.contextType;typeof A=="object"&&A!==null&&(v=fn(A)),v=new a(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Ah,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},jf(o),A=a.contextType,v.context=typeof A=="object"&&A!==null?fn(A):ea,v.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Sh(o,a,A,c),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Ah.enqueueReplaceState(v,v.state,null),Dl(o,c,v,y),Ml(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){v=o.stateNode;var I=o.memoizedProps,L=Er(a,I);v.props=L;var J=v.context,te=a.contextType;A=ea,typeof te=="object"&&te!==null&&(A=fn(te));var ie=a.getDerivedStateFromProps;te=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||J!==A)&&nv(o,v,c,A),po=!1;var Q=o.memoizedState;v.state=Q,Dl(o,c,v,y),Ml(),J=o.memoizedState,I||Q!==J||po?(typeof ie=="function"&&(Sh(o,a,ie,c),J=o.memoizedState),(L=po||tv(o,a,L,c,Q,J,A))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=J),v.props=c,v.state=J,v.context=A,c=L):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,Zf(s,o),A=o.memoizedProps,te=Er(a,A),v.props=te,ie=o.pendingProps,Q=v.context,J=a.contextType,L=ea,typeof J=="object"&&J!==null&&(L=fn(J)),I=a.getDerivedStateFromProps,(J=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ie||Q!==L)&&nv(o,v,c,L),po=!1,Q=o.memoizedState,v.state=Q,Dl(o,c,v,y),Ml();var Z=o.memoizedState;A!==ie||Q!==Z||po||s!==null&&s.dependencies!==null&&uc(s.dependencies)?(typeof I=="function"&&(Sh(o,a,I,c),Z=o.memoizedState),(te=po||tv(o,a,te,c,Q,Z,L)||s!==null&&s.dependencies!==null&&uc(s.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=Z),v.props=c,v.state=Z,v.context=L,c=te):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Q===s.memoizedState||(o.flags|=1024),c=!1)}return v=c,xc(s,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&c?(o.child=_r(o,s.child,null,y),o.child=_r(o,null,a,y)):hn(s,o,a,y),o.memoizedState=v.state,s=o.child):s=Ds(s,o,y),s}function yv(s,o,a,c){return hr(),o.flags|=256,hn(s,o,a,c),o.child}var Ih={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xh(s){return{baseLanes:s,cachePool:ry()}}function Rh(s,o,a){return s=s!==null?s.childLanes&~a:0,o&&(s|=Xn),s}function vv(s,o,a){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(Ot.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,s===null){if(et){if(y?yo(o):vo(),(s=wt)?(s=w0(s,hi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:uo!==null?{id:ns,overflow:is}:null,retryLane:536870912,hydrationErrors:null},a=Wg(s),a.return=o,o.child=a,dn=o,wt=null)):s=null,s===null)throw fo(o);return dp(s)?o.lanes=32:o.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(vo(),y=o.mode,I=Rc({mode:"hidden",children:I},y),c=fr(c,y,a,null),I.return=o,c.return=o,I.sibling=c,o.child=I,c=o.child,c.memoizedState=xh(a),c.childLanes=Rh(s,A,a),o.memoizedState=Ih,Ll(null,c)):(yo(o),Nh(o,I))}var L=s.memoizedState;if(L!==null&&(I=L.dehydrated,I!==null)){if(v)o.flags&256?(yo(o),o.flags&=-257,o=Mh(s,o,a)):o.memoizedState!==null?(vo(),o.child=s.child,o.flags|=128,o=null):(vo(),I=c.fallback,y=o.mode,c=Rc({mode:"visible",children:c.children},y),I=fr(I,y,a,null),I.flags|=2,c.return=o,I.return=o,c.sibling=I,o.child=c,_r(o,s.child,null,a),c=o.child,c.memoizedState=xh(a),c.childLanes=Rh(s,A,a),o.memoizedState=Ih,o=Ll(null,c));else if(yo(o),dp(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(i(419)),c.stack="",c.digest=A,bl({value:c,source:null,stack:null}),o=Mh(s,o,a)}else if(Yt||sa(s,o,a,!1),A=(a&s.childLanes)!==0,Yt||A){if(A=At,A!==null&&(c=jo(A,a),c!==0&&c!==L.retryLane))throw L.retryLane=c,dr(s,c),Hn(A,s,c),bh;cp(I)||Oc(),o=Mh(s,o,a)}else cp(I)?(o.flags|=192,o.child=s.child,o=null):(s=L.treeContext,wt=mi(I.nextSibling),dn=o,et=!0,co=null,hi=!1,s!==null&&ey(o,s),o=Nh(o,c.children),o.flags|=4096);return o}return y?(vo(),I=c.fallback,y=o.mode,L=s.child,J=L.sibling,c=ws(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,J!==null?I=ws(J,I):(I=fr(I,y,a,null),I.flags|=2),I.return=o,c.return=o,c.sibling=I,o.child=c,Ll(null,c),c=o.child,I=s.child.memoizedState,I===null?I=xh(a):(y=I.cachePool,y!==null?(L=zt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=ry(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=Rh(s,A,a),o.memoizedState=Ih,Ll(s.child,c)):(yo(o),a=s.child,s=a.sibling,a=ws(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,s!==null&&(A=o.deletions,A===null?(o.deletions=[s],o.flags|=16):A.push(s)),o.child=a,o.memoizedState=null,a)}function Nh(s,o){return o=Rc({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Rc(s,o){return s=Yn(22,s,null,o),s.lanes=0,s}function Mh(s,o,a){return _r(o,s.child,null,a),s=Nh(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function _v(s,o,a){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),Yf(s.return,o,a)}function Dh(s,o,a,c,y,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function Tv(s,o,a){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Ot.current,I=(A&2)!==0;if(I?(A=A&1|2,o.flags|=128):A&=1,ce(Ot,A),hn(s,o,c,a),c=et?Cl:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&_v(s,a,o);else if(s.tag===19)_v(s,a,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(a=o.child,y=null;a!==null;)s=a.alternate,s!==null&&yc(s)===null&&(y=a),a=a.sibling;a=y,a===null?(y=o.child,o.child=null):(y=a.sibling,a.sibling=null),Dh(o,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&yc(s)===null){o.child=y;break}s=y.sibling,y.sibling=a,a=y,y=s}Dh(o,!0,a,null,v,c);break;case"together":Dh(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function Ds(s,o,a){if(s!==null&&(o.dependencies=s.dependencies),Eo|=o.lanes,(a&o.childLanes)===0)if(s!==null){if(sa(s,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,a=ws(s,s.pendingProps),o.child=a,a.return=o;s.sibling!==null;)s=s.sibling,a=a.sibling=ws(s,s.pendingProps),a.return=o;a.sibling=null}return o.child}function Ph(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&uc(s)))}function vw(s,o,a){switch(o.tag){case 3:yt(o,o.stateNode.containerInfo),ho(o,zt,s.memoizedState.cache),hr();break;case 27:case 5:Nn(o);break;case 4:yt(o,o.stateNode.containerInfo);break;case 10:ho(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,sh(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(yo(o),o.flags|=128,null):(a&o.child.childLanes)!==0?vv(s,o,a):(yo(o),s=Ds(s,o,a),s!==null?s.sibling:null);yo(o);break;case 19:var y=(s.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(sa(s,o,a,!1),c=(a&o.childLanes)!==0),y){if(c)return Tv(s,o,a);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(Ot,Ot.current),c)break;return null;case 22:return o.lanes=0,fv(s,o,a,o.pendingProps);case 24:ho(o,zt,s.memoizedState.cache)}return Ds(s,o,a)}function Ev(s,o,a){if(s!==null)if(s.memoizedProps!==o.pendingProps)Yt=!0;else{if(!Ph(s,a)&&(o.flags&128)===0)return Yt=!1,vw(s,o,a);Yt=(s.flags&131072)!==0}else Yt=!1,et&&(o.flags&1048576)!==0&&Zg(o,Cl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=yr(o.elementType),o.type=s,typeof s=="function")Of(s)?(c=Er(s,c),o.tag=1,o=gv(null,o,s,c,a)):(o.tag=0,o=wh(null,o,s,c,a));else{if(s!=null){var y=s.$$typeof;if(y===re){o.tag=11,o=uv(null,o,s,c,a);break e}else if(y===M){o.tag=14,o=cv(null,o,s,c,a);break e}}throw o=Ge(s)||s,Error(i(306,o,""))}}return o;case 0:return wh(s,o,o.type,o.pendingProps,a);case 1:return c=o.type,y=Er(c,o.pendingProps),gv(s,o,c,y,a);case 3:e:{if(yt(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,Zf(s,o),Dl(o,c,null,a);var A=o.memoizedState;if(c=A.cache,ho(o,zt,c),c!==v.cache&&$f(o,[zt],a,!0),Ml(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=yv(s,o,c,a);break e}else if(c!==y){y=ci(Error(i(424)),o),bl(y),o=yv(s,o,c,a);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(wt=mi(s.firstChild),dn=o,et=!0,co=null,hi=!0,a=fy(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(hr(),c===y){o=Ds(s,o,a);break e}hn(s,o,c,a)}o=o.child}return o;case 26:return xc(s,o),s===null?(a=D0(o.type,null,o.pendingProps,null))?o.memoizedState=a:et||(a=o.type,s=o.pendingProps,c=Kc(xe.current).createElement(a),c[le]=o,c[ge]=s,pn(c,a,s),Gt(c),o.stateNode=c):o.memoizedState=D0(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Nn(o),s===null&&et&&(c=o.stateNode=R0(o.type,o.pendingProps,xe.current),dn=o,hi=!0,y=wt,wo(o.type)?(fp=y,wt=mi(c.firstChild)):wt=y),hn(s,o,o.pendingProps.children,a),xc(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&et&&((y=c=wt)&&(c=Jw(c,o.type,o.pendingProps,hi),c!==null?(o.stateNode=c,dn=o,wt=mi(c.firstChild),hi=!1,y=!0):y=!1),y||fo(o)),Nn(o),y=o.type,v=o.pendingProps,A=s!==null?s.memoizedProps:null,c=v.children,ap(y,v)?c=null:A!==null&&ap(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=rh(s,o,uw,null,null,a),jl._currentValue=y),xc(s,o),hn(s,o,c,a),o.child;case 6:return s===null&&et&&((s=a=wt)&&(a=Qw(a,o.pendingProps,hi),a!==null?(o.stateNode=a,dn=o,wt=null,s=!0):s=!1),s||fo(o)),null;case 13:return vv(s,o,a);case 4:return yt(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=_r(o,null,c,a):hn(s,o,c,a),o.child;case 11:return uv(s,o,o.type,o.pendingProps,a);case 7:return hn(s,o,o.pendingProps,a),o.child;case 8:return hn(s,o,o.pendingProps.children,a),o.child;case 12:return hn(s,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,ho(o,o.type,c.value),hn(s,o,c.children,a),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,mr(o),y=fn(y),c=c(y),o.flags|=1,hn(s,o,c,a),o.child;case 14:return cv(s,o,o.type,o.pendingProps,a);case 15:return dv(s,o,o.type,o.pendingProps,a);case 19:return Tv(s,o,a);case 31:return yw(s,o,a);case 22:return fv(s,o,a,o.pendingProps);case 24:return mr(o),c=fn(zt),s===null?(y=Xf(),y===null&&(y=At,v=Jf(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),o.memoizedState={parent:c,cache:y},jf(o),ho(o,zt,y)):((s.lanes&a)!==0&&(Zf(s,o),Dl(o,null,null,a),Ml()),y=s.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),ho(o,zt,c)):(c=v.cache,ho(o,zt,c),c!==y.cache&&$f(o,[zt],a,!0))),hn(s,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Ps(s){s.flags|=4}function kh(s,o,a,c,y){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(Jv())s.flags|=8192;else throw vr=hc,Wf}else s.flags&=-16777217}function Sv(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!L0(o))if(Jv())s.flags|=8192;else throw vr=hc,Wf}function Nc(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Ft():536870912,s.lanes|=o,ga|=o)}function Ol(s,o){if(!et)switch(s.tailMode){case"hidden":o=s.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function It(s){var o=s.alternate!==null&&s.alternate.child===s.child,a=0,c=0;if(o)for(var y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=a,o}function _w(s,o,a){var c=o.pendingProps;switch(Gf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(o),null;case 1:return It(o),null;case 3:return a=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Rs(zt),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(ia(o)?Ps(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,zf())),It(o),null;case 26:var y=o.type,v=o.memoizedState;return s===null?(Ps(o),v!==null?(It(o),Sv(o,v)):(It(o),kh(o,y,null,c,a))):v?v!==s.memoizedState?(Ps(o),It(o),Sv(o,v)):(It(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ps(o),It(o),kh(o,y,s,c,a)),null;case 27:if(Si(o),a=xe.current,y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ps(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return It(o),null}s=me.current,ia(o)?ty(o):(s=R0(y,c,a),o.stateNode=s,Ps(o))}return It(o),null;case 5:if(Si(o),y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ps(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return It(o),null}if(v=me.current,ia(o))ty(o);else{var A=Kc(xe.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[le]=o,v[ge]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch(pn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ps(o)}}return It(o),kh(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,a),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&Ps(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=xe.current,ia(o)){if(s=o.stateNode,a=o.memoizedProps,c=null,y=dn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[le]=o,s=!!(s.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||v0(s.nodeValue,a)),s||fo(o,!0)}else s=Kc(s).createTextNode(c),s[le]=o,o.stateNode=s}return It(o),null;case 31:if(a=o.memoizedState,s===null||s.memoizedState!==null){if(c=ia(o),a!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[le]=o}else hr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;It(o),s=!1}else a=zf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return o.flags&256?(Jn(o),o):(Jn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return It(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ia(o),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[le]=o}else hr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;It(o),y=!1}else y=zf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Jn(o),o):(Jn(o),null)}return Jn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=c!==null,s=s!==null&&s.memoizedState!==null,a&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==s&&a&&(o.child.flags|=8192),Nc(o,o.updateQueue),It(o),null);case 4:return lt(),s===null&&np(o.stateNode.containerInfo),It(o),null;case 10:return Rs(o.type),It(o),null;case 19:if(j(Ot),c=o.memoizedState,c===null)return It(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)Ol(c,!1);else{if(Vt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=yc(s),v!==null){for(o.flags|=128,Ol(c,!1),s=v.updateQueue,o.updateQueue=s,Nc(o,s),o.subtreeFlags=0,s=a,a=o.child;a!==null;)Xg(a,s),a=a.sibling;return ce(Ot,Ot.current&1|2),et&&Is(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&Ut()>Vc&&(o.flags|=128,y=!0,Ol(c,!1),o.lanes=4194304)}else{if(!y)if(s=yc(v),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,Nc(o,s),Ol(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!et)return It(o),null}else 2*Ut()-c.renderingStartTime>Vc&&a!==536870912&&(o.flags|=128,y=!0,Ol(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(s=c.last,s!==null?s.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Ut(),s.sibling=null,a=Ot.current,ce(Ot,y?a&1|2:a&1),et&&Is(o,c.treeForkCount),s):(It(o),null);case 22:case 23:return Jn(o),ih(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(It(o),o.subtreeFlags&6&&(o.flags|=8192)):It(o),a=o.updateQueue,a!==null&&Nc(o,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),s!==null&&j(gr),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Rs(zt),It(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Tw(s,o){switch(Gf(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Rs(zt),lt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Si(o),null;case 31:if(o.memoizedState!==null){if(Jn(o),o.alternate===null)throw Error(i(340));hr()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(Jn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));hr()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return j(Ot),null;case 4:return lt(),null;case 10:return Rs(o.type),null;case 22:case 23:return Jn(o),ih(),s!==null&&j(gr),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Rs(zt),null;case 25:return null;default:return null}}function Av(s,o){switch(Gf(o),o.tag){case 3:Rs(zt),lt();break;case 26:case 27:case 5:Si(o);break;case 4:lt();break;case 31:o.memoizedState!==null&&Jn(o);break;case 13:Jn(o);break;case 19:j(Ot);break;case 10:Rs(o.type);break;case 22:case 23:Jn(o),ih(),s!==null&&j(gr);break;case 24:Rs(zt)}}function Hl(s,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&s)===s){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){gt(o,o.return,I)}}function _o(s,o,a){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=o;var L=a,J=I;try{J()}catch(te){gt(y,L,te)}}}c=c.next}while(c!==v)}}catch(te){gt(o,o.return,te)}}function Cv(s){var o=s.updateQueue;if(o!==null){var a=s.stateNode;try{py(o,a)}catch(c){gt(s,s.return,c)}}}function bv(s,o,a){a.props=Er(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(c){gt(s,o,c)}}function Bl(s,o){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof a=="function"?s.refCleanup=a(c):a.current=c}}catch(y){gt(s,o,y)}}function ss(s,o){var a=s.ref,c=s.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){gt(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){gt(s,o,y)}else a.current=null}function wv(s){var o=s.type,a=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){gt(s,s.return,y)}}function Vh(s,o,a){try{var c=s.stateNode;Gw(c,s.type,a,o),c[ge]=o}catch(y){gt(s,s.return,y)}}function Iv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&wo(s.type)||s.tag===4}function Uh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Iv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&wo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Lh(s,o,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(s),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Ii));else if(c!==4&&(c===27&&wo(s.type)&&(a=s.stateNode,o=null),s=s.child,s!==null))for(Lh(s,o,a),s=s.sibling;s!==null;)Lh(s,o,a),s=s.sibling}function Mc(s,o,a){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?a.insertBefore(s,o):a.appendChild(s);else if(c!==4&&(c===27&&wo(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(Mc(s,o,a),s=s.sibling;s!==null;)Mc(s,o,a),s=s.sibling}function xv(s){var o=s.stateNode,a=s.memoizedProps;try{for(var c=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);pn(o,c,a),o[le]=s,o[ge]=a}catch(v){gt(s,s.return,v)}}var ks=!1,$t=!1,Oh=!1,Rv=typeof WeakSet=="function"?WeakSet:Set,sn=null;function Ew(s,o){if(s=s.containerInfo,op=jc,s=Fg(s),Mf(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,L=-1,J=0,te=0,ie=s,Q=null;t:for(;;){for(var Z;ie!==a||y!==0&&ie.nodeType!==3||(I=A+y),ie!==v||c!==0&&ie.nodeType!==3||(L=A+c),ie.nodeType===3&&(A+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)Q=ie,ie=Z;for(;;){if(ie===s)break t;if(Q===a&&++J===y&&(I=A),Q===v&&++te===c&&(L=A),(Z=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=Z}a=I===-1||L===-1?null:{start:I,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(rp={focusedElem:s,selectionRange:a},jc=!1,sn=o;sn!==null;)if(o=sn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,sn=s;else for(;sn!==null;){switch(o=sn,v=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)y=s[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,a=o,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var _e=Er(a.type,y);s=c.getSnapshotBeforeUpdate(_e,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Re){gt(a,a.return,Re)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,a=s.nodeType,a===9)up(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":up(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,sn=s;break}sn=o.return}}function Nv(s,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Us(s,a),c&4&&Hl(5,a);break;case 1:if(Us(s,a),c&4)if(s=a.stateNode,o===null)try{s.componentDidMount()}catch(A){gt(a,a.return,A)}else{var y=Er(a.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(A){gt(a,a.return,A)}}c&64&&Cv(a),c&512&&Bl(a,a.return);break;case 3:if(Us(s,a),c&64&&(s=a.updateQueue,s!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{py(s,o)}catch(A){gt(a,a.return,A)}}break;case 27:o===null&&c&4&&xv(a);case 26:case 5:Us(s,a),o===null&&c&4&&wv(a),c&512&&Bl(a,a.return);break;case 12:Us(s,a);break;case 31:Us(s,a),c&4&&Pv(s,a);break;case 13:Us(s,a),c&4&&kv(s,a),c&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=Nw.bind(null,a),Xw(s,a))));break;case 22:if(c=a.memoizedState!==null||ks,!c){o=o!==null&&o.memoizedState!==null||$t,y=ks;var v=$t;ks=c,($t=o)&&!v?Ls(s,a,(a.subtreeFlags&8772)!==0):Us(s,a),ks=y,$t=v}break;case 30:break;default:Us(s,a)}}function Mv(s){var o=s.alternate;o!==null&&(s.alternate=null,Mv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Br(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Nt=null,Vn=!1;function Vs(s,o,a){for(a=a.child;a!==null;)Dv(s,o,a),a=a.sibling}function Dv(s,o,a){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Wt,a)}catch{}switch(a.tag){case 26:$t||ss(a,o),Vs(s,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:$t||ss(a,o);var c=Nt,y=Vn;wo(a.type)&&(Nt=a.stateNode,Vn=!1),Vs(s,o,a),Ql(a.stateNode),Nt=c,Vn=y;break;case 5:$t||ss(a,o);case 6:if(c=Nt,y=Vn,Nt=null,Vs(s,o,a),Nt=c,Vn=y,Nt!==null)if(Vn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(a.stateNode)}catch(v){gt(a,o,v)}else try{Nt.removeChild(a.stateNode)}catch(v){gt(a,o,v)}break;case 18:Nt!==null&&(Vn?(s=Nt,C0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),Ca(s)):C0(Nt,a.stateNode));break;case 4:c=Nt,y=Vn,Nt=a.stateNode.containerInfo,Vn=!0,Vs(s,o,a),Nt=c,Vn=y;break;case 0:case 11:case 14:case 15:_o(2,a,o),$t||_o(4,a,o),Vs(s,o,a);break;case 1:$t||(ss(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&bv(a,o,c)),Vs(s,o,a);break;case 21:Vs(s,o,a);break;case 22:$t=(c=$t)||a.memoizedState!==null,Vs(s,o,a),$t=c;break;default:Vs(s,o,a)}}function Pv(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ca(s)}catch(a){gt(o,o.return,a)}}}function kv(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ca(s)}catch(a){gt(o,o.return,a)}}function Sw(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new Rv),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new Rv),o;default:throw Error(i(435,s.tag))}}function Dc(s,o){var a=Sw(s);o.forEach(function(c){if(!a.has(c)){a.add(c);var y=Mw.bind(null,s,c);c.then(y,y)}})}function Un(s,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=s,A=o,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(wo(I.type)){Nt=I.stateNode,Vn=!1;break e}break;case 5:Nt=I.stateNode,Vn=!1;break e;case 3:case 4:Nt=I.stateNode.containerInfo,Vn=!0;break e}I=I.return}if(Nt===null)throw Error(i(160));Dv(v,A,y),Nt=null,Vn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Vv(o,s),o=o.sibling}var Pi=null;function Vv(s,o){var a=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Un(o,s),Ln(s),c&4&&(_o(3,s,s.return),Hl(3,s),_o(5,s,s.return));break;case 1:Un(o,s),Ln(s),c&512&&($t||a===null||ss(a,a.return)),c&64&&ks&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=Pi;if(Un(o,s),Ln(s),c&512&&($t||a===null||ss(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=s.memoizedState,a===null)if(c===null)if(s.stateNode===null){e:{c=s.type,a=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[si]||v[le]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),pn(v,c,a),v[le]=s,Gt(v),c=v;break e;case"link":var A=V0("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=y.createElement(c),pn(v,c,a),y.head.appendChild(v);break;case"meta":if(A=V0("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=y.createElement(c),pn(v,c,a),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[le]=s,Gt(v),c=v}s.stateNode=c}else U0(y,s.type,s.stateNode);else s.stateNode=k0(y,c,s.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?U0(y,s.type,s.stateNode):k0(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Vh(s,s.memoizedProps,a.memoizedProps)}break;case 27:Un(o,s),Ln(s),c&512&&($t||a===null||ss(a,a.return)),a!==null&&c&4&&Vh(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Un(o,s),Ln(s),c&512&&($t||a===null||ss(a,a.return)),s.flags&32){y=s.stateNode;try{kn(y,"")}catch(_e){gt(s,s.return,_e)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Vh(s,y,a!==null?a.memoizedProps:y)),c&1024&&(Oh=!0);break;case 6:if(Un(o,s),Ln(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,a=s.stateNode;try{a.nodeValue=c}catch(_e){gt(s,s.return,_e)}}break;case 3:if(Jc=null,y=Pi,Pi=Yc(o.containerInfo),Un(o,s),Pi=y,Ln(s),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ca(o.containerInfo)}catch(_e){gt(s,s.return,_e)}Oh&&(Oh=!1,Uv(s));break;case 4:c=Pi,Pi=Yc(s.stateNode.containerInfo),Un(o,s),Ln(s),Pi=c;break;case 12:Un(o,s),Ln(s);break;case 31:Un(o,s),Ln(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Dc(s,c)));break;case 13:Un(o,s),Ln(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kc=Ut()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Dc(s,c)));break;case 22:y=s.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,J=ks,te=$t;if(ks=J||y,$t=te||L,Un(o,s),$t=te,ks=J,Ln(s),c&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(a===null||L||ks||$t||Sr(s)),a=null,o=s;;){if(o.tag===5||o.tag===26){if(a===null){L=a=o;try{if(v=L.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=L.stateNode;var ie=L.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;I.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(_e){gt(L,L.return,_e)}}}else if(o.tag===6){if(a===null){L=o;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(_e){gt(L,L.return,_e)}}}else if(o.tag===18){if(a===null){L=o;try{var Z=L.stateNode;y?b0(Z,!0):b0(L.stateNode,!1)}catch(_e){gt(L,L.return,_e)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Dc(s,a))));break;case 19:Un(o,s),Ln(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Dc(s,c)));break;case 30:break;case 21:break;default:Un(o,s),Ln(s)}}function Ln(s){var o=s.flags;if(o&2){try{for(var a,c=s.return;c!==null;){if(Iv(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var y=a.stateNode,v=Uh(s);Mc(s,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(kn(A,""),a.flags&=-33);var I=Uh(s);Mc(s,I,A);break;case 3:case 4:var L=a.stateNode.containerInfo,J=Uh(s);Lh(s,J,L);break;default:throw Error(i(161))}}catch(te){gt(s,s.return,te)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Uv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Uv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Us(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Nv(s,o.alternate,o),o=o.sibling}function Sr(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:_o(4,o,o.return),Sr(o);break;case 1:ss(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&bv(o,o.return,a),Sr(o);break;case 27:Ql(o.stateNode);case 26:case 5:ss(o,o.return),Sr(o);break;case 22:o.memoizedState===null&&Sr(o);break;case 30:Sr(o);break;default:Sr(o)}s=s.sibling}}function Ls(s,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=s,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:Ls(y,v,a),Hl(4,v);break;case 1:if(Ls(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){gt(c,c.return,J)}if(c=v,y=c.updateQueue,y!==null){var I=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)hy(L[y],I)}catch(J){gt(c,c.return,J)}}a&&A&64&&Cv(v),Bl(v,v.return);break;case 27:xv(v);case 26:case 5:Ls(y,v,a),a&&c===null&&A&4&&wv(v),Bl(v,v.return);break;case 12:Ls(y,v,a);break;case 31:Ls(y,v,a),a&&A&4&&Pv(y,v);break;case 13:Ls(y,v,a),a&&A&4&&kv(y,v);break;case 22:v.memoizedState===null&&Ls(y,v,a),Bl(v,v.return);break;case 30:break;default:Ls(y,v,a)}o=o.sibling}}function Hh(s,o){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&wl(a))}function Bh(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&wl(s))}function ki(s,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Lv(s,o,a,c),o=o.sibling}function Lv(s,o,a,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:ki(s,o,a,c),y&2048&&Hl(9,o);break;case 1:ki(s,o,a,c);break;case 3:ki(s,o,a,c),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&wl(s)));break;case 12:if(y&2048){ki(s,o,a,c),s=o.stateNode;try{var v=o.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(L){gt(o,o.return,L)}}else ki(s,o,a,c);break;case 31:ki(s,o,a,c);break;case 13:ki(s,o,a,c);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?ki(s,o,a,c):Fl(s,o):v._visibility&2?ki(s,o,a,c):(v._visibility|=2,ha(s,o,a,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Hh(A,o);break;case 24:ki(s,o,a,c),y&2048&&Bh(o.alternate,o);break;default:ki(s,o,a,c)}}function ha(s,o,a,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=s,A=o,I=a,L=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:ha(v,A,I,L,y),Hl(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?ha(v,A,I,L,y):Fl(v,A):(te._visibility|=2,ha(v,A,I,L,y)),y&&J&2048&&Hh(A.alternate,A);break;case 24:ha(v,A,I,L,y),y&&J&2048&&Bh(A.alternate,A);break;default:ha(v,A,I,L,y)}o=o.sibling}}function Fl(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=s,c=o,y=c.flags;switch(c.tag){case 22:Fl(a,c),y&2048&&Hh(c.alternate,c);break;case 24:Fl(a,c),y&2048&&Bh(c.alternate,c);break;default:Fl(a,c)}o=o.sibling}}var Gl=8192;function pa(s,o,a){if(s.subtreeFlags&Gl)for(s=s.child;s!==null;)Ov(s,o,a),s=s.sibling}function Ov(s,o,a){switch(s.tag){case 26:pa(s,o,a),s.flags&Gl&&s.memoizedState!==null&&lI(a,Pi,s.memoizedState,s.memoizedProps);break;case 5:pa(s,o,a);break;case 3:case 4:var c=Pi;Pi=Yc(s.stateNode.containerInfo),pa(s,o,a),Pi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Gl,Gl=16777216,pa(s,o,a),Gl=c):pa(s,o,a));break;default:pa(s,o,a)}}function Hv(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function ql(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];sn=c,Fv(c,s)}Hv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Bv(s),s=s.sibling}function Bv(s){switch(s.tag){case 0:case 11:case 15:ql(s),s.flags&2048&&_o(9,s,s.return);break;case 3:ql(s);break;case 12:ql(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Pc(s)):ql(s);break;default:ql(s)}}function Pc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];sn=c,Fv(c,s)}Hv(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:_o(8,o,o.return),Pc(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(o));break;default:Pc(o)}s=s.sibling}}function Fv(s,o){for(;sn!==null;){var a=sn;switch(a.tag){case 0:case 11:case 15:_o(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:wl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,sn=c;else e:for(a=s;sn!==null;){c=sn;var y=c.sibling,v=c.return;if(Mv(c),c===a){sn=null;break e}if(y!==null){y.return=v,sn=y;break e}sn=v}}}var Aw={getCacheForType:function(s){var o=fn(zt),a=o.data.get(s);return a===void 0&&(a=s(),o.data.set(s,a)),a},cacheSignal:function(){return fn(zt).controller.signal}},Cw=typeof WeakMap=="function"?WeakMap:Map,dt=0,At=null,$e=null,Qe=0,mt=0,Qn=null,To=!1,ma=!1,Fh=!1,Os=0,Vt=0,Eo=0,Ar=0,Gh=0,Xn=0,ga=0,zl=null,On=null,qh=!1,kc=0,Gv=0,Vc=1/0,Uc=null,So=null,jt=0,Ao=null,ya=null,Hs=0,zh=0,Kh=null,qv=null,Kl=0,Yh=null;function Wn(){return(dt&2)!==0&&Qe!==0?Qe&-Qe:X.T!==null?jh():Zo()}function zv(){if(Xn===0)if((Qe&536870912)===0||et){var s=ue;ue<<=1,(ue&3932160)===0&&(ue=262144),Xn=s}else Xn=536870912;return s=$n.current,s!==null&&(s.flags|=32),Xn}function Hn(s,o,a){(s===At&&(mt===2||mt===9)||s.cancelPendingCommit!==null)&&(va(s,0),Co(s,Qe,Xn,!1)),un(s,a),((dt&2)===0||s!==At)&&(s===At&&((dt&2)===0&&(Ar|=a),Vt===4&&Co(s,Qe,Xn,!1)),os(s))}function Kv(s,o,a){if((dt&6)!==0)throw Error(i(327));var c=!a&&(o&127)===0&&(o&s.expiredLanes)===0||it(s,o),y=c?Iw(s,o):Jh(s,o,!0),v=c;do{if(y===0){ma&&!c&&Co(s,o,0,!1);break}else{if(a=s.current.alternate,v&&!bw(a)){y=Jh(s,o,!1),v=!1;continue}if(y===2){if(v=o,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var I=s;y=zl;var L=I.current.memoizedState.isDehydrated;if(L&&(va(I,A).flags|=256),A=Jh(I,A,!1),A!==2){if(Fh&&!L){I.errorRecoveryDisabledLanes|=v,Ar|=v,y=4;break e}v=On,On=y,v!==null&&(On===null?On=v:On.push.apply(On,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){va(s,0),Co(s,o,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Co(c,o,Xn,!To);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=kc+300-Ut(),10<y)){if(Co(c,o,Xn,!To),Oe(c,0,!0)!==0)break e;Hs=o,c.timeoutHandle=S0(Yv.bind(null,c,a,On,Uc,qh,o,Xn,Ar,ga,To,v,"Throttled",-0,0),y);break e}Yv(c,a,On,Uc,qh,o,Xn,Ar,ga,To,v,null,-0,0)}}break}while(!0);os(s)}function Yv(s,o,a,c,y,v,A,I,L,J,te,ie,Q,Z){if(s.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},Ov(o,v,ie);var _e=(v&62914560)===v?kc-Ut():(v&4194048)===v?Gv-Ut():0;if(_e=uI(ie,_e),_e!==null){Hs=v,s.cancelPendingCommit=_e(e0.bind(null,s,o,v,a,c,y,A,I,L,te,ie,null,Q,Z)),Co(s,v,A,!J);return}}e0(s,o,v,a,c,y,A,I,L)}function bw(s){for(var o=s;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!Kn(v(),y))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Co(s,o,a,c){o&=~Gh,o&=~Ar,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var y=o;0<y;){var v=31-Ct(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&Ts(s,a,o)}function Lc(){return(dt&6)===0?(Yl(0),!1):!0}function $h(){if($e!==null){if(mt===0)var s=$e.return;else s=$e,xs=pr=null,uh(s),la=null,xl=0,s=$e;for(;s!==null;)Av(s.alternate,s),s=s.return;$e=null}}function va(s,o){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,Kw(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),Hs=0,$h(),At=s,$e=a=ws(s.current,null),Qe=o,mt=0,Qn=null,To=!1,ma=it(s,o),Fh=!1,ga=Xn=Gh=Ar=Eo=Vt=0,On=zl=null,qh=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var y=31-Ct(c),v=1<<y;o|=s[y],c&=~v}return Os=o,sc(),a}function $v(s,o){Fe=null,X.H=Ul,o===aa||o===fc?(o=uy(),mt=3):o===Wf?(o=uy(),mt=4):mt=o===bh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Qn=o,$e===null&&(Vt=1,wc(s,ci(o,s.current)))}function Jv(){var s=$n.current;return s===null?!0:(Qe&4194048)===Qe?pi===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?s===pi:!1}function Qv(){var s=X.H;return X.H=Ul,s===null?Ul:s}function Xv(){var s=X.A;return X.A=Aw,s}function Oc(){Vt=4,To||(Qe&4194048)!==Qe&&$n.current!==null||(ma=!0),(Eo&134217727)===0&&(Ar&134217727)===0||At===null||Co(At,Qe,Xn,!1)}function Jh(s,o,a){var c=dt;dt|=2;var y=Qv(),v=Xv();(At!==s||Qe!==o)&&(Uc=null,va(s,o)),o=!1;var A=Vt;e:do try{if(mt!==0&&$e!==null){var I=$e,L=Qn;switch(mt){case 8:$h(),A=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(o=!0);var J=mt;if(mt=0,Qn=null,_a(s,I,L,J),a&&ma){A=0;break e}break;default:J=mt,mt=0,Qn=null,_a(s,I,L,J)}}ww(),A=Vt;break}catch(te){$v(s,te)}while(!0);return o&&s.shellSuspendCounter++,xs=pr=null,dt=c,X.H=y,X.A=v,$e===null&&(At=null,Qe=0,sc()),A}function ww(){for(;$e!==null;)Wv($e)}function Iw(s,o){var a=dt;dt|=2;var c=Qv(),y=Xv();At!==s||Qe!==o?(Uc=null,Vc=Ut()+500,va(s,o)):ma=it(s,o);e:do try{if(mt!==0&&$e!==null){o=$e;var v=Qn;t:switch(mt){case 1:mt=0,Qn=null,_a(s,o,v,1);break;case 2:case 9:if(ay(v)){mt=0,Qn=null,jv(o);break}o=function(){mt!==2&&mt!==9||At!==s||(mt=7),os(s)},v.then(o,o);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:ay(v)?(mt=0,Qn=null,jv(o)):(mt=0,Qn=null,_a(s,o,v,7));break;case 5:var A=null;switch($e.tag){case 26:A=$e.memoizedState;case 5:case 27:var I=$e;if(A?L0(A):I.stateNode.complete){mt=0,Qn=null;var L=I.sibling;if(L!==null)$e=L;else{var J=I.return;J!==null?($e=J,Hc(J)):$e=null}break t}}mt=0,Qn=null,_a(s,o,v,5);break;case 6:mt=0,Qn=null,_a(s,o,v,6);break;case 8:$h(),Vt=6;break e;default:throw Error(i(462))}}xw();break}catch(te){$v(s,te)}while(!0);return xs=pr=null,X.H=c,X.A=y,dt=a,$e!==null?0:(At=null,Qe=0,sc(),Vt)}function xw(){for(;$e!==null&&!Zn();)Wv($e)}function Wv(s){var o=Ev(s.alternate,s,Os);s.memoizedProps=s.pendingProps,o===null?Hc(s):$e=o}function jv(s){var o=s,a=o.alternate;switch(o.tag){case 15:case 0:o=mv(a,o,o.pendingProps,o.type,void 0,Qe);break;case 11:o=mv(a,o,o.pendingProps,o.type.render,o.ref,Qe);break;case 5:uh(o);default:Av(a,o),o=$e=Xg(o,Os),o=Ev(a,o,Os)}s.memoizedProps=s.pendingProps,o===null?Hc(s):$e=o}function _a(s,o,a,c){xs=pr=null,uh(o),la=null,xl=0;var y=o.return;try{if(gw(s,y,o,a,Qe)){Vt=1,wc(s,ci(a,s.current)),$e=null;return}}catch(v){if(y!==null)throw $e=y,v;Vt=1,wc(s,ci(a,s.current)),$e=null;return}o.flags&32768?(et||c===1?s=!0:ma||(Qe&536870912)!==0?s=!1:(To=s=!0,(c===2||c===9||c===3||c===6)&&(c=$n.current,c!==null&&c.tag===13&&(c.flags|=16384))),Zv(o,s)):Hc(o)}function Hc(s){var o=s;do{if((o.flags&32768)!==0){Zv(o,To);return}s=o.return;var a=_w(o.alternate,o,Os);if(a!==null){$e=a;return}if(o=o.sibling,o!==null){$e=o;return}$e=o=s}while(o!==null);Vt===0&&(Vt=5)}function Zv(s,o){do{var a=Tw(s.alternate,s);if(a!==null){a.flags&=32767,$e=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(s=s.sibling,s!==null)){$e=s;return}$e=s=a}while(s!==null);Vt=6,$e=null}function e0(s,o,a,c,y,v,A,I,L){s.cancelPendingCommit=null;do Bc();while(jt!==0);if((dt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=Uf,wi(s,a,v,A,I,L),s===At&&($e=At=null,Qe=0),ya=o,Ao=s,Hs=a,zh=v,Kh=y,qv=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Dw(bn,function(){return o0(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,y=de.p,de.p=2,A=dt,dt|=4;try{Ew(s,o,a)}finally{dt=A,de.p=y,X.T=c}}jt=1,t0(),n0(),i0()}}function t0(){if(jt===1){jt=0;var s=Ao,o=ya,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var c=de.p;de.p=2;var y=dt;dt|=4;try{Vv(o,s);var v=rp,A=Fg(s.containerInfo),I=v.focusedElem,L=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&Bg(I.ownerDocument.documentElement,I)){if(L!==null&&Mf(I)){var J=L.start,te=L.end;if(te===void 0&&(te=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(te,I.value.length);else{var ie=I.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),_e=I.textContent.length,Re=Math.min(L.start,_e),Et=L.end===void 0?Re:Math.min(L.end,_e);!Z.extend&&Re>Et&&(A=Et,Et=Re,Re=A);var z=Hg(I,Re),G=Hg(I,Et);if(z&&G&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==G.node||Z.focusOffset!==G.offset)){var $=ie.createRange();$.setStart(z.node,z.offset),Z.removeAllRanges(),Re>Et?(Z.addRange($),Z.extend(G.node,G.offset)):($.setEnd(G.node,G.offset),Z.addRange($))}}}}for(ie=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ie.length;I++){var ne=ie[I];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}jc=!!op,rp=op=null}finally{dt=y,de.p=c,X.T=a}}s.current=o,jt=2}}function n0(){if(jt===2){jt=0;var s=Ao,o=ya,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var c=de.p;de.p=2;var y=dt;dt|=4;try{Nv(s,o.alternate,o)}finally{dt=y,de.p=c,X.T=a}}jt=3}}function i0(){if(jt===4||jt===3){jt=0,ei();var s=Ao,o=ya,a=Hs,c=qv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?jt=5:(jt=0,ya=Ao=null,s0(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(So=null),ii(a),o=o.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Wt,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=X.T,y=de.p,de.p=2,X.T=null;try{for(var v=s.onRecoverableError,A=0;A<c.length;A++){var I=c[A];v(I.value,{componentStack:I.stack})}}finally{X.T=o,de.p=y}}(Hs&3)!==0&&Bc(),os(s),y=s.pendingLanes,(a&261930)!==0&&(y&42)!==0?s===Yh?Kl++:(Kl=0,Yh=s):Kl=0,Yl(0)}}function s0(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,wl(o)))}function Bc(){return t0(),n0(),i0(),o0()}function o0(){if(jt!==5)return!1;var s=Ao,o=zh;zh=0;var a=ii(Hs),c=X.T,y=de.p;try{de.p=32>a?32:a,X.T=null,a=Kh,Kh=null;var v=Ao,A=Hs;if(jt=0,ya=Ao=null,Hs=0,(dt&6)!==0)throw Error(i(331));var I=dt;if(dt|=4,Bv(v.current),Lv(v,v.current,A,a),dt=I,Yl(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Wt,v)}catch{}return!0}finally{de.p=y,X.T=c,s0(s,o)}}function r0(s,o,a){o=ci(a,o),o=Ch(s.stateNode,o,2),s=go(s,o,2),s!==null&&(un(s,2),os(s))}function gt(s,o,a){if(s.tag===3)r0(s,s,a);else for(;o!==null;){if(o.tag===3){r0(o,s,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(So===null||!So.has(c))){s=ci(a,s),a=av(2),c=go(o,a,2),c!==null&&(lv(a,c,o,s),un(c,2),os(c));break}}o=o.return}}function Qh(s,o,a){var c=s.pingCache;if(c===null){c=s.pingCache=new Cw;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(a)||(Fh=!0,y.add(a),s=Rw.bind(null,s,o,a),o.then(s,s))}function Rw(s,o,a){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,At===s&&(Qe&a)===a&&(Vt===4||Vt===3&&(Qe&62914560)===Qe&&300>Ut()-kc?(dt&2)===0&&va(s,0):Gh|=a,ga===Qe&&(ga=0)),os(s)}function a0(s,o){o===0&&(o=Ft()),s=dr(s,o),s!==null&&(un(s,o),os(s))}function Nw(s){var o=s.memoizedState,a=0;o!==null&&(a=o.retryLane),a0(s,a)}function Mw(s,o){var a=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),a0(s,a)}function Dw(s,o){return ut(s,o)}var Fc=null,Ta=null,Xh=!1,Gc=!1,Wh=!1,bo=0;function os(s){s!==Ta&&s.next===null&&(Ta===null?Fc=Ta=s:Ta=Ta.next=s),Gc=!0,Xh||(Xh=!0,kw())}function Yl(s,o){if(!Wh&&Gc){Wh=!0;do for(var a=!1,c=Fc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,I=c.pingedLanes;v=(1<<31-Ct(42|s)+1)-1,v&=y&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,d0(c,v))}else v=Qe,v=Oe(c,c===At?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||it(c,v)||(a=!0,d0(c,v));c=c.next}while(a);Wh=!1}}function Pw(){l0()}function l0(){Gc=Xh=!1;var s=0;bo!==0&&zw()&&(s=bo);for(var o=Ut(),a=null,c=Fc;c!==null;){var y=c.next,v=u0(c,o);v===0?(c.next=null,a===null?Fc=y:a.next=y,y===null&&(Ta=a)):(a=c,(s!==0||(v&3)!==0)&&(Gc=!0)),c=y}jt!==0&&jt!==5||Yl(s),bo!==0&&(bo=0)}function u0(s,o){for(var a=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-Ct(v),I=1<<A,L=y[A];L===-1?((I&a)===0||(I&c)!==0)&&(y[A]=vn(I,o)):L<=o&&(s.expiredLanes|=I),v&=~I}if(o=At,a=Qe,a=Oe(s,s===o?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,a===0||s===o&&(mt===2||mt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Mn(c),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||it(s,a)){if(o=a&-a,o===s.callbackPriority)return o;switch(c!==null&&Mn(c),ii(a)){case 2:case 8:a=bi;break;case 32:a=bn;break;case 268435456:a=ti;break;default:a=bn}return c=c0.bind(null,s),a=ut(a,c),s.callbackPriority=o,s.callbackNode=a,o}return c!==null&&c!==null&&Mn(c),s.callbackPriority=2,s.callbackNode=null,2}function c0(s,o){if(jt!==0&&jt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(Bc()&&s.callbackNode!==a)return null;var c=Qe;return c=Oe(s,s===At?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Kv(s,c,o),u0(s,Ut()),s.callbackNode!=null&&s.callbackNode===a?c0.bind(null,s):null)}function d0(s,o){if(Bc())return null;Kv(s,o,!0)}function kw(){Yw(function(){(dt&6)!==0?ut(gs,Pw):l0()})}function jh(){if(bo===0){var s=oa;s===0&&(s=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),bo=s}return bo}function f0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:zr(""+s)}function h0(s,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,s.id&&a.setAttribute("form",s.id),o.parentNode.insertBefore(a,o),s=new FormData(s),a.parentNode.removeChild(a),s}function Vw(s,o,a,c,y){if(o==="submit"&&a&&a.stateNode===y){var v=f0((y[ge]||null).action),A=c.submitter;A&&(o=(o=A[ge]||null)?f0(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var I=new ji("action","action",null,c,y);s.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(bo!==0){var L=A?h0(y,A):new FormData(y);vh(a,{pending:!0,data:L,method:y.method,action:v},null,L)}}else typeof v=="function"&&(I.preventDefault(),L=A?h0(y,A):new FormData(y),vh(a,{pending:!0,data:L,method:y.method,action:v},v,L))},currentTarget:y}]})}}for(var Zh=0;Zh<Vf.length;Zh++){var ep=Vf[Zh],Uw=ep.toLowerCase(),Lw=ep[0].toUpperCase()+ep.slice(1);Di(Uw,"on"+Lw)}Di(zg,"onAnimationEnd"),Di(Kg,"onAnimationIteration"),Di(Yg,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Zb,"onTransitionRun"),Di(ew,"onTransitionStart"),Di(tw,"onTransitionCancel"),Di($g,"onTransitionEnd"),Ji("onMouseEnter",["mouseout","mouseover"]),Ji("onMouseLeave",["mouseout","mouseover"]),Ji("onPointerEnter",["pointerout","pointerover"]),Ji("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ow=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function p0(s,o){o=(o&4)!==0;for(var a=0;a<s.length;a++){var c=s[a],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var A=c.length-1;0<=A;A--){var I=c[A],L=I.instance,J=I.currentTarget;if(I=I.listener,L!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(te){ic(te)}y.currentTarget=null,v=L}else for(A=0;A<c.length;A++){if(I=c[A],L=I.instance,J=I.currentTarget,I=I.listener,L!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(te){ic(te)}y.currentTarget=null,v=L}}}}function Je(s,o){var a=o[we];a===void 0&&(a=o[we]=new Set);var c=s+"__bubble";a.has(c)||(m0(o,s,2,!1),a.add(c))}function tp(s,o,a){var c=0;o&&(c|=4),m0(a,s,c,o)}var qc="_reactListening"+Math.random().toString(36).slice(2);function np(s){if(!s[qc]){s[qc]=!0,ol.forEach(function(a){a!=="selectionchange"&&(Ow.has(a)||tp(a,!1,s),tp(a,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[qc]||(o[qc]=!0,tp("selectionchange",!1,o))}}function m0(s,o,a,c){switch(z0(o)){case 2:var y=fI;break;case 8:y=hI;break;default:y=yp}a=y.bind(null,o,a,s),y=void 0,!ir||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(o,a,{capture:!0,passive:y}):s.addEventListener(o,a,!0):y!==void 0?s.addEventListener(o,a,{passive:y}):s.addEventListener(o,a,!1)}function ip(s,o,a,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=Ki(I),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){c=v=A;continue e}I=I.parentNode}}c=c.return}oo(function(){var J=v,te=ri(a),ie=[];e:{var Q=Jg.get(s);if(Q!==void 0){var Z=ji,_e=s;switch(s){case"keypress":if(or(a)===0)break e;case"keydown":case"keyup":Z=ec;break;case"focusin":_e="focus",Z=ar;break;case"focusout":_e="blur",Z=ar;break;case"beforeblur":case"afterblur":Z=ar;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=E;break;case zg:case Kg:case Yg:Z=$u;break;case $g:Z=x;break;case"scroll":case"scrollend":Z=yl;break;case"wheel":Z=W;break;case"copy":case"cut":case"paste":Z=Ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=bs;break;case"toggle":case"beforetoggle":Z=Be}var Re=(o&4)!==0,Et=!Re&&(s==="scroll"||s==="scrollend"),z=Re?Q!==null?Q+"Capture":null:Q;Re=[];for(var G=J,$;G!==null;){var ne=G;if($=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||$===null||z===null||(ne=xi(G,z),ne!=null&&Re.push(Jl(G,ne,$))),Et)break;G=G.return}0<Re.length&&(Q=new Z(Q,_e,null,a,te),ie.push({event:Q,listeners:Re}))}}if((o&7)===0){e:{if(Q=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",Q&&a!==pl&&(_e=a.relatedTarget||a.fromElement)&&(Ki(_e)||_e[Me]))break e;if((Z||Q)&&(Q=te.window===te?te:(Q=te.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(_e=a.relatedTarget||a.toElement,Z=J,_e=_e?Ki(_e):null,_e!==null&&(Et=l(_e),Re=_e.tag,_e!==Et||Re!==5&&Re!==27&&Re!==6)&&(_e=null)):(Z=null,_e=J),Z!==_e)){if(Re=vl,ne="onMouseLeave",z="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Re=bs,ne="onPointerLeave",z="onPointerEnter",G="pointer"),Et=Z==null?Q:qn(Z),$=_e==null?Q:qn(_e),Q=new Re(ne,G+"leave",Z,a,te),Q.target=Et,Q.relatedTarget=$,ne=null,Ki(te)===J&&(Re=new Re(z,G+"enter",_e,a,te),Re.target=$,Re.relatedTarget=Et,ne=Re),Et=ne,Z&&_e)t:{for(Re=Hw,z=Z,G=_e,$=0,ne=z;ne;ne=Re(ne))$++;ne=0;for(var Ce=G;Ce;Ce=Re(Ce))ne++;for(;0<$-ne;)z=Re(z),$--;for(;0<ne-$;)G=Re(G),ne--;for(;$--;){if(z===G||G!==null&&z===G.alternate){Re=z;break t}z=Re(z),G=Re(G)}Re=null}else Re=null;Z!==null&&g0(ie,Q,Z,Re,!1),_e!==null&&Et!==null&&g0(ie,Et,_e,Re,!0)}}e:{if(Q=J?qn(J):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var st=Pg;else if(Mg(Q))if(kg)st=Xb;else{st=Jb;var Ee=$b}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?J&&qr(J.elementType)&&(st=Pg):st=Qb;if(st&&(st=st(s,J))){Dg(ie,st,a,te);break e}Ee&&Ee(s,Q,J),s==="focusout"&&J&&Q.type==="number"&&J.memoizedProps.value!=null&&dl(Q,"number",Q.value)}switch(Ee=J?qn(J):window,s){case"focusin":(Mg(Ee)||Ee.contentEditable==="true")&&(Wr=Ee,Df=J,Al=null);break;case"focusout":Al=Df=Wr=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,Gg(ie,a,te);break;case"selectionchange":if(jb)break;case"keydown":case"keyup":Gg(ie,a,te)}var qe;if(ct)e:{switch(s){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Xr?lr(s,a)&&(Xe="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(Xe="onCompositionStart");Xe&&(ts&&a.locale!=="ko"&&(Xr||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Xr&&(qe=gl()):(Wi=te,ml="value"in Wi?Wi.value:Wi.textContent,Xr=!0)),Ee=zc(J,Xe),0<Ee.length&&(Xe=new es(Xe,s,null,a,te),ie.push({event:Xe,listeners:Ee}),qe?Xe.data=qe:(qe=Qr(a),qe!==null&&(Xe.data=qe)))),(qe=li?qb(s,a):zb(s,a))&&(Xe=zc(J,"onBeforeInput"),0<Xe.length&&(Ee=new es("onBeforeInput","beforeinput",null,a,te),ie.push({event:Ee,listeners:Xe}),Ee.data=qe)),Vw(ie,s,J,a,te)}p0(ie,o)})}function Jl(s,o,a){return{instance:s,listener:o,currentTarget:a}}function zc(s,o){for(var a=o+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=xi(s,a),y!=null&&c.unshift(Jl(s,y,v)),y=xi(s,o),y!=null&&c.push(Jl(s,y,v))),s.tag===3)return c;s=s.return}return[]}function Hw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function g0(s,o,a,c,y){for(var v=o._reactName,A=[];a!==null&&a!==c;){var I=a,L=I.alternate,J=I.stateNode;if(I=I.tag,L!==null&&L===c)break;I!==5&&I!==26&&I!==27||J===null||(L=J,y?(J=xi(a,v),J!=null&&A.unshift(Jl(a,J,L))):y||(J=xi(a,v),J!=null&&A.push(Jl(a,J,L)))),a=a.return}A.length!==0&&s.push({event:o,listeners:A})}var Bw=/\r\n?/g,Fw=/\u0000|\uFFFD/g;function y0(s){return(typeof s=="string"?s:""+s).replace(Bw,`
`).replace(Fw,"")}function v0(s,o){return o=y0(o),y0(s)===o}function Tt(s,o,a,c,y,v){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||kn(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&kn(s,""+c);break;case"className":zn(s,"class",c);break;case"tabIndex":zn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(s,a,c);break;case"style":hl(s,c,v);break;case"data":if(o!=="object"){zn(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){s.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=zr(""+c),s.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&Tt(s,o,"name",y.name,y,null),Tt(s,o,"formEncType",y.formEncType,y,null),Tt(s,o,"formMethod",y.formMethod,y,null),Tt(s,o,"formTarget",y.formTarget,y,null)):(Tt(s,o,"encType",y.encType,y,null),Tt(s,o,"method",y.method,y,null),Tt(s,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(a);break}c=zr(""+c),s.setAttribute(a,c);break;case"onClick":c!=null&&(s.onclick=Ii);break;case"onScroll":c!=null&&Je("scroll",s);break;case"onScrollEnd":c!=null&&Je("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}a=zr(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""+c):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":c===!0?s.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(a,c):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(a,c):s.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(a):s.setAttribute(a,c);break;case"popover":Je("beforetoggle",s),Je("toggle",s),Fr(s,"popover",c);break;case"xlinkActuate":qt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Fr(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=zu.get(a)||a,Fr(s,a,c))}}function sp(s,o,a,c,y,v){switch(a){case"style":hl(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"children":typeof c=="string"?kn(s,c):(typeof c=="number"||typeof c=="bigint")&&kn(s,""+c);break;case"onScroll":c!=null&&Je("scroll",s);break;case"onScrollEnd":c!=null&&Je("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),o=a.slice(2,y?a.length-7:void 0),v=s[ge]||null,v=v!=null?v[a]:null,typeof v=="function"&&s.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(o,c,y);break e}a in s?s[a]=c:c===!0?s.setAttribute(a,""):Fr(s,a,c)}}}function pn(s,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",s),Je("load",s);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Tt(s,o,v,A,a,null)}}y&&Tt(s,o,"srcSet",a.srcSet,a,null),c&&Tt(s,o,"src",a.src,a,null);return;case"input":Je("invalid",s);var I=v=A=y=null,L=null,J=null;for(c in a)if(a.hasOwnProperty(c)){var te=a[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":L=te;break;case"defaultChecked":J=te;break;case"value":v=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:Tt(s,o,c,te,a,null)}}Fu(s,v,I,L,J,A,y,!1);return;case"select":Je("invalid",s),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:Tt(s,o,y,I,a,null)}o=v,a=A,s.multiple=!!c,o!=null?to(s,!!c,o,!1):a!=null&&to(s,!!c,a,!0);return;case"textarea":Je("invalid",s),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:Tt(s,o,A,I,a,null)}no(s,c,y,v);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(c=a[L],c!=null))switch(L){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Tt(s,o,L,c,a,null)}return;case"dialog":Je("beforetoggle",s),Je("toggle",s),Je("cancel",s),Je("close",s);break;case"iframe":case"object":Je("load",s);break;case"video":case"audio":for(c=0;c<$l.length;c++)Je($l[c],s);break;case"image":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"embed":case"source":case"link":Je("error",s),Je("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(c=a[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Tt(s,o,J,c,a,null)}return;default:if(qr(o)){for(te in a)a.hasOwnProperty(te)&&(c=a[te],c!==void 0&&sp(s,o,te,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&Tt(s,o,I,c,a,null))}function Gw(s,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,I=null,L=null,J=null,te=null;for(Z in a){var ie=a[Z];if(a.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=ie;default:c.hasOwnProperty(Z)||Tt(s,o,Z,null,c,ie)}}for(var Q in c){var Z=c[Q];if(ie=a[Q],c.hasOwnProperty(Q)&&(Z!=null||ie!=null))switch(Q){case"type":v=Z;break;case"name":y=Z;break;case"checked":J=Z;break;case"defaultChecked":te=Z;break;case"value":A=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:Z!==ie&&Tt(s,o,Q,Z,c,ie)}}Gr(s,A,I,L,J,te,v,y);return;case"select":Z=A=I=Q=null;for(v in a)if(L=a[v],a.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":Z=L;default:c.hasOwnProperty(v)||Tt(s,o,v,null,c,L)}for(y in c)if(v=c[y],L=a[y],c.hasOwnProperty(y)&&(v!=null||L!=null))switch(y){case"value":Q=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==L&&Tt(s,o,y,v,c,L)}o=I,a=A,c=Z,Q!=null?to(s,!!a,Q,!1):!!c!=!!a&&(o!=null?to(s,!!a,o,!0):to(s,!!a,a?[]:"",!1));return;case"textarea":Z=Q=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Tt(s,o,I,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":Q=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&Tt(s,o,A,y,c,v)}Gu(s,Q,Z);return;case"option":for(var _e in a)if(Q=a[_e],a.hasOwnProperty(_e)&&Q!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":s.selected=!1;break;default:Tt(s,o,_e,null,c,Q)}for(L in c)if(Q=c[L],Z=a[L],c.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":s.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:Tt(s,o,L,Q,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in a)Q=a[Re],a.hasOwnProperty(Re)&&Q!=null&&!c.hasOwnProperty(Re)&&Tt(s,o,Re,null,c,Q);for(J in c)if(Q=c[J],Z=a[J],c.hasOwnProperty(J)&&Q!==Z&&(Q!=null||Z!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,o));break;default:Tt(s,o,J,Q,c,Z)}return;default:if(qr(o)){for(var Et in a)Q=a[Et],a.hasOwnProperty(Et)&&Q!==void 0&&!c.hasOwnProperty(Et)&&sp(s,o,Et,void 0,c,Q);for(te in c)Q=c[te],Z=a[te],!c.hasOwnProperty(te)||Q===Z||Q===void 0&&Z===void 0||sp(s,o,te,Q,c,Z);return}}for(var z in a)Q=a[z],a.hasOwnProperty(z)&&Q!=null&&!c.hasOwnProperty(z)&&Tt(s,o,z,null,c,Q);for(ie in c)Q=c[ie],Z=a[ie],!c.hasOwnProperty(ie)||Q===Z||Q==null&&Z==null||Tt(s,o,ie,Q,c,Z)}function _0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,I=y.duration;if(v&&I&&_0(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var L=a[c],J=L.startTime;if(J>I)break;var te=L.transferSize,ie=L.initiatorType;te&&_0(ie)&&(L=L.responseEnd,A+=te*(L<I?1:(I-J)/(L-J)))}if(--c,o+=8*(v+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var op=null,rp=null;function Kc(s){return s.nodeType===9?s:s.ownerDocument}function T0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function E0(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function ap(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var lp=null;function zw(){var s=window.event;return s&&s.type==="popstate"?s===lp?!1:(lp=s,!0):(lp=null,!1)}var S0=typeof setTimeout=="function"?setTimeout:void 0,Kw=typeof clearTimeout=="function"?clearTimeout:void 0,A0=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof A0<"u"?function(s){return A0.resolve(null).then(s).catch($w)}:S0;function $w(s){setTimeout(function(){throw s})}function wo(s){return s==="head"}function C0(s,o){var a=o,c=0;do{var y=a.nextSibling;if(s.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){s.removeChild(y),Ca(o);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Ql(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,Ql(a);for(var v=a.firstChild;v;){var A=v.nextSibling,I=v.nodeName;v[si]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&Ql(s.ownerDocument.body);a=y}while(a);Ca(o)}function b0(s,o){var a=s;s=0;do{var c=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=c}while(a)}function up(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":up(a),Br(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function Jw(s,o,a,c){for(;s.nodeType===1;){var y=a;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[si])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=mi(s.nextSibling),s===null)break}return null}function Qw(s,o,a){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=mi(s.nextSibling),s===null))return null;return s}function w0(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=mi(s.nextSibling),s===null))return null;return s}function cp(s){return s.data==="$?"||s.data==="$~"}function dp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Xw(s,o){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||a.readyState!=="loading")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function mi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var fp=null;function I0(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(o===0)return mi(s.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}s=s.nextSibling}return null}function x0(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return s;o--}else a!=="/$"&&a!=="/&"||o++}s=s.previousSibling}return null}function R0(s,o,a){switch(o=Kc(a),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Ql(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Br(s)}var gi=new Map,N0=new Set;function Yc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Bs=de.d;de.d={f:Ww,r:jw,D:Zw,C:eI,L:tI,m:nI,X:sI,S:iI,M:oI};function Ww(){var s=Bs.f(),o=Lc();return s||o}function jw(s){var o=oi(s);o!==null&&o.tag===5&&o.type==="form"?$y(o):Bs.r(s)}var Ea=typeof document>"u"?null:document;function M0(s,o,a){var c=Ea;if(c&&typeof o=="string"&&o){var y=Pn(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),N0.has(y)||(N0.add(y),s={rel:s,crossOrigin:a,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),pn(o,"link",s),Gt(o),c.head.appendChild(o)))}}function Zw(s){Bs.D(s),M0("dns-prefetch",s,null)}function eI(s,o){Bs.C(s,o),M0("preconnect",s,o)}function tI(s,o,a){Bs.L(s,o,a);var c=Ea;if(c&&s&&o){var y='link[rel="preload"][as="'+Pn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+Pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+Pn(a.imageSizes)+'"]')):y+='[href="'+Pn(s)+'"]';var v=y;switch(o){case"style":v=Sa(s);break;case"script":v=Aa(s)}gi.has(v)||(s=T({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:s,as:o},a),gi.set(v,s),c.querySelector(y)!==null||o==="style"&&c.querySelector(Xl(v))||o==="script"&&c.querySelector(Wl(v))||(o=c.createElement("link"),pn(o,"link",s),Gt(o),c.head.appendChild(o)))}}function nI(s,o){Bs.m(s,o);var a=Ea;if(a&&s){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Pn(c)+'"][href="'+Pn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Aa(s)}if(!gi.has(v)&&(s=T({rel:"modulepreload",href:s},o),gi.set(v,s),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wl(v)))return}c=a.createElement("link"),pn(c,"link",s),Gt(c),a.head.appendChild(c)}}}function iI(s,o,a){Bs.S(s,o,a);var c=Ea;if(c&&s){var y=Yi(c).hoistableStyles,v=Sa(s);o=o||"default";var A=y.get(v);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(Xl(v)))I.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":o},a),(a=gi.get(v))&&hp(s,a);var L=A=c.createElement("link");Gt(L),pn(L,"link",s),L._p=new Promise(function(J,te){L.onload=J,L.onerror=te}),L.addEventListener("load",function(){I.loading|=1}),L.addEventListener("error",function(){I.loading|=2}),I.loading|=4,$c(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(v,A)}}}function sI(s,o){Bs.X(s,o);var a=Ea;if(a&&s){var c=Yi(a).hoistableScripts,y=Aa(s),v=c.get(y);v||(v=a.querySelector(Wl(y)),v||(s=T({src:s,async:!0},o),(o=gi.get(y))&&pp(s,o),v=a.createElement("script"),Gt(v),pn(v,"link",s),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function oI(s,o){Bs.M(s,o);var a=Ea;if(a&&s){var c=Yi(a).hoistableScripts,y=Aa(s),v=c.get(y);v||(v=a.querySelector(Wl(y)),v||(s=T({src:s,async:!0,type:"module"},o),(o=gi.get(y))&&pp(s,o),v=a.createElement("script"),Gt(v),pn(v,"link",s),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function D0(s,o,a,c){var y=(y=xe.current)?Yc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Sa(a.href),a=Yi(y).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=Sa(a.href);var v=Yi(y).hoistableStyles,A=v.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=y.querySelector(Xl(s)))&&!v._p&&(A.instance=v,A.state.loading=5),gi.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},gi.set(s,a),v||rI(y,s,a,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Aa(a),a=Yi(y).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Sa(s){return'href="'+Pn(s)+'"'}function Xl(s){return'link[rel="stylesheet"]['+s+"]"}function P0(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function rI(s,o,a,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),pn(o,"link",a),Gt(o),s.head.appendChild(o))}function Aa(s){return'[src="'+Pn(s)+'"]'}function Wl(s){return"script[async]"+s}function k0(s,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+Pn(a.href)+'"]');if(c)return o.instance=c,Gt(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Gt(c),pn(c,"style",y),$c(c,a.precedence,s),o.instance=c;case"stylesheet":y=Sa(a.href);var v=s.querySelector(Xl(y));if(v)return o.state.loading|=4,o.instance=v,Gt(v),v;c=P0(a),(y=gi.get(y))&&hp(c,y),v=(s.ownerDocument||s).createElement("link"),Gt(v);var A=v;return A._p=new Promise(function(I,L){A.onload=I,A.onerror=L}),pn(v,"link",c),o.state.loading|=4,$c(v,a.precedence,s),o.instance=v;case"script":return v=Aa(a.src),(y=s.querySelector(Wl(v)))?(o.instance=y,Gt(y),y):(c=a,(y=gi.get(v))&&(c=T({},a),pp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Gt(y),pn(y,"link",c),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,$c(c,a.precedence,s));return o.instance}function $c(s,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===o)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(s,o.firstChild))}function hp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function pp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Jc=null;function V0(s,o,a){if(Jc===null){var c=new Map,y=Jc=new Map;y.set(a,c)}else y=Jc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(s))return c;for(c.set(s,null),a=a.getElementsByTagName(s),y=0;y<a.length;y++){var v=a[y];if(!(v[si]||v[le]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=s+A;var I=c.get(A);I?I.push(v):c.set(A,[v])}}return c}function U0(s,o,a){s=s.ownerDocument||s,s.head.insertBefore(a,o==="title"?s.querySelector("head > title"):null)}function aI(s,o,a){if(a===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function L0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function lI(s,o,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Sa(c.href),v=o.querySelector(Xl(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=Qc.bind(s),o.then(s,s)),a.state.loading|=4,a.instance=v,Gt(v);return}v=o.ownerDocument||o,c=P0(c),(y=gi.get(y))&&hp(c,y),v=v.createElement("link"),Gt(v);var A=v;A._p=new Promise(function(I,L){A.onload=I,A.onerror=L}),pn(v,"link",c),a.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=Qc.bind(s),o.addEventListener("load",a),o.addEventListener("error",a))}}var mp=0;function uI(s,o){return s.stylesheets&&s.count===0&&Wc(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var c=setTimeout(function(){if(s.stylesheets&&Wc(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+o);0<s.imgBytes&&mp===0&&(mp=62500*qw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Wc(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>mp?50:800)+o);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Xc=null;function Wc(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Xc=new Map,o.forEach(cI,s),Xc=null,Qc.call(s))}function cI(s,o){if(!(o.state.loading&4)){var a=Xc.get(s);if(a)var c=a.get(null);else{a=new Map,Xc.set(s,a);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=o.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=Qc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var jl={$$typeof:ee,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function dI(s,o,a,c,y,v,A,I,L){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tt(0),this.hiddenUpdates=tt(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function O0(s,o,a,c,y,v,A,I,L,J,te,ie){return s=new dI(s,o,a,A,L,J,te,ie,I),o=1,v===!0&&(o|=24),v=Yn(3,null,null,o),s.current=v,v.stateNode=s,o=Jf(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:o},jf(v),s}function H0(s){return s?(s=ea,s):ea}function B0(s,o,a,c,y,v){y=H0(y),c.context===null?c.context=y:c.pendingContext=y,c=mo(o),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=go(s,c,o),a!==null&&(Hn(a,s,o),Nl(a,s,o))}function F0(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<o?a:o}}function gp(s,o){F0(s,o),(s=s.alternate)&&F0(s,o)}function G0(s){if(s.tag===13||s.tag===31){var o=dr(s,67108864);o!==null&&Hn(o,s,67108864),gp(s,67108864)}}function q0(s){if(s.tag===13||s.tag===31){var o=Wn();o=Es(o);var a=dr(s,o);a!==null&&Hn(a,s,o),gp(s,o)}}var jc=!0;function fI(s,o,a,c){var y=X.T;X.T=null;var v=de.p;try{de.p=2,yp(s,o,a,c)}finally{de.p=v,X.T=y}}function hI(s,o,a,c){var y=X.T;X.T=null;var v=de.p;try{de.p=8,yp(s,o,a,c)}finally{de.p=v,X.T=y}}function yp(s,o,a,c){if(jc){var y=vp(c);if(y===null)ip(s,o,c,Zc,a),K0(s,c);else if(mI(y,s,o,a,c))c.stopPropagation();else if(K0(s,c),o&4&&-1<pI.indexOf(s)){for(;y!==null;){var v=oi(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Ne(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var L=1<<31-Ct(A);I.entanglements[1]|=L,A&=~L}os(v),(dt&6)===0&&(Vc=Ut()+500,Yl(0))}}break;case 31:case 13:I=dr(v,2),I!==null&&Hn(I,v,2),Lc(),gp(v,2)}if(v=vp(c),v===null&&ip(s,o,c,Zc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else ip(s,o,c,null,a)}}function vp(s){return s=ri(s),_p(s)}var Zc=null;function _p(s){if(Zc=null,s=Ki(s),s!==null){var o=l(s);if(o===null)s=null;else{var a=o.tag;if(a===13){if(s=u(o),s!==null)return s;s=null}else if(a===31){if(s=f(o),s!==null)return s;s=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Zc=s,null}function z0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gn()){case gs:return 2;case bi:return 8;case bn:case qi:return 32;case ti:return 268435456;default:return 32}default:return 32}}var Tp=!1,Io=null,xo=null,Ro=null,Zl=new Map,eu=new Map,No=[],pI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function K0(s,o){switch(s){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":Zl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":eu.delete(o.pointerId)}}function tu(s,o,a,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=oi(o),o!==null&&G0(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function mI(s,o,a,c,y){switch(o){case"focusin":return Io=tu(Io,s,o,a,c,y),!0;case"dragenter":return xo=tu(xo,s,o,a,c,y),!0;case"mouseover":return Ro=tu(Ro,s,o,a,c,y),!0;case"pointerover":var v=y.pointerId;return Zl.set(v,tu(Zl.get(v)||null,s,o,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,eu.set(v,tu(eu.get(v)||null,s,o,a,c,y)),!0}return!1}function Y0(s){var o=Ki(s.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=u(a),o!==null){s.blockedOn=o,St(s.priority,function(){q0(a)});return}}else if(o===31){if(o=f(a),o!==null){s.blockedOn=o,St(s.priority,function(){q0(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ed(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var a=vp(s.nativeEvent);if(a===null){a=s.nativeEvent;var c=new a.constructor(a.type,a);pl=c,a.target.dispatchEvent(c),pl=null}else return o=oi(a),o!==null&&G0(o),s.blockedOn=a,!1;o.shift()}return!0}function $0(s,o,a){ed(s)&&a.delete(o)}function gI(){Tp=!1,Io!==null&&ed(Io)&&(Io=null),xo!==null&&ed(xo)&&(xo=null),Ro!==null&&ed(Ro)&&(Ro=null),Zl.forEach($0),eu.forEach($0)}function td(s,o){s.blockedOn===o&&(s.blockedOn=null,Tp||(Tp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gI)))}var nd=null;function J0(s){nd!==s&&(nd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nd===s&&(nd=null);for(var o=0;o<s.length;o+=3){var a=s[o],c=s[o+1],y=s[o+2];if(typeof c!="function"){if(_p(c||a)===null)continue;break}var v=oi(a);v!==null&&(s.splice(o,3),o-=3,vh(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function Ca(s){function o(L){return td(L,s)}Io!==null&&td(Io,s),xo!==null&&td(xo,s),Ro!==null&&td(Ro,s),Zl.forEach(o),eu.forEach(o);for(var a=0;a<No.length;a++){var c=No[a];c.blockedOn===s&&(c.blockedOn=null)}for(;0<No.length&&(a=No[0],a.blockedOn===null);)Y0(a),a.blockedOn===null&&No.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[ge]||null;if(typeof v=="function")A||J0(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[ge]||null)I=A.formAction;else if(_p(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),J0(a)}}}function Q0(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Ep(s){this._internalRoot=s}id.prototype.render=Ep.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var a=o.current,c=Wn();B0(a,c,s,o,null,null)},id.prototype.unmount=Ep.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;B0(s.current,2,null,s,null,null),Lc(),o[Me]=null}};function id(s){this._internalRoot=s}id.prototype.unstable_scheduleHydration=function(s){if(s){var o=Zo();s={blockedOn:null,target:s,priority:o};for(var a=0;a<No.length&&o!==0&&o<No[a].priority;a++);No.splice(a,0,s),a===0&&Y0(s)}};var X0=e.version;if(X0!=="19.2.3")throw Error(i(527,X0,"19.2.3"));de.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(o),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var yI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{Wt=sd.inject(yI),Mt=sd}catch{}}return iu.createRoot=function(s,o){if(!r(s))throw Error(i(299));var a=!1,c="",y=iv,v=sv,A=ov;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=O0(s,1,!1,null,null,a,c,null,y,v,A,Q0),s[Me]=o.current,np(s),new Ep(o)},iu.hydrateRoot=function(s,o,a){if(!r(s))throw Error(i(299));var c=!1,y="",v=iv,A=sv,I=ov,L=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),o=O0(s,1,!0,o,a??null,c,y,L,v,A,I,Q0),o.context=H0(null),a=o.current,c=Wn(),c=Es(c),y=mo(c),y.callback=null,go(a,y,c),a=c,o.current.lanes=a,un(o,a),os(o),s[Me]=o.current,np(s),new id(o)},iu.version="19.2.3",iu}var r_;function wI(){if(r_)return Cp.exports;r_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cp.exports=bI(),Cp.exports}var II=wI();const xI=pS(II);var Ma=gS();const ba=n=>Array.from(new Set(n)).sort((e,t)=>e.localeCompare(t)),ru=[{category:"Vital Sign",items:["Vital sign"]},{category:"Symptom",items:ba(["Abdominal distention","Abdominal pain","Abnormal menstruation","Abnormal sexual exposure","Alopecia","Anorexia","Anosmia","Anxiety","Arthralgia","Back pain","Belching","Blurred vision","Bone pain","Cataracts","Change of bowel habit","Chest tightness/pain","Chills","Clay-colored stool","Cloudy urine","Color changes","Consciousness disturbance","Constipation","Cough","Cramps","Decreased appetite","Delusion","Dental problems","Depression","Diarrhea","Diplopia","Dizziness","Dry eye","Dry mouth","Dryness","Dysphagia","Dyspnea","Dysuria","Ecchymoses","Epistaxis","Excess tearing","Eye redness","Fatigue","Fever","Flank pain","Flatulence","Fractures","Gait disturbance","General edema","Glaucoma","Gum bleeding","Hair loss","Hallucination","Head trauma","Headache","Hearing impairment","Heartburn/acid regurgitation","Heat/cold intolerance","Hematemesis","Hematuria","Hemoptysis","Hesitancy","Hiccup","Hirsutism","Hoarseness","Impotence","Incontinence","Insomnia","Intermittent claudication","Jaundice","Joint stiffness","Joint swelling","Memory loss","Mental stage change","Moles","Myalgia","Nasal congestion","Nausea","Night sweats","Nocturia","Numbness","Ocular pain","Odynophagia","Oliguria","Oral ulcer","Orthopnea","Otalgia","Otorrhea","Palpitation","Panic","Paraesthesia","Paresis/plegia","Paroxysmal nocturnal dyspnea","Petechiae","Photophobia","Plaque","Polyuria","Pruritus","Purpura","Rash","Resting tremor","Rhinorrhea","Small stream of urine","Somnolence","Sore throat","Speech problem","Sputum","Suicidality","Syncope","Tarry stool","Telangiectasia","Tenesmus","Thirsty","Tinnitus","Ulcers","Urgency","Urinary frequency","Vertigo","Visual field defect","Vomiting","Weight change","Wheezes"])},{category:"Negative Symptom",items:[]},{category:"Medical Facility",items:["Keelung Chang Gung Memorial Hospital ()","Linkou Chang Gung Memorial Hospital ()","Chiayi Chang Gung Memorial Hospital ()","Kaohsiung Chang Gung Memorial Hospital ()","National Taiwan University Hospital ()","National Taiwan University Hospital Yunlin Branch ()","National Taiwan University Hospital Hsinchu Branch ()","National Taiwan University Cancer Center ()","Taipei Veterans General Hospital ()","Taichung Veterans General Hospital ()","Kaohsiung Veterans General Hospital ()","Taipei City Hospital, Renai Branch ()","Taipei City Hospital, Zhongxing Branch ()","Taipei City Hospital, Heping Fuyou Branch ()","Taipei City Hospital, Yangming Branch ()","Taipei City Hospital, Zhongxiao Branch ()","Tri-Service General Hospital ()","Mackay Memorial Hospital ()","Hsinchu Mackay Memorial Hospital ()","Mackay Memorial Hospital Tamsui Branch ()","Cathay General Hospital ()","Sijhih Cathay General Hospital ()","Shin Kong Wu Ho-Su Memorial Hospital ()","Wanfang Hospital","Taipei Medical University Hospital ()","Cheng Hsin General Hospital ()","Far Eastern Memorial Hospital ()","Taipei Tzu Chi Hospital ()","Hualien Tzu Chi Hospital ()","Dalin Tzu Chi Hospital ()","Cardinal Tien Hospital ()","Fu Jen Catholic University Hospital ()","Taoyuan General Hospital, Ministry of Health and Welfare ()","China Medical University Hospital ()","Chung Shan Medical University Hospital ()","Tungs' Taichung MetroHarbor Hospital ()","Kuang Tien General Hospital ()","Cheng Ching Hospital ()","Changhua Christian Hospital ()","Show Chwan Memorial Hospital ()","Chia-Yi Christian Hospital ()","National Cheng Kung University Hospital ()","Chi Mei Medical Center ()","Kaohsiung Medical University Chung-Ho Memorial Hospital ()","E-Da Hospital ()","Taiwan Adventist Hospital ()","Pojen General Hospital ()","West Garden Hospital ()","Taipei Hospital, Ministry of Health and Welfare ()","New Taipei City Hospital ()","Cardinal Tien Hospital Yonghe Branch ()","New Taipei Municipal Tucheng Hospital ()"]},{category:"Disease",items:ba(["Acute Bronchitis","Acute Gastroenteritis (AGE)","Acute Kidney Injury (AKI)","Acute Myocardial Infarction (AMI)","Acute Pancreatitis","Acute Pyelonephritis (APN)","Adrenal Insufficiency","Anemia","Ankylosing Spondylitis (AS)","Aortic Stenosis / Regurgitation","Appendicitis","Asthma","Atrial Fibrillation (Afib)","Benign Prostatic Hyperplasia (BPH)","Breast Cancer","Cellulitis","Cerebrovascular Accident (CVA) / Stroke","Cholecystitis","Chronic Kidney Disease (CKD)","Chronic Obstructive Pulmonary Disease (COPD)","Colorectal Cancer","Congestive Heart Failure (CHF) / Heart Failure (HF)","Coronary Artery Disease (CAD)","Deep Vein Thrombosis (DVT)","Dehydration","Dementia","Depression / Anxiety Disorder","Diabetes Mellitus (DM)","Diabetic Foot","Diabetic Ketoacidosis (DKA)","Diverticulitis","End-Stage Renal Disease (ESRD)","Esophageal Cancer","Gastroesophageal Reflux Disease (GERD)","Gout","Hepatitis B / C","Hepatocellular Carcinoma (HCC)","Herniated Intervertebral Disc (HIVD)","Herpes Zoster (Shingles)","Hyperlipidemia","Hypertension (HTN)","Hyperthyroidism","Hypothyroidism","Ileus / Bowel Obstruction","Infective Endocarditis","Influenza","Leukemia","Liver Cirrhosis","Lower GI Bleeding","Lung Cancer","Lymphoma","Meningitis / Encephalitis","Myasthenia Gravis (MG)","Necrotizing Fasciitis","Nephrotic Syndrome","Obstructive Sleep Apnea (OSA)","Parkinson's Disease","Peptic Ulcer Disease (PUD)","Peripheral Arterial Occlusive Disease (PAOD)","Pleural Effusion","Pneumonia","Pneumothorax","Prostate Cancer","Pulmonary Embolism (PE)","Pulmonary Tuberculosis (TB)","Rabies","Rheumatoid Arthritis (RA)","Seizure Disorder / Epilepsy","Sepsis / Septic Shock","Sjogren's Syndrome","Systemic Lupus Erythematosus (SLE)","Thrombocytopenia","Tumor Bleeding","Upper GI Bleeding","Urinary Tract Infection (UTI)","Urolithiasis / Renal Stone","Vertigo / Benign Paroxysmal Positional Vertigo (BPPV)"])},{category:"Tentative Diagnosis",items:[]},{category:"Underlying disease",items:[]},{category:"Definitive diagnosis",items:[]},{category:"Physical examination",items:ba(["Breathing sound","Heart sound","Pitting edema","Abdominal tenderness","Rebound tenderness","Muscle guarding","Knocking pain","Tenderness"])},{category:"Lab data",items:ba(["Anemia","Leukocytosis","Leukopenia","Neutrophilia","Neutropenia","Lymphocytosis","Lymphocytopenia / Lymphopenia","Monocytosis","Eosinophilia","Basophilia","Thrombocytosis","Thrombocytopenia","Pancytopenia","Polycythemia / Erythrocytosis","Macrocytosis","Microcytosis","Reticulocytosis","Prolonged PT/INR","Prolonged aPTT","Hypofibrinogenemia","Hypernatremia","Hyponatremia","Hyperkalemia","Hypokalemia","Hypercalcemia","Hypocalcemia","Hypermagnesemia","Hypomagnesemia","Hyperphosphatemia","Hypophosphatemia","Hyperchloremia","Hypochloremia","Azotemia","Uremia","Hematuria","Proteinuria","Albuminuria / Microalbuminuria","Pyuria","Glycosuria / Glucosuria","Ketonuria","Bacteriuria","Cylindruria","Crystalluria","Hemoglobinuria","Myoglobinuria","Hyperbilirubinemia","Elevated Transaminases","Cholestasis","Hypoalbuminemia","Hyperglobulinemia","Hyperammonemia","Elevated Alkaline Phosphatase (Alk-P)","Hypoproteinemia","Hyperglycemia","Hypoglycemia","Elevated HbA1c","Hyperlipidemia / Dyslipidemia","Hypercholesterolemia","Hypertriglyceridemia","Hyperuricemia","Thyrotoxicosis","Subclinical Hypothyroidism","Hyperferritinemia","Metabolic Acidosis","Metabolic Alkalosis","Respiratory Acidosis","Respiratory Alkalosis","Hypoxemia","Hypercapnia","Hypocapnia","Hyperlactatemia / Lactic Acidosis","Elevated C-Reactive Protein (CRP)","Elevated ESR","Procalcitonin Elevation","Elevated Troponin (Troponin-I / T)","Elevated BNP / NT-proBNP","Elevated CK-MB","Elevated CPK / Creatine Kinase","elevated lactate","elevated BUN","elevated creatinine","microscopic hematuria","macroscopic hematuria"])},{category:"Culture / Gram stain",items:["wound","pus","blood","sputum","urine","stool","CSF","pleural effusion","ascites","Synovial fluid","CVC Tip","Port-A Tip","Foley Tip","Bronchoalveolar Lavage","Nasopharyngeal Swab","Throat Swab"]},{category:"Image finding",items:ba(["Chest X-ray (CXR)","Kidney, Ureter, and Bladder (KUB)","Abdominal Plain Film (Abd X-ray)","Spine X-ray (C/T/L-spine)","Bone X-ray","Abdominal Ultrasonography (Abd Echo/TAS)","Echocardiography (Echo)","Thyroid Ultrasonography","Breast Ultrasonography","Carotid Duplex Ultrasound","Kidney/Renal Ultrasonography","Brain CT","Chest CT","Abdominal CT","CT Angiography (CTA)","High-Resolution Computed Tomography (HRCT)","Brain MRI","Spine MRI","Magnetic Resonance Angiography (MRA)","Magnetic Resonance Cholangiopancreatography (MRCP)","Bone Scan","Positron Emission Potentially (PET)","Angiography","Mammography"])},{category:"Treatment",items:ba(["Antibiotics","Diuretics","Fluid resuscitation","Oxygen therapy","Hemodialysis","Bronchodilator"])}],Nm=`
**Role:**
 JSON   / Admission Note - Present Illness section

**Input Data Structure ():**
 JSON 
1. \`patient_profile\`:  ( \`control_status\`)
2. \`timepoints\`:  ** (Array)** \`date\`, \`symptom\`, \`vital_sign\`, \`treatment\`, \`lab_data\`, \`image_finding\`, \`negative_symptom\`  Key
   - **:**  Key  \`""\`  \`null\` (SKIP) "unknown" 

**Objective:**


**Style Guidelines (STYLE GUIDELINES) - :**

1. ** (Narrative Logic & Chain of Care):**
   - **LMD  ER :**  \`timepoints\`  (LMD)  **"futile"**, **"ineffective"**  **"not effective"** (ER) 
   - **:**  **"This time"**  **"At this time"**  (PMH)  (Present Illness)
   - **:** **"According to [family/wife/husband]..."**  **"[Family member] witnessed that..."**

2. ** (Sentence Structure & Grammar):**
   - **"Denied" () :**  "No fever, no cough"  \`negative_symptom\`  **"denied"**"He denied fever, chills, or chest pain."**"No [symptom] was noted/mentioned."**
   - **"Beside" :**  **"Beside"** "Besides"
   - **/:**  "He had a tremor" **"[Symptom] was noted/observed"**  **"[Symptom] occurred"**
   - **/:** **"Aggravated by [A] but not [B]"**  **"Relieved by [C]"**
   - **:** **"For [Diagnosis], he/she was admitted..."**  **"Under the impression of [Diagnosis], he/she was admitted..."**

3. ** (Data Formatting):**
   - **:** **"[Disease] + [Duration] + [Follow-up Location] + [Control status]"**"Hypertension for 10 years with regular follow-up at our OPD."
   - ** ():** **Temperature -> Blood Pressure -> Pulse -> Respiratory Rate -> SpO2**
   - **:**  (;) "WBC: 10700/ul; CRP: 76.4 mg/L"
   - **:**  ** + /**"Yellowish, tenacious sputum", "Pinkish urine"
   - **:**  **"unremarkable"**
   - **:** **Brand names** ()  (e.g., *Unasyn*); **Generic names** ()  (e.g., *moxifloxacin*)

4. ** (Grammar & Terminology Precision) [NEW]:**
   - **:**  "since 3 days ago" **"for 3 days"**, **"since 3 days prior"**,  **"developed 3 days before admission"**
   - **:** - : **lungs**, **feet**, **breath sounds**, **bowel sounds**
     - : sputum, urine, inflammation
   - **:** - Weakness **in** the leg (NOT over).
     - Tenderness **over** the spine.
     - Mass **in** the lung.
   - **:**  "LMD"  **"local clinic"**  **"private clinic"** "AAD"  **"discharged against medical advice (AMA)"**

** (VOCABULARY BANK) - :**


* ** (Mode of Onset / Appearance):**
  - ** (Verbs):** Appear, Develop, Present (with), Occur (on), Strike, Ensue from, Be restricted to.
  - ** (Adjectives):** Sudden / Abrupt, Gradual / Insidious, Progressive, Episodic / Paroxysmal, Intermittent, Transient, Periodic, Recurrent.
* ** (Causality):**
  - **:** Be provoked by, Be precipitated by, Be triggered by, Be induced by.
  - **:** Be associated with, Be related to, Be accompanied by, Be complicated by.
* ** (Course & Outcome):**
  - **:** Disappear, Vanish, Subside.
  - **:** Improve, Become better, Lessen; (Passive) Be relieved, Be palliated, Be alleviated.
  - **:** Aggravate, Exacerbate, Worsen, Deteriorate.
  - **:** Recur, Relapse, Flare up.
  - **:** Fluctuate, Wax and wane.
* ** (Encounter & Work-up):**
  - **:** Was admitted, Was seen, Was evaluated, Was referred, Was transferred.
  - ** (Procedures):** - Use: **"Insert a Foley"**, **"Perform intubation"**, **"Replace an NG tube"**.
    - **FORBIDDEN:** "On Foley", "Re-on NG", "On endo".
  - ** (Test):** Was performed, Was obtained, Was collected.
* ** (Treatment):**
  - **:** Treat, Administer, Give, Initiate, Start.
  - **:** **Switch to**, **Replace by**, **Substitute for**. (FORBIDDEN: "Shift to").
  - **:** **Discontinue**, **Withhold**, **Stop**. (FORBIDDEN: "Hold").
  - **:** Be ineffective, Not effective, **Futile**; Result in improvement.
* **:**
  - **:** **"Sequently"**, **"Consecutively"**, **"Successively"**, **"Afterwards"**.
  - **:** **"manifested"**, **"depicted"**, **"revealed"**, **"demonstrated"**, **"evinced"**.
  - **:** **"Avowed"**, **"Perceived"**, **"Complained of"**, State, Insist, Claim, Confide.
  - **:** Use **"Was diagnosed with"**, **"A diagnosis of... was made"**. (FORBIDDEN: "Was told to have", "Pneumonia was impressed").
  - **:** Use **"Lost to follow-up"**, **"Defaulted"**. (FORBIDDEN: "Escape").
  - **:** **stationary**, **"stable"**.
  - **:** **"antecedent [Disease]"**.

**Drafting Structure ( - Dynamic Loop):**

1. ** (Background)**
   -  \`patient_profile\` 
   - : "This [Age]-year-old [Gender] has a medical history of [Disease]..." ( \`control_status\`)

2. ** N  (The Narrative Loop)**
   - **:**  (Iterate through) \`timepoints\` 
   - **Loop :**
     - ** (Timepoint):**
       -  \`date\` 
       - ** (Symptom):**  \`symptom\` ()  \`negative_symptom\` ( "denied")
       - ** (Objective):**  \`vital_sign\`, \`lab_data\`, \`image_finding\` "revealed/evinced/manifested" 
       - ** (Treatment):**  \`treatment\` LMD (Local Clinic)  **"futile"**  **"ineffective"**
     - ** (Transition):**  Vocabulary Bank  ( "Sequently", "Consecutively") 

3. ** (Conclusion/Admission)**
   -  ( ER)  \`definitive_diagnosis\` 
   - : "**For [Diagnosis], he/she was admitted for further evaluation and administration.**"

**Anti-Hallucination & Missing Detail Prompts ( - CRITICAL):**

**Rule 1: Strict Anti-Hallucination**
Do **NOT** invent any data not present in the JSON. If the JSON says "fever" but gives no temperature, do NOT make up a number like "38.5C".

**Rule 2: The "Missing Detail" Heuristic ()**
While you must not invent details, you MUST flag clinically important missing information. If the JSON input provides a *generic* term without *specific attributes*, **insert a reminder in parentheses within the sentence**: \`(Note: Please add [Detail Name])\`.

**Apply this rule to the following categories:**

* **Symptoms (LQQOPERA check):**
    * If a symptom is listed without **Duration**, insert \`(Note: duration?)\`.
    * If "Pain" is listed without **Location**, **Quality**, or **Radiation**, insert \`(Note: location/quality/radiation?)\`.
    * If "Fever" is listed without **Temperature (Tmax)**, insert \`(Note: Tmax?)\`.
* **Secretions/Excretions:**
    * If "Sputum", "Diarrhea", "Hematuria" are mentioned without **Color/Amount/Consistency**, insert \`(Note: color/amount/consistency?)\`.
* **Treatment/Medication:**
    * If generic terms (e.g., "Antibiotics") are used without a **Specific Drug Name**, insert \`(Note: drug name?)\`.
* **Labs/Images:**
    * If "Image finding" is present but lacks a **Description**, insert \`(Note: image finding description?)\`.
    * If generic lab abnormalities (e.g., "Leukocytosis") are mentioned without \`Specific Values\`, insert \`(Note: value?)\`.
`;/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),a_=n=>{const e=NI(n);return e.charAt(0).toUpperCase()+e.slice(1)},yS=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),MI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=oe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:l,iconNode:u,...f},g)=>oe.createElement("svg",{ref:g,...DI,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:yS("lucide",r),...!l&&!MI(f)&&{"aria-hidden":"true"},...f},[...u.map(([h,_])=>oe.createElement(h,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(n,e)=>{const t=oe.forwardRef(({className:i,...r},l)=>oe.createElement(PI,{ref:l,iconNode:e,className:yS(`lucide-${RI(a_(n))}`,`lucide-${n}`,i),...r}));return t.displayName=a_(n),t};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vS=ze("activity",kI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],UI=ze("arrow-right",VI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],OI=ze("brain-circuit",LI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],BI=ze("building-2",HI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],GI=ze("calendar-days",FI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_S=ze("check",qI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],l_=ze("chevron-down",zI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yi=ze("chevron-right",KI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$I=ze("circle-alert",YI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],QI=ze("circle-check",JI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],TS=ze("circle-user",XI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jI=ze("clock",WI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],ex=ze("cloud-download",ZI);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Mm=ze("copy",tx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ix=ze("external-link",nx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ES=ze("file-text",sx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],rx=ze("grip-vertical",ox);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],lx=ze("heart-pulse",ax);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],u_=ze("history",ux);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],SS=ze("key",cx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fu=ze("loader-circle",dx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hx=ze("lock",fx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],mx=ze("log-out",px);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],yx=ze("maximize-2",gx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],_x=ze("message-square-text",vx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Ex=ze("minimize-2",Tx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],Ax=ze("octagon-alert",Sx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],AS=ze("plus",Cx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],wx=ze("redo-2",bx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xx=ze("save",Ix);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xp=ze("search",Rx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Mx=ze("shield-check",Nx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],gd=ze("sparkles",Dx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CS=ze("triangle-alert",Px);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Vx=ze("type",kx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Lx=ze("undo-2",Ux);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hx=ze("user",Ox);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Fx=ze("wand-sparkles",Bx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],qx=ze("wind",Gx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_u=ze("x",zx);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yx=ze("zap",Kx),$x=({onItemClick:n,customItems:e={},onAddCustomItem:t})=>{const[i,r]=oe.useState(""),[l,u]=oe.useState(""),[f,g]=oe.useState(""),[h,_]=oe.useState(null),[T,S]=oe.useState(null),[w,H]=oe.useState(null),[P,k]=oe.useState(null),[K,B]=oe.useState(null),[ee,re]=oe.useState(null),[he,fe]=oe.useState(null),M=oe.useRef(null),N=oe.useRef(null),R=oe.useRef(null),O=oe.useRef(null),U=oe.useRef(null),[q,D]=oe.useState([]),[Ge,at]=oe.useState(!1),[X,de]=oe.useState(""),[Se,Ke]=oe.useState([]),[Ye,F]=oe.useState(""),[j,ce]=oe.useState({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),[me,be]=oe.useState(null),[xe,He]=oe.useState([]),[yt,lt]=oe.useState(!1),[Nn,Si]=oe.useState(null),[Fn,Ai]=oe.useState(""),[an,Gi]=oe.useState(""),[Xt,ms]=oe.useState(!1),[Ci,ht]=oe.useState(null),[ut,Mn]=oe.useState(null),[Zn,ei]=oe.useState(null),[Ut,Gn]=oe.useState(""),[gs,bi]=oe.useState("Select Category"),[bn,qi]=oe.useState(""),ti=oe.useRef(null);oe.useRef(null);const ys=["Vital Sign","Symptom","Disease","Medical Facility","Physical examination","Lab data","Culture / Gram stain","Image finding","Treatment"],ni=["Penicillins ()","Cephalosporins ()","Carbapenems ()","Fluoroquinolones ()","Aminoglycosides ()","Tetracyclines ()","Macrolides ()","Glycopeptides & Lipopeptides ()","Other ()"],Wt={"Penicillins ()":["Penicillin G Benzathine","Penicillin G Sodium","Oxacillin (IV)","Dicloxacillin (PO)","Ampicillin","Amoxicillin","Ampicillin + Sulbactam (Unasyn)","Amoxicillin + Clavulanate (Augmentin)","Amoxicillin + Clavulanate (Curam)","Piperacillin + Tazobactam (Tazocin)","Ticarcillin + Clavulanate (Timentin)"],"Cephalosporins ()":[{type:"header",label:"--  --"},"Cefazolin (IV)","Cephalexin (PO)",{type:"header",label:"--  --"},"Cefuroxime (Zinacef - IV)","Cefuroxime (Ceflour - PO)",{type:"header",label:"--  (Cephamycins) --"},"Cefmetazole","Cefoxitin",{type:"header",label:"-- 2.5 --"},"Flomoxef (Flumarin)",{type:"header",label:"--  --"},"Ceftriaxone (Rocephin)","Cefotaxime (Claforan/Loforan)","Cefixime (PO)","Ceftazidime (Fortum)",{type:"header",label:"-- 3.5 --"},"Cefoperazone + Sulbactam (Brosym)",{type:"header",label:"--  --"},"Cefepime (Maxipime)",{type:"header",label:"--  --"},"Ceftobiprole (Zeftera)","Ceftaroline (Zinforo)",{type:"header",label:"--  --"},"Cefiderocol","Ceftazidime + Avibactam (Zavicefta)"],"Carbapenems ()":["Ertapenem (Invanz)","Imipenem (Tienam)","Meropenem (Mepem)","Doripenem (Finibax)"],"Fluoroquinolones ()":["Ciprofloxacin (Ciproxin)","Levofloxacin (Cravit)","Moxifloxacin (Avelox)","Gemifloxacin (Factive)","Nemonoxacin"],"Aminoglycosides ()":["Gentamicin","Amikacin","Streptomycin"],"Tetracyclines ()":["Tetracycline","Doxycycline","Minocycline","Tigecycline (Tygacil)","Eravacycline"],"Macrolides ()":["Erythromycin","Clarithromycin (Klaricid)","Azithromycin (Zithromax)"],"Glycopeptides & Lipopeptides ()":["Vancomycin","Teicoplanin (Targocid)","Daptomycin (Cubicicin)"],"Other ()":["Linezolid (Zyvox)","Metronidazole (Flagyl)","TMP-SMX (Baktar)","TMP-SMX (Sevatrim)","Colistin (Colimycin)","Clindamycin (Clincin)","Rifampin","Fosfomycin","Fusidic acid (Fucidin)","Monobactam (Aztreonam)"]},Mt=(V,le)=>{const ge=e[le]||[];if(ge.length===0)return V;const Me=new Set(V);return[...V,...ge.filter(we=>!Me.has(we))].sort((we,bt)=>we.localeCompare(bt))};oe.useMemo(()=>{const V={...Wt};return Object.keys(Wt).forEach(le=>{const ge=e[le]||[];if(ge.length>0){const Me=new Set(V[le].map(bt=>typeof bt=="string"?bt:bt.label)),we=ge.filter(bt=>!Me.has(bt));V[le]=[...V[le],...we]}}),V},[Wt,e]);const ln=["Acinetobacter baumannii","Acinetobacter spp.","Actinomyces","Aeromonas hydrophila","Aggregatibacter actinomycetemcomitans","Alcaligenes","Aspergillus fumigatus","Bacillus anthracis","Bacillus cereus","Bacillus spp.","Bacteroides fragilis","Bartonella henselae","Bordetella pertussis","Borrelia burgdorferi","Borrelia recurrentis","Brucella melitensis","Burkholderia cepacia complex","Burkholderia pseudomallei","Campylobacter coli","Campylobacter jejuni","Candida albicans","Candida spp.","Capnocytophaga canimorsus","Cardiobacterium hominis","Chlamydia pneumoniae","Chlamydia trachomatis","Chlamydophila psittaci","Citrobacter","Clostridium botulinum","Clostridium difficile (also known as Clostridioides difficile)","Clostridium perfringens","Clostridium septicum","Clostridium sordellii","Clostridium tetani","Corynebacterium diphtheriae","Corynebacterium spp.","Coxiella burnetii","Cryptococcus","Eikenella corrodens","Enterobacter cloacae","Enterobacter spp.","Enterococcus faecalis","Enterococcus faecium","Enterococcus spp.","Erysipelothrix rhusiopathiae","Escherichia coli (E. coli)","Francisella tularensis","Fusobacterium","Gardnerella vaginalis","Haemophilus ducreyi","Haemophilus influenzae","Helicobacter pylori","Kingella kingae","Klebsiella pneumoniae","Klebsiella spp.","Lactobacillus","Legionella pneumophila","Leptospira interrogans","Listeria monocytogenes","Micrococci species","Moraxella catarrhalis","Morganella","Mycobacterium abscessus","Mycobacterium africanum","Mycobacterium avium complex (MAC)","Mycobacterium bovis","Mycobacterium canettii","Mycobacterium caprae","Mycobacterium chelonae","Mycobacterium fortuitum","Mycobacterium gordonae","Mycobacterium haemophilum","Mycobacterium kansasii","Mycobacterium leprae","Mycobacterium lepromatosis","Mycobacterium malmoense","Mycobacterium marinum","Mycobacterium microti","Mycobacterium orygis","Mycobacterium scrofulaceum","Mycobacterium tuberculosis","Mycobacterium ulcerans","Mycobacterium xenopi","Mycoplasma genitalium","Mycoplasma pneumoniae","Neisseria gonorrhoeae","Neisseria meningitidis","Nocardia","Orientia tsutsugamushi","Pasteurella multocida","Peptostreptococcus","Pneumocystis jirovecii","Prevotella","Proteus mirabilis","Proteus spp.","Providencia","Providencia stuartii","Pseudomonas aeruginosa","Rickettsia prowazekii","Rickettsia rickettsii","Rickettsia typhi","Salmonella enteritidis","Salmonella paratyphi","Salmonella typhi","Salmonella typhimurium","Schistosoma spp.","Serratia marcescens","Shigella dysenteriae","Staphylococcus aureus","Staphylococcus epidermidis","Staphylococcus saprophyticus","Stenotrophomonas maltophilia","Streptococcus agalactiae (Group B Streptococcus)","Streptococcus bovis","Streptococcus dysgalactiae","Streptococcus mutans","Streptococcus pneumoniae","Streptococcus pyogenes (Group A Streptococcus)","Streptococcus viridans","Treponema pallidum","Trichomonas vaginalis","Ureaplasma urealyticum","Vibrio cholerae","Vibrio parahaemolyticus","Vibrio vulnificus","Yersinia enterocolitica","Yersinia pestis"],Ct=oe.useMemo(()=>Mt(ln,"Culture"),[ln,e]),vs=["No organisms seen","GPC: Gram-positive cocci in clusters","GPC: Gram-positive cocci in chains","GPC: Gram-positive cocci in pairs","GNB: Gram-negative bacilli","Yeast-like","GPB (Gram-positive bacilli / rods)","GNC (Gram-negative cocci)","GVC (Gram-variable cocci/bacilli)"],zi=oe.useMemo(()=>Mt(vs,"Gram stain"),[vs,e]),_s=["Crackles (Rales) - Coarse","Crackles (Rales) - Fine","Stridor","Wheezes","Rhonchi","Pleural Friction Rub"],Dn=oe.useMemo(()=>Mt(_s,"Breathing sound"),[_s,e]),ue=[{id:"RUL",label:"RUL",col:"Right",row:"Upper"},{id:"LUL",label:"LUL",col:"Left",row:"Upper"},{id:"RML",label:"RML",col:"Right",row:"Middle"},{id:"LML",label:"LML",col:"Left",row:"Middle"},{id:"RLL",label:"RLL",col:"Right",row:"Lower"},{id:"LLL",label:"LLL",col:"Left",row:"Lower"}],Te=["LUQ","RUQ","LLQ","RLQ"],Ne=["Right Hypochondriac Region","Epigastric Region","Left Hypochondriac Region","Right Lumbar / Flank Region","Umbilical Region","Left Lumbar / Flank Region","Right Iliac / Inguinal Fossa","Hypogastric / Suprapubic Region","Left Iliac / Inguinal Fossa"],[Oe,it]=oe.useState([]),vn=oe.useCallback(()=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{_(null),B(null),tt()},150)},[]),Ft=oe.useCallback(()=>{R.current&&(clearTimeout(R.current),R.current=null)},[]);oe.useEffect(()=>{h&&O.current&&O.current.focus()},[h]),oe.useEffect(()=>{(K||me)&&U.current&&U.current.focus()},[K,me]),oe.useLayoutEffect(()=>{if(w&&M.current){const V=M.current.getBoundingClientRect(),le=16;let{top:ge,left:Me}=w;ge+V.height>window.innerHeight-le&&(ge=Math.max(le,window.innerHeight-V.height-le)),Me+V.width>window.innerWidth-le&&(Me=Math.max(le,window.innerWidth-V.width-le)),k({top:ge,left:Me,width:V.width,maxHeight:window.innerHeight-ge-le})}},[w,h]),oe.useLayoutEffect(()=>{if(ee&&N.current){const V=N.current.getBoundingClientRect(),le=16;let{top:ge,left:Me}=ee;ge+V.height>window.innerHeight-le&&(ge=Math.max(le,window.innerHeight-V.height-le)),P&&Me+V.width>window.innerWidth-le&&(Me=Math.max(le,P.left-V.width-4)),fe({top:ge,left:Me,width:V.width,maxHeight:window.innerHeight-ge-le})}},[ee,P,K,me]);const tt=()=>{He([]),lt(!1),be(null),Si(null),Ai(""),Gi(""),u(""),g(""),D([]),at(!1),de(""),Ke([]),F("")},un=(V,le,ge)=>{Ft();const Me=V.currentTarget.getBoundingClientRect();_(le),S(ge),u(""),H({top:Me.top,left:Me.right+4,right:Me.right}),h!==le&&(B(null),tt())},wi=(V,le)=>{Ft();const ge=V.currentTarget.getBoundingClientRect();B(le),g(""),re({top:ge.top,left:ge.right+4,right:ge.right})},Ts=V=>{at(!1),D(le=>le.includes(V)?le.filter(ge=>ge!==V):[...le,V])},Wo=()=>{const V=Ge?"Bilateral":q.join(", ");V?n("Physical examination",`${K} at ${V}`):n("Physical examination",K),_(null),tt()},jo=()=>{const V=X?`Grade ${X}/6`:"",le=Se.length>0?Se.join(", "):"",ge=Ye?`at ${Ye}`:"",we=`Murmur: ${[V,le,ge].filter(Boolean).join(" ")}`;n("Physical examination",we),_(null),tt()},Es=()=>{const V=[];j.T&&V.push(`T: ${j.T} C`),j.P&&V.push(`P: ${j.P} bpm`),j.R&&V.push(`R: ${j.R} /min`),j.BP&&V.push(`BP: ${j.BP} mmHg`),j.SpO2&&V.push(`SpO2: ${j.SpO2} %`),j.GCS&&V.push(`GCS: ${j.GCS}`),V.length>0&&(n("Vital Sign",V.join(", ")),ce({T:"",P:"",R:"",BP:"",SpO2:"",GCS:""}),_(null),tt())},ii=(V,le)=>{Ft();const ge=V.currentTarget.getBoundingClientRect();le==="zones"?(re({top:ge.top,left:ge.right+4,right:ge.right}),be("zones"),g("")):(re({top:ge.top,left:ge.right+4,right:ge.right}),Si("details"),g(""))},Zo=V=>{He(le=>le.includes(V)?le.filter(ge=>ge!==V):[...le,V]),lt(!1)},St=(V,le)=>{if(!le)return V;const ge=le.toLowerCase();return V.filter(Me=>(typeof Me=="string"?Me:Me.label).toLowerCase().includes(ge))};return C.jsxs("div",{className:"flex flex-col h-full bg-slate-50 border-r border-slate-200 overflow-visible relative",children:[C.jsxs("div",{className:"p-4 bg-white border-b border-slate-200 shadow-sm z-10 flex flex-col gap-3",children:[C.jsxs("div",{children:[C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:"Menu Source"}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Search categories...",className:"w-full pl-9 pr-3 py-2 text-sm border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",value:i,onChange:V=>r(V.target.value)}),C.jsx(xp,{className:"absolute left-3 top-2.5 text-slate-400 w-4 h-4"})]})]}),C.jsxs("div",{className:"border-t border-slate-100 pt-3",children:[C.jsxs("button",{onClick:()=>ms(!Xt),className:"flex items-center text-xs font-bold text-blue-600 hover:text-blue-800 transition-colors uppercase tracking-tight",children:[Xt?C.jsx(l_,{className:"w-3 h-3 mr-1"}):C.jsx(yi,{className:"w-3 h-3 mr-1"}),"Add Custom Item"]}),Xt&&C.jsxs("div",{className:"mt-2 space-y-2 animate-in slide-in-from-top-2 duration-200",children:[C.jsxs("button",{ref:ti,onClick:()=>{if(ti.current){const V=ti.current.getBoundingClientRect();ht(le=>le?null:{top:V.bottom+4,left:V.left})}},className:"w-full px-3 py-2 text-xs text-left font-semibold bg-slate-50 border border-slate-200 rounded-md hover:bg-slate-100 text-slate-700 flex justify-between items-center",children:[C.jsx("span",{className:"truncate",children:gs}),C.jsx(yi,{className:"w-3 h-3 text-slate-400"})]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("input",{type:"text",placeholder:"Item Name",className:"flex-1 px-3 py-2 text-xs border border-slate-300 rounded-md outline-none focus:ring-2 focus:ring-blue-500",value:bn,onChange:V=>qi(V.target.value)}),C.jsx("button",{disabled:!Ut||!bn.trim(),onClick:()=>{t&&Ut&&bn.trim()&&(t(Ut,bn.trim()),qi(""))},className:"px-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C.jsx(xx,{className:"w-4 h-4"})})]})]})]})]}),C.jsx("div",{className:"flex-1 overflow-y-auto p-2 scrollbar-thin",children:ru.map(V=>{if(!ys.includes(V.category))return null;const le=V.items.filter(we=>we.toLowerCase().includes(i.toLowerCase()));if(i&&le.length===0)return null;const ge=Oe.includes(V.category),Me=V.category==="Vital Sign"?"text-green-600 hover:bg-green-50":V.category==="Medical Facility"?"text-blue-600 hover:bg-blue-50":V.category==="Culture / Gram stain"?"text-cyan-600 hover:bg-cyan-50":V.category==="Lab data"?"text-orange-600 hover:bg-orange-50":"text-slate-600 hover:bg-slate-100";return C.jsxs("div",{className:"mb-2",children:[C.jsxs("button",{onClick:()=>it(we=>we.includes(V.category)?we.filter(bt=>bt!==V.category):[...we,V.category]),className:`w-full flex items-center px-2 py-2 text-sm font-semibold rounded-md transition-colors ${Me}`,children:[ge?C.jsx(l_,{className:"w-4 h-4 mr-1"}):C.jsx(yi,{className:"w-4 h-4 mr-1"}),V.category]}),ge&&C.jsx("div",{className:"pl-4 mt-1 space-y-1",children:le.map(we=>{const bt=V.category==="Vital Sign"||V.category==="Symptom"||V.category==="Disease"||V.category==="Medical Facility"||V.category==="Physical examination"||V.category==="Culture / Gram stain"||V.category==="Treatment"&&we==="Antibiotics";return C.jsxs("div",{onMouseEnter:Zs=>bt&&un(Zs,we,V.category),onMouseLeave:vn,onClick:()=>!bt&&n(V.category,we),className:`group relative flex items-center justify-between px-3 py-2 text-sm text-slate-700 bg-white border rounded-md transition-all active:scale-95 cursor-pointer ${h===we?"border-blue-400 bg-blue-50/30 shadow-sm":"border-slate-200 hover:border-blue-400 hover:shadow-sm"}`,children:[C.jsx("span",{className:"truncate",children:we}),bt?C.jsx(yi,{className:`w-3 h-3 ${h===we?"opacity-100":"text-slate-300 opacity-60 group-hover:opacity-100"}`}):C.jsx(rx,{className:"w-3 h-3 text-slate-300 opacity-0 group-hover:opacity-100"})]},we)})})]},V.category)})}),h&&w&&Ma.createPortal(C.jsxs("div",{ref:M,onMouseEnter:Ft,onMouseLeave:vn,className:"fixed z-[9999] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-1 duration-150 min-w-[220px] max-w-[340px] overflow-hidden flex flex-col",style:{top:(P==null?void 0:P.top)??w.top,left:(P==null?void 0:P.left)??w.left,maxHeight:(P==null?void 0:P.maxHeight)??"80vh"},children:[T!=="Vital Sign"&&T!=="Medical Facility"&&C.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{ref:O,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:l,onChange:V=>u(V.target.value)}),C.jsx(xp,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),C.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[T==="Medical Facility"&&["Emergency Department","Outpatient Department"].map(V=>C.jsx("button",{onClick:()=>{const le=h.replace(/\s*\(.*?\)/,"");n("Medical Facility",`the ${V} of ${le}`),_(null),tt()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-blue-50 text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:V},V)),T==="Culture / Gram stain"&&St(["Culture","Gram stain"],l).map(V=>C.jsxs("div",{onMouseEnter:le=>wi(le,V),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${K===V?"bg-cyan-50 text-cyan-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[V,C.jsx(yi,{className:"w-3 h-3"})]},V)),T==="Vital Sign"&&h==="Vital sign"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(vS,{className:"w-4 h-4"}),C.jsx("span",{children:"Vital Sign Entry"})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"T (C)"}),C.jsx("input",{type:"text",placeholder:"37.0",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.T,onChange:V=>ce({...j,T:V.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"P (bpm)"}),C.jsx("input",{type:"text",placeholder:"80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.P,onChange:V=>ce({...j,P:V.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"R (/min)"}),C.jsx("input",{type:"text",placeholder:"18",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.R,onChange:V=>ce({...j,R:V.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"SpO2 (%)"}),C.jsx("input",{type:"text",placeholder:"98",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.SpO2,onChange:V=>ce({...j,SpO2:V.target.value})})]})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"BP (mmHg)"}),C.jsx("input",{type:"text",placeholder:"120/80",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.BP,onChange:V=>ce({...j,BP:V.target.value})})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"GCS"}),C.jsx("input",{type:"text",placeholder:"E4V5M6",className:"w-full p-2 text-xs border border-slate-200 rounded-md focus:ring-1 focus:ring-green-500 outline-none",value:j.GCS,onChange:V=>ce({...j,GCS:V.target.value})})]}),C.jsx("button",{onClick:Es,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 active:scale-95 transition-all",children:"Insert Vital Signs"})]}),T==="Symptom"&&St(["Positive","Negative"],l).map(V=>C.jsx("button",{onClick:()=>{n(V==="Positive"?"Symptom":"Negative Symptom",h),_(null),tt()},className:`w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 ${V==="Positive"?"hover:bg-blue-50 text-blue-700":"hover:bg-red-50 text-red-700"}`,children:V},V)),T==="Disease"&&St(["Tentative Diagnosis","Underlying Disease","Definitive Disease"],l).map(V=>C.jsx("button",{onClick:()=>{n(V==="Underlying Disease"?"Underlying disease":V==="Definitive Disease"?"Definitive diagnosis":V,h),_(null),tt()},className:"w-full px-4 py-3 text-left text-sm font-semibold transition-colors border-b border-slate-50 last:border-0 hover:bg-indigo-50 text-indigo-700",children:V},V)),T==="Physical examination"&&h==="Breathing sound"&&St(Dn,l).map(V=>C.jsxs("div",{onMouseEnter:le=>wi(le,V),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${K===V?"bg-blue-50 text-blue-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[V,C.jsx(yi,{className:"w-3 h-3"})]},V)),T==="Physical examination"&&h==="Heart sound"&&St(["Heart Beats","Murmur"],l).map(V=>C.jsxs("div",{onMouseEnter:le=>wi(le,V),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${K===V?"bg-indigo-50 text-indigo-700 font-bold":"text-slate-700 hover:bg-slate-50"}`,children:[V,C.jsx(yi,{className:"w-3 h-3"})]},V)),T==="Treatment"&&h==="Antibiotics"&&St(ni,l).map(V=>C.jsxs("div",{onMouseEnter:le=>wi(le,V),className:`px-4 py-3 text-sm font-semibold flex items-center justify-between cursor-pointer border-b last:border-0 transition-colors ${K===V?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:[V,C.jsx(yi,{className:"w-3 h-3"})]},V)),T==="Physical examination"&&(h==="Abdominal tenderness"||h==="Rebound tenderness"||h==="Muscle guarding"||h==="Knocking pain")&&St(["Yes","No"],l).map(V=>C.jsxs("button",{onMouseEnter:le=>V==="Yes"?ii(le,"zones"):void 0,onClick:()=>V==="No"&&(n("Physical examination",`No ${h}`),_(null),tt()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${V==="Yes"&&me?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[V," ",V==="Yes"&&C.jsx(yi,{className:"w-4 h-4"})]},V)),T==="Physical examination"&&h==="Pitting edema"&&St(["Yes","No"],l).map(V=>C.jsxs("button",{onMouseEnter:le=>V==="Yes"?ii(le,"details"):void 0,onClick:()=>V==="No"&&(n("Physical examination","No pitting edema"),_(null),tt()),className:`w-full px-4 py-3 text-left text-sm font-semibold flex justify-between items-center transition-colors border-b last:border-0 ${V==="Yes"&&Nn?"bg-green-50 text-green-700":"hover:bg-slate-50"}`,children:[V," ",V==="Yes"&&C.jsx(yi,{className:"w-4 h-4"})]},V))]})]}),document.body),(K||me||Nn)&&ee&&Ma.createPortal(C.jsxs("div",{ref:N,onMouseEnter:Ft,onMouseLeave:vn,className:"fixed z-[10000] bg-white border border-slate-200 rounded-lg shadow-2xl animate-in fade-in slide-in-from-left-2 duration-200 min-w-[260px] max-w-[420px] overflow-hidden flex flex-col",style:{top:(he==null?void 0:he.top)??ee.top,left:(he==null?void 0:he.left)??ee.left,maxHeight:(he==null?void 0:he.maxHeight)??"80vh"},children:[C.jsx("div",{className:"p-2 bg-slate-50 border-b flex-shrink-0",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{ref:U,type:"text",placeholder:"Search...",className:"w-full pl-8 pr-3 py-1 text-xs border border-slate-300 rounded outline-none focus:ring-1 focus:ring-blue-500",value:f,onChange:V=>g(V.target.value)}),C.jsx(xp,{className:"absolute left-2.5 top-1.5 text-slate-400 w-3.5 h-3.5"})]})}),C.jsxs("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:[T==="Culture / Gram stain"&&K==="Culture"&&St(Ct,f).map(V=>C.jsx("button",{onClick:()=>{n("Lab data",`${h} Culture: ${V}`),_(null),tt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:V},V)),T==="Culture / Gram stain"&&K==="Gram stain"&&St(zi,f).map(V=>C.jsx("button",{onClick:()=>{n("Lab data",`${h} Gram stain: ${V}`),_(null),tt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-cyan-50 hover:text-cyan-700 transition-colors border-b border-slate-50 last:border-0",children:V},V)),T==="Physical examination"&&h==="Breathing sound"&&C.jsxs("div",{className:"p-4 w-64 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-blue-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(qx,{className:"w-4 h-4"}),C.jsx("span",{children:"Zone Selector"})]}),C.jsx("button",{onClick:()=>{at(!Ge),D([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${Ge?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Bilateral"}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Right"}),C.jsx("div",{className:"text-[10px] font-bold text-slate-400 text-center uppercase py-1 bg-slate-50 rounded",children:"Left"}),ue.map(V=>C.jsx("button",{onClick:()=>Ts(V.id),className:`py-3 text-xs font-bold border-2 rounded-lg transition-all ${q.includes(V.id)?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white border-slate-100 text-slate-600 hover:border-blue-200"}`,children:V.label},V.id))]}),C.jsx("button",{onClick:Wo,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Findings"})]}),T==="Physical examination"&&K==="Heart Beats"&&St(["regular","irregular"],f).map(V=>C.jsx("button",{onClick:()=>{n("Physical examination",`Heart Beats: ${V}`),_(null),tt()},className:"w-full px-4 py-3 text-left text-sm font-semibold hover:bg-indigo-50 hover:text-indigo-700 transition-colors border-b border-slate-50 last:border-0",children:V},V)),T==="Physical examination"&&K==="Murmur"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-indigo-600 mb-2 font-bold text-xs uppercase tracking-wider",children:[C.jsx(lx,{className:"w-4 h-4"}),C.jsx("span",{children:"Murmur Detail"})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Intensity (Grade 1-6)"}),C.jsx("div",{className:"grid grid-cols-6 gap-1",children:[1,2,3,4,5,6].map(V=>C.jsx("button",{onClick:()=>de(V.toString()),className:`py-1.5 text-xs font-bold border-2 rounded-md transition-all ${X===V.toString()?"bg-indigo-600 border-indigo-600 text-white":"bg-white text-slate-600 hover:bg-indigo-50 border-slate-100"}`,children:V},V))})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Timing"}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Early"}),C.jsx("div",{className:"text-[9px] font-bold text-slate-300 text-center uppercase",children:"Late"}),["Systolic","Diastolic"].map(V=>C.jsx(mS.Fragment,{children:["Early","Late"].map(le=>{const ge=`${le} ${V}`,Me=Se.includes(ge);return C.jsx("button",{onClick:()=>Ke(we=>Me?we.filter(bt=>bt!==ge):[...we,ge]),className:`py-2 text-[10px] font-bold border-2 rounded-lg transition-all ${Me?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-slate-100 text-slate-500 hover:border-indigo-100"}`,children:ge},ge)})},V))]})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),C.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-32 overflow-y-auto p-1 border border-slate-100 rounded-lg bg-slate-50/50",children:["Aortic Area","Pulmonic Area","Tricuspid Area","Mitral Area, Apex"].map(V=>C.jsx("button",{onClick:()=>F(V),className:`px-3 py-1.5 text-left text-[11px] font-semibold rounded-md transition-colors ${Ye===V?"bg-indigo-100 text-indigo-700":"text-slate-600 hover:bg-white"}`,children:V},V))})]}),C.jsx("button",{onClick:jo,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-green-700 transition-all",children:"Insert Murmur"})]}),T==="Treatment"&&K&&Wt[K]&&St(Wt[K],f).map((V,le)=>{if(typeof V!="string"&&V.type==="header")return C.jsx("div",{className:"px-4 py-1.5 bg-slate-100 text-[11px] font-bold text-slate-400 uppercase tracking-tight",children:V.label},`h-${le}`);const ge=typeof V=="string"?V:V.label;return C.jsx("button",{onClick:()=>{n("Treatment",ge),_(null),tt()},className:"w-full px-4 py-2.5 text-left text-xs font-semibold hover:bg-blue-50 hover:text-blue-700 transition-colors border-b border-slate-50 last:border-0",children:ge},ge)}),me==="zones"&&C.jsxs("div",{className:"p-4 w-72 space-y-4",children:[C.jsx("button",{onClick:()=>{lt(!yt),He([])},className:`w-full py-2.5 rounded-lg text-sm font-bold border-2 transition-all ${yt?"bg-blue-600 border-blue-600 text-white shadow-md":"bg-white border-blue-100 text-blue-600 hover:bg-blue-50"}`,children:"Diffuse"}),C.jsxs("section",{children:[C.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Quadrants"}),C.jsx("div",{className:"grid grid-cols-2 gap-2",children:St(Te,f).map(V=>C.jsx("button",{onClick:()=>Zo(V),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${xe.includes(V)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:V},V))})]}),C.jsxs("section",{className:"pt-2 border-t border-slate-100",children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Regions"}),C.jsx("div",{className:"grid grid-cols-3 gap-1",children:St(Ne,f).map(V=>C.jsx("button",{onClick:()=>Zo(V),className:`p-1 text-[8px] leading-tight font-bold border-2 rounded-md h-12 flex items-center justify-center text-center ${xe.includes(V)?"bg-blue-600 border-blue-600 text-white":"bg-white border-slate-100"}`,children:V.replace(" Region","").replace(" / ",`
`)},V))})]}),C.jsx("button",{onClick:()=>{const V=yt?`${h}: diffuse`:xe.length>0?`${h} at ${xe.join(", ")}`:"";V&&(n("Physical examination",V),_(null),tt())},disabled:!yt&&xe.length===0,className:`w-full py-3 rounded-xl text-sm font-bold shadow-lg transition-all ${!yt&&xe.length===0?"bg-slate-200 text-slate-400":"bg-green-600 text-white hover:bg-green-700"}`,children:"Insert Findings"})]}),Nn==="details"&&C.jsxs("div",{className:"p-5 w-60 space-y-5",children:[C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3",children:"Grade"}),C.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:St(["1+","2+","3+","4+"],f).map(V=>C.jsx("button",{onClick:()=>Ai(V),className:`py-2 text-xs font-bold border-2 rounded-lg transition-all ${Fn===V?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white text-slate-600 hover:bg-blue-50"}`,children:V},V))})]}),C.jsxs("section",{children:[C.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2",children:"Location"}),C.jsx("input",{type:"text",placeholder:"e.g. Bilateral lower limbs",className:"w-full p-2.5 text-xs border-2 border-slate-100 rounded-lg outline-none focus:border-blue-400",value:an,onChange:V=>Gi(V.target.value)})]}),C.jsx("button",{onClick:()=>{const V=Fn?`Grade ${Fn}`:"",le=an?`at ${an}`:"";n("Physical examination",`Pitting edema: ${[V,le].filter(Boolean).join(" ")}`),_(null),tt()},className:"w-full py-3 bg-green-600 text-white rounded-xl text-sm font-bold shadow-lg hover:bg-green-700 transition-all",children:"Insert"})]})]})]}),document.body),Xt&&Ci&&Ma.createPortal(C.jsxs("div",{className:"fixed z-[10000] bg-white border border-slate-200 rounded-lg shadow-xl animate-in fade-in zoom-in-95 duration-100 min-w-[200px] overflow-hidden flex flex-col pointer-events-auto",style:{top:Ci.top,left:Ci.left,maxHeight:"60vh"},onMouseLeave:()=>{Zn||(ht(null),Mn(null))},children:[C.jsx("div",{className:"p-2 bg-slate-50 border-b text-[10px] font-bold text-slate-400 uppercase text-center",children:"Select Category"}),C.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:ys.map(V=>{var Me;let le=!1;const ge=((Me=ru.find(we=>we.category===V))==null?void 0:Me.items)||[];return V==="Culture / Gram stain"||V==="Treatment"||V==="Physical examination"?le=!0:ge.length>0&&V!=="Vital Sign"&&V!=="Symptom"&&V!=="Negative Symptom"&&(le=!1),C.jsxs("div",{onMouseEnter:we=>{if(Mn(V),le){const bt=we.currentTarget.getBoundingClientRect();ei({top:bt.top,left:bt.right+2})}else ei(null)},onClick:()=>{Gn(V),bi(V),ht(null)},className:`px-4 py-2 text-xs font-semibold cursor-pointer flex justify-between items-center transition-colors ${ut===V?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:[V,le&&C.jsx(yi,{className:"w-3 h-3 text-slate-400"})]},V)})})]}),document.body),Xt&&Zn&&ut&&Ma.createPortal(C.jsxs("div",{className:"fixed z-[10001] bg-white border border-slate-200 rounded-lg shadow-xl animate-in fade-in zoom-in-95 duration-100 min-w-[200px] flex flex-col pointer-events-auto",style:{top:Zn.top,left:Zn.left,maxHeight:"60vh"},onMouseLeave:()=>{ei(null),Mn(null),ht(null)},children:[C.jsxs("div",{className:"p-2 bg-slate-50 border-b text-[10px] font-bold text-slate-400 uppercase text-center",children:[ut," Sub-type"]}),C.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 py-1",children:(()=>{var le,ge;let V=[];return ut==="Culture / Gram stain"?V=[{label:"Culture",hasSub:!1,targetKey:"Culture"},{label:"Gram stain",hasSub:!1,targetKey:"Gram stain"}]:ut==="Treatment"?V=(((le=ru.find(we=>we.category==="Treatment"))==null?void 0:le.items)||[]).map(we=>({label:we,hasSub:we==="Antibiotics",targetKey:we})):ut==="Physical examination"&&(V=(((ge=ru.find(we=>we.category==="Physical examination"))==null?void 0:ge.items)||[]).map(we=>({label:we,hasSub:!1,targetKey:we}))),V.map(Me=>{const we=typeof Me=="string"?Me:Me.label,bt=typeof Me=="string"?!1:Me.hasSub,Zs=typeof Me=="string"?Me:Me.targetKey||we;return C.jsxs("div",{className:"px-4 py-2 text-xs font-semibold cursor-pointer flex justify-between items-center transition-colors hover:bg-blue-50 hover:text-blue-700 group",onClick:()=>{Gn(Zs),bi(`${ut} > ${we}`),ht(null),ei(null)},children:[we,bt&&C.jsx(yi,{className:"w-3 h-3 text-slate-400 group-hover:text-blue-500"}),bt&&we==="Antibiotics"&&C.jsx("div",{className:"hidden group-hover:block absolute left-full top-0 w-64 bg-white border border-slate-200 rounded-lg shadow-xl ml-1 max-h-[60vh] overflow-y-auto",children:ni.map(Ss=>C.jsx("button",{onClick:si=>{si.stopPropagation(),Gn(Ss),bi(Ss),ht(null),ei(null)},className:"w-full text-left px-4 py-2 text-xs font-semibold text-slate-600 hover:bg-blue-50 hover:text-blue-700 border-b border-slate-50 last:border-0",children:Ss},Ss))})]},we)})})()})]}),document.body)]})},Jx=({events:n,activeEventId:e,onSelectEvent:t,onAddEvent:i,onDeleteEvent:r,onCopyFromEvent:l})=>{const u=oe.useRef(null),[f,g]=oe.useState(null),[h,_]=oe.useState(null),T=(w,H)=>{w.stopPropagation();const P=w.currentTarget.getBoundingClientRect();_({top:P.top,left:P.right+10}),g(H)},S=w=>{f&&(l(f,w),g(null))};return oe.useEffect(()=>{const w=()=>g(null);return f&&window.addEventListener("click",w),()=>window.removeEventListener("click",w)},[f]),C.jsxs("div",{className:"flex flex-col h-full bg-slate-100 border-r border-slate-200 relative",children:[C.jsx("div",{className:"p-4 bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm flex-shrink-0",children:C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Timeline"})}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-6 relative",children:[C.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-slate-300 -translate-x-1/2 min-h-full"}),C.jsxs("div",{className:"space-y-8 pb-10",children:[C.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t("profile"),children:[C.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${e==="profile"?"bg-white border-blue-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-blue-400"}`}),C.jsxs("div",{className:`relative w-40 p-4 rounded-lg border text-center transition-all ${e==="profile"?"bg-blue-50 border-blue-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-blue-300"}`,children:[C.jsx(TS,{className:`w-8 h-8 mx-auto mb-1 ${e==="profile"?"text-blue-600":"text-slate-400"}`}),C.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Patient Profile"})]})]}),n.map((w,H)=>{const P=w.id===e;return C.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group transition-all duration-300",onClick:()=>t(w.id),children:[C.jsx("div",{className:`w-4 h-4 rounded-full border-4 z-10 mb-2 transition-colors ${P?"bg-white border-green-600 scale-125 shadow-md":"bg-slate-400 border-slate-100 group-hover:bg-green-400"}`}),C.jsxs("div",{className:`relative w-40 p-3 rounded-lg border text-center transition-all ${P?"bg-green-50 border-green-500 shadow-md transform scale-105":"bg-white border-slate-200 hover:border-green-300"}`,children:[C.jsx("button",{className:"absolute -top-3 -right-3 w-8 h-8 bg-red-100 hover:bg-red-600 text-red-600 hover:text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all shadow-lg border border-red-200 hover:border-red-700 z-50 pointer-events-auto",onClick:k=>{k.stopPropagation(),k.preventDefault(),r(w.id)},type:"button",title:"Delete Timepoint",children:C.jsx(_u,{className:"w-5 h-5 pointer-events-none"})}),C.jsxs("div",{className:"text-xs font-bold text-slate-500 mb-1",children:["Timepoint ",H+1]}),C.jsxs("div",{className:"flex items-center justify-center text-sm font-semibold text-slate-800",children:[C.jsx(GI,{className:"w-3 h-3 mr-1 opacity-50"}),w.date||"Set Date"]}),C.jsx("button",{className:`absolute -bottom-3 -right-3 w-8 h-8 rounded-full flex items-center justify-center transition-all shadow-lg border z-50 pointer-events-auto ${f===w.id?"bg-blue-600 text-white border-blue-700":"bg-blue-100 hover:bg-blue-600 text-blue-600 hover:text-white border-blue-200 hover:border-blue-700 opacity-0 group-hover:opacity-100"}`,onClick:k=>T(k,w.id),type:"button",title:"Copy content from another timepoint",children:C.jsx(Mm,{className:"w-4 h-4 pointer-events-none"})})]})]},w.id)}),C.jsx("div",{ref:u})]})]}),C.jsx("div",{className:"p-4 bg-white border-t border-slate-200 flex-shrink-0",children:C.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md transition-all active:scale-95 font-medium",children:[C.jsx(AS,{className:"w-5 h-5 mr-2"}),"Add Timepoint"]})}),f&&h&&Ma.createPortal(C.jsxs("div",{className:"fixed z-[10001] bg-white border border-slate-200 rounded-lg shadow-2xl overflow-hidden min-w-[180px] animate-in zoom-in-95 duration-150",style:{top:h.top,left:h.left},onClick:w=>w.stopPropagation(),children:[C.jsx("div",{className:"bg-blue-600 text-white px-4 py-2 text-xs font-bold uppercase tracking-wider",children:""}),C.jsxs("div",{className:"max-h-60 overflow-y-auto bg-slate-50",children:[n.map((w,H)=>w.id===f?null:C.jsxs("button",{className:"w-full px-4 py-3 text-left text-sm font-semibold text-slate-700 border-b border-slate-200 hover:bg-blue-50 hover:text-blue-700 transition-colors last:border-0",onClick:()=>S(w.id),children:["Timepoint ",H+1]},w.id)),n.length<=1&&C.jsx("div",{className:"p-4 text-xs text-slate-400 italic text-center",children:"No other timepoints to copy from."})]})]}),document.body)]})},Qx=({event:n,onUpdate:e,profile:t,onUpdateProfile:i,isProfileSelected:r,informant:l,setInformant:u,lastUpdateTrigger:f})=>{const g=oe.useRef(null),h=oe.useRef({}),[_,T]=oe.useState("");oe.useEffect(()=>{if(f&&!r){const B=h.current[f.category];B&&B.scrollIntoView({behavior:"smooth",block:"center"})}},[f,r]);const S=B=>{i({...t,gender:B}),u(B==="male"?"himself":"herself")},w=()=>{const B=_.trim();B&&!t.underlying_diseases.includes(B)&&i({...t,underlying_diseases:[...t.underlying_diseases,B]}),T("")},H=B=>{B.key==="Enter"&&(B.preventDefault(),w())},P=(B,ee)=>{const re=t[B];if(!re)i({...t,[B]:ee});else{const he=re.trim().endsWith(",")?`${re.trim()} ${ee}`:`${re.trim()}, ${ee}`;i({...t,[B]:he})}};if(r)return C.jsxs("div",{className:"flex flex-col h-full bg-white",children:[C.jsx("div",{className:"p-4 border-b border-slate-200 bg-blue-50 flex items-center justify-between flex-shrink-0",children:C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(Hx,{className:"w-5 h-5 text-blue-600"}),C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Patient Profile"})]})}),C.jsxs("div",{className:"p-6 flex-1 overflow-y-auto space-y-8 custom-scrollbar",children:[C.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Age (Numeric)"}),C.jsx("input",{type:"number",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:t.age,onChange:B=>i({...t,age:B.target.value}),placeholder:"65"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Sex"}),C.jsx("div",{className:"flex space-x-2",children:["male","female"].map(B=>C.jsx("button",{onClick:()=>S(B),className:`flex-1 py-2.5 px-4 rounded-lg font-bold text-sm transition-all border ${t.gender===B?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:B.charAt(0).toUpperCase()+B.slice(1)},B))})]})]}),C.jsx("div",{className:"grid grid-cols-1 gap-6 pt-4 border-t border-slate-100",children:C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Informant"}),C.jsx("input",{type:"text",className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:l,onChange:B=>u(B.target.value),placeholder:"e.g. himself, wife, family, relatives..."})]})}),C.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[C.jsx("div",{className:"flex items-center justify-between",children:C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Underlying Diseases"})}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Type a disease and press Enter...",className:"w-full pl-3 pr-10 py-2.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-shadow",value:_,onChange:B=>T(B.target.value),onKeyDown:H}),C.jsx("button",{onClick:w,disabled:!_.trim(),className:"absolute right-1.5 top-1.5 p-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 transition-colors",children:C.jsx(AS,{className:"w-4 h-4"})})]}),C.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 rounded-xl min-h-[60px] border border-dashed border-slate-300",children:[t.underlying_diseases.length===0&&C.jsx("p",{className:"text-slate-400 text-xs italic flex items-center justify-center w-full",children:"No diseases selected"}),t.underlying_diseases.map(B=>C.jsxs("div",{className:"bg-blue-100 text-blue-700 px-3 py-1.5 rounded-full flex items-center text-sm font-semibold shadow-sm border border-blue-200",children:[B,C.jsx("button",{onClick:()=>i({...t,underlying_diseases:t.underlying_diseases.filter(ee=>ee!==B)}),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5 transition-colors",children:C.jsx(_u,{className:"w-3 h-3"})})]},B))]})]}),C.jsxs("div",{className:"space-y-6 pt-6 border-t border-slate-100 pb-10",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-green-700",children:[C.jsx(vS,{className:"w-4 h-4"}),C.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",children:"Underlying Disease Control Status"})]}),C.jsxs("div",{className:"space-y-8",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"CONTROL QUALITY ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.control_quality,onChange:B=>i({...t,control_quality:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"General:"}),["Well controlled","Poorly controlled","Fair","Suboptimal","Stable","Unstable","Refractory"].map(B=>C.jsx("button",{onClick:()=>P("control_quality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Specific:"}),["Acute exacerbation","Stationary","Remission","Progressive","Terminal stage"].map(B=>C.jsx("button",{onClick:()=>P("control_quality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]})]})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"MANAGEMENT MODALITY ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.management_modality,onChange:B=>i({...t,management_modality:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"HTN/Heart:"}),["Oral anti-hypertensive agents","Medical control","Diet control","Lifestyle modification"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"DM:"}),["Oral anti-diabetic agents (OAD)","Insulin injection","Diet control and exercise"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"ESRD:"}),["Regular Hemodialysis (H/D)","H/D on Mon/Wed/Fri","H/D on Tue/Thu/Sat","Peritoneal Dialysis (PD/CAPD)","Conservative treatment"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Cancer:"}),["Chemotherapy","Target therapy","Immunotherapy","Regular surveillance post-operation","Palliative care"].map(B=>C.jsx("button",{onClick:()=>P("management_modality",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]})]})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest flex items-center justify-between",children:"FOLLOW-UP STATUS ()"}),C.jsx("textarea",{className:"w-full h-20 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-sm leading-relaxed",value:t.follow_up_status,onChange:B=>i({...t,follow_up_status:B.target.value})}),C.jsxs("div",{className:"bg-slate-50/50 p-2 rounded-lg border border-slate-100",children:[C.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-1 mt-1 mb-2",children:[C.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter mr-1 self-center",children:"Frequency:"}),["Regularly","Irregularly","Intermittently","Lost to follow-up"].map(B=>C.jsx("button",{onClick:()=>P("follow_up_status",B),className:"text-[11px] text-slate-400 hover:text-blue-500 hover:bg-blue-50 px-1.5 py-0.5 rounded border border-transparent hover:border-blue-100",children:B},B))]}),C.jsx("p",{className:"text-[9px] text-slate-400 italic mt-1 ml-2",children:"Location: Match the Medical Facility items from the left sidebar."})]})]})]})]})]})]});if(!n)return C.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50 text-slate-400 p-8 text-center h-full",children:C.jsx("p",{children:"Select a profile or timepoint from the timeline to start editing."})});const k=(B,ee)=>{const re={...n.categorizedContent,[B]:ee};e(n.id,{categorizedContent:re})},K=ru.filter(B=>B.category!=="Disease");return C.jsxs("div",{className:"flex flex-col h-full bg-white",children:[C.jsxs("div",{className:"p-4 border-b border-slate-200 bg-slate-50 flex items-center justify-between flex-shrink-0",children:[C.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Editor"}),C.jsx("div",{className:"text-lg font-mono font-semibold text-slate-800",children:n.date||(n.dateType==="month"?"YYYY-MM":"YYYY-MM-DD")})]}),C.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar",ref:g,children:[C.jsxs("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg border border-blue-100",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"Event Time"}),C.jsxs("div",{className:"flex space-x-2 text-xs",children:[C.jsx("button",{onClick:()=>e(n.id,{dateType:"date",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="date"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Exact Date"}),C.jsx("button",{onClick:()=>e(n.id,{dateType:"month",date:""}),className:`px-3 py-1 rounded-full transition-colors ${n.dateType==="month"?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"}`,children:"Month Only"})]})]}),C.jsx("input",{type:n.dateType==="date"?"date":"month",className:"w-full p-2.5 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",value:n.date,onChange:B=>e(n.id,{date:B.target.value})})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{ref:B=>{h.current["Medical Facility"]=B},className:"group pb-4 border-b border-slate-100 scroll-mt-10",children:[C.jsxs("label",{className:"block text-xs font-bold text-blue-700 mb-2 uppercase tracking-wide flex items-center",children:[C.jsx(BI,{className:"w-3.5 h-3.5 mr-1.5"}),"Medical Facility ()"]}),C.jsx("textarea",{className:"w-full h-16 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed transition-shadow",placeholder:"e.g. the Emergency Department of Linkou Chang Gung Memorial Hospital",value:n.categorizedContent["Medical Facility"]||"",onChange:B=>k("Medical Facility",B.target.value)})]}),C.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-slate-100",children:[C.jsx("h3",{className:"text-sm font-bold text-slate-800",children:"Clinical Findings"}),C.jsx("span",{className:"text-xs text-slate-500 font-normal hidden sm:inline",children:"(Click menu items to insert)"})]}),K.filter(B=>B.category!=="Medical Facility").map(B=>{const ee=["Tentative Diagnosis","Underlying disease","Definitive diagnosis"].includes(B.category),re=B.category==="Vital Sign",he=ee?"text-indigo-800":re?"text-green-700":B.category==="Negative Symptom"?"text-red-700":"text-orange-700";return C.jsxs("div",{ref:fe=>{h.current[B.category]=fe},className:"group scroll-mt-10",children:[C.jsx("label",{className:`block text-xs font-bold mb-1 uppercase tracking-wide ${he}`,children:B.category}),C.jsx("textarea",{className:`w-full h-24 p-3 border border-slate-300 rounded-lg shadow-sm font-sans text-sm leading-relaxed resize-y transition-shadow ${ee?"focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 bg-indigo-50/10":re?"focus:ring-2 focus:ring-green-200 focus:border-green-400 bg-green-50/10":B.category==="Negative Symptom"?"focus:ring-2 focus:ring-red-200 focus:border-red-400 bg-red-50/20":"focus:ring-2 focus:ring-orange-200 focus:border-orange-400"}`,placeholder:`Describe ${B.category.toLowerCase()}...`,value:n.categorizedContent[B.category]||"",onChange:fe=>k(B.category,fe.target.value)})]},B.category)}),C.jsxs("div",{className:"group pt-4 border-t border-slate-100",children:[C.jsx("label",{className:"block text-xs font-bold text-blue-700 mb-1 uppercase tracking-wide",children:"Other Information"}),C.jsx("textarea",{className:"w-full h-32 p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400 font-sans text-sm leading-relaxed resize-y transition-shadow",placeholder:"Enter any additional information...",value:n.otherInformation||"",onChange:B=>e(n.id,{otherInformation:B.target.value})})]})]})]})]})},Xx=({isOpen:n,onClose:e,onConfirm:t,title:i,message:r,confirmText:l="Delete",cancelText:u="Cancel"})=>n?Ma.createPortal(C.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:e}),C.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 fade-in duration-200",children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[C.jsx(CS,{className:"w-5 h-5"}),C.jsx("h3",{className:"font-bold text-slate-800",children:i})]}),C.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-slate-200 text-slate-400 transition-colors",children:C.jsx(_u,{className:"w-5 h-5"})})]}),C.jsx("div",{className:"p-6",children:C.jsx("p",{className:"text-slate-600 leading-relaxed",children:r})}),C.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 bg-slate-50 border-t border-slate-100",children:[C.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 hover:bg-slate-200 rounded-lg transition-colors",children:u}),C.jsx("button",{onClick:t,className:"px-6 py-2 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-lg shadow-md hover:shadow-lg active:scale-95 transition-all",children:l})]})]})]}),document.body):null,Wx=({onLogin:n,authError:e})=>{const[t,i]=oe.useState(""),[r,l]=oe.useState(!1),[u,f]=oe.useState(!1);oe.useEffect(()=>{const h=window.location.hostname,_=window.location.href;!h||h===""||_.startsWith("about:")||_.startsWith("file:")||_.startsWith("data:")?(f(!0),i("Sandbox Mode (Auth Disabled)")):(f(!1),i(h))},[]);const g=()=>{u||(navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3))};return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-6 relative",children:[C.jsxs("div",{className:"max-w-4xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row z-10",children:[C.jsxs("div",{className:"md:w-1/2 p-10 bg-blue-50 flex flex-col justify-between relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-purple-500"}),C.jsxs("div",{className:"z-10",children:[C.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[C.jsx("div",{className:"bg-blue-600 p-2.5 rounded-xl shadow-lg",children:C.jsx(ES,{className:"w-8 h-8 text-white"})}),C.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"MediScribe AI"})]}),C.jsx("h2",{className:"text-4xl font-extrabold text-blue-900 mb-4 leading-tight",children:"Transform Medical Records with AI"}),C.jsx("p",{className:"text-slate-600 text-lg mb-8 leading-relaxed",children:"Generate professional, academic-grade admission notes from structured inputs in seconds using Gemini 1.5 Pro."})]}),C.jsxs("div",{className:"space-y-4 z-10",children:[C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(QI,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"Structured Data Entry"})]}),C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(gd,{className:"w-5 h-5 text-purple-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"AI-Powered Generation"})]}),C.jsxs("div",{className:"flex items-center space-x-3 text-slate-700",children:[C.jsx(Mx,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),C.jsx("span",{className:"font-medium",children:"Bring Your Own Key (Secure)"})]})]}),C.jsx("div",{className:"absolute -bottom-10 -right-10 w-64 h-64 bg-blue-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse"}),C.jsx("div",{className:"absolute -bottom-10 -left-10 w-64 h-64 bg-purple-100 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-pulse delay-1000"})]}),C.jsx("div",{className:"md:w-1/2 p-10 flex flex-col justify-center items-center bg-white relative",children:u?C.jsxs("div",{className:"text-center w-full",children:[C.jsx("div",{className:"w-16 h-16 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-6",children:C.jsx(Ax,{className:"w-8 h-8"})}),C.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Preview Environment Detected"}),C.jsxs("p",{className:"text-slate-500 mb-6 text-sm leading-relaxed px-4",children:["This app is running in a ",C.jsx("strong",{children:"Sandboxed Preview"})," (no domain). Google Login requires a real web server to function securely."]}),C.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 text-left mb-6 mx-2",children:[C.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center",children:[C.jsx(ex,{className:"w-4 h-4 mr-2 text-blue-600"}),"How to fix:"]}),C.jsxs("ol",{className:"list-decimal list-inside text-xs text-slate-600 space-y-2",children:[C.jsxs("li",{children:[C.jsx("strong",{children:"Download"})," or ",C.jsx("strong",{children:"Export"})," this project from the editor."]}),C.jsxs("li",{children:["Run it locally (e.g., ",C.jsx("code",{children:"npm run dev"}),"  ",C.jsx("code",{children:"localhost"}),")."]}),C.jsx("li",{children:"Or deploy it to a hosting service (Vercel, Netlify)."})]})]}),C.jsx("button",{disabled:!0,className:"w-full py-3 bg-slate-200 text-slate-400 font-bold rounded-xl cursor-not-allowed",children:"Login Disabled in Sandbox"})]}):C.jsxs("div",{className:"w-full flex flex-col items-center",children:[C.jsxs("div",{className:"text-center mb-10",children:[C.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Welcome Back"}),C.jsx("p",{className:"text-slate-500",children:"Please sign in to access your workspace"})]}),e&&C.jsxs("div",{className:"mb-6 w-full p-4 bg-red-50 border border-red-200 rounded-xl flex items-start space-x-3 animate-in fade-in slide-in-from-top-2",children:[C.jsx(CS,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h4",{className:"text-sm font-bold text-red-800 mb-1",children:"Authentication Error"}),C.jsx("p",{className:"text-xs text-red-700 whitespace-pre-wrap leading-relaxed select-all font-mono bg-red-50/50 p-1 rounded",children:e}),e.includes("Settings > Authorized domains")&&C.jsxs("div",{className:"mt-2 p-2 bg-white border border-red-100 rounded text-xs text-slate-500",children:[C.jsx("strong",{children:"Tip:"})," You must add the ",C.jsx("u",{children:"exact domain"})," shown in the bottom right corner of this screen to Firebase Console."]})]})]}),C.jsxs("button",{onClick:n,className:"w-full max-w-sm flex items-center justify-center space-x-3 px-6 py-4 border border-slate-300 rounded-xl hover:bg-slate-50 hover:border-slate-400 hover:shadow-md transition-all group bg-white",children:[C.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),C.jsx("span",{className:"text-slate-700 font-bold text-lg group-hover:text-slate-900",children:"Sign in with Google"})]}),C.jsx("p",{className:"mt-8 text-xs text-center text-slate-400 max-w-xs leading-relaxed",children:"By signing in, you agree to use your own Gemini API Key. Your key is encrypted and stored securely linked to your account."})]})})]}),C.jsxs("div",{className:"absolute bottom-4 right-4 z-0 flex flex-col items-end opacity-70 hover:opacity-100 transition-opacity",children:[C.jsx("label",{className:"text-[10px] text-blue-200 uppercase font-bold mb-1",children:"Detected Domain (For Firebase Whitelist)"}),C.jsxs("button",{onClick:g,disabled:u,className:`flex items-center space-x-2 px-3 py-1.5 rounded-full border border-white/10 transition-colors ${u?"bg-red-900/40 text-red-200 cursor-not-allowed":"bg-black/20 backdrop-blur-md text-white hover:bg-black/30"}`,children:[C.jsx("span",{className:"text-xs font-mono",children:t}),!u&&(r?C.jsx(_S,{className:"w-3 h-3 text-green-400"}):C.jsx(Mm,{className:"w-3 h-3 text-slate-300"}))]})]})]})},jx=({isOpen:n,onSave:e,isDismissible:t=!1,onDismiss:i})=>{const[r,l]=oe.useState(""),[u,f]=oe.useState(!1),[g,h]=oe.useState("");if(!n)return null;const _=async()=>{if(!r.trim()){h("Please enter a valid API key.");return}h(""),f(!0);try{await e(r.trim())}catch{h("Failed to save API Key. Please try again.")}finally{f(!1)}};return C.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:t?i:void 0}),C.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-300",children:[C.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white text-center",children:[C.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-md",children:C.jsx(SS,{className:"w-8 h-8 text-white"})}),C.jsx("h2",{className:"text-2xl font-bold",children:"Setup Gemini API Key"}),C.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Required to power the AI generation"})]}),C.jsxs("div",{className:"p-8 space-y-6",children:[C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 flex items-start space-x-3",children:[C.jsx($I,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),C.jsxs("div",{className:"text-sm text-blue-800",children:[C.jsx("p",{className:"font-bold mb-1",children:"Why do I need this?"}),C.jsx("p",{className:"opacity-90 leading-relaxed",children:"This application runs on your own Google Cloud account. Your API key is stored securely in your database and is never shared with us."})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Enter your Gemini API Key"}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(hx,{className:"h-4 w-4 text-slate-400"})}),C.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all font-mono text-sm",placeholder:"AIzaSy...",value:r,onChange:T=>l(T.target.value)})]}),g&&C.jsx("p",{className:"text-red-500 text-xs mt-2 font-medium",children:g})]}),C.jsx("div",{className:"text-center",children:C.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 font-semibold hover:underline",children:["Get a free API key here ",C.jsx(ix,{className:"w-3.5 h-3.5 ml-1"})]})})]}),C.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[t&&C.jsx("button",{onClick:i,className:"flex-1 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Cancel"}),C.jsx("button",{onClick:_,disabled:u||!r,className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all active:scale-95 disabled:bg-slate-300 disabled:shadow-none flex items-center justify-center",children:u?C.jsx(fu,{className:"w-5 h-5 animate-spin"}):"Save & Continue"})]})]})]})]})};var Zx={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eR,tR;function nR(){return{geminiUrl:eR,vertexUrl:tR}}function iR(n,e,t,i){var r,l;if(!(n!=null&&n.baseUrl)){const u=nR();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(l=u.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xs{}function ye(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const g=n[f];if(Array.isArray(t))for(let h=0;h<g.length;h++){const _=g[h];p(_,e.slice(l+1),t[h])}else for(const h of g)p(h,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const g=n[f];p(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function sR(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),l=i.split("."),u=new Set;let f=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){f=g;break}if(f!==-1&&l.length>f)for(let g=f;g<l.length;g++){const h=l[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}zp(n,r,l,0,u)}}function zp(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const u=l.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const g of f[u])zp(g,e,t,i+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),g={};for(const h of f)g[h]=u[h];for(const[h,_]of Object.entries(g)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);p(u,T,_)}for(const h of f)delete u[h]}}else{const u=n;l in u&&zp(u[l],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oR(n){const e={},t=d(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function rR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],lR(u)),e}function aR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],uR(u)),e}function lR(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>cR(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function uR(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>dR(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function cR(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],yR(t)),e}function dR(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],vR(t)),e}function fR(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function hR(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function pR(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],mR(u)),e}function mR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function bS(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],gR(u)),e}function gR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function yR(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Dm(i));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function vR(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Dm(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var c_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(c_||(c_={}));var d_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(d_||(d_={}));var f_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(f_||(f_={}));var Uo;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Uo||(Uo={}));var h_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(h_||(h_={}));var p_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(p_||(p_={}));var m_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(m_||(m_={}));var g_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(g_||(g_={}));var y_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(y_||(y_={}));var v_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(v_||(v_={}));var __;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(__||(__={}));var T_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(T_||(T_={}));var E_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(E_||(E_={}));var S_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(S_||(S_={}));var A_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(A_||(A_={}));var C_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(C_||(C_={}));var b_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(b_||(b_={}));var w_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(w_||(w_={}));var I_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(I_||(I_={}));var Md;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Md||(Md={}));var x_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(x_||(x_={}));var R_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(R_||(R_={}));var N_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(N_||(N_={}));var Kp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Kp||(Kp={}));var M_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(M_||(M_={}));var D_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(D_||(D_={}));var P_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(P_||(P_={}));var k_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(k_||(k_={}));var V_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(V_||(V_={}));var U_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(U_||(U_={}));var L_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(L_||(L_={}));var O_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(O_||(O_={}));var H_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(H_||(H_={}));var B_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(B_||(B_={}));var F_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(F_||(F_={}));var G_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(G_||(G_={}));var q_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(q_||(q_={}));var z_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(z_||(z_={}));var K_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(K_||(K_={}));var Y_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Y_||(Y_={}));var $_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})($_||($_={}));var J_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(J_||(J_={}));var Q_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Q_||(Q_={}));var X_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(X_||(X_={}));var W_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(W_||(W_={}));var j_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(j_||(j_={}));var Z_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Z_||(Z_={}));var eT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(eT||(eT={}));var tT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(tT||(tT={}));var nT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(nT||(nT={}));var iT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(iT||(iT={}));var sT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(sT||(sT={}));var oT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(oT||(oT={}));var rT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(rT||(rT={}));var aT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(aT||(aT={}));var Da;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Da||(Da={}));class Yp{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class su{get text(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const S of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[w,H]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(H!==null||H!==void 0)&&T.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[S,w]of Object.entries(T))S!=="inlineData"&&(w!==null||w!==void 0)&&_.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,r,l,u,f,g;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,r,l,u,f,g,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,r,l,u,f,g,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class lT{}class uT{}class _R{}class TR{}class ER{}class SR{}class cT{}class dT{}class fT{}class AR{}class Dd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Dd;let r;const l=e;return t?r=aR(l):r=rR(l),Object.assign(i,r),i}}class hT{}class pT{}class mT{}class gT{}class CR{}class bR{}class wR{}class Pm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Pm,l=pR(e);return Object.assign(i,l),i}}class IR{}class xR{}class RR{}class yT{}class NR{get text(){var e,t,i;let r="",l=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(f))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,i;let r="";const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,g]of Object.entries(u))f!=="inlineData"&&g!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class MR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class km{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new km,l=bS(e);return Object.assign(i,l),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function wS(n,e){const t=rt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function IS(n){return Array.isArray(n)?n.map(e=>Pd(e)):[Pd(n)]}function Pd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function xS(n){const e=Pd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function RS(n){const e=Pd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function NS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>vT(e)):[vT(n)]}function $p(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function _T(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function TT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function An(n){if(n==null)throw new Error("ContentUnion is required");return $p(n)?n:{role:"user",parts:NS(n)}}function Vm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=An(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=An(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>An(t)):[An(e)]}function Ti(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(_T(n)||TT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[An(n)]}const e=[],t=[],i=$p(n[0]);for(const r of n){const l=$p(r);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(_T(r)||TT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:NS(t)}),e}function DR(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Uo).includes(t[0].toUpperCase())?t[0].toUpperCase():Uo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Uo).includes(i.toUpperCase())?i.toUpperCase():Uo.TYPE_UNSPECIFIED})}}function ka(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&DR(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Uo).includes(f.toUpperCase())?f.toUpperCase():Uo.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=ka(f);else if(i.includes(u)){const g=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}g.push(ka(h))}e[u]=g}else if(r.includes(u)){const g={};for(const[h,_]of Object.entries(f))g[h]=ka(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Um(n){return ka(n)}function Lm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Om(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Qa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ka(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ka(e.response));return n}function Xa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function PR(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Ws(n,e){if(typeof e!="string")throw new Error("name must be a string");return PR(n,e,"cachedContents")}function MS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Xo(n){return Dm(n)}function kR(n){return n!=null&&typeof n=="object"&&"name"in n}function VR(n){return n!=null&&typeof n=="object"&&"video"in n}function UR(n){return n!=null&&typeof n=="object"&&"uri"in n}function DS(n){var e;let t;if(kR(n)&&(t=n.name),!(UR(n)&&(t=n.uri,t===void 0))&&!(VR(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function PS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function kS(n){for(const e of["models","tunedModels","publisherModels"])if(LR(n,e))return n[e];return[]}function LR(n,e){return n!==null&&typeof n=="object"&&e in n}function OR(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function HR(n,e={}){const t=[],i=new Set;for(const r of n){const l=r.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const u=OR(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function VS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function BR(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function US(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Wa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function LS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FR(n){const e={},t=d(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>E1(u))),p(e,["inlinedResponses"],l)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["inlinedEmbedContentResponses"],l)}return e}function GR(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function qR(n){const e={},t=d(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function yd(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["metadata","state"]);r!=null&&p(e,["state"],LS(r));const l=d(n,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const u=d(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&p(e,["updateTime"],f);const g=d(n,["metadata","model"]);g!=null&&p(e,["model"],g);const h=d(n,["metadata","output"]);return h!=null&&p(e,["dest"],FR(US(h))),e}function Jp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["state"]);r!=null&&p(e,["state"],LS(r));const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["createTime"]);u!=null&&p(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(e,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(e,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=d(n,["model"]);_!=null&&p(e,["model"],_);const T=d(n,["inputConfig"]);T!=null&&p(e,["src"],zR(T));const S=d(n,["outputConfig"]);S!=null&&p(e,["dest"],GR(US(S)));const w=d(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function zR(n){const e={},t=d(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function KR(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&p(t,["fileName"],i);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>T1(n,u))),p(t,["requests","requests"],l)}return t}function YR(n){const e={},t=d(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function $R(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function JR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Wa(n,i)),t}function QR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Wa(n,i)),t}function XR(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],WR(i));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function WR(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function OS(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>x1(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function jR(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function ZR(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],qR(BR(r))),t}function ET(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],KR(n,VS(n,r)));const l=d(e,["config"]);return l!=null&&jR(l,t),t}function e1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],rt(n,i));const r=d(e,["src"]);r!=null&&p(t,["inputConfig"],YR(VS(n,r)));const l=d(e,["config"]);return l!=null&&ZR(l,t),t}function t1(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function n1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],u1(n,r));const l=d(e,["config"]);return l!=null&&t1(l,t),t}function i1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Wa(n,i)),t}function s1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Wa(n,i)),t}function o1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function r1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function a1(n,e){const t={},i=d(e,["contents"]);if(i!=null){let l=Vm(n,i);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(p(t,["_self"],l1(r,t)),sR(t,{"requests[].*":"requests[].request.*"})),t}function l1(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function u1(n,e){const t={},i=d(e,["fileName"]);i!=null&&p(t,["file_name"],i);const r=d(e,["inlinedRequests"]);return r!=null&&p(t,["requests"],a1(n,r)),t}function c1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function d1(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function f1(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function h1(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],OS(An(r)));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const H=d(e,["frequencyPenalty"]);H!=null&&p(i,["frequencyPenalty"],H);const P=d(e,["seed"]);P!=null&&p(i,["seed"],P);const k=d(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const K=d(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],Um(K));const B=d(e,["responseJsonSchema"]);if(B!=null&&p(i,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ee=d(e,["safetySettings"]);if(t!==void 0&&ee!=null){let D=ee;Array.isArray(D)&&(D=D.map(Ge=>R1(Ge))),p(t,["safetySettings"],D)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let D=Xa(re);Array.isArray(D)&&(D=D.map(Ge=>M1(Qa(Ge)))),p(t,["tools"],D)}const he=d(e,["toolConfig"]);if(t!==void 0&&he!=null&&p(t,["toolConfig"],N1(he)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=d(e,["cachedContent"]);t!==void 0&&fe!=null&&p(t,["cachedContent"],Ws(n,fe));const M=d(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const N=d(e,["mediaResolution"]);N!=null&&p(i,["mediaResolution"],N);const R=d(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],Lm(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=d(e,["thinkingConfig"]);O!=null&&p(i,["thinkingConfig"],O);const U=d(e,["imageConfig"]);U!=null&&p(i,["imageConfig"],_1(U));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function p1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>XR(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function m1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Wa(n,i)),t}function g1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Wa(n,i)),t}function y1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function v1(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function _1(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function T1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["request","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let f=Ti(r);Array.isArray(f)&&(f=f.map(g=>OS(g))),p(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(e,["config"]);return u!=null&&p(t,["request","generationConfig"],h1(n,u,d(t,["request"],{}))),t}function E1(n){const e={},t=d(n,["response"]);t!=null&&p(e,["response"],p1(t));const i=d(n,["error"]);return i!=null&&p(e,["error"],i),e}function S1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function A1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const l=d(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),t}function C1(n){const e={},t=d(n,["config"]);return t!=null&&S1(t,e),e}function b1(n){const e={},t=d(n,["config"]);return t!=null&&A1(t,e),e}function w1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>yd(u))),p(e,["batchJobs"],l)}return e}function I1(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Jp(u))),p(e,["batchJobs"],l)}return e}function x1(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],c1(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],d1(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],$R(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function R1(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function N1(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],f1(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function M1(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],y1(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],v1(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ks;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ks||(Ks={}));class Vr{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D1 extends Xs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Vr(Ks.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=ET(this.apiClient,e),i=t._url,r=ye("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,g=f.requests,h=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const w=T.request;w.systemInstruction=S,T.request=w}h.push(T)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=e1(this.apiClient,e);return f=ye("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Jp(_))}else{const h=ET(this.apiClient,e);return f=ye("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>yd(_))}}async createEmbeddingsInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=n1(this.apiClient,e);return l=ye("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>yd(g))}}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=g1(this.apiClient,e);return f=ye("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Jp(_))}else{const h=m1(this.apiClient,e);return f=ye("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>yd(_))}}async cancel(e){var t,i,r,l;let u="",f={};if(this.apiClient.isVertexAI()){const g=QR(this.apiClient,e);u=ye("batchPredictionJobs/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=JR(this.apiClient,e);u=ye("batches/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=b1(e);return f=ye("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=I1(_),S=new yT;return Object.assign(S,T),S})}else{const h=C1(e);return f=ye("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=w1(_),S=new yT;return Object.assign(S,T),S})}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=s1(this.apiClient,e);return f=ye("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>r1(_))}else{const h=i1(this.apiClient,e);return f=ye("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>o1(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P1(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function ST(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>nN(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function k1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let _=Ti(u);Array.isArray(_)&&(_=_.map(T=>ST(T))),p(e,["contents"],_)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],ST(An(f)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>sN(T))),p(e,["tools"],_)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],iN(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function V1(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=Ti(u);Array.isArray(T)&&(T=T.map(S=>S)),p(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],An(f));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>oN(S))),p(e,["tools"],T)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function U1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],wS(n,i));const r=d(e,["config"]);return r!=null&&k1(r,t),t}function L1(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],wS(n,i));const r=d(e,["config"]);return r!=null&&V1(r,t),t}function O1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ws(n,i)),t}function H1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ws(n,i)),t}function B1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function F1(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function G1(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function q1(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function z1(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function K1(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function Y1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ws(n,i)),t}function $1(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ws(n,i)),t}function J1(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Q1(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function X1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function W1(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function j1(n){const e={},t=d(n,["config"]);return t!=null&&X1(t,e),e}function Z1(n){const e={},t=d(n,["config"]);return t!=null&&W1(t,e),e}function eN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function tN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function nN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],G1(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],q1(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],P1(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function iN(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],z1(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function sN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],J1(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],Q1(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function oN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>K1(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function rN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function aN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function lN(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Ws(n,i));const r=d(e,["config"]);return r!=null&&rN(r,t),t}function uN(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Ws(n,i));const r=d(e,["config"]);return r!=null&&aN(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cN extends Xs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Vr(Ks.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=L1(this.apiClient,e);return f=ye("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=U1(this.apiClient,e);return f=ye("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=$1(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=Y1(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=H1(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=F1(_),S=new mT;return Object.assign(S,T),S})}else{const h=O1(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=B1(_),S=new mT;return Object.assign(S,T),S})}}async update(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=uN(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=lN(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=Z1(e);return f=ye("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=tN(_),S=new gT;return Object.assign(S,T),S})}else{const h=j1(e);return f=ye("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=eN(_),S=new gT;return Object.assign(S,T),S})}}}function kd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function AT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(n){return this instanceof ke?(this.v=n,this):new ke(n)}function Oi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(H){return Promise.resolve(H).then(w,T)}}function f(w,H){i[w]&&(r[w]=function(P){return new Promise(function(k,K){l.push([w,P,k,K])>1||g(w,P)})},H&&(r[w]=H(r[w])))}function g(w,H){try{h(i[w](H))}catch(P){S(l[0][3],P)}}function h(w){w.value instanceof ke?Promise.resolve(w.value.v).then(_,T):S(l[0][2],w)}function _(w){g("next",w)}function T(w){g("throw",w)}function S(w,H){w(H),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Hi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof AT=="function"?AT(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(u){return new Promise(function(f,g){u=n[l](u),r(f,g,u.done,u.value)})}}function r(l,u,f,g){Promise.resolve(g).then(function(h){l({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:HS(t)}function HS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function fN(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function CT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let l=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),l&&!HS(n[i])&&(l=!1),i++;l?e.push(...r):e.pop()}return e}class hN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new pN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class pN{constructor(e,t,i,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),fN(l)}async sendMessage(e){var t;await this.sendPromise;const i=An(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,f;const g=await r,h=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];_!=null&&(S=(f=_.slice(T))!==null&&f!==void 0?f:[]);const w=h?[h]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=An(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?CT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Oi(this,arguments,function*(){var r,l,u,f,g,h;const _=[];try{for(var T=!0,S=Hi(e),w;w=yield ke(S.next()),r=w.done,!r;T=!0){f=w.value,T=!1;const H=f;if(dN(H)){const P=(h=(g=H.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;P!==void 0&&_.push(P)}yield yield ke(H)}}catch(H){l={error:H}}finally{try{!T&&!r&&(u=S.return)&&(yield ke(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...CT(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,sf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mN(n){const e={},t=d(n,["file"]);return t!=null&&p(e,["file"],t),e}function gN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function yN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],DS(t)),e}function vN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function _N(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],DS(t)),e}function TN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function EN(n){const e={},t=d(n,["config"]);return t!=null&&TN(t,e),e}function SN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AN extends Xs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Vr(Ks.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=EN(e);return l=ye("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=SN(g),_=new IR;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mN(e);return l=ye("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=gN(g),_=new xR;return Object.assign(_,h),_})}}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_N(e);return l=ye("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=yN(e);return l=ye("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=vN(g),_=new RR;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vd(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function CN(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>BN(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function bN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function wN(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function IN(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function xN(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const H=d(n,["responseModalities"]);H!=null&&p(e,["responseModalities"],H);const P=d(n,["responseSchema"]);P!=null&&p(e,["responseSchema"],P);const k=d(n,["routingConfig"]);k!=null&&p(e,["routingConfig"],k);const K=d(n,["seed"]);K!=null&&p(e,["seed"],K);const B=d(n,["speechConfig"]);B!=null&&p(e,["speechConfig"],B);const ee=d(n,["stopSequences"]);ee!=null&&p(e,["stopSequences"],ee);const re=d(n,["temperature"]);re!=null&&p(e,["temperature"],re);const he=d(n,["thinkingConfig"]);he!=null&&p(e,["thinkingConfig"],he);const fe=d(n,["topK"]);fe!=null&&p(e,["topK"],fe);const M=d(n,["topP"]);if(M!=null&&p(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function RN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function NN(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function MN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Om(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const H=d(n,["systemInstruction"]);e!==void 0&&H!=null&&p(e,["setup","systemInstruction"],CN(An(H)));const P=d(n,["tools"]);if(e!==void 0&&P!=null){let fe=Xa(P);Array.isArray(fe)&&(fe=fe.map(M=>GN(Qa(M)))),p(e,["setup","tools"],fe)}const k=d(n,["sessionResumption"]);e!==void 0&&k!=null&&p(e,["setup","sessionResumption"],FN(k));const K=d(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const ee=d(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&p(e,["setup","realtimeInputConfig"],ee);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const he=d(n,["proactivity"]);if(e!==void 0&&he!=null&&p(e,["setup","proactivity"],he),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function DN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],xN(i));const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Om(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const H=d(n,["systemInstruction"]);e!==void 0&&H!=null&&p(e,["setup","systemInstruction"],An(H));const P=d(n,["tools"]);if(e!==void 0&&P!=null){let M=Xa(P);Array.isArray(M)&&(M=M.map(N=>qN(Qa(N)))),p(e,["setup","tools"],M)}const k=d(n,["sessionResumption"]);e!==void 0&&k!=null&&p(e,["setup","sessionResumption"],k);const K=d(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const ee=d(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&p(e,["setup","realtimeInputConfig"],ee);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const he=d(n,["proactivity"]);e!==void 0&&he!=null&&p(e,["setup","proactivity"],he);const fe=d(n,["explicitVadSignal"]);return e!==void 0&&fe!=null&&p(e,["setup","explicitVadSignal"],fe),t}function PN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],rt(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],MN(r,t)),t}function kN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],rt(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],DN(r,t)),t}function VN(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function UN(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function LN(n){const e={},t=d(n,["media"]);if(t!=null){let h=IS(t);Array.isArray(h)&&(h=h.map(_=>vd(_))),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],vd(RS(i)));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],vd(xS(l)));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function ON(n){const e={},t=d(n,["media"]);if(t!=null){let h=IS(t);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],RS(i));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],xS(l));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function HN(n){const e={},t=d(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const r=d(n,["toolCall"]);r!=null&&p(e,["toolCall"],r);const l=d(n,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const u=d(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],zN(u));const f=d(n,["goAway"]);f!=null&&p(e,["goAway"],f);const g=d(n,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function BN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],bN(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],wN(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],vd(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function FN(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function GN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],RN(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],NN(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function qN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>IN(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function zN(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const r=d(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const u=d(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const g=d(n,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(H=>H)),p(e,["promptTokensDetails"],w)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(H=>H)),p(e,["cacheTokensDetails"],w)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(H=>H)),p(e,["responseTokensDetails"],w)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(H=>H)),p(e,["toolUsePromptTokensDetails"],w)}const S=d(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KN(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function YN(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],$N(i));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function $N(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function JN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let l=Ti(r);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["contents"],l)}return t}function QN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["tokensInfo"],r)}return e}function XN(n){const e={},t=d(n,["values"]);t!=null&&p(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&p(e,["statistics"],WN(i)),e}function WN(n){const e={},t=d(n,["truncated"]);t!=null&&p(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function of(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>rD(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function jN(n){const e={},t=d(n,["controlType"]);t!=null&&p(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function ZN(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function eM(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],An(i));const r=d(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>qS(f))),p(e,["tools"],u)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&p(e,["generationConfig"],KM(l)),t}function tM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=Ti(r);Array.isArray(u)&&(u=u.map(f=>of(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&ZN(l),t}function nM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=Ti(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&eM(l,t),t}function iM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const r=d(n,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function sM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function oM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],rt(n,i)),t}function rM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],rt(n,i)),t}function aM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function lM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function uM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const H=d(n,["outputMimeType"]);e!==void 0&&H!=null&&p(e,["parameters","outputOptions","mimeType"],H);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const k=d(n,["addWatermark"]);e!==void 0&&k!=null&&p(e,["parameters","addWatermark"],k);const K=d(n,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const B=d(n,["editMode"]);e!==void 0&&B!=null&&p(e,["parameters","editMode"],B);const ee=d(n,["baseSteps"]);return e!==void 0&&ee!=null&&p(e,["parameters","editConfig","baseSteps"],ee),t}function cM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>fD(g))),p(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&uM(u,t),t}function dM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>rf(l))),p(e,["generatedImages"],r)}return e}function fM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function hM(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&p(e,["parameters","outputDimensionality"],l);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&p(e,["parameters","autoTruncate"],f),t}function pM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let f=Vm(n,r);Array.isArray(f)&&(f=f.map(g=>g)),p(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&fM(l,t);const u=d(e,["model"]);return u!==void 0&&p(t,["requests[]","model"],rt(n,u)),t}function mM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=Vm(n,r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["instances[]","content"],u)}const l=d(e,["config"]);return l!=null&&hM(l,t),t}function gM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function yM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>XN(u))),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function vM(n){const e={},t=d(n,["endpoint"]);t!=null&&p(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function _M(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function TM(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function EM(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function AM(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],of(An(r)));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const H=d(e,["frequencyPenalty"]);H!=null&&p(i,["frequencyPenalty"],H);const P=d(e,["seed"]);P!=null&&p(i,["seed"],P);const k=d(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const K=d(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],Um(K));const B=d(e,["responseJsonSchema"]);if(B!=null&&p(i,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ee=d(e,["safetySettings"]);if(t!==void 0&&ee!=null){let D=ee;Array.isArray(D)&&(D=D.map(Ge=>hD(Ge))),p(t,["safetySettings"],D)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let D=Xa(re);Array.isArray(D)&&(D=D.map(Ge=>TD(Qa(Ge)))),p(t,["tools"],D)}const he=d(e,["toolConfig"]);if(t!==void 0&&he!=null&&p(t,["toolConfig"],_D(he)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=d(e,["cachedContent"]);t!==void 0&&fe!=null&&p(t,["cachedContent"],Ws(n,fe));const M=d(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const N=d(e,["mediaResolution"]);N!=null&&p(i,["mediaResolution"],N);const R=d(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],Lm(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=d(e,["thinkingConfig"]);O!=null&&p(i,["thinkingConfig"],O);const U=d(e,["imageConfig"]);U!=null&&p(i,["imageConfig"],XM(U));const q=d(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function CM(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],An(r));const l=d(e,["temperature"]);l!=null&&p(i,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const H=d(e,["frequencyPenalty"]);H!=null&&p(i,["frequencyPenalty"],H);const P=d(e,["seed"]);P!=null&&p(i,["seed"],P);const k=d(e,["responseMimeType"]);k!=null&&p(i,["responseMimeType"],k);const K=d(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],Um(K));const B=d(e,["responseJsonSchema"]);B!=null&&p(i,["responseJsonSchema"],B);const ee=d(e,["routingConfig"]);ee!=null&&p(i,["routingConfig"],ee);const re=d(e,["modelSelectionConfig"]);re!=null&&p(i,["modelConfig"],re);const he=d(e,["safetySettings"]);if(t!==void 0&&he!=null){let X=he;Array.isArray(X)&&(X=X.map(de=>de)),p(t,["safetySettings"],X)}const fe=d(e,["tools"]);if(t!==void 0&&fe!=null){let X=Xa(fe);Array.isArray(X)&&(X=X.map(de=>qS(Qa(de)))),p(t,["tools"],X)}const M=d(e,["toolConfig"]);t!==void 0&&M!=null&&p(t,["toolConfig"],M);const N=d(e,["labels"]);t!==void 0&&N!=null&&p(t,["labels"],N);const R=d(e,["cachedContent"]);t!==void 0&&R!=null&&p(t,["cachedContent"],Ws(n,R));const O=d(e,["responseModalities"]);O!=null&&p(i,["responseModalities"],O);const U=d(e,["mediaResolution"]);U!=null&&p(i,["mediaResolution"],U);const q=d(e,["speechConfig"]);q!=null&&p(i,["speechConfig"],Lm(q));const D=d(e,["audioTimestamp"]);D!=null&&p(i,["audioTimestamp"],D);const Ge=d(e,["thinkingConfig"]);Ge!=null&&p(i,["thinkingConfig"],Ge);const at=d(e,["imageConfig"]);if(at!=null&&p(i,["imageConfig"],WM(at)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function bT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=Ti(r);Array.isArray(u)&&(u=u.map(f=>of(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],AM(n,l,t)),t}function wT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["contents"]);if(r!=null){let u=Ti(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],CM(n,l,t)),t}function IT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>YN(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function xT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const r=d(n,["createTime"]);r!=null&&p(e,["createTime"],r);const l=d(n,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const u=d(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(e,["responseId"],f);const g=d(n,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function bM(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=d(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(n,["imageSize"]);if(e!==void 0&&w!=null&&p(e,["parameters","sampleImageSize"],w),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function wM(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const H=d(n,["outputMimeType"]);e!==void 0&&H!=null&&p(e,["parameters","outputOptions","mimeType"],H);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const k=d(n,["addWatermark"]);e!==void 0&&k!=null&&p(e,["parameters","addWatermark"],k);const K=d(n,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const B=d(n,["imageSize"]);e!==void 0&&B!=null&&p(e,["parameters","sampleImageSize"],B);const ee=d(n,["enhancePrompt"]);return e!==void 0&&ee!=null&&p(e,["parameters","enhancePrompt"],ee),t}function IM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&bM(l,t),t}function xM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&wM(l,t),t}function RM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>FM(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],FS(r)),e}function NM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>rf(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],GS(r)),e}function MM(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(n,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=d(n,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(n,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],af(_));const T=d(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(w=>PD(w))),p(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function DM(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const l=d(n,["fps"]);e!==void 0&&l!=null&&p(e,["parameters","fps"],l);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const h=d(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","negativePrompt"],S);const w=d(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const H=d(n,["generateAudio"]);e!==void 0&&H!=null&&p(e,["parameters","generateAudio"],H);const P=d(n,["lastFrame"]);e!==void 0&&P!=null&&p(e,["instances[0]","lastFrame"],Fi(P));const k=d(n,["referenceImages"]);if(e!==void 0&&k!=null){let ee=k;Array.isArray(ee)&&(ee=ee.map(re=>kD(re))),p(e,["instances[0]","referenceImages"],ee)}const K=d(n,["mask"]);e!==void 0&&K!=null&&p(e,["instances[0]","mask"],DD(K));const B=d(n,["compressionQuality"]);return e!==void 0&&B!=null&&p(e,["parameters","compressionQuality"],B),t}function PM(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],LM(u)),e}function kM(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],OM(u)),e}function VM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],af(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],zS(u));const f=d(e,["source"]);f!=null&&HM(f,t);const g=d(e,["config"]);return g!=null&&MM(g,t),t}function UM(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],Fi(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],KS(u));const f=d(e,["source"]);f!=null&&BM(f,t);const g=d(e,["config"]);return g!=null&&DM(g,t),t}function LM(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>qM(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function OM(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>zM(u))),p(e,["generatedVideos"],l)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function HM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],af(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],zS(l)),t}function BM(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Fi(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],KS(l)),t}function FM(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],jM(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=d(n,["_self"]);return r!=null&&p(e,["safetyAttributes"],FS(r)),e}function rf(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],BS(t));const i=d(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=d(n,["_self"]);r!=null&&p(e,["safetyAttributes"],GS(r));const l=d(n,["prompt"]);return l!=null&&p(e,["enhancedPrompt"],l),e}function GM(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["mask"],BS(t));const i=d(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["labels"],r)}return e}function qM(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],ND(t)),e}function zM(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],MD(t)),e}function KM(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const H=d(n,["responseModalities"]);H!=null&&p(e,["responseModalities"],H);const P=d(n,["responseSchema"]);P!=null&&p(e,["responseSchema"],P);const k=d(n,["routingConfig"]);k!=null&&p(e,["routingConfig"],k);const K=d(n,["seed"]);K!=null&&p(e,["seed"],K);const B=d(n,["speechConfig"]);B!=null&&p(e,["speechConfig"],B);const ee=d(n,["stopSequences"]);ee!=null&&p(e,["stopSequences"],ee);const re=d(n,["temperature"]);re!=null&&p(e,["temperature"],re);const he=d(n,["thinkingConfig"]);he!=null&&p(e,["thinkingConfig"],he);const fe=d(n,["topK"]);fe!=null&&p(e,["topK"],fe);const M=d(n,["topP"]);if(M!=null&&p(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YM(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],rt(n,i)),t}function $M(n,e){const t={},i=d(e,["model"]);return i!=null&&p(t,["_url","name"],rt(n,i)),t}function JM(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function QM(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function XM(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WM(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);const r=d(n,["outputMimeType"]);r!=null&&p(e,["imageOutputOptions","mimeType"],r);const l=d(n,["outputCompressionQuality"]);return l!=null&&p(e,["imageOutputOptions","compressionQuality"],l),e}function jM(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],Xo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function BS(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Xo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function af(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],Xo(t));const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Fi(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Xo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function ZM(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],PS(n,f)),i}function eD(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],PS(n,f)),i}function tD(n,e){const t={},i=d(e,["config"]);return i!=null&&ZM(n,i,t),t}function nD(n,e){const t={},i=d(e,["config"]);return i!=null&&eD(n,i,t),t}function iD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let l=kS(r);Array.isArray(l)&&(l=l.map(u=>Qp(u))),p(e,["models"],l)}return e}function sD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let l=kS(r);Array.isArray(l)&&(l=l.map(u=>Xp(u))),p(e,["models"],l)}return e}function oD(n){const e={},t=d(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const r=d(n,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function Qp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["version"]);l!=null&&p(e,["version"],l);const u=d(n,["_self"]);u!=null&&p(e,["tunedModelInfo"],ED(u));const f=d(n,["inputTokenLimit"]);f!=null&&p(e,["inputTokenLimit"],f);const g=d(n,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const h=d(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=d(n,["temperature"]);_!=null&&p(e,["temperature"],_);const T=d(n,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const S=d(n,["topP"]);S!=null&&p(e,["topP"],S);const w=d(n,["topK"]);w!=null&&p(e,["topK"],w);const H=d(n,["thinking"]);return H!=null&&p(e,["thinking"],H),e}function Xp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["versionId"]);l!=null&&p(e,["version"],l);const u=d(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>vM(S))),p(e,["endpoints"],T)}const f=d(n,["labels"]);f!=null&&p(e,["labels"],f);const g=d(n,["_self"]);g!=null&&p(e,["tunedModelInfo"],SD(g));const h=d(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=d(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>S)),p(e,["checkpoints"],T)}return e}function rD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],_M(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],TM(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],KN(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function aD(n){const e={},t=d(n,["productImage"]);return t!=null&&p(e,["image"],Fi(t)),e}function lD(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=d(n,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const u=d(n,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const w=d(n,["labels"]);return e!==void 0&&w!=null&&p(e,["labels"],w),t}function uD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["source"]);r!=null&&dD(r,t);const l=d(e,["config"]);return l!=null&&lD(l,t),t}function cD(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>rf(r))),p(e,["generatedImages"],i)}return e}function dD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Fi(r));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>aD(f))),p(e,["instances[0]","productImages"],u)}return t}function fD(n){const e={},t=d(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Fi(t));const i=d(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);const r=d(n,["referenceType"]);r!=null&&p(e,["referenceType"],r);const l=d(n,["maskImageConfig"]);l!=null&&p(e,["maskImageConfig"],oD(l));const u=d(n,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],jN(u));const f=d(n,["styleImageConfig"]);f!=null&&p(e,["styleImageConfig"],f);const g=d(n,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],g),e}function FS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function GS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function hD(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function pD(n){const e={},t=d(n,["image"]);return t!=null&&p(e,["image"],Fi(t)),e}function mD(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const r=d(n,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","confidenceThreshold"],l);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&p(e,["parameters","binaryColorThreshold"],f);const g=d(n,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),t}function gD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["source"]);r!=null&&vD(r,t);const l=d(e,["config"]);return l!=null&&mD(l,t),t}function yD(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>GM(r))),p(e,["generatedMasks"],i)}return e}function vD(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Fi(r));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&p(e,["instances[0]","scribble"],pD(l)),t}function _D(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],EM(t));const i=d(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function TD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],JM(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],QM(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function qS(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>SM(S))),p(e,["functionDeclarations"],T)}const i=d(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function ED(n){const e={},t=d(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function SD(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&p(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function AD(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function CD(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function bD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","name"],rt(n,i));const r=d(e,["config"]);return r!=null&&AD(r,t),t}function wD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["config"]);return r!=null&&CD(r,t),t}function ID(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=d(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=d(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&p(e,["parameters","sampleCount"],S);const w=d(n,["mode"]);return e!==void 0&&w!=null&&p(e,["parameters","mode"],w),t}function xD(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],rt(n,i));const r=d(e,["image"]);r!=null&&p(t,["instances[0]","image"],Fi(r));const l=d(e,["upscaleFactor"]);l!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=d(e,["config"]);return u!=null&&ID(u,t),t}function RD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>rf(l))),p(e,["generatedImages"],r)}return e}function ND(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Xo(i));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function MD(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Xo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function DD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["_self"],Fi(t));const i=d(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function PD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],af(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function kD(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],Fi(t));const i=d(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function zS(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Xo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function KS(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Xo(i));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VD(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function UD(n){const e={},t=d(n,["config"]);return t!=null&&VD(t,e),e}function LD(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function OD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&LD(i,e),e}function HD(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function BD(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["customMetadata"],l)}const r=d(n,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),t}function FD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],qD(u)),e}function GD(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&p(e,["fileName"],i);const r=d(n,["config"]);return r!=null&&BD(r,e),e}function qD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function zD(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function KD(n){const e={},t=d(n,["config"]);return t!=null&&zD(t,e),e}function YD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["fileSearchStores"],l)}return e}function YS(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>g)),p(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function $D(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&YS(i,e),e}function JD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QD="Content-Type",XD="X-Server-Timeout",WD="User-Agent",Wp="x-goog-api-client",jD="1.34.0",ZD=`google-genai-sdk/${jD}`,e2="v1beta1",t2="v1beta";class n2{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:e2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:t2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?i[r]=Object.assign(Object.assign({},i[r]),l):l!==void 0&&(i[r]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&i2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await RT(r),new Yp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await RT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Oi(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield ke(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(_,{stream:!0});try{const H=JSON.parse(T);if("error"in H){const P=JSON.parse(JSON.stringify(H.error)),k=P.status,K=P.code,B=`got status: ${k}. ${JSON.stringify(H)}`;if(K>=400&&K<600)throw new sf({message:B,status:K})}}catch(H){if(H.name==="ApiError")throw H}u+=T;let S=-1,w=0;for(;;){S=-1,w=0;for(const k of g){const K=u.indexOf(k);K!==-1&&(S===-1||K<S)&&(S=K,w=k.length)}if(S===-1)break;const H=u.substring(0,S);u=u.substring(S+w);const P=H.trim();if(P.startsWith(f)){const k=P.substring(f.length).trim();try{const K=new Response(k,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ke(new Yp(K))}catch(K){throw new Error(`exception parsing stream chunk ${k}. ${K}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=ZD+" "+this.clientOptions.userAgentExtra;return e[WD]=t,e[Wp]=t,e[QD]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))i.append(r,l);e.timeout&&e.timeout>0&&i.append(XD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const g={file:r},h=this.getFileName(e),_=ye("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const l=this.clientOptions.uploader,u=await l.stat(t),f=String(u.size),g=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&YS(i,T);const S=await this.fetchUploadUrl(h,f,g,_,T,i==null?void 0:i.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,l,u){var f;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function RT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new sf({message:r,status:t}):new Error(r)}}function i2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,u){const f=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],_=f[g];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[g]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[g]=h)}return f}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s2="mcp_used/unknown";let o2=!1;function $S(n){for(const e of n)if(r2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return o2}function JS(n){var e;const t=(e=n[Wp])!==null&&e!==void 0?e:"";n[Wp]=(t+` ${s2}`).trimStart()}function r2(n){return n!==null&&typeof n=="object"&&n instanceof Hm}function a2(n){return Oi(this,arguments,function*(t,i=100){let r,l=0;for(;l<i;){const u=yield ke(t.listTools({cursor:r}));for(const f of u.tools)yield yield ke(f),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Hm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Hm(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,g=(t=void 0,Hi(a2(_))),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const T=r;u.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),HR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function l2(n,e,t){const i=new MR;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class u2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=f2(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(ee=>{h=ee}),T=e.callbacks,S=function(){h({})},w=this.apiClient,H={onopen:S,onmessage:ee=>{l2(w,T.onmessage,ee)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(ee){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(ee){}},P=this.webSocketFactory.create(g,d2(u),H);P.connect(),await _;const B={setup:{model:rt(this.apiClient,e.model)}};return P.send(JSON.stringify(B)),new c2(P,this.apiClient)}}class c2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=UN(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=VN(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Da.PLAY)}pause(){this.sendPlaybackControl(Da.PAUSE)}stop(){this.sendPlaybackControl(Da.STOP)}resetContext(){this.sendPlaybackControl(Da.RESET_CONTEXT)}close(){this.conn.close()}}function d2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function f2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function p2(n,e,t){const i=new NR;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const u=HN(l);Object.assign(i,u)}else Object.assign(i,l);e(i)}class m2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new u2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&$S(e.config.tools)&&JS(T);const S=_2(T);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const R=this.apiClient.getApiKey();let O="BidiGenerateContent",U="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",U="access_token"),_=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${O}?${U}=${R}`}let w=()=>{};const H=new Promise(R=>{w=R}),P=e.callbacks,k=function(){var R;(R=P==null?void 0:P.onopen)===null||R===void 0||R.call(P),w({})},K=this.apiClient,B={onopen:k,onmessage:R=>{p2(K,P.onmessage,R)},onerror:(t=P==null?void 0:P.onerror)!==null&&t!==void 0?t:function(R){},onclose:(i=P==null?void 0:P.onclose)!==null&&i!==void 0?i:function(R){}},ee=this.webSocketFactory.create(_,v2(S),B);ee.connect(),await H;let re=rt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const R=this.apiClient.getProject(),O=this.apiClient.getLocation();re=`projects/${R}/locations/${O}/`+re}let he={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Md.AUDIO]}:e.config.responseModalities=[Md.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const fe=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],M=[];for(const R of fe)if(this.isCallableTool(R)){const O=R;M.push(await O.tool())}else M.push(R);M.length>0&&(e.config.tools=M);const N={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?he=kN(this.apiClient,N):he=PN(this.apiClient,N),delete he.config,ee.send(JSON.stringify(he)),new y2(ee,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const g2={turnComplete:!0};class y2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Ti(t.turns),e.isVertexAI()||(i=i.map(r=>of(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(h2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},g2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:ON(e)}:t={realtimeInput:LN(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function v2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function _2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NT=10;function MT(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Va(u)){r=!0;break}if(!r)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Va(n){return"callTool"in n&&typeof n.callTool=="function"}function T2(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Va(r)))!==null&&i!==void 0?i:!1}function DT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(Va(i))return;const l=i;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function PT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E2 extends Xs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,l,u,f;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!T2(t)||MT(t.config))return await this.generateContentInternal(g);const h=DT(t);if(h.length>0){const P=h.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let _,T;const S=Ti(g.contents),w=(l=(r=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:NT;let H=0;for(;H<w&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const P=_.candidates[0].content,k=[];for(const K of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Va(K)){const ee=await K.callTool(_.functionCalls);k.push(...ee)}H++,T={role:"user",parts:k},g.contents=Ti(g.contents),g.contents.push(P),g.contents.push(T),PT(g.config)&&(S.push(P),S.push(T))}return PT(g.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var i,r,l,u,f;if(this.maybeMoveToResponseJsonSchem(t),MT(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=DT(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let l;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Vr(Ks.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,l,u,f,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(f=t.source)===null||f===void 0?void 0:f.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>Va(g)?await g.tool():g)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&$S(e.config.tools)){const g=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),JS(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,r;const l=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Va(u)){const f=u,g=await f.tool();for(const h of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var t,i,r;const l=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:NT;let u=!1,f=0;const g=await this.initAfcToolsMap(e);return(function(h,_,T){return Oi(this,arguments,function*(){for(var S,w,H,P,k,K;f<l;){u&&(f++,u=!1);const he=yield ke(h.processParamsMaybeAddMcpUsage(T)),fe=yield ke(h.generateContentStreamInternal(he)),M=[],N=[];try{for(var B=!0,ee=(w=void 0,Hi(fe)),re;re=yield ke(ee.next()),S=re.done,!S;B=!0){P=re.value,B=!1;const R=P;if(yield yield ke(R),R.candidates&&(!((k=R.candidates[0])===null||k===void 0)&&k.content)){N.push(R.candidates[0].content);for(const O of(K=R.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(f<l&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(O.functionCall.name)){const U=yield ke(_.get(O.functionCall.name).callTool([O.functionCall]));M.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(R){w={error:R}}finally{try{!B&&!S&&(H=ee.return)&&(yield ke(H.call(ee)))}finally{if(w)throw w.error}}if(M.length>0){u=!0;const R=new su;R.candidates=[{content:{role:"user",parts:M}}],yield yield ke(R);const O=[];O.push(...N),O.push({role:"user",parts:M});const U=Ti(T.contents).concat(O);T.contents=U}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=wT(this.apiClient,e);return f=ye("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=xT(_),S=new su;return Object.assign(S,T),S})}else{const h=bT(this.apiClient,e);return f=ye("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=IT(_),S=new su;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=wT(this.apiClient,e);return f=ye("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return Oi(this,arguments,function*(){var S,w,H,P;try{for(var k=!0,K=Hi(T),B;B=yield ke(K.next()),S=B.done,!S;k=!0){P=B.value,k=!1;const ee=P,re=xT(yield ke(ee.json()));re.sdkHttpResponse={headers:ee.headers};const he=new su;Object.assign(he,re),yield yield ke(he)}}catch(ee){w={error:ee}}finally{try{!k&&!S&&(H=K.return)&&(yield ke(H.call(K)))}finally{if(w)throw w.error}}})})}else{const h=bT(this.apiClient,e);return f=ye("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return Oi(this,arguments,function*(){var S,w,H,P;try{for(var k=!0,K=Hi(T),B;B=yield ke(K.next()),S=B.done,!S;k=!0){P=B.value,k=!1;const ee=P,re=IT(yield ke(ee.json()));re.sdkHttpResponse={headers:ee.headers};const he=new su;Object.assign(he,re),yield yield ke(he)}}catch(ee){w={error:ee}}finally{try{!k&&!S&&(H=K.return)&&(yield ke(H.call(K)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=mM(this.apiClient,e);return f=ye("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=yM(_),S=new lT;return Object.assign(S,T),S})}else{const h=pM(this.apiClient,e);return f=ye("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=gM(_),S=new lT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=xM(this.apiClient,e);return f=ye("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=NM(_),S=new uT;return Object.assign(S,T),S})}else{const h=IM(this.apiClient,e);return f=ye("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=RM(_),S=new uT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=cM(this.apiClient,e);return l=ye("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=dM(g),_=new _R;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=xD(this.apiClient,e);return l=ye("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=RD(g),_=new TR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=uD(this.apiClient,e);return l=ye("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=cD(g),_=new ER;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=gD(this.apiClient,e);return l=ye("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=yD(g),_=new SR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=$M(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Xp(_))}else{const h=YM(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Qp(_))}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=nD(this.apiClient,e);return f=ye("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=sD(_),S=new cT;return Object.assign(S,T),S})}else{const h=tD(this.apiClient,e);return f=ye("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=iD(_),S=new cT;return Object.assign(S,T),S})}}async update(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=wD(this.apiClient,e);return f=ye("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Xp(_))}else{const h=bD(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Qp(_))}}async delete(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=rM(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=lM(_),S=new dT;return Object.assign(S,T),S})}else{const h=oM(this.apiClient,e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=aM(_),S=new dT;return Object.assign(S,T),S})}}async countTokens(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=nM(this.apiClient,e);return f=ye("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=sM(_),S=new fT;return Object.assign(S,T),S})}else{const h=tM(this.apiClient,e);return f=ye("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=iM(_),S=new fT;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=JN(this.apiClient,e);return l=ye("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=QN(g),_=new AR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=UM(this.apiClient,e);return f=ye("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=kM(_),S=new Dd;return Object.assign(S,T),S})}else{const h=VM(this.apiClient,e);return f=ye("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const T=PM(_),S=new Dd;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S2 extends Xs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=hR(e);return f=ye("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=fR(e);return f=ye("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=oR(e);return l=ye("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A2(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function C2(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>P2(l))),p(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function b2(n,e,t){const i={},r=d(e,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&p(t,["newSessionExpireTime"],l);const u=d(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&p(t,["bidiGenerateContentSetup"],D2(n,f));const g=d(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&p(t,["fieldMask"],g),i}function w2(n,e){const t={},i=d(e,["config"]);return i!=null&&p(t,["config"],b2(n,i,t)),t}function I2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function x2(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function R2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function N2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function M2(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Om(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const H=d(n,["systemInstruction"]);e!==void 0&&H!=null&&p(e,["setup","systemInstruction"],C2(An(H)));const P=d(n,["tools"]);if(e!==void 0&&P!=null){let fe=Xa(P);Array.isArray(fe)&&(fe=fe.map(M=>V2(Qa(M)))),p(e,["setup","tools"],fe)}const k=d(n,["sessionResumption"]);e!==void 0&&k!=null&&p(e,["setup","sessionResumption"],k2(k));const K=d(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&p(e,["setup","outputAudioTranscription"],B);const ee=d(n,["realtimeInputConfig"]);e!==void 0&&ee!=null&&p(e,["setup","realtimeInputConfig"],ee);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const he=d(n,["proactivity"]);if(e!==void 0&&he!=null&&p(e,["setup","proactivity"],he),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function D2(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],rt(n,i));const r=d(e,["config"]);return r!=null&&p(t,["config"],M2(r,t)),t}function P2(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],I2(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],x2(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],A2(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function k2(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function V2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],R2(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],N2(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function L2(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=U2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];l&&g.push(l),f.length>0&&g.push(...f),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class O2 extends Xs{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=w2(this.apiClient,e);l=ye("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const g=L2(f,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H2(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function B2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&H2(i,e),e}function F2(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function G2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function q2(n){const e={},t=d(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&G2(i,e),e}function z2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=d(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K2 extends Xs{constructor(e){super(),this.apiClient=e,this.list=async t=>new Vr(Ks.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=F2(e);return l=ye("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=B2(e);r=ye("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=q2(e);return l=ye("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=z2(g),_=new CR;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y2 extends Xs{constructor(e,t=new K2(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Vr(Ks.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=UD(e);return l=ye("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=HD(e);return l=ye("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,i;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=OD(e);r=ye("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=KD(e);return l=ye("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=YD(g),_=new bR;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$D(e);return l=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=JD(g),_=new wR;return Object.assign(_,h),_})}}async importFile(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=GD(e);return l=ye("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=FD(g),_=new Pm;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let QS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return QS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const $2=()=>QS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Zp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ei extends Error{}class Rn extends Ei{constructor(e,t,i,r){super(`${Rn.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new lf({message:i,cause:Zp(t)});const l=t;return e===400?new WS(e,l,i,r):e===401?new jS(e,l,i,r):e===403?new ZS(e,l,i,r):e===404?new eA(e,l,i,r):e===409?new tA(e,l,i,r):e===422?new nA(e,l,i,r):e===429?new iA(e,l,i,r):e>=500?new sA(e,l,i,r):new Rn(e,l,i,r)}}class em extends Rn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class lf extends Rn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class XS extends lf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class WS extends Rn{}class jS extends Rn{}class ZS extends Rn{}class eA extends Rn{}class tA extends Rn{}class nA extends Rn{}class iA extends Rn{}class sA extends Rn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J2=/^[a-z][a-z0-9+.-]*:/i,Q2=n=>J2.test(n);let tm=n=>(tm=Array.isArray,tm(n));const X2=tm;let W2=X2;const kT=W2;function j2(n){if(!n)return!0;for(const e in n)return!1;return!0}function Z2(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const eP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ei(`${n} must be an integer`);if(e<0)throw new Ei(`${n} must be a positive integer`);return e},tP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const sP=()=>{var n,e,t,i,r;const l=iP();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":UT(Deno.build.os),"X-Stainless-Arch":VT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":UT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":VT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=oP();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function oP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,l=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const VT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",UT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let od;const rP=()=>od??(od=sP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function oA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function lP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return oA({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function rA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function uP(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Rp(n,e,t){return aA(),new File(n,e??"unknown_file",t)}function dP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const fP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",hP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&lA(n),pP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function mP(n,e,t){if(aA(),n=await n,hP(n))return n instanceof File?n:Rp([await n.arrayBuffer()],n.name);if(pP(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Rp(await nm(r),e,t)}const i=await nm(n);if(e||(e=dP(n)),!(t!=null&&t.type)){const r=i.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Rp(i,e,t)}async function nm(n){var e,t,i,r,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(lA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(fP(n))try{for(var f=!0,g=Hi(n),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const _=r;u.push(...await nm(_))}}catch(_){t={error:_}}finally{try{!f&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${gP(n)}`)}return u}function gP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uA{constructor(e){this._client=e}}uA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const LT=Object.freeze(Object.create(null)),yP=(n=cA)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const l=[],u=t.reduce((_,T,S)=>{var w,H,P;/[?#]/.test(T)&&(r=!0);const k=i[S];let K=(r?encodeURIComponent:n)(""+k);return S!==i.length&&(k==null||typeof k=="object"&&k.toString===((P=Object.getPrototypeOf((H=Object.getPrototypeOf((w=k.hasOwnProperty)!==null&&w!==void 0?w:LT))!==null&&H!==void 0?H:LT))===null||P===void 0?void 0:P.toString))&&(K=k+"",l.push({start:_.length+T.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),_+T+(S===i.length?"":K)},""),f=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(f))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((_,T)=>_.start-T.start),l.length>0){let _=0;const T=l.reduce((S,w)=>{const H=" ".repeat(w.start-_),P="^".repeat(w.length);return _=w.start+w.length,S+H+P},"");throw new Ei(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),rd=yP(cA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dA extends uA{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,l=kd(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Ei("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Ei("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(rd`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(rd`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(rd`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const l=t??{},{api_version:u=this._client.apiVersion}=l,f=kd(l,["api_version"]);return this._client.get(rd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}dA._key=Object.freeze(["interactions"]);class fA extends dA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vP(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let ad;function Bm(n){let e;return(ad??(e=new globalThis.TextEncoder,ad=e.encode.bind(e)))(n)}let ld;function OT(n){let e;return(ld??(e=new globalThis.TextDecoder,ld=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Bm(e):e;this.buffer=vP([this.buffer,t]);const i=[];let r;for(;(r=_P(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(OT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=OT(this.buffer.subarray(0,l));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}uf.NEWLINE_CHARS=new Set([`
`,"\r"]);uf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function _P(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function TP(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vd={off:0,error:200,warn:300,info:400,debug:500},HT=(n,e,t)=>{if(n){if(Z2(Vd,n))return n;xn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Vd))}`)}};function au(){}function ud(n,e,t){return!e||Vd[n]>Vd[t]?au:e[n].bind(e)}const EP={error:au,warn:au,info:au,debug:au};let BT=new WeakMap;function xn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return EP;const r=BT.get(t);if(r&&r[0]===i)return r[1];const l={error:ud("error",t,i),warn:ud("warn",t,i),info:ud("info",t,i),debug:ud("debug",t,i)};return BT.set(t,[i,l]),l}const Cr=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const l=i?xn(i):console;function u(){return Oi(this,arguments,function*(){var g,h,_,T;if(r)throw new Ei("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,H=Hi(SP(e,t)),P;P=yield ke(H.next()),g=P.done,!g;w=!0){T=P.value,w=!1;const k=T;if(!S)if(k.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield ke(JSON.parse(k.data))}catch(K){throw l.error("Could not parse message into JSON:",k.data),l.error("From chunk:",k.raw),K}}}catch(k){h={error:k}}finally{try{!w&&!g&&(_=H.return)&&(yield ke(_.call(H)))}finally{if(h)throw h.error}}S=!0}catch(k){if(jp(k))return yield ke(void 0);throw k}finally{S||t.abort()}})}return new Pa(u,t,i)}static fromReadableStream(e,t,i){let r=!1;function l(){return Oi(this,arguments,function*(){var g,h,_,T;const S=new uf,w=rA(e);try{for(var H=!0,P=Hi(w),k;k=yield ke(P.next()),g=k.done,!g;H=!0){T=k.value,H=!1;const K=T;for(const B of S.decode(K))yield yield ke(B)}}catch(K){h={error:K}}finally{try{!H&&!g&&(_=P.return)&&(yield ke(_.call(P)))}finally{if(h)throw h.error}}for(const K of S.flush())yield yield ke(K)})}function u(){return Oi(this,arguments,function*(){var g,h,_,T;if(r)throw new Ei("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var w=!0,H=Hi(l()),P;P=yield ke(H.next()),g=P.done,!g;w=!0){T=P.value,w=!1;const k=T;S||k&&(yield yield ke(JSON.parse(k)))}}catch(k){h={error:k}}finally{try{!w&&!g&&(_=H.return)&&(yield ke(_.call(H)))}finally{if(h)throw h.error}}S=!0}catch(k){if(jp(k))return yield ke(void 0);throw k}finally{S||t.abort()}})}return new Pa(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=i.next();e.push(u),t.push(u)}return l.shift()}});return[new Pa(()=>r(e),this.controller,this.client),new Pa(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return oA({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:l}=await t.next();if(l)return i.close();const u=Bm(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function SP(n,e){return Oi(this,arguments,function*(){var i,r,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ei("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ei("Attempted to iterate over a response with no body");const f=new CP,g=new uf,h=rA(n.body);try{for(var _=!0,T=Hi(AP(h)),S;S=yield ke(T.next()),i=S.done,!i;_=!0){u=S.value,_=!1;const w=u;for(const H of g.decode(w)){const P=f.decode(H);P&&(yield yield ke(P))}}}catch(w){r={error:w}}finally{try{!_&&!i&&(l=T.return)&&(yield ke(l.call(T)))}finally{if(r)throw r.error}}for(const w of g.flush()){const H=f.decode(w);H&&(yield yield ke(H))}})}function AP(n){return Oi(this,arguments,function*(){var t,i,r,l;let u=new Uint8Array;try{for(var f=!0,g=Hi(n),h;h=yield ke(g.next()),t=h.done,!t;f=!0){l=h.value,f=!1;const _=l;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Bm(_):_;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let w;for(;(w=TP(u))!==-1;)yield yield ke(u.slice(0,w)),u=u.slice(w)}}catch(_){i={error:_}}finally{try{!f&&!t&&(r=g.return)&&(yield ke(r.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield ke(u))})}class CP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=bP(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function bP(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function wP(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var f;if(e.options.stream)return xn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Pa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),h=(f=g==null?void 0:g.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return xn(n).debug(`[${i}] response parsed`,Cr({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fm extends Promise{constructor(e,t,i=wP){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Fm(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hA=Symbol("brand.privateNullableHeaders");function*IP(n){if(!n)return;if(hA in n){const{values:i,nulls:r}=n;yield*i.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():kT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=kT(i[1])?i[1]:[i[1]];let u=!1;for(const f of l)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const ou=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[l,u]of IP(i)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),u===null?(e.delete(l),t.add(f)):(e.append(l,u),t.delete(f))}}return{[hA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Np=n=>{var e,t,i,r,l,u;if(typeof globalThis.process<"u")return(i=(t=(e=Zx)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pA;class cf{constructor(e){var t,i,r,l,u,f,g,{baseURL:h=Np("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Np("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=kd(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:cf.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const H="warn";this.logLevel=H,this.logLevel=(u=(l=HT(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:HT(Np("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:H,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:aP(),this.encoder=cP,this._options=w,this.apiKey=_,this.apiVersion=T,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=ou([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return ou([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ou([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Ei(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${wa}`}defaultIdempotencyKey(){return`stainless-node-retry-${$2()}`}makeStatusError(e,t,i,r){return Rn.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,l=Q2(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return j2(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Fm(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,l,u;const f=await e,g=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(f);const{req:h,url:_,timeout:T}=await this.buildRequest(f,{retryCount:g-t});await this.prepareRequest(h,{url:_,options:f});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,H=Date.now();if(xn(this).debug(`[${S}] sending request`,Cr({retryOfRequestLogID:i,method:f.method,url:_,options:f,headers:h.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new em;const P=new AbortController,k=await this.fetchWithTimeout(_,h,T,P).catch(Zp),K=Date.now();if(k instanceof globalThis.Error){const ee=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new em;const re=jp(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(t)return xn(this).info(`[${S}] connection ${re?"timed out":"failed"} - ${ee}`),xn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (${ee})`,Cr({retryOfRequestLogID:i,url:_,durationMs:K-H,message:k.message})),this.retryRequest(f,t,i??S);throw xn(this).info(`[${S}] connection ${re?"timed out":"failed"} - error; no more retries left`),xn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (error; no more retries left)`,Cr({retryOfRequestLogID:i,url:_,durationMs:K-H,message:k.message})),re?new XS:new lf({cause:k})}const B=`[${S}${w}] ${h.method} ${_} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${K-H}ms`;if(!k.ok){const ee=await this.shouldRetry(k);if(t&&ee){const R=`retrying, ${t} attempts remaining`;return await uP(k.body),xn(this).info(`${B} - ${R}`),xn(this).debug(`[${S}] response error (${R})`,Cr({retryOfRequestLogID:i,url:k.url,status:k.status,headers:k.headers,durationMs:K-H})),this.retryRequest(f,t,i??S,k.headers)}const re=ee?"error; no more retries left":"error; not retryable";xn(this).info(`${B} - ${re}`);const he=await k.text().catch(R=>Zp(R).message),fe=tP(he),M=fe?void 0:he;throw xn(this).debug(`[${S}] response error (${re})`,Cr({retryOfRequestLogID:i,url:k.url,status:k.status,headers:k.headers,message:M,durationMs:Date.now()-H})),this.makeStatusError(k.status,fe,M,k.headers)}return xn(this).info(B),xn(this).debug(`[${S}] response start`,Cr({retryOfRequestLogID:i,url:k.url,status:k.status,headers:k.headers,durationMs:K-H})),{response:k,options:f,controller:P,requestLogID:S,retryOfRequestLogID:i,startTime:H}}async fetchWithTimeout(e,t,i,r){const l=t||{},{signal:u,method:f}=l,g=kd(l,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);f&&(T.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var l;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await nP(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,l;const u=Object.assign({},e),{method:f,path:g,query:h,defaultBaseURL:_}=u,T=this.buildURL(g,h,_);"timeout"in u&&eP("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:u}),H=await this.buildHeaders({options:e,method:f,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:H},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=ou([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),rP()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=ou([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:lP(e)}:this.encoder({body:e,headers:i})}}cf.DEFAULT_TIMEOUT=6e4;class rn extends cf{constructor(){super(...arguments),this.interactions=new fA(this)}}pA=rn;rn.GeminiNextGenAPIClient=pA;rn.GeminiNextGenAPIClientError=Ei;rn.APIError=Rn;rn.APIConnectionError=lf;rn.APIConnectionTimeoutError=XS;rn.APIUserAbortError=em;rn.NotFoundError=eA;rn.ConflictError=tA;rn.RateLimitError=iA;rn.BadRequestError=WS;rn.AuthenticationError=jS;rn.InternalServerError=sA;rn.PermissionDeniedError=ZS;rn.UnprocessableEntityError=nA;rn.toFile=mP;rn.Interactions=fA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function RP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function NP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function MP(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function DP(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","batchSize"],f);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function PP(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec"],FT(w))}else if(r==="PREFERENCE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec"],FT(w))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const u=d(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=d(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let _=d(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(_==="PREFERENCE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=d(n,["beta"]);return e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function kP(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&KP(l);const u=d(n,["config"]);return u!=null&&DP(u,t),t}function VP(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&YP(l,t,e);const u=d(n,["config"]);return u!=null&&PP(u,t,e),t}function UP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function LP(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function OP(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function HP(n,e,t){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function BP(n,e){const t={},i=d(n,["config"]);return i!=null&&OP(i,t),t}function FP(n,e){const t={},i=d(n,["config"]);return i!=null&&HP(i,t),t}function GP(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>mA(f))),p(t,["tuningJobs"],u)}return t}function qP(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>im(f))),p(t,["tuningJobs"],u)}return t}function zP(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["model"],i);const r=d(n,["name"]);return r!=null&&p(t,["endpoint"],r),t}function KP(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>l)),p(t,["examples","examples"],r)}return t}function YP(n,e,t){const i={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function mA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],MS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["tuningTask","completeTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["description"]);_!=null&&p(t,["description"],_);const T=d(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const S=d(n,["_self"]);return S!=null&&p(t,["tunedModel"],zP(S)),t}function im(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],MS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["error"]);_!=null&&p(t,["error"],_);const T=d(n,["description"]);T!=null&&p(t,["description"],T);const S=d(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const w=d(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const H=d(n,["preTunedModel"]);H!=null&&p(t,["preTunedModel"],H);const P=d(n,["supervisedTuningSpec"]);P!=null&&p(t,["supervisedTuningSpec"],P);const k=d(n,["preferenceOptimizationSpec"]);k!=null&&p(t,["preferenceOptimizationSpec"],k);const K=d(n,["tuningDataStats"]);K!=null&&p(t,["tuningDataStats"],K);const B=d(n,["encryptionSpec"]);B!=null&&p(t,["encryptionSpec"],B);const ee=d(n,["partnerModelTuningSpec"]);ee!=null&&p(t,["partnerModelTuningSpec"],ee);const re=d(n,["customBaseModel"]);re!=null&&p(t,["customBaseModel"],re);const he=d(n,["experiment"]);he!=null&&p(t,["experiment"],he);const fe=d(n,["labels"]);fe!=null&&p(t,["labels"],fe);const M=d(n,["outputUri"]);M!=null&&p(t,["outputUri"],M);const N=d(n,["pipelineJob"]);N!=null&&p(t,["pipelineJob"],N);const R=d(n,["serviceAccount"]);R!=null&&p(t,["serviceAccount"],R);const O=d(n,["tunedModelDisplayName"]);O!=null&&p(t,["tunedModelDisplayName"],O);const U=d(n,["veoTuningSpec"]);return U!=null&&p(t,["veoTuningSpec"],U),t}function $P(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(n,["done"]);u!=null&&p(t,["done"],u);const f=d(n,["error"]);return f!=null&&p(t,["error"],f),t}function FT(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const r=d(n,["vertexDatasetResource"]);return r!=null&&p(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JP extends Xs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Vr(Ks.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Kp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=LP(e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>im(_))}else{const h=UP(e);return f=ye("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>mA(_))}}async listInternal(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=FP(e);return f=ye("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=qP(_),S=new hT;return Object.assign(S,T),S})}else{const h=BP(e);return f=ye("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=GP(_),S=new hT;return Object.assign(S,T),S})}}async cancel(e){var t,i,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=RP(e);return f=ye("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=MP(_),S=new pT;return Object.assign(S,T),S})}else{const h=xP(e);return f=ye("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=NP(_),S=new pT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=VP(e,e);return l=ye("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>im(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kP(e);return l=ye("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>$P(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QP{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const XP=1024*1024*8,WP=3,jP=1e3,ZP=2,Ud="x-goog-upload-status";async function ek(n,e,t){var i;const r=await gA(n,e,t),l=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ud])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function tk(n,e,t){var i;const r=await gA(n,e,t),l=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ud])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=bS(l),f=new km;return Object.assign(f,u),f}async function gA(n,e,t){var i,r;let l=0,u=0,f=new Yp(new Response),g="upload";for(l=n.size;u<l;){const h=Math.min(XP,l-u),_=n.slice(u,u+h);u+h>=l&&(g+=", finalize");let T=0,S=jP;for(;T<WP&&(f=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Ud]));)T++,await ik(S),S=S*ZP;if(u+=h,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[Ud])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function nk(n){return{size:n.size,type:n.type}}function ik(n){return new Promise(e=>setTimeout(e,n))}class sk{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ek(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tk(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nk(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ok{create(e,t,i){return new rk(e,t,i)}}class rk{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GT="x-goog-api-key";class ak{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(GT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lk="gl-node/";class uk{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new rn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=iR(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new ak(this.apiKey);this.apiClient=new n2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:lk+"web",uploader:new sk,downloader:new QP}),this.models=new E2(this.apiClient),this.live=new m2(this.apiClient,r,new ok),this.batches=new D1(this.apiClient),this.chats=new hN(this.models,this.apiClient),this.caches=new cN(this.apiClient),this.files=new AN(this.apiClient),this.operations=new S2(this.apiClient),this.authTokens=new O2(this.apiClient),this.tunings=new JP(this.apiClient),this.fileSearchStores=new Y2(this.apiClient)}}const Gm=n=>new uk({apiKey:n}),ck=async(n,e)=>{if(!e)return"Error: API Key is missing.";const t=Gm(e);try{return(await t.models.generateContent({model:"gemini-3-flash-preview",contents:JSON.stringify(n),config:{systemInstruction:Nm,temperature:.3}})).text||"Error: No response generated."}catch(i){return console.error("Error generating note:",i),"Error generating note. Please check the console for details."}},dk=async(n,e,t,i)=>{if(!i)return e;const r=Gm(i),l=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT MEDICAL NOTE DRAFT:
    """
    ${e}
    """
    
    USER REFINEMENT INSTRUCTION:
    "${t}"
    
    CRITICAL RULES:
    1. PRIORITY: Adhere to user instructions while maintaining the facts in the ORIGINAL DATA SOURCE.
    2. CONSISTENCY: Maintain all formatting rules (Vitals order, "denied" list, etc.) from the system instructions.
    3. OUTPUT: Provide ONLY the full updated medical note. No conversational filler.
  `;try{return(await r.models.generateContent({model:"gemini-3-flash-preview",contents:l,config:{systemInstruction:Nm,temperature:.4}})).text||e}catch(u){return console.error("Error refining full note:",u),e}},fk=async(n,e,t,i,r)=>{var f;if(!r)return t;const l=Gm(r),u=`
    You are a medical scribe assistant. 
    ORIGINAL DATA SOURCE (JSON): ${JSON.stringify(n)}
    
    CURRENT FULL NOTE:
    """
    ${e}
    """
    
    The user wants to rewrite the following SPECIFIC SEGMENT:
    "--- ${t} ---"
    
    USER INSTRUCTION FOR THIS SEGMENT:
    "${i}"
    
    CRITICAL RULES:
    1. PRIORITY: User instructions are the highest priority. If the user asks to change the format or tone for this segment, follow it exactly.
    2. MEDICAL STANDARDS: Unless the user explicitly asks to break medical conventions, maintain the standards defined in the original system instructions (e.g., Vitals order, forbidden abbreviations, academic tone).
    3. SCOPE: ONLY rewrite the selected segment. Do not change parts of the note outside of this segment.
    4. OUTPUT: Provide ONLY the new rewritten text for that segment. Do not include any explanations or conversational filler.
  `;try{return((f=(await l.models.generateContent({model:"gemini-3-flash-preview",contents:u,config:{systemInstruction:Nm,temperature:.4}})).text)==null?void 0:f.trim())||t}catch(g){return console.error("Error refining segment:",g),t}},hk=()=>{};var qT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},pk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[i++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],u=n[t++],f=n[t++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},vA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const l=n[r],u=r+1<n.length,f=u?n[r+1]:0,g=r+2<n.length,h=g?n[r+2]:0,_=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|h>>6,w=h&63;g||(w=64,u||(S=64)),i.push(t[_],t[T],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||f==null||h==null||T==null)throw new mk;const S=l<<2|f>>4;if(i.push(S),h!==64){const w=f<<4&240|h>>2;if(i.push(w),T!==64){const H=h<<6&192|T;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class mk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gk=function(n){const e=yA(n);return vA.encodeByteArray(e,!0)},Ld=function(n){return gk(n).replace(/\./g,"")},_A=function(n){try{return vA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=()=>yk().__FIREBASE_DEFAULTS__,_k=()=>{if(typeof process>"u"||typeof qT>"u")return;const n=qT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Tk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&_A(n[1]);return e&&JSON.parse(e)},df=()=>{try{return hk()||vk()||_k()||Tk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},TA=n=>{var e,t;return(t=(e=df())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Ek=n=>{const e=TA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},EA=()=>{var n;return(n=df())==null?void 0:n.config},SA=n=>{var e;return(e=df())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function AA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ld(JSON.stringify(t)),Ld(JSON.stringify(u)),""].join(".")}const hu={};function Ck(){const n={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?n.emulator.push(e):n.prod.push(e);return n}function bk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zT=!1;function CA(n,e){if(typeof window>"u"||typeof document>"u"||!ja(window.location.host)||hu[n]===e||hu[n]||zT)return;hu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=Ck().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{zT=!0,u()},S}function _(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=bk(i),w=t("text"),H=document.getElementById(w)||document.createElement("span"),P=t("learnmore"),k=document.getElementById(P)||document.createElement("a"),K=t("preprendIcon"),B=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;f(ee),_(k,P);const re=h();g(B,K),ee.append(B,H,k,re),document.body.appendChild(ee)}l?(H.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function Ik(){var e;const n=(e=df())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Nk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mk(){const n=Cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Dk(){return!Ik()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pk(){try{return typeof indexedDB=="object"}catch{return!1}}function kk(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="FirebaseError";class js extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Vk,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?Uk(l,i):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new js(r,f,i)}}function Uk(n,e){return n.replace(Lk,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Lk=/\{\$([^}]+)}/g;function Ok(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Nr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const l=n[r],u=e[r];if(KT(l)&&KT(u)){if(!Nr(l,u))return!1}else if(l!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function KT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hk(n,e){const t=new Bk(n,e);return t.subscribe.bind(t)}class Bk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Fk(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Mp),r.error===void 0&&(r.error=Mp),r.complete===void 0&&(r.complete=Mp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(n){return n&&n._delegate?n._delegate:n}class Mr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Sk;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zk(e))try{this.getOrInitializeService({instanceIdentifier:br})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});i.resolve(l)}catch{}}}}clearInstance(e=br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=br){return this.instances.has(e)}getOptions(e=br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const l=this.instances.get(i);return l&&e(l,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:qk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=br){return this.component?this.component.multipleInstances?e:br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qk(n){return n===br?void 0:n}function zk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Gk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(We||(We={}));const Yk={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},$k=We.INFO,Jk={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},Qk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Jk[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qm{constructor(e){this.name=e,this._logLevel=$k,this._logHandler=Qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const Xk=(n,e)=>e.some(t=>n instanceof t);let YT,$T;function Wk(){return YT||(YT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jk(){return $T||($T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bA=new WeakMap,sm=new WeakMap,wA=new WeakMap,Dp=new WeakMap,zm=new WeakMap;function Zk(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Oo(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&bA.set(t,n)}).catch(()=>{}),zm.set(e,n),e}function eV(n){if(sm.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});sm.set(n,e)}let om={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tV(n){om=n(om)}function nV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Pp(this),e,...t);return wA.set(i,e.sort?e.sort():[e]),Oo(i)}:jk().includes(n)?function(...e){return n.apply(Pp(this),e),Oo(bA.get(this))}:function(...e){return Oo(n.apply(Pp(this),e))}}function iV(n){return typeof n=="function"?nV(n):(n instanceof IDBTransaction&&eV(n),Xk(n,Wk())?new Proxy(n,om):n)}function Oo(n){if(n instanceof IDBRequest)return Zk(n);if(Dp.has(n))return Dp.get(n);const e=iV(n);return e!==n&&(Dp.set(n,e),zm.set(e,n)),e}const Pp=n=>zm.get(n);function sV(n,e,{blocked:t,upgrade:i,blocking:r,terminated:l}={}){const u=indexedDB.open(n,e),f=Oo(u);return i&&u.addEventListener("upgradeneeded",g=>{i(Oo(u.result),g.oldVersion,g.newVersion,Oo(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const oV=["get","getKey","getAll","getAllKeys","count"],rV=["put","add","delete","clear"],kp=new Map;function JT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(kp.get(e))return kp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=rV.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||oV.includes(t)))return;const l=async function(u,...f){const g=this.transaction(u,r?"readwrite":"readonly");let h=g.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),r&&g.done]))[0]};return kp.set(e,l),l}tV(n=>({...n,get:(e,t,i)=>JT(e,t)||n.get(e,t,i),has:(e,t)=>!!JT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lV(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function lV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rm="@firebase/app",QT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new qm("@firebase/app"),uV="@firebase/app-compat",cV="@firebase/analytics-compat",dV="@firebase/analytics",fV="@firebase/app-check-compat",hV="@firebase/app-check",pV="@firebase/auth",mV="@firebase/auth-compat",gV="@firebase/database",yV="@firebase/data-connect",vV="@firebase/database-compat",_V="@firebase/functions",TV="@firebase/functions-compat",EV="@firebase/installations",SV="@firebase/installations-compat",AV="@firebase/messaging",CV="@firebase/messaging-compat",bV="@firebase/performance",wV="@firebase/performance-compat",IV="@firebase/remote-config",xV="@firebase/remote-config-compat",RV="@firebase/storage",NV="@firebase/storage-compat",MV="@firebase/firestore",DV="@firebase/ai",PV="@firebase/firestore-compat",kV="firebase",VV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="[DEFAULT]",UV={[rm]:"fire-core",[uV]:"fire-core-compat",[dV]:"fire-analytics",[cV]:"fire-analytics-compat",[hV]:"fire-app-check",[fV]:"fire-app-check-compat",[pV]:"fire-auth",[mV]:"fire-auth-compat",[gV]:"fire-rtdb",[yV]:"fire-data-connect",[vV]:"fire-rtdb-compat",[_V]:"fire-fn",[TV]:"fire-fn-compat",[EV]:"fire-iid",[SV]:"fire-iid-compat",[AV]:"fire-fcm",[CV]:"fire-fcm-compat",[bV]:"fire-perf",[wV]:"fire-perf-compat",[IV]:"fire-rc",[xV]:"fire-rc-compat",[RV]:"fire-gcs",[NV]:"fire-gcs-compat",[MV]:"fire-fst",[PV]:"fire-fst-compat",[DV]:"fire-vertex","fire-js":"fire-js",[kV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new Map,LV=new Map,lm=new Map;function XT(n,e){try{n.container.addComponent(e)}catch(t){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fa(n){const e=n.name;if(lm.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;lm.set(e,n);for(const t of Od.values())XT(t,n);for(const t of LV.values())XT(t,n);return!0}function Km(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ho=new Nu("app","Firebase",OV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=VV;function IA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:am,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Ho.create("bad-app-name",{appName:String(r)});if(t||(t=EA()),!t)throw Ho.create("no-options");const l=Od.get(r);if(l){if(Nr(t,l.options)&&Nr(i,l.config))return l;throw Ho.create("duplicate-app",{appName:r})}const u=new Kk(r);for(const g of lm.values())u.addComponent(g);const f=new HV(t,i,u);return Od.set(r,f),f}function xA(n=am){const e=Od.get(n);if(!e&&n===am&&EA())return IA();if(!e)throw Ho.create("no-app",{appName:n});return e}function Bo(n,e,t){let i=UV[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(u.join(" "));return}Fa(new Mr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="firebase-heartbeat-database",FV=1,Tu="firebase-heartbeat-store";let Vp=null;function RA(){return Vp||(Vp=sV(BV,FV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Tu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ho.create("idb-open",{originalErrorMessage:n.message})})),Vp}async function GV(n){try{const t=(await RA()).transaction(Tu),i=await t.objectStore(Tu).get(NA(n));return await t.done,i}catch(e){if(e instanceof js)Ys.warn(e.message);else{const t=Ho.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ys.warn(t.message)}}}async function WT(n,e){try{const i=(await RA()).transaction(Tu,"readwrite");await i.objectStore(Tu).put(e,NA(n)),await i.done}catch(t){if(t instanceof js)Ys.warn(t.message);else{const i=Ho.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ys.warn(i.message)}}}function NA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=1024,zV=30;class KV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $V(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=jT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>zV){const u=JV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ys.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jT(),{heartbeatsToSend:i,unsentEntries:r}=YV(this._heartbeatsCache.heartbeats),l=Ld(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ys.warn(t),""}}}function jT(){return new Date().toISOString().substring(0,10)}function YV(n,e=qV){const t=[];let i=n.slice();for(const r of n){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),ZT(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),ZT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class $V{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pk()?kk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return WT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return WT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ZT(n){return Ld(JSON.stringify({version:2,heartbeats:n})).length}function JV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(n){Fa(new Mr("platform-logger",e=>new aV(e),"PRIVATE")),Fa(new Mr("heartbeat",e=>new KV(e),"PRIVATE")),Bo(rm,QT,n),Bo(rm,QT,"esm2020"),Bo("fire-js","")}QV("");function MA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XV=MA,DA=new Nu("auth","Firebase",MA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new qm("@firebase/auth");function WV(n,...e){Hd.logLevel<=We.WARN&&Hd.warn(`Auth (${Za}): ${n}`,...e)}function _d(n,...e){Hd.logLevel<=We.ERROR&&Hd.error(`Auth (${Za}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(n,...e){throw $m(n,...e)}function Bi(n,...e){return $m(n,...e)}function Ym(n,e,t){const i={...XV(),[e]:t};return new Nu("auth","Firebase",i).create(e,{appName:n.name})}function xr(n){return Ym(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jV(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&fs(n,"argument-error"),Ym(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $m(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return DA.create(n,...e)}function Pe(n,e,...t){if(!n)throw $m(e,...t)}function Gs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _d(e),new Error(e)}function $s(n,e){n||Gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function ZV(){return eE()==="http:"||eE()==="https:"}function eE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZV()||Rk()||"connection"in navigator)?navigator.onLine:!0}function tU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t){this.shortDelay=e,this.longDelay=t,$s(t>e,"Short delay should be less than long delay!"),this.isMobile=wk()||Nk()}get(){return eU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(n,e){$s(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sU=new Du(3e4,6e4);function Qm(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function el(n,e,t,i,r={}){return kA(n,r,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=Mu({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:g,...l};return xk()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&ja(n.emulatorConfig.host)&&(h.credentials="include"),PA.fetch()(await VA(n,n.config.apiHost,t,f),h)})}async function kA(n,e,t){n._canInitEmulator=!1;const i={...nU,...e};try{const r=new rU(n),l=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw cd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[g,h]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw cd(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw cd(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw cd(n,"user-disabled",u);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Ym(n,_,h);fs(n,_)}}catch(r){if(r instanceof js)throw r;fs(n,"network-request-failed",{message:String(r)})}}async function oU(n,e,t,i,r={}){const l=await el(n,e,t,i,r);return"mfaPendingCredential"in l&&fs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function VA(n,e,t,i){const r=`${e}${t}?${i}`,l=n,u=l.config.emulator?Jm(n.config,r):`${n.config.apiScheme}://${r}`;return iU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class rU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Bi(this.auth,"network-request-failed")),sU.get())})}}function cd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Bi(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(n,e){return el(n,"POST","/v1/accounts:delete",e)}async function Bd(n,e){return el(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lU(n,e=!1){const t=jn(n),i=await t.getIdToken(e),r=Xm(i);Pe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const l=typeof r.firebase=="object"?r.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:r,token:i,authTime:pu(Up(r.auth_time)),issuedAtTime:pu(Up(r.iat)),expirationTime:pu(Up(r.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Up(n){return Number(n)*1e3}function Xm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _d("JWT malformed, contained fewer than 3 sections"),null;try{const r=_A(t);return r?JSON.parse(r):(_d("Failed to decode base64 JWT payload"),null)}catch(r){return _d("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function tE(n){const e=Xm(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof js&&uU(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function uU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(n){var T;const e=n.auth,t=await n.getIdToken(),i=await Eu(n,Bd(e,{idToken:t}));Pe(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const l=(T=r.providerUserInfo)!=null&&T.length?UA(r.providerUserInfo):[],u=fU(n.providerData,l),f=n.isAnonymous,g=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),h=f?g:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new cm(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function dU(n){const e=jn(n);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fU(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function UA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(n,e){const t=await kA(n,{},async()=>{const i=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:l}=n.config,u=await VA(n,r,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return n.emulatorConfig&&ja(n.emulatorConfig.host)&&(g.credentials="include"),PA.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pU(n,e){return el(n,"POST","/v2/accounts:revokeToken",Qm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=tE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:l}=await hU(e,t);this.updateTokensAndExpiration(i,r,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:l}=t,u=new Ua;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(Pe(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),l&&(Pe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return Gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ui{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new cU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new cm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Eu(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lU(this,e)}reload(){return dU(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ui({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Fd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await Eu(this,aU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:w,providerData:H,stsTokenManager:P}=t;Pe(T&&P,e,"internal-error");const k=Ua.fromJSON(this.name,P);Pe(typeof T=="string",e,"internal-error"),Do(i,e.name),Do(r,e.name),Pe(typeof S=="boolean",e,"internal-error"),Pe(typeof w=="boolean",e,"internal-error"),Do(l,e.name),Do(u,e.name),Do(f,e.name),Do(g,e.name),Do(h,e.name),Do(_,e.name);const K=new Ui({uid:T,auth:e,email:r,emailVerified:S,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:k,createdAt:h,lastLoginAt:_});return H&&Array.isArray(H)&&(K.providerData=H.map(B=>({...B}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,i=!1){const r=new Ua;r.updateFromServerResponse(t);const l=new Ui({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Fd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Pe(r.localId!==void 0,"internal-error");const l=r.providerUserInfo!==void 0?UA(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(l!=null&&l.length),f=new Ua;f.updateFromIdToken(i);const g=new Ui({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new cm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,h),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;function qs(n){$s(n instanceof Function,"Expected a class definition");let e=nE.get(n);return e?($s(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LA.type="NONE";const iE=LA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(n,e,t){return`firebase:${n}:${e}:${t}`}class La{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:l}=this.auth;this.fullUserKey=Td(this.userKey,r.apiKey,l),this.fullPersistenceKey=Td("persistence",r.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Bd(this.auth,{idToken:e}).catch(()=>{});return t?Ui._fromGetAccountInfoResponse(this.auth,t,e):null}return Ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new La(qs(iE),e,i);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let l=r[0]||qs(iE);const u=Td(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const _=await h._get(u);if(_){let T;if(typeof _=="string"){const S=await Bd(e,{idToken:_}).catch(()=>{});if(!S)break;T=await Ui._fromGetAccountInfoResponse(e,S,_)}else T=Ui._fromJSON(e,_);h!==l&&(f=T),l=h;break}}catch{}const g=r.filter(h=>h._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new La(l,e,i):(l=g[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==l)try{await h._remove(u)}catch{}})),new La(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qA(e))return"Blackberry";if(zA(e))return"Webos";if(HA(e))return"Safari";if((e.includes("chrome/")||BA(e))&&!e.includes("edge/"))return"Chrome";if(GA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OA(n=Cn()){return/firefox\//i.test(n)}function HA(n=Cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BA(n=Cn()){return/crios\//i.test(n)}function FA(n=Cn()){return/iemobile/i.test(n)}function GA(n=Cn()){return/android/i.test(n)}function qA(n=Cn()){return/blackberry/i.test(n)}function zA(n=Cn()){return/webos/i.test(n)}function Wm(n=Cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mU(n=Cn()){var e;return Wm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function gU(){return Mk()&&document.documentMode===10}function KA(n=Cn()){return Wm(n)||GA(n)||zA(n)||qA(n)||/windows phone/i.test(n)||FA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n,e=[]){let t;switch(n){case"Browser":t=sE(Cn());break;case"Worker":t=`${sE(Cn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Za}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const g=e(l);u(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(n,e={}){return el(n,"GET","/v2/passwordPolicy",Qm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=6;class TU{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_U,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oE(this),this.idTokenSubscription=new oE(this),this.beforeStateQueue=new yU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qs(t)),this._initializationPromise=this.queue(async()=>{var i,r,l;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Bd(this,{idToken:e}),i=await Ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Vi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===f)&&(g!=null&&g.user)&&(i=g.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vi(this.app))return Promise.reject(xr(this));const t=e?jn(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vi(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vU(this),t=new TU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await pU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qs(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[qs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,r);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&WV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ff(n){return jn(n)}class oE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hk(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SU(n){jm=n}function AU(n){return jm.loadJS(n)}function CU(){return jm.gapiScript}function bU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(n,e){const t=Km(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),l=t.getOptions();if(Nr(l,e??{}))return r;fs(r,"already-initialized")}return t.initialize({options:e})}function IU(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(qs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function xU(n,e,t){const i=ff(n);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,l=$A(e),{host:u,port:f}=RU(e),g=f===null?"":`:${f}`,h={url:`${l}//${u}${g}/`},_=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe(Nr(h,i.config.emulator)&&Nr(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,ja(u)?(AA(`${l}//${u}${g}`),CA("Auth",!0)):NU()}function $A(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function RU(n){const e=$A(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const l=r[1];return{host:l,port:rE(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:rE(u)}}}function rE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function NU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gs("not implemented")}_getIdTokenResponse(e){return Gs("not implemented")}_linkToIdToken(e,t){return Gs("not implemented")}_getReauthenticationResolver(e){return Gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(n,e){return oU(n,"POST","/v1/accounts:signInWithIdp",Qm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="http://localhost";class Dr extends JA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...l}=t;if(!i||!r)return null;const u=new Dr(i,r);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Oa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Oa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oa(e,t)}buildRequest(){const e={requestUri:MU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends Zm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Pu{constructor(){super("facebook.com")}static credential(e){return Dr._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.FACEBOOK_SIGN_IN_METHOD="facebook.com";Po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Dr._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Fs.credential(t,i)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Pu{constructor(){super("github.com")}static credential(e){return Dr._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ko.credential(e.oauthAccessToken)}catch{return null}}}ko.GITHUB_SIGN_IN_METHOD="github.com";ko.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends Pu{constructor(){super("twitter.com")}static credential(e,t){return Dr._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Vo.credential(t,i)}catch{return null}}}Vo.TWITTER_SIGN_IN_METHOD="twitter.com";Vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const l=await Ui._fromIdTokenResponse(e,i,r),u=aE(i);return new Ga({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=aE(i);return new Ga({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function aE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends js{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Gd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Gd(e,t,i,r)}}function QA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Gd._fromErrorAndOperation(n,l,e,i):l})}async function DU(n,e,t=!1){const i=await Eu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ga._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e,t=!1){const{auth:i}=n;if(Vi(i.app))return Promise.reject(xr(i));const r="reauthenticate";try{const l=await Eu(n,QA(i,r,e,n),t);Pe(l.idToken,i,"internal-error");const u=Xm(l.idToken);Pe(u,i,"internal-error");const{sub:f}=u;return Pe(n.uid===f,i,"user-mismatch"),Ga._forOperation(n,r,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&fs(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(n,e,t=!1){if(Vi(n.app))return Promise.reject(xr(n));const i="signIn",r=await QA(n,i,e),l=await Ga._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(l.user),l}function VU(n,e,t,i){return jn(n).onIdTokenChanged(e,t,i)}function UU(n,e,t){return jn(n).beforeAuthStateChanged(e,t)}function LU(n,e,t,i){return jn(n).onAuthStateChanged(e,t,i)}function OU(n){return jn(n).signOut()}const qd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qd,"1"),this.storage.removeItem(qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=1e3,BU=10;class WA extends XA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,g)=>{this.notifyListeners(u,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);gU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,BU):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},HU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WA.type="LOCAL";const FU=WA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends XA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jA.type="SESSION";const ZA=jA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new hf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:l}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const f=Array.from(u).map(async h=>h(t.origin,l)),g=await GU(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let l,u;return new Promise((f,g)=>{const h=eg("",20);r.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(){return window}function zU(n){as().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(){return typeof as().WorkerGlobalScope<"u"&&typeof as().importScripts=="function"}async function KU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function $U(){return eC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebaseLocalStorageDb",JU=1,zd="firebaseLocalStorage",nC="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pf(n,e){return n.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function QU(){const n=indexedDB.deleteDatabase(tC);return new ku(n).toPromise()}function dm(){const n=indexedDB.open(tC,JU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(zd,{keyPath:nC})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(zd)?e(i):(i.close(),await QU(),e(await dm()))})})}async function lE(n,e,t){const i=pf(n,!0).put({[nC]:e,value:t});return new ku(i).toPromise()}async function XU(n,e){const t=pf(n,!1).get(e),i=await new ku(t).toPromise();return i===void 0?null:i.value}function uE(n,e){const t=pf(n,!0).delete(e);return new ku(t).toPromise()}const WU=800,jU=3;class iC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>jU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hf._getInstance($U()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await KU(),!this.activeServiceWorker)return;this.sender=new qU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dm();return await lE(e,qd,"1"),await uE(e,qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>lE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>XU(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const l=pf(r,!1).getAll();return new ku(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:l}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(l)&&(this.notifyListeners(r,l),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iC.type="LOCAL";const ZU=iC;new Du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(n,e){return e?qs(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends JA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eL(n){return kU(n.auth,new tg(n),n.bypassAuthState)}function tL(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),PU(t,new tg(n),n.bypassAuthState)}async function nL(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),DU(t,new tg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t,i,r,l=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eL;case"linkViaPopup":case"linkViaRedirect":return nL;case"reauthViaPopup":case"reauthViaRedirect":return tL;default:fs(this.auth,"internal-error")}}resolve(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new Du(2e3,1e4);async function sL(n,e,t){if(Vi(n.app))return Promise.reject(Bi(n,"operation-not-supported-in-this-environment"));const i=ff(n);jV(n,e,Zm);const r=sC(i,t);return new wr(i,"signInViaPopup",e,r).executeNotNull()}class wr extends oC{constructor(e,t,i,r,l){super(e,t,r,l),this.provider=i,this.authWindow=null,this.pollId=null,wr.currentPopupAction&&wr.currentPopupAction.cancel(),wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){$s(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iL.get())};e()}}wr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="pendingRedirect",Ed=new Map;class rL extends oC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ed.get(this.auth._key());if(!e){try{const i=await aL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ed.set(this.auth._key(),e)}return this.bypassAuthState||Ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aL(n,e){const t=cL(e),i=uL(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function lL(n,e){Ed.set(n._key(),e)}function uL(n){return qs(n._redirectPersistence)}function cL(n){return Td(oL,n.config.apiKey,n.name)}async function dL(n,e,t=!1){if(Vi(n.app))return Promise.reject(xr(n));const i=ff(n),r=sC(i,e),u=await new rL(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=600*1e3;class hL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!rC(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Bi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fL&&this.cachedEventUids.clear(),this.cachedEventUids.has(cE(e))}saveEventToCache(e){this.cachedEventUids.add(cE(e)),this.lastProcessedEventTime=Date.now()}}function cE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function rC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(n,e={}){return el(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yL=/^https?/;async function vL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mL(n);for(const t of e)try{if(_L(t))return}catch{}fs(n,"unauthorized-domain")}function _L(n){const e=um(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!yL.test(t))return!1;if(gL.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Du(3e4,6e4);function dE(){const n=as().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function EL(n){return new Promise((e,t)=>{var r,l,u;function i(){dE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dE(),t(Bi(n,"network-request-failed"))},timeout:TL.get()})}if((l=(r=as().gapi)==null?void 0:r.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=as().gapi)!=null&&u.load)i();else{const f=bU("iframefcb");return as()[f]=()=>{gapi.load?i():t(Bi(n,"network-request-failed"))},AU(`${CU()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function SL(n){return Sd=Sd||EL(n),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new Du(5e3,15e3),CL="__/auth/iframe",bL="emulator/auth/iframe",wL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xL(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Jm(e,bL):`https://${n.config.authDomain}/${CL}`,i={apiKey:e.apiKey,appName:n.name,v:Za},r=IL.get(n.config.apiHost);r&&(i.eid=r);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Mu(i).slice(1)}`}async function RL(n){const e=await SL(n),t=as().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:xL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wL,dontclear:!0},i=>new Promise(async(r,l)=>{await i.restyle({setHideOnLeave:!1});const u=Bi(n,"network-request-failed"),f=as().setTimeout(()=>{l(u)},AL.get());function g(){as().clearTimeout(f),r(i)}i.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ML=500,DL=600,PL="_blank",kL="http://localhost";class fE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VL(n,e,t,i=ML,r=DL){const l=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...NL,width:i.toString(),height:r.toString(),top:l,left:u},h=Cn().toLowerCase();t&&(f=BA(h)?PL:t),OA(h)&&(e=e||kL,g.scrollbars="yes");const _=Object.entries(g).reduce((S,[w,H])=>`${S}${w}=${H},`,"");if(mU(h)&&f!=="_self")return UL(e||"",f),new fE(null);const T=window.open(e||"",f,_);Pe(T,n,"popup-blocked");try{T.focus()}catch{}return new fE(T)}function UL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="__/auth/handler",OL="emulator/auth/handler",HL=encodeURIComponent("fac");async function hE(n,e,t,i,r,l){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Za,eventId:r};if(e instanceof Zm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Ok(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))u[_]=T}if(e instanceof Pu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const g=await n._getAppCheckToken(),h=g?`#${HL}=${encodeURIComponent(g)}`:"";return`${BL(n)}?${Mu(f).slice(1)}${h}`}function BL({config:n}){return n.emulator?Jm(n,OL):`https://${n.authDomain}/${LL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="webStorageSupport";class FL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZA,this._completeRedirectFn=dL,this._overrideRedirectResult=lL}async _openPopup(e,t,i,r){var u;$s((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await hE(e,t,i,um(),r);return VL(e,l,eg())}async _openRedirect(e,t,i,r){await this._originValidation(e);const l=await hE(e,t,i,um(),r);return zU(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:l}=this.eventManagers[t];return r?Promise.resolve(r):($s(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await RL(e),i=new hL(e);return t.register("authEvent",r=>(Pe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lp,{type:Lp},r=>{var u;const l=(u=r==null?void 0:r[0])==null?void 0:u[Lp];l!==void 0&&t(!!l),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KA()||HA()||Wm()}}const GL=FL;var pE="@firebase/auth",mE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KL(n){Fa(new Mr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Pe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YA(n)},h=new EU(i,r,l,g);return IU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Fa(new Mr("auth-internal",e=>{const t=ff(e.getProvider("auth").getImmediate());return(i=>new qL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bo(pE,mE,zL(n)),Bo(pE,mE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=300,$L=SA("authIdTokenMaxAge")||YL;let gE=null;const JL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>$L)return;const r=t==null?void 0:t.token;gE!==r&&(gE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function QL(n=xA()){const e=Km(n,"auth");if(e.isInitialized())return e.getImmediate();const t=wU(n,{popupRedirectResolver:GL,persistence:[ZU,FU,ZA]}),i=SA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=JL(l.toString());UU(t,u,()=>u(t.currentUser)),VU(t,f=>u(f))}}const r=TA("auth");return r&&xU(t,`http://${r}`),t}function XL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}SU({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const l=Bi("internal-error");l.customData=r,t(l)},i.type="text/javascript",i.charset="UTF-8",XL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KL("Browser");var yE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fo,aC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function R(){}R.prototype=N.prototype,M.F=N.prototype,M.prototype=new R,M.prototype.constructor=M,M.D=function(O,U,q){for(var D=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)D[Ge-2]=arguments[Ge];return N.prototype[U].apply(O,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,N,R){R||(R=0);const O=Array(16);if(typeof N=="string")for(var U=0;U<16;++U)O[U]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(U=0;U<16;++U)O[U]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=M.g[0],R=M.g[1],U=M.g[2];let q=M.g[3],D;D=N+(q^R&(U^q))+O[0]+3614090360&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(U^N&(R^U))+O[1]+3905402710&4294967295,q=N+(D<<12&4294967295|D>>>20),D=U+(R^q&(N^R))+O[2]+606105819&4294967295,U=q+(D<<17&4294967295|D>>>15),D=R+(N^U&(q^N))+O[3]+3250441966&4294967295,R=U+(D<<22&4294967295|D>>>10),D=N+(q^R&(U^q))+O[4]+4118548399&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(U^N&(R^U))+O[5]+1200080426&4294967295,q=N+(D<<12&4294967295|D>>>20),D=U+(R^q&(N^R))+O[6]+2821735955&4294967295,U=q+(D<<17&4294967295|D>>>15),D=R+(N^U&(q^N))+O[7]+4249261313&4294967295,R=U+(D<<22&4294967295|D>>>10),D=N+(q^R&(U^q))+O[8]+1770035416&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(U^N&(R^U))+O[9]+2336552879&4294967295,q=N+(D<<12&4294967295|D>>>20),D=U+(R^q&(N^R))+O[10]+4294925233&4294967295,U=q+(D<<17&4294967295|D>>>15),D=R+(N^U&(q^N))+O[11]+2304563134&4294967295,R=U+(D<<22&4294967295|D>>>10),D=N+(q^R&(U^q))+O[12]+1804603682&4294967295,N=R+(D<<7&4294967295|D>>>25),D=q+(U^N&(R^U))+O[13]+4254626195&4294967295,q=N+(D<<12&4294967295|D>>>20),D=U+(R^q&(N^R))+O[14]+2792965006&4294967295,U=q+(D<<17&4294967295|D>>>15),D=R+(N^U&(q^N))+O[15]+1236535329&4294967295,R=U+(D<<22&4294967295|D>>>10),D=N+(U^q&(R^U))+O[1]+4129170786&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^U&(N^R))+O[6]+3225465664&4294967295,q=N+(D<<9&4294967295|D>>>23),D=U+(N^R&(q^N))+O[11]+643717713&4294967295,U=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(U^q))+O[0]+3921069994&4294967295,R=U+(D<<20&4294967295|D>>>12),D=N+(U^q&(R^U))+O[5]+3593408605&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^U&(N^R))+O[10]+38016083&4294967295,q=N+(D<<9&4294967295|D>>>23),D=U+(N^R&(q^N))+O[15]+3634488961&4294967295,U=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(U^q))+O[4]+3889429448&4294967295,R=U+(D<<20&4294967295|D>>>12),D=N+(U^q&(R^U))+O[9]+568446438&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^U&(N^R))+O[14]+3275163606&4294967295,q=N+(D<<9&4294967295|D>>>23),D=U+(N^R&(q^N))+O[3]+4107603335&4294967295,U=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(U^q))+O[8]+1163531501&4294967295,R=U+(D<<20&4294967295|D>>>12),D=N+(U^q&(R^U))+O[13]+2850285829&4294967295,N=R+(D<<5&4294967295|D>>>27),D=q+(R^U&(N^R))+O[2]+4243563512&4294967295,q=N+(D<<9&4294967295|D>>>23),D=U+(N^R&(q^N))+O[7]+1735328473&4294967295,U=q+(D<<14&4294967295|D>>>18),D=R+(q^N&(U^q))+O[12]+2368359562&4294967295,R=U+(D<<20&4294967295|D>>>12),D=N+(R^U^q)+O[5]+4294588738&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^U)+O[8]+2272392833&4294967295,q=N+(D<<11&4294967295|D>>>21),D=U+(q^N^R)+O[11]+1839030562&4294967295,U=q+(D<<16&4294967295|D>>>16),D=R+(U^q^N)+O[14]+4259657740&4294967295,R=U+(D<<23&4294967295|D>>>9),D=N+(R^U^q)+O[1]+2763975236&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^U)+O[4]+1272893353&4294967295,q=N+(D<<11&4294967295|D>>>21),D=U+(q^N^R)+O[7]+4139469664&4294967295,U=q+(D<<16&4294967295|D>>>16),D=R+(U^q^N)+O[10]+3200236656&4294967295,R=U+(D<<23&4294967295|D>>>9),D=N+(R^U^q)+O[13]+681279174&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^U)+O[0]+3936430074&4294967295,q=N+(D<<11&4294967295|D>>>21),D=U+(q^N^R)+O[3]+3572445317&4294967295,U=q+(D<<16&4294967295|D>>>16),D=R+(U^q^N)+O[6]+76029189&4294967295,R=U+(D<<23&4294967295|D>>>9),D=N+(R^U^q)+O[9]+3654602809&4294967295,N=R+(D<<4&4294967295|D>>>28),D=q+(N^R^U)+O[12]+3873151461&4294967295,q=N+(D<<11&4294967295|D>>>21),D=U+(q^N^R)+O[15]+530742520&4294967295,U=q+(D<<16&4294967295|D>>>16),D=R+(U^q^N)+O[2]+3299628645&4294967295,R=U+(D<<23&4294967295|D>>>9),D=N+(U^(R|~q))+O[0]+4096336452&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~U))+O[7]+1126891415&4294967295,q=N+(D<<10&4294967295|D>>>22),D=U+(N^(q|~R))+O[14]+2878612391&4294967295,U=q+(D<<15&4294967295|D>>>17),D=R+(q^(U|~N))+O[5]+4237533241&4294967295,R=U+(D<<21&4294967295|D>>>11),D=N+(U^(R|~q))+O[12]+1700485571&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~U))+O[3]+2399980690&4294967295,q=N+(D<<10&4294967295|D>>>22),D=U+(N^(q|~R))+O[10]+4293915773&4294967295,U=q+(D<<15&4294967295|D>>>17),D=R+(q^(U|~N))+O[1]+2240044497&4294967295,R=U+(D<<21&4294967295|D>>>11),D=N+(U^(R|~q))+O[8]+1873313359&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~U))+O[15]+4264355552&4294967295,q=N+(D<<10&4294967295|D>>>22),D=U+(N^(q|~R))+O[6]+2734768916&4294967295,U=q+(D<<15&4294967295|D>>>17),D=R+(q^(U|~N))+O[13]+1309151649&4294967295,R=U+(D<<21&4294967295|D>>>11),D=N+(U^(R|~q))+O[4]+4149444226&4294967295,N=R+(D<<6&4294967295|D>>>26),D=q+(R^(N|~U))+O[11]+3174756917&4294967295,q=N+(D<<10&4294967295|D>>>22),D=U+(N^(q|~R))+O[2]+718787259&4294967295,U=q+(D<<15&4294967295|D>>>17),D=R+(q^(U|~N))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+U&4294967295,M.g[3]=M.g[3]+q&4294967295}i.prototype.v=function(M,N){N===void 0&&(N=M.length);const R=N-this.blockSize,O=this.C;let U=this.h,q=0;for(;q<N;){if(U==0)for(;q<=R;)r(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<N;)if(O[U++]=M.charCodeAt(q++),U==this.blockSize){r(this,O),U=0;break}}else for(;q<N;)if(O[U++]=M[q++],U==this.blockSize){r(this,O),U=0;break}}this.h=U,this.o+=N},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;N=this.o*8;for(var R=M.length-8;R<M.length;++R)M[R]=N&255,N/=256;for(this.v(M),M=Array(16),N=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)M[N++]=this.g[R]>>>O&255;return M};function l(M,N){var R=f;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=N(M)}function u(M,N){this.h=N;const R=[];let O=!0;for(let U=M.length-1;U>=0;U--){const q=M[U]|0;O&&q==N||(R[U]=q,O=!1)}this.g=R}var f={};function g(M){return-128<=M&&M<128?l(M,function(N){return new u([N|0],N<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return k(h(-M));const N=[];let R=1;for(let O=0;M>=R;O++)N[O]=M/R|0,R*=4294967296;return new u(N,0)}function _(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return k(_(M.substring(1),N));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(N,8));let O=T;for(let q=0;q<M.length;q+=8){var U=Math.min(8,M.length-q);const D=parseInt(M.substring(q,q+U),N);U<8?(U=h(Math.pow(N,U)),O=O.j(U).add(h(D))):(O=O.j(R),O=O.add(h(D)))}return O}var T=g(0),S=g(1),w=g(16777216);n=u.prototype,n.m=function(){if(P(this))return-k(this).m();let M=0,N=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);M+=(O>=0?O:4294967296+O)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(H(this))return"0";if(P(this))return"-"+k(this).toString(M);const N=h(Math.pow(M,6));var R=this;let O="";for(;;){const U=re(R,N).g;R=K(R,U.j(N));let q=((R.g.length>0?R.g[0]:R.h)>>>0).toString(M);if(R=U,H(R))return q+O;for(;q.length<6;)q="0"+q;O=q+O}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function H(M){if(M.h!=0)return!1;for(let N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function P(M){return M.h==-1}n.l=function(M){return M=K(this,M),P(M)?-1:H(M)?0:1};function k(M){const N=M.g.length,R=[];for(let O=0;O<N;O++)R[O]=~M.g[O];return new u(R,~M.h).add(S)}n.abs=function(){return P(this)?k(this):this},n.add=function(M){const N=Math.max(this.g.length,M.g.length),R=[];let O=0;for(let U=0;U<=N;U++){let q=O+(this.i(U)&65535)+(M.i(U)&65535),D=(q>>>16)+(this.i(U)>>>16)+(M.i(U)>>>16);O=D>>>16,q&=65535,D&=65535,R[U]=D<<16|q}return new u(R,R[R.length-1]&-2147483648?-1:0)};function K(M,N){return M.add(k(N))}n.j=function(M){if(H(this)||H(M))return T;if(P(this))return P(M)?k(this).j(k(M)):k(k(this).j(M));if(P(M))return k(this.j(k(M)));if(this.l(w)<0&&M.l(w)<0)return h(this.m()*M.m());const N=this.g.length+M.g.length,R=[];for(var O=0;O<2*N;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let U=0;U<M.g.length;U++){const q=this.i(O)>>>16,D=this.i(O)&65535,Ge=M.i(U)>>>16,at=M.i(U)&65535;R[2*O+2*U]+=D*at,B(R,2*O+2*U),R[2*O+2*U+1]+=q*at,B(R,2*O+2*U+1),R[2*O+2*U+1]+=D*Ge,B(R,2*O+2*U+1),R[2*O+2*U+2]+=q*Ge,B(R,2*O+2*U+2)}for(M=0;M<N;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=N;M<2*N;M++)R[M]=0;return new u(R,0)};function B(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function ee(M,N){this.g=M,this.h=N}function re(M,N){if(H(N))throw Error("division by zero");if(H(M))return new ee(T,T);if(P(M))return N=re(k(M),N),new ee(k(N.g),k(N.h));if(P(N))return N=re(M,k(N)),new ee(k(N.g),N.h);if(M.g.length>30){if(P(M)||P(N))throw Error("slowDivide_ only works with positive integers.");for(var R=S,O=N;O.l(M)<=0;)R=he(R),O=he(O);var U=fe(R,1),q=fe(O,1);for(O=fe(O,2),R=fe(R,2);!H(O);){var D=q.add(O);D.l(M)<=0&&(U=U.add(R),q=D),O=fe(O,1),R=fe(R,1)}return N=K(M,U.j(N)),new ee(U,N)}for(U=T;M.l(N)>=0;){for(R=Math.max(1,Math.floor(M.m()/N.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),q=h(R),D=q.j(N);P(D)||D.l(M)>0;)R-=O,q=h(R),D=q.j(N);H(q)&&(q=S),U=U.add(q),M=K(M,D)}return new ee(U,M)}n.B=function(M){return re(this,M).h},n.and=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<N;O++)R[O]=this.i(O)&M.i(O);return new u(R,this.h&M.h)},n.or=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<N;O++)R[O]=this.i(O)|M.i(O);return new u(R,this.h|M.h)},n.xor=function(M){const N=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<N;O++)R[O]=this.i(O)^M.i(O);return new u(R,this.h^M.h)};function he(M){const N=M.g.length+1,R=[];for(let O=0;O<N;O++)R[O]=M.i(O)<<1|M.i(O-1)>>>31;return new u(R,M.h)}function fe(M,N){const R=N>>5;N%=32;const O=M.g.length-R,U=[];for(let q=0;q<O;q++)U[q]=N>0?M.i(q+R)>>>N|M.i(q+R+1)<<32-N:M.i(q+R);return new u(U,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,aC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,Fo=u}).apply(typeof yE<"u"?yE:typeof self<"u"?self:typeof window<"u"?window:{});var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lC,lu,uC,Ad,fm,cC,dC,fC;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof dd=="object"&&dd];for(var E=0;E<m.length;++E){var b=m[E];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function r(m,E){if(E)e:{var b=i;m=m.split(".");for(var x=0;x<m.length-1;x++){var Y=m[x];if(!(Y in b))break e;b=b[Y]}m=m[m.length-1],x=b[m],E=E(x),E!=x&&E!=null&&e(b,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var b=[],x;for(x in E)Object.prototype.hasOwnProperty.call(E,x)&&b.push([x,E[x]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,b){return m.call.apply(m.bind,arguments)}function h(m,E,b){return h=g,h.apply(null,arguments)}function _(m,E){var b=Array.prototype.slice.call(arguments,1);return function(){var x=b.slice();return x.push.apply(x,arguments),m.apply(this,x)}}function T(m,E){function b(){}b.prototype=E.prototype,m.Z=E.prototype,m.prototype=new b,m.prototype.constructor=m,m.Ob=function(x,Y,W){for(var pe=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)pe[Be-2]=arguments[Be];return E.prototype[Y].apply(x,pe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const E=m.length;if(E>0){const b=Array(E);for(let x=0;x<E;x++)b[x]=m[x];return b}return[]}function H(m,E){for(let x=1;x<arguments.length;x++){const Y=arguments[x];var b=typeof Y;if(b=b!="object"?b:Y?Array.isArray(Y)?"array":b:"null",b=="array"||b=="object"&&typeof Y.length=="number"){b=m.length||0;const W=Y.length||0;m.length=b+W;for(let pe=0;pe<W;pe++)m[b+pe]=Y[pe]}else m.push(Y)}}class P{constructor(E,b){this.i=E,this.j=b,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function k(m){u.setTimeout(()=>{throw m},0)}function K(){var m=M;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class B{constructor(){this.h=this.g=null}add(E,b){const x=ee.get();x.set(E,b),this.h?this.h.next=x:this.g=x,this.h=x}}var ee=new P(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,b){this.h=E,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let he,fe=!1,M=new B,N=()=>{const m=Promise.resolve(void 0);he=()=>{m.then(R)}};function R(){for(var m;m=K();){try{m.h.call(m.g)}catch(b){k(b)}var E=ee;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}fe=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const b=()=>{};u.addEventListener("test",b,E),u.removeEventListener("test",b,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function Ge(m,E){U.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(Ge,U),Ge.prototype.init=function(m,E){const b=this.type=m.type,x=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(b=="mouseover"?E=m.fromElement:b=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),X=0;function de(m,E,b,x,Y){this.listener=m,this.proxy=null,this.src=E,this.type=b,this.capture=!!x,this.ha=Y,this.key=++X,this.da=this.fa=!1}function Se(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ke(m,E,b){for(const x in m)E.call(b,m[x],x,m)}function Ye(m,E){for(const b in m)E.call(void 0,m[b],b,m)}function F(m){const E={};for(const b in m)E[b]=m[b];return E}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(m,E){let b,x;for(let Y=1;Y<arguments.length;Y++){x=arguments[Y];for(b in x)m[b]=x[b];for(let W=0;W<j.length;W++)b=j[W],Object.prototype.hasOwnProperty.call(x,b)&&(m[b]=x[b])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,E,b,x,Y){const W=m.toString();m=this.g[W],m||(m=this.g[W]=[],this.h++);const pe=xe(m,E,x,Y);return pe>-1?(E=m[pe],b||(E.fa=!1)):(E=new de(E,this.src,W,!!x,Y),E.fa=b,m.push(E)),E};function be(m,E){const b=E.type;if(b in m.g){var x=m.g[b],Y=Array.prototype.indexOf.call(x,E,void 0),W;(W=Y>=0)&&Array.prototype.splice.call(x,Y,1),W&&(Se(E),m.g[b].length==0&&(delete m.g[b],m.h--))}}function xe(m,E,b,x){for(let Y=0;Y<m.length;++Y){const W=m[Y];if(!W.da&&W.listener==E&&W.capture==!!b&&W.ha==x)return Y}return-1}var He="closure_lm_"+(Math.random()*1e6|0),yt={};function lt(m,E,b,x,Y){if(Array.isArray(E)){for(let W=0;W<E.length;W++)lt(m,E[W],b,x,Y);return null}return b=Ci(b),m&&m[at]?m.J(E,b,f(x)?!!x.capture:!1,Y):Nn(m,E,b,!1,x,Y)}function Nn(m,E,b,x,Y,W){if(!E)throw Error("Invalid event type");const pe=f(Y)?!!Y.capture:!!Y;let Be=Xt(m);if(Be||(m[He]=Be=new me(m)),b=Be.add(E,b,x,pe,W),b.proxy)return b;if(x=Si(),b.proxy=x,x.src=m,x.listener=b,m.addEventListener)q||(Y=pe),Y===void 0&&(Y=!1),m.addEventListener(E.toString(),x,Y);else if(m.attachEvent)m.attachEvent(an(E.toString()),x);else if(m.addListener&&m.removeListener)m.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Si(){function m(b){return E.call(m.src,m.listener,b)}const E=Gi;return m}function Fn(m,E,b,x,Y){if(Array.isArray(E))for(var W=0;W<E.length;W++)Fn(m,E[W],b,x,Y);else x=f(x)?!!x.capture:!!x,b=Ci(b),m&&m[at]?(m=m.i,W=String(E).toString(),W in m.g&&(E=m.g[W],b=xe(E,b,x,Y),b>-1&&(Se(E[b]),Array.prototype.splice.call(E,b,1),E.length==0&&(delete m.g[W],m.h--)))):m&&(m=Xt(m))&&(E=m.g[E.toString()],m=-1,E&&(m=xe(E,b,x,Y)),(b=m>-1?E[m]:null)&&Ai(b))}function Ai(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[at])be(E.i,m);else{var b=m.type,x=m.proxy;E.removeEventListener?E.removeEventListener(b,x,m.capture):E.detachEvent?E.detachEvent(an(b),x):E.addListener&&E.removeListener&&E.removeListener(x),(b=Xt(E))?(be(b,m),b.h==0&&(b.src=null,E[He]=null)):Se(m)}}}function an(m){return m in yt?yt[m]:yt[m]="on"+m}function Gi(m,E){if(m.da)m=!0;else{E=new Ge(E,this);const b=m.listener,x=m.ha||m.src;m.fa&&Ai(m),m=b.call(x,E)}return m}function Xt(m){return m=m[He],m instanceof me?m:null}var ms="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ci(m){return typeof m=="function"?m:(m[ms]||(m[ms]=function(E){return m.handleEvent(E)}),m[ms])}function ht(){O.call(this),this.i=new me(this),this.M=this,this.G=null}T(ht,O),ht.prototype[at]=!0,ht.prototype.removeEventListener=function(m,E,b,x){Fn(this,m,E,b,x)};function ut(m,E){var b,x=m.G;if(x)for(b=[];x;x=x.G)b.push(x);if(m=m.M,x=E.type||E,typeof E=="string")E=new U(E,m);else if(E instanceof U)E.target=E.target||m;else{var Y=E;E=new U(x,m),ce(E,Y)}Y=!0;let W,pe;if(b)for(pe=b.length-1;pe>=0;pe--)W=E.g=b[pe],Y=Mn(W,x,!0,E)&&Y;if(W=E.g=m,Y=Mn(W,x,!0,E)&&Y,Y=Mn(W,x,!1,E)&&Y,b)for(pe=0;pe<b.length;pe++)W=E.g=b[pe],Y=Mn(W,x,!1,E)&&Y}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const b=m.g[E];for(let x=0;x<b.length;x++)Se(b[x]);delete m.g[E],m.h--}}this.G=null},ht.prototype.J=function(m,E,b,x){return this.i.add(String(m),E,!1,b,x)},ht.prototype.K=function(m,E,b,x){return this.i.add(String(m),E,!0,b,x)};function Mn(m,E,b,x){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let Y=!0;for(let W=0;W<E.length;++W){const pe=E[W];if(pe&&!pe.da&&pe.capture==b){const Be=pe.listener,Lt=pe.ha||pe.src;pe.fa&&be(m.i,pe),Y=Be.call(Lt,x)!==!1&&Y}}return Y&&!x.defaultPrevented}function Zn(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function ei(m){m.g=Zn(()=>{m.g=null,m.i&&(m.i=!1,ei(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class Ut extends O{constructor(E,b){super(),this.m=E,this.l=b,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ei(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gn(m){O.call(this),this.h=m,this.g={}}T(Gn,O);var gs=[];function bi(m){Ke(m.g,function(E,b){this.g.hasOwnProperty(b)&&Ai(E)},m),m.g={}}Gn.prototype.N=function(){Gn.Z.N.call(this),bi(this)},Gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=u.JSON.stringify,qi=u.JSON.parse,ti=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ys(){}function ni(){}var Wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mt(){U.call(this,"d")}T(Mt,U);function ln(){U.call(this,"c")}T(ln,U);var Ct={},vs=null;function zi(){return vs=vs||new ht}Ct.Ia="serverreachability";function _s(m){U.call(this,Ct.Ia,m)}T(_s,U);function Dn(m){const E=zi();ut(E,new _s(E))}Ct.STAT_EVENT="statevent";function ue(m,E){U.call(this,Ct.STAT_EVENT,m),this.stat=E}T(ue,U);function Te(m){const E=zi();ut(E,new ue(E,m))}Ct.Ja="timingevent";function Ne(m,E){U.call(this,Ct.Ja,m),this.size=E}T(Ne,U);function Oe(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function it(){this.g=!0}it.prototype.ua=function(){this.g=!1};function vn(m,E,b,x,Y,W){m.info(function(){if(m.g)if(W){var pe="",Be=W.split("&");for(let ct=0;ct<Be.length;ct++){var Lt=Be[ct].split("=");if(Lt.length>1){const Rt=Lt[0];Lt=Lt[1];const li=Rt.split("_");pe=li.length>=2&&li[1]=="type"?pe+(Rt+"="+Lt+"&"):pe+(Rt+"=redacted&")}}}else pe=null;else pe=W;return"XMLHTTP REQ ("+x+") [attempt "+Y+"]: "+E+`
`+b+`
`+pe})}function Ft(m,E,b,x,Y,W,pe){m.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+Y+"]: "+E+`
`+b+`
`+W+" "+pe})}function tt(m,E,b,x){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+wi(m,b)+(x?" "+x:"")})}function un(m,E){m.info(function(){return"TIMEOUT: "+E})}it.prototype.info=function(){};function wi(m,E){if(!m.g)return E;if(!E)return null;try{const W=JSON.parse(E);if(W){for(m=0;m<W.length;m++)if(Array.isArray(W[m])){var b=W[m];if(!(b.length<2)){var x=b[1];if(Array.isArray(x)&&!(x.length<1)){var Y=x[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let pe=1;pe<x.length;pe++)x[pe]=""}}}}return bn(W)}catch{return E}}var Ts={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jo;function Es(){}T(Es,ys),Es.prototype.g=function(){return new XMLHttpRequest},jo=new Es;function ii(m){return encodeURIComponent(String(m))}function Zo(m){var E=1;m=m.split(":");const b=[];for(;E>0&&m.length;)b.push(m.shift()),E--;return m.length&&b.push(m.join(":")),b}function St(m,E,b,x){this.j=m,this.i=E,this.l=b,this.S=x||1,this.V=new Gn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new V}function V(){this.i=null,this.g="",this.h=!1}var le={},ge={};function Me(m,E,b){m.M=1,m.A=er(qt(E)),m.u=b,m.R=!0,we(m,null)}function we(m,E){m.F=Date.now(),si(m),m.B=qt(m.A);var b=m.B,x=m.S;Array.isArray(x)||(x=[String(x)]),qr(b.i,"t",x),m.C=0,b=m.j.L,m.h=new V,m.g=ju(m.j,b?E:null,!m.u),m.P>0&&(m.O=new Ut(h(m.Y,m,m.g),m.P)),E=m.V,b=m.g,x=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(gs[0]=Y.toString()),Y=gs);for(let W=0;W<Y.length;W++){const pe=lt(b,Y[W],x||E.handleEvent,!1,E.h||E);if(!pe)break;E.g[pe.key]=pe}E=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Dn(),vn(m.i,m.v,m.B,m.l,m.S,m.u)}St.prototype.ba=function(m){m=m.target;const E=this.O;E&&Ri(m)==3?E.j():this.Y(m)},St.prototype.Y=function(m){try{if(m==this.g)e:{const Be=Ri(this.g),Lt=this.g.ya(),ct=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||Be!=4||Lt==7||(Lt==8||ct<=0?Dn(3):Dn(2)),Ki(this);var E=this.g.ca();this.X=E;var b=bt(this);if(this.o=E==200,Ft(this.i,this.v,this.B,this.l,this.S,Be,E),this.o){if(this.U&&!this.L){t:{if(this.g){var x,Y=this.g;if((x=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(x)){var W=x;break t}}W=null}if(m=W)tt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yi(this,m);else{this.o=!1,this.m=3,Te(12),qn(this),oi(this);break e}}if(this.R){m=!0;let Rt;for(;!this.K&&this.C<b.length;)if(Rt=Ss(this,b),Rt==ge){Be==4&&(this.m=4,Te(14),m=!1),tt(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==le){this.m=4,Te(15),tt(this.i,this.l,b,"[Invalid Chunk]"),m=!1;break}else tt(this.i,this.l,Rt,null),Yi(this,Rt);if(Zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||b.length!=0||this.h.h||(this.m=1,Te(16),m=!1),this.o=this.o&&m,!m)tt(this.i,this.l,b,"[Invalid Chunked Response]"),qn(this),oi(this);else if(b.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),_l(pe),pe.P=!0,Te(11))}}else tt(this.i,this.l,b,null),Yi(this,b);Be==4&&qn(this),this.o&&!this.K&&(Be==4?Ju(this.j,this):(this.o=!1,si(this)))}else Cs(this.g),E==400&&b.indexOf("Unknown SID")>0?(this.m=3,Te(12)):(this.m=0,Te(13)),qn(this),oi(this)}}}catch{}finally{}};function bt(m){if(!Zs(m))return m.g.la();const E=cn(m.g);if(E==="")return"";let b="";const x=E.length,Y=Ri(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return qn(m),oi(m),"";m.h.i=new u.TextDecoder}for(let W=0;W<x;W++)m.h.h=!0,b+=m.h.i.decode(E[W],{stream:!(Y&&W==x-1)});return E.length=0,m.h.g+=b,m.C=0,m.h.g}function Zs(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Ss(m,E){var b=m.C,x=E.indexOf(`
`,b);return x==-1?ge:(b=Number(E.substring(b,x)),isNaN(b)?le:(x+=1,x+b>E.length?ge:(E=E.slice(x,x+b),m.C=x+b,E)))}St.prototype.cancel=function(){this.K=!0,qn(this)};function si(m){m.T=Date.now()+m.H,Br(m,m.H)}function Br(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Oe(h(m.aa,m),E)}function Ki(m){m.D&&(u.clearTimeout(m.D),m.D=null)}St.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(un(this.i,this.B),this.M!=2&&(Dn(),Te(17)),qn(this),this.m=2,oi(this)):Br(this,this.T-m)};function oi(m){m.j.I==0||m.K||Ju(m.j,m)}function qn(m){Ki(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,bi(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Yi(m,E){try{var b=m.j;if(b.I!=0&&(b.g==m||Ji(b.h,m))){if(!m.L&&Ji(b.h,m)&&b.I==3){try{var x=b.Ba.g.parse(E)}catch{x=null}if(Array.isArray(x)&&x.length==3){var Y=x;if(Y[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<m.F)Jr(b),ao(b);else break e;ar(b),Te(18)}}else b.xa=Y[1],0<b.xa-b.K&&Y[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Oe(h(b.Va,b),6e3));$i(b.h)<=1&&b.ta&&(b.ta=void 0)}else es(b,11)}else if((m.L||b.g==m)&&Jr(b),!D(E))for(Y=b.Ba.g.parse(E),E=0;E<Y.length;E++){let ct=Y[E];const Rt=ct[0];if(!(Rt<=b.K))if(b.K=Rt,ct=ct[1],b.I==2)if(ct[0]=="c"){b.M=ct[1],b.ba=ct[2];const li=ct[3];li!=null&&(b.ka=li,b.j.info("VER="+b.ka));const ts=ct[4];ts!=null&&(b.za=ts,b.j.info("SVER="+b.za));const Ni=ct[5];Ni!=null&&typeof Ni=="number"&&Ni>0&&(x=1.5*Ni,b.O=x,b.j.info("backChannelRequestTimeoutMs_="+x)),x=b;const Mi=m.g;if(Mi){const lr=Mi.g?Mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lr){var W=x.h;W.g||lr.indexOf("spdy")==-1&&lr.indexOf("quic")==-1&&lr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(al(W,W.h),W.h=null))}if(x.G){const Qr=Mi.g?Mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qr&&(x.wa=Qr,pt(x.J,x.G,Qr))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-m.F,b.j.info("Handshake RTT: "+b.T+"ms")),x=b;var pe=m;if(x.na=Wu(x,x.L?x.ba:null,x.W),pe.L){ll(x.h,pe);var Be=pe,Lt=x.O;Lt&&(Be.H=Lt),Be.D&&(Ki(Be),si(Be)),x.g=pe}else Yu(x);b.i.length>0&&Zi(b)}else ct[0]!="stop"&&ct[0]!="close"||es(b,7);else b.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?es(b,7):yl(b):ct[0]!="noop"&&b.l&&b.l.qa(ct),b.A=0)}}Dn(4)}catch{}}var Gt=class{constructor(m,E){this.g=m,this.map=E}};function ol(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function $i(m){return m.h?1:m.g?m.g.size:0}function Ji(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function al(m,E){m.g?m.g.add(E):m.h=E}function ll(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}ol.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ul(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const b of m.g.values())E=E.concat(b.G);return E}return w(m.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fr(m,E){if(m){m=m.split("&");for(let b=0;b<m.length;b++){const x=m[b].indexOf("=");let Y,W=null;x>=0?(Y=m[b].substring(0,x),W=m[b].substring(x+1)):Y=m[b],E(Y,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function zn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof zn?(this.l=m.l,nn(this,m.j),this.o=m.o,this.g=m.g,eo(this,m.u),this.h=m.h,cl(this,zu(m.i)),this.m=m.m):m&&(E=String(m).match(Bu))?(this.l=!1,nn(this,E[1]||"",!0),this.o=Qi(E[2]||""),this.g=Qi(E[3]||"",!0),eo(this,E[4]),this.h=Qi(E[5]||"",!0),cl(this,E[6]||"",!0),this.m=Qi(E[7]||"")):(this.l=!1,this.i=new no(null,this.l))}zn.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(tr(E,Gr,!0),":");var b=this.g;return(b||E=="file")&&(m.push("//"),(E=this.o)&&m.push(tr(E,Gr,!0),"@"),m.push(ii(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&m.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&m.push("/"),m.push(tr(b,b.charAt(0)=="/"?dl:Fu,!0))),(b=this.i.toString())&&m.push("?",b),(b=this.m)&&m.push("#",tr(b,Gu)),m.join("")},zn.prototype.resolve=function(m){const E=qt(this);let b=!!m.j;b?nn(E,m.j):b=!!m.o,b?E.o=m.o:b=!!m.g,b?E.g=m.g:b=m.u!=null;var x=m.h;if(b)eo(E,m.u);else if(b=!!m.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var Y=E.h.lastIndexOf("/");Y!=-1&&(x=E.h.slice(0,Y+1)+x)}if(Y=x,Y==".."||Y==".")x="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){x=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const W=[];for(let pe=0;pe<Y.length;){const Be=Y[pe++];Be=="."?x&&pe==Y.length&&W.push(""):Be==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),x&&pe==Y.length&&W.push("")):(W.push(Be),x=!0)}x=W.join("/")}else x=Y}return b?E.h=x:b=m.i.toString()!=="",b?cl(E,zu(m.i)):b=!!m.m,b&&(E.m=m.m),E};function qt(m){return new zn(m)}function nn(m,E,b){m.j=b?Qi(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function eo(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function cl(m,E,b){E instanceof no?(m.i=E,zr(m.i,m.l)):(b||(E=tr(E,to)),m.i=new no(E,m.l))}function pt(m,E,b){m.i.set(E,b)}function er(m){return pt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Qi(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function tr(m,E,b){return typeof m=="string"?(m=encodeURI(m).replace(E,Pn),b&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Pn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Gr=/[#\/\?@]/g,Fu=/[#\?:]/g,dl=/[#\?]/g,to=/[#\?@]/g,Gu=/#/g;function no(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function kn(m){m.g||(m.g=new Map,m.h=0,m.i&&Fr(m.i,function(E,b){m.add(decodeURIComponent(E.replace(/\+/g," ")),b)}))}n=no.prototype,n.add=function(m,E){kn(this),this.i=null,m=io(this,m);let b=this.g.get(m);return b||this.g.set(m,b=[]),b.push(E),this.h+=1,this};function qu(m,E){kn(m),E=io(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function fl(m,E){return kn(m),E=io(m,E),m.g.has(E)}n.forEach=function(m,E){kn(this),this.g.forEach(function(b,x){b.forEach(function(Y){m.call(E,Y,x,this)},this)},this)};function hl(m,E){kn(m);let b=[];if(typeof E=="string")fl(m,E)&&(b=b.concat(m.g.get(io(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)b=b.concat(m[E]);return b}n.set=function(m,E){return kn(this),this.i=null,m=io(this,m),fl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=hl(this,m),m.length>0?String(m[0]):E):E};function qr(m,E,b){qu(m,E),b.length>0&&(m.i=null,m.g.set(io(m,E),w(b)),m.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let x=0;x<E.length;x++){var b=E[x];const Y=ii(b);b=hl(this,b);for(let W=0;W<b.length;W++){let pe=Y;b[W]!==""&&(pe+="="+ii(b[W])),m.push(pe)}}return this.i=m.join("&")};function zu(m){const E=new no;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function io(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function zr(m,E){E&&!m.j&&(kn(m),m.i=null,m.g.forEach(function(b,x){const Y=x.toLowerCase();x!=Y&&(qu(this,x),qr(this,Y,b))},m)),m.j=E}function Ii(m,E){const b=new it;if(u.Image){const x=new Image;x.onload=_(ri,b,"TestLoadImage: loaded",!0,E,x),x.onerror=_(ri,b,"TestLoadImage: error",!1,E,x),x.onabort=_(ri,b,"TestLoadImage: abort",!1,E,x),x.ontimeout=_(ri,b,"TestLoadImage: timeout",!1,E,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=m}else E(!1)}function pl(m,E){const b=new it,x=new AbortController,Y=setTimeout(()=>{x.abort(),ri(b,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:x.signal}).then(W=>{clearTimeout(Y),W.ok?ri(b,"TestPingServer: ok",!0,E):ri(b,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),ri(b,"TestPingServer: error",!1,E)})}function ri(m,E,b,x,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),x(b)}catch{}}function so(){this.g=new ti}function Xi(m){this.i=m.Sb||null,this.h=m.ab||!1}T(Xi,ys),Xi.prototype.g=function(){return new nr(this.i,this.h)};function nr(m,E){ht.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(nr,ht),n=nr.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,xi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?oo(this):xi(this),this.readyState==3&&Kr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,oo(this))},n.Na=function(m){this.g&&(this.response=m,oo(this))},n.ga=function(){this.g&&oo(this)};function oo(m){m.readyState=4,m.l=null,m.j=null,m.B=null,xi(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var b=E.next();!b.done;)b=b.value,m.push(b[0]+": "+b[1]),b=E.next();return m.join(`\r
`)};function xi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(nr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ai(m){let E="";return Ke(m,function(b,x){E+=x,E+=":",E+=b,E+=`\r
`}),E}function ir(m,E,b){e:{for(x in b){var x=!1;break e}x=!0}x||(b=ai(b),typeof m=="string"?b!=null&&ii(b):pt(m,E,b))}function vt(m){ht.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(vt,ht);var Wi=/^https?$/i,ml=["POST","PUT"];n=vt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,b,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jo.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(W){sr(this,W);return}if(m=b||"",b=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var Y in x)b.set(Y,x[Y]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const W of x.keys())b.set(W,x.get(W));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),Y=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(ml,E,void 0)>=0)||x||Y||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,pe]of b)this.g.setRequestHeader(W,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(W){sr(this,W)}};function sr(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,gl(m),As(m)}function gl(m){m.A||(m.A=!0,ut(m,"complete"),ut(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,ut(this,"complete"),ut(this,"abort"),As(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),As(this,!0)),vt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?or(this):this.Xa())},n.Xa=function(){or(this)};function or(m){if(m.h&&typeof l<"u"){if(m.v&&Ri(m)==4)setTimeout(m.Ca.bind(m),0);else if(ut(m,"readystatechange"),Ri(m)==4){m.h=!1;try{const W=m.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var b;if(!(b=E)){var x;if(x=W===0){let pe=String(m.D).match(Bu)[1]||null;!pe&&u.self&&u.self.location&&(pe=u.self.location.protocol.slice(0,-1)),x=!Wi.test(pe?pe.toLowerCase():"")}b=x}if(b)ut(m,"complete"),ut(m,"success");else{m.o=6;try{var Y=Ri(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",gl(m)}}finally{As(m)}}}}function As(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const b=m.g;m.g=null,E||ut(m,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ri(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Ri(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),qi(E)}};function cn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Cs(m){const E={};m=(m.g&&Ri(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<m.length;x++){if(D(m[x]))continue;var b=Zo(m[x]);const Y=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=E[Y]||[];E[Y]=W,W.push(b)}Ye(E,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(m,E,b){return b&&b.internalChannelParams&&b.internalChannelParams[m]||E}function ro(m){this.za=0,this.i=[],this.j=new it,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ji("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ji("baseRetryDelayMs",5e3,m),this.Za=ji("retryDelaySeedMs",1e4,m),this.Ta=ji("forwardChannelMaxRetries",2,m),this.va=ji("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new ol(m&&m.concurrentRequestLimit),this.Ba=new so,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ro.prototype,n.ka=8,n.I=1,n.connect=function(m,E,b,x){Te(0),this.W=m,this.H=E||{},b&&x!==void 0&&(this.H.OSID=b,this.H.OAID=x),this.F=this.X,this.J=Wu(this,null,this.W),Zi(this)};function yl(m){if(Yr(m),m.I==3){var E=m.V++,b=qt(m.J);if(pt(b,"SID",m.M),pt(b,"RID",E),pt(b,"TYPE","terminate"),rr(m,b),E=new St(m,m.j,E),E.M=2,E.A=er(qt(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=E.A,b=!0),b||(E.g=ju(E.j,null),E.g.ea(E.A)),E.F=Date.now(),si(E)}Xu(m)}function ao(m){m.g&&(_l(m),m.g.cancel(),m.g=null)}function Yr(m){ao(m),m.v&&(u.clearTimeout(m.v),m.v=null),Jr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Zi(m){if(!rl(m.h)&&!m.m){m.m=!0;var E=m.Ea;he||N(),fe||(he(),fe=!0),M.add(E,m),m.D=0}}function $r(m,E){return $i(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Oe(h(m.Ea,m,E),Qu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new St(this,this.j,m);let W=this.o;if(this.U&&(W?(W=F(W),ce(W,this.U)):W=this.U),this.u!==null||this.R||(Y.J=W,W=null),this.S)e:{for(var E=0,b=0;b<this.i.length;b++){t:{var x=this.i[b];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(E+=x,E>4096){E=b;break e}if(E===4096||b===this.i.length-1){E=b+1;break e}}E=1e3}else E=1e3;E=Ku(this,Y,E),b=qt(this.J),pt(b,"RID",m),pt(b,"CVER",22),this.G&&pt(b,"X-HTTP-Session-Id",this.G),rr(this,b),W&&(this.R?E="headers="+ii(ai(W))+"&"+E:this.u&&ir(b,this.u,W)),al(this.h,Y),this.Ra&&pt(b,"TYPE","init"),this.S?(pt(b,"$req",E),pt(b,"SID","null"),Y.U=!0,Me(Y,b,null)):Me(Y,b,E),this.I=2}}else this.I==3&&(m?vl(this,m):this.i.length==0||rl(this.h)||vl(this))};function vl(m,E){var b;E?b=E.l:b=m.V++;const x=qt(m.J);pt(x,"SID",m.M),pt(x,"RID",b),pt(x,"AID",m.K),rr(m,x),m.u&&m.o&&ir(x,m.u,m.o),b=new St(m,m.j,b,m.D+1),m.u===null&&(b.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Ku(m,b,1e3),b.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),al(m.h,b),Me(b,x,E)}function rr(m,E){m.H&&Ke(m.H,function(b,x){pt(E,x,b)}),m.l&&Ke({},function(b,x){pt(E,x,b)})}function Ku(m,E,b){b=Math.min(m.i.length,b);const x=m.l?h(m.l.Ka,m.l,m):null;e:{var Y=m.i;let Be=-1;for(;;){const Lt=["count="+b];Be==-1?b>0?(Be=Y[0].g,Lt.push("ofs="+Be)):Be=0:Lt.push("ofs="+Be);let ct=!0;for(let Rt=0;Rt<b;Rt++){var W=Y[Rt].g;const li=Y[Rt].map;if(W-=Be,W<0)Be=Math.max(0,Y[Rt].g-100),ct=!1;else try{W="req"+W+"_"||"";try{var pe=li instanceof Map?li:Object.entries(li);for(const[ts,Ni]of pe){let Mi=Ni;f(Ni)&&(Mi=bn(Ni)),Lt.push(W+ts+"="+encodeURIComponent(Mi))}}catch(ts){throw Lt.push(W+"type="+encodeURIComponent("_badmap")),ts}}catch{x&&x(li)}}if(ct){pe=Lt.join("&");break e}}pe=void 0}return m=m.i.splice(0,b),E.G=m,pe}function Yu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;he||N(),fe||(he(),fe=!0),M.add(E,m),m.A=0}}function ar(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Oe(h(m.Da,m),Qu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,$u(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Oe(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Te(10),ao(this),$u(this))};function _l(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function $u(m){m.g=new St(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=qt(m.na);pt(E,"RID","rpc"),pt(E,"SID",m.M),pt(E,"AID",m.K),pt(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&pt(E,"TO",m.ia),pt(E,"TYPE","xmlhttp"),rr(m,E),m.u&&m.o&&ir(E,m.u,m.o),m.O&&(m.g.H=m.O);var b=m.g;m=m.ba,b.M=1,b.A=er(qt(E)),b.u=null,b.R=!0,we(b,m)}n.Va=function(){this.C!=null&&(this.C=null,ao(this),ar(this),Te(19))};function Jr(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Ju(m,E){var b=null;if(m.g==E){Jr(m),_l(m),m.g=null;var x=2}else if(Ji(m.h,E))b=E.G,ll(m.h,E),x=1;else return;if(m.I!=0){if(E.o)if(x==1){b=E.u?E.u.length:0,E=Date.now()-E.F;var Y=m.D;x=zi(),ut(x,new Ne(x,b)),Zi(m)}else Yu(m);else if(Y=E.m,Y==3||Y==0&&E.X>0||!(x==1&&$r(m,E)||x==2&&ar(m)))switch(b&&b.length>0&&(E=m.h,E.i=E.i.concat(b)),Y){case 1:es(m,5);break;case 4:es(m,10);break;case 3:es(m,6);break;default:es(m,2)}}}function Qu(m,E){let b=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(b*=2),b*E}function es(m,E){if(m.j.info("Error code "+E),E==2){var b=h(m.bb,m),x=m.Ua;const Y=!x;x=new zn(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||nn(x,"https"),er(x),Y?Ii(x.toString(),b):pl(x.toString(),b)}else Te(2);m.I=0,m.l&&m.l.pa(E),Xu(m),Yr(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function Xu(m){if(m.I=0,m.ja=[],m.l){const E=ul(m.h);(E.length!=0||m.i.length!=0)&&(H(m.ja,E),H(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Wu(m,E,b){var x=b instanceof zn?qt(b):new zn(b);if(x.g!="")E&&(x.g=E+"."+x.g),eo(x,x.u);else{var Y=u.location;x=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;const W=new zn(null);x&&nn(W,x),E&&(W.g=E),Y&&eo(W,Y),b&&(W.h=b),x=W}return b=m.G,E=m.wa,b&&E&&pt(x,b,E),pt(x,"VER",m.ka),rr(m,x),x}function ju(m,E,b){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new vt(new Xi({ab:b})):new vt(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}n=Zu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function lo(){}lo.prototype.g=function(m,E){return new wn(m,E)};function wn(m,E){ht.call(this),this.g=new ro(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new bs(this)}T(wn,ht),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){yl(this.g)},wn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var b={};b.__data__=m,m=b}else this.v&&(b={},b.__data__=bn(m),m=b);E.i.push(new Gt(E.Ya++,m)),E.I==3&&Zi(E)},wn.prototype.N=function(){this.g.l=null,delete this.j,yl(this.g),delete this.g,wn.Z.N.call(this)};function ec(m){Mt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const b in E){m=b;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(ec,Mt);function tc(){ln.call(this),this.status=1}T(tc,ln);function bs(m){this.g=m}T(bs,Zu),bs.prototype.ra=function(){ut(this.g,"a")},bs.prototype.qa=function(m){ut(this.g,new ec(m))},bs.prototype.pa=function(m){ut(this.g,new tc)},bs.prototype.oa=function(){ut(this.g,"b")},lo.prototype.createWebChannel=lo.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,fC=function(){return new lo},dC=function(){return zi()},cC=Ct,fm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,Ad=Ts,Wo.COMPLETE="complete",uC=Wo,ni.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",ht.prototype.listen=ht.prototype.J,lu=ni,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,lC=vt}).apply(typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{});const vE="@firebase/firestore",_E="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new qm("@firebase/firestore");function Ia(){return Pr.logLevel}function ve(n,...e){if(Pr.logLevel<=We.DEBUG){const t=e.map(ng);Pr.debug(`Firestore (${tl}): ${n}`,...t)}}function Js(n,...e){if(Pr.logLevel<=We.ERROR){const t=e.map(ng);Pr.error(`Firestore (${tl}): ${n}`,...t)}}function qa(n,...e){if(Pr.logLevel<=We.WARN){const t=e.map(ng);Pr.warn(`Firestore (${tl}): ${n}`,...t)}}function ng(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,hC(n,i,t)}function hC(n,e,t){let i=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Js(i),new Error(i)}function ft(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||hC(e,r,i)}function Le(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends js{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(En.UNAUTHENTICATED)))}shutdown(){}}class jL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ZL{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let i=this.i;const r=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Go;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Go,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},f=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Go)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ft(typeof i.accessToken=="string",31837,{l:i}),new pC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class e4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class t4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new e4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class TE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const i=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const r=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new TE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new TE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=i4(40);for(let l=0;l<r.length;++l)i.length<20&&r[l]<t&&(i+=e.charAt(r[l]%62))}return i}}function je(n,e){return n<e?-1:n>e?1:0}function hm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),l=e.charAt(i);if(r!==l)return Op(r)===Op(l)?je(r,l):Op(r)?1:-1}return je(n.length,e.length)}const s4=55296,o4=57343;function Op(n){const e=n.charCodeAt(0);return e>=s4&&e<=o4}function za(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="__name__";class rs{constructor(e,t,i){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&De(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return rs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const l=rs.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const i=rs.isNumericId(e),r=rs.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?rs.extractNumericId(e).compare(rs.extractNumericId(t)):hm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fo.fromString(e.substring(4,e.length-2))}}class Dt extends rs{construct(e,t,i){return new Dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new Dt(t)}static emptyPath(){return new Dt([])}}const r4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends rs{construct(e,t,i){return new gn(e,t,i)}static isValidIdentifier(e){return r4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EE}static keyField(){return new gn([EE])}static fromServerFormat(e){const t=[];let i="",r=0;const l=()=>{if(i.length===0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new Ae(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ae(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(i+=f,r++):(l(),r++)}if(l(),u)throw new Ae(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(t)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(Dt.fromString(e))}static fromName(e){return new Ie(Dt.fromString(e).popFirst(5))}static empty(){return new Ie(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n,e,t){if(!t)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function l4(n,e,t,i){if(e===!0&&i===!0)throw new Ae(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SE(n){if(!Ie.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function qo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sg(n);throw new Ae(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Vu(n,e){if(!mC(n))throw new Ae(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ae(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=-62135596800,CE=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*CE);return new xt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AE)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CE}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vu(e,xt._jsonSchema))return new xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:Qt("string",xt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new xt(0,0))}static max(){return new Ve(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;function u4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ve.fromTimestamp(i===1e9?new xt(t+1,0):new xt(t,i));return new zo(r,Ie.empty(),e)}function c4(n){return new zo(n.readTime,n.key,Su)}class zo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new zo(Ve.min(),Ie.empty(),Su)}static max(){return new zo(Ve.max(),Ie.empty(),Su)}}function d4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class h4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==f4)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let r=0,l=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++l,u&&l===r&&t()}),(g=>i(g)))})),u=!0,l===r&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((r=>r?se.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,l)=>{i.push(t.call(this,r,l))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,r)=>{const l=e.length,u=new Array(l);let f=0;for(let g=0;g<l;g++){const h=g;t(e[h]).next((_=>{u[h]=_,++f,f===l&&i(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new se(((i,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):i()};l()}))}}function p4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function il(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=-1;function gf(n){return n==null}function Kd(n){return n===0&&1/n==-1/0}function m4(n){return typeof n=="number"&&Number.isInteger(n)&&!Kd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="";function g4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bE(e)),e=y4(n.get(t),e);return bE(e)}function y4(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case gC:t+="";break;default:t+=l}}return t}function bE(n){return n+gC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ur(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new Pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}}class fd{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,i,r,l){this.key=e,this.value=t,this.color=i??mn.RED,this.left=r??mn.EMPTY,this.right=l??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,l){return new mn(e??this.key,t??this.value,i??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const l=i(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,i),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return mn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,i,r,l){return this}insert(e,t,i){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new Li([])}unionWith(e){let t=new tn(gn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Li(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new vC("Invalid base64 string: "+l):l}})(e);return new yn(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const v4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=v4.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bt(n.seconds),nanos:Bt(n.nanos)}}function Bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yo(n){return typeof n=="string"?yn.fromBase64String(n):yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="server_timestamp",TC="__type__",EC="__previous_value__",SC="__local_write_time__";function rg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[TC])==null?void 0:i.stringValue)===_C}function yf(n){const e=n.mapValue.fields[EC];return rg(e)?yf(e):e}function Au(n){const e=Ko(n.mapValue.fields[SC].timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,t,i,r,l,u,f,g,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=h,this.isUsingEmulator=_}}const Yd="(default)";class Cu{constructor(e,t){this.projectId=e,this.database=t||Yd}static empty(){return new Cu("","")}get isDefaultDatabase(){return this.database===Yd}isEqual(e){return e instanceof Cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="__type__",T4="__max__",hd={mapValue:{}},CC="__vector__",$d="value";function $o(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rg(n)?4:S4(n)?9007199254740991:E4(n)?10:11:De(28295,{value:n})}function hs(n,e){if(n===e)return!0;const t=$o(n);if(t!==$o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Au(n).isEqual(Au(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=Ko(r.timestampValue),f=Ko(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return Yo(r.bytesValue).isEqual(Yo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return Bt(r.geoPointValue.latitude)===Bt(l.geoPointValue.latitude)&&Bt(r.geoPointValue.longitude)===Bt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Bt(r.integerValue)===Bt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=Bt(r.doubleValue),f=Bt(l.doubleValue);return u===f?Kd(u)===Kd(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return za(n.arrayValue.values||[],e.arrayValue.values||[],hs);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},f=l.mapValue.fields||{};if(wE(u)!==wE(f))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(f[g]===void 0||!hs(u[g],f[g])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function bu(n,e){return(n.values||[]).find((t=>hs(t,e)))!==void 0}function Ka(n,e){if(n===e)return 0;const t=$o(n),i=$o(e);if(t!==i)return je(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Bt(l.integerValue||l.doubleValue),g=Bt(u.integerValue||u.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return xE(n.timestampValue,e.timestampValue);case 4:return xE(Au(n),Au(e));case 5:return hm(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=Yo(l),g=Yo(u);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),g=u.split("/");for(let h=0;h<f.length&&h<g.length;h++){const _=je(f[h],g[h]);if(_!==0)return _}return je(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=je(Bt(l.latitude),Bt(u.latitude));return f!==0?f:je(Bt(l.longitude),Bt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return RE(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,w,H,P;const f=l.fields||{},g=u.fields||{},h=(S=f[$d])==null?void 0:S.arrayValue,_=(w=g[$d])==null?void 0:w.arrayValue,T=je(((H=h==null?void 0:h.values)==null?void 0:H.length)||0,((P=_==null?void 0:_.values)==null?void 0:P.length)||0);return T!==0?T:RE(h,_)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===hd.mapValue&&u===hd.mapValue)return 0;if(l===hd.mapValue)return 1;if(u===hd.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),h=u.fields||{},_=Object.keys(h);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const S=hm(g[T],_[T]);if(S!==0)return S;const w=Ka(f[g[T]],h[_[T]]);if(w!==0)return w}return je(g.length,_.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function xE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);const t=Ko(n),i=Ko(e),r=je(t.seconds,i.seconds);return r!==0?r:je(t.nanos,i.nanos)}function RE(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const l=Ka(t[r],i[r]);if(l)return l}return je(t.length,i.length)}function Ya(n){return pm(n)}function pm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ko(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Yo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const l of t.values||[])r?r=!1:i+=",",i+=pm(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const u of i)l?l=!1:r+=",",r+=`${u}:${pm(t.fields[u])}`;return r+"}"})(n.mapValue):De(61005,{value:n})}function Cd(n){switch($o(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yf(n);return e?16+Cd(e):16;case 5:return 2*n.stringValue.length;case 6:return Yo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,l)=>r+Cd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Ur(i.fields,((l,u)=>{r+=l.length+Cd(u)})),r})(n.mapValue);default:throw De(13486,{value:n})}}function mm(n){return!!n&&"integerValue"in n}function ag(n){return!!n&&"arrayValue"in n}function NE(n){return!!n&&"nullValue"in n}function ME(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bd(n){return!!n&&"mapValue"in n}function E4(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[AC])==null?void 0:i.stringValue)===CC}function mu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ur(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=mu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(n.arrayValue.values[t]);return e}return{...n}}function S4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===T4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!bd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=gn.emptyPath(),i={},r=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,r),i={},r=[],t=f.popLast()}u?i[f.lastSegment()]=mu(u):r.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,r)}delete(e){const t=this.field(e.popLast());bd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];bd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ur(t,((r,l)=>e[r]=l));for(const r of i)delete e[r]}clone(){return new vi(mu(this.value))}}function bC(n){const e=[];return Ur(n.fields,((t,i)=>{const r=new gn([t]);if(bd(i)){const l=bC(i.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new Li(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,t,i,r,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Sn(e,0,Ve.min(),Ve.min(),Ve.min(),vi.empty(),0)}static newFoundDocument(e,t,i,r){return new Sn(e,1,t,Ve.min(),i,r,0)}static newNoDocument(e,t){return new Sn(e,2,t,Ve.min(),Ve.min(),vi.empty(),0)}static newUnknownDocument(e,t){return new Sn(e,3,t,Ve.min(),Ve.min(),vi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t){this.position=e,this.inclusive=t}}function DE(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(l.field.isKeyField()?i=Ie.comparator(Ie.fromName(u.referenceValue),t.key):i=Ka(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function PE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t="asc"){this.field=e,this.dir=t}}function A4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{}class Zt extends wC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new b4(e,t,i):t==="array-contains"?new x4(e,i):t==="in"?new R4(e,i):t==="not-in"?new N4(e,i):t==="array-contains-any"?new M4(e,i):new Zt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new w4(e,i):new I4(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ka(t,this.value)):t!==null&&$o(this.value)===$o(t)&&this.matchesComparison(Ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends wC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ps(e,t)}matches(e){return IC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IC(n){return n.op==="and"}function xC(n){return C4(n)&&IC(n)}function C4(n){for(const e of n.filters)if(e instanceof ps)return!1;return!0}function gm(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+Ya(n.value);if(xC(n))return n.filters.map((e=>gm(e))).join(",");{const e=n.filters.map((t=>gm(t))).join(",");return`${n.op}(${e})`}}function RC(n,e){return n instanceof Zt?(function(i,r){return r instanceof Zt&&i.op===r.op&&i.field.isEqual(r.field)&&hs(i.value,r.value)})(n,e):n instanceof ps?(function(i,r){return r instanceof ps&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((l,u,f)=>l&&RC(u,r.filters[f])),!0):!1})(n,e):void De(19439)}function NC(n){return n instanceof Zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ya(t.value)}`})(n):n instanceof ps?(function(t){return t.op.toString()+" {"+t.getFilters().map(NC).join(" ,")+"}"})(n):"Filter"}class b4 extends Zt{constructor(e,t,i){super(e,t,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class w4 extends Zt{constructor(e,t){super(e,"in",t),this.keys=MC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class I4 extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=MC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function MC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ie.fromName(i.referenceValue)))}class x4 extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ag(t)&&bu(t.arrayValue,this.value)}}class R4 extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bu(this.value.arrayValue,t)}}class N4 extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bu(this.value.arrayValue,t)}}class M4 extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ag(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>bu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,t=null,i=[],r=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function kE(n,e=null,t=[],i=[],r=null,l=null,u=null){return new D4(n,e,t,i,r,l,u)}function lg(n){const e=Le(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>gm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ya(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ya(i))).join(",")),e.Te=t}return e.Te}function ug(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!A4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!PE(n.startAt,e.startAt)&&PE(n.endAt,e.endAt)}function ym(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t=null,i=[],r=[],l=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function P4(n,e,t,i,r,l,u,f){return new vf(n,e,t,i,r,l,u,f)}function _f(n){return new vf(n)}function VE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function k4(n){return n.collectionGroup!==null}function gu(n){const e=Le(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new tn(gn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Qd(l,i))})),t.has(gn.keyField().canonicalString())||e.Ie.push(new Qd(gn.keyField(),i))}return e.Ie}function ls(n){const e=Le(n);return e.Ee||(e.Ee=V4(e,gu(n))),e.Ee}function V4(n,e){if(n.limitType==="F")return kE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Qd(r.field,l)}));const t=n.endAt?new Jd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Jd(n.startAt.position,n.startAt.inclusive):null;return kE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function vm(n,e,t){return new vf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tf(n,e){return ug(ls(n),ls(e))&&n.limitType===e.limitType}function DC(n){return`${lg(ls(n))}|lt:${n.limitType}`}function xa(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>NC(r))).join(", ")}]`),gf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Ya(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Ya(r))).join(",")),`Target(${i})`})(ls(n))}; limitType=${n.limitType})`}function Ef(n,e){return e.isFoundDocument()&&(function(i,r){const l=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ie.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,r){for(const l of gu(i))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const l of i.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,f,g){const h=DE(u,f,g);return u.inclusive?h<=0:h<0})(i.startAt,gu(i),r)||i.endAt&&!(function(u,f,g){const h=DE(u,f,g);return u.inclusive?h>=0:h>0})(i.endAt,gu(i),r))})(n,e)}function U4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PC(n){return(e,t)=>{let i=!1;for(const r of gu(n)){const l=L4(r,e,t);if(l!==0)return l;i=i||r.field.isKeyField()}return 0}}function L4(n,e,t){const i=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(l,u,f){const g=u.data.field(l),h=f.data.field(l);return g!==null&&h!==null?Ka(g,h):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,l]of i)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,((t,i)=>{for(const[r,l]of i)e(r,l)}))}isEmpty(){return yC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new Pt(Ie.comparator);function Qs(){return O4}const kC=new Pt(Ie.comparator);function uu(...n){let e=kC;for(const t of n)e=e.insert(t.key,t);return e}function VC(n){let e=kC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ir(){return yu()}function UC(){return yu()}function yu(){return new Lr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const H4=new Pt(Ie.comparator),B4=new tn(Ie.comparator);function Ze(...n){let e=B4;for(const t of n)e=e.add(t);return e}const F4=new tn(je);function G4(){return F4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(e)?"-0":e}}function LC(n){return{integerValue:""+n}}function q4(n,e){return m4(e)?LC(e):cg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this._=void 0}}function z4(n,e,t){return n instanceof Xd?(function(r,l){const u={fields:{[TC]:{stringValue:_C},[SC]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&rg(l)&&(l=yf(l)),l&&(u.fields[EC]=l),{mapValue:u}})(t,e):n instanceof wu?HC(n,e):n instanceof Iu?BC(n,e):(function(r,l){const u=OC(r,l),f=UE(u)+UE(r.Ae);return mm(u)&&mm(r.Ae)?LC(f):cg(r.serializer,f)})(n,e)}function K4(n,e,t){return n instanceof wu?HC(n,e):n instanceof Iu?BC(n,e):t}function OC(n,e){return n instanceof Wd?(function(i){return mm(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Xd extends Sf{}class wu extends Sf{constructor(e){super(),this.elements=e}}function HC(n,e){const t=FC(e);for(const i of n.elements)t.some((r=>hs(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Iu extends Sf{constructor(e){super(),this.elements=e}}function BC(n,e){let t=FC(e);for(const i of n.elements)t=t.filter((r=>!hs(r,i)));return{arrayValue:{values:t}}}class Wd extends Sf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function UE(n){return Bt(n.integerValue||n.doubleValue)}function FC(n){return ag(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Y4(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof wu&&r instanceof wu||i instanceof Iu&&r instanceof Iu?za(i.elements,r.elements,hs):i instanceof Wd&&r instanceof Wd?hs(i.Ae,r.Ae):i instanceof Xd&&r instanceof Xd})(n.transform,e.transform)}class $4{constructor(e,t){this.version=e,this.transformResults=t}}class zs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zs}static exists(e){return new zs(void 0,e)}static updateTime(e){return new zs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Af{}function GC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zC(n.key,zs.none()):new Uu(n.key,n.data,zs.none());{const t=n.data,i=vi.empty();let r=new tn(gn.comparator);for(let l of e.fields)if(!r.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),r=r.add(l)}return new Or(n.key,i,new Li(r.toArray()),zs.none())}}function J4(n,e,t){n instanceof Uu?(function(r,l,u){const f=r.value.clone(),g=OE(r.fieldTransforms,l,u.transformResults);f.setAll(g),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Or?(function(r,l,u){if(!wd(r.precondition,l))return void l.convertToUnknownDocument(u.version);const f=OE(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(qC(r)),g.setAll(f),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function vu(n,e,t,i){return n instanceof Uu?(function(l,u,f,g){if(!wd(l.precondition,u))return f;const h=l.value.clone(),_=HE(l.fieldTransforms,g,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Or?(function(l,u,f,g){if(!wd(l.precondition,u))return f;const h=HE(l.fieldTransforms,g,u),_=u.data;return _.setAll(qC(l)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(l,u,f){return wd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function Q4(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),l=OC(i.transform,r||null);l!=null&&(t===null&&(t=vi.empty()),t.set(i.field,l))}return t||null}function LE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&za(i,r,((l,u)=>Y4(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Uu extends Af{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Or extends Af{constructor(e,t,i,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function qC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function OE(n,e,t){const i=new Map;ft(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,f=e.data.field(l.field);i.set(l.field,K4(u,f,t[r]))}return i}function HE(n,e,t){const i=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);i.set(r.field,z4(l,u,e))}return i}class zC extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X4 extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&J4(l,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=vu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=vu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=UC();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(r.key)?null:f;const g=GC(u,f);g!==null&&i.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ve.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,((t,i)=>LE(t,i)))&&za(this.baseMutations,e.baseMutations,((t,i)=>LE(t,i)))}}class dg{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ft(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return H4})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,i[u].version);return new dg(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,nt;function eO(n){switch(n){case ae.OK:return De(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function KC(n){if(n===void 0)return Js("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Jt.OK:return ae.OK;case Jt.CANCELLED:return ae.CANCELLED;case Jt.UNKNOWN:return ae.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return ae.INTERNAL;case Jt.UNAVAILABLE:return ae.UNAVAILABLE;case Jt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Jt.NOT_FOUND:return ae.NOT_FOUND;case Jt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Jt.ABORTED:return ae.ABORTED;case Jt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Jt.DATA_LOSS:return ae.DATA_LOSS;default:return De(39323,{code:n})}}(nt=Jt||(Jt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new Fo([4294967295,4294967295],0);function BE(n){const e=tO().encode(n),t=new aC;return t.update(e),new Uint8Array(t.digest())}function FE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Fo([t,i],0),new Fo([r,l],0)]}class fg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new cu(`Invalid padding: ${t}`);if(i<0)throw new cu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new cu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Fo.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Fo.fromNumber(i)));return r.compare(nO)===1&&(r=new Fo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=BE(e),[i,r]=FE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,r,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new fg(l,r,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=BE(e),[i,r]=FE(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,r,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t,i,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Cf(Ve.min(),r,new Pt(je),Qs(),Ze())}}class Lu{constructor(e,t,i,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Lu(i,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class YC{constructor(e,t){this.targetId=e,this.Ce=t}}class $C{constructor(e,t,i=yn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class GE{constructor(){this.ve=0,this.Fe=qE(),this.Me=yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),i=Ze();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:De(38017,{changeType:l})}})),new Lu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=qE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qs(),this.Je=pd(),this.He=pd(),this.Ye=new Pt(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(ym(l))if(i===0){const u=new Ie(l.path);this.et(t,u,Sn.newNoDocument(u,Ve.min()))}else ft(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),g=f?this.ct(f,e,u):1;if(g!==0){this.it(t);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:l=0}=t;let u,f;try{u=Yo(i).toUint8Array()}catch(g){if(g instanceof vC)return qa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new fg(u,r,l)}catch(g){return qa(g instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&ym(f.target)){const g=new Ie(f.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Sn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=Ze();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((g=>{const h=this.ot(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const r=new Cf(e,t,this.Ye,this.je,i);return this.je=Qs(),this.Je=pd(),this.He=pd(),this.Ye=new Pt(je),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new GE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new tn(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new tn(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function pd(){return new Pt(Ie.comparator)}function qE(){return new Pt(Ie.comparator)}const sO={asc:"ASCENDING",desc:"DESCENDING"},oO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rO={and:"AND",or:"OR"};class aO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _m(n,e){return n.useProto3Json||gf(e)?e:{value:e}}function jd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lO(n,e){return jd(n,e.toTimestamp())}function us(n){return ft(!!n,49232),Ve.fromTimestamp((function(t){const i=Ko(t);return new xt(i.seconds,i.nanos)})(n))}function hg(n,e){return Tm(n,e).canonicalString()}function Tm(n,e){const t=(function(r){return new Dt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function QC(n){const e=Dt.fromString(n);return ft(eb(e),10190,{key:e.toString()}),e}function Em(n,e){return hg(n.databaseId,e.path)}function Hp(n,e){const t=QC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(WC(t))}function XC(n,e){return hg(n.databaseId,e)}function uO(n){const e=QC(n);return e.length===4?Dt.emptyPath():WC(e)}function Sm(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WC(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zE(n,e,t){return{name:Em(n,e),fields:t.value.mapValue.fields}}function cO(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:De(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(h,_){return h.useProto3Json?(ft(_===void 0||typeof _=="string",58123),yn.fromBase64String(_||"")):(ft(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),yn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const _=h.code===void 0?ae.UNKNOWN:KC(h.code);return new Ae(_,h.message||"")})(u);t=new $C(i,r,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Hp(n,i.document.name),l=us(i.document.updateTime),u=i.document.createTime?us(i.document.createTime):Ve.min(),f=new vi({mapValue:{fields:i.document.fields}}),g=Sn.newFoundDocument(r,l,u,f),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Id(h,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Hp(n,i.document),l=i.readTime?us(i.readTime):Ve.min(),u=Sn.newNoDocument(r,l),f=i.removedTargetIds||[];t=new Id([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Hp(n,i.document),l=i.removedTargetIds||[];t=new Id([],l,r,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:l}=i,u=new Z4(r,l),f=i.targetId;t=new YC(f,u)}}return t}function dO(n,e){let t;if(e instanceof Uu)t={update:zE(n,e.key,e.value)};else if(e instanceof zC)t={delete:Em(n,e.key)};else if(e instanceof Or)t={update:zE(n,e.key,e.data),updateMask:TO(e.fieldMask)};else{if(!(e instanceof X4))return De(16599,{Vt:e.type});t={verify:Em(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof Xd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof wu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Iu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Wd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw De(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:lO(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De(27497)})(n,e.precondition)),t}function fO(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map((t=>(function(r,l){let u=r.updateTime?us(r.updateTime):us(l);return u.isEqual(Ve.min())&&(u=us(l)),new $4(u,r.transformResults||[])})(t,e)))):[]}function hO(n,e){return{documents:[XC(n,e.path)]}}function pO(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=XC(n,r);const l=(function(h){if(h.length!==0)return ZC(ps.create(h,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(h){if(h.length!==0)return h.map((_=>(function(S){return{field:Ra(S.field),direction:yO(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=_m(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function mO(n){let e=uO(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ft(i===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const S=jC(T);return S instanceof ps&&xC(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(H){return new Qd(Na(H.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,gf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,w=T.values||[];return new Jd(w,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,w=T.values||[];return new Jd(w,S)})(t.endAt)),P4(e,r,u,l,f,"F",g,h)}function gO(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Na(t.unaryFilter.field);return Zt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Na(t.unaryFilter.field);return Zt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Na(t.unaryFilter.field);return Zt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Na(t.unaryFilter.field);return Zt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Zt.create(Na(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ps.create(t.compositeFilter.filters.map((i=>jC(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function yO(n){return sO[n]}function vO(n){return oO[n]}function _O(n){return rO[n]}function Ra(n){return{fieldPath:n.canonicalString()}}function Na(n){return gn.fromServerFormat(n.fieldPath)}function ZC(n){return n instanceof Zt?(function(t){if(t.op==="=="){if(ME(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NAN"}};if(NE(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ME(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NOT_NAN"}};if(NE(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ra(t.field),op:vO(t.op),value:t.value}}})(n):n instanceof ps?(function(t){const i=t.getFilters().map((r=>ZC(r)));return i.length===1?i[0]:{compositeFilter:{op:_O(t.op),filters:i}}})(n):De(54877,{filter:n})}function TO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function eb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t,i,r,l=Ve.min(),u=Ve.min(),f=yn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Lo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Lo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.yt=e}}function SO(n){const e=mO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.Cn=new CO}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(zo.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(zo.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class CO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new tn(Dt.comparator),l=!r.has(i);return this.index[t]=r.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new tn(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tb=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(tb,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $a(0)}static cr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="LruGarbageCollector",bO=1048576;function $E([n,e],[t,i]){const r=je(n,t);return r===0?je(e,i):r}class wO{constructor(e){this.Ir=e,this.buffer=new tn($E),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();$E(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(YE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){il(t)?ve(YE,"Ignoring IndexedDB error during garbage collection: ",t):await nl(t)}await this.Vr(3e5)}))}}class xO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(mf.ce);const i=new wO(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(KE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,l,u,f,g,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),Ia()<=We.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(f-u)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(h-g)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function RO(n,e){return new xO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(){this.changes=new Lr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&vu(i.mutation,r,Li.empty(),xt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ze()){const r=Ir();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((l=>{let u=uu();return l.forEach(((f,g)=>{u=u.insert(f,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Ir();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ze())))}populateOverlays(e,t,i){const r=[];return i.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,r){let l=Qs();const u=yu(),f=(function(){return yu()})();return t.forEach(((g,h)=>{const _=i.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof Or)?l=l.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),vu(_.mutation,h,_.mutation.getFieldMask(),xt.now())):u.set(h.key,Li.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>f.set(h,new MO(_,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=yu();let r=new Pt(((u,f)=>u-f)),l=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((g=>{const h=t.get(g);if(h===null)return;let _=i.get(g)||Li.empty();_=f.applyToLocalView(h,_),i.set(g,_);const T=(r.get(f.batchId)||Ze()).add(g);r=r.insert(f.batchId,T)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),h=g.key,_=g.value,T=UC();_.forEach((S=>{if(!l.has(S)){const w=GC(t.get(S),i.get(S));w!==null&&T.set(S,w),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):k4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-l.size):se.resolve(Ir());let f=Su,g=l;return u.next((h=>se.forEach(h,((_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{g=g.insert(_,S)}))))).next((()=>this.populateOverlays(e,h,l))).next((()=>this.computeViews(e,g,h,Ze()))).next((_=>({batchId:f,changes:VC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((i=>{let r=uu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const l=t.collectionGroup;let u=uu();return this.indexManager.getCollectionParents(e,l).next((f=>se.forEach(f,(g=>{const h=(function(T,S){return new vf(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((_=>{_.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,r)))).next((u=>{l.forEach(((g,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,Sn.newInvalidDocument(_)))}));let f=uu();return u.forEach(((g,h)=>{const _=l.get(g);_!==void 0&&vu(_.mutation,h,Li.empty(),xt.now()),Ef(t,h)&&(f=f.insert(g,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:us(r.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:SO(r.bundledQuery),readTime:us(r.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.overlays=new Pt(Ie.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ir();return se.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&i.set(r,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const r=Ir(),l=t.length+1,u=new Ie(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,h=g.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===l&&g.largestBatchId>i&&r.set(g.getKey(),g)}return se.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let l=new Pt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=l.get(h.largestBatchId);_===null&&(_=Ir(),l=l.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const f=Ir(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,_)=>f.set(h,_))),!(f.size()>=r)););return se.resolve(f)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new j4(t,i));let l=this.qr.get(t);l===void 0&&(l=Ze(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this.Qr=new tn(on.$r),this.Ur=new tn(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new on(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new on(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ie(new Dt([])),i=new on(t,e),r=new on(t,e+1),l=[];return this.Ur.forEachInRange([i,r],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ie(new Dt([])),i=new on(t,e),r=new on(t,e+1);let l=Ze();return this.Ur.forEachInRange([i,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new on(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ie.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new tn(on.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new W4(l,t,i,r);this.mutationQueue.push(u);for(const f of r)this.Zr=this.Zr.add(new on(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),l=r<0?0:r;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?og:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new on(t,0),r=new on(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,r],(u=>{const f=this.Xr(u.Yr);l.push(f)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tn(je);return t.forEach((r=>{const l=new on(r,0),u=new on(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{i=i.add(f.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let l=i;Ie.isDocumentKey(l)||(l=l.child(""));const u=new on(new Ie(l),0);let f=new tn(je);return this.Zr.forEachWhile((g=>{const h=g.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(f=f.add(g.Yr)),!0)}),u),se.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ft(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(r=>{const l=new on(r.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new on(t,0),r=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.ri=e,this.docs=(function(){return new Pt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),l=r?r.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let i=Qs();return t.forEach((r=>{const l=this.docs.get(r);i=i.insert(r,l?l.document.mutableCopy():Sn.newInvalidDocument(r))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let l=Qs();const u=t.path,f=new Ie(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:h,value:{document:_}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||d4(c4(_),i)<=0||(r.has(_.key)||Ef(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,i,r){De(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new OO(this)}getSize(e){return se.resolve(this.size)}}class OO extends NO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.persistence=e,this.si=new Lr((t=>lg(t)),ug),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new pg,this.targetCount=0,this.ai=$a.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new $a(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let r=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),se.waitFor(l).next((()=>r))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.ui={},this.overlays={},this.ci=new mf(0),this.li=!1,this.li=!0,this.hi=new VO,this.referenceDelegate=e(this),this.Pi=new HO(this),this.indexManager=new AO,this.remoteDocumentCache=(function(r){return new LO(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new EO(t),this.Ii=new PO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new UO(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const r=new BO(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class BO extends h4{constructor(e){super(),this.currentSequenceNumber=e}}class mg{constructor(e){this.persistence=e,this.Ri=new pg,this.Vi=null}static mi(e){return new mg(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const r=Ie.fromPath(i);return this.gi(e,r).next((l=>{l||t.removeEntry(r,Ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Zd{constructor(e,t){this.persistence=e,this.pi=new Lr((i=>g4(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=RO(this,t)}static mi(e,t){return new Zd(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,r)=>this.br(e,i,r).next((l=>l?se.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,l.removeEntry(u,Ve.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cd(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=Ze(),r=Ze();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new gg(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Dk()?8:p4(Cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,r,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new FO;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(Ia()<=We.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",xa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Ia()<=We.DEBUG&&ve("QueryEngine","Query:",xa(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Ia()<=We.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",xa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(t))):se.resolve())}ys(e,t){if(VE(t))return se.resolve(null);let i=ls(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=vm(t,null,"F"),i=ls(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=Ze(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const h=this.Ds(t,f);return this.Cs(t,h,u,g.readTime)?this.ys(e,vm(t,null,"F")):this.vs(e,h,t,g)}))))})))))}ws(e,t,i,r){return VE(t)||r.isEqual(Ve.min())?se.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,r)?se.resolve(null):(Ia()<=We.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xa(t)),this.vs(e,u,t,u4(r,Su)).next((f=>f)))}))}Ds(e,t){let i=new tn(PC(e));return t.forEach(((r,l)=>{Ef(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,i){return Ia()<=We.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",xa(t)),this.ps.getDocumentsMatchingQuery(e,t,zo.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="LocalStore",qO=3e8;class zO{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Pt(je),this.xs=new Lr((l=>lg(l)),ug),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function KO(n,e,t,i){return new zO(n,e,t,i)}async function ib(n,e){const t=Le(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let g=Ze();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}for(const h of l){f.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function YO(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,h,_){const T=h.batch,S=T.keys();let w=se.resolve();return S.forEach((H=>{w=w.next((()=>_.getEntry(g,H))).next((P=>{const k=h.docVersions.get(H);ft(k!==null,48541),P.version.compareTo(k)<0&&(T.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),_.addEntry(P)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=Ze();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(g=g.add(f.batch.mutations[h].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function sb(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function $O(n,e){const t=Le(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const f=[];e.targetChanges.forEach(((_,T)=>{const S=r.get(T);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(yn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,i)),r=r.insert(T,w),(function(P,k,K){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=qO?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,w,_)&&f.push(t.Pi.updateTargetData(l,w))}));let g=Qs(),h=Ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(JO(l,u,e.documentUpdates).next((_=>{g=_.ks,h=_.qs}))),!i.isEqual(Ve.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return se.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,h))).next((()=>g))})).then((l=>(t.Ms=r,l)))}function JO(n,e,t){let i=Ze(),r=Ze();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=Qs();return t.forEach(((f,g)=>{const h=l.get(f);g.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(f)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):ve(yg,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",g.version)})),{ks:u,qs:r}}))}function QO(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=og),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function XO(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((l=>l?(r=l,se.resolve(r)):t.Pi.allocateTargetId(i).next((u=>(r=new Lo(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Am(n,e,t){const i=Le(n),r=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!il(u))throw u;ve(yg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function JE(n,e,t){const i=Le(n);let r=Ve.min(),l=Ze();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,_){const T=Le(g),S=T.xs.get(_);return S!==void 0?se.resolve(T.Ms.get(S)):T.Pi.getTargetData(h,_)})(i,u,ls(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?r:Ve.min(),t?l:Ze()))).next((f=>(WO(i,U4(e),f),{documents:f,Qs:l})))))}function WO(n,e,t){let i=n.Os.get(e)||Ve.min();t.forEach(((r,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class QE{constructor(){this.activeTargetIds=G4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jO{constructor(){this.Mo=new QE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new QE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="ConnectivityMonitor";class WE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(XE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(XE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md=null;function Cm(){return md===null?md=(function(){return 268435456+Math.round(2147483648*Math.random())})():md++,"0x"+md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="RestConnection",e5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Yd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,l){const u=Cm(),f=this.zo(e,t.toUriEncodedString());ve(Bp,`Sending RPC '${e}' ${u}:`,f,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,l);const{host:h}=new URL(f),_=ja(h);return this.Jo(e,f,g,i,_).then((T=>(ve(Bp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw qa(Bp,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,r,l,u){return this.Go(e,t,i,r,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),i&&i.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const i=e5[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class i5 extends t5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,l){const u=Cm();return new Promise(((f,g)=>{const h=new lC;h.setWithCredentials(!0),h.listenOnce(uC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ad.NO_ERROR:const T=h.getResponseJson();ve(Tn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case Ad.TIMEOUT:ve(Tn,`RPC '${e}' ${u} timed out`),g(new Ae(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Ad.HTTP_ERROR:const S=h.getStatus();if(ve(Tn,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const H=w==null?void 0:w.error;if(H&&H.status&&H.message){const P=(function(K){const B=K.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(B)>=0?B:ae.UNKNOWN})(H.status);g(new Ae(P,H.message))}else g(new Ae(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else g(new Ae(ae.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ve(Tn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ve(Tn,`RPC '${e}' ${u} sending request:`,r),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const r=Cm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fC(),f=dC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(g.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const _=l.join("");ve(Tn,`Creating RPC '${e}' stream ${r}: ${_}`,g);const T=u.createWebChannel(_,g);this.I_(T);let S=!1,w=!1;const H=new n5({Yo:k=>{w?ve(Tn,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(S||(ve(Tn,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),ve(Tn,`RPC '${e}' stream ${r} sending:`,k),T.send(k))},Zo:()=>T.close()}),P=(k,K,B)=>{k.listen(K,(ee=>{try{B(ee)}catch(re){setTimeout((()=>{throw re}),0)}}))};return P(T,lu.EventType.OPEN,(()=>{w||(ve(Tn,`RPC '${e}' stream ${r} transport opened.`),H.o_())})),P(T,lu.EventType.CLOSE,(()=>{w||(w=!0,ve(Tn,`RPC '${e}' stream ${r} transport closed`),H.a_(),this.E_(T))})),P(T,lu.EventType.ERROR,(k=>{w||(w=!0,qa(Tn,`RPC '${e}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),H.a_(new Ae(ae.UNAVAILABLE,"The operation could not be completed")))})),P(T,lu.EventType.MESSAGE,(k=>{var K;if(!w){const B=k.data[0];ft(!!B,16349);const ee=B,re=(ee==null?void 0:ee.error)||((K=ee[0])==null?void 0:K.error);if(re){ve(Tn,`RPC '${e}' stream ${r} received error:`,re);const he=re.status;let fe=(function(R){const O=Jt[R];if(O!==void 0)return KC(O)})(he),M=re.message;fe===void 0&&(fe=ae.INTERNAL,M="Unknown error status: "+he+" with message "+re.message),w=!0,H.a_(new Ae(fe,M)),T.close()}else ve(Tn,`RPC '${e}' stream ${r} received:`,B),H.u_(B)}})),P(f,cC.STAT_EVENT,(k=>{k.stat===fm.PROXY?ve(Tn,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===fm.NOPROXY&&ve(Tn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(n){return new aO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,t,i=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="PersistentStream";class rb{constructor(e,t,i,r,l,u,f,g){this.Mi=e,this.S_=i,this.b_=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ob(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Js(t.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Ae(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(jE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(jE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class s5 extends rb{constructor(e,t,i,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=cO(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ve.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ve.min():u.readTime?us(u.readTime):Ve.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Sm(this.serializer),t.addTarget=(function(l,u){let f;const g=u.target;if(f=ym(g)?{documents:hO(l,g)}:{query:pO(l,g).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=JC(l,u.resumeToken);const h=_m(l,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ve.min())>0){f.readTime=jd(l,u.snapshotVersion.toTimestamp());const h=_m(l,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=gO(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Sm(this.serializer),t.removeTarget=e,this.q_(t)}}class o5 extends rb{constructor(e,t,i,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=fO(e.writeResults,e.commitTime),i=us(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Sm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>dO(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{}class a5 extends r5{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Tm(t,i),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(ae.UNKNOWN,l.toString())}))}Ho(e,t,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,Tm(t,i),r,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ae.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class l5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Js(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="RemoteStore";class u5{constructor(e,t,i,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Hr(this)&&(ve(kr,"Restarting streams for network reachability change."),await(async function(g){const h=Le(g);h.Ea.add(4),await Ou(h),h.Ra.set("Unknown"),h.Ea.delete(4),await wf(h)})(this))}))})),this.Ra=new l5(i,r)}}async function wf(n){if(Hr(n))for(const e of n.da)await e(!0)}async function Ou(n){for(const e of n.da)await e(!1)}function ab(n,e){const t=Le(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Eg(t)?Tg(t):sl(t).O_()&&_g(t,e))}function vg(n,e){const t=Le(n),i=sl(t);t.Ia.delete(e),i.O_()&&lb(t,e),t.Ia.size===0&&(i.O_()?i.L_():Hr(t)&&t.Ra.set("Unknown"))}function _g(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sl(n).Y_(e)}function lb(n,e){n.Va.Ue(e),sl(n).Z_(e)}function Tg(n){n.Va=new iO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),sl(n).start(),n.Ra.ua()}function Eg(n){return Hr(n)&&!sl(n).x_()&&n.Ia.size>0}function Hr(n){return Le(n).Ea.size===0}function ub(n){n.Va=void 0}async function c5(n){n.Ra.set("Online")}async function d5(n){n.Ia.forEach(((e,t)=>{_g(n,e)}))}async function f5(n,e){ub(n),Eg(n)?(n.Ra.ha(e),Tg(n)):n.Ra.set("Unknown")}async function h5(n,e,t){if(n.Ra.set("Online"),e instanceof $C&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const f of l.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.Ia.delete(f),r.Va.removeTarget(f))})(n,e)}catch(i){ve(kr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ef(n,i)}else if(e instanceof Id?n.Va.Ze(e):e instanceof YC?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ve.min()))try{const i=await sb(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(h);_&&l.Ia.set(h,_.withResumeToken(g.resumeToken,u))}})),f.targetMismatches.forEach(((g,h)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(yn.EMPTY_BYTE_STRING,_.snapshotVersion)),lb(l,g);const T=new Lo(_.target,g,h,_.sequenceNumber);_g(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){ve(kr,"Failed to raise snapshot:",i),await ef(n,i)}}async function ef(n,e,t){if(!il(e))throw e;n.Ea.add(1),await Ou(n),n.Ra.set("Offline"),t||(t=()=>sb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(kr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await wf(n)}))}function cb(n,e){return e().catch((t=>ef(n,t,e)))}async function If(n){const e=Le(n),t=Jo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:og;for(;p5(e);)try{const r=await QO(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,m5(e,r)}catch(r){await ef(e,r)}db(e)&&fb(e)}function p5(n){return Hr(n)&&n.Ta.length<10}function m5(n,e){n.Ta.push(e);const t=Jo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function db(n){return Hr(n)&&!Jo(n).x_()&&n.Ta.length>0}function fb(n){Jo(n).start()}async function g5(n){Jo(n).ra()}async function y5(n){const e=Jo(n);for(const t of n.Ta)e.ea(t.mutations)}async function v5(n,e,t){const i=n.Ta.shift(),r=dg.from(i,e,t);await cb(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await If(n)}async function _5(n,e){e&&Jo(n).X_&&await(async function(i,r){if((function(u){return eO(u)&&u!==ae.ABORTED})(r.code)){const l=i.Ta.shift();Jo(i).B_(),await cb(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r))),await If(i)}})(n,e),db(n)&&fb(n)}async function ZE(n,e){const t=Le(n);t.asyncQueue.verifyOperationInProgress(),ve(kr,"RemoteStore received new credentials");const i=Hr(t);t.Ea.add(3),await Ou(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await wf(t)}async function T5(n,e){const t=Le(n);e?(t.Ea.delete(2),await wf(t)):e||(t.Ea.add(2),await Ou(t),t.Ra.set("Unknown"))}function sl(n){return n.ma||(n.ma=(function(t,i,r){const l=Le(t);return l.sa(),new s5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:c5.bind(null,n),t_:d5.bind(null,n),r_:f5.bind(null,n),H_:h5.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Eg(n)?Tg(n):n.Ra.set("Unknown")):(await n.ma.stop(),ub(n))}))),n.ma}function Jo(n){return n.fa||(n.fa=(function(t,i,r){const l=Le(t);return l.sa(),new o5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:g5.bind(null,n),r_:_5.bind(null,n),ta:y5.bind(null,n),na:v5.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await If(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(kr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,i,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=l,this.deferred=new Go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,l){const u=Date.now()+i,f=new Sg(e,t,u,r,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ag(n,e){if(Js("AsyncQueue",`${e}: ${n}`),il(n))return new Ae(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{static emptySet(e){return new Ha(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ie.comparator(t.key,i.key):(t,i)=>Ie.comparator(t.key,i.key),this.keyedMap=uu(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ha)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ha;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.ga=new Pt(Ie.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ja{constructor(e,t,i,r,l,u,f,g,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Ja(e,t,Ha.emptySet(t),u,i,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class S5{constructor(){this.queries=tS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Le(t),l=r.queries;r.queries=tS(),l.forEach(((u,f)=>{for(const g of f.Sa)g.onError(i)}))})(this,new Ae(ae.ABORTED,"Firestore shutting down"))}}function tS(){return new Lr((n=>DC(n)),Tf)}async function hb(n,e){const t=Le(n);let i=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(i=2):(l=new E5,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const f=Ag(u,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Cg(t)}async function pb(n,e){const t=Le(n),i=e.query;let r=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function A5(n,e){const t=Le(n);let i=!1;for(const r of e){const l=r.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(r)&&(i=!0);u.wa=r}}i&&Cg(t)}function C5(n,e,t){const i=Le(n),r=i.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);i.queries.delete(e)}function Cg(n){n.Ca.forEach((e=>{e.next()}))}var bm,nS;(nS=bm||(bm={})).Ma="default",nS.Cache="cache";class mb{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ja(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.key=e}}class yb{constructor(e){this.key=e}}class b5{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=PC(e),this.tu=new Ha(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new eS,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const S=r.get(_),w=Ef(this.query,T)?T:null,H=!!S&&this.mutatedKeys.has(S.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let k=!1;S&&w?S.data.isEqual(w.data)?H!==P&&(i.track({type:3,doc:w}),k=!0):this.su(S,w)||(i.track({type:2,doc:w}),k=!0,(g&&this.eu(w,g)>0||h&&this.eu(w,h)<0)&&(f=!0)):!S&&w?(i.track({type:0,doc:w}),k=!0):S&&!w&&(i.track({type:1,doc:S}),k=!0,(g||h)&&(f=!0)),k&&(w?(u=u.add(w),l=P?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(w,H){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:k})}};return P(w)-P(H)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const f=t&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,h=g!==this.Za;return this.Za=g,u.length!==0||h?{snapshot:new Ja(this.query,e.tu,l,u,e.mutatedKeys,g===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new yb(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new gb(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ja.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bg="SyncEngine";class w5{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class I5{constructor(e){this.key=e,this.hu=!1}}class x5{constructor(e,t,i,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Lr((f=>DC(f)),Tf),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(Ie.comparator),this.Au=new Map,this.Ru=new pg,this.Vu={},this.mu=new Map,this.fu=$a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function R5(n,e,t=!0){const i=Ab(n);let r;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await vb(i,e,t,!0),r}async function N5(n,e){const t=Ab(n);await vb(t,e,!0,!1)}async function vb(n,e,t,i){const r=await XO(n.localStore,ls(e)),l=r.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await M5(n,e,l,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&ab(n.remoteStore,r),f}async function M5(n,e,t,i,r){n.pu=(T,S,w)=>(async function(P,k,K,B){let ee=k.view.ru(K);ee.Cs&&(ee=await JE(P.localStore,k.query,!1).then((({documents:M})=>k.view.ru(M,ee))));const re=B&&B.targetChanges.get(k.targetId),he=B&&B.targetMismatches.get(k.targetId)!=null,fe=k.view.applyChanges(ee,P.isPrimaryClient,re,he);return sS(P,k.targetId,fe.au),fe.snapshot})(n,T,S,w);const l=await JE(n.localStore,e,!0),u=new b5(e,l.Qs),f=u.ru(l.documents),g=Lu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=u.applyChanges(f,n.isPrimaryClient,g);sS(n,t,h.au);const _=new w5(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function D5(n,e,t){const i=Le(n),r=i.Tu.get(e),l=i.Iu.get(r.targetId);if(l.length>1)return i.Iu.set(r.targetId,l.filter((u=>!Tf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Am(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&vg(i.remoteStore,r.targetId),wm(i,r.targetId)})).catch(nl)):(wm(i,r.targetId),await Am(i.localStore,r.targetId,!0))}async function P5(n,e){const t=Le(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),vg(t.remoteStore,i.targetId))}async function k5(n,e,t){const i=F5(n);try{const r=await(function(u,f){const g=Le(u),h=xt.now(),_=f.reduce(((w,H)=>w.add(H.key)),Ze());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let H=Qs(),P=Ze();return g.Ns.getEntries(w,_).next((k=>{H=k,H.forEach(((K,B)=>{B.isValidDocument()||(P=P.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,H))).next((k=>{T=k;const K=[];for(const B of f){const ee=Q4(B,T.get(B.key).overlayedDocument);ee!=null&&K.push(new Or(B.key,ee,bC(ee.value.mapValue),zs.exists(!0)))}return g.mutationQueue.addMutationBatch(w,h,K,f)})).next((k=>{S=k;const K=k.applyToLocalDocumentSet(T,P);return g.documentOverlayCache.saveOverlays(w,k.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:VC(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,f,g){let h=u.Vu[u.currentUser.toKey()];h||(h=new Pt(je)),h=h.insert(f,g),u.Vu[u.currentUser.toKey()]=h})(i,r.batchId,t),await Hu(i,r.changes),await If(i.remoteStore)}catch(r){const l=Ag(r,"Failed to persist write");t.reject(l)}}async function _b(n,e){const t=Le(n);try{const i=await $O(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=t.Au.get(l);u&&(ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?ft(u.hu,14607):r.removedDocuments.size>0&&(ft(u.hu,42227),u.hu=!1))})),await Hu(t,i,e)}catch(i){await nl(i)}}function iS(n,e,t){const i=Le(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const g=Le(u);g.onlineState=f;let h=!1;g.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(f)&&(h=!0)})),h&&Cg(g)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function V5(n,e,t){const i=Le(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),l=r&&r.key;if(l){let u=new Pt(Ie.comparator);u=u.insert(l,Sn.newNoDocument(l,Ve.min()));const f=Ze().add(l),g=new Cf(Ve.min(),new Map,new Pt(je),u,f);await _b(i,g),i.du=i.du.remove(l),i.Au.delete(e),wg(i)}else await Am(i.localStore,e,!1).then((()=>wm(i,e,t))).catch(nl)}async function U5(n,e){const t=Le(n),i=e.batch.batchId;try{const r=await YO(t.localStore,e);Eb(t,i,null),Tb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Hu(t,r)}catch(r){await nl(r)}}async function L5(n,e,t){const i=Le(n);try{const r=await(function(u,f){const g=Le(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return g.mutationQueue.lookupMutationBatch(h,f).next((T=>(ft(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(h,T)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>g.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);Eb(i,e,t),Tb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Hu(i,r)}catch(r){await nl(r)}}function Tb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Eb(n,e,t){const i=Le(n);let r=i.Vu[i.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function wm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Sb(n,i)}))}function Sb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(vg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),wg(n))}function sS(n,e,t){for(const i of t)i instanceof gb?(n.Ru.addReference(i.key,e),O5(n,i)):i instanceof yb?(ve(bg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Sb(n,i.key)):De(19791,{wu:i})}function O5(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ve(bg,"New document in limbo: "+t),n.Eu.add(i),wg(n))}function wg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ie(Dt.fromString(e)),i=n.fu.next();n.Au.set(i,new I5(t)),n.du=n.du.insert(t,i),ab(n.remoteStore,new Lo(ls(_f(t.path)),i,"TargetPurposeLimboResolution",mf.ce))}}async function Hu(n,e,t){const i=Le(n),r=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{u.push(i.pu(g,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(h){r.push(h);const T=gg.As(g.targetId,h);l.push(T)}})))})),await Promise.all(u),i.Pu.H_(r),await(async function(g,h){const _=Le(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(S=>se.forEach(S.Es,(w=>_.persistence.referenceDelegate.addReference(T,S.targetId,w))).next((()=>se.forEach(S.ds,(w=>_.persistence.referenceDelegate.removeReference(T,S.targetId,w)))))))))}catch(T){if(!il(T))throw T;ve(yg,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const w=_.Ms.get(S),H=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(H);_.Ms=_.Ms.insert(S,P)}}})(i.localStore,l))}async function H5(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){ve(bg,"User change. New user:",e.toKey());const i=await ib(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new Ae(ae.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hu(t,i.Ls)}}function B5(n,e){const t=Le(n),i=t.Au.get(e);if(i&&i.hu)return Ze().add(i.key);{let r=Ze();const l=t.Iu.get(e);if(!l)return r;for(const u of l){const f=t.Tu.get(u);r=r.unionWith(f.view.nu)}return r}}function Ab(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_b.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V5.bind(null,e),e.Pu.H_=A5.bind(null,e.eventManager),e.Pu.yu=C5.bind(null,e.eventManager),e}function F5(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L5.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KO(this.persistence,new GO,e.initialUser,this.serializer)}Cu(e){return new nb(mg.mi,this.serializer)}Du(e){return new jO}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class G5 extends tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ft(this.persistence.referenceDelegate instanceof Zd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new IO(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new nb((i=>Zd.mi(i,t)),this.serializer)}}class Im{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=H5.bind(null,this.syncEngine),await T5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new S5})()}createDatastore(e){const t=bf(e.databaseInfo.databaseId),i=(function(l){return new i5(l)})(e.databaseInfo);return(function(l,u,f,g){return new a5(l,u,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,l,u,f){return new u5(i,r,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>iS(this.syncEngine,t,0)),(function(){return WE.v()?new WE:new ZO})())}createSyncEngine(e,t){return(function(r,l,u,f,g,h,_){const T=new x5(r,l,u,f,g,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Le(r);ve(kr,"RemoteStore shutting down."),l.Ea.add(5),await Ou(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Im.provider={build:()=>new Im};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Js("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="FirestoreClient";class q5{constructor(e,t,i,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=En.UNAUTHENTICATED,this.clientId=ig.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{ve(Qo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ve(Qo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ag(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Gp(n,e){n.asyncQueue.verifyOperationInProgress(),ve(Qo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await ib(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function oS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await z5(n);ve(Qo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>ZE(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>ZE(e.remoteStore,r))),n._onlineComponents=e}async function z5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(Qo,"Using user provided OfflineComponentProvider");try{await Gp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ae.FAILED_PRECONDITION||r.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;qa("Error using user provided cache. Falling back to memory cache: "+t),await Gp(n,new tf)}}else ve(Qo,"Using default OfflineComponentProvider"),await Gp(n,new G5(void 0));return n._offlineComponents}async function bb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(Qo,"Using user provided OnlineComponentProvider"),await oS(n,n._uninitializedComponentsProvider._online)):(ve(Qo,"Using default OnlineComponentProvider"),await oS(n,new Im))),n._onlineComponents}function K5(n){return bb(n).then((e=>e.syncEngine))}async function xm(n){const e=await bb(n),t=e.eventManager;return t.onListen=R5.bind(null,e.syncEngine),t.onUnlisten=D5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=P5.bind(null,e.syncEngine),t}function Y5(n,e,t={}){const i=new Go;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,h){const _=new Cb({next:S=>{_.Nu(),u.enqueueAndForget((()=>pb(l,T)));const w=S.docs.has(f);!w&&S.fromCache?h.reject(new Ae(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&g&&g.source==="server"?h.reject(new Ae(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new mb(_f(f.path),_,{includeMetadataChanges:!0,qa:!0});return hb(l,T)})(await xm(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firestore.googleapis.com",aS=!0;class lS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ib,this.ssl=aS}else this.host=e.host,this.ssl=e.ssl??aS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bO)throw new Ae(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ig{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new WL;switch(i.type){case"firstParty":return new t4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=rS.get(t);i&&(ve("ComponentProvider","Removing Datastore"),rS.delete(t),i.terminate())})(this),Promise.resolve()}}function $5(n,e,t,i={}){var h;n=qo(n,Ig);const r=ja(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(AA(`https://${f}`),CA("Firestore",!0)),l.host!==Ib&&l.host!==f&&qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:r,emulatorOptions:i};if(!Nr(g,u)&&(n._setSettings(g),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=En.MOCK_USER;else{_=Ak(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Ae(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new En(S)}n._authCredentials=new jL(new pC(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xf(this.firestore,e,this._query)}}class en{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}toJSON(){return{type:en._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Vu(t,en._jsonSchema))return new en(e,i||null,new Ie(Dt.fromString(t.referencePath)))}}en._jsonSchemaVersion="firestore/documentReference/1.0",en._jsonSchema={type:Qt("string",en._jsonSchemaVersion),referencePath:Qt("string")};class xu extends xf{constructor(e,t,i){super(e,t,_f(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new Ie(e))}withConverter(e){return new xu(this.firestore,e,this._path)}}function xd(n,e,...t){if(n=jn(n),arguments.length===1&&(e=ig.newId()),a4("doc","path",e),n instanceof Ig){const i=Dt.fromString(e,...t);return SE(i),new en(n,null,new Ie(i))}{if(!(n instanceof en||n instanceof xu))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Dt.fromString(e,...t));return SE(i),new en(n.firestore,n instanceof xu?n.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="AsyncQueue";class cS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ob(this,"async_queue_retry"),this._c=()=>{const i=Fp();i&&ve(uS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Fp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Go;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!il(e))throw e;ve(uS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Js("INTERNAL UNHANDLED ERROR: ",dS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Sg.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&De(47125,{Pc:dS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function dS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const l of i)if(l in r&&typeof r[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Ru extends Ig{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new cS,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cS(e),this._firestoreClient=void 0,await e}}}function J5(n,e){const t=typeof n=="object"?n:xA(),i=typeof n=="string"?n:Yd,r=Km(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const l=Ek("firestore");l&&$5(r,...l)}return r}function xg(n){if(n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Q5(n),n._firestoreClient}function Q5(n){var i,r,l;const e=n._freezeSettings(),t=(function(f,g,h,_){return new _4(f,g,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,wb(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new q5(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _i(yn.fromBase64String(e))}catch(t){throw new Ae(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _i(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_i._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vu(e,_i._jsonSchema))return _i.fromBase64String(e.bytes)}}_i._jsonSchemaVersion="firestore/bytes/1.0",_i._jsonSchema={type:Qt("string",_i._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cs._jsonSchemaVersion}}static fromJSON(e){if(Vu(e,cs._jsonSchema))return new cs(e.latitude,e.longitude)}}cs._jsonSchemaVersion="firestore/geoPoint/1.0",cs._jsonSchema={type:Qt("string",cs._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ds._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vu(e,ds._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ds(e.vectorValues);throw new Ae(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ds._jsonSchemaVersion="firestore/vectorValue/1.0",ds._jsonSchema={type:Qt("string",ds._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=/^__.*__$/;class W5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uu(e,this.data,t,this.fieldTransforms)}}function Rb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class Ng{constructor(e,t,i,r,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ng({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rb(this.Ac)&&X5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j5{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||bf(e)}Cc(e,t,i,r=!1){return new Ng({Ac:e,methodName:t,Dc:i,path:gn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z5(n){const e=n._freezeSettings(),t=bf(n._databaseId);return new j5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function e3(n,e,t,i,r,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);Pb("Data must be an object, but it was:",u,i);const f=Mb(i,u);let g,h;if(l.merge)g=new Li(u.fieldMask),h=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const S=t3(e,T,t);if(!u.contains(S))throw new Ae(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);i3(_,S)||_.push(S)}g=new Li(_),h=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,h=u.fieldTransforms;return new W5(new vi(f),g,h)}function Nb(n,e){if(Db(n=jn(n)))return Pb("Unsupported field value:",e,n),Mb(n,e);if(n instanceof xb)return(function(i,r){if(!Rb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const l=[];let u=0;for(const f of i){let g=Nb(f,r.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,r){if((i=jn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return q4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=xt.fromDate(i);return{timestampValue:jd(r.serializer,l)}}if(i instanceof xt){const l=new xt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:jd(r.serializer,l)}}if(i instanceof cs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _i)return{bytesValue:JC(r.serializer,i._byteString)};if(i instanceof en){const l=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:hg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ds)return(function(u,f){return{mapValue:{fields:{[AC]:{stringValue:CC},[$d]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return cg(f.serializer,h)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${sg(i)}`)})(n,e)}function Mb(n,e){const t={};return yC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(n,((i,r)=>{const l=Nb(r,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Db(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xt||n instanceof cs||n instanceof _i||n instanceof en||n instanceof xb||n instanceof ds)}function Pb(n,e,t){if(!Db(t)||!mC(t)){const i=sg(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function t3(n,e,t){if((e=jn(e))instanceof Rg)return e._internalPath;if(typeof e=="string")return kb(n,e);throw nf("Field path arguments must be of type string or ",n,!1,void 0,t)}const n3=new RegExp("[~\\*/\\[\\]]");function kb(n,e,t){if(e.search(n3)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rg(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nf(n,e,t,i,r){const l=i&&!i.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${i}`),u&&(g+=` in document ${r}`),g+=")"),new Ae(ae.INVALID_ARGUMENT,f+n+g)}function i3(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t,i,r,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new s3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ub("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class s3 extends Vb{data(){return super.data()}}function Ub(n,e){return typeof e=="string"?kb(n,e):e instanceof Rg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r3{convertValue(e,t="none"){switch($o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ur(e,((r,l)=>{i[r]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,r,l;const t=(l=(r=(i=e.fields)==null?void 0:i[$d].arrayValue)==null?void 0:r.values)==null?void 0:l.map((u=>Bt(u.doubleValue)));return new ds(t)}convertGeoPoint(e){return new cs(Bt(e.latitude),Bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=yf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const t=Ko(e);return new xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Dt.fromString(e);ft(eb(i),9688,{name:e});const r=new Cu(i.get(1),i.get(3)),l=new Ie(i.popFirst(5));return r.isEqual(t)||Js(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class du{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rr extends Vb{constructor(e,t,i,r,l,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ub("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Rr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Rr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rr._jsonSchema={type:Qt("string",Rr._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Rd extends Rr{data(e={}){return super.data(e)}}class Ba{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new du(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Rd(this._firestore,this._userDataWriter,i.key,i,new du(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const g=new Rd(r._firestore,r._userDataWriter,f.doc.key,f.doc,new du(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Rd(r._firestore,r._userDataWriter,f.doc.key,f.doc,new du(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:l3(f.type),doc:g,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ba._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ig.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(n){n=qo(n,en);const e=qo(n.firestore,Ru);return Y5(xg(e),n._key).then((t=>Ob(e,n,t)))}Ba._jsonSchemaVersion="firestore/querySnapshot/1.0",Ba._jsonSchema={type:Qt("string",Ba._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Lb extends r3{constructor(e){super(),this.firestore=e}convertBytes(e){return new _i(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,t)}}function hS(n,e,t){n=qo(n,en);const i=qo(n.firestore,Ru),r=a3(n.converter,e,t);return d3(i,[e3(Z5(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,zs.none())])}function c3(n,...e){var g,h,_;n=jn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||fS(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(fS(e[i])){const T=e[i];e[i]=(g=T.next)==null?void 0:g.bind(T),e[i+1]=(h=T.error)==null?void 0:h.bind(T),e[i+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,u,f;if(n instanceof en)u=qo(n.firestore,Ru),f=_f(n._key.path),l={next:T=>{e[i]&&e[i](Ob(u,n,T))},error:e[i+1],complete:e[i+2]};else{const T=qo(n,xf);u=qo(T.firestore,Ru),f=T._query;const S=new Lb(u);l={next:w=>{e[i]&&e[i](new Ba(u,S,T,w))},error:e[i+1],complete:e[i+2]},o3(n._query)}return(function(S,w,H,P){const k=new Cb(P),K=new mb(w,k,H);return S.asyncQueue.enqueueAndForget((async()=>hb(await xm(S),K))),()=>{k.Nu(),S.asyncQueue.enqueueAndForget((async()=>pb(await xm(S),K)))}})(xg(u),f,r,l)}function d3(n,e){return(function(i,r){const l=new Go;return i.asyncQueue.enqueueAndForget((async()=>k5(await K5(i),r,l))),l.promise})(xg(n),e)}function Ob(n,e,t){const i=t.docs.get(e._key),r=new Lb(n);return new Rr(n,r,e._key,i,new du(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){tl=r})(Za),Fa(new Mr("firestore",((i,{instanceIdentifier:r,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Ru(new ZL(i.getProvider("auth-internal")),new n4(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ae(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cu(h.options.projectId,_)})(u,r),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Bo(vE,_E,e),Bo(vE,_E,"esm2020")})();var f3="firebase",h3="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bo(f3,h3,"app");const p3={apiKey:"AIzaSyDj1IdjKsPsC0UKQeUtP8v3sCPo4IRQdt0",authDomain:"web-app-8b273.firebaseapp.com",projectId:"web-app-8b273",storageBucket:"web-app-8b273.firebasestorage.app",messagingSenderId:"512346814244",appId:"1:512346814244:web:a8322ebf02727a508ae5b1",measurementId:"G-B9H3XP1PNB"},Hb=IA(p3),qp=QL(Hb),m3=new Fs,Nd=J5(Hb),Bb=oe.createContext(void 0),g3=({children:n})=>{const[e,t]=oe.useState(null),[i,r]=oe.useState(!0),[l,u]=oe.useState(null),[f,g]=oe.useState(null),h=async P=>{try{const k=xd(Nd,"users",P),K=await u3(k);K.exists()?u(K.data().geminiApiKey||null):u(null)}catch(k){console.error("Error fetching API key:",k),u(null)}};oe.useEffect(()=>{const P=LU(qp,async k=>{t(k),k?await h(k.uid):u(null),r(!1)});return()=>P()},[]);const _=()=>g(null),T=async()=>{g(null);try{await sL(qp,m3)}catch(P){console.error("Error signing in with Google",P);let k="Login failed. Please try again.";if(P.code==="auth/configuration-not-found")k=` Firebase Console 
 Authentication  'Get Started'`;else if(P.code==="auth/operation-not-allowed")k=` Google 
 Firebase Console > Authentication > Sign-in method  Google`;else if(P.code==="auth/unauthorized-domain")k=` (Unauthorized Domain)

 (${window.location.hostname})  Firebase 
 Firebase Console > Authentication > Settings > Authorized domains `;else{if(P.code==="auth/popup-closed-by-user")return;P.message&&(k=`Login failed: ${P.message}`)}g(k)}},S=async()=>{try{await OU(qp),u(null),g(null)}catch(P){console.error("Error signing out",P)}},w=async P=>{if(e)try{await hS(xd(Nd,"users",e.uid),{geminiApiKey:P,updatedAt:new Date().toISOString(),email:e.email},{merge:!0}),u(P)}catch(k){throw console.error("Error saving API key:",k),k}},H=async()=>{if(e)try{await hS(xd(Nd,"users",e.uid),{geminiApiKey:null,updatedAt:new Date().toISOString()},{merge:!0}),u(null)}catch(P){throw console.error("Error removing API key:",P),P}};return C.jsx(Bb.Provider,{value:{user:e,loading:i,apiKey:l,error:f,signInWithGoogle:T,signOut:S,saveApiKey:w,removeApiKey:H,clearError:_},children:n})},Fb=()=>{const n=oe.useContext(Bb);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},y3=()=>{const{user:n,apiKey:e,saveApiKey:t,removeApiKey:i,signOut:r}=Fb(),[l,u]=oe.useState([{id:"1",date:new Date().toISOString().split("T")[0],dateType:"date",categorizedContent:{},otherInformation:""}]),[f,g]=oe.useState("profile"),[h,_]=oe.useState(!1),[T,S]=oe.useState({});oe.useEffect(()=>{if(!n){S({});return}const ue=c3(xd(Nd,"users",n.uid),Te=>{if(Te.exists()){const Ne=Te.data();S(Ne.customItems||{})}});return()=>ue()},[n]);const[w,H]=oe.useState(""),[P,k]=oe.useState([]),[K,B]=oe.useState(-1),[ee,re]=oe.useState(!1),[he,fe]=oe.useState(!1),[M,N]=oe.useState(!1),[R,O]=oe.useState(null),[U,q]=oe.useState({age:"65",gender:"male",underlying_diseases:["Hypertension","Diabetes Mellitus"],control_quality:"",management_modality:"",follow_up_status:""}),[D,Ge]=oe.useState("himself"),[at,X]=oe.useState(""),[de,Se]=oe.useState(null),[Ke,Ye]=oe.useState(null),[F,j]=oe.useState(""),[ce,me]=oe.useState(!1),[be,xe]=oe.useState(""),[He,yt]=oe.useState(!1),lt=oe.useRef(null),[Nn,Si]=oe.useState(260),[Fn,Ai]=oe.useState(300),[an,Gi]=oe.useState(380),[Xt,ms]=oe.useState(!1),[Ci,ht]=oe.useState(null),ut=oe.useRef(!1),Mn=oe.useMemo(()=>{for(let ue=l.length-1;ue>=0;ue--){const Te=l[ue].categorizedContent["Definitive diagnosis"];if(Te&&Te.trim())return Te}return"Pending"},[l]),Zn=ue=>Te=>{ut.current=!0,Te.preventDefault();const Ne=Te.clientX,Oe=Te.clientY,it=ue==="sidebar"?Nn:Fn,vn=an,Ft=un=>{ut.current&&(ue==="sidebar"?Si(Math.max(200,Math.min(600,it+(un.clientX-Ne)))):ue==="timeline"?Ai(Math.max(200,Math.min(600,it+(un.clientX-Ne)))):ue==="genArea"&&Gi(Math.max(200,Math.min(window.innerHeight-100,vn-(un.clientY-Oe)))))},tt=()=>{ut.current=!1,document.removeEventListener("mousemove",Ft),document.removeEventListener("mouseup",tt)};document.addEventListener("mousemove",Ft),document.addEventListener("mouseup",tt)},ei=()=>{const ue=Date.now().toString();u([...l,{id:ue,date:"",dateType:"date",categorizedContent:{},otherInformation:""}]),g(ue)},Ut=ue=>{if(l.length<=1)return alert("Must have at least one timepoint.");const Te=l.findIndex(Ne=>Ne.id===ue);O({id:ue,index:Te})},Gn=()=>{if(!R)return;const{id:ue,index:Te}=R;u(Ne=>{var it,vn;const Oe=Ne.filter(Ft=>Ft.id!==ue);return f===ue&&g(((it=Oe[Te])==null?void 0:it.id)||((vn=Oe[Te-1])==null?void 0:vn.id)||"profile"),Oe}),O(null)},gs=(ue,Te)=>{u(Ne=>Ne.map(Oe=>Oe.id===ue?{...Oe,...Te}:Oe))},bi=(ue,Te)=>{const Ne=l.find(Oe=>Oe.id===Te);Ne&&u(Oe=>Oe.map(it=>{if(it.id===ue){const vn={...it.categorizedContent};Object.keys(Ne.categorizedContent).forEach(tt=>{const un=Ne.categorizedContent[tt];if(un){const wi=vn[tt]||"";vn[tt]=wi?`${wi}, ${un}`:un}});let Ft=it.otherInformation;return Ne.otherInformation&&(Ft=Ft?`${Ft}
${Ne.otherInformation}`:Ne.otherInformation),{...it,categorizedContent:vn,otherInformation:Ft}}return it}))},bn=(ue,Te)=>{if(f){if(f==="profile"){ue==="Underlying disease"&&q(Ne=>({...Ne,underlying_diseases:Array.from(new Set([...Ne.underlying_diseases,Te]))}));return}ht({category:ue,timestamp:Date.now()}),u(Ne=>Ne.map(Oe=>{if(Oe.id===f){const it=Oe.categorizedContent[ue]||"";return{...Oe,categorizedContent:{...Oe.categorizedContent,[ue]:it?`${it}, ${Te}`:Te}}}return Oe}))}},qi=()=>({patient_profile:{age:parseInt(U.age)||0,gender:U.gender,informant:D,underlying_disease:U.underlying_diseases,control_status:{quality:U.control_quality,modality:U.management_modality,follow_up:U.follow_up_status}},timepoints:l.map(ue=>({date:ue.date,vital_sign:ue.categorizedContent["Vital Sign"]||"",symptom:ue.categorizedContent.Symptom||"",negative_symptom:ue.categorizedContent["Negative Symptom"]||"",medical_facility:ue.categorizedContent["Medical Facility"]||"",tentative_diagnosis:ue.categorizedContent["Tentative Diagnosis"]||"",underlying_disease:ue.categorizedContent["Underlying disease"]||"",definitive_diagnosis:ue.categorizedContent["Definitive diagnosis"]||"",physical_examination:ue.categorizedContent["Physical examination"]||"",lab_data:ue.categorizedContent["Lab data"]||"",image_finding:ue.categorizedContent["Image finding"]||"",treatment:ue.categorizedContent.Treatment||"",other_information:ue.otherInformation||""}))}),ti=ue=>{const Ne=[...P.slice(0,K+1),ue];k(Ne),B(Ne.length-1),H(ue)},ys=async()=>{if(!e){fe(!0);return}_(!0);const ue=qi(),Te=await ck(ue,e);ti(Te),_(!1)},ni=async ue=>{if(!e){fe(!0);return}const Te=ue||be;if(!Te.trim()||!w)return;yt(!0);const Ne=qi(),Oe=await dk(Ne,w,Te,e);ti(Oe),yt(!1),ue||xe("")},Wt=()=>{if(K>0){const ue=K-1;B(ue),H(P[ue])}},Mt=()=>{if(K<P.length-1){const ue=K+1;B(ue),H(P[ue])}},ln=ue=>{B(ue),H(P[ue]),re(!1)},Ct=()=>{const ue=lt.current;if(!ue)return;const Te=ue.selectionStart,Ne=ue.selectionEnd,Oe=ue.value.substring(Te,Ne).trim();if(Oe.length>0){const it=ue.getBoundingClientRect();X(Oe),Se({start:Te,end:Ne}),Ye({x:it.left+50,y:it.top+50})}else X(""),Se(null),Ye(null)},vs=async()=>{if(!e){fe(!0);return}if(!at||!F||!de)return;me(!0);const ue=qi(),Te=await fk(ue,w,at,F,e),Ne=w.substring(0,de.start),Oe=w.substring(de.end),it=Ne+Te+Oe;ti(it),me(!1),Ye(null),X(""),j("")},zi=()=>{w&&(navigator.clipboard.writeText(w),N(!0),setTimeout(()=>N(!1),2e3))},_s=l.find(ue=>ue.id===f),Dn=!e&&!he;return C.jsxs("div",{className:"h-screen w-screen flex flex-col bg-slate-50 text-slate-800 font-sans overflow-hidden",children:[C.jsx(Xx,{isOpen:!!R,onClose:()=>O(null),onConfirm:Gn,title:"Delete Timepoint",message:"Are you sure?"}),C.jsx(jx,{isOpen:Dn||he,onSave:async ue=>{await t(ue),fe(!1)},isDismissible:!!e,onDismiss:()=>fe(!1)}),ee&&C.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>re(!1)}),C.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[C.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-blue-700",children:[C.jsx(u_,{className:"w-5 h-5"}),C.jsx("h3",{className:"font-bold",children:"Version History"})]}),C.jsx("button",{onClick:()=>re(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:C.jsx(_u,{className:"w-5 h-5"})})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[P.length===0&&C.jsx("p",{className:"text-center text-slate-400 py-10",children:"No history available yet."}),[...P].reverse().map((ue,Te)=>{const Ne=P.length-1-Te,Oe=Ne===K;return C.jsxs("button",{onClick:()=>ln(Ne),className:`w-full text-left p-4 rounded-xl border-2 transition-all flex items-start space-x-4 ${Oe?"border-blue-500 bg-blue-50":"border-slate-100 hover:border-blue-200 hover:bg-slate-50"}`,children:[C.jsx("div",{className:`mt-1 p-2 rounded-lg ${Oe?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:C.jsx(jI,{className:"w-4 h-4"})}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsxs("div",{className:"flex items-center justify-between mb-1",children:[C.jsxs("span",{className:"font-bold text-sm",children:["Version ",Ne+1]}),Oe&&C.jsx("span",{className:"text-[10px] font-black uppercase text-blue-600 bg-blue-100 px-2 py-0.5 rounded",children:"Active"})]}),C.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2 italic",children:[ue.substring(0,150),"..."]})]}),C.jsx(UI,{className:"w-4 h-4 self-center text-slate-300"})]},Ne)})]})]})]}),C.jsxs("header",{className:"h-14 bg-blue-900 text-white flex items-center px-4 justify-between shadow-md z-20 flex-shrink-0",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(ES,{className:"w-5 h-5"}),C.jsx("h1",{className:"font-bold text-lg hidden md:block",children:"Smart Medical Record"})]}),C.jsxs("div",{className:"hidden md:flex text-sm opacity-80 gap-4",children:[C.jsxs("span",{children:["Patient: ",U.age,"y/",U.gender]}),C.jsxs("span",{className:"max-w-[300px] truncate",children:["Dx: ",Mn]})]}),C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("button",{onClick:()=>fe(!0),className:"p-1.5 rounded-full hover:bg-blue-800 text-blue-200 transition-colors",title:"API Key Settings",children:C.jsx(SS,{className:"w-4 h-4"})}),C.jsxs("div",{className:"flex items-center space-x-2 bg-blue-800 rounded-full pl-1 pr-3 py-1",children:[n!=null&&n.photoURL?C.jsx("img",{src:n.photoURL,alt:"User",className:"w-6 h-6 rounded-full border border-white/20"}):C.jsx(TS,{className:"w-6 h-6 text-blue-200"}),C.jsx("span",{className:"text-xs font-semibold max-w-[100px] truncate",children:(n==null?void 0:n.displayName)||(n==null?void 0:n.email)})]}),C.jsx("button",{onClick:r,className:"p-1.5 hover:bg-red-600 rounded-full transition-colors text-white",title:"Sign Out",children:C.jsx(mx,{className:"w-4 h-4"})})]})]}),C.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[C.jsx("div",{style:{width:Nn},className:"flex-shrink-0 z-10 flex flex-col",children:C.jsx($x,{onItemClick:bn})}),C.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:Zn("sidebar")}),C.jsx("div",{style:{width:Fn},className:"flex-shrink-0 z-0 flex flex-col",children:C.jsx(Jx,{events:l,activeEventId:f,onSelectEvent:g,onAddEvent:ei,onDeleteEvent:Ut,onCopyFromEvent:bi})}),C.jsx("div",{className:"w-1 bg-slate-300 hover:bg-blue-500 cursor-col-resize z-20 transition-colors",onMouseDown:Zn("timeline")}),C.jsx("div",{className:"flex-1 min-w-0",children:C.jsx(Qx,{event:_s,onUpdate:gs,profile:U,onUpdateProfile:q,isProfileSelected:f==="profile",informant:D,setInformant:Ge,lastUpdateTrigger:Ci})})]}),!Xt&&C.jsx("div",{className:"h-1 bg-slate-300 hover:bg-blue-500 cursor-row-resize z-20",onMouseDown:Zn("genArea")}),C.jsxs("div",{style:{height:Xt?"100vh":an},className:`flex flex-col border-t-4 border-slate-200 bg-white shadow-2xl transition-all ${Xt?"fixed inset-0 z-50":"relative"}`,children:[C.jsxs("div",{className:"px-6 py-3 border-b flex items-center justify-between bg-slate-50",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(gd,{className:"w-5 h-5 text-purple-600"}),C.jsx("h2",{className:"font-bold text-slate-700",children:"AI Generation Area"}),C.jsxs("div",{className:"flex items-center ml-4 bg-white rounded-lg border border-slate-200 p-0.5 shadow-sm",children:[C.jsx("button",{onClick:Wt,disabled:K<=0,title:"Undo (Ctrl+Z)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 transition-colors",children:C.jsx(Lx,{className:"w-4 h-4"})}),C.jsx("button",{onClick:Mt,disabled:K>=P.length-1,title:"Redo (Ctrl+Y)",className:"p-1.5 hover:bg-slate-100 rounded text-slate-600 disabled:text-slate-200 border-l border-slate-100 transition-colors",children:C.jsx(wx,{className:"w-4 h-4"})}),C.jsxs("button",{onClick:()=>re(!0),className:"p-1.5 hover:bg-slate-100 rounded text-blue-600 font-bold text-xs flex items-center border-l border-slate-100 transition-colors",children:[C.jsx(u_,{className:"w-3.5 h-3.5 mr-1"}),"V",K+1]})]})]}),C.jsxs("div",{className:"flex items-center space-x-3",children:[w&&C.jsxs("button",{onClick:zi,className:`flex items-center px-4 py-2 rounded-full font-bold text-sm transition-all shadow-sm ${M?"bg-green-100 text-green-700 border border-green-200":"bg-white border border-slate-300 text-slate-700 hover:bg-slate-100 active:scale-95"}`,children:[M?C.jsx(_S,{className:"w-4 h-4 mr-2"}):C.jsx(Mm,{className:"w-4 h-4 mr-2"}),M?"Copied":"Copy"]}),C.jsx("button",{onClick:()=>ms(!Xt),className:"p-2 text-slate-500 hover:bg-slate-200 rounded-full transition-colors",children:Xt?C.jsx(Ex,{className:"w-5 h-5"}):C.jsx(yx,{className:"w-5 h-5"})}),C.jsxs("button",{onClick:ys,disabled:h,className:`flex items-center px-6 py-2 rounded-full font-bold shadow-md transition-all active:scale-95 ${h?"bg-slate-300 cursor-not-allowed opacity-70":"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:brightness-110"}`,children:[h?C.jsx(fu,{className:"w-4 h-4 mr-2 animate-spin"}):null,h?"Generating...":"Generate Note"]})]})]}),C.jsxs("div",{className:"flex-1 flex bg-slate-50 overflow-hidden",children:[C.jsx("div",{className:"w-[70%] h-full p-4 relative overflow-hidden flex flex-col",children:C.jsxs("div",{className:"flex-1 relative",children:[C.jsx("textarea",{ref:lt,onMouseUp:Ct,onKeyUp:Ct,className:"w-full h-full p-8 bg-white border rounded-lg shadow-inner resize-none font-serif text-lg leading-relaxed custom-scrollbar outline-none focus:ring-2 focus:ring-blue-100 transition-shadow",value:w,onChange:ue=>{const Te=ue.target.value;H(Te)},placeholder:e?"The generated medical admission note will appear here...":"Please set your API Key to start generating notes."}),Ke&&at&&C.jsxs("div",{className:"absolute z-[60] bg-white border border-slate-200 rounded-xl shadow-2xl p-4 w-80 animate-in zoom-in-95 duration-200",style:{top:20,right:20},children:[C.jsxs("div",{className:"flex items-center justify-between mb-3",children:[C.jsxs("div",{className:"flex items-center space-x-1.5 text-blue-600",children:[C.jsx(Fx,{className:"w-4 h-4"}),C.jsx("span",{className:"text-xs font-bold uppercase",children:"Refine Selection"})]}),C.jsx("button",{onClick:()=>{Ye(null),X("")},className:"text-slate-400 hover:text-slate-600",children:C.jsx(_u,{className:"w-4 h-4"})})]}),C.jsxs("div",{className:"mb-3",children:[C.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Target Text"}),C.jsxs("div",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded border border-slate-100 max-h-20 overflow-y-auto italic",children:['"',at,'"']})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsx("textarea",{autoFocus:!0,placeholder:"e.g. Rewrite this more formally...",className:"w-full p-2.5 text-xs border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none h-20",value:F,onChange:ue=>j(ue.target.value)}),C.jsxs("button",{disabled:ce||!F.trim(),onClick:vs,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold rounded-lg shadow-md transition-all flex items-center justify-center disabled:bg-slate-300",children:[ce?C.jsx(fu,{className:"w-3.5 h-3.5 mr-2 animate-spin"}):C.jsx(gd,{className:"w-3.5 h-3.5 mr-2"}),ce?"Refining...":"Refine Segment"]})]})]})]})}),C.jsxs("div",{className:"w-[30%] h-full border-l border-slate-200 bg-white flex flex-col",children:[C.jsxs("div",{className:"p-3 border-b flex items-center space-x-2 bg-slate-50/50",children:[C.jsx(_x,{className:"w-4 h-4 text-blue-600"}),C.jsx("h3",{className:"text-xs font-bold text-slate-700 uppercase tracking-widest",children:" Assistant"})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Quick Refine"}),C.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[C.jsxs("button",{onClick:()=>ni("Make the note more concise and pithy without losing clinical facts."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(Yx,{className:"w-3.5 h-3.5 mr-2 text-yellow-500"}),C.jsx("span",{children:" (Make it concise)"})]}),C.jsxs("button",{onClick:()=>ni("Analyze the original JSON data and checking if any clinical details are missing in the current draft. Flag them or add them if the data allows."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(OI,{className:"w-3.5 h-3.5 mr-2 text-purple-500"}),C.jsx("span",{children:" (Detail check)"})]}),C.jsxs("button",{onClick:()=>ni("Carefully check for grammar, prepositions, and article usage. Ensure formal academic medical tone."),className:"flex items-center p-2 text-xs font-semibold text-slate-600 border rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all text-left",children:[C.jsx(Vx,{className:"w-3.5 h-3.5 mr-2 text-blue-500"}),C.jsx("span",{children:" (Grammar check)"})]})]})]}),C.jsx("div",{className:"h-px bg-slate-100 my-2"}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter",children:"Manual Refinement"}),C.jsx("textarea",{className:"w-full h-32 p-3 text-sm border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-100 outline-none transition-shadow resize-none bg-slate-50/30",placeholder:"e.g. Rewrite the second paragraph to emphasize the fever course...",value:be,onChange:ue=>xe(ue.target.value)}),C.jsxs("button",{disabled:He||!be.trim()||!w,onClick:()=>ni(),className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-xl shadow-md transition-all flex items-center justify-center disabled:bg-slate-200 disabled:text-slate-400",children:[He?C.jsx(fu,{className:"w-4 h-4 mr-2 animate-spin"}):C.jsx(gd,{className:"w-4 h-4 mr-2"}),He?"Refining Note...":"Refine Full Note"]})]}),!w&&C.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-100 text-[11px] text-amber-700 italic",children:"Generate a note first to use the refinement assistant."})]})]})]})]})]})},v3=()=>C.jsx(g3,{children:C.jsx(_3,{})}),_3=()=>{const{user:n,loading:e,signInWithGoogle:t,error:i}=Fb();return e?C.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-blue-50",children:C.jsx(fu,{className:"w-10 h-10 text-blue-600 animate-spin"})}):n?C.jsx(y3,{}):C.jsx(Wx,{onLogin:t,authError:i})},Gb=document.getElementById("root");if(!Gb)throw new Error("Could not find root element to mount to");const T3=xI.createRoot(Gb);T3.render(C.jsx(mS.StrictMode,{children:C.jsx(v3,{})}));
